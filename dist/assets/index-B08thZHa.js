(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var aB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W6(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Rx={exports:{}},wf={};var l5;function Y6(){if(l5)return wf;l5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var c=null;if(a!==void 0&&(c=""+a),i.key!==void 0&&(c=""+i.key),"key"in i){a={};for(var d in i)d!=="key"&&(a[d]=i[d])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:c,ref:i!==void 0?i:null,props:a}}return wf.Fragment=e,wf.jsx=t,wf.jsxs=t,wf}var c5;function K6(){return c5||(c5=1,Rx.exports=Y6()),Rx.exports}var l=K6(),Lx={exports:{}},an={};var u5;function Q6(){if(u5)return an;u5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),N=Symbol.iterator;function b(X){return X===null||typeof X!="object"?null:(X=N&&X[N]||X["@@iterator"],typeof X=="function"?X:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,R={};function I(X,q,J){this.props=X,this.context=q,this.refs=R,this.updater=J||j}I.prototype.isReactComponent={},I.prototype.setState=function(X,q){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,q,"setState")},I.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function B(){}B.prototype=I.prototype;function z(X,q,J){this.props=X,this.context=q,this.refs=R,this.updater=J||j}var H=z.prototype=new B;H.constructor=z,C(H,I.prototype),H.isPureReactComponent=!0;var he=Array.isArray;function re(){}var V={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function k(X,q,J){var ne=J.ref;return{$$typeof:n,type:X,key:q,ref:ne!==void 0?ne:null,props:J}}function G(X,q){return k(X.type,q,X.props)}function S(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function L(X){var q={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(J){return q[J]})}var F=/\/+/g;function ae(X,q){return typeof X=="object"&&X!==null&&X.key!=null?L(""+X.key):q.toString(36)}function ve(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(re,re):(X.status="pending",X.then(function(q){X.status==="pending"&&(X.status="fulfilled",X.value=q)},function(q){X.status==="pending"&&(X.status="rejected",X.reason=q)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function K(X,q,J,ne,ue){var pe=typeof X;(pe==="undefined"||pe==="boolean")&&(X=null);var we=!1;if(X===null)we=!0;else switch(pe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(X.$$typeof){case n:case e:we=!0;break;case p:return we=X._init,K(we(X._payload),q,J,ne,ue)}}if(we)return ue=ue(X),we=ne===""?"."+ae(X,0):ne,he(ue)?(J="",we!=null&&(J=we.replace(F,"$&/")+"/"),K(ue,q,J,"",function(Ue){return Ue})):ue!=null&&(S(ue)&&(ue=G(ue,J+(ue.key==null||X&&X.key===ue.key?"":(""+ue.key).replace(F,"$&/")+"/")+we)),q.push(ue)),1;we=0;var De=ne===""?".":ne+":";if(he(X))for(var Re=0;Re<X.length;Re++)ne=X[Re],pe=De+ae(ne,Re),we+=K(ne,q,J,pe,ue);else if(Re=b(X),typeof Re=="function")for(X=Re.call(X),Re=0;!(ne=X.next()).done;)ne=ne.value,pe=De+ae(ne,Re++),we+=K(ne,q,J,pe,ue);else if(pe==="object"){if(typeof X.then=="function")return K(ve(X),q,J,ne,ue);throw q=String(X),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return we}function ce(X,q,J){if(X==null)return X;var ne=[],ue=0;return K(X,ne,"","",function(pe){return q.call(J,pe,ue++)}),ne}function me(X){if(X._status===-1){var q=X._result;q=q(),q.then(function(J){(X._status===0||X._status===-1)&&(X._status=1,X._result=J)},function(J){(X._status===0||X._status===-1)&&(X._status=2,X._result=J)}),X._status===-1&&(X._status=0,X._result=q)}if(X._status===1)return X._result.default;throw X._result}var Se=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},qe={map:ce,forEach:function(X,q,J){ce(X,function(){q.apply(this,arguments)},J)},count:function(X){var q=0;return ce(X,function(){q++}),q},toArray:function(X){return ce(X,function(q){return q})||[]},only:function(X){if(!S(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return an.Activity=y,an.Children=qe,an.Component=I,an.Fragment=t,an.Profiler=i,an.PureComponent=z,an.StrictMode=r,an.Suspense=h,an.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,an.__COMPILER_RUNTIME={__proto__:null,c:function(X){return V.H.useMemoCache(X)}},an.cache=function(X){return function(){return X.apply(null,arguments)}},an.cacheSignal=function(){return null},an.cloneElement=function(X,q,J){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var ne=C({},X.props),ue=X.key;if(q!=null)for(pe in q.key!==void 0&&(ue=""+q.key),q)!D.call(q,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&q.ref===void 0||(ne[pe]=q[pe]);var pe=arguments.length-2;if(pe===1)ne.children=J;else if(1<pe){for(var we=Array(pe),De=0;De<pe;De++)we[De]=arguments[De+2];ne.children=we}return k(X.type,ue,ne)},an.createContext=function(X){return X={$$typeof:c,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},an.createElement=function(X,q,J){var ne,ue={},pe=null;if(q!=null)for(ne in q.key!==void 0&&(pe=""+q.key),q)D.call(q,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ue[ne]=q[ne]);var we=arguments.length-2;if(we===1)ue.children=J;else if(1<we){for(var De=Array(we),Re=0;Re<we;Re++)De[Re]=arguments[Re+2];ue.children=De}if(X&&X.defaultProps)for(ne in we=X.defaultProps,we)ue[ne]===void 0&&(ue[ne]=we[ne]);return k(X,pe,ue)},an.createRef=function(){return{current:null}},an.forwardRef=function(X){return{$$typeof:d,render:X}},an.isValidElement=S,an.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:me}},an.memo=function(X,q){return{$$typeof:f,type:X,compare:q===void 0?null:q}},an.startTransition=function(X){var q=V.T,J={};V.T=J;try{var ne=X(),ue=V.S;ue!==null&&ue(J,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(re,Se)}catch(pe){Se(pe)}finally{q!==null&&J.types!==null&&(q.types=J.types),V.T=q}},an.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},an.use=function(X){return V.H.use(X)},an.useActionState=function(X,q,J){return V.H.useActionState(X,q,J)},an.useCallback=function(X,q){return V.H.useCallback(X,q)},an.useContext=function(X){return V.H.useContext(X)},an.useDebugValue=function(){},an.useDeferredValue=function(X,q){return V.H.useDeferredValue(X,q)},an.useEffect=function(X,q){return V.H.useEffect(X,q)},an.useEffectEvent=function(X){return V.H.useEffectEvent(X)},an.useId=function(){return V.H.useId()},an.useImperativeHandle=function(X,q,J){return V.H.useImperativeHandle(X,q,J)},an.useInsertionEffect=function(X,q){return V.H.useInsertionEffect(X,q)},an.useLayoutEffect=function(X,q){return V.H.useLayoutEffect(X,q)},an.useMemo=function(X,q){return V.H.useMemo(X,q)},an.useOptimistic=function(X,q){return V.H.useOptimistic(X,q)},an.useReducer=function(X,q,J){return V.H.useReducer(X,q,J)},an.useRef=function(X){return V.H.useRef(X)},an.useState=function(X){return V.H.useState(X)},an.useSyncExternalStore=function(X,q,J){return V.H.useSyncExternalStore(X,q,J)},an.useTransition=function(){return V.H.useTransition()},an.version="19.2.1",an}var d5;function A1(){return d5||(d5=1,Lx.exports=Q6()),Lx.exports}var fe=A1();const ru=W6(fe);var kx={exports:{}},_f={},Px={exports:{}},Dx={};var h5;function X6(){return h5||(h5=1,(function(n){function e(K,ce){var me=K.length;K.push(ce);e:for(;0<me;){var Se=me-1>>>1,qe=K[Se];if(0<i(qe,ce))K[Se]=ce,K[me]=qe,me=Se;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ce=K[0],me=K.pop();if(me!==ce){K[0]=me;e:for(var Se=0,qe=K.length,X=qe>>>1;Se<X;){var q=2*(Se+1)-1,J=K[q],ne=q+1,ue=K[ne];if(0>i(J,me))ne<qe&&0>i(ue,J)?(K[Se]=ue,K[ne]=me,Se=ne):(K[Se]=J,K[q]=me,Se=q);else if(ne<qe&&0>i(ue,me))K[Se]=ue,K[ne]=me,Se=ne;else break e}}return ce}function i(K,ce){var me=K.sortIndex-ce.sortIndex;return me!==0?me:K.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],f=[],p=1,y=null,N=3,b=!1,j=!1,C=!1,R=!1,I=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function H(K){for(var ce=t(f);ce!==null;){if(ce.callback===null)r(f);else if(ce.startTime<=K)r(f),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=t(f)}}function he(K){if(C=!1,H(K),!j)if(t(h)!==null)j=!0,re||(re=!0,L());else{var ce=t(f);ce!==null&&ve(he,ce.startTime-K)}}var re=!1,V=-1,D=5,k=-1;function G(){return R?!0:!(n.unstable_now()-k<D)}function S(){if(R=!1,re){var K=n.unstable_now();k=K;var ce=!0;try{e:{j=!1,C&&(C=!1,B(V),V=-1),b=!0;var me=N;try{t:{for(H(K),y=t(h);y!==null&&!(y.expirationTime>K&&G());){var Se=y.callback;if(typeof Se=="function"){y.callback=null,N=y.priorityLevel;var qe=Se(y.expirationTime<=K);if(K=n.unstable_now(),typeof qe=="function"){y.callback=qe,H(K),ce=!0;break t}y===t(h)&&r(h),H(K)}else r(h);y=t(h)}if(y!==null)ce=!0;else{var X=t(f);X!==null&&ve(he,X.startTime-K),ce=!1}}break e}finally{y=null,N=me,b=!1}ce=void 0}}finally{ce?L():re=!1}}}var L;if(typeof z=="function")L=function(){z(S)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ae=F.port2;F.port1.onmessage=S,L=function(){ae.postMessage(null)}}else L=function(){I(S,0)};function ve(K,ce){V=I(function(){K(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_next=function(K){switch(N){case 1:case 2:case 3:var ce=3;break;default:ce=N}var me=N;N=ce;try{return K()}finally{N=me}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(K,ce){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var me=N;N=K;try{return ce()}finally{N=me}},n.unstable_scheduleCallback=function(K,ce,me){var Se=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Se+me:Se):me=Se,K){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=me+qe,K={id:p++,callback:ce,priorityLevel:K,startTime:me,expirationTime:qe,sortIndex:-1},me>Se?(K.sortIndex=me,e(f,K),t(h)===null&&K===t(f)&&(C?(B(V),V=-1):C=!0,ve(he,me-Se))):(K.sortIndex=qe,e(h,K),j||b||(j=!0,re||(re=!0,L()))),K},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(K){var ce=N;return function(){var me=N;N=ce;try{return K.apply(this,arguments)}finally{N=me}}}})(Dx)),Dx}var f5;function J6(){return f5||(f5=1,Px.exports=X6()),Px.exports}var Mx={exports:{}},Ns={};var m5;function Z6(){if(m5)return Ns;m5=1;var n=A1();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(h,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:h,containerInfo:f,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ns.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ns.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(h,f,null,p)},Ns.flushSync=function(h){var f=c.T,p=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=f,r.p=p,r.d.f()}},Ns.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},Ns.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Ns.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,y=d(p,f.crossOrigin),N=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:N,fetchPriority:b}):p==="script"&&r.d.X(h,{crossOrigin:y,integrity:N,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ns.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=d(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},Ns.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=d(p,f.crossOrigin);r.d.L(h,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ns.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=d(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},Ns.requestFormReset=function(h){r.d.r(h)},Ns.unstable_batchedUpdates=function(h,f){return h(f)},Ns.useFormState=function(h,f,p){return c.H.useFormState(h,f,p)},Ns.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ns.version="19.2.1",Ns}var p5;function eE(){if(p5)return Mx.exports;p5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mx.exports=Z6(),Mx.exports}var g5;function tE(){if(g5)return _f;g5=1;var n=J6(),e=A1(),t=eE();function r(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function c(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(r(188))}function f(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(r(188));return o!==s?null:s}for(var u=s,m=o;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(m=v.return,m!==null){u=m;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return h(v),s;if(_===m)return h(v),o;_=_.sibling}throw Error(r(188))}if(u.return!==m.return)u=v,m=_;else{for(var M=!1,Q=v.child;Q;){if(Q===u){M=!0,u=v,m=_;break}if(Q===m){M=!0,m=v,u=_;break}Q=Q.sibling}if(!M){for(Q=_.child;Q;){if(Q===u){M=!0,u=_,m=v;break}if(Q===m){M=!0,m=_,u=v;break}Q=Q.sibling}if(!M)throw Error(r(189))}}if(u.alternate!==m)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?s:o}function p(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=p(s),o!==null)return o;s=s.sibling}return null}var y=Object.assign,N=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),z=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),S=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=S&&s[S]||s["@@iterator"],typeof s=="function"?s:null)}var F=Symbol.for("react.client.reference");function ae(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===F?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case C:return"Fragment";case I:return"Profiler";case R:return"StrictMode";case he:return"Suspense";case re:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case j:return"Portal";case z:return s.displayName||"Context";case B:return(s._context.displayName||"Context")+".Consumer";case H:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return o=s.displayName||null,o!==null?o:ae(s.type)||"Memo";case D:o=s._payload,s=s._init;try{return ae(s(o))}catch{}}return null}var ve=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Se=[],qe=-1;function X(s){return{current:s}}function q(s){0>qe||(s.current=Se[qe],Se[qe]=null,qe--)}function J(s,o){qe++,Se[qe]=s.current,s.current=o}var ne=X(null),ue=X(null),pe=X(null),we=X(null);function De(s,o){switch(J(pe,o),J(ue,s),J(ne,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?Rb(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=Rb(o),s=Lb(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}q(ne),J(ne,s)}function Re(){q(ne),q(ue),q(pe)}function Ue(s){s.memoizedState!==null&&J(we,s);var o=ne.current,u=Lb(o,s.type);o!==u&&(J(ue,s),J(ne,u))}function Ze(s){ue.current===s&&(q(ne),q(ue)),we.current===s&&(q(we),xf._currentValue=me)}var at,ot;function ht(s){if(at===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);at=o&&o[1]||"",ot=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+at+s+ot}var ie=!1;function rt(s,o){if(!s||ie)return"";ie=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var Ye=function(){throw Error()};if(Object.defineProperty(Ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ye,[])}catch(Fe){var Oe=Fe}Reflect.construct(s,[],Ye)}else{try{Ye.call()}catch(Fe){Oe=Fe}s.call(Ye.prototype)}}else{try{throw Error()}catch(Fe){Oe=Fe}(Ye=s())&&typeof Ye.catch=="function"&&Ye.catch(function(){})}}catch(Fe){if(Fe&&Oe&&typeof Fe.stack=="string")return[Fe.stack,Oe.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),M=_[0],Q=_[1];if(M&&Q){var ge=M.split(`
`),Pe=Q.split(`
`);for(v=m=0;m<ge.length&&!ge[m].includes("DetermineComponentFrameRoot");)m++;for(;v<Pe.length&&!Pe[v].includes("DetermineComponentFrameRoot");)v++;if(m===ge.length||v===Pe.length)for(m=ge.length-1,v=Pe.length-1;1<=m&&0<=v&&ge[m]!==Pe[v];)v--;for(;1<=m&&0<=v;m--,v--)if(ge[m]!==Pe[v]){if(m!==1||v!==1)do if(m--,v--,0>v||ge[m]!==Pe[v]){var He=`
`+ge[m].replace(" at new "," at ");return s.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",s.displayName)),He}while(1<=m&&0<=v);break}}}finally{ie=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?ht(u):""}function Kt(s,o){switch(s.tag){case 26:case 27:case 5:return ht(s.type);case 16:return ht("Lazy");case 13:return s.child!==o&&o!==null?ht("Suspense Fallback"):ht("Suspense");case 19:return ht("SuspenseList");case 0:case 15:return rt(s.type,!1);case 11:return rt(s.type.render,!1);case 1:return rt(s.type,!0);case 31:return ht("Activity");default:return""}}function Te(s){try{var o="",u=null;do o+=Kt(s,u),u=s,s=s.return;while(s);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Ae=Object.prototype.hasOwnProperty,Je=n.unstable_scheduleCallback,tt=n.unstable_cancelCallback,it=n.unstable_shouldYield,lt=n.unstable_requestPaint,zt=n.unstable_now,$t=n.unstable_getCurrentPriorityLevel,Gt=n.unstable_ImmediatePriority,cn=n.unstable_UserBlockingPriority,nn=n.unstable_NormalPriority,bt=n.unstable_LowPriority,Xt=n.unstable_IdlePriority,_t=n.log,yr=n.unstable_setDisableYieldValue,rn=null,It=null;function Bt(s){if(typeof _t=="function"&&yr(s),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(rn,s)}catch{}}var en=Math.clz32?Math.clz32:Ft,Et=Math.log,Dn=Math.LN2;function Ft(s){return s>>>=0,s===0?32:31-(Et(s)/Dn|0)|0}var qt=256,Fn=262144,St=4194304;function Nt(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function un(s,o,u){var m=s.pendingLanes;if(m===0)return 0;var v=0,_=s.suspendedLanes,M=s.pingedLanes;s=s.warmLanes;var Q=m&134217727;return Q!==0?(m=Q&~_,m!==0?v=Nt(m):(M&=Q,M!==0?v=Nt(M):u||(u=Q&~s,u!==0&&(v=Nt(u))))):(Q=m&~_,Q!==0?v=Nt(Q):M!==0?v=Nt(M):u||(u=m&~s,u!==0&&(v=Nt(u)))),v===0?0:o!==0&&o!==v&&(o&_)===0&&(_=v&-v,u=o&-o,_>=u||_===32&&(u&4194048)!==0)?o:v}function wi(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function ui(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hs(){var s=St;return St<<=1,(St&62914560)===0&&(St=4194304),s}function ei(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function Tt(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ga(s,o,u,m,v,_){var M=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var Q=s.entanglements,ge=s.expirationTimes,Pe=s.hiddenUpdates;for(u=M&~u;0<u;){var He=31-en(u),Ye=1<<He;Q[He]=0,ge[He]=-1;var Oe=Pe[He];if(Oe!==null)for(Pe[He]=null,He=0;He<Oe.length;He++){var Fe=Oe[He];Fe!==null&&(Fe.lane&=-536870913)}u&=~Ye}m!==0&&Ji(s,m,0),_!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=_&~(M&~o))}function Ji(s,o,u){s.pendingLanes|=o,s.suspendedLanes&=~o;var m=31-en(o);s.entangledLanes|=o,s.entanglements[m]=s.entanglements[m]|1073741824|u&261930}function Mi(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var m=31-en(u),v=1<<m;v&o|s[m]&o&&(s[m]|=o),u&=~v}}function Oi(s,o){var u=o&-o;return u=(u&42)!==0?1:Yn(u),(u&(s.suspendedLanes|o))!==0?0:u}function Yn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ir(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function zr(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:t5(s.type))}function _i(s,o){var u=ce.p;try{return ce.p=s,o()}finally{ce.p=u}}var di=Math.random().toString(36).slice(2),qn="__reactFiber$"+di,Qn="__reactProps$"+di,Hr="__reactContainer$"+di,Fi="__reactEvents$"+di,gs="__reactListeners$"+di,Fa="__reactHandles$"+di,Rs="__reactResources$"+di,qi="__reactMarker$"+di;function xa(s){delete s[qn],delete s[Qn],delete s[Fi],delete s[gs],delete s[Fa]}function Zi(s){var o=s[qn];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Hr]||u[qn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=qb(s);s!==null;){if(u=s[qn])return u;s=qb(s)}return o}s=u,u=s.parentNode}return null}function Ni(s){if(s=s[qn]||s[Hr]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function es(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(r(33))}function xs(s){var o=s[Rs];return o||(o=s[Rs]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function br(s){s[qi]=!0}var Uo=new Set,Vi={};function vs(s,o){Ls(s,o),Ls(s+"Capture",o)}function Ls(s,o){for(Vi[s]=o,s=0;s<o.length;s++)Uo.add(o[s])}var ho=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zo={},Ho={};function El(s){return Ae.call(Ho,s)?!0:Ae.call(zo,s)?!1:ho.test(s)?Ho[s]=!0:(zo[s]=!0,!1)}function ts(s,o,u){if(El(o))if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+u)}}function hi(s,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+u)}}function jr(s,o,u,m){if(m===null)s.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(o,u,""+m)}}function mn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function va(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ys(s,o,u){var m=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var v=m.get,_=m.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return v.call(this)},set:function(M){u=""+M,_.call(this,M)}}),Object.defineProperty(s,o,{enumerable:m.enumerable}),{getValue:function(){return u},setValue:function(M){u=""+M},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function bn(s){if(!s._valueTracker){var o=va(s)?"checked":"value";s._valueTracker=ys(s,o,""+s[o])}}function qa(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return s&&(m=va(s)?s.checked?"true":"false":s.value),s=m,s!==u?(o.setValue(s),!0):!1}function Dr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var mr=/[\n"\\]/g;function Er(s){return s.replace(mr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function fo(s,o,u,m,v,_,M,Q){s.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.type=M:s.removeAttribute("type"),o!=null?M==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+mn(o)):s.value!==""+mn(o)&&(s.value=""+mn(o)):M!=="submit"&&M!=="reset"||s.removeAttribute("value"),o!=null?Tl(s,M,mn(o)):u!=null?Tl(s,M,mn(u)):m!=null&&s.removeAttribute("value"),v==null&&_!=null&&(s.defaultChecked=!!_),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?s.name=""+mn(Q):s.removeAttribute("name")}function yc(s,o,u,m,v,_,M,Q){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),o!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){bn(s);return}u=u!=null?""+mn(u):"",o=o!=null?""+mn(o):u,Q||o===s.value||(s.value=o),s.defaultValue=o}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=Q?s.checked:!!m,s.defaultChecked=!!m,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(s.name=M),bn(s)}function Tl(s,o,u){o==="number"&&Dr(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function Ai(s,o,u,m){if(s=s.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<s.length;u++)v=o.hasOwnProperty("$"+s[u].value),s[u].selected!==v&&(s[u].selected=v),v&&m&&(s[u].defaultSelected=!0)}else{for(u=""+mn(u),o=null,v=0;v<s.length;v++){if(s[v].value===u){s[v].selected=!0,m&&(s[v].defaultSelected=!0);return}o!==null||s[v].disabled||(o=s[v])}o!==null&&(o.selected=!0)}}function Cl(s,o,u){if(o!=null&&(o=""+mn(o),o!==s.value&&(s.value=o),u==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=u!=null?""+mn(u):""}function ya(s,o,u,m){if(o==null){if(m!=null){if(u!=null)throw Error(r(92));if(ve(m)){if(1<m.length)throw Error(r(93));m=m[0]}u=m}u==null&&(u=""),o=u}u=mn(o),s.defaultValue=u,m=s.textContent,m===u&&m!==""&&m!==null&&(s.value=m),bn(s)}function ti(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var Va=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Il(s,o,u){var m=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":m?s.setProperty(o,u):typeof u!="number"||u===0||Va.has(o)?o==="float"?s.cssFloat=u:s[o]=(""+u).trim():s[o]=u+"px"}function Rl(s,o,u){if(o!=null&&typeof o!="object")throw Error(r(62));if(s=s.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var v in o)m=o[v],o.hasOwnProperty(v)&&u[v]!==m&&Il(s,v,m)}else for(var _ in o)o.hasOwnProperty(_)&&Il(s,_,o[_])}function $o(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Go=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ba=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bi(s){return ba.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ks(){}var wa=null;function Ui(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ba=null,Rt=null;function mo(s){var o=Ni(s);if(o&&(s=o.stateNode)){var u=s[Qn]||null;e:switch(s=o.stateNode,o.type){case"input":if(fo(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Er(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==s&&m.form===s.form){var v=m[Qn]||null;if(!v)throw Error(r(90));fo(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)m=u[o],m.form===s.form&&qa(m)}break e;case"textarea":Cl(s,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Ai(s,!!u.multiple,o,!1)}}}var Wo=!1;function Ua(s,o,u){if(Wo)return s(o,u);Wo=!0;try{var m=s(o);return m}finally{if(Wo=!1,(Ba!==null||Rt!==null)&&(Qm(),Ba&&(o=Ba,s=Rt,Rt=Ba=null,mo(o),s)))for(o=0;o<s.length;o++)mo(s[o])}}function ni(s,o){var u=s.stateNode;if(u===null)return null;var m=u[Qn]||null;if(m===null)return null;u=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(r(231,o,typeof u));return u}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),po=!1;if($r)try{var Vn={};Object.defineProperty(Vn,"passive",{get:function(){po=!0}}),window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch{po=!1}var ns=null,go=null,Ps=null;function Ll(){if(Ps)return Ps;var s,o=go,u=o.length,m,v="value"in ns?ns.value:ns.textContent,_=v.length;for(s=0;s<u&&o[s]===v[s];s++);var M=u-s;for(m=1;m<=M&&o[u-m]===v[_-m];m++);return Ps=v.slice(s,1<m?1-m:void 0)}function rs(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function _a(){return!0}function is(){return!1}function Mr(s){function o(u,m,v,_,M){this._reactName=u,this._targetInst=v,this.type=m,this.nativeEvent=_,this.target=M,this.currentTarget=null;for(var Q in s)s.hasOwnProperty(Q)&&(u=s[Q],this[Q]=u?u(_):_[Q]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?_a:is,this.isPropagationStopped=is,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=_a)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=_a)},persist:function(){},isPersistent:_a}),o}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fi=Mr($s),Gs=y({},$s,{view:0,detail:0}),za=Mr(Gs),Ws,Ys,bs,xo=y({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dt,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==bs&&(bs&&s.type==="mousemove"?(Ws=s.screenX-bs.screenX,Ys=s.screenY-bs.screenY):Ys=Ws=0,bs=s),Ws)},movementY:function(s){return"movementY"in s?s.movementY:Ys}}),Yo=Mr(xo),ss=y({},xo,{dataTransfer:0}),Ks=Mr(ss),kl=y({},Gs,{relatedTarget:0}),Ds=Mr(kl),Ko=y({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),A=Mr(Ko),U=y({},$s,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),oe=Mr(U),xe=y({},$s,{data:0}),Ne=Mr(xe),ze={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ft={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xt(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=ft[s])?!!o[s]:!1}function Dt(){return xt}var Ct=y({},Gs,{key:function(s){if(s.key){var o=ze[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=rs(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Qe[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dt,charCode:function(s){return s.type==="keypress"?rs(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?rs(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),pn=Mr(Ct),sr=y({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kn=Mr(sr),x=y({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dt}),T=Mr(x),O=y({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),ee=Mr(O),Ee=y({},xo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=Mr(Ee),nt=y({},$s,{newState:0,oldState:0}),Qt=Mr(nt),ar=[9,13,27,32],hn=$r&&"CompositionEvent"in window,Bn=null;$r&&"documentMode"in document&&(Bn=document.documentMode);var mi=$r&&"TextEvent"in window&&!Bn,Si=$r&&(!hn||Bn&&8<Bn&&11>=Bn),Xn=" ",ji=!1;function Ms(s,o){switch(s){case"keyup":return ar.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ha(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var $a=!1;function as(s,o){switch(s){case"compositionend":return Ha(o);case"keypress":return o.which!==32?null:(ji=!0,Xn);case"textInput":return s=o.data,s===Xn&&ji?null:s;default:return null}}function vo(s,o){if($a)return s==="compositionend"||!hn&&Ms(s,o)?(s=Ll(),Ps=go=ns=null,$a=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Si&&o.locale!=="ko"?null:o.data;default:return null}}var bc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ju(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!bc[s.type]:o==="textarea"}function Os(s,o,u,m){Ba?Rt?Rt.push(m):Rt=[m]:Ba=m,o=rp(o,"onChange"),0<o.length&&(u=new fi("onChange","change",null,u,m),s.push({event:u,listeners:o}))}var Na=null,yo=null;function Eu(s){Sb(s,0)}function Aa(s){var o=es(s);if(qa(o))return s}function Qo(s,o){if(s==="change")return o}var ws=!1;if($r){var os;if($r){var Ga="oninput"in document;if(!Ga){var Wa=document.createElement("div");Wa.setAttribute("oninput","return;"),Ga=typeof Wa.oninput=="function"}os=Ga}else os=!1;ws=os&&(!document.documentMode||9<document.documentMode)}function bo(){Na&&(Na.detachEvent("onpropertychange",wc),yo=Na=null)}function wc(s){if(s.propertyName==="value"&&Aa(yo)){var o=[];Os(o,yo,s,Ui(s)),Ua(Eu,o)}}function _c(s,o,u){s==="focusin"?(bo(),Na=o,yo=u,Na.attachEvent("onpropertychange",wc)):s==="focusout"&&bo()}function Or(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Aa(yo)}function fd(s,o){if(s==="click")return Aa(o)}function Ya(s,o){if(s==="input"||s==="change")return Aa(o)}function Ka(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Ei=typeof Object.is=="function"?Object.is:Ka;function wo(s,o){if(Ei(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var v=u[m];if(!Ae.call(o,v)||!Ei(s[v],o[v]))return!1}return!0}function Nc(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ac(s,o){var u=Nc(s);s=0;for(var m;u;){if(u.nodeType===3){if(m=s+u.textContent.length,s<=o&&m>=o)return{node:u,offset:o-s};s=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Nc(u)}}function _o(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?_o(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function No(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Dr(s.document);o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=Dr(s.document)}return o}function Qa(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var Pl=$r&&"documentMode"in document&&11>=document.documentMode,Fs=null,Ao=null,zi=null,Qs=!1;function Mn(s,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Qs||Fs==null||Fs!==Dr(m)||(m=Fs,"selectionStart"in m&&Qa(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),zi&&wo(zi,m)||(zi=m,m=rp(Ao,"onSelect"),0<m.length&&(o=new fi("onSelect","select",null,o,u),s.push({event:o,listeners:m}),o.target=Fs)))}function jn(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var or={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionrun:jn("Transition","TransitionRun"),transitionstart:jn("Transition","TransitionStart"),transitioncancel:jn("Transition","TransitionCancel"),transitionend:jn("Transition","TransitionEnd")},Fr={},Xa={};$r&&(Xa=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function Sa(s){if(Fr[s])return Fr[s];if(!or[s])return s;var o=or[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in Xa)return Fr[s]=o[u];return s}var Dl=Sa("animationend"),Tu=Sa("animationiteration"),qh=Sa("animationstart"),jm=Sa("transitionrun"),Em=Sa("transitionstart"),Tm=Sa("transitioncancel"),Vh=Sa("transitionend"),Bh=new Map,Ml="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ml.push("scrollEnd");function Xs(s,o){Bh.set(s,o),vs(o,[s])}var Cu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},qs=[],Ol=0,md=0;function Iu(){for(var s=Ol,o=md=Ol=0;o<s;){var u=qs[o];qs[o++]=null;var m=qs[o];qs[o++]=null;var v=qs[o];qs[o++]=null;var _=qs[o];if(qs[o++]=null,m!==null&&v!==null){var M=m.pending;M===null?v.next=v:(v.next=M.next,M.next=v),m.pending=v}_!==0&&Lu(u,v,_)}}function Ru(s,o,u,m){qs[Ol++]=s,qs[Ol++]=o,qs[Ol++]=u,qs[Ol++]=m,md|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function pd(s,o,u,m){return Ru(s,o,u,m),Hi(s)}function So(s,o){return Ru(s,null,null,o),Hi(s)}function Lu(s,o,u){s.lanes|=u;var m=s.alternate;m!==null&&(m.lanes|=u);for(var v=!1,_=s.return;_!==null;)_.childLanes|=u,m=_.alternate,m!==null&&(m.childLanes|=u),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(v=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,v&&o!==null&&(v=31-en(u),s=_.hiddenUpdates,m=s[v],m===null?s[v]=[o]:m.push(o),o.lane=u|536870912),_):null}function Hi(s){if(50<uf)throw uf=0,tx=null,Error(r(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Ti={};function gd(s,o,u,m){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(s,o,u,m){return new gd(s,o,u,m)}function xd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Js(s,o){var u=s.alternate;return u===null?(u=$i(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function ku(s,o){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,o=u.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Sc(s,o,u,m,v,_){var M=0;if(m=s,typeof s=="function")xd(s)&&(M=1);else if(typeof s=="string")M=D6(s,u,ne.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=$i(31,u,o,v),s.elementType=k,s.lanes=_,s;case C:return Xo(u.children,v,_,o);case R:M=8,v|=24;break;case I:return s=$i(12,u,o,v|2),s.elementType=I,s.lanes=_,s;case he:return s=$i(13,u,o,v),s.elementType=he,s.lanes=_,s;case re:return s=$i(19,u,o,v),s.elementType=re,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case z:M=10;break e;case B:M=9;break e;case H:M=11;break e;case V:M=14;break e;case D:M=16,m=null;break e}M=29,u=Error(r(130,s===null?"null":typeof s,"")),m=null}return o=$i(M,u,o,v),o.elementType=s,o.type=m,o.lanes=_,o}function Xo(s,o,u,m){return s=$i(7,s,m,o),s.lanes=u,s}function Pu(s,o,u){return s=$i(6,s,null,o),s.lanes=u,s}function vd(s){var o=$i(18,null,null,0);return o.stateNode=s,o}function jc(s,o,u){return o=$i(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var yd=new WeakMap;function Zs(s,o){if(typeof s=="object"&&s!==null){var u=yd.get(s);return u!==void 0?u:(o={value:s,source:o,stack:Te(o)},yd.set(s,o),o)}return{value:s,source:o,stack:Te(o)}}var Ec=[],Fl=0,bd=null,Du=0,ea=[],ta=0,Jo=null,na=1,ra="";function Vs(s,o){Ec[Fl++]=Du,Ec[Fl++]=bd,bd=s,Du=o}function Cm(s,o,u){ea[ta++]=na,ea[ta++]=ra,ea[ta++]=Jo,Jo=s;var m=na;s=ra;var v=32-en(m)-1;m&=~(1<<v),u+=1;var _=32-en(o)+v;if(30<_){var M=v-v%5;_=(m&(1<<M)-1).toString(32),m>>=M,v-=M,na=1<<32-en(o)+v|u<<v|m,ra=_+s}else na=1<<_|u<<v|m,ra=s}function Uh(s){s.return!==null&&(Vs(s,1),Cm(s,1,0))}function wd(s){for(;s===bd;)bd=Ec[--Fl],Ec[Fl]=null,Du=Ec[--Fl],Ec[Fl]=null;for(;s===Jo;)Jo=ea[--ta],ea[ta]=null,ra=ea[--ta],ea[ta]=null,na=ea[--ta],ea[ta]=null}function Im(s,o){ea[ta++]=na,ea[ta++]=ra,ea[ta++]=Jo,na=o.id,ra=o.overflow,Jo=s}var Ci=null,pr=null,xn=!1,ls=null,Tr=!1,ja=Error(r(519));function Zo(s){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tc(Zs(o,s)),ja}function zh(s){var o=s.stateNode,u=s.type,m=s.memoizedProps;switch(o[qn]=s,o[Qn]=m,u){case"dialog":yn("cancel",o),yn("close",o);break;case"iframe":case"object":case"embed":yn("load",o);break;case"video":case"audio":for(u=0;u<hf.length;u++)yn(hf[u],o);break;case"source":yn("error",o);break;case"img":case"image":case"link":yn("error",o),yn("load",o);break;case"details":yn("toggle",o);break;case"input":yn("invalid",o),yc(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":yn("invalid",o);break;case"textarea":yn("invalid",o),ya(o,m.value,m.defaultValue,m.children)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||m.suppressHydrationWarning===!0||Cb(o.textContent,u)?(m.popover!=null&&(yn("beforetoggle",o),yn("toggle",o)),m.onScroll!=null&&yn("scroll",o),m.onScrollEnd!=null&&yn("scrollend",o),m.onClick!=null&&(o.onclick=ks),o=!0):o=!1,o||Zo(s,!0)}function jo(s){for(Ci=s.return;Ci;)switch(Ci.tag){case 5:case 31:case 13:Tr=!1;return;case 27:case 3:Tr=!0;return;default:Ci=Ci.return}}function Ii(s){if(s!==Ci)return!1;if(!xn)return jo(s),xn=!0,!1;var o=s.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||gx(s.type,s.memoizedProps)),u=!u),u&&pr&&Zo(s),jo(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));pr=Fb(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));pr=Fb(s)}else o===27?(o=pr,Uc(s.type)?(s=wx,wx=null,pr=s):pr=o):pr=Ci?to(s.stateNode.nextSibling):null;return!0}function ql(){pr=Ci=null,xn=!1}function Hh(){var s=ls;return s!==null&&(ca===null?ca=s:ca.push.apply(ca,s),ls=null),s}function Tc(s){ls===null?ls=[s]:ls.push(s)}var _d=X(null),el=null,Ja=null;function tl(s,o,u){J(_d,o._currentValue),o._currentValue=u}function ia(s){s._currentValue=_d.current,q(_d)}function Cc(s,o,u){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===u)break;s=s.return}}function Vl(s,o,u,m){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var _=v.dependencies;if(_!==null){var M=v.child;_=_.firstContext;e:for(;_!==null;){var Q=_;_=v;for(var ge=0;ge<o.length;ge++)if(Q.context===o[ge]){_.lanes|=u,Q=_.alternate,Q!==null&&(Q.lanes|=u),Cc(_.return,u,s),m||(M=null);break e}_=Q.next}}else if(v.tag===18){if(M=v.return,M===null)throw Error(r(341));M.lanes|=u,_=M.alternate,_!==null&&(_.lanes|=u),Cc(M,u,s),M=null}else M=v.child;if(M!==null)M.return=v;else for(M=v;M!==null;){if(M===s){M=null;break}if(v=M.sibling,v!==null){v.return=M.return,M=v;break}M=M.return}v=M}}function nl(s,o,u,m){s=null;for(var v=o,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var M=v.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var Q=v.type;Ei(v.pendingProps.value,M.value)||(s!==null?s.push(Q):s=[Q])}}else if(v===we.current){if(M=v.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(xf):s=[xf])}v=v.return}s!==null&&Vl(o,s,u,m),o.flags|=262144}function Nd(s){for(s=s.firstContext;s!==null;){if(!Ei(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function rl(s){el=s,Ja=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ri(s){return Rm(el,s)}function Ad(s,o){return el===null&&rl(s),Rm(s,o)}function Rm(s,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Ja===null){if(s===null)throw Error(r(308));Ja=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Ja=Ja.next=o;return u}var b0=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(u,m){s.push(m)}};this.abort=function(){o.aborted=!0,s.forEach(function(u){return u()})}},w0=n.unstable_scheduleCallback,_0=n.unstable_NormalPriority,qr={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ic(){return{controller:new b0,data:new Map,refCount:0}}function Mu(s){s.refCount--,s.refCount===0&&w0(_0,function(){s.controller.abort()})}var Ou=null,Sd=0,g=0,w=null;function E(s,o){if(Ou===null){var u=Ou=[];Sd=0,g=ox(),w={status:"pending",value:void 0,then:function(m){u.push(m)}}}return Sd++,o.then(P,P),o}function P(){if(--Sd===0&&Ou!==null){w!==null&&(w.status="fulfilled");var s=Ou;Ou=null,g=0,w=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function $(s,o){var u=[],m={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return s.then(function(){m.status="fulfilled",m.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(m.status="rejected",m.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),m}var W=K.S;K.S=function(s,o){Z2=zt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&E(s,o),W!==null&&W(s,o)};var Y=X(null);function Z(){var s=Y.current;return s!==null?s:xr.pooledCache}function te(s,o){o===null?J(Y,Y.current):J(Y,o.pool)}function le(){var s=Z();return s===null?null:{parent:qr._currentValue,pool:s}}var ye=Error(r(460)),Le=Error(r(474)),se=Error(r(542)),_e={then:function(){}};function Ce(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Be(s,o,u){switch(u=s[u],u===void 0?s.push(o):u!==o&&(o.then(ks,ks),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,et(s),s;default:if(typeof o.status=="string")o.then(ks,ks);else{if(s=xr,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=o,s.status="pending",s.then(function(m){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=m}},function(m){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,et(s),s}throw Ve=o,ye}}function Ie(s){try{var o=s._init;return o(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Ve=u,ye):u}}var Ve=null;function $e(){if(Ve===null)throw Error(r(459));var s=Ve;return Ve=null,s}function et(s){if(s===ye||s===se)throw Error(r(483))}var Ke=null,vt=0;function ut(s){var o=vt;return vt+=1,Ke===null&&(Ke=[]),Be(Ke,s,o)}function Jt(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function pt(s,o){throw o.$$typeof===N?Error(r(525)):(s=Object.prototype.toString.call(o),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function gn(s){function o(je,be){if(s){var ke=je.deletions;ke===null?(je.deletions=[be],je.flags|=16):ke.push(be)}}function u(je,be){if(!s)return null;for(;be!==null;)o(je,be),be=be.sibling;return null}function m(je){for(var be=new Map;je!==null;)je.key!==null?be.set(je.key,je):be.set(je.index,je),je=je.sibling;return be}function v(je,be){return je=Js(je,be),je.index=0,je.sibling=null,je}function _(je,be,ke){return je.index=ke,s?(ke=je.alternate,ke!==null?(ke=ke.index,ke<be?(je.flags|=67108866,be):ke):(je.flags|=67108866,be)):(je.flags|=1048576,be)}function M(je){return s&&je.alternate===null&&(je.flags|=67108866),je}function Q(je,be,ke,We){return be===null||be.tag!==6?(be=Pu(ke,je.mode,We),be.return=je,be):(be=v(be,ke),be.return=je,be)}function ge(je,be,ke,We){var Ot=ke.type;return Ot===C?He(je,be,ke.props.children,We,ke.key):be!==null&&(be.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===D&&Ie(Ot)===be.type)?(be=v(be,ke.props),Jt(be,ke),be.return=je,be):(be=Sc(ke.type,ke.key,ke.props,null,je.mode,We),Jt(be,ke),be.return=je,be)}function Pe(je,be,ke,We){return be===null||be.tag!==4||be.stateNode.containerInfo!==ke.containerInfo||be.stateNode.implementation!==ke.implementation?(be=jc(ke,je.mode,We),be.return=je,be):(be=v(be,ke.children||[]),be.return=je,be)}function He(je,be,ke,We,Ot){return be===null||be.tag!==7?(be=Xo(ke,je.mode,We,Ot),be.return=je,be):(be=v(be,ke),be.return=je,be)}function Ye(je,be,ke){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return be=Pu(""+be,je.mode,ke),be.return=je,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case b:return ke=Sc(be.type,be.key,be.props,null,je.mode,ke),Jt(ke,be),ke.return=je,ke;case j:return be=jc(be,je.mode,ke),be.return=je,be;case D:return be=Ie(be),Ye(je,be,ke)}if(ve(be)||L(be))return be=Xo(be,je.mode,ke,null),be.return=je,be;if(typeof be.then=="function")return Ye(je,ut(be),ke);if(be.$$typeof===z)return Ye(je,Ad(je,be),ke);pt(je,be)}return null}function Oe(je,be,ke,We){var Ot=be!==null?be.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return Ot!==null?null:Q(je,be,""+ke,We);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case b:return ke.key===Ot?ge(je,be,ke,We):null;case j:return ke.key===Ot?Pe(je,be,ke,We):null;case D:return ke=Ie(ke),Oe(je,be,ke,We)}if(ve(ke)||L(ke))return Ot!==null?null:He(je,be,ke,We,null);if(typeof ke.then=="function")return Oe(je,be,ut(ke),We);if(ke.$$typeof===z)return Oe(je,be,Ad(je,ke),We);pt(je,ke)}return null}function Fe(je,be,ke,We,Ot){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return je=je.get(ke)||null,Q(be,je,""+We,Ot);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case b:return je=je.get(We.key===null?ke:We.key)||null,ge(be,je,We,Ot);case j:return je=je.get(We.key===null?ke:We.key)||null,Pe(be,je,We,Ot);case D:return We=Ie(We),Fe(je,be,ke,We,Ot)}if(ve(We)||L(We))return je=je.get(ke)||null,He(be,je,We,Ot,null);if(typeof We.then=="function")return Fe(je,be,ke,ut(We),Ot);if(We.$$typeof===z)return Fe(je,be,ke,Ad(be,We),Ot);pt(be,We)}return null}function gt(je,be,ke,We){for(var Ot=null,Un=null,At=be,dn=be=0,_n=null;At!==null&&dn<ke.length;dn++){At.index>dn?(_n=At,At=null):_n=At.sibling;var zn=Oe(je,At,ke[dn],We);if(zn===null){At===null&&(At=_n);break}s&&At&&zn.alternate===null&&o(je,At),be=_(zn,be,dn),Un===null?Ot=zn:Un.sibling=zn,Un=zn,At=_n}if(dn===ke.length)return u(je,At),xn&&Vs(je,dn),Ot;if(At===null){for(;dn<ke.length;dn++)At=Ye(je,ke[dn],We),At!==null&&(be=_(At,be,dn),Un===null?Ot=At:Un.sibling=At,Un=At);return xn&&Vs(je,dn),Ot}for(At=m(At);dn<ke.length;dn++)_n=Fe(At,je,dn,ke[dn],We),_n!==null&&(s&&_n.alternate!==null&&At.delete(_n.key===null?dn:_n.key),be=_(_n,be,dn),Un===null?Ot=_n:Un.sibling=_n,Un=_n);return s&&At.forEach(function(Wc){return o(je,Wc)}),xn&&Vs(je,dn),Ot}function Ht(je,be,ke,We){if(ke==null)throw Error(r(151));for(var Ot=null,Un=null,At=be,dn=be=0,_n=null,zn=ke.next();At!==null&&!zn.done;dn++,zn=ke.next()){At.index>dn?(_n=At,At=null):_n=At.sibling;var Wc=Oe(je,At,zn.value,We);if(Wc===null){At===null&&(At=_n);break}s&&At&&Wc.alternate===null&&o(je,At),be=_(Wc,be,dn),Un===null?Ot=Wc:Un.sibling=Wc,Un=Wc,At=_n}if(zn.done)return u(je,At),xn&&Vs(je,dn),Ot;if(At===null){for(;!zn.done;dn++,zn=ke.next())zn=Ye(je,zn.value,We),zn!==null&&(be=_(zn,be,dn),Un===null?Ot=zn:Un.sibling=zn,Un=zn);return xn&&Vs(je,dn),Ot}for(At=m(At);!zn.done;dn++,zn=ke.next())zn=Fe(At,je,dn,zn.value,We),zn!==null&&(s&&zn.alternate!==null&&At.delete(zn.key===null?dn:zn.key),be=_(zn,be,dn),Un===null?Ot=zn:Un.sibling=zn,Un=zn);return s&&At.forEach(function(G6){return o(je,G6)}),xn&&Vs(je,dn),Ot}function dr(je,be,ke,We){if(typeof ke=="object"&&ke!==null&&ke.type===C&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case b:e:{for(var Ot=ke.key;be!==null;){if(be.key===Ot){if(Ot=ke.type,Ot===C){if(be.tag===7){u(je,be.sibling),We=v(be,ke.props.children),We.return=je,je=We;break e}}else if(be.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===D&&Ie(Ot)===be.type){u(je,be.sibling),We=v(be,ke.props),Jt(We,ke),We.return=je,je=We;break e}u(je,be);break}else o(je,be);be=be.sibling}ke.type===C?(We=Xo(ke.props.children,je.mode,We,ke.key),We.return=je,je=We):(We=Sc(ke.type,ke.key,ke.props,null,je.mode,We),Jt(We,ke),We.return=je,je=We)}return M(je);case j:e:{for(Ot=ke.key;be!==null;){if(be.key===Ot)if(be.tag===4&&be.stateNode.containerInfo===ke.containerInfo&&be.stateNode.implementation===ke.implementation){u(je,be.sibling),We=v(be,ke.children||[]),We.return=je,je=We;break e}else{u(je,be);break}else o(je,be);be=be.sibling}We=jc(ke,je.mode,We),We.return=je,je=We}return M(je);case D:return ke=Ie(ke),dr(je,be,ke,We)}if(ve(ke))return gt(je,be,ke,We);if(L(ke)){if(Ot=L(ke),typeof Ot!="function")throw Error(r(150));return ke=Ot.call(ke),Ht(je,be,ke,We)}if(typeof ke.then=="function")return dr(je,be,ut(ke),We);if(ke.$$typeof===z)return dr(je,be,Ad(je,ke),We);pt(je,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,be!==null&&be.tag===6?(u(je,be.sibling),We=v(be,ke),We.return=je,je=We):(u(je,be),We=Pu(ke,je.mode,We),We.return=je,je=We),M(je)):u(je,be)}return function(je,be,ke,We){try{vt=0;var Ot=dr(je,be,ke,We);return Ke=null,Ot}catch(At){if(At===ye||At===se)throw At;var Un=$i(29,At,null,je.mode);return Un.lanes=We,Un.return=je,Un}finally{}}}var gr=gn(!0),sn=gn(!1),dt=!1;function st(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wr(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ut(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ln(s,o,u){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Wn&2)!==0){var v=m.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),m.pending=o,o=Hi(s),Lu(s,null,u),o}return Ru(s,m,o,u),Hi(s)}function $n(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,Mi(s,u)}}function ri(s,o){var u=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var M={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?v=_=M:_=_.next=M,u=u.next}while(u!==null);_===null?v=_=o:_=_.next=o}else v=_=o;u={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}var Li=!1;function lr(){if(Li){var s=w;if(s!==null)throw s}}function Gr(s,o,u,m){Li=!1;var v=s.updateQueue;dt=!1;var _=v.firstBaseUpdate,M=v.lastBaseUpdate,Q=v.shared.pending;if(Q!==null){v.shared.pending=null;var ge=Q,Pe=ge.next;ge.next=null,M===null?_=Pe:M.next=Pe,M=ge;var He=s.alternate;He!==null&&(He=He.updateQueue,Q=He.lastBaseUpdate,Q!==M&&(Q===null?He.firstBaseUpdate=Pe:Q.next=Pe,He.lastBaseUpdate=ge))}if(_!==null){var Ye=v.baseState;M=0,He=Pe=ge=null,Q=_;do{var Oe=Q.lane&-536870913,Fe=Oe!==Q.lane;if(Fe?(wn&Oe)===Oe:(m&Oe)===Oe){Oe!==0&&Oe===g&&(Li=!0),He!==null&&(He=He.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var gt=s,Ht=Q;Oe=o;var dr=u;switch(Ht.tag){case 1:if(gt=Ht.payload,typeof gt=="function"){Ye=gt.call(dr,Ye,Oe);break e}Ye=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=Ht.payload,Oe=typeof gt=="function"?gt.call(dr,Ye,Oe):gt,Oe==null)break e;Ye=y({},Ye,Oe);break e;case 2:dt=!0}}Oe=Q.callback,Oe!==null&&(s.flags|=64,Fe&&(s.flags|=8192),Fe=v.callbacks,Fe===null?v.callbacks=[Oe]:Fe.push(Oe))}else Fe={lane:Oe,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},He===null?(Pe=He=Fe,ge=Ye):He=He.next=Fe,M|=Oe;if(Q=Q.next,Q===null){if(Q=v.shared.pending,Q===null)break;Fe=Q,Q=Fe.next,Fe.next=null,v.lastBaseUpdate=Fe,v.shared.pending=null}}while(!0);He===null&&(ge=Ye),v.baseState=ge,v.firstBaseUpdate=Pe,v.lastBaseUpdate=He,_===null&&(v.shared.lanes=0),Oc|=M,s.lanes=M,s.memoizedState=Ye}}function Gi(s,o){if(typeof s!="function")throw Error(r(191,s));s.call(o)}function Wr(s,o){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)Gi(u[s],o)}var fn=X(null),In=X(0);function _r(s,o){s=Ql,J(In,s),J(fn,o),Ql=s|o.baseLanes}function On(){J(In,Ql),J(fn,fn.current)}function ii(){Ql=In.current,q(fn),q(In)}var Nr=X(null),Rn=null;function Vr(s){var o=s.alternate;J(En,En.current&1),J(Nr,s),Rn===null&&(o===null||fn.current!==null||o.memoizedState!==null)&&(Rn=s)}function Gn(s){J(En,En.current),J(Nr,s),Rn===null&&(Rn=s)}function Yr(s){s.tag===22?(J(En,En.current),J(Nr,s),Rn===null&&(Rn=s)):Kr()}function Kr(){J(En,En.current),J(Nr,Nr.current)}function Jn(s){q(Nr),Rn===s&&(Rn=null),q(En)}var En=X(0);function Wi(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||yx(u)||bx(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Cr=0,Lt=null,Mt=null,Ln=null,_s=!1,sa=!1,cs=!1,Qr=0,il=0,sl=null,jd=0;function cr(){throw Error(r(321))}function $h(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!Ei(s[u],o[u]))return!1;return!0}function Gh(s,o,u,m,v,_){return Cr=_,Lt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,K.H=s===null||s.memoizedState===null?u2:I0,cs=!1,_=u(m,v),cs=!1,sa&&(_=Eo(o,u,m,v)),Ed(s),_}function Ed(s){K.H=ef;var o=Mt!==null&&Mt.next!==null;if(Cr=0,Ln=Mt=Lt=null,_s=!1,il=0,sl=null,o)throw Error(r(300));s===null||gi||(s=s.dependencies,s!==null&&Nd(s)&&(gi=!0))}function Eo(s,o,u,m){Lt=s;var v=0;do{if(sa&&(sl=null),il=0,sa=!1,25<=v)throw Error(r(301));if(v+=1,Ln=Mt=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}K.H=d2,_=o(u,m)}while(sa);return _}function N0(){var s=K.H,o=s.useState()[0];return o=typeof o.then=="function"?al(o):o,s=s.useState()[0],(Mt!==null?Mt.memoizedState:null)!==s&&(Lt.flags|=1024),o}function Wh(){var s=Qr!==0;return Qr=0,s}function Yh(s,o,u){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~u}function Td(s){if(_s){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}_s=!1}Cr=0,Ln=Mt=Lt=null,sa=!1,il=Qr=0,sl=null}function pi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?Lt.memoizedState=Ln=s:Ln=Ln.next=s,Ln}function Ir(){if(Mt===null){var s=Lt.alternate;s=s!==null?s.memoizedState:null}else s=Mt.next;var o=Ln===null?Lt.memoizedState:Ln.next;if(o!==null)Ln=o,Mt=s;else{if(s===null)throw Lt.alternate===null?Error(r(467)):Error(r(310));Mt=s,s={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Ln===null?Lt.memoizedState=Ln=s:Ln=Ln.next=s}return Ln}function Fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function al(s){var o=il;return il+=1,sl===null&&(sl=[]),s=Be(sl,s,o),o=Lt,(Ln===null?o.memoizedState:Ln.next)===null&&(o=o.alternate,K.H=o===null||o.memoizedState===null?u2:I0),s}function Rc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return al(s);if(s.$$typeof===z)return Ri(s)}throw Error(r(438,String(s)))}function Bl(s){var o=null,u=Lt.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var m=Lt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Fu(),Lt.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(s),m=0;m<s;m++)u[m]=G;return o.index++,u}function Za(s,o){return typeof o=="function"?o(s):o}function Cd(s){var o=Ir();return Lc(o,Mt,s)}function Lc(s,o,u){var m=s.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=u;var v=s.baseQueue,_=m.pending;if(_!==null){if(v!==null){var M=v.next;v.next=_.next,_.next=M}o.baseQueue=v=_,m.pending=null}if(_=s.baseState,v===null)s.memoizedState=_;else{o=v.next;var Q=M=null,ge=null,Pe=o,He=!1;do{var Ye=Pe.lane&-536870913;if(Ye!==Pe.lane?(wn&Ye)===Ye:(Cr&Ye)===Ye){var Oe=Pe.revertLane;if(Oe===0)ge!==null&&(ge=ge.next={lane:0,revertLane:0,gesture:null,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),Ye===g&&(He=!0);else if((Cr&Oe)===Oe){Pe=Pe.next,Oe===g&&(He=!0);continue}else Ye={lane:0,revertLane:Pe.revertLane,gesture:null,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},ge===null?(Q=ge=Ye,M=_):ge=ge.next=Ye,Lt.lanes|=Oe,Oc|=Oe;Ye=Pe.action,cs&&u(_,Ye),_=Pe.hasEagerState?Pe.eagerState:u(_,Ye)}else Oe={lane:Ye,revertLane:Pe.revertLane,gesture:Pe.gesture,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},ge===null?(Q=ge=Oe,M=_):ge=ge.next=Oe,Lt.lanes|=Ye,Oc|=Ye;Pe=Pe.next}while(Pe!==null&&Pe!==o);if(ge===null?M=_:ge.next=Q,!Ei(_,s.memoizedState)&&(gi=!0,He&&(u=w,u!==null)))throw u;s.memoizedState=_,s.baseState=M,s.baseQueue=ge,m.lastRenderedState=_}return v===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function Id(s){var o=Ir(),u=o.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var m=u.dispatch,v=u.pending,_=o.memoizedState;if(v!==null){u.pending=null;var M=v=v.next;do _=s(_,M.action),M=M.next;while(M!==v);Ei(_,o.memoizedState)||(gi=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,m]}function Rd(s,o,u){var m=Lt,v=Ir(),_=xn;if(_){if(u===void 0)throw Error(r(407));u=u()}else u=o();var M=!Ei((Mt||v).memoizedState,u);if(M&&(v.memoizedState=u,gi=!0),v=v.queue,A0(Qh.bind(null,m,v,s),[s]),v.getSnapshot!==o||M||Ln!==null&&Ln.memoizedState.tag&1){if(m.flags|=2048,zl(9,{destroy:void 0},Kh.bind(null,m,v,u,o),null),xr===null)throw Error(r(349));_||(Cr&127)!==0||To(m,o,u)}return u}function To(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Lt.updateQueue,o===null?(o=Fu(),Lt.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function Kh(s,o,u,m){o.value=u,o.getSnapshot=m,Lm(o)&&Xh(s)}function Qh(s,o,u){return u(function(){Lm(o)&&Xh(s)})}function Lm(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!Ei(s,u)}catch{return!0}}function Xh(s){var o=So(s,2);o!==null&&ua(o,s,2)}function ol(s){var o=pi();if(typeof s=="function"){var u=s;if(s=u(),cs){Bt(!0);try{u()}finally{Bt(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:s},o}function km(s,o,u,m){return s.baseState=u,Lc(s,Mt,typeof m=="function"?m:Za)}function Pm(s,o,u,m,v){if(Fm(s))throw Error(r(485));if(s=o.action,s!==null){var _={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){_.listeners.push(M)}};K.T!==null?u(!0):_.isTransition=!1,m(_),u=o.pending,u===null?(_.next=o.pending=_,Dm(o,_)):(_.next=u.next,o.pending=u.next=_)}}function Dm(s,o){var u=o.action,m=o.payload,v=s.state;if(o.isTransition){var _=K.T,M={};K.T=M;try{var Q=u(v,m),ge=K.S;ge!==null&&ge(M,Q),Jh(s,o,Q)}catch(Pe){Ul(s,o,Pe)}finally{_!==null&&M.types!==null&&(_.types=M.types),K.T=_}}else try{_=u(v,m),Jh(s,o,_)}catch(Pe){Ul(s,o,Pe)}}function Jh(s,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){Mm(s,o,m)},function(m){return Ul(s,o,m)}):Mm(s,o,u)}function Mm(s,o,u){o.status="fulfilled",o.value=u,Ld(o),s.state=u,o=s.pending,o!==null&&(u=o.next,u===o?s.pending=null:(u=u.next,o.next=u,Dm(s,u)))}function Ul(s,o,u){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=u,Ld(o),o=o.next;while(o!==m)}s.action=null}function Ld(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function qu(s,o){return o}function eo(s,o){if(xn){var u=xr.formState;if(u!==null){e:{var m=Lt;if(xn){if(pr){t:{for(var v=pr,_=Tr;v.nodeType!==8;){if(!_){v=null;break t}if(v=to(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){pr=to(v.nextSibling),m=v.data==="F!";break e}}Zo(m)}m=!1}m&&(o=u[0])}}return u=pi(),u.memoizedState=u.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qu,lastRenderedState:o},u.queue=m,u=o2.bind(null,Lt,m),m.dispatch=u,m=ol(!1),_=C0.bind(null,Lt,!1,m.queue),m=pi(),v={state:o,dispatch:null,action:s,pending:null},m.queue=v,u=Pm.bind(null,Lt,v,_,u),v.dispatch=u,m.memoizedState=s,[o,u,!1]}function Co(s){var o=Ir();return Io(o,Mt,s)}function Io(s,o,u){if(o=Lc(s,o,qu)[0],s=Cd(Za)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=al(o)}catch(M){throw M===ye?se:M}else m=o;o=Ir();var v=o.queue,_=v.dispatch;return u!==o.memoizedState&&(Lt.flags|=2048,zl(9,{destroy:void 0},kd.bind(null,v,u),null)),[m,_,s]}function kd(s,o){s.action=o}function Pd(s){var o=Ir(),u=Mt;if(u!==null)return Io(o,u,s);Ir(),o=o.memoizedState,u=Ir();var m=u.queue.dispatch;return u.memoizedState=s,[o,m,!1]}function zl(s,o,u,m){return s={tag:s,create:u,deps:m,inst:o,next:null},o=Lt.updateQueue,o===null&&(o=Fu(),Lt.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=s.next=s:(m=u.next,u.next=s,s.next=m,o.lastEffect=s),s}function Om(){return Ir().memoizedState}function kc(s,o,u,m){var v=pi();Lt.flags|=s,v.memoizedState=zl(1|o,{destroy:void 0},u,m===void 0?null:m)}function Pc(s,o,u,m){var v=Ir();m=m===void 0?null:m;var _=v.memoizedState.inst;Mt!==null&&m!==null&&$h(m,Mt.memoizedState.deps)?v.memoizedState=zl(o,_,u,m):(Lt.flags|=s,v.memoizedState=zl(1|o,_,u,m))}function Wy(s,o){kc(8390656,8,s,o)}function A0(s,o){Pc(2048,8,s,o)}function Vj(s){Lt.flags|=4;var o=Lt.updateQueue;if(o===null)o=Fu(),Lt.updateQueue=o,o.events=[s];else{var u=o.events;u===null?o.events=[s]:u.push(s)}}function Yy(s){var o=Ir().memoizedState;return Vj({ref:o,nextImpl:s}),function(){if((Wn&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function Ky(s,o){return Pc(4,2,s,o)}function Qy(s,o){return Pc(4,4,s,o)}function Xy(s,o){if(typeof o=="function"){s=s();var u=o(s);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Jy(s,o,u){u=u!=null?u.concat([s]):null,Pc(4,4,Xy.bind(null,o,s),u)}function S0(){}function Zy(s,o){var u=Ir();o=o===void 0?null:o;var m=u.memoizedState;return o!==null&&$h(o,m[1])?m[0]:(u.memoizedState=[s,o],s)}function e2(s,o){var u=Ir();o=o===void 0?null:o;var m=u.memoizedState;if(o!==null&&$h(o,m[1]))return m[0];if(m=s(),cs){Bt(!0);try{s()}finally{Bt(!1)}}return u.memoizedState=[m,o],m}function j0(s,o,u){return u===void 0||(Cr&1073741824)!==0&&(wn&261930)===0?s.memoizedState=o:(s.memoizedState=u,s=tb(),Lt.lanes|=s,Oc|=s,u)}function t2(s,o,u,m){return Ei(u,o)?u:fn.current!==null?(s=j0(s,u,m),Ei(s,o)||(gi=!0),s):(Cr&42)===0||(Cr&1073741824)!==0&&(wn&261930)===0?(gi=!0,s.memoizedState=u):(s=tb(),Lt.lanes|=s,Oc|=s,o)}function n2(s,o,u,m,v){var _=ce.p;ce.p=_!==0&&8>_?_:8;var M=K.T,Q={};K.T=Q,C0(s,!1,o,u);try{var ge=v(),Pe=K.S;if(Pe!==null&&Pe(Q,ge),ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var He=$(ge,m);Zh(s,o,He,Ca(s))}else Zh(s,o,m,Ca(s))}catch(Ye){Zh(s,o,{then:function(){},status:"rejected",reason:Ye},Ca())}finally{ce.p=_,M!==null&&Q.types!==null&&(M.types=Q.types),K.T=M}}function Bj(){}function E0(s,o,u,m){if(s.tag!==5)throw Error(r(476));var v=r2(s).queue;n2(s,v,o,me,u===null?Bj:function(){return i2(s),u(m)})}function r2(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:me},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:u},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function i2(s){var o=r2(s);o.next===null&&(o=s.alternate.memoizedState),Zh(s,o.next.queue,{},Ca())}function T0(){return Ri(xf)}function s2(){return Ir().memoizedState}function a2(){return Ir().memoizedState}function Uj(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var u=Ca();s=Ut(u);var m=ln(o,s,u);m!==null&&(ua(m,o,u),$n(m,o,u)),o={cache:Ic()},s.payload=o;return}o=o.return}}function zj(s,o,u){var m=Ca();u={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Fm(s)?l2(o,u):(u=pd(s,o,u,m),u!==null&&(ua(u,s,m),c2(u,o,m)))}function o2(s,o,u){var m=Ca();Zh(s,o,u,m)}function Zh(s,o,u,m){var v={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Fm(s))l2(o,v);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var M=o.lastRenderedState,Q=_(M,u);if(v.hasEagerState=!0,v.eagerState=Q,Ei(Q,M))return Ru(s,o,v,0),xr===null&&Iu(),!1}catch{}finally{}if(u=pd(s,o,v,m),u!==null)return ua(u,s,m),c2(u,o,m),!0}return!1}function C0(s,o,u,m){if(m={lane:2,revertLane:ox(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Fm(s)){if(o)throw Error(r(479))}else o=pd(s,u,m,2),o!==null&&ua(o,s,2)}function Fm(s){var o=s.alternate;return s===Lt||o!==null&&o===Lt}function l2(s,o){sa=_s=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function c2(s,o,u){if((u&4194048)!==0){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,Mi(s,u)}}var ef={readContext:Ri,use:Rc,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useLayoutEffect:cr,useInsertionEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useSyncExternalStore:cr,useId:cr,useHostTransitionStatus:cr,useFormState:cr,useActionState:cr,useOptimistic:cr,useMemoCache:cr,useCacheRefresh:cr};ef.useEffectEvent=cr;var u2={readContext:Ri,use:Rc,useCallback:function(s,o){return pi().memoizedState=[s,o===void 0?null:o],s},useContext:Ri,useEffect:Wy,useImperativeHandle:function(s,o,u){u=u!=null?u.concat([s]):null,kc(4194308,4,Xy.bind(null,o,s),u)},useLayoutEffect:function(s,o){return kc(4194308,4,s,o)},useInsertionEffect:function(s,o){kc(4,2,s,o)},useMemo:function(s,o){var u=pi();o=o===void 0?null:o;var m=s();if(cs){Bt(!0);try{s()}finally{Bt(!1)}}return u.memoizedState=[m,o],m},useReducer:function(s,o,u){var m=pi();if(u!==void 0){var v=u(o);if(cs){Bt(!0);try{u(o)}finally{Bt(!1)}}}else v=o;return m.memoizedState=m.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},m.queue=s,s=s.dispatch=zj.bind(null,Lt,s),[m.memoizedState,s]},useRef:function(s){var o=pi();return s={current:s},o.memoizedState=s},useState:function(s){s=ol(s);var o=s.queue,u=o2.bind(null,Lt,o);return o.dispatch=u,[s.memoizedState,u]},useDebugValue:S0,useDeferredValue:function(s,o){var u=pi();return j0(u,s,o)},useTransition:function(){var s=ol(!1);return s=n2.bind(null,Lt,s.queue,!0,!1),pi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,u){var m=Lt,v=pi();if(xn){if(u===void 0)throw Error(r(407));u=u()}else{if(u=o(),xr===null)throw Error(r(349));(wn&127)!==0||To(m,o,u)}v.memoizedState=u;var _={value:u,getSnapshot:o};return v.queue=_,Wy(Qh.bind(null,m,_,s),[s]),m.flags|=2048,zl(9,{destroy:void 0},Kh.bind(null,m,_,u,o),null),u},useId:function(){var s=pi(),o=xr.identifierPrefix;if(xn){var u=ra,m=na;u=(m&~(1<<32-en(m)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Qr++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=jd++,o="_"+o+"r_"+u.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:T0,useFormState:eo,useActionState:eo,useOptimistic:function(s){var o=pi();o.memoizedState=o.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=C0.bind(null,Lt,!0,u),u.dispatch=o,[s,o]},useMemoCache:Bl,useCacheRefresh:function(){return pi().memoizedState=Uj.bind(null,Lt)},useEffectEvent:function(s){var o=pi(),u={impl:s};return o.memoizedState=u,function(){if((Wn&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},I0={readContext:Ri,use:Rc,useCallback:Zy,useContext:Ri,useEffect:A0,useImperativeHandle:Jy,useInsertionEffect:Ky,useLayoutEffect:Qy,useMemo:e2,useReducer:Cd,useRef:Om,useState:function(){return Cd(Za)},useDebugValue:S0,useDeferredValue:function(s,o){var u=Ir();return t2(u,Mt.memoizedState,s,o)},useTransition:function(){var s=Cd(Za)[0],o=Ir().memoizedState;return[typeof s=="boolean"?s:al(s),o]},useSyncExternalStore:Rd,useId:s2,useHostTransitionStatus:T0,useFormState:Co,useActionState:Co,useOptimistic:function(s,o){var u=Ir();return km(u,Mt,s,o)},useMemoCache:Bl,useCacheRefresh:a2};I0.useEffectEvent=Yy;var d2={readContext:Ri,use:Rc,useCallback:Zy,useContext:Ri,useEffect:A0,useImperativeHandle:Jy,useInsertionEffect:Ky,useLayoutEffect:Qy,useMemo:e2,useReducer:Id,useRef:Om,useState:function(){return Id(Za)},useDebugValue:S0,useDeferredValue:function(s,o){var u=Ir();return Mt===null?j0(u,s,o):t2(u,Mt.memoizedState,s,o)},useTransition:function(){var s=Id(Za)[0],o=Ir().memoizedState;return[typeof s=="boolean"?s:al(s),o]},useSyncExternalStore:Rd,useId:s2,useHostTransitionStatus:T0,useFormState:Pd,useActionState:Pd,useOptimistic:function(s,o){var u=Ir();return Mt!==null?km(u,Mt,s,o):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:Bl,useCacheRefresh:a2};d2.useEffectEvent=Yy;function R0(s,o,u,m){o=s.memoizedState,u=u(m,o),u=u==null?o:y({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var L0={enqueueSetState:function(s,o,u){s=s._reactInternals;var m=Ca(),v=Ut(m);v.payload=o,u!=null&&(v.callback=u),o=ln(s,v,m),o!==null&&(ua(o,s,m),$n(o,s,m))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var m=Ca(),v=Ut(m);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=ln(s,v,m),o!==null&&(ua(o,s,m),$n(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=Ca(),m=Ut(u);m.tag=2,o!=null&&(m.callback=o),o=ln(s,m,u),o!==null&&(ua(o,s,u),$n(o,s,u))}};function h2(s,o,u,m,v,_,M){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,_,M):o.prototype&&o.prototype.isPureReactComponent?!wo(u,m)||!wo(v,_):!0}function f2(s,o,u,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==s&&L0.enqueueReplaceState(o,o.state,null)}function Vu(s,o){var u=o;if("ref"in o){u={};for(var m in o)m!=="ref"&&(u[m]=o[m])}if(s=s.defaultProps){u===o&&(u=y({},u));for(var v in s)u[v]===void 0&&(u[v]=s[v])}return u}function m2(s){Cu(s)}function p2(s){console.error(s)}function g2(s){Cu(s)}function qm(s,o){try{var u=s.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function x2(s,o,u){try{var m=s.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function k0(s,o,u){return u=Ut(u),u.tag=3,u.payload={element:null},u.callback=function(){qm(s,o)},u}function v2(s){return s=Ut(s),s.tag=3,s}function y2(s,o,u,m){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var _=m.value;s.payload=function(){return v(_)},s.callback=function(){x2(o,u,m)}}var M=u.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(s.callback=function(){x2(o,u,m),typeof v!="function"&&(Fc===null?Fc=new Set([this]):Fc.add(this));var Q=m.stack;this.componentDidCatch(m.value,{componentStack:Q!==null?Q:""})})}function Hj(s,o,u,m,v){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=u.alternate,o!==null&&nl(o,u,v,!0),u=Nr.current,u!==null){switch(u.tag){case 31:case 13:return Rn===null?Xm():u.alternate===null&&Xr===0&&(Xr=3),u.flags&=-257,u.flags|=65536,u.lanes=v,m===_e?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([m]):o.add(m),ix(s,m,v)),!1;case 22:return u.flags|=65536,m===_e?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([m]):u.add(m)),ix(s,m,v)),!1}throw Error(r(435,u.tag))}return ix(s,m,v),Xm(),!1}if(xn)return o=Nr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,m!==ja&&(s=Error(r(422),{cause:m}),Tc(Zs(s,u)))):(m!==ja&&(o=Error(r(423),{cause:m}),Tc(Zs(o,u))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,m=Zs(m,u),v=k0(s.stateNode,m,v),ri(s,v),Xr!==4&&(Xr=2)),!1;var _=Error(r(520),{cause:m});if(_=Zs(_,u),cf===null?cf=[_]:cf.push(_),Xr!==4&&(Xr=2),o===null)return!0;m=Zs(m,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,s=v&-v,u.lanes|=s,s=k0(u.stateNode,m,s),ri(u,s),!1;case 1:if(o=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Fc===null||!Fc.has(_))))return u.flags|=65536,v&=-v,u.lanes|=v,v=v2(v),y2(v,s,u,m),ri(u,v),!1}u=u.return}while(u!==null);return!1}var P0=Error(r(461)),gi=!1;function us(s,o,u,m){o.child=s===null?sn(o,null,u,m):gr(o,s.child,u,m)}function b2(s,o,u,m,v){u=u.render;var _=o.ref;if("ref"in m){var M={};for(var Q in m)Q!=="ref"&&(M[Q]=m[Q])}else M=m;return rl(o),m=Gh(s,o,u,M,_,v),Q=Wh(),s!==null&&!gi?(Yh(s,o,v),Hl(s,o,v)):(xn&&Q&&Uh(o),o.flags|=1,us(s,o,m,v),o.child)}function w2(s,o,u,m,v){if(s===null){var _=u.type;return typeof _=="function"&&!xd(_)&&_.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=_,_2(s,o,_,m,v)):(s=Sc(u.type,null,m,o,o.mode,v),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,!U0(s,v)){var M=_.memoizedProps;if(u=u.compare,u=u!==null?u:wo,u(M,m)&&s.ref===o.ref)return Hl(s,o,v)}return o.flags|=1,s=Js(_,m),s.ref=o.ref,s.return=o,o.child=s}function _2(s,o,u,m,v){if(s!==null){var _=s.memoizedProps;if(wo(_,m)&&s.ref===o.ref)if(gi=!1,o.pendingProps=m=_,U0(s,v))(s.flags&131072)!==0&&(gi=!0);else return o.lanes=s.lanes,Hl(s,o,v)}return D0(s,o,u,m,v)}function N2(s,o,u,m){var v=m.children,_=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,s!==null){for(m=o.child=s.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;m=v&~_}else m=0,o.child=null;return A2(s,o,_,u,m)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&te(o,_!==null?_.cachePool:null),_!==null?_r(o,_):On(),Yr(o);else return m=o.lanes=536870912,A2(s,o,_!==null?_.baseLanes|u:u,u,m)}else _!==null?(te(o,_.cachePool),_r(o,_),Kr(),o.memoizedState=null):(s!==null&&te(o,null),On(),Kr());return us(s,o,v,u),o.child}function tf(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function A2(s,o,u,m,v){var _=Z();return _=_===null?null:{parent:qr._currentValue,pool:_},o.memoizedState={baseLanes:u,cachePool:_},s!==null&&te(o,null),On(),Yr(o),s!==null&&nl(s,o,m,!0),o.childLanes=v,null}function Vm(s,o){return o=Um({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function S2(s,o,u){return gr(o,s.child,null,u),s=Vm(o,o.pendingProps),s.flags|=2,Jn(o),o.memoizedState=null,s}function $j(s,o,u){var m=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(xn){if(m.mode==="hidden")return s=Vm(o,m),o.lanes=536870912,tf(null,s);if(Gn(o),(s=pr)?(s=Ob(s,Tr),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Jo!==null?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},u=vd(s),u.return=o,o.child=u,Ci=o,pr=null)):s=null,s===null)throw Zo(o);return o.lanes=536870912,null}return Vm(o,m)}var _=s.memoizedState;if(_!==null){var M=_.dehydrated;if(Gn(o),v)if(o.flags&256)o.flags&=-257,o=S2(s,o,u);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(r(558));else if(gi||nl(s,o,u,!1),v=(u&s.childLanes)!==0,gi||v){if(m=xr,m!==null&&(M=Oi(m,u),M!==0&&M!==_.retryLane))throw _.retryLane=M,So(s,M),ua(m,s,M),P0;Xm(),o=S2(s,o,u)}else s=_.treeContext,pr=to(M.nextSibling),Ci=o,xn=!0,ls=null,Tr=!1,s!==null&&Im(o,s),o=Vm(o,m),o.flags|=4096;return o}return s=Js(s.child,{mode:m.mode,children:m.children}),s.ref=o.ref,o.child=s,s.return=o,s}function Bm(s,o){var u=o.ref;if(u===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(s===null||s.ref!==u)&&(o.flags|=4194816)}}function D0(s,o,u,m,v){return rl(o),u=Gh(s,o,u,m,void 0,v),m=Wh(),s!==null&&!gi?(Yh(s,o,v),Hl(s,o,v)):(xn&&m&&Uh(o),o.flags|=1,us(s,o,u,v),o.child)}function j2(s,o,u,m,v,_){return rl(o),o.updateQueue=null,u=Eo(o,m,u,v),Ed(s),m=Wh(),s!==null&&!gi?(Yh(s,o,_),Hl(s,o,_)):(xn&&m&&Uh(o),o.flags|=1,us(s,o,u,_),o.child)}function E2(s,o,u,m,v){if(rl(o),o.stateNode===null){var _=Ti,M=u.contextType;typeof M=="object"&&M!==null&&(_=Ri(M)),_=new u(m,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=L0,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=m,_.state=o.memoizedState,_.refs={},st(o),M=u.contextType,_.context=typeof M=="object"&&M!==null?Ri(M):Ti,_.state=o.memoizedState,M=u.getDerivedStateFromProps,typeof M=="function"&&(R0(o,u,M,m),_.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(M=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),M!==_.state&&L0.enqueueReplaceState(_,_.state,null),Gr(o,m,_,v),lr(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(s===null){_=o.stateNode;var Q=o.memoizedProps,ge=Vu(u,Q);_.props=ge;var Pe=_.context,He=u.contextType;M=Ti,typeof He=="object"&&He!==null&&(M=Ri(He));var Ye=u.getDerivedStateFromProps;He=typeof Ye=="function"||typeof _.getSnapshotBeforeUpdate=="function",Q=o.pendingProps!==Q,He||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(Q||Pe!==M)&&f2(o,_,m,M),dt=!1;var Oe=o.memoizedState;_.state=Oe,Gr(o,m,_,v),lr(),Pe=o.memoizedState,Q||Oe!==Pe||dt?(typeof Ye=="function"&&(R0(o,u,Ye,m),Pe=o.memoizedState),(ge=dt||h2(o,u,ge,m,Oe,Pe,M))?(He||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=Pe),_.props=m,_.state=Pe,_.context=M,m=ge):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{_=o.stateNode,wr(s,o),M=o.memoizedProps,He=Vu(u,M),_.props=He,Ye=o.pendingProps,Oe=_.context,Pe=u.contextType,ge=Ti,typeof Pe=="object"&&Pe!==null&&(ge=Ri(Pe)),Q=u.getDerivedStateFromProps,(Pe=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(M!==Ye||Oe!==ge)&&f2(o,_,m,ge),dt=!1,Oe=o.memoizedState,_.state=Oe,Gr(o,m,_,v),lr();var Fe=o.memoizedState;M!==Ye||Oe!==Fe||dt||s!==null&&s.dependencies!==null&&Nd(s.dependencies)?(typeof Q=="function"&&(R0(o,u,Q,m),Fe=o.memoizedState),(He=dt||h2(o,u,He,m,Oe,Fe,ge)||s!==null&&s.dependencies!==null&&Nd(s.dependencies))?(Pe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,Fe,ge),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,Fe,ge)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||M===s.memoizedProps&&Oe===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&Oe===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Fe),_.props=m,_.state=Fe,_.context=ge,m=He):(typeof _.componentDidUpdate!="function"||M===s.memoizedProps&&Oe===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&Oe===s.memoizedState||(o.flags|=1024),m=!1)}return _=m,Bm(s,o),m=(o.flags&128)!==0,_||m?(_=o.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,s!==null&&m?(o.child=gr(o,s.child,null,v),o.child=gr(o,null,u,v)):us(s,o,u,v),o.memoizedState=_.state,s=o.child):s=Hl(s,o,v),s}function T2(s,o,u,m){return ql(),o.flags|=256,us(s,o,u,m),o.child}var M0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function O0(s){return{baseLanes:s,cachePool:le()}}function F0(s,o,u){return s=s!==null?s.childLanes&~u:0,o&&(s|=Ta),s}function C2(s,o,u){var m=o.pendingProps,v=!1,_=(o.flags&128)!==0,M;if((M=_)||(M=s!==null&&s.memoizedState===null?!1:(En.current&2)!==0),M&&(v=!0,o.flags&=-129),M=(o.flags&32)!==0,o.flags&=-33,s===null){if(xn){if(v?Vr(o):Kr(),(s=pr)?(s=Ob(s,Tr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Jo!==null?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},u=vd(s),u.return=o,o.child=u,Ci=o,pr=null)):s=null,s===null)throw Zo(o);return bx(s)?o.lanes=32:o.lanes=536870912,null}var Q=m.children;return m=m.fallback,v?(Kr(),v=o.mode,Q=Um({mode:"hidden",children:Q},v),m=Xo(m,v,u,null),Q.return=o,m.return=o,Q.sibling=m,o.child=Q,m=o.child,m.memoizedState=O0(u),m.childLanes=F0(s,M,u),o.memoizedState=M0,tf(null,m)):(Vr(o),q0(o,Q))}var ge=s.memoizedState;if(ge!==null&&(Q=ge.dehydrated,Q!==null)){if(_)o.flags&256?(Vr(o),o.flags&=-257,o=V0(s,o,u)):o.memoizedState!==null?(Kr(),o.child=s.child,o.flags|=128,o=null):(Kr(),Q=m.fallback,v=o.mode,m=Um({mode:"visible",children:m.children},v),Q=Xo(Q,v,u,null),Q.flags|=2,m.return=o,Q.return=o,m.sibling=Q,o.child=m,gr(o,s.child,null,u),m=o.child,m.memoizedState=O0(u),m.childLanes=F0(s,M,u),o.memoizedState=M0,o=tf(null,m));else if(Vr(o),bx(Q)){if(M=Q.nextSibling&&Q.nextSibling.dataset,M)var Pe=M.dgst;M=Pe,m=Error(r(419)),m.stack="",m.digest=M,Tc({value:m,source:null,stack:null}),o=V0(s,o,u)}else if(gi||nl(s,o,u,!1),M=(u&s.childLanes)!==0,gi||M){if(M=xr,M!==null&&(m=Oi(M,u),m!==0&&m!==ge.retryLane))throw ge.retryLane=m,So(s,m),ua(M,s,m),P0;yx(Q)||Xm(),o=V0(s,o,u)}else yx(Q)?(o.flags|=192,o.child=s.child,o=null):(s=ge.treeContext,pr=to(Q.nextSibling),Ci=o,xn=!0,ls=null,Tr=!1,s!==null&&Im(o,s),o=q0(o,m.children),o.flags|=4096);return o}return v?(Kr(),Q=m.fallback,v=o.mode,ge=s.child,Pe=ge.sibling,m=Js(ge,{mode:"hidden",children:m.children}),m.subtreeFlags=ge.subtreeFlags&65011712,Pe!==null?Q=Js(Pe,Q):(Q=Xo(Q,v,u,null),Q.flags|=2),Q.return=o,m.return=o,m.sibling=Q,o.child=m,tf(null,m),m=o.child,Q=s.child.memoizedState,Q===null?Q=O0(u):(v=Q.cachePool,v!==null?(ge=qr._currentValue,v=v.parent!==ge?{parent:ge,pool:ge}:v):v=le(),Q={baseLanes:Q.baseLanes|u,cachePool:v}),m.memoizedState=Q,m.childLanes=F0(s,M,u),o.memoizedState=M0,tf(s.child,m)):(Vr(o),u=s.child,s=u.sibling,u=Js(u,{mode:"visible",children:m.children}),u.return=o,u.sibling=null,s!==null&&(M=o.deletions,M===null?(o.deletions=[s],o.flags|=16):M.push(s)),o.child=u,o.memoizedState=null,u)}function q0(s,o){return o=Um({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Um(s,o){return s=$i(22,s,null,o),s.lanes=0,s}function V0(s,o,u){return gr(o,s.child,null,u),s=q0(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function I2(s,o,u){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),Cc(s.return,o,u)}function B0(s,o,u,m,v,_){var M=s.memoizedState;M===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:v,treeForkCount:_}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=m,M.tail=u,M.tailMode=v,M.treeForkCount=_)}function R2(s,o,u){var m=o.pendingProps,v=m.revealOrder,_=m.tail;m=m.children;var M=En.current,Q=(M&2)!==0;if(Q?(M=M&1|2,o.flags|=128):M&=1,J(En,M),us(s,o,m,u),m=xn?Du:0,!Q&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&I2(s,u,o);else if(s.tag===19)I2(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)s=u.alternate,s!==null&&Wi(s)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),B0(o,!1,v,u,_,m);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(s=v.alternate,s!==null&&Wi(s)===null){o.child=v;break}s=v.sibling,v.sibling=u,u=v,v=s}B0(o,!0,u,null,_,m);break;case"together":B0(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function Hl(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Oc|=o.lanes,(u&o.childLanes)===0)if(s!==null){if(nl(s,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(r(153));if(o.child!==null){for(s=o.child,u=Js(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Js(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function U0(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Nd(s)))}function Gj(s,o,u){switch(o.tag){case 3:De(o,o.stateNode.containerInfo),tl(o,qr,s.memoizedState.cache),ql();break;case 27:case 5:Ue(o);break;case 4:De(o,o.stateNode.containerInfo);break;case 10:tl(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Gn(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Vr(o),o.flags|=128,null):(u&o.child.childLanes)!==0?C2(s,o,u):(Vr(o),s=Hl(s,o,u),s!==null?s.sibling:null);Vr(o);break;case 19:var v=(s.flags&128)!==0;if(m=(u&o.childLanes)!==0,m||(nl(s,o,u,!1),m=(u&o.childLanes)!==0),v){if(m)return R2(s,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),J(En,En.current),m)break;return null;case 22:return o.lanes=0,N2(s,o,u,o.pendingProps);case 24:tl(o,qr,s.memoizedState.cache)}return Hl(s,o,u)}function L2(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps)gi=!0;else{if(!U0(s,u)&&(o.flags&128)===0)return gi=!1,Gj(s,o,u);gi=(s.flags&131072)!==0}else gi=!1,xn&&(o.flags&1048576)!==0&&Cm(o,Du,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(s=Ie(o.elementType),o.type=s,typeof s=="function")xd(s)?(m=Vu(s,m),o.tag=1,o=E2(null,o,s,m,u)):(o.tag=0,o=D0(null,o,s,m,u));else{if(s!=null){var v=s.$$typeof;if(v===H){o.tag=11,o=b2(null,o,s,m,u);break e}else if(v===V){o.tag=14,o=w2(null,o,s,m,u);break e}}throw o=ae(s)||s,Error(r(306,o,""))}}return o;case 0:return D0(s,o,o.type,o.pendingProps,u);case 1:return m=o.type,v=Vu(m,o.pendingProps),E2(s,o,m,v,u);case 3:e:{if(De(o,o.stateNode.containerInfo),s===null)throw Error(r(387));m=o.pendingProps;var _=o.memoizedState;v=_.element,wr(s,o),Gr(o,m,null,u);var M=o.memoizedState;if(m=M.cache,tl(o,qr,m),m!==_.cache&&Vl(o,[qr],u,!0),lr(),m=M.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:M.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=T2(s,o,m,u);break e}else if(m!==v){v=Zs(Error(r(424)),o),Tc(v),o=T2(s,o,m,u);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(pr=to(s.firstChild),Ci=o,xn=!0,ls=null,Tr=!0,u=sn(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ql(),m===v){o=Hl(s,o,u);break e}us(s,o,m,u)}o=o.child}return o;case 26:return Bm(s,o),s===null?(u=zb(o.type,null,o.pendingProps,null))?o.memoizedState=u:xn||(u=o.type,s=o.pendingProps,m=ip(pe.current).createElement(u),m[qn]=o,m[Qn]=s,ds(m,u,s),br(m),o.stateNode=m):o.memoizedState=zb(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Ue(o),s===null&&xn&&(m=o.stateNode=Vb(o.type,o.pendingProps,pe.current),Ci=o,Tr=!0,v=pr,Uc(o.type)?(wx=v,pr=to(m.firstChild)):pr=v),us(s,o,o.pendingProps.children,u),Bm(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&xn&&((v=m=pr)&&(m=_6(m,o.type,o.pendingProps,Tr),m!==null?(o.stateNode=m,Ci=o,pr=to(m.firstChild),Tr=!1,v=!0):v=!1),v||Zo(o)),Ue(o),v=o.type,_=o.pendingProps,M=s!==null?s.memoizedProps:null,m=_.children,gx(v,_)?m=null:M!==null&&gx(v,M)&&(o.flags|=32),o.memoizedState!==null&&(v=Gh(s,o,N0,null,null,u),xf._currentValue=v),Bm(s,o),us(s,o,m,u),o.child;case 6:return s===null&&xn&&((s=u=pr)&&(u=N6(u,o.pendingProps,Tr),u!==null?(o.stateNode=u,Ci=o,pr=null,s=!0):s=!1),s||Zo(o)),null;case 13:return C2(s,o,u);case 4:return De(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=gr(o,null,m,u):us(s,o,m,u),o.child;case 11:return b2(s,o,o.type,o.pendingProps,u);case 7:return us(s,o,o.pendingProps,u),o.child;case 8:return us(s,o,o.pendingProps.children,u),o.child;case 12:return us(s,o,o.pendingProps.children,u),o.child;case 10:return m=o.pendingProps,tl(o,o.type,m.value),us(s,o,m.children,u),o.child;case 9:return v=o.type._context,m=o.pendingProps.children,rl(o),v=Ri(v),m=m(v),o.flags|=1,us(s,o,m,u),o.child;case 14:return w2(s,o,o.type,o.pendingProps,u);case 15:return _2(s,o,o.type,o.pendingProps,u);case 19:return R2(s,o,u);case 31:return $j(s,o,u);case 22:return N2(s,o,u,o.pendingProps);case 24:return rl(o),m=Ri(qr),s===null?(v=Z(),v===null&&(v=xr,_=Ic(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=u),v=_),o.memoizedState={parent:m,cache:v},st(o),tl(o,qr,v)):((s.lanes&u)!==0&&(wr(s,o),Gr(o,null,null,u),lr()),v=s.memoizedState,_=o.memoizedState,v.parent!==m?(v={parent:m,cache:m},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),tl(o,qr,m)):(m=_.cache,tl(o,qr,m),m!==v.cache&&Vl(o,[qr],u,!0))),us(s,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function $l(s){s.flags|=4}function z0(s,o,u,m,v){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(v&335544128)===v)if(s.stateNode.complete)s.flags|=8192;else if(sb())s.flags|=8192;else throw Ve=_e,Le}else s.flags&=-16777217}function k2(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Yb(o))if(sb())s.flags|=8192;else throw Ve=_e,Le}function zm(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Hs():536870912,s.lanes|=o,Fd|=o)}function nf(s,o){if(!xn)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Ar(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,m=0;if(o)for(var v=s.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=m,s.childLanes=u,o}function Wj(s,o,u){var m=o.pendingProps;switch(wd(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(o),null;case 1:return Ar(o),null;case 3:return u=o.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),ia(qr),Re(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Ii(o)?$l(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Hh())),Ar(o),null;case 26:var v=o.type,_=o.memoizedState;return s===null?($l(o),_!==null?(Ar(o),k2(o,_)):(Ar(o),z0(o,v,null,m,u))):_?_!==s.memoizedState?($l(o),Ar(o),k2(o,_)):(Ar(o),o.flags&=-16777217):(s=s.memoizedProps,s!==m&&$l(o),Ar(o),z0(o,v,s,m,u)),null;case 27:if(Ze(o),u=pe.current,v=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&$l(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return Ar(o),null}s=ne.current,Ii(o)?zh(o):(s=Vb(v,m,u),o.stateNode=s,$l(o))}return Ar(o),null;case 5:if(Ze(o),v=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&$l(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return Ar(o),null}if(_=ne.current,Ii(o))zh(o);else{var M=ip(pe.current);switch(_){case 1:_=M.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=M.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=M.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=M.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=M.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof m.is=="string"?M.createElement("select",{is:m.is}):M.createElement("select"),m.multiple?_.multiple=!0:m.size&&(_.size=m.size);break;default:_=typeof m.is=="string"?M.createElement(v,{is:m.is}):M.createElement(v)}}_[qn]=o,_[Qn]=m;e:for(M=o.child;M!==null;){if(M.tag===5||M.tag===6)_.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===o)break e;for(;M.sibling===null;){if(M.return===null||M.return===o)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}o.stateNode=_;e:switch(ds(_,v,m),v){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&$l(o)}}return Ar(o),z0(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,u),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==m&&$l(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(r(166));if(s=pe.current,Ii(o)){if(s=o.stateNode,u=o.memoizedProps,m=null,v=Ci,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}s[qn]=o,s=!!(s.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||Cb(s.nodeValue,u)),s||Zo(o,!0)}else s=ip(s).createTextNode(m),s[qn]=o,o.stateNode=s}return Ar(o),null;case 31:if(u=o.memoizedState,s===null||s.memoizedState!==null){if(m=Ii(o),u!==null){if(s===null){if(!m)throw Error(r(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[qn]=o}else ql(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ar(o),s=!1}else u=Hh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return o.flags&256?(Jn(o),o):(Jn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Ar(o),null;case 13:if(m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=Ii(o),m!==null&&m.dehydrated!==null){if(s===null){if(!v)throw Error(r(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[qn]=o}else ql(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ar(o),v=!1}else v=Hh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Jn(o),o):(Jn(o),null)}return Jn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=m!==null,s=s!==null&&s.memoizedState!==null,u&&(m=o.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool),_=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==v&&(m.flags|=2048)),u!==s&&u&&(o.child.flags|=8192),zm(o,o.updateQueue),Ar(o),null);case 4:return Re(),s===null&&dx(o.stateNode.containerInfo),Ar(o),null;case 10:return ia(o.type),Ar(o),null;case 19:if(q(En),m=o.memoizedState,m===null)return Ar(o),null;if(v=(o.flags&128)!==0,_=m.rendering,_===null)if(v)nf(m,!1);else{if(Xr!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(_=Wi(s),_!==null){for(o.flags|=128,nf(m,!1),s=_.updateQueue,o.updateQueue=s,zm(o,s),o.subtreeFlags=0,s=u,u=o.child;u!==null;)ku(u,s),u=u.sibling;return J(En,En.current&1|2),xn&&Vs(o,m.treeForkCount),o.child}s=s.sibling}m.tail!==null&&zt()>Ym&&(o.flags|=128,v=!0,nf(m,!1),o.lanes=4194304)}else{if(!v)if(s=Wi(_),s!==null){if(o.flags|=128,v=!0,s=s.updateQueue,o.updateQueue=s,zm(o,s),nf(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!xn)return Ar(o),null}else 2*zt()-m.renderingStartTime>Ym&&u!==536870912&&(o.flags|=128,v=!0,nf(m,!1),o.lanes=4194304);m.isBackwards?(_.sibling=o.child,o.child=_):(s=m.last,s!==null?s.sibling=_:o.child=_,m.last=_)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=zt(),s.sibling=null,u=En.current,J(En,v?u&1|2:u&1),xn&&Vs(o,m.treeForkCount),s):(Ar(o),null);case 22:case 23:return Jn(o),ii(),m=o.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(u&536870912)!==0&&(o.flags&128)===0&&(Ar(o),o.subtreeFlags&6&&(o.flags|=8192)):Ar(o),u=o.updateQueue,u!==null&&zm(o,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048),s!==null&&q(Y),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ia(qr),Ar(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function Yj(s,o){switch(wd(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return ia(qr),Re(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Ze(o),null;case 31:if(o.memoizedState!==null){if(Jn(o),o.alternate===null)throw Error(r(340));ql()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(Jn(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(r(340));ql()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return q(En),null;case 4:return Re(),null;case 10:return ia(o.type),null;case 22:case 23:return Jn(o),ii(),s!==null&&q(Y),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return ia(qr),null;case 25:return null;default:return null}}function P2(s,o){switch(wd(o),o.tag){case 3:ia(qr),Re();break;case 26:case 27:case 5:Ze(o);break;case 4:Re();break;case 31:o.memoizedState!==null&&Jn(o);break;case 13:Jn(o);break;case 19:q(En);break;case 10:ia(o.type);break;case 22:case 23:Jn(o),ii(),s!==null&&q(Y);break;case 24:ia(qr)}}function rf(s,o){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var v=m.next;u=v;do{if((u.tag&s)===s){m=void 0;var _=u.create,M=u.inst;m=_(),M.destroy=m}u=u.next}while(u!==v)}}catch(Q){er(o,o.return,Q)}}function Dc(s,o,u){try{var m=o.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var _=v.next;m=_;do{if((m.tag&s)===s){var M=m.inst,Q=M.destroy;if(Q!==void 0){M.destroy=void 0,v=o;var ge=u,Pe=Q;try{Pe()}catch(He){er(v,ge,He)}}}m=m.next}while(m!==_)}}catch(He){er(o,o.return,He)}}function D2(s){var o=s.updateQueue;if(o!==null){var u=s.stateNode;try{Wr(o,u)}catch(m){er(s,s.return,m)}}}function M2(s,o,u){u.props=Vu(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(m){er(s,o,m)}}function sf(s,o){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof u=="function"?s.refCleanup=u(m):u.current=m}}catch(v){er(s,o,v)}}function ll(s,o){var u=s.ref,m=s.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(v){er(s,o,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){er(s,o,v)}else u.current=null}function O2(s){var o=s.type,u=s.memoizedProps,m=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break e;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(v){er(s,s.return,v)}}function H0(s,o,u){try{var m=s.stateNode;g6(m,s.type,u,o),m[Qn]=o}catch(v){er(s,s.return,v)}}function F2(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Uc(s.type)||s.tag===4}function $0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||F2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Uc(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function G0(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(s),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ks));else if(m!==4&&(m===27&&Uc(s.type)&&(u=s.stateNode,o=null),s=s.child,s!==null))for(G0(s,o,u),s=s.sibling;s!==null;)G0(s,o,u),s=s.sibling}function Hm(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(m!==4&&(m===27&&Uc(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Hm(s,o,u),s=s.sibling;s!==null;)Hm(s,o,u),s=s.sibling}function q2(s){var o=s.stateNode,u=s.memoizedProps;try{for(var m=s.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);ds(o,m,u),o[qn]=s,o[Qn]=u}catch(_){er(s,s.return,_)}}var Gl=!1,xi=!1,W0=!1,V2=typeof WeakSet=="function"?WeakSet:Set,Yi=null;function Kj(s,o){if(s=s.containerInfo,mx=dp,s=No(s),Qa(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var v=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var M=0,Q=-1,ge=-1,Pe=0,He=0,Ye=s,Oe=null;t:for(;;){for(var Fe;Ye!==u||v!==0&&Ye.nodeType!==3||(Q=M+v),Ye!==_||m!==0&&Ye.nodeType!==3||(ge=M+m),Ye.nodeType===3&&(M+=Ye.nodeValue.length),(Fe=Ye.firstChild)!==null;)Oe=Ye,Ye=Fe;for(;;){if(Ye===s)break t;if(Oe===u&&++Pe===v&&(Q=M),Oe===_&&++He===m&&(ge=M),(Fe=Ye.nextSibling)!==null)break;Ye=Oe,Oe=Ye.parentNode}Ye=Fe}u=Q===-1||ge===-1?null:{start:Q,end:ge}}else u=null}u=u||{start:0,end:0}}else u=null;for(px={focusedElem:s,selectionRange:u},dp=!1,Yi=o;Yi!==null;)if(o=Yi,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Yi=s;else for(;Yi!==null;){switch(o=Yi,_=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)v=s[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,u=o,v=_.memoizedProps,_=_.memoizedState,m=u.stateNode;try{var gt=Vu(u.type,v);s=m.getSnapshotBeforeUpdate(gt,_),m.__reactInternalSnapshotBeforeUpdate=s}catch(Ht){er(u,u.return,Ht)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,u=s.nodeType,u===9)vx(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":vx(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=o.sibling,s!==null){s.return=o.return,Yi=s;break}Yi=o.return}}function B2(s,o,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:Yl(s,u),m&4&&rf(5,u);break;case 1:if(Yl(s,u),m&4)if(s=u.stateNode,o===null)try{s.componentDidMount()}catch(M){er(u,u.return,M)}else{var v=Vu(u.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(v,o,s.__reactInternalSnapshotBeforeUpdate)}catch(M){er(u,u.return,M)}}m&64&&D2(u),m&512&&sf(u,u.return);break;case 3:if(Yl(s,u),m&64&&(s=u.updateQueue,s!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{Wr(s,o)}catch(M){er(u,u.return,M)}}break;case 27:o===null&&m&4&&q2(u);case 26:case 5:Yl(s,u),o===null&&m&4&&O2(u),m&512&&sf(u,u.return);break;case 12:Yl(s,u);break;case 31:Yl(s,u),m&4&&H2(s,u);break;case 13:Yl(s,u),m&4&&$2(s,u),m&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=i6.bind(null,u),A6(s,u))));break;case 22:if(m=u.memoizedState!==null||Gl,!m){o=o!==null&&o.memoizedState!==null||xi,v=Gl;var _=xi;Gl=m,(xi=o)&&!_?Kl(s,u,(u.subtreeFlags&8772)!==0):Yl(s,u),Gl=v,xi=_}break;case 30:break;default:Yl(s,u)}}function U2(s){var o=s.alternate;o!==null&&(s.alternate=null,U2(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&xa(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Rr=null,aa=!1;function Wl(s,o,u){for(u=u.child;u!==null;)z2(s,o,u),u=u.sibling}function z2(s,o,u){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(rn,u)}catch{}switch(u.tag){case 26:xi||ll(u,o),Wl(s,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:xi||ll(u,o);var m=Rr,v=aa;Uc(u.type)&&(Rr=u.stateNode,aa=!1),Wl(s,o,u),mf(u.stateNode),Rr=m,aa=v;break;case 5:xi||ll(u,o);case 6:if(m=Rr,v=aa,Rr=null,Wl(s,o,u),Rr=m,aa=v,Rr!==null)if(aa)try{(Rr.nodeType===9?Rr.body:Rr.nodeName==="HTML"?Rr.ownerDocument.body:Rr).removeChild(u.stateNode)}catch(_){er(u,o,_)}else try{Rr.removeChild(u.stateNode)}catch(_){er(u,o,_)}break;case 18:Rr!==null&&(aa?(s=Rr,Db(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Gd(s)):Db(Rr,u.stateNode));break;case 4:m=Rr,v=aa,Rr=u.stateNode.containerInfo,aa=!0,Wl(s,o,u),Rr=m,aa=v;break;case 0:case 11:case 14:case 15:Dc(2,u,o),xi||Dc(4,u,o),Wl(s,o,u);break;case 1:xi||(ll(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"&&M2(u,o,m)),Wl(s,o,u);break;case 21:Wl(s,o,u);break;case 22:xi=(m=xi)||u.memoizedState!==null,Wl(s,o,u),xi=m;break;default:Wl(s,o,u)}}function H2(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Gd(s)}catch(u){er(o,o.return,u)}}}function $2(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Gd(s)}catch(u){er(o,o.return,u)}}function Qj(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new V2),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new V2),o;default:throw Error(r(435,s.tag))}}function $m(s,o){var u=Qj(s);o.forEach(function(m){if(!u.has(m)){u.add(m);var v=s6.bind(null,s,m);m.then(v,v)}})}function oa(s,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var v=u[m],_=s,M=o,Q=M;e:for(;Q!==null;){switch(Q.tag){case 27:if(Uc(Q.type)){Rr=Q.stateNode,aa=!1;break e}break;case 5:Rr=Q.stateNode,aa=!1;break e;case 3:case 4:Rr=Q.stateNode.containerInfo,aa=!0;break e}Q=Q.return}if(Rr===null)throw Error(r(160));z2(_,M,v),Rr=null,aa=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)G2(o,s),o=o.sibling}var Ro=null;function G2(s,o){var u=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:oa(o,s),la(s),m&4&&(Dc(3,s,s.return),rf(3,s),Dc(5,s,s.return));break;case 1:oa(o,s),la(s),m&512&&(xi||u===null||ll(u,u.return)),m&64&&Gl&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var v=Ro;if(oa(o,s),la(s),m&512&&(xi||u===null||ll(u,u.return)),m&4){var _=u!==null?u.memoizedState:null;if(m=s.memoizedState,u===null)if(m===null)if(s.stateNode===null){e:{m=s.type,u=s.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":_=v.getElementsByTagName("title")[0],(!_||_[qi]||_[qn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(m),v.head.insertBefore(_,v.querySelector("head > title"))),ds(_,m,u),_[qn]=s,br(_),m=_;break e;case"link":var M=Gb("link","href",v).get(m+(u.href||""));if(M){for(var Q=0;Q<M.length;Q++)if(_=M[Q],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){M.splice(Q,1);break t}}_=v.createElement(m),ds(_,m,u),v.head.appendChild(_);break;case"meta":if(M=Gb("meta","content",v).get(m+(u.content||""))){for(Q=0;Q<M.length;Q++)if(_=M[Q],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){M.splice(Q,1);break t}}_=v.createElement(m),ds(_,m,u),v.head.appendChild(_);break;default:throw Error(r(468,m))}_[qn]=s,br(_),m=_}s.stateNode=m}else Wb(v,s.type,s.stateNode);else s.stateNode=$b(v,m,s.memoizedProps);else _!==m?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,m===null?Wb(v,s.type,s.stateNode):$b(v,m,s.memoizedProps)):m===null&&s.stateNode!==null&&H0(s,s.memoizedProps,u.memoizedProps)}break;case 27:oa(o,s),la(s),m&512&&(xi||u===null||ll(u,u.return)),u!==null&&m&4&&H0(s,s.memoizedProps,u.memoizedProps);break;case 5:if(oa(o,s),la(s),m&512&&(xi||u===null||ll(u,u.return)),s.flags&32){v=s.stateNode;try{ti(v,"")}catch(gt){er(s,s.return,gt)}}m&4&&s.stateNode!=null&&(v=s.memoizedProps,H0(s,v,u!==null?u.memoizedProps:v)),m&1024&&(W0=!0);break;case 6:if(oa(o,s),la(s),m&4){if(s.stateNode===null)throw Error(r(162));m=s.memoizedProps,u=s.stateNode;try{u.nodeValue=m}catch(gt){er(s,s.return,gt)}}break;case 3:if(op=null,v=Ro,Ro=sp(o.containerInfo),oa(o,s),Ro=v,la(s),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Gd(o.containerInfo)}catch(gt){er(s,s.return,gt)}W0&&(W0=!1,W2(s));break;case 4:m=Ro,Ro=sp(s.stateNode.containerInfo),oa(o,s),la(s),Ro=m;break;case 12:oa(o,s),la(s);break;case 31:oa(o,s),la(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,$m(s,m)));break;case 13:oa(o,s),la(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Wm=zt()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,$m(s,m)));break;case 22:v=s.memoizedState!==null;var ge=u!==null&&u.memoizedState!==null,Pe=Gl,He=xi;if(Gl=Pe||v,xi=He||ge,oa(o,s),xi=He,Gl=Pe,la(s),m&8192)e:for(o=s.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||ge||Gl||xi||Bu(s)),u=null,o=s;;){if(o.tag===5||o.tag===26){if(u===null){ge=u=o;try{if(_=ge.stateNode,v)M=_.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{Q=ge.stateNode;var Ye=ge.memoizedProps.style,Oe=Ye!=null&&Ye.hasOwnProperty("display")?Ye.display:null;Q.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch(gt){er(ge,ge.return,gt)}}}else if(o.tag===6){if(u===null){ge=o;try{ge.stateNode.nodeValue=v?"":ge.memoizedProps}catch(gt){er(ge,ge.return,gt)}}}else if(o.tag===18){if(u===null){ge=o;try{var Fe=ge.stateNode;v?Mb(Fe,!0):Mb(ge.stateNode,!1)}catch(gt){er(ge,ge.return,gt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=s.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,$m(s,u))));break;case 19:oa(o,s),la(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,$m(s,m)));break;case 30:break;case 21:break;default:oa(o,s),la(s)}}function la(s){var o=s.flags;if(o&2){try{for(var u,m=s.return;m!==null;){if(F2(m)){u=m;break}m=m.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var v=u.stateNode,_=$0(s);Hm(s,_,v);break;case 5:var M=u.stateNode;u.flags&32&&(ti(M,""),u.flags&=-33);var Q=$0(s);Hm(s,Q,M);break;case 3:case 4:var ge=u.stateNode.containerInfo,Pe=$0(s);G0(s,Pe,ge);break;default:throw Error(r(161))}}catch(He){er(s,s.return,He)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function W2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;W2(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Yl(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)B2(s,o.alternate,o),o=o.sibling}function Bu(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Dc(4,o,o.return),Bu(o);break;case 1:ll(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&M2(o,o.return,u),Bu(o);break;case 27:mf(o.stateNode);case 26:case 5:ll(o,o.return),Bu(o);break;case 22:o.memoizedState===null&&Bu(o);break;case 30:Bu(o);break;default:Bu(o)}s=s.sibling}}function Kl(s,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,v=s,_=o,M=_.flags;switch(_.tag){case 0:case 11:case 15:Kl(v,_,u),rf(4,_);break;case 1:if(Kl(v,_,u),m=_,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Pe){er(m,m.return,Pe)}if(m=_,v=m.updateQueue,v!==null){var Q=m.stateNode;try{var ge=v.shared.hiddenCallbacks;if(ge!==null)for(v.shared.hiddenCallbacks=null,v=0;v<ge.length;v++)Gi(ge[v],Q)}catch(Pe){er(m,m.return,Pe)}}u&&M&64&&D2(_),sf(_,_.return);break;case 27:q2(_);case 26:case 5:Kl(v,_,u),u&&m===null&&M&4&&O2(_),sf(_,_.return);break;case 12:Kl(v,_,u);break;case 31:Kl(v,_,u),u&&M&4&&H2(v,_);break;case 13:Kl(v,_,u),u&&M&4&&$2(v,_);break;case 22:_.memoizedState===null&&Kl(v,_,u),sf(_,_.return);break;case 30:break;default:Kl(v,_,u)}o=o.sibling}}function Y0(s,o){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Mu(u))}function K0(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Mu(s))}function Lo(s,o,u,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Y2(s,o,u,m),o=o.sibling}function Y2(s,o,u,m){var v=o.flags;switch(o.tag){case 0:case 11:case 15:Lo(s,o,u,m),v&2048&&rf(9,o);break;case 1:Lo(s,o,u,m);break;case 3:Lo(s,o,u,m),v&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Mu(s)));break;case 12:if(v&2048){Lo(s,o,u,m),s=o.stateNode;try{var _=o.memoizedProps,M=_.id,Q=_.onPostCommit;typeof Q=="function"&&Q(M,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ge){er(o,o.return,ge)}}else Lo(s,o,u,m);break;case 31:Lo(s,o,u,m);break;case 13:Lo(s,o,u,m);break;case 23:break;case 22:_=o.stateNode,M=o.alternate,o.memoizedState!==null?_._visibility&2?Lo(s,o,u,m):af(s,o):_._visibility&2?Lo(s,o,u,m):(_._visibility|=2,Dd(s,o,u,m,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Y0(M,o);break;case 24:Lo(s,o,u,m),v&2048&&K0(o.alternate,o);break;default:Lo(s,o,u,m)}}function Dd(s,o,u,m,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=s,M=o,Q=u,ge=m,Pe=M.flags;switch(M.tag){case 0:case 11:case 15:Dd(_,M,Q,ge,v),rf(8,M);break;case 23:break;case 22:var He=M.stateNode;M.memoizedState!==null?He._visibility&2?Dd(_,M,Q,ge,v):af(_,M):(He._visibility|=2,Dd(_,M,Q,ge,v)),v&&Pe&2048&&Y0(M.alternate,M);break;case 24:Dd(_,M,Q,ge,v),v&&Pe&2048&&K0(M.alternate,M);break;default:Dd(_,M,Q,ge,v)}o=o.sibling}}function af(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=s,m=o,v=m.flags;switch(m.tag){case 22:af(u,m),v&2048&&Y0(m.alternate,m);break;case 24:af(u,m),v&2048&&K0(m.alternate,m);break;default:af(u,m)}o=o.sibling}}var of=8192;function Md(s,o,u){if(s.subtreeFlags&of)for(s=s.child;s!==null;)K2(s,o,u),s=s.sibling}function K2(s,o,u){switch(s.tag){case 26:Md(s,o,u),s.flags&of&&s.memoizedState!==null&&M6(u,Ro,s.memoizedState,s.memoizedProps);break;case 5:Md(s,o,u);break;case 3:case 4:var m=Ro;Ro=sp(s.stateNode.containerInfo),Md(s,o,u),Ro=m;break;case 22:s.memoizedState===null&&(m=s.alternate,m!==null&&m.memoizedState!==null?(m=of,of=16777216,Md(s,o,u),of=m):Md(s,o,u));break;default:Md(s,o,u)}}function Q2(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function lf(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Yi=m,J2(m,s)}Q2(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)X2(s),s=s.sibling}function X2(s){switch(s.tag){case 0:case 11:case 15:lf(s),s.flags&2048&&Dc(9,s,s.return);break;case 3:lf(s);break;case 12:lf(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Gm(s)):lf(s);break;default:lf(s)}}function Gm(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Yi=m,J2(m,s)}Q2(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Dc(8,o,o.return),Gm(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Gm(o));break;default:Gm(o)}s=s.sibling}}function J2(s,o){for(;Yi!==null;){var u=Yi;switch(u.tag){case 0:case 11:case 15:Dc(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Mu(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,Yi=m;else e:for(u=s;Yi!==null;){m=Yi;var v=m.sibling,_=m.return;if(U2(m),m===u){Yi=null;break e}if(v!==null){v.return=_,Yi=v;break e}Yi=_}}}var Xj={getCacheForType:function(s){var o=Ri(qr),u=o.data.get(s);return u===void 0&&(u=s(),o.data.set(s,u)),u},cacheSignal:function(){return Ri(qr).controller.signal}},Jj=typeof WeakMap=="function"?WeakMap:Map,Wn=0,xr=null,vn=null,wn=0,Zn=0,Ea=null,Mc=!1,Od=!1,Q0=!1,Ql=0,Xr=0,Oc=0,Uu=0,X0=0,Ta=0,Fd=0,cf=null,ca=null,J0=!1,Wm=0,Z2=0,Ym=1/0,Km=null,Fc=null,ki=0,qc=null,qd=null,Xl=0,Z0=0,ex=null,eb=null,uf=0,tx=null;function Ca(){return(Wn&2)!==0&&wn!==0?wn&-wn:K.T!==null?ox():zr()}function tb(){if(Ta===0)if((wn&536870912)===0||xn){var s=Fn;Fn<<=1,(Fn&3932160)===0&&(Fn=262144),Ta=s}else Ta=536870912;return s=Nr.current,s!==null&&(s.flags|=32),Ta}function ua(s,o,u){(s===xr&&(Zn===2||Zn===9)||s.cancelPendingCommit!==null)&&(Vd(s,0),Vc(s,wn,Ta,!1)),Tt(s,u),((Wn&2)===0||s!==xr)&&(s===xr&&((Wn&2)===0&&(Uu|=u),Xr===4&&Vc(s,wn,Ta,!1)),cl(s))}function nb(s,o,u){if((Wn&6)!==0)throw Error(r(327));var m=!u&&(o&127)===0&&(o&s.expiredLanes)===0||wi(s,o),v=m?t6(s,o):rx(s,o,!0),_=m;do{if(v===0){Od&&!m&&Vc(s,o,0,!1);break}else{if(u=s.current.alternate,_&&!Zj(u)){v=rx(s,o,!1),_=!1;continue}if(v===2){if(_=o,s.errorRecoveryDisabledLanes&_)var M=0;else M=s.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){o=M;e:{var Q=s;v=cf;var ge=Q.current.memoizedState.isDehydrated;if(ge&&(Vd(Q,M).flags|=256),M=rx(Q,M,!1),M!==2){if(Q0&&!ge){Q.errorRecoveryDisabledLanes|=_,Uu|=_,v=4;break e}_=ca,ca=v,_!==null&&(ca===null?ca=_:ca.push.apply(ca,_))}v=M}if(_=!1,v!==2)continue}}if(v===1){Vd(s,0),Vc(s,o,0,!0);break}e:{switch(m=s,_=v,_){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Vc(m,o,Ta,!Mc);break e;case 2:ca=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(v=Wm+300-zt(),10<v)){if(Vc(m,o,Ta,!Mc),un(m,0,!0)!==0)break e;Xl=o,m.timeoutHandle=kb(rb.bind(null,m,u,ca,Km,J0,o,Ta,Uu,Fd,Mc,_,"Throttled",-0,0),v);break e}rb(m,u,ca,Km,J0,o,Ta,Uu,Fd,Mc,_,null,-0,0)}}break}while(!0);cl(s)}function rb(s,o,u,m,v,_,M,Q,ge,Pe,He,Ye,Oe,Fe){if(s.timeoutHandle=-1,Ye=o.subtreeFlags,Ye&8192||(Ye&16785408)===16785408){Ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ks},K2(o,_,Ye);var gt=(_&62914560)===_?Wm-zt():(_&4194048)===_?Z2-zt():0;if(gt=O6(Ye,gt),gt!==null){Xl=_,s.cancelPendingCommit=gt(db.bind(null,s,o,_,u,m,v,M,Q,ge,He,Ye,null,Oe,Fe)),Vc(s,_,M,!Pe);return}}db(s,o,_,u,m,v,M,Q,ge)}function Zj(s){for(var o=s;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var v=u[m],_=v.getSnapshot;v=v.value;try{if(!Ei(_(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Vc(s,o,u,m){o&=~X0,o&=~Uu,s.suspendedLanes|=o,s.pingedLanes&=~o,m&&(s.warmLanes|=o),m=s.expirationTimes;for(var v=o;0<v;){var _=31-en(v),M=1<<_;m[_]=-1,v&=~M}u!==0&&Ji(s,u,o)}function Qm(){return(Wn&6)===0?(df(0),!1):!0}function nx(){if(vn!==null){if(Zn===0)var s=vn.return;else s=vn,Ja=el=null,Td(s),Ke=null,vt=0,s=vn;for(;s!==null;)P2(s.alternate,s),s=s.return;vn=null}}function Vd(s,o){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,y6(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Xl=0,nx(),xr=s,vn=u=Js(s.current,null),wn=o,Zn=0,Ea=null,Mc=!1,Od=wi(s,o),Q0=!1,Fd=Ta=X0=Uu=Oc=Xr=0,ca=cf=null,J0=!1,(o&8)!==0&&(o|=o&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=o;0<m;){var v=31-en(m),_=1<<v;o|=s[v],m&=~_}return Ql=o,Iu(),u}function ib(s,o){Lt=null,K.H=ef,o===ye||o===se?(o=$e(),Zn=3):o===Le?(o=$e(),Zn=4):Zn=o===P0?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ea=o,vn===null&&(Xr=1,qm(s,Zs(o,s.current)))}function sb(){var s=Nr.current;return s===null?!0:(wn&4194048)===wn?Rn===null:(wn&62914560)===wn||(wn&536870912)!==0?s===Rn:!1}function ab(){var s=K.H;return K.H=ef,s===null?ef:s}function ob(){var s=K.A;return K.A=Xj,s}function Xm(){Xr=4,Mc||(wn&4194048)!==wn&&Nr.current!==null||(Od=!0),(Oc&134217727)===0&&(Uu&134217727)===0||xr===null||Vc(xr,wn,Ta,!1)}function rx(s,o,u){var m=Wn;Wn|=2;var v=ab(),_=ob();(xr!==s||wn!==o)&&(Km=null,Vd(s,o)),o=!1;var M=Xr;e:do try{if(Zn!==0&&vn!==null){var Q=vn,ge=Ea;switch(Zn){case 8:nx(),M=6;break e;case 3:case 2:case 9:case 6:Nr.current===null&&(o=!0);var Pe=Zn;if(Zn=0,Ea=null,Bd(s,Q,ge,Pe),u&&Od){M=0;break e}break;default:Pe=Zn,Zn=0,Ea=null,Bd(s,Q,ge,Pe)}}e6(),M=Xr;break}catch(He){ib(s,He)}while(!0);return o&&s.shellSuspendCounter++,Ja=el=null,Wn=m,K.H=v,K.A=_,vn===null&&(xr=null,wn=0,Iu()),M}function e6(){for(;vn!==null;)lb(vn)}function t6(s,o){var u=Wn;Wn|=2;var m=ab(),v=ob();xr!==s||wn!==o?(Km=null,Ym=zt()+500,Vd(s,o)):Od=wi(s,o);e:do try{if(Zn!==0&&vn!==null){o=vn;var _=Ea;t:switch(Zn){case 1:Zn=0,Ea=null,Bd(s,o,_,1);break;case 2:case 9:if(Ce(_)){Zn=0,Ea=null,cb(o);break}o=function(){Zn!==2&&Zn!==9||xr!==s||(Zn=7),cl(s)},_.then(o,o);break e;case 3:Zn=7;break e;case 4:Zn=5;break e;case 7:Ce(_)?(Zn=0,Ea=null,cb(o)):(Zn=0,Ea=null,Bd(s,o,_,7));break;case 5:var M=null;switch(vn.tag){case 26:M=vn.memoizedState;case 5:case 27:var Q=vn;if(M?Yb(M):Q.stateNode.complete){Zn=0,Ea=null;var ge=Q.sibling;if(ge!==null)vn=ge;else{var Pe=Q.return;Pe!==null?(vn=Pe,Jm(Pe)):vn=null}break t}}Zn=0,Ea=null,Bd(s,o,_,5);break;case 6:Zn=0,Ea=null,Bd(s,o,_,6);break;case 8:nx(),Xr=6;break e;default:throw Error(r(462))}}n6();break}catch(He){ib(s,He)}while(!0);return Ja=el=null,K.H=m,K.A=v,Wn=u,vn!==null?0:(xr=null,wn=0,Iu(),Xr)}function n6(){for(;vn!==null&&!it();)lb(vn)}function lb(s){var o=L2(s.alternate,s,Ql);s.memoizedProps=s.pendingProps,o===null?Jm(s):vn=o}function cb(s){var o=s,u=o.alternate;switch(o.tag){case 15:case 0:o=j2(u,o,o.pendingProps,o.type,void 0,wn);break;case 11:o=j2(u,o,o.pendingProps,o.type.render,o.ref,wn);break;case 5:Td(o);default:P2(u,o),o=vn=ku(o,Ql),o=L2(u,o,Ql)}s.memoizedProps=s.pendingProps,o===null?Jm(s):vn=o}function Bd(s,o,u,m){Ja=el=null,Td(o),Ke=null,vt=0;var v=o.return;try{if(Hj(s,v,o,u,wn)){Xr=1,qm(s,Zs(u,s.current)),vn=null;return}}catch(_){if(v!==null)throw vn=v,_;Xr=1,qm(s,Zs(u,s.current)),vn=null;return}o.flags&32768?(xn||m===1?s=!0:Od||(wn&536870912)!==0?s=!1:(Mc=s=!0,(m===2||m===9||m===3||m===6)&&(m=Nr.current,m!==null&&m.tag===13&&(m.flags|=16384))),ub(o,s)):Jm(o)}function Jm(s){var o=s;do{if((o.flags&32768)!==0){ub(o,Mc);return}s=o.return;var u=Wj(o.alternate,o,Ql);if(u!==null){vn=u;return}if(o=o.sibling,o!==null){vn=o;return}vn=o=s}while(o!==null);Xr===0&&(Xr=5)}function ub(s,o){do{var u=Yj(s.alternate,s);if(u!==null){u.flags&=32767,vn=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(s=s.sibling,s!==null)){vn=s;return}vn=s=u}while(s!==null);Xr=6,vn=null}function db(s,o,u,m,v,_,M,Q,ge){s.cancelPendingCommit=null;do Zm();while(ki!==0);if((Wn&6)!==0)throw Error(r(327));if(o!==null){if(o===s.current)throw Error(r(177));if(_=o.lanes|o.childLanes,_|=md,ga(s,u,_,M,Q,ge),s===xr&&(vn=xr=null,wn=0),qd=o,qc=s,Xl=u,Z0=_,ex=v,eb=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,a6(nn,function(){return gb(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=K.T,K.T=null,v=ce.p,ce.p=2,M=Wn,Wn|=4;try{Kj(s,o,u)}finally{Wn=M,ce.p=v,K.T=m}}ki=1,hb(),fb(),mb()}}function hb(){if(ki===1){ki=0;var s=qc,o=qd,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=K.T,K.T=null;var m=ce.p;ce.p=2;var v=Wn;Wn|=4;try{G2(o,s);var _=px,M=No(s.containerInfo),Q=_.focusedElem,ge=_.selectionRange;if(M!==Q&&Q&&Q.ownerDocument&&_o(Q.ownerDocument.documentElement,Q)){if(ge!==null&&Qa(Q)){var Pe=ge.start,He=ge.end;if(He===void 0&&(He=Pe),"selectionStart"in Q)Q.selectionStart=Pe,Q.selectionEnd=Math.min(He,Q.value.length);else{var Ye=Q.ownerDocument||document,Oe=Ye&&Ye.defaultView||window;if(Oe.getSelection){var Fe=Oe.getSelection(),gt=Q.textContent.length,Ht=Math.min(ge.start,gt),dr=ge.end===void 0?Ht:Math.min(ge.end,gt);!Fe.extend&&Ht>dr&&(M=dr,dr=Ht,Ht=M);var je=Ac(Q,Ht),be=Ac(Q,dr);if(je&&be&&(Fe.rangeCount!==1||Fe.anchorNode!==je.node||Fe.anchorOffset!==je.offset||Fe.focusNode!==be.node||Fe.focusOffset!==be.offset)){var ke=Ye.createRange();ke.setStart(je.node,je.offset),Fe.removeAllRanges(),Ht>dr?(Fe.addRange(ke),Fe.extend(be.node,be.offset)):(ke.setEnd(be.node,be.offset),Fe.addRange(ke))}}}}for(Ye=[],Fe=Q;Fe=Fe.parentNode;)Fe.nodeType===1&&Ye.push({element:Fe,left:Fe.scrollLeft,top:Fe.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<Ye.length;Q++){var We=Ye[Q];We.element.scrollLeft=We.left,We.element.scrollTop=We.top}}dp=!!mx,px=mx=null}finally{Wn=v,ce.p=m,K.T=u}}s.current=o,ki=2}}function fb(){if(ki===2){ki=0;var s=qc,o=qd,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=K.T,K.T=null;var m=ce.p;ce.p=2;var v=Wn;Wn|=4;try{B2(s,o.alternate,o)}finally{Wn=v,ce.p=m,K.T=u}}ki=3}}function mb(){if(ki===4||ki===3){ki=0,lt();var s=qc,o=qd,u=Xl,m=eb;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?ki=5:(ki=0,qd=qc=null,pb(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(Fc=null),ir(u),o=o.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(rn,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=K.T,v=ce.p,ce.p=2,K.T=null;try{for(var _=s.onRecoverableError,M=0;M<m.length;M++){var Q=m[M];_(Q.value,{componentStack:Q.stack})}}finally{K.T=o,ce.p=v}}(Xl&3)!==0&&Zm(),cl(s),v=s.pendingLanes,(u&261930)!==0&&(v&42)!==0?s===tx?uf++:(uf=0,tx=s):uf=0,df(0)}}function pb(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Mu(o)))}function Zm(){return hb(),fb(),mb(),gb()}function gb(){if(ki!==5)return!1;var s=qc,o=Z0;Z0=0;var u=ir(Xl),m=K.T,v=ce.p;try{ce.p=32>u?32:u,K.T=null,u=ex,ex=null;var _=qc,M=Xl;if(ki=0,qd=qc=null,Xl=0,(Wn&6)!==0)throw Error(r(331));var Q=Wn;if(Wn|=4,X2(_.current),Y2(_,_.current,M,u),Wn=Q,df(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(rn,_)}catch{}return!0}finally{ce.p=v,K.T=m,pb(s,o)}}function xb(s,o,u){o=Zs(u,o),o=k0(s.stateNode,o,2),s=ln(s,o,2),s!==null&&(Tt(s,2),cl(s))}function er(s,o,u){if(s.tag===3)xb(s,s,u);else for(;o!==null;){if(o.tag===3){xb(o,s,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Fc===null||!Fc.has(m))){s=Zs(u,s),u=v2(2),m=ln(o,u,2),m!==null&&(y2(u,m,o,s),Tt(m,2),cl(m));break}}o=o.return}}function ix(s,o,u){var m=s.pingCache;if(m===null){m=s.pingCache=new Jj;var v=new Set;m.set(o,v)}else v=m.get(o),v===void 0&&(v=new Set,m.set(o,v));v.has(u)||(Q0=!0,v.add(u),s=r6.bind(null,s,o,u),o.then(s,s))}function r6(s,o,u){var m=s.pingCache;m!==null&&m.delete(o),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,xr===s&&(wn&u)===u&&(Xr===4||Xr===3&&(wn&62914560)===wn&&300>zt()-Wm?(Wn&2)===0&&Vd(s,0):X0|=u,Fd===wn&&(Fd=0)),cl(s)}function vb(s,o){o===0&&(o=Hs()),s=So(s,o),s!==null&&(Tt(s,o),cl(s))}function i6(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),vb(s,u)}function s6(s,o){var u=0;switch(s.tag){case 31:case 13:var m=s.stateNode,v=s.memoizedState;v!==null&&(u=v.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(o),vb(s,u)}function a6(s,o){return Je(s,o)}var ep=null,Ud=null,sx=!1,tp=!1,ax=!1,Bc=0;function cl(s){s!==Ud&&s.next===null&&(Ud===null?ep=Ud=s:Ud=Ud.next=s),tp=!0,sx||(sx=!0,l6())}function df(s,o){if(!ax&&tp){ax=!0;do for(var u=!1,m=ep;m!==null;){if(s!==0){var v=m.pendingLanes;if(v===0)var _=0;else{var M=m.suspendedLanes,Q=m.pingedLanes;_=(1<<31-en(42|s)+1)-1,_&=v&~(M&~Q),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,_b(m,_))}else _=wn,_=un(m,m===xr?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||wi(m,_)||(u=!0,_b(m,_));m=m.next}while(u);ax=!1}}function o6(){yb()}function yb(){tp=sx=!1;var s=0;Bc!==0&&v6()&&(s=Bc);for(var o=zt(),u=null,m=ep;m!==null;){var v=m.next,_=bb(m,o);_===0?(m.next=null,u===null?ep=v:u.next=v,v===null&&(Ud=u)):(u=m,(s!==0||(_&3)!==0)&&(tp=!0)),m=v}ki!==0&&ki!==5||df(s),Bc!==0&&(Bc=0)}function bb(s,o){for(var u=s.suspendedLanes,m=s.pingedLanes,v=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var M=31-en(_),Q=1<<M,ge=v[M];ge===-1?((Q&u)===0||(Q&m)!==0)&&(v[M]=ui(Q,o)):ge<=o&&(s.expiredLanes|=Q),_&=~Q}if(o=xr,u=wn,u=un(s,s===o?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,u===0||s===o&&(Zn===2||Zn===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&tt(m),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||wi(s,u)){if(o=u&-u,o===s.callbackPriority)return o;switch(m!==null&&tt(m),ir(u)){case 2:case 8:u=cn;break;case 32:u=nn;break;case 268435456:u=Xt;break;default:u=nn}return m=wb.bind(null,s),u=Je(u,m),s.callbackPriority=o,s.callbackNode=u,o}return m!==null&&m!==null&&tt(m),s.callbackPriority=2,s.callbackNode=null,2}function wb(s,o){if(ki!==0&&ki!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Zm()&&s.callbackNode!==u)return null;var m=wn;return m=un(s,s===xr?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(nb(s,m,o),bb(s,zt()),s.callbackNode!=null&&s.callbackNode===u?wb.bind(null,s):null)}function _b(s,o){if(Zm())return null;nb(s,o,!0)}function l6(){b6(function(){(Wn&6)!==0?Je(Gt,o6):yb()})}function ox(){if(Bc===0){var s=g;s===0&&(s=qt,qt<<=1,(qt&261888)===0&&(qt=256)),Bc=s}return Bc}function Nb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Bi(""+s)}function Ab(s,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,s.id&&u.setAttribute("form",s.id),o.parentNode.insertBefore(u,o),s=new FormData(s),u.parentNode.removeChild(u),s}function c6(s,o,u,m,v){if(o==="submit"&&u&&u.stateNode===v){var _=Nb((v[Qn]||null).action),M=m.submitter;M&&(o=(o=M[Qn]||null)?Nb(o.formAction):M.getAttribute("formAction"),o!==null&&(_=o,M=null));var Q=new fi("action","action",null,m,v);s.push({event:Q,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Bc!==0){var ge=M?Ab(v,M):new FormData(v);E0(u,{pending:!0,data:ge,method:v.method,action:_},null,ge)}}else typeof _=="function"&&(Q.preventDefault(),ge=M?Ab(v,M):new FormData(v),E0(u,{pending:!0,data:ge,method:v.method,action:_},_,ge))},currentTarget:v}]})}}for(var lx=0;lx<Ml.length;lx++){var cx=Ml[lx],u6=cx.toLowerCase(),d6=cx[0].toUpperCase()+cx.slice(1);Xs(u6,"on"+d6)}Xs(Dl,"onAnimationEnd"),Xs(Tu,"onAnimationIteration"),Xs(qh,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(jm,"onTransitionRun"),Xs(Em,"onTransitionStart"),Xs(Tm,"onTransitionCancel"),Xs(Vh,"onTransitionEnd"),Ls("onMouseEnter",["mouseout","mouseover"]),Ls("onMouseLeave",["mouseout","mouseover"]),Ls("onPointerEnter",["pointerout","pointerover"]),Ls("onPointerLeave",["pointerout","pointerover"]),vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vs("onBeforeInput",["compositionend","keypress","textInput","paste"]),vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hf));function Sb(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var m=s[u],v=m.event;m=m.listeners;e:{var _=void 0;if(o)for(var M=m.length-1;0<=M;M--){var Q=m[M],ge=Q.instance,Pe=Q.currentTarget;if(Q=Q.listener,ge!==_&&v.isPropagationStopped())break e;_=Q,v.currentTarget=Pe;try{_(v)}catch(He){Cu(He)}v.currentTarget=null,_=ge}else for(M=0;M<m.length;M++){if(Q=m[M],ge=Q.instance,Pe=Q.currentTarget,Q=Q.listener,ge!==_&&v.isPropagationStopped())break e;_=Q,v.currentTarget=Pe;try{_(v)}catch(He){Cu(He)}v.currentTarget=null,_=ge}}}}function yn(s,o){var u=o[Fi];u===void 0&&(u=o[Fi]=new Set);var m=s+"__bubble";u.has(m)||(jb(o,s,2,!1),u.add(m))}function ux(s,o,u){var m=0;o&&(m|=4),jb(u,s,m,o)}var np="_reactListening"+Math.random().toString(36).slice(2);function dx(s){if(!s[np]){s[np]=!0,Uo.forEach(function(u){u!=="selectionchange"&&(h6.has(u)||ux(u,!1,s),ux(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[np]||(o[np]=!0,ux("selectionchange",!1,o))}}function jb(s,o,u,m){switch(t5(o)){case 2:var v=V6;break;case 8:v=B6;break;default:v=jx}u=v.bind(null,o,u,s),v=void 0,!po||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),m?v!==void 0?s.addEventListener(o,u,{capture:!0,passive:v}):s.addEventListener(o,u,!0):v!==void 0?s.addEventListener(o,u,{passive:v}):s.addEventListener(o,u,!1)}function hx(s,o,u,m,v){var _=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var Q=m.stateNode.containerInfo;if(Q===v)break;if(M===4)for(M=m.return;M!==null;){var ge=M.tag;if((ge===3||ge===4)&&M.stateNode.containerInfo===v)return;M=M.return}for(;Q!==null;){if(M=Zi(Q),M===null)return;if(ge=M.tag,ge===5||ge===6||ge===26||ge===27){m=_=M;continue e}Q=Q.parentNode}}m=m.return}Ua(function(){var Pe=_,He=Ui(u),Ye=[];e:{var Oe=Bh.get(s);if(Oe!==void 0){var Fe=fi,gt=s;switch(s){case"keypress":if(rs(u)===0)break e;case"keydown":case"keyup":Fe=pn;break;case"focusin":gt="focus",Fe=Ds;break;case"focusout":gt="blur",Fe=Ds;break;case"beforeblur":case"afterblur":Fe=Ds;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=Yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=Ks;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=T;break;case Dl:case Tu:case qh:Fe=A;break;case Vh:Fe=ee;break;case"scroll":case"scrollend":Fe=za;break;case"wheel":Fe=Me;break;case"copy":case"cut":case"paste":Fe=oe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=Kn;break;case"toggle":case"beforetoggle":Fe=Qt}var Ht=(o&4)!==0,dr=!Ht&&(s==="scroll"||s==="scrollend"),je=Ht?Oe!==null?Oe+"Capture":null:Oe;Ht=[];for(var be=Pe,ke;be!==null;){var We=be;if(ke=We.stateNode,We=We.tag,We!==5&&We!==26&&We!==27||ke===null||je===null||(We=ni(be,je),We!=null&&Ht.push(ff(be,We,ke))),dr)break;be=be.return}0<Ht.length&&(Oe=new Fe(Oe,gt,null,u,He),Ye.push({event:Oe,listeners:Ht}))}}if((o&7)===0){e:{if(Oe=s==="mouseover"||s==="pointerover",Fe=s==="mouseout"||s==="pointerout",Oe&&u!==wa&&(gt=u.relatedTarget||u.fromElement)&&(Zi(gt)||gt[Hr]))break e;if((Fe||Oe)&&(Oe=He.window===He?He:(Oe=He.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,Fe?(gt=u.relatedTarget||u.toElement,Fe=Pe,gt=gt?Zi(gt):null,gt!==null&&(dr=a(gt),Ht=gt.tag,gt!==dr||Ht!==5&&Ht!==27&&Ht!==6)&&(gt=null)):(Fe=null,gt=Pe),Fe!==gt)){if(Ht=Yo,We="onMouseLeave",je="onMouseEnter",be="mouse",(s==="pointerout"||s==="pointerover")&&(Ht=Kn,We="onPointerLeave",je="onPointerEnter",be="pointer"),dr=Fe==null?Oe:es(Fe),ke=gt==null?Oe:es(gt),Oe=new Ht(We,be+"leave",Fe,u,He),Oe.target=dr,Oe.relatedTarget=ke,We=null,Zi(He)===Pe&&(Ht=new Ht(je,be+"enter",gt,u,He),Ht.target=ke,Ht.relatedTarget=dr,We=Ht),dr=We,Fe&&gt)t:{for(Ht=f6,je=Fe,be=gt,ke=0,We=je;We;We=Ht(We))ke++;We=0;for(var Ot=be;Ot;Ot=Ht(Ot))We++;for(;0<ke-We;)je=Ht(je),ke--;for(;0<We-ke;)be=Ht(be),We--;for(;ke--;){if(je===be||be!==null&&je===be.alternate){Ht=je;break t}je=Ht(je),be=Ht(be)}Ht=null}else Ht=null;Fe!==null&&Eb(Ye,Oe,Fe,Ht,!1),gt!==null&&dr!==null&&Eb(Ye,dr,gt,Ht,!0)}}e:{if(Oe=Pe?es(Pe):window,Fe=Oe.nodeName&&Oe.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&Oe.type==="file")var Un=Qo;else if(ju(Oe))if(ws)Un=Ya;else{Un=Or;var At=_c}else Fe=Oe.nodeName,!Fe||Fe.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?Pe&&$o(Pe.elementType)&&(Un=Qo):Un=fd;if(Un&&(Un=Un(s,Pe))){Os(Ye,Un,u,He);break e}At&&At(s,Oe,Pe),s==="focusout"&&Pe&&Oe.type==="number"&&Pe.memoizedProps.value!=null&&Tl(Oe,"number",Oe.value)}switch(At=Pe?es(Pe):window,s){case"focusin":(ju(At)||At.contentEditable==="true")&&(Fs=At,Ao=Pe,zi=null);break;case"focusout":zi=Ao=Fs=null;break;case"mousedown":Qs=!0;break;case"contextmenu":case"mouseup":case"dragend":Qs=!1,Mn(Ye,u,He);break;case"selectionchange":if(Pl)break;case"keydown":case"keyup":Mn(Ye,u,He)}var dn;if(hn)e:{switch(s){case"compositionstart":var _n="onCompositionStart";break e;case"compositionend":_n="onCompositionEnd";break e;case"compositionupdate":_n="onCompositionUpdate";break e}_n=void 0}else $a?Ms(s,u)&&(_n="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(_n="onCompositionStart");_n&&(Si&&u.locale!=="ko"&&($a||_n!=="onCompositionStart"?_n==="onCompositionEnd"&&$a&&(dn=Ll()):(ns=He,go="value"in ns?ns.value:ns.textContent,$a=!0)),At=rp(Pe,_n),0<At.length&&(_n=new Ne(_n,s,null,u,He),Ye.push({event:_n,listeners:At}),dn?_n.data=dn:(dn=Ha(u),dn!==null&&(_n.data=dn)))),(dn=mi?as(s,u):vo(s,u))&&(_n=rp(Pe,"onBeforeInput"),0<_n.length&&(At=new Ne("onBeforeInput","beforeinput",null,u,He),Ye.push({event:At,listeners:_n}),At.data=dn)),c6(Ye,s,Pe,u,He)}Sb(Ye,o)})}function ff(s,o,u){return{instance:s,listener:o,currentTarget:u}}function rp(s,o){for(var u=o+"Capture",m=[];s!==null;){var v=s,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=ni(s,u),v!=null&&m.unshift(ff(s,v,_)),v=ni(s,o),v!=null&&m.push(ff(s,v,_))),s.tag===3)return m;s=s.return}return[]}function f6(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Eb(s,o,u,m,v){for(var _=o._reactName,M=[];u!==null&&u!==m;){var Q=u,ge=Q.alternate,Pe=Q.stateNode;if(Q=Q.tag,ge!==null&&ge===m)break;Q!==5&&Q!==26&&Q!==27||Pe===null||(ge=Pe,v?(Pe=ni(u,_),Pe!=null&&M.unshift(ff(u,Pe,ge))):v||(Pe=ni(u,_),Pe!=null&&M.push(ff(u,Pe,ge)))),u=u.return}M.length!==0&&s.push({event:o,listeners:M})}var m6=/\r\n?/g,p6=/\u0000|\uFFFD/g;function Tb(s){return(typeof s=="string"?s:""+s).replace(m6,`
`).replace(p6,"")}function Cb(s,o){return o=Tb(o),Tb(s)===o}function ur(s,o,u,m,v,_){switch(u){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||ti(s,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&ti(s,""+m);break;case"className":hi(s,"class",m);break;case"tabIndex":hi(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":hi(s,u,m);break;case"style":Rl(s,m,_);break;case"data":if(o!=="object"){hi(s,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||u!=="href")){s.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(u);break}m=Bi(""+m),s.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(o!=="input"&&ur(s,o,"name",v.name,v,null),ur(s,o,"formEncType",v.formEncType,v,null),ur(s,o,"formMethod",v.formMethod,v,null),ur(s,o,"formTarget",v.formTarget,v,null)):(ur(s,o,"encType",v.encType,v,null),ur(s,o,"method",v.method,v,null),ur(s,o,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(u);break}m=Bi(""+m),s.setAttribute(u,m);break;case"onClick":m!=null&&(s.onclick=ks);break;case"onScroll":m!=null&&yn("scroll",s);break;case"onScrollEnd":m!=null&&yn("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(u=m.__html,u!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}u=Bi(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(u,""+m):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":m===!0?s.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(u,m):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(u,m):s.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(u):s.setAttribute(u,m);break;case"popover":yn("beforetoggle",s),yn("toggle",s),ts(s,"popover",m);break;case"xlinkActuate":jr(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":jr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":jr(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":jr(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":jr(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":jr(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":jr(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":jr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":jr(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ts(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Go.get(u)||u,ts(s,u,m))}}function fx(s,o,u,m,v,_){switch(u){case"style":Rl(s,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(u=m.__html,u!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"children":typeof m=="string"?ti(s,m):(typeof m=="number"||typeof m=="bigint")&&ti(s,""+m);break;case"onScroll":m!=null&&yn("scroll",s);break;case"onScrollEnd":m!=null&&yn("scrollend",s);break;case"onClick":m!=null&&(s.onclick=ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vi.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),_=s[Qn]||null,_=_!=null?_[u]:null,typeof _=="function"&&s.removeEventListener(o,_,v),typeof m=="function")){typeof _!="function"&&_!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(o,m,v);break e}u in s?s[u]=m:m===!0?s.setAttribute(u,""):ts(s,u,m)}}}function ds(s,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yn("error",s),yn("load",s);var m=!1,v=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var M=u[_];if(M!=null)switch(_){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ur(s,o,_,M,u,null)}}v&&ur(s,o,"srcSet",u.srcSet,u,null),m&&ur(s,o,"src",u.src,u,null);return;case"input":yn("invalid",s);var Q=_=M=v=null,ge=null,Pe=null;for(m in u)if(u.hasOwnProperty(m)){var He=u[m];if(He!=null)switch(m){case"name":v=He;break;case"type":M=He;break;case"checked":ge=He;break;case"defaultChecked":Pe=He;break;case"value":_=He;break;case"defaultValue":Q=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,o));break;default:ur(s,o,m,He,u,null)}}yc(s,_,Q,ge,Pe,M,v,!1);return;case"select":yn("invalid",s),m=M=_=null;for(v in u)if(u.hasOwnProperty(v)&&(Q=u[v],Q!=null))switch(v){case"value":_=Q;break;case"defaultValue":M=Q;break;case"multiple":m=Q;default:ur(s,o,v,Q,u,null)}o=_,u=M,s.multiple=!!m,o!=null?Ai(s,!!m,o,!1):u!=null&&Ai(s,!!m,u,!0);return;case"textarea":yn("invalid",s),_=v=m=null;for(M in u)if(u.hasOwnProperty(M)&&(Q=u[M],Q!=null))switch(M){case"value":m=Q;break;case"defaultValue":v=Q;break;case"children":_=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(91));break;default:ur(s,o,M,Q,u,null)}ya(s,m,v,_);return;case"option":for(ge in u)if(u.hasOwnProperty(ge)&&(m=u[ge],m!=null))switch(ge){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ur(s,o,ge,m,u,null)}return;case"dialog":yn("beforetoggle",s),yn("toggle",s),yn("cancel",s),yn("close",s);break;case"iframe":case"object":yn("load",s);break;case"video":case"audio":for(m=0;m<hf.length;m++)yn(hf[m],s);break;case"image":yn("error",s),yn("load",s);break;case"details":yn("toggle",s);break;case"embed":case"source":case"link":yn("error",s),yn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Pe in u)if(u.hasOwnProperty(Pe)&&(m=u[Pe],m!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ur(s,o,Pe,m,u,null)}return;default:if($o(o)){for(He in u)u.hasOwnProperty(He)&&(m=u[He],m!==void 0&&fx(s,o,He,m,u,void 0));return}}for(Q in u)u.hasOwnProperty(Q)&&(m=u[Q],m!=null&&ur(s,o,Q,m,u,null))}function g6(s,o,u,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,M=null,Q=null,ge=null,Pe=null,He=null;for(Fe in u){var Ye=u[Fe];if(u.hasOwnProperty(Fe)&&Ye!=null)switch(Fe){case"checked":break;case"value":break;case"defaultValue":ge=Ye;default:m.hasOwnProperty(Fe)||ur(s,o,Fe,null,m,Ye)}}for(var Oe in m){var Fe=m[Oe];if(Ye=u[Oe],m.hasOwnProperty(Oe)&&(Fe!=null||Ye!=null))switch(Oe){case"type":_=Fe;break;case"name":v=Fe;break;case"checked":Pe=Fe;break;case"defaultChecked":He=Fe;break;case"value":M=Fe;break;case"defaultValue":Q=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(137,o));break;default:Fe!==Ye&&ur(s,o,Oe,Fe,m,Ye)}}fo(s,M,Q,ge,Pe,He,_,v);return;case"select":Fe=M=Q=Oe=null;for(_ in u)if(ge=u[_],u.hasOwnProperty(_)&&ge!=null)switch(_){case"value":break;case"multiple":Fe=ge;default:m.hasOwnProperty(_)||ur(s,o,_,null,m,ge)}for(v in m)if(_=m[v],ge=u[v],m.hasOwnProperty(v)&&(_!=null||ge!=null))switch(v){case"value":Oe=_;break;case"defaultValue":Q=_;break;case"multiple":M=_;default:_!==ge&&ur(s,o,v,_,m,ge)}o=Q,u=M,m=Fe,Oe!=null?Ai(s,!!u,Oe,!1):!!m!=!!u&&(o!=null?Ai(s,!!u,o,!0):Ai(s,!!u,u?[]:"",!1));return;case"textarea":Fe=Oe=null;for(Q in u)if(v=u[Q],u.hasOwnProperty(Q)&&v!=null&&!m.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:ur(s,o,Q,null,m,v)}for(M in m)if(v=m[M],_=u[M],m.hasOwnProperty(M)&&(v!=null||_!=null))switch(M){case"value":Oe=v;break;case"defaultValue":Fe=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==_&&ur(s,o,M,v,m,_)}Cl(s,Oe,Fe);return;case"option":for(var gt in u)if(Oe=u[gt],u.hasOwnProperty(gt)&&Oe!=null&&!m.hasOwnProperty(gt))switch(gt){case"selected":s.selected=!1;break;default:ur(s,o,gt,null,m,Oe)}for(ge in m)if(Oe=m[ge],Fe=u[ge],m.hasOwnProperty(ge)&&Oe!==Fe&&(Oe!=null||Fe!=null))switch(ge){case"selected":s.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol";break;default:ur(s,o,ge,Oe,m,Fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in u)Oe=u[Ht],u.hasOwnProperty(Ht)&&Oe!=null&&!m.hasOwnProperty(Ht)&&ur(s,o,Ht,null,m,Oe);for(Pe in m)if(Oe=m[Pe],Fe=u[Pe],m.hasOwnProperty(Pe)&&Oe!==Fe&&(Oe!=null||Fe!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(r(137,o));break;default:ur(s,o,Pe,Oe,m,Fe)}return;default:if($o(o)){for(var dr in u)Oe=u[dr],u.hasOwnProperty(dr)&&Oe!==void 0&&!m.hasOwnProperty(dr)&&fx(s,o,dr,void 0,m,Oe);for(He in m)Oe=m[He],Fe=u[He],!m.hasOwnProperty(He)||Oe===Fe||Oe===void 0&&Fe===void 0||fx(s,o,He,Oe,m,Fe);return}}for(var je in u)Oe=u[je],u.hasOwnProperty(je)&&Oe!=null&&!m.hasOwnProperty(je)&&ur(s,o,je,null,m,Oe);for(Ye in m)Oe=m[Ye],Fe=u[Ye],!m.hasOwnProperty(Ye)||Oe===Fe||Oe==null&&Fe==null||ur(s,o,Ye,Oe,m,Fe)}function Ib(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function x6(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,u=performance.getEntriesByType("resource"),m=0;m<u.length;m++){var v=u[m],_=v.transferSize,M=v.initiatorType,Q=v.duration;if(_&&Q&&Ib(M)){for(M=0,Q=v.responseEnd,m+=1;m<u.length;m++){var ge=u[m],Pe=ge.startTime;if(Pe>Q)break;var He=ge.transferSize,Ye=ge.initiatorType;He&&Ib(Ye)&&(ge=ge.responseEnd,M+=He*(ge<Q?1:(Q-Pe)/(ge-Pe)))}if(--m,o+=8*(_+M)/(v.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var mx=null,px=null;function ip(s){return s.nodeType===9?s:s.ownerDocument}function Rb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lb(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function gx(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var xx=null;function v6(){var s=window.event;return s&&s.type==="popstate"?s===xx?!1:(xx=s,!0):(xx=null,!1)}var kb=typeof setTimeout=="function"?setTimeout:void 0,y6=typeof clearTimeout=="function"?clearTimeout:void 0,Pb=typeof Promise=="function"?Promise:void 0,b6=typeof queueMicrotask=="function"?queueMicrotask:typeof Pb<"u"?function(s){return Pb.resolve(null).then(s).catch(w6)}:kb;function w6(s){setTimeout(function(){throw s})}function Uc(s){return s==="head"}function Db(s,o){var u=o,m=0;do{var v=u.nextSibling;if(s.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(m===0){s.removeChild(v),Gd(o);return}m--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")m++;else if(u==="html")mf(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,mf(u);for(var _=u.firstChild;_;){var M=_.nextSibling,Q=_.nodeName;_[qi]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=M}}else u==="body"&&mf(s.ownerDocument.body);u=v}while(u);Gd(o)}function Mb(s,o){var u=s;s=0;do{var m=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=m}while(u)}function vx(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":vx(u),xa(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function _6(s,o,u,m){for(;s.nodeType===1;){var v=u;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[qi])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=to(s.nextSibling),s===null)break}return null}function N6(s,o,u){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=to(s.nextSibling),s===null))return null;return s}function Ob(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=to(s.nextSibling),s===null))return null;return s}function yx(s){return s.data==="$?"||s.data==="$~"}function bx(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function A6(s,o){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||u.readyState!=="loading")o();else{var m=function(){o(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function to(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var wx=null;function Fb(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(o===0)return to(s.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}s=s.nextSibling}return null}function qb(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return s;o--}else u!=="/$"&&u!=="/&"||o++}s=s.previousSibling}return null}function Vb(s,o,u){switch(o=ip(u),s){case"html":if(s=o.documentElement,!s)throw Error(r(452));return s;case"head":if(s=o.head,!s)throw Error(r(453));return s;case"body":if(s=o.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function mf(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);xa(s)}var no=new Map,Bb=new Set;function sp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Jl=ce.d;ce.d={f:S6,r:j6,D:E6,C:T6,L:C6,m:I6,X:L6,S:R6,M:k6};function S6(){var s=Jl.f(),o=Qm();return s||o}function j6(s){var o=Ni(s);o!==null&&o.tag===5&&o.type==="form"?i2(o):Jl.r(s)}var zd=typeof document>"u"?null:document;function Ub(s,o,u){var m=zd;if(m&&typeof o=="string"&&o){var v=Er(o);v='link[rel="'+s+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),Bb.has(v)||(Bb.add(v),s={rel:s,crossOrigin:u,href:o},m.querySelector(v)===null&&(o=m.createElement("link"),ds(o,"link",s),br(o),m.head.appendChild(o)))}}function E6(s){Jl.D(s),Ub("dns-prefetch",s,null)}function T6(s,o){Jl.C(s,o),Ub("preconnect",s,o)}function C6(s,o,u){Jl.L(s,o,u);var m=zd;if(m&&s&&o){var v='link[rel="preload"][as="'+Er(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+Er(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+Er(u.imageSizes)+'"]')):v+='[href="'+Er(s)+'"]';var _=v;switch(o){case"style":_=Hd(s);break;case"script":_=$d(s)}no.has(_)||(s=y({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:s,as:o},u),no.set(_,s),m.querySelector(v)!==null||o==="style"&&m.querySelector(pf(_))||o==="script"&&m.querySelector(gf(_))||(o=m.createElement("link"),ds(o,"link",s),br(o),m.head.appendChild(o)))}}function I6(s,o){Jl.m(s,o);var u=zd;if(u&&s){var m=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Er(m)+'"][href="'+Er(s)+'"]',_=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=$d(s)}if(!no.has(_)&&(s=y({rel:"modulepreload",href:s},o),no.set(_,s),u.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(gf(_)))return}m=u.createElement("link"),ds(m,"link",s),br(m),u.head.appendChild(m)}}}function R6(s,o,u){Jl.S(s,o,u);var m=zd;if(m&&s){var v=xs(m).hoistableStyles,_=Hd(s);o=o||"default";var M=v.get(_);if(!M){var Q={loading:0,preload:null};if(M=m.querySelector(pf(_)))Q.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":o},u),(u=no.get(_))&&_x(s,u);var ge=M=m.createElement("link");br(ge),ds(ge,"link",s),ge._p=new Promise(function(Pe,He){ge.onload=Pe,ge.onerror=He}),ge.addEventListener("load",function(){Q.loading|=1}),ge.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,ap(M,o,m)}M={type:"stylesheet",instance:M,count:1,state:Q},v.set(_,M)}}}function L6(s,o){Jl.X(s,o);var u=zd;if(u&&s){var m=xs(u).hoistableScripts,v=$d(s),_=m.get(v);_||(_=u.querySelector(gf(v)),_||(s=y({src:s,async:!0},o),(o=no.get(v))&&Nx(s,o),_=u.createElement("script"),br(_),ds(_,"link",s),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(v,_))}}function k6(s,o){Jl.M(s,o);var u=zd;if(u&&s){var m=xs(u).hoistableScripts,v=$d(s),_=m.get(v);_||(_=u.querySelector(gf(v)),_||(s=y({src:s,async:!0,type:"module"},o),(o=no.get(v))&&Nx(s,o),_=u.createElement("script"),br(_),ds(_,"link",s),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(v,_))}}function zb(s,o,u,m){var v=(v=pe.current)?sp(v):null;if(!v)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Hd(u.href),u=xs(v).hoistableStyles,m=u.get(o),m||(m={type:"style",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Hd(u.href);var _=xs(v).hoistableStyles,M=_.get(s);if(M||(v=v.ownerDocument||v,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,M),(_=v.querySelector(pf(s)))&&!_._p&&(M.instance=_,M.state.loading=5),no.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},no.set(s,u),_||P6(v,s,u,M.state))),o&&m===null)throw Error(r(528,""));return M}if(o&&m!==null)throw Error(r(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=$d(u),u=xs(v).hoistableScripts,m=u.get(o),m||(m={type:"script",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Hd(s){return'href="'+Er(s)+'"'}function pf(s){return'link[rel="stylesheet"]['+s+"]"}function Hb(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function P6(s,o,u,m){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=s.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),ds(o,"link",u),br(o),s.head.appendChild(o))}function $d(s){return'[src="'+Er(s)+'"]'}function gf(s){return"script[async]"+s}function $b(s,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var m=s.querySelector('style[data-href~="'+Er(u.href)+'"]');if(m)return o.instance=m,br(m),m;var v=y({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),br(m),ds(m,"style",v),ap(m,u.precedence,s),o.instance=m;case"stylesheet":v=Hd(u.href);var _=s.querySelector(pf(v));if(_)return o.state.loading|=4,o.instance=_,br(_),_;m=Hb(u),(v=no.get(v))&&_x(m,v),_=(s.ownerDocument||s).createElement("link"),br(_);var M=_;return M._p=new Promise(function(Q,ge){M.onload=Q,M.onerror=ge}),ds(_,"link",m),o.state.loading|=4,ap(_,u.precedence,s),o.instance=_;case"script":return _=$d(u.src),(v=s.querySelector(gf(_)))?(o.instance=v,br(v),v):(m=u,(v=no.get(_))&&(m=y({},u),Nx(m,v)),s=s.ownerDocument||s,v=s.createElement("script"),br(v),ds(v,"link",m),s.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,ap(m,u.precedence,s));return o.instance}function ap(s,o,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,_=v,M=0;M<m.length;M++){var Q=m[M];if(Q.dataset.precedence===o)_=Q;else if(_!==v)break}_?_.parentNode.insertBefore(s,_.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(s,o.firstChild))}function _x(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function Nx(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var op=null;function Gb(s,o,u){if(op===null){var m=new Map,v=op=new Map;v.set(u,m)}else v=op,m=v.get(u),m||(m=new Map,v.set(u,m));if(m.has(s))return m;for(m.set(s,null),u=u.getElementsByTagName(s),v=0;v<u.length;v++){var _=u[v];if(!(_[qi]||_[qn]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var M=_.getAttribute(o)||"";M=s+M;var Q=m.get(M);Q?Q.push(_):m.set(M,[_])}}return m}function Wb(s,o,u){s=s.ownerDocument||s,s.head.insertBefore(u,o==="title"?s.querySelector("head > title"):null)}function D6(s,o,u){if(u===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Yb(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function M6(s,o,u,m){if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=Hd(m.href),_=o.querySelector(pf(v));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=lp.bind(s),o.then(s,s)),u.state.loading|=4,u.instance=_,br(_);return}_=o.ownerDocument||o,m=Hb(m),(v=no.get(v))&&_x(m,v),_=_.createElement("link"),br(_);var M=_;M._p=new Promise(function(Q,ge){M.onload=Q,M.onerror=ge}),ds(_,"link",m),u.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=lp.bind(s),o.addEventListener("load",u),o.addEventListener("error",u))}}var Ax=0;function O6(s,o){return s.stylesheets&&s.count===0&&up(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var m=setTimeout(function(){if(s.stylesheets&&up(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+o);0<s.imgBytes&&Ax===0&&(Ax=62500*x6());var v=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&up(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>Ax?50:800)+o);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(m),clearTimeout(v)}}:null}function lp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)up(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var cp=null;function up(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,cp=new Map,o.forEach(F6,s),cp=null,lp.call(s))}function F6(s,o){if(!(o.state.loading&4)){var u=cp.get(s);if(u)var m=u.get(null);else{u=new Map,cp.set(s,u);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var M=v[_];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(u.set(M.dataset.precedence,M),m=M)}m&&u.set(null,m)}v=o.instance,M=v.getAttribute("data-precedence"),_=u.get(M)||m,_===m&&u.set(null,v),u.set(M,v),this.count++,m=lp.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),_?_.parentNode.insertBefore(v,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),o.state.loading|=4}}var xf={$$typeof:z,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function q6(s,o,u,m,v,_,M,Q,ge){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ei(0),this.hiddenUpdates=ei(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ge,this.incompleteTransitions=new Map}function Kb(s,o,u,m,v,_,M,Q,ge,Pe,He,Ye){return s=new q6(s,o,u,M,ge,Pe,He,Ye,Q),o=1,_===!0&&(o|=24),_=$i(3,null,null,o),s.current=_,_.stateNode=s,o=Ic(),o.refCount++,s.pooledCache=o,o.refCount++,_.memoizedState={element:m,isDehydrated:u,cache:o},st(_),s}function Qb(s){return s?(s=Ti,s):Ti}function Xb(s,o,u,m,v,_){v=Qb(v),m.context===null?m.context=v:m.pendingContext=v,m=Ut(o),m.payload={element:u},_=_===void 0?null:_,_!==null&&(m.callback=_),u=ln(s,m,o),u!==null&&(ua(u,s,o),$n(u,s,o))}function Jb(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function Sx(s,o){Jb(s,o),(s=s.alternate)&&Jb(s,o)}function Zb(s){if(s.tag===13||s.tag===31){var o=So(s,67108864);o!==null&&ua(o,s,67108864),Sx(s,67108864)}}function e5(s){if(s.tag===13||s.tag===31){var o=Ca();o=Yn(o);var u=So(s,o);u!==null&&ua(u,s,o),Sx(s,o)}}var dp=!0;function V6(s,o,u,m){var v=K.T;K.T=null;var _=ce.p;try{ce.p=2,jx(s,o,u,m)}finally{ce.p=_,K.T=v}}function B6(s,o,u,m){var v=K.T;K.T=null;var _=ce.p;try{ce.p=8,jx(s,o,u,m)}finally{ce.p=_,K.T=v}}function jx(s,o,u,m){if(dp){var v=Ex(m);if(v===null)hx(s,o,m,hp,u),n5(s,m);else if(z6(v,s,o,u,m))m.stopPropagation();else if(n5(s,m),o&4&&-1<U6.indexOf(s)){for(;v!==null;){var _=Ni(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var M=Nt(_.pendingLanes);if(M!==0){var Q=_;for(Q.pendingLanes|=2,Q.entangledLanes|=2;M;){var ge=1<<31-en(M);Q.entanglements[1]|=ge,M&=~ge}cl(_),(Wn&6)===0&&(Ym=zt()+500,df(0))}}break;case 31:case 13:Q=So(_,2),Q!==null&&ua(Q,_,2),Qm(),Sx(_,2)}if(_=Ex(m),_===null&&hx(s,o,m,hp,u),_===v)break;v=_}v!==null&&m.stopPropagation()}else hx(s,o,m,null,u)}}function Ex(s){return s=Ui(s),Tx(s)}var hp=null;function Tx(s){if(hp=null,s=Zi(s),s!==null){var o=a(s);if(o===null)s=null;else{var u=o.tag;if(u===13){if(s=c(o),s!==null)return s;s=null}else if(u===31){if(s=d(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return hp=s,null}function t5(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case Gt:return 2;case cn:return 8;case nn:case bt:return 32;case Xt:return 268435456;default:return 32}default:return 32}}var Cx=!1,zc=null,Hc=null,$c=null,vf=new Map,yf=new Map,Gc=[],U6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n5(s,o){switch(s){case"focusin":case"focusout":zc=null;break;case"dragenter":case"dragleave":Hc=null;break;case"mouseover":case"mouseout":$c=null;break;case"pointerover":case"pointerout":vf.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":yf.delete(o.pointerId)}}function bf(s,o,u,m,v,_){return s===null||s.nativeEvent!==_?(s={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:_,targetContainers:[v]},o!==null&&(o=Ni(o),o!==null&&Zb(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),s)}function z6(s,o,u,m,v){switch(o){case"focusin":return zc=bf(zc,s,o,u,m,v),!0;case"dragenter":return Hc=bf(Hc,s,o,u,m,v),!0;case"mouseover":return $c=bf($c,s,o,u,m,v),!0;case"pointerover":var _=v.pointerId;return vf.set(_,bf(vf.get(_)||null,s,o,u,m,v)),!0;case"gotpointercapture":return _=v.pointerId,yf.set(_,bf(yf.get(_)||null,s,o,u,m,v)),!0}return!1}function r5(s){var o=Zi(s.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){s.blockedOn=o,_i(s.priority,function(){e5(u)});return}}else if(o===31){if(o=d(u),o!==null){s.blockedOn=o,_i(s.priority,function(){e5(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function fp(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Ex(s.nativeEvent);if(u===null){u=s.nativeEvent;var m=new u.constructor(u.type,u);wa=m,u.target.dispatchEvent(m),wa=null}else return o=Ni(u),o!==null&&Zb(o),s.blockedOn=u,!1;o.shift()}return!0}function i5(s,o,u){fp(s)&&u.delete(o)}function H6(){Cx=!1,zc!==null&&fp(zc)&&(zc=null),Hc!==null&&fp(Hc)&&(Hc=null),$c!==null&&fp($c)&&($c=null),vf.forEach(i5),yf.forEach(i5)}function mp(s,o){s.blockedOn===o&&(s.blockedOn=null,Cx||(Cx=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,H6)))}var pp=null;function s5(s){pp!==s&&(pp=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){pp===s&&(pp=null);for(var o=0;o<s.length;o+=3){var u=s[o],m=s[o+1],v=s[o+2];if(typeof m!="function"){if(Tx(m||u)===null)continue;break}var _=Ni(u);_!==null&&(s.splice(o,3),o-=3,E0(_,{pending:!0,data:v,method:u.method,action:m},m,v))}}))}function Gd(s){function o(ge){return mp(ge,s)}zc!==null&&mp(zc,s),Hc!==null&&mp(Hc,s),$c!==null&&mp($c,s),vf.forEach(o),yf.forEach(o);for(var u=0;u<Gc.length;u++){var m=Gc[u];m.blockedOn===s&&(m.blockedOn=null)}for(;0<Gc.length&&(u=Gc[0],u.blockedOn===null);)r5(u),u.blockedOn===null&&Gc.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var v=u[m],_=u[m+1],M=v[Qn]||null;if(typeof _=="function")M||s5(u);else if(M){var Q=null;if(_&&_.hasAttribute("formAction")){if(v=_,M=_[Qn]||null)Q=M.formAction;else if(Tx(v)!==null)continue}else Q=M.action;typeof Q=="function"?u[m+1]=Q:(u.splice(m,3),m-=3),s5(u)}}}function a5(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(M){return v=M})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),m||setTimeout(u,20)}function u(){if(!m&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,v=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){m=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function Ix(s){this._internalRoot=s}gp.prototype.render=Ix.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(r(409));var u=o.current,m=Ca();Xb(u,m,s,o,null,null)},gp.prototype.unmount=Ix.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Xb(s.current,2,null,s,null,null),Qm(),o[Hr]=null}};function gp(s){this._internalRoot=s}gp.prototype.unstable_scheduleHydration=function(s){if(s){var o=zr();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Gc.length&&o!==0&&o<Gc[u].priority;u++);Gc.splice(u,0,s),u===0&&r5(s)}};var o5=e.version;if(o5!=="19.2.1")throw Error(r(527,o5,"19.2.1"));ce.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(o),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var $6={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xp.isDisabled&&xp.supportsFiber)try{rn=xp.inject($6),It=xp}catch{}}return _f.createRoot=function(s,o){if(!i(s))throw Error(r(299));var u=!1,m="",v=m2,_=p2,M=g2;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),o=Kb(s,1,!1,null,null,u,m,null,v,_,M,a5),s[Hr]=o.current,dx(s),new Ix(o)},_f.hydrateRoot=function(s,o,u){if(!i(s))throw Error(r(299));var m=!1,v="",_=m2,M=p2,Q=g2,ge=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(M=u.onCaughtError),u.onRecoverableError!==void 0&&(Q=u.onRecoverableError),u.formState!==void 0&&(ge=u.formState)),o=Kb(s,1,!0,o,u??null,m,v,ge,_,M,Q,a5),o.context=Qb(null),u=o.current,m=Ca(),m=Yn(m),v=Ut(m),v.callback=null,ln(u,v,m),u=m,o.current.lanes=u,Tt(o,u),cl(o),s[Hr]=o.current,dx(s),new gp(o)},_f.version="19.2.1",_f}var x5;function nE(){if(x5)return kx.exports;x5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kx.exports=tE(),kx.exports}var rE=nE();let iE={data:""},sE=n=>{if(typeof window=="object"){let e=(n?n.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(n||document.head).appendChild(e),e.firstChild}return n||iE},aE=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,oE=/\/\*[^]*?\*\/|  +/g,v5=/\n+/g,Jc=(n,e)=>{let t="",r="",i="";for(let a in n){let c=n[a];a[0]=="@"?a[1]=="i"?t=a+" "+c+";":r+=a[1]=="f"?Jc(c,a):a+"{"+Jc(c,a[1]=="k"?"":e)+"}":typeof c=="object"?r+=Jc(c,e?e.replace(/([^,])+/g,d=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,d):d?d+" "+h:h)):a):c!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Jc.p?Jc.p(a,c):a+":"+c+";")}return t+(e&&i?e+"{"+i+"}":i)+r},Zl={},GN=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+GN(n[t]);return e}return n},lE=(n,e,t,r,i)=>{let a=GN(n),c=Zl[a]||(Zl[a]=(h=>{let f=0,p=11;for(;f<h.length;)p=101*p+h.charCodeAt(f++)>>>0;return"go"+p})(a));if(!Zl[c]){let h=a!==n?n:(f=>{let p,y,N=[{}];for(;p=aE.exec(f.replace(oE,""));)p[4]?N.shift():p[3]?(y=p[3].replace(v5," ").trim(),N.unshift(N[0][y]=N[0][y]||{})):N[0][p[1]]=p[2].replace(v5," ").trim();return N[0]})(n);Zl[c]=Jc(i?{["@keyframes "+c]:h}:h,t?"":"."+c)}let d=t&&Zl.g?Zl.g:null;return t&&(Zl.g=Zl[c]),((h,f,p,y)=>{y?f.data=f.data.replace(y,h):f.data.indexOf(h)===-1&&(f.data=p?h+f.data:f.data+h)})(Zl[c],e,r,d),c},cE=(n,e,t)=>n.reduce((r,i,a)=>{let c=e[a];if(c&&c.call){let d=c(t),h=d&&d.props&&d.props.className||/^go/.test(d)&&d;c=h?"."+h:d&&typeof d=="object"?d.props?"":Jc(d,""):d===!1?"":d}return r+i+(c??"")},"");function Og(n){let e=this||{},t=n.call?n(e.p):n;return lE(t.unshift?t.raw?cE(t,[].slice.call(arguments,1),e.p):t.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):t,sE(e.target),e.g,e.o,e.k)}let WN,Ev,Tv;Og.bind({g:1});let uc=Og.bind({k:1});function uE(n,e,t,r){Jc.p=e,WN=n,Ev=t,Tv=r}function bu(n,e){let t=this||{};return function(){let r=arguments;function i(a,c){let d=Object.assign({},a),h=d.className||i.className;t.p=Object.assign({theme:Ev&&Ev()},d),t.o=/ *go\d+/.test(h),d.className=Og.apply(t,r)+(h?" "+h:"");let f=n;return n[0]&&(f=d.as||n,delete d.as),Tv&&f[0]&&Tv(d),WN(f,d)}return i}}var dE=n=>typeof n=="function",ng=(n,e)=>dE(n)?n(e):n,hE=(()=>{let n=0;return()=>(++n).toString()})(),YN=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),fE=20,S1="default",KN=(n,e)=>{let{toastLimit:t}=n.settings;switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,t)};case 1:return{...n,toasts:n.toasts.map(c=>c.id===e.toast.id?{...c,...e.toast}:c)};case 2:let{toast:r}=e;return KN(n,{type:n.toasts.find(c=>c.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...n,toasts:n.toasts.map(c=>c.id===i||i===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(c=>c.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let a=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+a}))}}},Dp=[],QN={toasts:[],pausedAt:void 0,settings:{toastLimit:fE}},fl={},XN=(n,e=S1)=>{fl[e]=KN(fl[e]||QN,n),Dp.forEach(([t,r])=>{t===e&&r(fl[e])})},JN=n=>Object.keys(fl).forEach(e=>XN(n,e)),mE=n=>Object.keys(fl).find(e=>fl[e].toasts.some(t=>t.id===n)),Fg=(n=S1)=>e=>{XN(e,n)},pE={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},gE=(n={},e=S1)=>{let[t,r]=fe.useState(fl[e]||QN),i=fe.useRef(fl[e]);fe.useEffect(()=>(i.current!==fl[e]&&r(fl[e]),Dp.push([e,r]),()=>{let c=Dp.findIndex(([d])=>d===e);c>-1&&Dp.splice(c,1)}),[e]);let a=t.toasts.map(c=>{var d,h,f;return{...n,...n[c.type],...c,removeDelay:c.removeDelay||((d=n[c.type])==null?void 0:d.removeDelay)||n?.removeDelay,duration:c.duration||((h=n[c.type])==null?void 0:h.duration)||n?.duration||pE[c.type],style:{...n.style,...(f=n[c.type])==null?void 0:f.style,...c.style}}});return{...t,toasts:a}},xE=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:t?.id||hE()}),om=n=>(e,t)=>{let r=xE(e,n,t);return Fg(r.toasterId||mE(r.id))({type:2,toast:r}),r.id},Pi=(n,e)=>om("blank")(n,e);Pi.error=om("error");Pi.success=om("success");Pi.loading=om("loading");Pi.custom=om("custom");Pi.dismiss=(n,e)=>{let t={type:3,toastId:n};e?Fg(e)(t):JN(t)};Pi.dismissAll=n=>Pi.dismiss(void 0,n);Pi.remove=(n,e)=>{let t={type:4,toastId:n};e?Fg(e)(t):JN(t)};Pi.removeAll=n=>Pi.remove(void 0,n);Pi.promise=(n,e,t)=>{let r=Pi.loading(e.loading,{...t,...t?.loading});return typeof n=="function"&&(n=n()),n.then(i=>{let a=e.success?ng(e.success,i):void 0;return a?Pi.success(a,{id:r,...t,...t?.success}):Pi.dismiss(r),i}).catch(i=>{let a=e.error?ng(e.error,i):void 0;a?Pi.error(a,{id:r,...t,...t?.error}):Pi.dismiss(r)}),n};var vE=1e3,yE=(n,e="default")=>{let{toasts:t,pausedAt:r}=gE(n,e),i=fe.useRef(new Map).current,a=fe.useCallback((y,N=vE)=>{if(i.has(y))return;let b=setTimeout(()=>{i.delete(y),c({type:4,toastId:y})},N);i.set(y,b)},[]);fe.useEffect(()=>{if(r)return;let y=Date.now(),N=t.map(b=>{if(b.duration===1/0)return;let j=(b.duration||0)+b.pauseDuration-(y-b.createdAt);if(j<0){b.visible&&Pi.dismiss(b.id);return}return setTimeout(()=>Pi.dismiss(b.id,e),j)});return()=>{N.forEach(b=>b&&clearTimeout(b))}},[t,r,e]);let c=fe.useCallback(Fg(e),[e]),d=fe.useCallback(()=>{c({type:5,time:Date.now()})},[c]),h=fe.useCallback((y,N)=>{c({type:1,toast:{id:y,height:N}})},[c]),f=fe.useCallback(()=>{r&&c({type:6,time:Date.now()})},[r,c]),p=fe.useCallback((y,N)=>{let{reverseOrder:b=!1,gutter:j=8,defaultPosition:C}=N||{},R=t.filter(z=>(z.position||C)===(y.position||C)&&z.height),I=R.findIndex(z=>z.id===y.id),B=R.filter((z,H)=>H<I&&z.visible).length;return R.filter(z=>z.visible).slice(...b?[B+1]:[0,B]).reduce((z,H)=>z+(H.height||0)+j,0)},[t]);return fe.useEffect(()=>{t.forEach(y=>{if(y.dismissed)a(y.id,y.removeDelay);else{let N=i.get(y.id);N&&(clearTimeout(N),i.delete(y.id))}})},[t,a]),{toasts:t,handlers:{updateHeight:h,startPause:d,endPause:f,calculateOffset:p}}},bE=uc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,wE=uc`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_E=uc`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,NE=bu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${bE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${wE} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${_E} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,AE=uc`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,SE=bu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${AE} 1s linear infinite;
`,jE=uc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,EE=uc`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,TE=bu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${EE} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,CE=bu("div")`
  position: absolute;
`,IE=bu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,RE=uc`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,LE=bu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${RE} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,kE=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?fe.createElement(LE,null,e):e:t==="blank"?null:fe.createElement(IE,null,fe.createElement(SE,{...r}),t!=="loading"&&fe.createElement(CE,null,t==="error"?fe.createElement(NE,{...r}):fe.createElement(TE,{...r})))},PE=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,DE=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,ME="0%{opacity:0;} 100%{opacity:1;}",OE="0%{opacity:1;} 100%{opacity:0;}",FE=bu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,qE=bu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,VE=(n,e)=>{let t=n.includes("top")?1:-1,[r,i]=YN()?[ME,OE]:[PE(t),DE(t)];return{animation:e?`${uc(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${uc(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},BE=fe.memo(({toast:n,position:e,style:t,children:r})=>{let i=n.height?VE(n.position||e||"top-center",n.visible):{opacity:0},a=fe.createElement(kE,{toast:n}),c=fe.createElement(qE,{...n.ariaProps},ng(n.message,n));return fe.createElement(FE,{className:n.className,style:{...i,...t,...n.style}},typeof r=="function"?r({icon:a,message:c}):fe.createElement(fe.Fragment,null,a,c))});uE(fe.createElement);var UE=({id:n,className:e,style:t,onHeightUpdate:r,children:i})=>{let a=fe.useCallback(c=>{if(c){let d=()=>{let h=c.getBoundingClientRect().height;r(n,h)};d(),new MutationObserver(d).observe(c,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return fe.createElement("div",{ref:a,className:e,style:t},i)},zE=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:YN()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...i}},HE=Og`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,vp=16,$E=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:i,toasterId:a,containerStyle:c,containerClassName:d})=>{let{toasts:h,handlers:f}=yE(t,a);return fe.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:vp,left:vp,right:vp,bottom:vp,pointerEvents:"none",...c},className:d,onMouseEnter:f.startPause,onMouseLeave:f.endPause},h.map(p=>{let y=p.position||e,N=f.calculateOffset(p,{reverseOrder:n,gutter:r,defaultPosition:e}),b=zE(y,N);return fe.createElement(UE,{id:p.id,key:p.id,onHeightUpdate:f.updateHeight,className:p.visible?HE:"",style:b},p.type==="custom"?ng(p.message,p):i?i(p):fe.createElement(BE,{toast:p,position:y}))}))},kt=Pi;var y5="popstate";function GE(n={}){function e(r,i){let{pathname:a,search:c,hash:d}=r.location;return Cv("",{pathname:a,search:c,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Gf(i)}return YE(e,t,null,n)}function kr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function oo(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WE(){return Math.random().toString(36).substring(2,10)}function b5(n,e){return{usr:n.state,key:n.key,idx:e}}function Cv(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Eh(e):e,state:t,key:e&&e.key||r||WE()}}function Gf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Eh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function YE(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,d="POP",h=null,f=p();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function p(){return(c.state||{idx:null}).idx}function y(){d="POP";let R=p(),I=R==null?null:R-f;f=R,h&&h({action:d,location:C.location,delta:I})}function N(R,I){d="PUSH";let B=Cv(C.location,R,I);f=p()+1;let z=b5(B,f),H=C.createHref(B);try{c.pushState(z,"",H)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;i.location.assign(H)}a&&h&&h({action:d,location:C.location,delta:1})}function b(R,I){d="REPLACE";let B=Cv(C.location,R,I);f=p();let z=b5(B,f),H=C.createHref(B);c.replaceState(z,"",H),a&&h&&h({action:d,location:C.location,delta:0})}function j(R){return KE(R)}let C={get action(){return d},get location(){return n(i,c)},listen(R){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(y5,y),h=R,()=>{i.removeEventListener(y5,y),h=null}},createHref(R){return e(i,R)},createURL:j,encodeLocation(R){let I=j(R);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:N,replace:b,go(R){return c.go(R)}};return C}function KE(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),kr(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Gf(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function ZN(n,e,t="/"){return QE(n,e,t,!1)}function QE(n,e,t,r){let i=typeof e=="string"?Eh(e):e,a=dc(i.pathname||"/",t);if(a==null)return null;let c=e4(n);XE(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=lT(a);d=aT(c[h],f,r)}return d}function e4(n,e=[],t=[],r="",i=!1){let a=(c,d,h=i,f)=>{let p={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&h)return;kr(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let y=lc([r,p.relativePath]),N=t.concat(p);c.children&&c.children.length>0&&(kr(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),e4(c.children,e,N,y,h)),!(c.path==null&&!c.index)&&e.push({path:y,score:iT(y,c.index),routesMeta:N})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))a(c,d);else for(let h of t4(c.path))a(c,d,!0,h)}),e}function t4(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=t4(r.join("/")),d=[];return d.push(...c.map(h=>h===""?a:[a,h].join("/"))),i&&d.push(...c),d.map(h=>n.startsWith("/")&&h===""?"/":h)}function XE(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:sT(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var JE=/^:[\w-]+$/,ZE=3,eT=2,tT=1,nT=10,rT=-2,w5=n=>n==="*";function iT(n,e){let t=n.split("/"),r=t.length;return t.some(w5)&&(r+=rT),e&&(r+=eT),t.filter(i=>!w5(i)).reduce((i,a)=>i+(JE.test(a)?ZE:a===""?tT:nT),r)}function sT(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function aT(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",c=[];for(let d=0;d<r.length;++d){let h=r[d],f=d===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",y=rg({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),N=h.route;if(!y&&f&&t&&!r[r.length-1].route.index&&(y=rg({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!y)return null;Object.assign(i,y.params),c.push({params:i,pathname:lc([a,y.pathname]),pathnameBase:fT(lc([a,y.pathnameBase])),route:N}),y.pathnameBase!=="/"&&(a=lc([a,y.pathnameBase]))}return c}function rg(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=oT(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:y},N)=>{if(p==="*"){let j=d[N]||"";c=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const b=d[N];return y&&!b?f[p]=void 0:f[p]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:n}}function oT(n,e=!1,t=!0){oo(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oo(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function dc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var cT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uT=n=>cT.test(n);function dT(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Eh(n):n,a;if(t)if(uT(t))a=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),oo(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?a=_5(t.substring(1),"/"):a=_5(t,e)}else a=e;return{pathname:a,search:mT(r),hash:pT(i)}}function _5(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Ox(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function j1(n){let e=hT(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function E1(n,e,t,r=!1){let i;typeof n=="string"?i=Eh(n):(i={...n},kr(!i.pathname||!i.pathname.includes("?"),Ox("?","pathname","search",i)),kr(!i.pathname||!i.pathname.includes("#"),Ox("#","pathname","hash",i)),kr(!i.search||!i.search.includes("#"),Ox("#","search","hash",i)));let a=n===""||i.pathname==="",c=a?"/":i.pathname,d;if(c==null)d=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let N=c.split("/");for(;N[0]==="..";)N.shift(),y-=1;i.pathname=N.join("/")}d=y>=0?e[y]:"/"}let h=dT(i,d),f=c&&c!=="/"&&c.endsWith("/"),p=(a||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var lc=n=>n.join("/").replace(/\/\/+/g,"/"),fT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),mT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,pT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function gT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function xT(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var n4=["POST","PUT","PATCH","DELETE"];new Set(n4);var vT=["GET",...n4];new Set(vT);var Th=fe.createContext(null);Th.displayName="DataRouter";var qg=fe.createContext(null);qg.displayName="DataRouterState";fe.createContext(!1);var r4=fe.createContext({isTransitioning:!1});r4.displayName="ViewTransition";var yT=fe.createContext(new Map);yT.displayName="Fetchers";var bT=fe.createContext(null);bT.displayName="Await";var uo=fe.createContext(null);uo.displayName="Navigation";var lm=fe.createContext(null);lm.displayName="Location";var Sl=fe.createContext({outlet:null,matches:[],isDataRoute:!1});Sl.displayName="Route";var T1=fe.createContext(null);T1.displayName="RouteError";function wT(n,{relative:e}={}){kr(Ch(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=fe.useContext(uo),{hash:i,pathname:a,search:c}=cm(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:lc([t,a])),r.createHref({pathname:d,search:c,hash:i})}function Ch(){return fe.useContext(lm)!=null}function wu(){return kr(Ch(),"useLocation() may be used only in the context of a <Router> component."),fe.useContext(lm).location}var i4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function s4(n){fe.useContext(uo).static||fe.useLayoutEffect(n)}function a4(){let{isDataRoute:n}=fe.useContext(Sl);return n?PT():_T()}function _T(){kr(Ch(),"useNavigate() may be used only in the context of a <Router> component.");let n=fe.useContext(Th),{basename:e,navigator:t}=fe.useContext(uo),{matches:r}=fe.useContext(Sl),{pathname:i}=wu(),a=JSON.stringify(j1(r)),c=fe.useRef(!1);return s4(()=>{c.current=!0}),fe.useCallback((h,f={})=>{if(oo(c.current,i4),!c.current)return;if(typeof h=="number"){t.go(h);return}let p=E1(h,JSON.parse(a),i,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:lc([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,a,i,n])}fe.createContext(null);function cm(n,{relative:e}={}){let{matches:t}=fe.useContext(Sl),{pathname:r}=wu(),i=JSON.stringify(j1(t));return fe.useMemo(()=>E1(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function NT(n,e){return o4(n,e)}function o4(n,e,t,r,i){kr(Ch(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=fe.useContext(uo),{matches:c}=fe.useContext(Sl),d=c[c.length-1],h=d?d.params:{},f=d?d.pathname:"/",p=d?d.pathnameBase:"/",y=d&&d.route;{let B=y&&y.path||"";l4(f,!y||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let N=wu(),b;if(e){let B=typeof e=="string"?Eh(e):e;kr(p==="/"||B.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${B.pathname}" was given in the \`location\` prop.`),b=B}else b=N;let j=b.pathname||"/",C=j;if(p!=="/"){let B=p.replace(/^\//,"").split("/");C="/"+j.replace(/^\//,"").split("/").slice(B.length).join("/")}let R=ZN(n,{pathname:C});oo(y||R!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),oo(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=TT(R&&R.map(B=>Object.assign({},B,{params:Object.assign({},h,B.params),pathname:lc([p,a.encodeLocation?a.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?p:lc([p,a.encodeLocation?a.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),c,t,r,i);return e&&I?fe.createElement(lm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},I):I}function AT(){let n=kT(),e=gT(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=fe.createElement(fe.Fragment,null,fe.createElement("p",null," Hey developer "),fe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",fe.createElement("code",{style:a},"ErrorBoundary")," or"," ",fe.createElement("code",{style:a},"errorElement")," prop on your route.")),fe.createElement(fe.Fragment,null,fe.createElement("h2",null,"Unexpected Application Error!"),fe.createElement("h3",{style:{fontStyle:"italic"}},e),t?fe.createElement("pre",{style:i},t):null,c)}var ST=fe.createElement(AT,null),jT=class extends fe.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?fe.createElement(Sl.Provider,{value:this.props.routeContext},fe.createElement(T1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ET({routeContext:n,match:e,children:t}){let r=fe.useContext(Th);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),fe.createElement(Sl.Provider,{value:n},t)}function TT(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,c=t?.errors;if(c!=null){let p=a.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);kr(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let d=!1,h=-1;if(t)for(let p=0;p<a.length;p++){let y=a[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=p),y.route.id){let{loaderData:N,errors:b}=t,j=y.route.loader&&!N.hasOwnProperty(y.route.id)&&(!b||b[y.route.id]===void 0);if(y.route.lazy||j){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}let f=t&&r?(p,y)=>{r(p,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:xT(t.matches),errorInfo:y})}:void 0;return a.reduceRight((p,y,N)=>{let b,j=!1,C=null,R=null;t&&(b=c&&y.route.id?c[y.route.id]:void 0,C=y.route.errorElement||ST,d&&(h<0&&N===0?(l4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,R=null):h===N&&(j=!0,R=y.route.hydrateFallbackElement||null)));let I=e.concat(a.slice(0,N+1)),B=()=>{let z;return b?z=C:j?z=R:y.route.Component?z=fe.createElement(y.route.Component,null):y.route.element?z=y.route.element:z=p,fe.createElement(ET,{match:y,routeContext:{outlet:p,matches:I,isDataRoute:t!=null},children:z})};return t&&(y.route.ErrorBoundary||y.route.errorElement||N===0)?fe.createElement(jT,{location:t.location,revalidation:t.revalidation,component:C,error:b,children:B(),routeContext:{outlet:null,matches:I,isDataRoute:!0},onError:f}):B()},null)}function C1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CT(n){let e=fe.useContext(Th);return kr(e,C1(n)),e}function IT(n){let e=fe.useContext(qg);return kr(e,C1(n)),e}function RT(n){let e=fe.useContext(Sl);return kr(e,C1(n)),e}function I1(n){let e=RT(n),t=e.matches[e.matches.length-1];return kr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function LT(){return I1("useRouteId")}function kT(){let n=fe.useContext(T1),e=IT("useRouteError"),t=I1("useRouteError");return n!==void 0?n:e.errors?.[t]}function PT(){let{router:n}=CT("useNavigate"),e=I1("useNavigate"),t=fe.useRef(!1);return s4(()=>{t.current=!0}),fe.useCallback(async(i,a={})=>{oo(t.current,i4),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var N5={};function l4(n,e,t){!e&&!N5[n]&&(N5[n]=!0,oo(!1,t))}fe.memo(DT);function DT({routes:n,future:e,state:t,unstable_onError:r}){return o4(n,void 0,t,r,e)}function MT({to:n,replace:e,state:t,relative:r}){kr(Ch(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=fe.useContext(uo);oo(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=fe.useContext(Sl),{pathname:c}=wu(),d=a4(),h=E1(n,j1(a),c,r==="path"),f=JSON.stringify(h);return fe.useEffect(()=>{d(JSON.parse(f),{replace:e,state:t,relative:r})},[d,f,r,e,t]),null}function Bs(n){kr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function OT({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:c}){kr(!Ch(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),h=fe.useMemo(()=>({basename:d,navigator:i,static:a,unstable_useTransitions:c,future:{}}),[d,i,a,c]);typeof t=="string"&&(t=Eh(t));let{pathname:f="/",search:p="",hash:y="",state:N=null,key:b="default"}=t,j=fe.useMemo(()=>{let C=dc(f,d);return C==null?null:{location:{pathname:C,search:p,hash:y,state:N,key:b},navigationType:r}},[d,f,p,y,N,b,r]);return oo(j!=null,`<Router basename="${d}"> is not able to match the URL "${f}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:fe.createElement(uo.Provider,{value:h},fe.createElement(lm.Provider,{children:e,value:j}))}function FT({children:n,location:e}){return NT(Iv(n),e)}function Iv(n,e=[]){let t=[];return fe.Children.forEach(n,(r,i)=>{if(!fe.isValidElement(r))return;let a=[...e,i];if(r.type===fe.Fragment){t.push.apply(t,Iv(r.props.children,a));return}kr(r.type===Bs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),kr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Iv(r.props.children,a)),t.push(c)}),t}var Mp="get",Op="application/x-www-form-urlencoded";function Vg(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function qT(n){return Vg(n)&&n.tagName.toLowerCase()==="button"}function VT(n){return Vg(n)&&n.tagName.toLowerCase()==="form"}function BT(n){return Vg(n)&&n.tagName.toLowerCase()==="input"}function UT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function zT(n,e){return n.button===0&&(!e||e==="_self")&&!UT(n)}var yp=null;function HT(){if(yp===null)try{new FormData(document.createElement("form"),0),yp=!1}catch{yp=!0}return yp}var $T=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fx(n){return n!=null&&!$T.has(n)?(oo(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Op}"`),null):n}function GT(n,e){let t,r,i,a,c;if(VT(n)){let d=n.getAttribute("action");r=d?dc(d,e):null,t=n.getAttribute("method")||Mp,i=Fx(n.getAttribute("enctype"))||Op,a=new FormData(n)}else if(qT(n)||BT(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||d.getAttribute("action");if(r=h?dc(h,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Mp,i=Fx(n.getAttribute("formenctype"))||Fx(d.getAttribute("enctype"))||Op,a=new FormData(d,n),!HT()){let{name:f,type:p,value:y}=n;if(p==="image"){let N=f?`${f}.`:"";a.append(`${N}x`,"0"),a.append(`${N}y`,"0")}else f&&a.append(f,y)}}else{if(Vg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Mp,r=null,i=Op,c=n}return a&&i==="text/plain"&&(c=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function R1(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function WT(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&dc(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function YT(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KT(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function QT(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let c=await YT(a,t);return c.links?c.links():[]}return[]}));return eC(r.flat(1).filter(KT).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function A5(n,e,t,r,i,a){let c=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,d=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return a==="assets"?e.filter((h,f)=>c(h,f)||d(h,f)):a==="data"?e.filter((h,f)=>{let p=r.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(c(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function XT(n,e,{includeHydrateFallback:t}={}){return JT(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function JT(n){return[...new Set(n)]}function ZT(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function eC(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(ZT(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function c4(){let n=fe.useContext(Th);return R1(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function tC(){let n=fe.useContext(qg);return R1(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var L1=fe.createContext(void 0);L1.displayName="FrameworkContext";function u4(){let n=fe.useContext(L1);return R1(n,"You must render this element inside a <HydratedRouter> element"),n}function nC(n,e){let t=fe.useContext(L1),[r,i]=fe.useState(!1),[a,c]=fe.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:y}=e,N=fe.useRef(null);fe.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let C=I=>{I.forEach(B=>{c(B.isIntersecting)})},R=new IntersectionObserver(C,{threshold:.5});return N.current&&R.observe(N.current),()=>{R.disconnect()}}},[n]),fe.useEffect(()=>{if(r){let C=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(C)}}},[r]);let b=()=>{i(!0)},j=()=>{i(!1),c(!1)};return t?n!=="intent"?[a,N,{}]:[a,N,{onFocus:Nf(d,b),onBlur:Nf(h,j),onMouseEnter:Nf(f,b),onMouseLeave:Nf(p,j),onTouchStart:Nf(y,b)}]:[!1,N,{}]}function Nf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function rC({page:n,...e}){let{router:t}=c4(),r=fe.useMemo(()=>ZN(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?fe.createElement(sC,{page:n,matches:r,...e}):null}function iC(n){let{manifest:e,routeModules:t}=u4(),[r,i]=fe.useState([]);return fe.useEffect(()=>{let a=!1;return QT(n,e,t).then(c=>{a||i(c)}),()=>{a=!0}},[n,e,t]),r}function sC({page:n,matches:e,...t}){let r=wu(),{manifest:i,routeModules:a}=u4(),{basename:c}=c4(),{loaderData:d,matches:h}=tC(),f=fe.useMemo(()=>A5(n,e,h,i,r,"data"),[n,e,h,i,r]),p=fe.useMemo(()=>A5(n,e,h,i,r,"assets"),[n,e,h,i,r]),y=fe.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let j=new Set,C=!1;if(e.forEach(I=>{let B=i.routes[I.route.id];!B||!B.hasLoader||(!f.some(z=>z.route.id===I.route.id)&&I.route.id in d&&a[I.route.id]?.shouldRevalidate||B.hasClientLoader?C=!0:j.add(I.route.id))}),j.size===0)return[];let R=WT(n,c,"data");return C&&j.size>0&&R.searchParams.set("_routes",e.filter(I=>j.has(I.route.id)).map(I=>I.route.id).join(",")),[R.pathname+R.search]},[c,d,r,i,f,e,n,a]),N=fe.useMemo(()=>XT(p,i),[p,i]),b=iC(p);return fe.createElement(fe.Fragment,null,y.map(j=>fe.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...t})),N.map(j=>fe.createElement("link",{key:j,rel:"modulepreload",href:j,...t})),b.map(({key:j,link:C})=>fe.createElement("link",{key:j,nonce:t.nonce,...C})))}function aC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var d4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{d4&&(window.__reactRouterVersion="7.10.1")}catch{}function oC({basename:n,children:e,unstable_useTransitions:t,window:r}){let i=fe.useRef();i.current==null&&(i.current=GE({window:r,v5Compat:!0}));let a=i.current,[c,d]=fe.useState({action:a.action,location:a.location}),h=fe.useCallback(f=>{t===!1?d(f):fe.startTransition(()=>d(f))},[t]);return fe.useLayoutEffect(()=>a.listen(h),[a,h]),fe.createElement(OT,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:a,unstable_useTransitions:t===!0})}var h4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,f4=fe.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:c,state:d,target:h,to:f,preventScrollReset:p,viewTransition:y,...N},b){let{basename:j,unstable_useTransitions:C}=fe.useContext(uo),R=typeof f=="string"&&h4.test(f),I,B=!1;if(typeof f=="string"&&R&&(I=f,d4))try{let G=new URL(window.location.href),S=f.startsWith("//")?new URL(G.protocol+f):new URL(f),L=dc(S.pathname,j);S.origin===G.origin&&L!=null?f=L+S.search+S.hash:B=!0}catch{oo(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=wT(f,{relative:i}),[H,he,re]=nC(r,N),V=uC(f,{replace:c,state:d,target:h,preventScrollReset:p,relative:i,viewTransition:y,unstable_useTransitions:C});function D(G){e&&e(G),G.defaultPrevented||V(G)}let k=fe.createElement("a",{...N,...re,href:I||z,onClick:B||a?e:D,ref:aC(b,he),target:h,"data-discover":!R&&t==="render"?"true":void 0});return H&&!R?fe.createElement(fe.Fragment,null,k,fe.createElement(rC,{page:z})):k});f4.displayName="Link";var m4=fe.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:c,viewTransition:d,children:h,...f},p){let y=cm(c,{relative:f.relative}),N=wu(),b=fe.useContext(qg),{navigator:j,basename:C}=fe.useContext(uo),R=b!=null&&pC(y)&&d===!0,I=j.encodeLocation?j.encodeLocation(y).pathname:y.pathname,B=N.pathname,z=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(B=B.toLowerCase(),z=z?z.toLowerCase():null,I=I.toLowerCase()),z&&C&&(z=dc(z,C)||z);const H=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let he=B===I||!i&&B.startsWith(I)&&B.charAt(H)==="/",re=z!=null&&(z===I||!i&&z.startsWith(I)&&z.charAt(I.length)==="/"),V={isActive:he,isPending:re,isTransitioning:R},D=he?e:void 0,k;typeof r=="function"?k=r(V):k=[r,he?"active":null,re?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let G=typeof a=="function"?a(V):a;return fe.createElement(f4,{...f,"aria-current":D,className:k,ref:p,style:G,to:c,viewTransition:d},typeof h=="function"?h(V):h)});m4.displayName="NavLink";var lC=fe.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:c=Mp,action:d,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:y,...N},b)=>{let{unstable_useTransitions:j}=fe.useContext(uo),C=fC(),R=mC(d,{relative:f}),I=c.toLowerCase()==="get"?"get":"post",B=typeof d=="string"&&h4.test(d),z=H=>{if(h&&h(H),H.defaultPrevented)return;H.preventDefault();let he=H.nativeEvent.submitter,re=he?.getAttribute("formmethod")||c,V=()=>C(he||H.currentTarget,{fetcherKey:e,method:re,navigate:t,replace:i,state:a,relative:f,preventScrollReset:p,viewTransition:y});j&&t!==!1?fe.startTransition(()=>V()):V()};return fe.createElement("form",{ref:b,method:I,action:R,onSubmit:r?h:z,...N,"data-discover":!B&&n==="render"?"true":void 0})});lC.displayName="Form";function cC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function p4(n){let e=fe.useContext(Th);return kr(e,cC(n)),e}function uC(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:c,unstable_useTransitions:d}={}){let h=a4(),f=wu(),p=cm(n,{relative:a});return fe.useCallback(y=>{if(zT(y,e)){y.preventDefault();let N=t!==void 0?t:Gf(f)===Gf(p),b=()=>h(n,{replace:N,state:r,preventScrollReset:i,relative:a,viewTransition:c});d?fe.startTransition(()=>b()):b()}},[f,h,p,t,r,e,n,i,a,c,d])}var dC=0,hC=()=>`__${String(++dC)}__`;function fC(){let{router:n}=p4("useSubmit"),{basename:e}=fe.useContext(uo),t=LT(),r=n.fetch,i=n.navigate;return fe.useCallback(async(a,c={})=>{let{action:d,method:h,encType:f,formData:p,body:y}=GT(a,e);if(c.navigate===!1){let N=c.fetcherKey||hC();await r(N,t,c.action||d,{preventScrollReset:c.preventScrollReset,formData:p,body:y,formMethod:c.method||h,formEncType:c.encType||f,flushSync:c.flushSync})}else await i(c.action||d,{preventScrollReset:c.preventScrollReset,formData:p,body:y,formMethod:c.method||h,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,i,e,t])}function mC(n,{relative:e}={}){let{basename:t}=fe.useContext(uo),r=fe.useContext(Sl);kr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...cm(n||".",{relative:e})},c=wu();if(n==null){a.search=c.search;let d=new URLSearchParams(a.search),h=d.getAll("index");if(h.some(p=>p==="")){d.delete("index"),h.filter(y=>y).forEach(y=>d.append("index",y));let p=d.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:lc([t,a.pathname])),Gf(a)}function pC(n,{relative:e}={}){let t=fe.useContext(r4);kr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=p4("useViewTransitionState"),i=cm(n,{relative:e});if(!t.isTransitioning)return!1;let a=dc(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=dc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return rg(i.pathname,c)!=null||rg(i.pathname,a)!=null}const gC=()=>{};var S5={};const g4=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},xC=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],c=n[t++],d=n[t++],h=((i&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},x4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],c=i+1<n.length,d=c?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,p=a>>2,y=(a&3)<<4|d>>4;let N=(d&15)<<2|f>>6,b=f&63;h||(b=64,c||(N=64)),r.push(t[p],t[y],t[N],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(g4(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):xC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||d==null||f==null||y==null)throw new vC;const N=a<<2|d>>4;if(r.push(N),f!==64){const b=d<<4&240|f>>2;if(r.push(b),y!==64){const j=f<<6&192|y;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class vC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yC=function(n){const e=g4(n);return x4.encodeByteArray(e,!0)},ig=function(n){return yC(n).replace(/\./g,"")},v4=function(n){try{return x4.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const wC=()=>bC().__FIREBASE_DEFAULTS__,_C=()=>{if(typeof process>"u"||typeof S5>"u")return;const n=S5.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},NC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&v4(n[1]);return e&&JSON.parse(e)},Bg=()=>{try{return gC()||wC()||_C()||NC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},y4=n=>Bg()?.emulatorHosts?.[n],AC=n=>{const e=y4(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},b4=()=>Bg()?.config,w4=n=>Bg()?.[`_${n}`];class SC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Ih(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _4(n){return(await fetch(n,{credentials:"include"})).ok}function jC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ig(JSON.stringify(t)),ig(JSON.stringify(c)),""].join(".")}const Df={};function EC(){const n={prod:[],emulator:[]};for(const e of Object.keys(Df))Df[e]?n.emulator.push(e):n.prod.push(e);return n}function TC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let j5=!1;function N4(n,e){if(typeof window>"u"||typeof document>"u"||!Ih(window.location.host)||Df[n]===e||Df[n]||j5)return;Df[n]=e;function t(N){return`__firebase__banner__${N}`}const r="__firebase__banner",a=EC().prod.length>0;function c(){const N=document.getElementById(r);N&&N.remove()}function d(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function h(N,b){N.setAttribute("width","24"),N.setAttribute("id",b),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function f(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{j5=!0,c()},N}function p(N,b){N.setAttribute("id",b),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function y(){const N=TC(r),b=t("text"),j=document.getElementById(b)||document.createElement("span"),C=t("learnmore"),R=document.getElementById(C)||document.createElement("a"),I=t("preprendIcon"),B=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const z=N.element;d(z),p(R,C);const H=f();h(B,I),z.append(B,j,R,H),document.body.appendChild(z)}a?(j.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function Is(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Is())}function IC(){const n=Bg()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function A4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function LC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kC(){const n=Is();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function PC(){return!IC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S4(){try{return typeof indexedDB=="object"}catch{return!1}}function j4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}function DC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const MC="FirebaseError";class qo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=MC,Object.setPrototypeOf(this,qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sd.prototype.create)}}class sd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?OC(a,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new qo(i,d,r)}}function OC(n,e){return n.replace(FC,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const FC=/\{\$([^}]+)}/g;function qC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function du(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],c=e[i];if(E5(a)&&E5(c)){if(!du(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function E5(n){return n!==null&&typeof n=="object"}function um(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Cf(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function If(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function VC(n,e){const t=new BC(n,e);return t.subscribe.bind(t)}class BC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");UC(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=qx),i.error===void 0&&(i.error=qx),i.complete===void 0&&(i.complete=qx);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function qx(){}const zC=1e3,HC=2,$C=14400*1e3,GC=.5;function T5(n,e=zC,t=HC){const r=e*Math.pow(t,n),i=Math.round(GC*r*(Math.random()-.5)*2);return Math.min($C,r+i)}function Pr(n){return n&&n._delegate?n._delegate:n}class Do{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const zu="[DEFAULT]";class WC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new SC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KC(e))try{this.getOrInitializeService({instanceIdentifier:zu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=zu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zu){return this.instances.has(e)}getOptions(e=zu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zu){return this.component?this.component.multipleInstances?e:zu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YC(n){return n===zu?void 0:n}function KC(n){return n.instantiationMode==="EAGER"}class QC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new WC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Nn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Nn||(Nn={}));const XC={debug:Nn.DEBUG,verbose:Nn.VERBOSE,info:Nn.INFO,warn:Nn.WARN,error:Nn.ERROR,silent:Nn.SILENT},JC=Nn.INFO,ZC={[Nn.DEBUG]:"log",[Nn.VERBOSE]:"log",[Nn.INFO]:"info",[Nn.WARN]:"warn",[Nn.ERROR]:"error"},eI=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=ZC[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ug{constructor(e){this.name=e,this._logLevel=JC,this._logHandler=eI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Nn.DEBUG,...e),this._logHandler(this,Nn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Nn.VERBOSE,...e),this._logHandler(this,Nn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Nn.INFO,...e),this._logHandler(this,Nn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Nn.WARN,...e),this._logHandler(this,Nn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Nn.ERROR,...e),this._logHandler(this,Nn.ERROR,...e)}}const tI=(n,e)=>e.some(t=>n instanceof t);let C5,I5;function nI(){return C5||(C5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rI(){return I5||(I5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const E4=new WeakMap,Rv=new WeakMap,T4=new WeakMap,Vx=new WeakMap,k1=new WeakMap;function iI(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(au(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&E4.set(t,n)}).catch(()=>{}),k1.set(e,n),e}function sI(n){if(Rv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});Rv.set(n,e)}let Lv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||T4.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return au(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function aI(n){Lv=n(Lv)}function oI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Bx(this),e,...t);return T4.set(r,e.sort?e.sort():[e]),au(r)}:rI().includes(n)?function(...e){return n.apply(Bx(this),e),au(E4.get(this))}:function(...e){return au(n.apply(Bx(this),e))}}function lI(n){return typeof n=="function"?oI(n):(n instanceof IDBTransaction&&sI(n),tI(n,nI())?new Proxy(n,Lv):n)}function au(n){if(n instanceof IDBRequest)return iI(n);if(Vx.has(n))return Vx.get(n);const e=lI(n);return e!==n&&(Vx.set(n,e),k1.set(e,n)),e}const Bx=n=>k1.get(n);function C4(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),d=au(c);return r&&c.addEventListener("upgradeneeded",h=>{r(au(c.result),h.oldVersion,h.newVersion,au(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),d.then(h=>{a&&h.addEventListener("close",()=>a()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const cI=["get","getKey","getAll","getAllKeys","count"],uI=["put","add","delete","clear"],Ux=new Map;function R5(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ux.get(e))return Ux.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=uI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cI.includes(t)))return;const a=async function(c,...d){const h=this.transaction(c,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(d.shift())),(await Promise.all([f[t](...d),i&&h.done]))[0]};return Ux.set(e,a),a}aI(n=>({...n,get:(e,t,r)=>R5(e,t)||n.get(e,t,r),has:(e,t)=>!!R5(e,t)||n.has(e,t)}));class dI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function hI(n){return n.getComponent()?.type==="VERSION"}const kv="@firebase/app",L5="0.14.6";const hc=new Ug("@firebase/app"),fI="@firebase/app-compat",mI="@firebase/analytics-compat",pI="@firebase/analytics",gI="@firebase/app-check-compat",xI="@firebase/app-check",vI="@firebase/auth",yI="@firebase/auth-compat",bI="@firebase/database",wI="@firebase/data-connect",_I="@firebase/database-compat",NI="@firebase/functions",AI="@firebase/functions-compat",SI="@firebase/installations",jI="@firebase/installations-compat",EI="@firebase/messaging",TI="@firebase/messaging-compat",CI="@firebase/performance",II="@firebase/performance-compat",RI="@firebase/remote-config",LI="@firebase/remote-config-compat",kI="@firebase/storage",PI="@firebase/storage-compat",DI="@firebase/firestore",MI="@firebase/ai",OI="@firebase/firestore-compat",FI="firebase",qI="12.6.0";const Pv="[DEFAULT]",VI={[kv]:"fire-core",[fI]:"fire-core-compat",[pI]:"fire-analytics",[mI]:"fire-analytics-compat",[xI]:"fire-app-check",[gI]:"fire-app-check-compat",[vI]:"fire-auth",[yI]:"fire-auth-compat",[bI]:"fire-rtdb",[wI]:"fire-data-connect",[_I]:"fire-rtdb-compat",[NI]:"fire-fn",[AI]:"fire-fn-compat",[SI]:"fire-iid",[jI]:"fire-iid-compat",[EI]:"fire-fcm",[TI]:"fire-fcm-compat",[CI]:"fire-perf",[II]:"fire-perf-compat",[RI]:"fire-rc",[LI]:"fire-rc-compat",[kI]:"fire-gcs",[PI]:"fire-gcs-compat",[DI]:"fire-fst",[OI]:"fire-fst-compat",[MI]:"fire-vertex","fire-js":"fire-js",[FI]:"fire-js-all"};const sg=new Map,BI=new Map,Dv=new Map;function k5(n,e){try{n.container.addComponent(e)}catch(t){hc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _l(n){const e=n.name;if(Dv.has(e))return hc.debug(`There were multiple attempts to register component ${e}.`),!1;Dv.set(e,n);for(const t of sg.values())k5(t,n);for(const t of BI.values())k5(t,n);return!0}function ad(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function so(n){return n==null?!1:n.settings!==void 0}const UI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ou=new sd("app","Firebase",UI);class zI{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Do("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ou.create("app-deleted",{appName:this._name})}}const Rh=qI;function P1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Pv,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ou.create("bad-app-name",{appName:String(i)});if(t||(t=b4()),!t)throw ou.create("no-options");const a=sg.get(i);if(a){if(du(t,a.options)&&du(r,a.config))return a;throw ou.create("duplicate-app",{appName:i})}const c=new QC(i);for(const h of Dv.values())c.addComponent(h);const d=new zI(t,r,c);return sg.set(i,d),d}function D1(n=Pv){const e=sg.get(n);if(!e&&n===Pv&&b4())return P1();if(!e)throw ou.create("no-app",{appName:n});return e}function ao(n,e,t){let r=VI[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hc.warn(c.join(" "));return}_l(new Do(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const HI="firebase-heartbeat-database",$I=1,Wf="firebase-heartbeat-store";let zx=null;function I4(){return zx||(zx=C4(HI,$I,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wf)}catch(t){console.warn(t)}}}}).catch(n=>{throw ou.create("idb-open",{originalErrorMessage:n.message})})),zx}async function GI(n){try{const t=(await I4()).transaction(Wf),r=await t.objectStore(Wf).get(R4(n));return await t.done,r}catch(e){if(e instanceof qo)hc.warn(e.message);else{const t=ou.create("idb-get",{originalErrorMessage:e?.message});hc.warn(t.message)}}}async function P5(n,e){try{const r=(await I4()).transaction(Wf,"readwrite");await r.objectStore(Wf).put(e,R4(n)),await r.done}catch(t){if(t instanceof qo)hc.warn(t.message);else{const r=ou.create("idb-set",{originalErrorMessage:t?.message});hc.warn(r.message)}}}function R4(n){return`${n.name}!${n.options.appId}`}const WI=1024,YI=30;class KI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=D5();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>YI){const i=JI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){hc.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=D5(),{heartbeatsToSend:t,unsentEntries:r}=QI(this._heartbeatsCache.heartbeats),i=ig(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return hc.warn(e),""}}}function D5(){return new Date().toISOString().substring(0,10)}function QI(n,e=WI){const t=[];let r=n.slice();for(const i of n){const a=t.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),M5(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),M5(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class XI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return S4()?j4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return P5(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return P5(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function M5(n){return ig(JSON.stringify({version:2,heartbeats:n})).length}function JI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function ZI(n){_l(new Do("platform-logger",e=>new dI(e),"PRIVATE")),_l(new Do("heartbeat",e=>new KI(e),"PRIVATE")),ao(kv,L5,n),ao(kv,L5,"esm2020"),ao("fire-js","")}ZI("");function L4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eR=L4,k4=new sd("auth","Firebase",L4());const ag=new Ug("@firebase/auth");function tR(n,...e){ag.logLevel<=Nn.WARN&&ag.warn(`Auth (${Rh}): ${n}`,...e)}function Fp(n,...e){ag.logLevel<=Nn.ERROR&&ag.error(`Auth (${Rh}): ${n}`,...e)}function Mo(n,...e){throw M1(n,...e)}function pl(n,...e){return M1(n,...e)}function P4(n,e,t){const r={...eR(),[e]:t};return new sd("auth","Firebase",r).create(e,{appName:n.name})}function cc(n){return P4(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function M1(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return k4.create(n,...e)}function Yt(n,e,...t){if(!n)throw M1(e,...t)}function ic(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Fp(e),new Error(e)}function fc(n,e){n||ic(e)}function Mv(){return typeof self<"u"&&self.location?.href||""}function nR(){return O5()==="http:"||O5()==="https:"}function O5(){return typeof self<"u"&&self.location?.protocol||null}function rR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nR()||A4()||"connection"in navigator)?navigator.onLine:!0}function iR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class dm{constructor(e,t){this.shortDelay=e,this.longDelay=t,fc(t>e,"Short delay should be less than long delay!"),this.isMobile=CC()||LC()}get(){return rR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function O1(n,e){fc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class D4{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ic("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ic("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ic("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const aR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oR=new dm(3e4,6e4);function _u(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function xc(n,e,t,r,i={}){return M4(n,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const d=um({key:n.config.apiKey,...c}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...a};return RC()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Ih(n.emulatorConfig.host)&&(f.credentials="include"),D4.fetch()(await O4(n,n.config.apiHost,t,d),f)})}async function M4(n,e,t){n._canInitEmulator=!1;const r={...sR,...e};try{const i=new cR(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw bp(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[h,f]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw bp(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw bp(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw bp(n,"user-disabled",c);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw P4(n,p,f);Mo(n,p)}}catch(i){if(i instanceof qo)throw i;Mo(n,"network-request-failed",{message:String(i)})}}async function hm(n,e,t,r,i={}){const a=await xc(n,e,t,r,i);return"mfaPendingCredential"in a&&Mo(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function O4(n,e,t,r){const i=`${e}${t}?${r}`,a=n,c=a.config.emulator?O1(n.config,i):`${n.config.apiScheme}://${i}`;return aR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function lR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(pl(this.auth,"network-request-failed")),oR.get())})}}function bp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=pl(n,e,r);return i.customData._tokenResponse=t,i}function F5(n){return n!==void 0&&n.enterprise!==void 0}class uR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dR(n,e){return xc(n,"GET","/v2/recaptchaConfig",_u(n,e))}async function hR(n,e){return xc(n,"POST","/v1/accounts:delete",e)}async function og(n,e){return xc(n,"POST","/v1/accounts:lookup",e)}function Mf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fR(n,e=!1){const t=Pr(n),r=await t.getIdToken(e),i=F1(r);Yt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a?.sign_in_provider;return{claims:i,token:r,authTime:Mf(Hx(i.auth_time)),issuedAtTime:Mf(Hx(i.iat)),expirationTime:Mf(Hx(i.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Hx(n){return Number(n)*1e3}function F1(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Fp("JWT malformed, contained fewer than 3 sections"),null;try{const i=v4(t);return i?JSON.parse(i):(Fp("Failed to decode base64 JWT payload"),null)}catch(i){return Fp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function q5(n){const e=F1(n);return Yt(e,"internal-error"),Yt(typeof e.exp<"u","internal-error"),Yt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function vh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof qo&&mR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function mR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class pR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ov{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mf(this.lastLoginAt),this.creationTime=Mf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function lg(n){const e=n.auth,t=await n.getIdToken(),r=await vh(n,og(e,{idToken:t}));Yt(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?F4(i.providerUserInfo):[],c=xR(n.providerData,a),d=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!c?.length,f=d?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Ov(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function gR(n){const e=Pr(n);await lg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xR(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function F4(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function vR(n,e){const t=await M4(n,{},async()=>{const r=um({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,c=await O4(n,i,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:r};return n.emulatorConfig&&Ih(n.emulatorConfig.host)&&(h.credentials="include"),D4.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function yR(n,e){return xc(n,"POST","/v2/accounts:revokeToken",_u(n,e))}class oh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Yt(e.idToken,"internal-error"),Yt(typeof e.idToken<"u","internal-error"),Yt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Yt(e.length!==0,"internal-error");const t=q5(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Yt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await vR(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,c=new oh;return r&&(Yt(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Yt(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&(Yt(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oh,this.toJSON())}_performRefresh(){return ic("not implemented")}}function Yc(n,e){Yt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Po{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new pR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ov(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await vh(this,this.stsTokenManager.getToken(this.auth,e));return Yt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fR(this,e)}reload(){return gR(this)}_assign(e){this!==e&&(Yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Po({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await lg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(so(this.auth.app))return Promise.reject(cc(this.auth));const e=await this.getIdToken();return await vh(this,hR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:y,emailVerified:N,isAnonymous:b,providerData:j,stsTokenManager:C}=t;Yt(y&&C,e,"internal-error");const R=oh.fromJSON(this.name,C);Yt(typeof y=="string",e,"internal-error"),Yc(r,e.name),Yc(i,e.name),Yt(typeof N=="boolean",e,"internal-error"),Yt(typeof b=="boolean",e,"internal-error"),Yc(a,e.name),Yc(c,e.name),Yc(d,e.name),Yc(h,e.name),Yc(f,e.name),Yc(p,e.name);const I=new Po({uid:y,auth:e,email:i,emailVerified:N,displayName:r,isAnonymous:b,photoURL:c,phoneNumber:a,tenantId:d,stsTokenManager:R,createdAt:f,lastLoginAt:p});return j&&Array.isArray(j)&&(I.providerData=j.map(B=>({...B}))),h&&(I._redirectEventId=h),I}static async _fromIdTokenResponse(e,t,r=!1){const i=new oh;i.updateFromServerResponse(t);const a=new Po({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await lg(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Yt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?F4(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!a?.length,d=new oh;d.updateFromIdToken(r);const h=new Po({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ov(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(h,f),h}}const V5=new Map;function sc(n){fc(n instanceof Function,"Expected a class definition");let e=V5.get(n);return e?(fc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,V5.set(n,e),e)}class q4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}q4.type="NONE";const B5=q4;function qp(n,e,t){return`firebase:${n}:${e}:${t}`}class lh{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=qp(this.userKey,i.apiKey,a),this.fullPersistenceKey=qp("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await og(this.auth,{idToken:e}).catch(()=>{});return t?Po._fromGetAccountInfoResponse(this.auth,t,e):null}return Po._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new lh(sc(B5),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||sc(B5);const c=qp(r,e.config.apiKey,e.name);let d=null;for(const f of t)try{const p=await f._get(c);if(p){let y;if(typeof p=="string"){const N=await og(e,{idToken:p}).catch(()=>{});if(!N)break;y=await Po._fromGetAccountInfoResponse(e,N,p)}else y=Po._fromJSON(e,p);f!==a&&(d=y),a=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new lh(a,e,r):(a=h[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(c)}catch{}})),new lh(a,e,r))}}function U5(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(z4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(V4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($4(e))return"Blackberry";if(G4(e))return"Webos";if(B4(e))return"Safari";if((e.includes("chrome/")||U4(e))&&!e.includes("edge/"))return"Chrome";if(H4(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function V4(n=Is()){return/firefox\//i.test(n)}function B4(n=Is()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function U4(n=Is()){return/crios\//i.test(n)}function z4(n=Is()){return/iemobile/i.test(n)}function H4(n=Is()){return/android/i.test(n)}function $4(n=Is()){return/blackberry/i.test(n)}function G4(n=Is()){return/webos/i.test(n)}function q1(n=Is()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bR(n=Is()){return q1(n)&&!!window.navigator?.standalone}function wR(){return kC()&&document.documentMode===10}function W4(n=Is()){return q1(n)||H4(n)||G4(n)||$4(n)||/windows phone/i.test(n)||z4(n)}function Y4(n,e=[]){let t;switch(n){case"Browser":t=U5(Is());break;case"Worker":t=`${U5(Is())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Rh}/${r}`}class _R{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,d)=>{try{const h=e(a);c(h)}catch(h){d(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function NR(n,e={}){return xc(n,"GET","/v2/passwordPolicy",_u(n,e))}const AR=6;class SR{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??AR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class jR{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new z5(this),this.idTokenSubscription=new z5(this),this.beforeStateQueue=new _R(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=sc(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await lh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await og(this,{idToken:e}),r=await Po._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(so(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===c)&&d?.user&&(r=d.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(so(this.app))return Promise.reject(cc(this));const t=e?Pr(e):null;return t&&Yt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Yt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return so(this.app)?Promise.reject(cc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return so(this.app)?Promise.reject(cc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NR(this),t=new SR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await yR(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&sc(e)||this._popupRedirectResolver;Yt(t,this,"argument-error"),this.redirectPersistenceManager=await lh.create(this,[sc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yt(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(so(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&tR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function od(n){return Pr(n)}class z5{constructor(e){this.auth=e,this.observer=null,this.addObserver=VC(t=>this.observer=t)}get next(){return Yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ER(n){zg=n}function K4(n){return zg.loadJS(n)}function TR(){return zg.recaptchaEnterpriseScript}function CR(){return zg.gapiScript}function IR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class RR{constructor(){this.enterprise=new LR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class LR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const kR="recaptcha-enterprise",Q4="NO_RECAPTCHA";class PR{constructor(e){this.type=kR,this.auth=od(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{dR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new uR(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,c(f.siteKey)}}).catch(h=>{d(h)})})}function i(a,c,d){const h=window.grecaptcha;F5(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{c(f)}).catch(()=>{c(Q4)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RR().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(d=>{if(!t&&F5(window.grecaptcha))i(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=TR();h.length!==0&&(h+=d),K4(h).then(()=>{i(d,a,c)}).catch(f=>{c(f)})}}).catch(d=>{c(d)})})}}async function H5(n,e,t,r=!1,i=!1){const a=new PR(n);let c;if(i)c=Q4;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Fv(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await H5(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await H5(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)})}function DR(n,e){const t=ad(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(du(a,e??{}))return i;Mo(i,"already-initialized")}return t.initialize({options:e})}function MR(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(sc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function OR(n,e,t){const r=od(n);Yt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=X4(e),{host:c,port:d}=FR(e),h=d===null?"":`:${d}`,f={url:`${a}//${c}${h}/`},p=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Yt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Yt(du(f,r.config.emulator)&&du(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Ih(c)?(_4(`${a}//${c}${h}`),N4("Auth",!0)):qR()}function X4(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function FR(n){const e=X4(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:$5(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:$5(c)}}}function $5(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function qR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class V1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ic("not implemented")}_getIdTokenResponse(e){return ic("not implemented")}_linkToIdToken(e,t){return ic("not implemented")}_getReauthenticationResolver(e){return ic("not implemented")}}async function VR(n,e){return xc(n,"POST","/v1/accounts:signUp",e)}async function BR(n,e){return hm(n,"POST","/v1/accounts:signInWithPassword",_u(n,e))}async function UR(n,e){return hm(n,"POST","/v1/accounts:signInWithEmailLink",_u(n,e))}async function zR(n,e){return hm(n,"POST","/v1/accounts:signInWithEmailLink",_u(n,e))}class Yf extends V1{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Yf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Yf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fv(e,t,"signInWithPassword",BR);case"emailLink":return UR(e,{email:this._email,oobCode:this._password});default:Mo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fv(e,r,"signUpPassword",VR);case"emailLink":return zR(e,{idToken:t,email:this._email,oobCode:this._password});default:Mo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ch(n,e){return hm(n,"POST","/v1/accounts:signInWithIdp",_u(n,e))}const HR="http://localhost";class Qu extends V1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const c=new Qu(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ch(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ch(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ch(e,t)}buildRequest(){const e={requestUri:HR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=um(t)}return e}}function $R(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GR(n){const e=Cf(If(n)).link,t=e?Cf(If(e)).deep_link_id:null,r=Cf(If(n)).deep_link_id;return(r?Cf(If(r)).link:null)||r||t||e||n}class B1{constructor(e){const t=Cf(If(e)),r=t.apiKey??null,i=t.oobCode??null,a=$R(t.mode??null);Yt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=GR(e);try{return new B1(t)}catch{return null}}}class Lh{constructor(){this.providerId=Lh.PROVIDER_ID}static credential(e,t){return Yf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=B1.parseLink(t);return Yt(r,"argument-error"),Yf._fromEmailAndCode(e,r.code,r.tenantId)}}Lh.PROVIDER_ID="password";Lh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class J4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fm extends J4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zc extends fm{constructor(){super("facebook.com")}static credential(e){return Qu._fromParams({providerId:Zc.PROVIDER_ID,signInMethod:Zc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zc.credentialFromTaggedObject(e)}static credentialFromError(e){return Zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zc.credential(e.oauthAccessToken)}catch{return null}}}Zc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zc.PROVIDER_ID="facebook.com";class eu extends fm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qu._fromParams({providerId:eu.PROVIDER_ID,signInMethod:eu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return eu.credentialFromTaggedObject(e)}static credentialFromError(e){return eu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return eu.credential(t,r)}catch{return null}}}eu.GOOGLE_SIGN_IN_METHOD="google.com";eu.PROVIDER_ID="google.com";class tu extends fm{constructor(){super("github.com")}static credential(e){return Qu._fromParams({providerId:tu.PROVIDER_ID,signInMethod:tu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tu.credentialFromTaggedObject(e)}static credentialFromError(e){return tu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tu.credential(e.oauthAccessToken)}catch{return null}}}tu.GITHUB_SIGN_IN_METHOD="github.com";tu.PROVIDER_ID="github.com";class nu extends fm{constructor(){super("twitter.com")}static credential(e,t){return Qu._fromParams({providerId:nu.PROVIDER_ID,signInMethod:nu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nu.credentialFromTaggedObject(e)}static credentialFromError(e){return nu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return nu.credential(t,r)}catch{return null}}}nu.TWITTER_SIGN_IN_METHOD="twitter.com";nu.PROVIDER_ID="twitter.com";async function WR(n,e){return hm(n,"POST","/v1/accounts:signUp",_u(n,e))}class Xu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Po._fromIdTokenResponse(e,r,i),c=G5(r);return new Xu({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=G5(r);return new Xu({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function G5(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class cg extends qo{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,cg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new cg(e,t,r,i)}}function Z4(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?cg._fromErrorAndOperation(n,a,e,r):a})}async function YR(n,e,t=!1){const r=await vh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Xu._forOperation(n,"link",r)}async function KR(n,e,t=!1){const{auth:r}=n;if(so(r.app))return Promise.reject(cc(r));const i="reauthenticate";try{const a=await vh(n,Z4(r,i,e,n),t);Yt(a.idToken,r,"internal-error");const c=F1(a.idToken);Yt(c,r,"internal-error");const{sub:d}=c;return Yt(n.uid===d,r,"user-mismatch"),Xu._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Mo(r,"user-mismatch"),a}}async function eA(n,e,t=!1){if(so(n.app))return Promise.reject(cc(n));const r="signIn",i=await Z4(n,r,e),a=await Xu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function QR(n,e){return eA(od(n),e)}async function tA(n){const e=od(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XR(n,e,t){if(so(n.app))return Promise.reject(cc(n));const r=od(n),c=await Fv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WR).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&tA(n),h}),d=await Xu._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function JR(n,e,t){return so(n.app)?Promise.reject(cc(n)):QR(Pr(n),Lh.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tA(n),r})}async function ZR(n,e){return xc(n,"POST","/v1/accounts:update",e)}async function e8(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Pr(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await vh(r,ZR(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function t8(n,e,t,r){return Pr(n).onIdTokenChanged(e,t,r)}function n8(n,e,t){return Pr(n).beforeAuthStateChanged(e,t)}function r8(n,e,t,r){return Pr(n).onAuthStateChanged(e,t,r)}function i8(n){return Pr(n).signOut()}const ug="__sak";class nA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ug,"1"),this.storage.removeItem(ug),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const s8=1e3,a8=10;class rA extends nA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);wR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,a8):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},s8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rA.type="LOCAL";const o8=rA;class iA extends nA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iA.type="SESSION";const sA=iA;function l8(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Hg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Hg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,c=this.handlersMap[i];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async f=>f(t.origin,a)),h=await l8(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hg.receivers=[];function U1(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class c8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((d,h)=>{const f=U1("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(y){const N=y;if(N.data.eventId===f)switch(N.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(N.data.response);break;default:clearTimeout(p),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function gl(){return window}function u8(n){gl().location.href=n}function aA(){return typeof gl().WorkerGlobalScope<"u"&&typeof gl().importScripts=="function"}async function d8(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h8(){return navigator?.serviceWorker?.controller||null}function f8(){return aA()?self:null}const oA="firebaseLocalStorageDb",m8=1,dg="firebaseLocalStorage",lA="fbase_key";class mm{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $g(n,e){return n.transaction([dg],e?"readwrite":"readonly").objectStore(dg)}function p8(){const n=indexedDB.deleteDatabase(oA);return new mm(n).toPromise()}function qv(){const n=indexedDB.open(oA,m8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(dg,{keyPath:lA})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(dg)?e(r):(r.close(),await p8(),e(await qv()))})})}async function W5(n,e,t){const r=$g(n,!0).put({[lA]:e,value:t});return new mm(r).toPromise()}async function g8(n,e){const t=$g(n,!1).get(e),r=await new mm(t).toPromise();return r===void 0?null:r.value}function Y5(n,e){const t=$g(n,!0).delete(e);return new mm(t).toPromise()}const x8=800,v8=3;class cA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>v8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hg._getInstance(f8()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await d8(),!this.activeServiceWorker)return;this.sender=new c8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||h8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qv();return await W5(e,ug,"1"),await Y5(e,ug),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>W5(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>g8(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Y5(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=$g(i,!1).getAll();return new mm(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),x8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cA.type="LOCAL";const y8=cA;new dm(3e4,6e4);function b8(n,e){return e?sc(e):(Yt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class z1 extends V1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ch(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ch(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ch(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function w8(n){return eA(n.auth,new z1(n),n.bypassAuthState)}function _8(n){const{auth:e,user:t}=n;return Yt(t,e,"internal-error"),KR(t,new z1(n),n.bypassAuthState)}async function N8(n){const{auth:e,user:t}=n;return Yt(t,e,"internal-error"),YR(t,new z1(n),n.bypassAuthState)}class uA{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w8;case"linkViaPopup":case"linkViaRedirect":return N8;case"reauthViaPopup":case"reauthViaRedirect":return _8;default:Mo(this.auth,"internal-error")}}resolve(e){fc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const A8=new dm(2e3,1e4);class ih extends uA{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ih.currentPopupAction&&ih.currentPopupAction.cancel(),ih.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Yt(e,this.auth,"internal-error"),e}async onExecution(){fc(this.filter.length===1,"Popup operations only handle one event");const e=U1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(pl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ih.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,A8.get())};e()}}ih.currentPopupAction=null;const S8="pendingRedirect",Vp=new Map;class j8 extends uA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Vp.get(this.auth._key());if(!e){try{const r=await E8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Vp.set(this.auth._key(),e)}return this.bypassAuthState||Vp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function E8(n,e){const t=I8(e),r=C8(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function T8(n,e){Vp.set(n._key(),e)}function C8(n){return sc(n._redirectPersistence)}function I8(n){return qp(S8,n.config.apiKey,n.name)}async function R8(n,e,t=!1){if(so(n.app))return Promise.reject(cc(n));const r=od(n),i=b8(r,e),c=await new j8(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const L8=600*1e3;class k8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!P8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!dA(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(pl(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=L8&&this.cachedEventUids.clear(),this.cachedEventUids.has(K5(e))}saveEventToCache(e){this.cachedEventUids.add(K5(e)),this.lastProcessedEventTime=Date.now()}}function K5(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function P8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dA(n);default:return!1}}async function D8(n,e={}){return xc(n,"GET","/v1/projects",e)}const M8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O8=/^https?/;async function F8(n){if(n.config.emulator)return;const{authorizedDomains:e}=await D8(n);for(const t of e)try{if(q8(t))return}catch{}Mo(n,"unauthorized-domain")}function q8(n){const e=Mv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!O8.test(t))return!1;if(M8.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const V8=new dm(3e4,6e4);function Q5(){const n=gl().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function B8(n){return new Promise((e,t)=>{function r(){Q5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q5(),t(pl(n,"network-request-failed"))},timeout:V8.get()})}if(gl().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gl().gapi?.load)r();else{const i=IR("iframefcb");return gl()[i]=()=>{gapi.load?r():t(pl(n,"network-request-failed"))},K4(`${CR()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw Bp=null,e})}let Bp=null;function U8(n){return Bp=Bp||B8(n),Bp}const z8=new dm(5e3,15e3),H8="__/auth/iframe",$8="emulator/auth/iframe",G8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},W8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y8(n){const e=n.config;Yt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?O1(e,$8):`https://${n.config.authDomain}/${H8}`,r={apiKey:e.apiKey,appName:n.name,v:Rh},i=W8.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${um(r).slice(1)}`}async function K8(n){const e=await U8(n),t=gl().gapi;return Yt(t,n,"internal-error"),e.open({where:document.body,url:Y8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G8,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=pl(n,"network-request-failed"),d=gl().setTimeout(()=>{a(c)},z8.get());function h(){gl().clearTimeout(d),i(r)}r.ping(h).then(h,()=>{a(c)})}))}const Q8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X8=500,J8=600,Z8="_blank",eL="http://localhost";class X5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tL(n,e,t,r=X8,i=J8){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const h={...Q8,width:r.toString(),height:i.toString(),top:a,left:c},f=Is().toLowerCase();t&&(d=U4(f)?Z8:t),V4(f)&&(e=e||eL,h.scrollbars="yes");const p=Object.entries(h).reduce((N,[b,j])=>`${N}${b}=${j},`,"");if(bR(f)&&d!=="_self")return nL(e||"",d),new X5(null);const y=window.open(e||"",d,p);Yt(y,n,"popup-blocked");try{y.focus()}catch{}return new X5(y)}function nL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const rL="__/auth/handler",iL="emulator/auth/handler",sL=encodeURIComponent("fac");async function J5(n,e,t,r,i,a){Yt(n.config.authDomain,n,"auth-domain-config-required"),Yt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Rh,eventId:i};if(e instanceof J4){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",qC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))c[p]=y}if(e instanceof fm){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(c.scopes=p.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const p of Object.keys(d))d[p]===void 0&&delete d[p];const h=await n._getAppCheckToken(),f=h?`#${sL}=${encodeURIComponent(h)}`:"";return`${aL(n)}?${um(d).slice(1)}${f}`}function aL({config:n}){return n.emulator?O1(n,iL):`https://${n.authDomain}/${rL}`}const $x="webStorageSupport";class oL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sA,this._completeRedirectFn=R8,this._overrideRedirectResult=T8}async _openPopup(e,t,r,i){fc(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await J5(e,t,r,Mv(),i);return tL(e,a,U1())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await J5(e,t,r,Mv(),i);return u8(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(fc(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await K8(e),r=new k8(e);return t.register("authEvent",i=>(Yt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($x,{type:$x},i=>{const a=i?.[0]?.[$x];a!==void 0&&t(!!a),Mo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=F8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return W4()||B4()||q1()}}const lL=oL;var Z5="@firebase/auth",ew="1.11.1";class cL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function uL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dL(n){_l(new Do("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Yt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y4(n)},f=new jR(r,i,a,h);return MR(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_l(new Do("auth-internal",e=>{const t=od(e.getProvider("auth").getImmediate());return(r=>new cL(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ao(Z5,ew,uL(n)),ao(Z5,ew,"esm2020")}const hL=300,fL=w4("authIdTokenMaxAge")||hL;let tw=null;const mL=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>fL)return;const i=t?.token;tw!==i&&(tw=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hA(n=D1()){const e=ad(n,"auth");if(e.isInitialized())return e.getImmediate();const t=DR(n,{popupRedirectResolver:lL,persistence:[y8,o8,sA]}),r=w4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=mL(a.toString());n8(t,c,()=>c(t.currentUser)),t8(t,d=>c(d))}}const i=y4("auth");return i&&OR(t,`http://${i}`),t}function pL(){return document.getElementsByTagName("head")?.[0]??document}ER({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=pl("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",pL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dL("Browser");var nw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var lu,fA;(function(){var n;function e(V,D){function k(){}k.prototype=D.prototype,V.F=D.prototype,V.prototype=new k,V.prototype.constructor=V,V.D=function(G,S,L){for(var F=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)F[ae-2]=arguments[ae];return D.prototype[S].apply(G,F)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(V,D,k){k||(k=0);const G=Array(16);if(typeof D=="string")for(var S=0;S<16;++S)G[S]=D.charCodeAt(k++)|D.charCodeAt(k++)<<8|D.charCodeAt(k++)<<16|D.charCodeAt(k++)<<24;else for(S=0;S<16;++S)G[S]=D[k++]|D[k++]<<8|D[k++]<<16|D[k++]<<24;D=V.g[0],k=V.g[1],S=V.g[2];let L=V.g[3],F;F=D+(L^k&(S^L))+G[0]+3614090360&4294967295,D=k+(F<<7&4294967295|F>>>25),F=L+(S^D&(k^S))+G[1]+3905402710&4294967295,L=D+(F<<12&4294967295|F>>>20),F=S+(k^L&(D^k))+G[2]+606105819&4294967295,S=L+(F<<17&4294967295|F>>>15),F=k+(D^S&(L^D))+G[3]+3250441966&4294967295,k=S+(F<<22&4294967295|F>>>10),F=D+(L^k&(S^L))+G[4]+4118548399&4294967295,D=k+(F<<7&4294967295|F>>>25),F=L+(S^D&(k^S))+G[5]+1200080426&4294967295,L=D+(F<<12&4294967295|F>>>20),F=S+(k^L&(D^k))+G[6]+2821735955&4294967295,S=L+(F<<17&4294967295|F>>>15),F=k+(D^S&(L^D))+G[7]+4249261313&4294967295,k=S+(F<<22&4294967295|F>>>10),F=D+(L^k&(S^L))+G[8]+1770035416&4294967295,D=k+(F<<7&4294967295|F>>>25),F=L+(S^D&(k^S))+G[9]+2336552879&4294967295,L=D+(F<<12&4294967295|F>>>20),F=S+(k^L&(D^k))+G[10]+4294925233&4294967295,S=L+(F<<17&4294967295|F>>>15),F=k+(D^S&(L^D))+G[11]+2304563134&4294967295,k=S+(F<<22&4294967295|F>>>10),F=D+(L^k&(S^L))+G[12]+1804603682&4294967295,D=k+(F<<7&4294967295|F>>>25),F=L+(S^D&(k^S))+G[13]+4254626195&4294967295,L=D+(F<<12&4294967295|F>>>20),F=S+(k^L&(D^k))+G[14]+2792965006&4294967295,S=L+(F<<17&4294967295|F>>>15),F=k+(D^S&(L^D))+G[15]+1236535329&4294967295,k=S+(F<<22&4294967295|F>>>10),F=D+(S^L&(k^S))+G[1]+4129170786&4294967295,D=k+(F<<5&4294967295|F>>>27),F=L+(k^S&(D^k))+G[6]+3225465664&4294967295,L=D+(F<<9&4294967295|F>>>23),F=S+(D^k&(L^D))+G[11]+643717713&4294967295,S=L+(F<<14&4294967295|F>>>18),F=k+(L^D&(S^L))+G[0]+3921069994&4294967295,k=S+(F<<20&4294967295|F>>>12),F=D+(S^L&(k^S))+G[5]+3593408605&4294967295,D=k+(F<<5&4294967295|F>>>27),F=L+(k^S&(D^k))+G[10]+38016083&4294967295,L=D+(F<<9&4294967295|F>>>23),F=S+(D^k&(L^D))+G[15]+3634488961&4294967295,S=L+(F<<14&4294967295|F>>>18),F=k+(L^D&(S^L))+G[4]+3889429448&4294967295,k=S+(F<<20&4294967295|F>>>12),F=D+(S^L&(k^S))+G[9]+568446438&4294967295,D=k+(F<<5&4294967295|F>>>27),F=L+(k^S&(D^k))+G[14]+3275163606&4294967295,L=D+(F<<9&4294967295|F>>>23),F=S+(D^k&(L^D))+G[3]+4107603335&4294967295,S=L+(F<<14&4294967295|F>>>18),F=k+(L^D&(S^L))+G[8]+1163531501&4294967295,k=S+(F<<20&4294967295|F>>>12),F=D+(S^L&(k^S))+G[13]+2850285829&4294967295,D=k+(F<<5&4294967295|F>>>27),F=L+(k^S&(D^k))+G[2]+4243563512&4294967295,L=D+(F<<9&4294967295|F>>>23),F=S+(D^k&(L^D))+G[7]+1735328473&4294967295,S=L+(F<<14&4294967295|F>>>18),F=k+(L^D&(S^L))+G[12]+2368359562&4294967295,k=S+(F<<20&4294967295|F>>>12),F=D+(k^S^L)+G[5]+4294588738&4294967295,D=k+(F<<4&4294967295|F>>>28),F=L+(D^k^S)+G[8]+2272392833&4294967295,L=D+(F<<11&4294967295|F>>>21),F=S+(L^D^k)+G[11]+1839030562&4294967295,S=L+(F<<16&4294967295|F>>>16),F=k+(S^L^D)+G[14]+4259657740&4294967295,k=S+(F<<23&4294967295|F>>>9),F=D+(k^S^L)+G[1]+2763975236&4294967295,D=k+(F<<4&4294967295|F>>>28),F=L+(D^k^S)+G[4]+1272893353&4294967295,L=D+(F<<11&4294967295|F>>>21),F=S+(L^D^k)+G[7]+4139469664&4294967295,S=L+(F<<16&4294967295|F>>>16),F=k+(S^L^D)+G[10]+3200236656&4294967295,k=S+(F<<23&4294967295|F>>>9),F=D+(k^S^L)+G[13]+681279174&4294967295,D=k+(F<<4&4294967295|F>>>28),F=L+(D^k^S)+G[0]+3936430074&4294967295,L=D+(F<<11&4294967295|F>>>21),F=S+(L^D^k)+G[3]+3572445317&4294967295,S=L+(F<<16&4294967295|F>>>16),F=k+(S^L^D)+G[6]+76029189&4294967295,k=S+(F<<23&4294967295|F>>>9),F=D+(k^S^L)+G[9]+3654602809&4294967295,D=k+(F<<4&4294967295|F>>>28),F=L+(D^k^S)+G[12]+3873151461&4294967295,L=D+(F<<11&4294967295|F>>>21),F=S+(L^D^k)+G[15]+530742520&4294967295,S=L+(F<<16&4294967295|F>>>16),F=k+(S^L^D)+G[2]+3299628645&4294967295,k=S+(F<<23&4294967295|F>>>9),F=D+(S^(k|~L))+G[0]+4096336452&4294967295,D=k+(F<<6&4294967295|F>>>26),F=L+(k^(D|~S))+G[7]+1126891415&4294967295,L=D+(F<<10&4294967295|F>>>22),F=S+(D^(L|~k))+G[14]+2878612391&4294967295,S=L+(F<<15&4294967295|F>>>17),F=k+(L^(S|~D))+G[5]+4237533241&4294967295,k=S+(F<<21&4294967295|F>>>11),F=D+(S^(k|~L))+G[12]+1700485571&4294967295,D=k+(F<<6&4294967295|F>>>26),F=L+(k^(D|~S))+G[3]+2399980690&4294967295,L=D+(F<<10&4294967295|F>>>22),F=S+(D^(L|~k))+G[10]+4293915773&4294967295,S=L+(F<<15&4294967295|F>>>17),F=k+(L^(S|~D))+G[1]+2240044497&4294967295,k=S+(F<<21&4294967295|F>>>11),F=D+(S^(k|~L))+G[8]+1873313359&4294967295,D=k+(F<<6&4294967295|F>>>26),F=L+(k^(D|~S))+G[15]+4264355552&4294967295,L=D+(F<<10&4294967295|F>>>22),F=S+(D^(L|~k))+G[6]+2734768916&4294967295,S=L+(F<<15&4294967295|F>>>17),F=k+(L^(S|~D))+G[13]+1309151649&4294967295,k=S+(F<<21&4294967295|F>>>11),F=D+(S^(k|~L))+G[4]+4149444226&4294967295,D=k+(F<<6&4294967295|F>>>26),F=L+(k^(D|~S))+G[11]+3174756917&4294967295,L=D+(F<<10&4294967295|F>>>22),F=S+(D^(L|~k))+G[2]+718787259&4294967295,S=L+(F<<15&4294967295|F>>>17),F=k+(L^(S|~D))+G[9]+3951481745&4294967295,V.g[0]=V.g[0]+D&4294967295,V.g[1]=V.g[1]+(S+(F<<21&4294967295|F>>>11))&4294967295,V.g[2]=V.g[2]+S&4294967295,V.g[3]=V.g[3]+L&4294967295}r.prototype.v=function(V,D){D===void 0&&(D=V.length);const k=D-this.blockSize,G=this.C;let S=this.h,L=0;for(;L<D;){if(S==0)for(;L<=k;)i(this,V,L),L+=this.blockSize;if(typeof V=="string"){for(;L<D;)if(G[S++]=V.charCodeAt(L++),S==this.blockSize){i(this,G),S=0;break}}else for(;L<D;)if(G[S++]=V[L++],S==this.blockSize){i(this,G),S=0;break}}this.h=S,this.o+=D},r.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var D=1;D<V.length-8;++D)V[D]=0;D=this.o*8;for(var k=V.length-8;k<V.length;++k)V[k]=D&255,D/=256;for(this.v(V),V=Array(16),D=0,k=0;k<4;++k)for(let G=0;G<32;G+=8)V[D++]=this.g[k]>>>G&255;return V};function a(V,D){var k=d;return Object.prototype.hasOwnProperty.call(k,V)?k[V]:k[V]=D(V)}function c(V,D){this.h=D;const k=[];let G=!0;for(let S=V.length-1;S>=0;S--){const L=V[S]|0;G&&L==D||(k[S]=L,G=!1)}this.g=k}var d={};function h(V){return-128<=V&&V<128?a(V,function(D){return new c([D|0],D<0?-1:0)}):new c([V|0],V<0?-1:0)}function f(V){if(isNaN(V)||!isFinite(V))return y;if(V<0)return R(f(-V));const D=[];let k=1;for(let G=0;V>=k;G++)D[G]=V/k|0,k*=4294967296;return new c(D,0)}function p(V,D){if(V.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(V.charAt(0)=="-")return R(p(V.substring(1),D));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=f(Math.pow(D,8));let G=y;for(let L=0;L<V.length;L+=8){var S=Math.min(8,V.length-L);const F=parseInt(V.substring(L,L+S),D);S<8?(S=f(Math.pow(D,S)),G=G.j(S).add(f(F))):(G=G.j(k),G=G.add(f(F)))}return G}var y=h(0),N=h(1),b=h(16777216);n=c.prototype,n.m=function(){if(C(this))return-R(this).m();let V=0,D=1;for(let k=0;k<this.g.length;k++){const G=this.i(k);V+=(G>=0?G:4294967296+G)*D,D*=4294967296}return V},n.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(j(this))return"0";if(C(this))return"-"+R(this).toString(V);const D=f(Math.pow(V,6));var k=this;let G="";for(;;){const S=H(k,D).g;k=I(k,S.j(D));let L=((k.g.length>0?k.g[0]:k.h)>>>0).toString(V);if(k=S,j(k))return L+G;for(;L.length<6;)L="0"+L;G=L+G}},n.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function j(V){if(V.h!=0)return!1;for(let D=0;D<V.g.length;D++)if(V.g[D]!=0)return!1;return!0}function C(V){return V.h==-1}n.l=function(V){return V=I(this,V),C(V)?-1:j(V)?0:1};function R(V){const D=V.g.length,k=[];for(let G=0;G<D;G++)k[G]=~V.g[G];return new c(k,~V.h).add(N)}n.abs=function(){return C(this)?R(this):this},n.add=function(V){const D=Math.max(this.g.length,V.g.length),k=[];let G=0;for(let S=0;S<=D;S++){let L=G+(this.i(S)&65535)+(V.i(S)&65535),F=(L>>>16)+(this.i(S)>>>16)+(V.i(S)>>>16);G=F>>>16,L&=65535,F&=65535,k[S]=F<<16|L}return new c(k,k[k.length-1]&-2147483648?-1:0)};function I(V,D){return V.add(R(D))}n.j=function(V){if(j(this)||j(V))return y;if(C(this))return C(V)?R(this).j(R(V)):R(R(this).j(V));if(C(V))return R(this.j(R(V)));if(this.l(b)<0&&V.l(b)<0)return f(this.m()*V.m());const D=this.g.length+V.g.length,k=[];for(var G=0;G<2*D;G++)k[G]=0;for(G=0;G<this.g.length;G++)for(let S=0;S<V.g.length;S++){const L=this.i(G)>>>16,F=this.i(G)&65535,ae=V.i(S)>>>16,ve=V.i(S)&65535;k[2*G+2*S]+=F*ve,B(k,2*G+2*S),k[2*G+2*S+1]+=L*ve,B(k,2*G+2*S+1),k[2*G+2*S+1]+=F*ae,B(k,2*G+2*S+1),k[2*G+2*S+2]+=L*ae,B(k,2*G+2*S+2)}for(V=0;V<D;V++)k[V]=k[2*V+1]<<16|k[2*V];for(V=D;V<2*D;V++)k[V]=0;return new c(k,0)};function B(V,D){for(;(V[D]&65535)!=V[D];)V[D+1]+=V[D]>>>16,V[D]&=65535,D++}function z(V,D){this.g=V,this.h=D}function H(V,D){if(j(D))throw Error("division by zero");if(j(V))return new z(y,y);if(C(V))return D=H(R(V),D),new z(R(D.g),R(D.h));if(C(D))return D=H(V,R(D)),new z(R(D.g),D.h);if(V.g.length>30){if(C(V)||C(D))throw Error("slowDivide_ only works with positive integers.");for(var k=N,G=D;G.l(V)<=0;)k=he(k),G=he(G);var S=re(k,1),L=re(G,1);for(G=re(G,2),k=re(k,2);!j(G);){var F=L.add(G);F.l(V)<=0&&(S=S.add(k),L=F),G=re(G,1),k=re(k,1)}return D=I(V,S.j(D)),new z(S,D)}for(S=y;V.l(D)>=0;){for(k=Math.max(1,Math.floor(V.m()/D.m())),G=Math.ceil(Math.log(k)/Math.LN2),G=G<=48?1:Math.pow(2,G-48),L=f(k),F=L.j(D);C(F)||F.l(V)>0;)k-=G,L=f(k),F=L.j(D);j(L)&&(L=N),S=S.add(L),V=I(V,F)}return new z(S,V)}n.B=function(V){return H(this,V).h},n.and=function(V){const D=Math.max(this.g.length,V.g.length),k=[];for(let G=0;G<D;G++)k[G]=this.i(G)&V.i(G);return new c(k,this.h&V.h)},n.or=function(V){const D=Math.max(this.g.length,V.g.length),k=[];for(let G=0;G<D;G++)k[G]=this.i(G)|V.i(G);return new c(k,this.h|V.h)},n.xor=function(V){const D=Math.max(this.g.length,V.g.length),k=[];for(let G=0;G<D;G++)k[G]=this.i(G)^V.i(G);return new c(k,this.h^V.h)};function he(V){const D=V.g.length+1,k=[];for(let G=0;G<D;G++)k[G]=V.i(G)<<1|V.i(G-1)>>>31;return new c(k,V.h)}function re(V,D){const k=D>>5;D%=32;const G=V.g.length-k,S=[];for(let L=0;L<G;L++)S[L]=D>0?V.i(L+k)>>>D|V.i(L+k+1)<<32-D:V.i(L+k);return new c(S,V.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,fA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=p,lu=c}).apply(typeof nw<"u"?nw:typeof self<"u"?self:typeof window<"u"?window:{});var wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mA,Rf,pA,Up,Vv,gA,xA,vA;(function(){var n,e=Object.defineProperty;function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof wp=="object"&&wp];for(var T=0;T<x.length;++T){var O=x[T];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=t(this);function i(x,T){if(T)e:{var O=r;x=x.split(".");for(var ee=0;ee<x.length-1;ee++){var Ee=x[ee];if(!(Ee in O))break e;O=O[Ee]}x=x[x.length-1],ee=O[x],T=T(ee),T!=ee&&T!=null&&e(O,x,{configurable:!0,writable:!0,value:T})}}i("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(x){return x||function(T){var O=[],ee;for(ee in T)Object.prototype.hasOwnProperty.call(T,ee)&&O.push([ee,T[ee]]);return O}});var a=a||{},c=this||self;function d(x){var T=typeof x;return T=="object"&&x!=null||T=="function"}function h(x,T,O){return x.call.apply(x.bind,arguments)}function f(x,T,O){return f=h,f.apply(null,arguments)}function p(x,T){var O=Array.prototype.slice.call(arguments,1);return function(){var ee=O.slice();return ee.push.apply(ee,arguments),x.apply(this,ee)}}function y(x,T){function O(){}O.prototype=T.prototype,x.Z=T.prototype,x.prototype=new O,x.prototype.constructor=x,x.Ob=function(ee,Ee,Me){for(var nt=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)nt[Qt-2]=arguments[Qt];return T.prototype[Ee].apply(ee,nt)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function b(x){const T=x.length;if(T>0){const O=Array(T);for(let ee=0;ee<T;ee++)O[ee]=x[ee];return O}return[]}function j(x,T){for(let ee=1;ee<arguments.length;ee++){const Ee=arguments[ee];var O=typeof Ee;if(O=O!="object"?O:Ee?Array.isArray(Ee)?"array":O:"null",O=="array"||O=="object"&&typeof Ee.length=="number"){O=x.length||0;const Me=Ee.length||0;x.length=O+Me;for(let nt=0;nt<Me;nt++)x[O+nt]=Ee[nt]}else x.push(Ee)}}class C{constructor(T,O){this.i=T,this.j=O,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function R(x){c.setTimeout(()=>{throw x},0)}function I(){var x=V;let T=null;return x.g&&(T=x.g,x.g=x.g.next,x.g||(x.h=null),T.next=null),T}class B{constructor(){this.h=this.g=null}add(T,O){const ee=z.get();ee.set(T,O),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var z=new C(()=>new H,x=>x.reset());class H{constructor(){this.next=this.g=this.h=null}set(T,O){this.h=T,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let he,re=!1,V=new B,D=()=>{const x=Promise.resolve(void 0);he=()=>{x.then(k)}};function k(){for(var x;x=I();){try{x.h.call(x.g)}catch(O){R(O)}var T=z;T.j(x),T.h<100&&(T.h++,x.next=T.g,T.g=x)}re=!1}function G(){this.u=this.u,this.C=this.C}G.prototype.u=!1,G.prototype.dispose=function(){this.u||(this.u=!0,this.N())},G.prototype[Symbol.dispose]=function(){this.dispose()},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(x,T){this.type=x,this.g=this.target=T,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var x=!1,T=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const O=()=>{};c.addEventListener("test",O,T),c.removeEventListener("test",O,T)}catch{}return x})();function F(x){return/^[\s\xa0]*$/.test(x)}function ae(x,T){S.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,T)}y(ae,S),ae.prototype.init=function(x,T){const O=this.type=x.type,ee=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=T,T=x.relatedTarget,T||(O=="mouseover"?T=x.fromElement:O=="mouseout"&&(T=x.toElement)),this.relatedTarget=T,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ve="closure_listenable_"+(Math.random()*1e6|0),K=0;function ce(x,T,O,ee,Ee){this.listener=x,this.proxy=null,this.src=T,this.type=O,this.capture=!!ee,this.ha=Ee,this.key=++K,this.da=this.fa=!1}function me(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Se(x,T,O){for(const ee in x)T.call(O,x[ee],ee,x)}function qe(x,T){for(const O in x)T.call(void 0,x[O],O,x)}function X(x){const T={};for(const O in x)T[O]=x[O];return T}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(x,T){let O,ee;for(let Ee=1;Ee<arguments.length;Ee++){ee=arguments[Ee];for(O in ee)x[O]=ee[O];for(let Me=0;Me<q.length;Me++)O=q[Me],Object.prototype.hasOwnProperty.call(ee,O)&&(x[O]=ee[O])}}function ne(x){this.src=x,this.g={},this.h=0}ne.prototype.add=function(x,T,O,ee,Ee){const Me=x.toString();x=this.g[Me],x||(x=this.g[Me]=[],this.h++);const nt=pe(x,T,ee,Ee);return nt>-1?(T=x[nt],O||(T.fa=!1)):(T=new ce(T,this.src,Me,!!ee,Ee),T.fa=O,x.push(T)),T};function ue(x,T){const O=T.type;if(O in x.g){var ee=x.g[O],Ee=Array.prototype.indexOf.call(ee,T,void 0),Me;(Me=Ee>=0)&&Array.prototype.splice.call(ee,Ee,1),Me&&(me(T),x.g[O].length==0&&(delete x.g[O],x.h--))}}function pe(x,T,O,ee){for(let Ee=0;Ee<x.length;++Ee){const Me=x[Ee];if(!Me.da&&Me.listener==T&&Me.capture==!!O&&Me.ha==ee)return Ee}return-1}var we="closure_lm_"+(Math.random()*1e6|0),De={};function Re(x,T,O,ee,Ee){if(Array.isArray(T)){for(let Me=0;Me<T.length;Me++)Re(x,T[Me],O,ee,Ee);return null}return O=Te(O),x&&x[ve]?x.J(T,O,d(ee)?!!ee.capture:!1,Ee):Ue(x,T,O,!1,ee,Ee)}function Ue(x,T,O,ee,Ee,Me){if(!T)throw Error("Invalid event type");const nt=d(Ee)?!!Ee.capture:!!Ee;let Qt=rt(x);if(Qt||(x[we]=Qt=new ne(x)),O=Qt.add(T,O,ee,nt,Me),O.proxy)return O;if(ee=Ze(),O.proxy=ee,ee.src=x,ee.listener=O,x.addEventListener)L||(Ee=nt),Ee===void 0&&(Ee=!1),x.addEventListener(T.toString(),ee,Ee);else if(x.attachEvent)x.attachEvent(ht(T.toString()),ee);else if(x.addListener&&x.removeListener)x.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Ze(){function x(O){return T.call(x.src,x.listener,O)}const T=ie;return x}function at(x,T,O,ee,Ee){if(Array.isArray(T))for(var Me=0;Me<T.length;Me++)at(x,T[Me],O,ee,Ee);else ee=d(ee)?!!ee.capture:!!ee,O=Te(O),x&&x[ve]?(x=x.i,Me=String(T).toString(),Me in x.g&&(T=x.g[Me],O=pe(T,O,ee,Ee),O>-1&&(me(T[O]),Array.prototype.splice.call(T,O,1),T.length==0&&(delete x.g[Me],x.h--)))):x&&(x=rt(x))&&(T=x.g[T.toString()],x=-1,T&&(x=pe(T,O,ee,Ee)),(O=x>-1?T[x]:null)&&ot(O))}function ot(x){if(typeof x!="number"&&x&&!x.da){var T=x.src;if(T&&T[ve])ue(T.i,x);else{var O=x.type,ee=x.proxy;T.removeEventListener?T.removeEventListener(O,ee,x.capture):T.detachEvent?T.detachEvent(ht(O),ee):T.addListener&&T.removeListener&&T.removeListener(ee),(O=rt(T))?(ue(O,x),O.h==0&&(O.src=null,T[we]=null)):me(x)}}}function ht(x){return x in De?De[x]:De[x]="on"+x}function ie(x,T){if(x.da)x=!0;else{T=new ae(T,this);const O=x.listener,ee=x.ha||x.src;x.fa&&ot(x),x=O.call(ee,T)}return x}function rt(x){return x=x[we],x instanceof ne?x:null}var Kt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Te(x){return typeof x=="function"?x:(x[Kt]||(x[Kt]=function(T){return x.handleEvent(T)}),x[Kt])}function Ae(){G.call(this),this.i=new ne(this),this.M=this,this.G=null}y(Ae,G),Ae.prototype[ve]=!0,Ae.prototype.removeEventListener=function(x,T,O,ee){at(this,x,T,O,ee)};function Je(x,T){var O,ee=x.G;if(ee)for(O=[];ee;ee=ee.G)O.push(ee);if(x=x.M,ee=T.type||T,typeof T=="string")T=new S(T,x);else if(T instanceof S)T.target=T.target||x;else{var Ee=T;T=new S(ee,x),J(T,Ee)}Ee=!0;let Me,nt;if(O)for(nt=O.length-1;nt>=0;nt--)Me=T.g=O[nt],Ee=tt(Me,ee,!0,T)&&Ee;if(Me=T.g=x,Ee=tt(Me,ee,!0,T)&&Ee,Ee=tt(Me,ee,!1,T)&&Ee,O)for(nt=0;nt<O.length;nt++)Me=T.g=O[nt],Ee=tt(Me,ee,!1,T)&&Ee}Ae.prototype.N=function(){if(Ae.Z.N.call(this),this.i){var x=this.i;for(const T in x.g){const O=x.g[T];for(let ee=0;ee<O.length;ee++)me(O[ee]);delete x.g[T],x.h--}}this.G=null},Ae.prototype.J=function(x,T,O,ee){return this.i.add(String(x),T,!1,O,ee)},Ae.prototype.K=function(x,T,O,ee){return this.i.add(String(x),T,!0,O,ee)};function tt(x,T,O,ee){if(T=x.i.g[String(T)],!T)return!0;T=T.concat();let Ee=!0;for(let Me=0;Me<T.length;++Me){const nt=T[Me];if(nt&&!nt.da&&nt.capture==O){const Qt=nt.listener,ar=nt.ha||nt.src;nt.fa&&ue(x.i,nt),Ee=Qt.call(ar,ee)!==!1&&Ee}}return Ee&&!ee.defaultPrevented}function it(x,T){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=f(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:c.setTimeout(x,T||0)}function lt(x){x.g=it(()=>{x.g=null,x.i&&(x.i=!1,lt(x))},x.l);const T=x.h;x.h=null,x.m.apply(null,T)}class zt extends G{constructor(T,O){super(),this.m=T,this.l=O,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:lt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $t(x){G.call(this),this.h=x,this.g={}}y($t,G);var Gt=[];function cn(x){Se(x.g,function(T,O){this.g.hasOwnProperty(O)&&ot(T)},x),x.g={}}$t.prototype.N=function(){$t.Z.N.call(this),cn(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nn=c.JSON.stringify,bt=c.JSON.parse,Xt=class{stringify(x){return c.JSON.stringify(x,void 0)}parse(x){return c.JSON.parse(x,void 0)}};function _t(){}function yr(){}var rn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function It(){S.call(this,"d")}y(It,S);function Bt(){S.call(this,"c")}y(Bt,S);var en={},Et=null;function Dn(){return Et=Et||new Ae}en.Ia="serverreachability";function Ft(x){S.call(this,en.Ia,x)}y(Ft,S);function qt(x){const T=Dn();Je(T,new Ft(T))}en.STAT_EVENT="statevent";function Fn(x,T){S.call(this,en.STAT_EVENT,x),this.stat=T}y(Fn,S);function St(x){const T=Dn();Je(T,new Fn(T,x))}en.Ja="timingevent";function Nt(x,T){S.call(this,en.Ja,x),this.size=T}y(Nt,S);function un(x,T){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){x()},T)}function wi(){this.g=!0}wi.prototype.ua=function(){this.g=!1};function ui(x,T,O,ee,Ee,Me){x.info(function(){if(x.g)if(Me){var nt="",Qt=Me.split("&");for(let hn=0;hn<Qt.length;hn++){var ar=Qt[hn].split("=");if(ar.length>1){const Bn=ar[0];ar=ar[1];const mi=Bn.split("_");nt=mi.length>=2&&mi[1]=="type"?nt+(Bn+"="+ar+"&"):nt+(Bn+"=redacted&")}}}else nt=null;else nt=Me;return"XMLHTTP REQ ("+ee+") [attempt "+Ee+"]: "+T+`
`+O+`
`+nt})}function Hs(x,T,O,ee,Ee,Me,nt){x.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+Ee+"]: "+T+`
`+O+`
`+Me+" "+nt})}function ei(x,T,O,ee){x.info(function(){return"XMLHTTP TEXT ("+T+"): "+ga(x,O)+(ee?" "+ee:"")})}function Tt(x,T){x.info(function(){return"TIMEOUT: "+T})}wi.prototype.info=function(){};function ga(x,T){if(!x.g)return T;if(!T)return null;try{const Me=JSON.parse(T);if(Me){for(x=0;x<Me.length;x++)if(Array.isArray(Me[x])){var O=Me[x];if(!(O.length<2)){var ee=O[1];if(Array.isArray(ee)&&!(ee.length<1)){var Ee=ee[0];if(Ee!="noop"&&Ee!="stop"&&Ee!="close")for(let nt=1;nt<ee.length;nt++)ee[nt]=""}}}}return nn(Me)}catch{return T}}var Ji={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Mi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Oi;function Yn(){}y(Yn,_t),Yn.prototype.g=function(){return new XMLHttpRequest},Oi=new Yn;function ir(x){return encodeURIComponent(String(x))}function zr(x){var T=1;x=x.split(":");const O=[];for(;T>0&&x.length;)O.push(x.shift()),T--;return x.length&&O.push(x.join(":")),O}function _i(x,T,O,ee){this.j=x,this.i=T,this.l=O,this.S=ee||1,this.V=new $t(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new di}function di(){this.i=null,this.g="",this.h=!1}var qn={},Qn={};function Hr(x,T,O){x.M=1,x.A=qa(jr(T)),x.u=O,x.R=!0,Fi(x,null)}function Fi(x,T){x.F=Date.now(),qi(x),x.B=jr(x.A);var O=x.B,ee=x.S;Array.isArray(ee)||(ee=[String(ee)]),$o(O.i,"t",ee),x.C=0,O=x.j.L,x.h=new di,x.g=ft(x.j,O?T:null,!x.u),x.P>0&&(x.O=new zt(f(x.Y,x,x.g),x.P)),T=x.V,O=x.g,ee=x.ba;var Ee="readystatechange";Array.isArray(Ee)||(Ee&&(Gt[0]=Ee.toString()),Ee=Gt);for(let Me=0;Me<Ee.length;Me++){const nt=Re(O,Ee[Me],ee||T.handleEvent,!1,T.h||T);if(!nt)break;T.g[nt.key]=nt}T=x.J?X(x.J):{},x.u?(x.v||(x.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,T)):(x.v="GET",x.g.ea(x.B,x.v,null,T)),qt(),ui(x.i,x.v,x.B,x.l,x.S,x.u)}_i.prototype.ba=function(x){x=x.target;const T=this.O;T&&is(x)==3?T.j():this.Y(x)},_i.prototype.Y=function(x){try{if(x==this.g)e:{const Qt=is(this.g),ar=this.g.ya(),hn=this.g.ca();if(!(Qt<3)&&(Qt!=3||this.g&&(this.h.h||this.g.la()||Mr(this.g)))){this.K||Qt!=4||ar==7||(ar==8||hn<=0?qt(3):qt(2)),Zi(this);var T=this.g.ca();this.X=T;var O=gs(this);if(this.o=T==200,Hs(this.i,this.v,this.B,this.l,this.S,Qt,T),this.o){if(this.U&&!this.L){t:{if(this.g){var ee,Ee=this.g;if((ee=Ee.g?Ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(ee)){var Me=ee;break t}}Me=null}if(x=Me)ei(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xs(this,x);else{this.o=!1,this.m=3,St(12),es(this),Ni(this);break e}}if(this.R){x=!0;let Bn;for(;!this.K&&this.C<O.length;)if(Bn=Rs(this,O),Bn==Qn){Qt==4&&(this.m=4,St(14),x=!1),ei(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==qn){this.m=4,St(15),ei(this.i,this.l,O,"[Invalid Chunk]"),x=!1;break}else ei(this.i,this.l,Bn,null),xs(this,Bn);if(Fa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||O.length!=0||this.h.h||(this.m=1,St(16),x=!1),this.o=this.o&&x,!x)ei(this.i,this.l,O,"[Invalid Chunked Response]"),es(this),Ni(this);else if(O.length>0&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.aa&&!nt.P&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Ko(nt),nt.P=!0,St(11))}}else ei(this.i,this.l,O,null),xs(this,O);Qt==4&&es(this),this.o&&!this.K&&(Qt==4?oe(this.j,this):(this.o=!1,qi(this)))}else $s(this.g),T==400&&O.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),es(this),Ni(this)}}}catch{}finally{}};function gs(x){if(!Fa(x))return x.g.la();const T=Mr(x.g);if(T==="")return"";let O="";const ee=T.length,Ee=is(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return es(x),Ni(x),"";x.h.i=new c.TextDecoder}for(let Me=0;Me<ee;Me++)x.h.h=!0,O+=x.h.i.decode(T[Me],{stream:!(Ee&&Me==ee-1)});return T.length=0,x.h.g+=O,x.C=0,x.h.g}function Fa(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function Rs(x,T){var O=x.C,ee=T.indexOf(`
`,O);return ee==-1?Qn:(O=Number(T.substring(O,ee)),isNaN(O)?qn:(ee+=1,ee+O>T.length?Qn:(T=T.slice(ee,ee+O),x.C=ee+O,T)))}_i.prototype.cancel=function(){this.K=!0,es(this)};function qi(x){x.T=Date.now()+x.H,xa(x,x.H)}function xa(x,T){if(x.D!=null)throw Error("WatchDog timer not null");x.D=un(f(x.aa,x),T)}function Zi(x){x.D&&(c.clearTimeout(x.D),x.D=null)}_i.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(Tt(this.i,this.B),this.M!=2&&(qt(),St(17)),es(this),this.m=2,Ni(this)):xa(this,this.T-x)};function Ni(x){x.j.I==0||x.K||oe(x.j,x)}function es(x){Zi(x);var T=x.O;T&&typeof T.dispose=="function"&&T.dispose(),x.O=null,cn(x.V),x.g&&(T=x.g,x.g=null,T.abort(),T.dispose())}function xs(x,T){try{var O=x.j;if(O.I!=0&&(O.g==x||Ls(O.h,x))){if(!x.L&&Ls(O.h,x)&&O.I==3){try{var ee=O.Ba.g.parse(T)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var Ee=ee;if(Ee[0]==0){e:if(!O.v){if(O.g)if(O.g.F+3e3<x.F)U(O),Ws(O);else break e;Ds(O),St(18)}}else O.xa=Ee[1],0<O.xa-O.K&&Ee[2]<37500&&O.F&&O.A==0&&!O.C&&(O.C=un(f(O.Va,O),6e3));vs(O.h)<=1&&O.ta&&(O.ta=void 0)}else Ne(O,11)}else if((x.L||O.g==x)&&U(O),!F(T))for(Ee=O.Ba.g.parse(T),T=0;T<Ee.length;T++){let hn=Ee[T];const Bn=hn[0];if(!(Bn<=O.K))if(O.K=Bn,hn=hn[1],O.I==2)if(hn[0]=="c"){O.M=hn[1],O.ba=hn[2];const mi=hn[3];mi!=null&&(O.ka=mi,O.j.info("VER="+O.ka));const Si=hn[4];Si!=null&&(O.za=Si,O.j.info("SVER="+O.za));const Xn=hn[5];Xn!=null&&typeof Xn=="number"&&Xn>0&&(ee=1.5*Xn,O.O=ee,O.j.info("backChannelRequestTimeoutMs_="+ee)),ee=O;const ji=x.g;if(ji){const Ms=ji.g?ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ms){var Me=ee.h;Me.g||Ms.indexOf("spdy")==-1&&Ms.indexOf("quic")==-1&&Ms.indexOf("h2")==-1||(Me.j=Me.l,Me.g=new Set,Me.h&&(ho(Me,Me.h),Me.h=null))}if(ee.G){const Ha=ji.g?ji.g.getResponseHeader("X-HTTP-Session-Id"):null;Ha&&(ee.wa=Ha,bn(ee.J,ee.G,Ha))}}O.I=3,O.l&&O.l.ra(),O.aa&&(O.T=Date.now()-x.F,O.j.info("Handshake RTT: "+O.T+"ms")),ee=O;var nt=x;if(ee.na=Qe(ee,ee.L?ee.ba:null,ee.W),nt.L){zo(ee.h,nt);var Qt=nt,ar=ee.O;ar&&(Qt.H=ar),Qt.D&&(Zi(Qt),qi(Qt)),ee.g=nt}else kl(ee);O.i.length>0&&bs(O)}else hn[0]!="stop"&&hn[0]!="close"||Ne(O,7);else O.I==3&&(hn[0]=="stop"||hn[0]=="close"?hn[0]=="stop"?Ne(O,7):za(O):hn[0]!="noop"&&O.l&&O.l.qa(hn),O.A=0)}}qt(4)}catch{}}var br=class{constructor(x,T){this.g=x,this.map=T}};function Uo(x){this.l=x||10,c.PerformanceNavigationTiming?(x=c.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vi(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function vs(x){return x.h?1:x.g?x.g.size:0}function Ls(x,T){return x.h?x.h==T:x.g?x.g.has(T):!1}function ho(x,T){x.g?x.g.add(T):x.h=T}function zo(x,T){x.h&&x.h==T?x.h=null:x.g&&x.g.has(T)&&x.g.delete(T)}Uo.prototype.cancel=function(){if(this.i=Ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Ho(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let T=x.i;for(const O of x.g.values())T=T.concat(O.G);return T}return b(x.i)}var El=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ts(x,T){if(x){x=x.split("&");for(let O=0;O<x.length;O++){const ee=x[O].indexOf("=");let Ee,Me=null;ee>=0?(Ee=x[O].substring(0,ee),Me=x[O].substring(ee+1)):Ee=x[O],T(Ee,Me?decodeURIComponent(Me.replace(/\+/g," ")):"")}}}function hi(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;x instanceof hi?(this.l=x.l,mn(this,x.j),this.o=x.o,this.g=x.g,va(this,x.u),this.h=x.h,ys(this,Go(x.i)),this.m=x.m):x&&(T=String(x).match(El))?(this.l=!1,mn(this,T[1]||"",!0),this.o=Dr(T[2]||""),this.g=Dr(T[3]||"",!0),va(this,T[4]),this.h=Dr(T[5]||"",!0),ys(this,T[6]||"",!0),this.m=Dr(T[7]||"")):(this.l=!1,this.i=new ya(null,this.l))}hi.prototype.toString=function(){const x=[];var T=this.j;T&&x.push(mr(T,fo,!0),":");var O=this.g;return(O||T=="file")&&(x.push("//"),(T=this.o)&&x.push(mr(T,fo,!0),"@"),x.push(ir(O).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.u,O!=null&&x.push(":",String(O))),(O=this.h)&&(this.g&&O.charAt(0)!="/"&&x.push("/"),x.push(mr(O,O.charAt(0)=="/"?Tl:yc,!0))),(O=this.i.toString())&&x.push("?",O),(O=this.m)&&x.push("#",mr(O,Cl)),x.join("")},hi.prototype.resolve=function(x){const T=jr(this);let O=!!x.j;O?mn(T,x.j):O=!!x.o,O?T.o=x.o:O=!!x.g,O?T.g=x.g:O=x.u!=null;var ee=x.h;if(O)va(T,x.u);else if(O=!!x.h){if(ee.charAt(0)!="/")if(this.g&&!this.h)ee="/"+ee;else{var Ee=T.h.lastIndexOf("/");Ee!=-1&&(ee=T.h.slice(0,Ee+1)+ee)}if(Ee=ee,Ee==".."||Ee==".")ee="";else if(Ee.indexOf("./")!=-1||Ee.indexOf("/.")!=-1){ee=Ee.lastIndexOf("/",0)==0,Ee=Ee.split("/");const Me=[];for(let nt=0;nt<Ee.length;){const Qt=Ee[nt++];Qt=="."?ee&&nt==Ee.length&&Me.push(""):Qt==".."?((Me.length>1||Me.length==1&&Me[0]!="")&&Me.pop(),ee&&nt==Ee.length&&Me.push("")):(Me.push(Qt),ee=!0)}ee=Me.join("/")}else ee=Ee}return O?T.h=ee:O=x.i.toString()!=="",O?ys(T,Go(x.i)):O=!!x.m,O&&(T.m=x.m),T};function jr(x){return new hi(x)}function mn(x,T,O){x.j=O?Dr(T,!0):T,x.j&&(x.j=x.j.replace(/:$/,""))}function va(x,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);x.u=T}else x.u=null}function ys(x,T,O){T instanceof ya?(x.i=T,Bi(x.i,x.l)):(O||(T=mr(T,Ai)),x.i=new ya(T,x.l))}function bn(x,T,O){x.i.set(T,O)}function qa(x){return bn(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function Dr(x,T){return x?T?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function mr(x,T,O){return typeof x=="string"?(x=encodeURI(x).replace(T,Er),O&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Er(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var fo=/[#\/\?@]/g,yc=/[#\?:]/g,Tl=/[#\?]/g,Ai=/[#\?@]/g,Cl=/#/g;function ya(x,T){this.h=this.g=null,this.i=x||null,this.j=!!T}function ti(x){x.g||(x.g=new Map,x.h=0,x.i&&ts(x.i,function(T,O){x.add(decodeURIComponent(T.replace(/\+/g," ")),O)}))}n=ya.prototype,n.add=function(x,T){ti(this),this.i=null,x=ba(this,x);let O=this.g.get(x);return O||this.g.set(x,O=[]),O.push(T),this.h+=1,this};function Va(x,T){ti(x),T=ba(x,T),x.g.has(T)&&(x.i=null,x.h-=x.g.get(T).length,x.g.delete(T))}function Il(x,T){return ti(x),T=ba(x,T),x.g.has(T)}n.forEach=function(x,T){ti(this),this.g.forEach(function(O,ee){O.forEach(function(Ee){x.call(T,Ee,ee,this)},this)},this)};function Rl(x,T){ti(x);let O=[];if(typeof T=="string")Il(x,T)&&(O=O.concat(x.g.get(ba(x,T))));else for(x=Array.from(x.g.values()),T=0;T<x.length;T++)O=O.concat(x[T]);return O}n.set=function(x,T){return ti(this),this.i=null,x=ba(this,x),Il(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[T]),this.h+=1,this},n.get=function(x,T){return x?(x=Rl(this,x),x.length>0?String(x[0]):T):T};function $o(x,T,O){Va(x,T),O.length>0&&(x.i=null,x.g.set(ba(x,T),b(O)),x.h+=O.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],T=Array.from(this.g.keys());for(let ee=0;ee<T.length;ee++){var O=T[ee];const Ee=ir(O);O=Rl(this,O);for(let Me=0;Me<O.length;Me++){let nt=Ee;O[Me]!==""&&(nt+="="+ir(O[Me])),x.push(nt)}}return this.i=x.join("&")};function Go(x){const T=new ya;return T.i=x.i,x.g&&(T.g=new Map(x.g),T.h=x.h),T}function ba(x,T){return T=String(T),x.j&&(T=T.toLowerCase()),T}function Bi(x,T){T&&!x.j&&(ti(x),x.i=null,x.g.forEach(function(O,ee){const Ee=ee.toLowerCase();ee!=Ee&&(Va(this,ee),$o(this,Ee,O))},x)),x.j=T}function ks(x,T){const O=new wi;if(c.Image){const ee=new Image;ee.onload=p(Ui,O,"TestLoadImage: loaded",!0,T,ee),ee.onerror=p(Ui,O,"TestLoadImage: error",!1,T,ee),ee.onabort=p(Ui,O,"TestLoadImage: abort",!1,T,ee),ee.ontimeout=p(Ui,O,"TestLoadImage: timeout",!1,T,ee),c.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=x}else T(!1)}function wa(x,T){const O=new wi,ee=new AbortController,Ee=setTimeout(()=>{ee.abort(),Ui(O,"TestPingServer: timeout",!1,T)},1e4);fetch(x,{signal:ee.signal}).then(Me=>{clearTimeout(Ee),Me.ok?Ui(O,"TestPingServer: ok",!0,T):Ui(O,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(Ee),Ui(O,"TestPingServer: error",!1,T)})}function Ui(x,T,O,ee,Ee){try{Ee&&(Ee.onload=null,Ee.onerror=null,Ee.onabort=null,Ee.ontimeout=null),ee(O)}catch{}}function Ba(){this.g=new Xt}function Rt(x){this.i=x.Sb||null,this.h=x.ab||!1}y(Rt,_t),Rt.prototype.g=function(){return new mo(this.i,this.h)};function mo(x,T){Ae.call(this),this.H=x,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(mo,Ae),n=mo.prototype,n.open=function(x,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=T,this.readyState=1,ni(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(T.body=x),(this.H||c).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ua(this)),this.readyState=0},n.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wo(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wo(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}n.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var T=x.value?x.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!x.done}))&&(this.response=this.responseText+=T)}x.done?Ua(this):ni(this),this.readyState==3&&Wo(this)}},n.Oa=function(x){this.g&&(this.response=this.responseText=x,Ua(this))},n.Na=function(x){this.g&&(this.response=x,Ua(this))},n.ga=function(){this.g&&Ua(this)};function Ua(x){x.readyState=4,x.l=null,x.j=null,x.B=null,ni(x)}n.setRequestHeader=function(x,T){this.A.append(x,T)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],T=this.h.entries();for(var O=T.next();!O.done;)O=O.value,x.push(O[0]+": "+O[1]),O=T.next();return x.join(`\r
`)};function ni(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(mo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function $r(x){let T="";return Se(x,function(O,ee){T+=ee,T+=":",T+=O,T+=`\r
`}),T}function po(x,T,O){e:{for(ee in O){var ee=!1;break e}ee=!0}ee||(O=$r(O),typeof x=="string"?O!=null&&ir(O):bn(x,T,O))}function Vn(x){Ae.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Vn,Ae);var ns=/^https?$/i,go=["POST","PUT"];n=Vn.prototype,n.Fa=function(x){this.H=x},n.ea=function(x,T,O,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);T=T?T.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oi.g(),this.g.onreadystatechange=N(f(this.Ca,this));try{this.B=!0,this.g.open(T,String(x),!0),this.B=!1}catch(Me){Ps(this,Me);return}if(x=O||"",O=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var Ee in ee)O.set(Ee,ee[Ee]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const Me of ee.keys())O.set(Me,ee.get(Me));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(O.keys()).find(Me=>Me.toLowerCase()=="content-type"),Ee=c.FormData&&x instanceof c.FormData,!(Array.prototype.indexOf.call(go,T,void 0)>=0)||ee||Ee||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Me,nt]of O)this.g.setRequestHeader(Me,nt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(Me){Ps(this,Me)}};function Ps(x,T){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=T,x.o=5,Ll(x),_a(x)}function Ll(x){x.A||(x.A=!0,Je(x,"complete"),Je(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,Je(this,"complete"),Je(this,"abort"),_a(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),Vn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?rs(this):this.Xa())},n.Xa=function(){rs(this)};function rs(x){if(x.h&&typeof a<"u"){if(x.v&&is(x)==4)setTimeout(x.Ca.bind(x),0);else if(Je(x,"readystatechange"),is(x)==4){x.h=!1;try{const Me=x.ca();e:switch(Me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var O;if(!(O=T)){var ee;if(ee=Me===0){let nt=String(x.D).match(El)[1]||null;!nt&&c.self&&c.self.location&&(nt=c.self.location.protocol.slice(0,-1)),ee=!ns.test(nt?nt.toLowerCase():"")}O=ee}if(O)Je(x,"complete"),Je(x,"success");else{x.o=6;try{var Ee=is(x)>2?x.g.statusText:""}catch{Ee=""}x.l=Ee+" ["+x.ca()+"]",Ll(x)}}finally{_a(x)}}}}function _a(x,T){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const O=x.g;x.g=null,T||Je(x,"ready");try{O.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function is(x){return x.g?x.g.readyState:0}n.ca=function(){try{return is(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(x){if(this.g){var T=this.g.responseText;return x&&T.indexOf(x)==0&&(T=T.substring(x.length)),bt(T)}};function Mr(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function $s(x){const T={};x=(x.g&&is(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<x.length;ee++){if(F(x[ee]))continue;var O=zr(x[ee]);const Ee=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const Me=T[Ee]||[];T[Ee]=Me,Me.push(O)}qe(T,function(ee){return ee.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fi(x,T,O){return O&&O.internalChannelParams&&O.internalChannelParams[x]||T}function Gs(x){this.za=0,this.i=[],this.j=new wi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fi("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fi("baseRetryDelayMs",5e3,x),this.Za=fi("retryDelaySeedMs",1e4,x),this.Ta=fi("forwardChannelMaxRetries",2,x),this.va=fi("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new Uo(x&&x.concurrentRequestLimit),this.Ba=new Ba,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Gs.prototype,n.ka=8,n.I=1,n.connect=function(x,T,O,ee){St(0),this.W=x,this.H=T||{},O&&ee!==void 0&&(this.H.OSID=O,this.H.OAID=ee),this.F=this.X,this.J=Qe(this,null,this.W),bs(this)};function za(x){if(Ys(x),x.I==3){var T=x.V++,O=jr(x.J);if(bn(O,"SID",x.M),bn(O,"RID",T),bn(O,"TYPE","terminate"),ss(x,O),T=new _i(x,x.j,T),T.M=2,T.A=qa(jr(O)),O=!1,c.navigator&&c.navigator.sendBeacon)try{O=c.navigator.sendBeacon(T.A.toString(),"")}catch{}!O&&c.Image&&(new Image().src=T.A,O=!0),O||(T.g=ft(T.j,null),T.g.ea(T.A)),T.F=Date.now(),qi(T)}ze(x)}function Ws(x){x.g&&(Ko(x),x.g.cancel(),x.g=null)}function Ys(x){Ws(x),x.v&&(c.clearTimeout(x.v),x.v=null),U(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&c.clearTimeout(x.m),x.m=null)}function bs(x){if(!Vi(x.h)&&!x.m){x.m=!0;var T=x.Ea;he||D(),re||(he(),re=!0),V.add(T,x),x.D=0}}function xo(x,T){return vs(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=T.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=un(f(x.Ea,x,T),xe(x,x.D)),x.D++,!0)}n.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const Ee=new _i(this,this.j,x);let Me=this.o;if(this.U&&(Me?(Me=X(Me),J(Me,this.U)):Me=this.U),this.u!==null||this.R||(Ee.J=Me,Me=null),this.S)e:{for(var T=0,O=0;O<this.i.length;O++){t:{var ee=this.i[O];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(T+=ee,T>4096){T=O;break e}if(T===4096||O===this.i.length-1){T=O+1;break e}}T=1e3}else T=1e3;T=Ks(this,Ee,T),O=jr(this.J),bn(O,"RID",x),bn(O,"CVER",22),this.G&&bn(O,"X-HTTP-Session-Id",this.G),ss(this,O),Me&&(this.R?T="headers="+ir($r(Me))+"&"+T:this.u&&po(O,this.u,Me)),ho(this.h,Ee),this.Ra&&bn(O,"TYPE","init"),this.S?(bn(O,"$req",T),bn(O,"SID","null"),Ee.U=!0,Hr(Ee,O,null)):Hr(Ee,O,T),this.I=2}}else this.I==3&&(x?Yo(this,x):this.i.length==0||Vi(this.h)||Yo(this))};function Yo(x,T){var O;T?O=T.l:O=x.V++;const ee=jr(x.J);bn(ee,"SID",x.M),bn(ee,"RID",O),bn(ee,"AID",x.K),ss(x,ee),x.u&&x.o&&po(ee,x.u,x.o),O=new _i(x,x.j,O,x.D+1),x.u===null&&(O.J=x.o),T&&(x.i=T.G.concat(x.i)),T=Ks(x,O,1e3),O.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),ho(x.h,O),Hr(O,ee,T)}function ss(x,T){x.H&&Se(x.H,function(O,ee){bn(T,ee,O)}),x.l&&Se({},function(O,ee){bn(T,ee,O)})}function Ks(x,T,O){O=Math.min(x.i.length,O);const ee=x.l?f(x.l.Ka,x.l,x):null;e:{var Ee=x.i;let Qt=-1;for(;;){const ar=["count="+O];Qt==-1?O>0?(Qt=Ee[0].g,ar.push("ofs="+Qt)):Qt=0:ar.push("ofs="+Qt);let hn=!0;for(let Bn=0;Bn<O;Bn++){var Me=Ee[Bn].g;const mi=Ee[Bn].map;if(Me-=Qt,Me<0)Qt=Math.max(0,Ee[Bn].g-100),hn=!1;else try{Me="req"+Me+"_"||"";try{var nt=mi instanceof Map?mi:Object.entries(mi);for(const[Si,Xn]of nt){let ji=Xn;d(Xn)&&(ji=nn(Xn)),ar.push(Me+Si+"="+encodeURIComponent(ji))}}catch(Si){throw ar.push(Me+"type="+encodeURIComponent("_badmap")),Si}}catch{ee&&ee(mi)}}if(hn){nt=ar.join("&");break e}}nt=void 0}return x=x.i.splice(0,O),T.G=x,nt}function kl(x){if(!x.g&&!x.v){x.Y=1;var T=x.Da;he||D(),re||(he(),re=!0),V.add(T,x),x.A=0}}function Ds(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=un(f(x.Da,x),xe(x,x.A)),x.A++,!0)}n.Da=function(){if(this.v=null,A(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=un(f(this.Wa,this),x)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Ws(this),A(this))};function Ko(x){x.B!=null&&(c.clearTimeout(x.B),x.B=null)}function A(x){x.g=new _i(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var T=jr(x.na);bn(T,"RID","rpc"),bn(T,"SID",x.M),bn(T,"AID",x.K),bn(T,"CI",x.F?"0":"1"),!x.F&&x.ia&&bn(T,"TO",x.ia),bn(T,"TYPE","xmlhttp"),ss(x,T),x.u&&x.o&&po(T,x.u,x.o),x.O&&(x.g.H=x.O);var O=x.g;x=x.ba,O.M=1,O.A=qa(jr(T)),O.u=null,O.R=!0,Fi(O,x)}n.Va=function(){this.C!=null&&(this.C=null,Ws(this),Ds(this),St(19))};function U(x){x.C!=null&&(c.clearTimeout(x.C),x.C=null)}function oe(x,T){var O=null;if(x.g==T){U(x),Ko(x),x.g=null;var ee=2}else if(Ls(x.h,T))O=T.G,zo(x.h,T),ee=1;else return;if(x.I!=0){if(T.o)if(ee==1){O=T.u?T.u.length:0,T=Date.now()-T.F;var Ee=x.D;ee=Dn(),Je(ee,new Nt(ee,O)),bs(x)}else kl(x);else if(Ee=T.m,Ee==3||Ee==0&&T.X>0||!(ee==1&&xo(x,T)||ee==2&&Ds(x)))switch(O&&O.length>0&&(T=x.h,T.i=T.i.concat(O)),Ee){case 1:Ne(x,5);break;case 4:Ne(x,10);break;case 3:Ne(x,6);break;default:Ne(x,2)}}}function xe(x,T){let O=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(O*=2),O*T}function Ne(x,T){if(x.j.info("Error code "+T),T==2){var O=f(x.bb,x),ee=x.Ua;const Ee=!ee;ee=new hi(ee||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||mn(ee,"https"),qa(ee),Ee?ks(ee.toString(),O):wa(ee.toString(),O)}else St(2);x.I=0,x.l&&x.l.pa(T),ze(x),Ys(x)}n.bb=function(x){x?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function ze(x){if(x.I=0,x.ja=[],x.l){const T=Ho(x.h);(T.length!=0||x.i.length!=0)&&(j(x.ja,T),j(x.ja,x.i),x.h.i.length=0,b(x.i),x.i.length=0),x.l.oa()}}function Qe(x,T,O){var ee=O instanceof hi?jr(O):new hi(O);if(ee.g!="")T&&(ee.g=T+"."+ee.g),va(ee,ee.u);else{var Ee=c.location;ee=Ee.protocol,T=T?T+"."+Ee.hostname:Ee.hostname,Ee=+Ee.port;const Me=new hi(null);ee&&mn(Me,ee),T&&(Me.g=T),Ee&&va(Me,Ee),O&&(Me.h=O),ee=Me}return O=x.G,T=x.wa,O&&T&&bn(ee,O,T),bn(ee,"VER",x.ka),ss(x,ee),ee}function ft(x,T,O){if(T&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=x.Aa&&!x.ma?new Vn(new Rt({ab:O})):new Vn(x.ma),T.Fa(x.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xt(){}n=xt.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Dt(){}Dt.prototype.g=function(x,T){return new Ct(x,T)};function Ct(x,T){Ae.call(this),this.g=new Gs(T),this.l=x,this.h=T&&T.messageUrlParams||null,x=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(x?x["X-WebChannel-Content-Type"]=T.messageContentType:x={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(x?x["X-WebChannel-Client-Profile"]=T.sa:x={"X-WebChannel-Client-Profile":T.sa}),this.g.U=x,(x=T&&T.Qb)&&!F(x)&&(this.g.u=x),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!F(T)&&(this.g.G=T,x=this.h,x!==null&&T in x&&(x=this.h,T in x&&delete x[T])),this.j=new Kn(this)}y(Ct,Ae),Ct.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){za(this.g)},Ct.prototype.o=function(x){var T=this.g;if(typeof x=="string"){var O={};O.__data__=x,x=O}else this.v&&(O={},O.__data__=nn(x),x=O);T.i.push(new br(T.Ya++,x)),T.I==3&&bs(T)},Ct.prototype.N=function(){this.g.l=null,delete this.j,za(this.g),delete this.g,Ct.Z.N.call(this)};function pn(x){It.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var T=x.__sm__;if(T){e:{for(const O in T){x=O;break e}x=void 0}(this.i=x)&&(x=this.i,T=T!==null&&x in T?T[x]:void 0),this.data=T}else this.data=x}y(pn,It);function sr(){Bt.call(this),this.status=1}y(sr,Bt);function Kn(x){this.g=x}y(Kn,xt),Kn.prototype.ra=function(){Je(this.g,"a")},Kn.prototype.qa=function(x){Je(this.g,new pn(x))},Kn.prototype.pa=function(x){Je(this.g,new sr)},Kn.prototype.oa=function(){Je(this.g,"b")},Dt.prototype.createWebChannel=Dt.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,vA=function(){return new Dt},xA=function(){return Dn()},gA=en,Vv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ji.NO_ERROR=0,Ji.TIMEOUT=8,Ji.HTTP_ERROR=6,Up=Ji,Mi.COMPLETE="complete",pA=Mi,yr.EventType=rn,rn.OPEN="a",rn.CLOSE="b",rn.ERROR="c",rn.MESSAGE="d",Ae.prototype.listen=Ae.prototype.J,Rf=yr,Vn.prototype.listenOnce=Vn.prototype.K,Vn.prototype.getLastError=Vn.prototype.Ha,Vn.prototype.getLastErrorCode=Vn.prototype.ya,Vn.prototype.getStatus=Vn.prototype.ca,Vn.prototype.getResponseJson=Vn.prototype.La,Vn.prototype.getResponseText=Vn.prototype.la,Vn.prototype.send=Vn.prototype.ea,Vn.prototype.setWithCredentials=Vn.prototype.Fa,mA=Vn}).apply(typeof wp<"u"?wp:typeof self<"u"?self:typeof window<"u"?window:{});const rw="@firebase/firestore",iw="4.9.2";let Cs=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cs.UNAUTHENTICATED=new Cs(null),Cs.GOOGLE_CREDENTIALS=new Cs("google-credentials-uid"),Cs.FIRST_PARTY=new Cs("first-party-uid"),Cs.MOCK_USER=new Cs("mock-user");let kh="12.3.0";const Ju=new Ug("@firebase/firestore");function Jd(){return Ju.logLevel}function mt(n,...e){if(Ju.logLevel<=Nn.DEBUG){const t=e.map(H1);Ju.debug(`Firestore (${kh}): ${n}`,...t)}}function mc(n,...e){if(Ju.logLevel<=Nn.ERROR){const t=e.map(H1);Ju.error(`Firestore (${kh}): ${n}`,...t)}}function yh(n,...e){if(Ju.logLevel<=Nn.WARN){const t=e.map(H1);Ju.warn(`Firestore (${kh}): ${n}`,...t)}}function H1(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Vt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,yA(n,r,t)}function yA(n,e,t){let r=`FIRESTORE (${kh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw mc(r),new Error(r)}function Pn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||yA(e,i,r)}function tn(n,e){return n}const Ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends qo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class bA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cs.UNAUTHENTICATED)))}shutdown(){}}class xL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class vL{constructor(e){this.t=e,this.currentUser=Cs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pn(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let a=new xl;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new xl,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},d=h=>{mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new xl)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pn(typeof r.accessToken=="string",31837,{l:r}),new bA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pn(e===null||typeof e=="string",2055,{h:e}),new Cs(e)}}class yL{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Cs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bL{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new yL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wL{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,so(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pn(this.o===void 0,3512);const r=a=>{a.error!=null&&mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,mt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Pn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new sw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _L(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=_L(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function An(n,e){return n<e?-1:n>e?1:0}function Bv(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Gx(i)===Gx(a)?An(i,a):Gx(i)?1:-1}return An(n.length,e.length)}const NL=55296,AL=57343;function Gx(n){const e=n.charCodeAt(0);return e>=NL&&e<=AL}function bh(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}const aw="__name__";class hl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Vt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Vt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return hl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hl?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=hl.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return An(e.length,t.length)}static compareSegments(e,t){const r=hl.isNumericId(e),i=hl.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?hl.extractNumericId(e).compare(hl.extractNumericId(t)):Bv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lu.fromString(e.substring(4,e.length-2))}}class hr extends hl{construct(e,t,r){return new hr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ct(Ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new hr(t)}static emptyPath(){return new hr([])}}const SL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fs extends hl{construct(e,t,r){return new fs(e,t,r)}static isValidIdentifier(e){return SL.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aw}static keyField(){return new fs([aw])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ct(Ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new ct(Ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ct(Ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(a(),i++)}if(a(),c)throw new ct(Ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fs(t)}static emptyPath(){return new fs([])}}class Pt{constructor(e){this.path=e}static fromPath(e){return new Pt(hr.fromString(e))}static fromName(e){return new Pt(hr.fromString(e).popFirst(5))}static empty(){return new Pt(hr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&hr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return hr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pt(new hr(e.slice()))}}function wA(n,e,t){if(!t)throw new ct(Ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jL(n,e,t,r){if(e===!0&&r===!0)throw new ct(Ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ow(n){if(!Pt.isDocumentKey(n))throw new ct(Ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lw(n){if(Pt.isDocumentKey(n))throw new ct(Ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _A(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Gg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Vt(12329,{type:typeof n})}function lo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ct(Ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gg(n);throw new ct(Ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function bi(n,e){const t={typeString:n};return e&&(t.value=e),t}function pm(n,e){if(!_A(n))throw new ct(Ge.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new ct(Ge.INVALID_ARGUMENT,t);return!0}const cw=-62135596800,uw=1e6;class rr{static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*uw);return new rr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ct(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ct(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<cw)throw new ct(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ct(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uw}_compareTo(e){return this.seconds===e.seconds?An(this.nanoseconds,e.nanoseconds):An(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pm(e,rr._jsonSchema))return new rr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rr._jsonSchemaVersion="firestore/timestamp/1.0",rr._jsonSchema={type:bi("string",rr._jsonSchemaVersion),seconds:bi("number"),nanoseconds:bi("number")};class Wt{static fromTimestamp(e){return new Wt(e)}static min(){return new Wt(new rr(0,0))}static max(){return new Wt(new rr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Kf=-1;function EL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Wt.fromTimestamp(r===1e9?new rr(t+1,0):new rr(t,r));return new hu(i,Pt.empty(),e)}function TL(n){return new hu(n.readTime,n.key,Kf)}class hu{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hu(Wt.min(),Pt.empty(),Kf)}static max(){return new hu(Wt.max(),Pt.empty(),Kf)}}function CL(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pt.comparator(n.documentKey,e.documentKey),t!==0?t:An(n.largestBatchId,e.largestBatchId))}const IL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ph(n){if(n.code!==Ge.FAILED_PRECONDITION||n.message!==IL)throw n;mt("LocalStore","Unexpectedly lost primary lease")}class Xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Xe?t:Xe.resolve(t)}catch(t){return Xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Xe.reject(t)}static resolve(e){return new Xe(((t,r)=>{t(e)}))}static reject(e){return new Xe(((t,r)=>{r(e)}))}static waitFor(e){return new Xe(((t,r)=>{let i=0,a=0,c=!1;e.forEach((d=>{++i,d.next((()=>{++a,c&&a===i&&t()}),(h=>r(h)))})),c=!0,a===i&&t()}))}static or(e){let t=Xe.resolve(!1);for(const r of e)t=t.next((i=>i?Xe.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new Xe(((r,i)=>{const a=e.length,c=new Array(a);let d=0;for(let h=0;h<a;h++){const f=h;t(e[f]).next((p=>{c[f]=p,++d,d===a&&r(c)}),(p=>i(p)))}}))}static doWhile(e,t){return new Xe(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function LL(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Dh(n){return n.name==="IndexedDbTransactionError"}class Wg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wg.ce=-1;const G1=-1;function gm(n){return n==null}function hg(n){return n===0&&1/n==-1/0}function kL(n){return typeof n=="number"&&Number.isInteger(n)&&!hg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const NA="";function PL(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dw(e)),e=DL(n.get(t),e);return dw(e)}function DL(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case NA:t+="";break;default:t+=a}}return t}function dw(n){return n+NA+""}function hw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Nu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function AA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ur{constructor(e,t){this.comparator=e,this.root=t||hs.EMPTY}insert(e,t){return new Ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hs.BLACK,null,null))}remove(e){return new Ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _p(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _p(this.root,e,this.comparator,!1)}getReverseIterator(){return new _p(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _p(this.root,e,this.comparator,!0)}}class _p{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hs{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??hs.RED,this.left=i??hs.EMPTY,this.right=a??hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new hs(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return hs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Vt(27949);return e+(this.isRed()?0:1)}}hs.EMPTY=null,hs.RED=!0,hs.BLACK=!1;hs.EMPTY=new class{constructor(){this.size=0}get key(){throw Vt(57766)}get value(){throw Vt(16141)}get color(){throw Vt(16727)}get left(){throw Vt(29726)}get right(){throw Vt(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new hs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Di{constructor(e){this.comparator=e,this.data=new Ur(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fw(this.data.getIterator())}getIteratorFrom(e){return new fw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Di)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Di(this.comparator);return t.data=e,t}}class fw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ka{constructor(e){this.fields=e,e.sort(fs.comparator)}static empty(){return new ka([])}unionWith(e){let t=new Di(fs.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ka(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bh(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class SA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ps{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new SA("Invalid base64 string: "+a):a}})(e);return new ps(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a})(e);return new ps(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return An(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ps.EMPTY_BYTE_STRING=new ps("");const ML=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fu(n){if(Pn(!!n,39018),typeof n=="string"){let e=0;const t=ML.exec(n);if(Pn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:si(n.seconds),nanos:si(n.nanos)}}function si(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mu(n){return typeof n=="string"?ps.fromBase64String(n):ps.fromUint8Array(n)}const jA="server_timestamp",EA="__type__",TA="__previous_value__",CA="__local_write_time__";function W1(n){return(n?.mapValue?.fields||{})[EA]?.stringValue===jA}function Yg(n){const e=n.mapValue.fields[TA];return W1(e)?Yg(e):e}function Qf(n){const e=fu(n.mapValue.fields[CA].timestampValue);return new rr(e.seconds,e.nanos)}class OL{constructor(e,t,r,i,a,c,d,h,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p}}const fg="(default)";class Xf{constructor(e,t){this.projectId=e,this.database=t||fg}static empty(){return new Xf("","")}get isDefaultDatabase(){return this.database===fg}isEqual(e){return e instanceof Xf&&e.projectId===this.projectId&&e.database===this.database}}const IA="__type__",FL="__max__",Np={mapValue:{}},RA="__vector__",mg="value";function pu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?W1(n)?4:VL(n)?9007199254740991:qL(n)?10:11:Vt(28295,{value:n})}function Nl(n,e){if(n===e)return!0;const t=pu(n);if(t!==pu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qf(n).isEqual(Qf(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=fu(i.timestampValue),d=fu(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return mu(i.bytesValue).isEqual(mu(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return si(i.geoPointValue.latitude)===si(a.geoPointValue.latitude)&&si(i.geoPointValue.longitude)===si(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return si(i.integerValue)===si(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=si(i.doubleValue),d=si(a.doubleValue);return c===d?hg(c)===hg(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return bh(n.arrayValue.values||[],e.arrayValue.values||[],Nl);case 10:case 11:return(function(i,a){const c=i.mapValue.fields||{},d=a.mapValue.fields||{};if(hw(c)!==hw(d))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(d[h]===void 0||!Nl(c[h],d[h])))return!1;return!0})(n,e);default:return Vt(52216,{left:n})}}function Jf(n,e){return(n.values||[]).find((t=>Nl(t,e)))!==void 0}function wh(n,e){if(n===e)return 0;const t=pu(n),r=pu(e);if(t!==r)return An(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return An(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const d=si(a.integerValue||a.doubleValue),h=si(c.integerValue||c.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(n,e);case 3:return mw(n.timestampValue,e.timestampValue);case 4:return mw(Qf(n),Qf(e));case 5:return Bv(n.stringValue,e.stringValue);case 6:return(function(a,c){const d=mu(a),h=mu(c);return d.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const d=a.split("/"),h=c.split("/");for(let f=0;f<d.length&&f<h.length;f++){const p=An(d[f],h[f]);if(p!==0)return p}return An(d.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const d=An(si(a.latitude),si(c.latitude));return d!==0?d:An(si(a.longitude),si(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return pw(n.arrayValue,e.arrayValue);case 10:return(function(a,c){const d=a.fields||{},h=c.fields||{},f=d[mg]?.arrayValue,p=h[mg]?.arrayValue,y=An(f?.values?.length||0,p?.values?.length||0);return y!==0?y:pw(f,p)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===Np.mapValue&&c===Np.mapValue)return 0;if(a===Np.mapValue)return 1;if(c===Np.mapValue)return-1;const d=a.fields||{},h=Object.keys(d),f=c.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let y=0;y<h.length&&y<p.length;++y){const N=Bv(h[y],p[y]);if(N!==0)return N;const b=wh(d[h[y]],f[p[y]]);if(b!==0)return b}return An(h.length,p.length)})(n.mapValue,e.mapValue);default:throw Vt(23264,{he:t})}}function mw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return An(n,e);const t=fu(n),r=fu(e),i=An(t.seconds,r.seconds);return i!==0?i:An(t.nanos,r.nanos)}function pw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=wh(t[i],r[i]);if(a)return a}return An(t.length,r.length)}function _h(n){return Uv(n)}function Uv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=fu(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return mu(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Pt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Uv(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${Uv(t.fields[c])}`;return i+"}"})(n.mapValue):Vt(61005,{value:n})}function zp(n){switch(pu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yg(n);return e?16+zp(e):16;case 5:return 2*n.stringValue.length;case 6:return mu(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+zp(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Nu(r.fields,((a,c)=>{i+=a.length+zp(c)})),i})(n.mapValue);default:throw Vt(13486,{value:n})}}function gw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function zv(n){return!!n&&"integerValue"in n}function Y1(n){return!!n&&"arrayValue"in n}function xw(n){return!!n&&"nullValue"in n}function vw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hp(n){return!!n&&"mapValue"in n}function qL(n){return(n?.mapValue?.fields||{})[IA]?.stringValue===RA}function Of(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Nu(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Of(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Of(n.arrayValue.values[t]);return e}return{...n}}function VL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===FL}class Us{constructor(e){this.value=e}static empty(){return new Us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Of(t)}setAll(e){let t=fs.emptyPath(),r={},i=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=d.popLast()}c?r[d.lastSegment()]=Of(c):i.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Hp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Hp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Nu(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Us(Of(this.value))}}function LA(n){const e=[];return Nu(n.fields,((t,r)=>{const i=new fs([t]);if(Hp(r)){const a=LA(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)})),new ka(e)}class Xi{constructor(e,t,r,i,a,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Xi(e,0,Wt.min(),Wt.min(),Wt.min(),Us.empty(),0)}static newFoundDocument(e,t,r,i){return new Xi(e,1,t,Wt.min(),r,i,0)}static newNoDocument(e,t){return new Xi(e,2,t,Wt.min(),Wt.min(),Us.empty(),0)}static newUnknownDocument(e,t){return new Xi(e,3,t,Wt.min(),Wt.min(),Us.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pg{constructor(e,t){this.position=e,this.inclusive=t}}function yw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(a.field.isKeyField()?r=Pt.comparator(Pt.fromName(c.referenceValue),t.key):r=wh(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function bw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Nl(n.position[t],e.position[t]))return!1;return!0}class Zf{constructor(e,t="asc"){this.field=e,this.dir=t}}function BL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class kA{}class yi extends kA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new zL(e,t,r):t==="array-contains"?new GL(e,r):t==="in"?new WL(e,r):t==="not-in"?new YL(e,r):t==="array-contains-any"?new KL(e,r):new yi(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new HL(e,r):new $L(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wh(t,this.value)):t!==null&&pu(this.value)===pu(t)&&this.matchesComparison(wh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oo extends kA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Oo(e,t)}matches(e){return PA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function PA(n){return n.op==="and"}function DA(n){return UL(n)&&PA(n)}function UL(n){for(const e of n.filters)if(e instanceof Oo)return!1;return!0}function Hv(n){if(n instanceof yi)return n.field.canonicalString()+n.op.toString()+_h(n.value);if(DA(n))return n.filters.map((e=>Hv(e))).join(",");{const e=n.filters.map((t=>Hv(t))).join(",");return`${n.op}(${e})`}}function MA(n,e){return n instanceof yi?(function(r,i){return i instanceof yi&&r.op===i.op&&r.field.isEqual(i.field)&&Nl(r.value,i.value)})(n,e):n instanceof Oo?(function(r,i){return i instanceof Oo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,c,d)=>a&&MA(c,i.filters[d])),!0):!1})(n,e):void Vt(19439)}function OA(n){return n instanceof yi?(function(t){return`${t.field.canonicalString()} ${t.op} ${_h(t.value)}`})(n):n instanceof Oo?(function(t){return t.op.toString()+" {"+t.getFilters().map(OA).join(" ,")+"}"})(n):"Filter"}class zL extends yi{constructor(e,t,r){super(e,t,r),this.key=Pt.fromName(r.referenceValue)}matches(e){const t=Pt.comparator(e.key,this.key);return this.matchesComparison(t)}}class HL extends yi{constructor(e,t){super(e,"in",t),this.keys=FA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $L extends yi{constructor(e,t){super(e,"not-in",t),this.keys=FA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function FA(n,e){return(e.arrayValue?.values||[]).map((t=>Pt.fromName(t.referenceValue)))}class GL extends yi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Y1(t)&&Jf(t.arrayValue,this.value)}}class WL extends yi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Jf(this.value.arrayValue,t)}}class YL extends yi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Jf(this.value.arrayValue,t)}}class KL extends yi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Y1(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Jf(this.value.arrayValue,r)))}}class QL{constructor(e,t=null,r=[],i=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=d,this.Te=null}}function ww(n,e=null,t=[],r=[],i=null,a=null,c=null){return new QL(n,e,t,r,i,a,c)}function K1(n){const e=tn(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Hv(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),gm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>_h(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>_h(r))).join(",")),e.Te=t}return e.Te}function Q1(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!MA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bw(n.startAt,e.startAt)&&bw(n.endAt,e.endAt)}function $v(n){return Pt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Mh{constructor(e,t=null,r=[],i=[],a=null,c="F",d=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XL(n,e,t,r,i,a,c,d){return new Mh(n,e,t,r,i,a,c,d)}function X1(n){return new Mh(n)}function _w(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qA(n){return n.collectionGroup!==null}function Ff(n){const e=tn(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Di(fs.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(d=d.add(f.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Zf(a,r))})),t.has(fs.keyField().canonicalString())||e.Ie.push(new Zf(fs.keyField(),r))}return e.Ie}function vl(n){const e=tn(n);return e.Ee||(e.Ee=JL(e,Ff(n))),e.Ee}function JL(n,e){if(n.limitType==="F")return ww(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Zf(i.field,a)}));const t=n.endAt?new pg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new pg(n.startAt.position,n.startAt.inclusive):null;return ww(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Gv(n,e){const t=n.filters.concat([e]);return new Mh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wv(n,e,t){return new Mh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kg(n,e){return Q1(vl(n),vl(e))&&n.limitType===e.limitType}function VA(n){return`${K1(vl(n))}|lt:${n.limitType}`}function Zd(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>OA(i))).join(", ")}]`),gm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>_h(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>_h(i))).join(",")),`Target(${r})`})(vl(n))}; limitType=${n.limitType})`}function Qg(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Pt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of Ff(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(c,d,h){const f=yw(c,d,h);return c.inclusive?f<=0:f<0})(r.startAt,Ff(r),i)||r.endAt&&!(function(c,d,h){const f=yw(c,d,h);return c.inclusive?f>=0:f>0})(r.endAt,Ff(r),i))})(n,e)}function ZL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BA(n){return(e,t)=>{let r=!1;for(const i of Ff(n)){const a=ek(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function ek(n,e,t){const r=n.field.isKeyField()?Pt.comparator(e.key,t.key):(function(a,c,d){const h=c.data.field(a),f=d.data.field(a);return h!==null&&f!==null?wh(h,f):Vt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Vt(19790,{direction:n.dir})}}class ld{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Nu(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return AA(this.inner)}size(){return this.innerSize}}const tk=new Ur(Pt.comparator);function pc(){return tk}const UA=new Ur(Pt.comparator);function Lf(...n){let e=UA;for(const t of n)e=e.insert(t.key,t);return e}function zA(n){let e=UA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Gu(){return qf()}function HA(){return qf()}function qf(){return new ld((n=>n.toString()),((n,e)=>n.isEqual(e)))}const nk=new Ur(Pt.comparator),rk=new Di(Pt.comparator);function Sn(...n){let e=rk;for(const t of n)e=e.add(t);return e}const ik=new Di(An);function sk(){return ik}function J1(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hg(e)?"-0":e}}function $A(n){return{integerValue:""+n}}function ak(n,e){return kL(e)?$A(e):J1(n,e)}class Xg{constructor(){this._=void 0}}function ok(n,e,t){return n instanceof gg?(function(i,a){const c={fields:{[EA]:{stringValue:jA},[CA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&W1(a)&&(a=Yg(a)),a&&(c.fields[TA]=a),{mapValue:c}})(t,e):n instanceof em?WA(n,e):n instanceof tm?YA(n,e):(function(i,a){const c=GA(i,a),d=Nw(c)+Nw(i.Ae);return zv(c)&&zv(i.Ae)?$A(d):J1(i.serializer,d)})(n,e)}function lk(n,e,t){return n instanceof em?WA(n,e):n instanceof tm?YA(n,e):t}function GA(n,e){return n instanceof xg?(function(r){return zv(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class gg extends Xg{}class em extends Xg{constructor(e){super(),this.elements=e}}function WA(n,e){const t=KA(e);for(const r of n.elements)t.some((i=>Nl(i,r)))||t.push(r);return{arrayValue:{values:t}}}class tm extends Xg{constructor(e){super(),this.elements=e}}function YA(n,e){let t=KA(e);for(const r of n.elements)t=t.filter((i=>!Nl(i,r)));return{arrayValue:{values:t}}}class xg extends Xg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Nw(n){return si(n.integerValue||n.doubleValue)}function KA(n){return Y1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ck(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof em&&i instanceof em||r instanceof tm&&i instanceof tm?bh(r.elements,i.elements,Nl):r instanceof xg&&i instanceof xg?Nl(r.Ae,i.Ae):r instanceof gg&&i instanceof gg})(n.transform,e.transform)}class uk{constructor(e,t){this.version=e,this.transformResults=t}}class ms{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ms}static exists(e){return new ms(void 0,e)}static updateTime(e){return new ms(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $p(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Jg{}function QA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zg(n.key,ms.none()):new xm(n.key,n.data,ms.none());{const t=n.data,r=Us.empty();let i=new Di(fs.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new Au(n.key,r,new ka(i.toArray()),ms.none())}}function dk(n,e,t){n instanceof xm?(function(i,a,c){const d=i.value.clone(),h=Sw(i.fieldTransforms,a,c.transformResults);d.setAll(h),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Au?(function(i,a,c){if(!$p(i.precondition,a))return void a.convertToUnknownDocument(c.version);const d=Sw(i.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(XA(i)),h.setAll(d),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):(function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Vf(n,e,t,r){return n instanceof xm?(function(a,c,d,h){if(!$p(a.precondition,c))return d;const f=a.value.clone(),p=jw(a.fieldTransforms,h,c);return f.setAll(p),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Au?(function(a,c,d,h){if(!$p(a.precondition,c))return d;const f=jw(a.fieldTransforms,h,c),p=c.data;return p.setAll(XA(a)),p.setAll(f),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(a,c,d){return $p(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function hk(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=GA(r.transform,i||null);a!=null&&(t===null&&(t=Us.empty()),t.set(r.field,a))}return t||null}function Aw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bh(r,i,((a,c)=>ck(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class xm extends Jg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Au extends Jg{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function XA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Sw(n,e,t){const r=new Map;Pn(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,d=e.data.field(a.field);r.set(a.field,lk(c,d,t[i]))}return r}function jw(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,ok(a,c,e))}return r}class Zg extends Jg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JA extends Jg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fk{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&dk(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Vf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=HA();return this.mutations.forEach((i=>{const a=e.get(i.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(i.key)?null:d;const h=QA(c,d);h!==null&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(Wt.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Sn())}isEqual(e){return this.batchId===e.batchId&&bh(this.mutations,e.mutations,((t,r)=>Aw(t,r)))&&bh(this.baseMutations,e.baseMutations,((t,r)=>Aw(t,r)))}}class Z1{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return nk})();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new Z1(e,t,r,i)}}class mk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class pk{constructor(e,t){this.count=e,this.unchangedNames=t}}var vi,kn;function ZA(n){switch(n){case Ge.OK:return Vt(64938);case Ge.CANCELLED:case Ge.UNKNOWN:case Ge.DEADLINE_EXCEEDED:case Ge.RESOURCE_EXHAUSTED:case Ge.INTERNAL:case Ge.UNAVAILABLE:case Ge.UNAUTHENTICATED:return!1;case Ge.INVALID_ARGUMENT:case Ge.NOT_FOUND:case Ge.ALREADY_EXISTS:case Ge.PERMISSION_DENIED:case Ge.FAILED_PRECONDITION:case Ge.ABORTED:case Ge.OUT_OF_RANGE:case Ge.UNIMPLEMENTED:case Ge.DATA_LOSS:return!0;default:return Vt(15467,{code:n})}}function e3(n){if(n===void 0)return mc("GRPC error has no .code"),Ge.UNKNOWN;switch(n){case vi.OK:return Ge.OK;case vi.CANCELLED:return Ge.CANCELLED;case vi.UNKNOWN:return Ge.UNKNOWN;case vi.DEADLINE_EXCEEDED:return Ge.DEADLINE_EXCEEDED;case vi.RESOURCE_EXHAUSTED:return Ge.RESOURCE_EXHAUSTED;case vi.INTERNAL:return Ge.INTERNAL;case vi.UNAVAILABLE:return Ge.UNAVAILABLE;case vi.UNAUTHENTICATED:return Ge.UNAUTHENTICATED;case vi.INVALID_ARGUMENT:return Ge.INVALID_ARGUMENT;case vi.NOT_FOUND:return Ge.NOT_FOUND;case vi.ALREADY_EXISTS:return Ge.ALREADY_EXISTS;case vi.PERMISSION_DENIED:return Ge.PERMISSION_DENIED;case vi.FAILED_PRECONDITION:return Ge.FAILED_PRECONDITION;case vi.ABORTED:return Ge.ABORTED;case vi.OUT_OF_RANGE:return Ge.OUT_OF_RANGE;case vi.UNIMPLEMENTED:return Ge.UNIMPLEMENTED;case vi.DATA_LOSS:return Ge.DATA_LOSS;default:return Vt(39323,{code:n})}}(kn=vi||(vi={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";function gk(){return new TextEncoder}const xk=new lu([4294967295,4294967295],0);function Ew(n){const e=gk().encode(n),t=new fA;return t.update(e),new Uint8Array(t.digest())}function Tw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new lu([t,r],0),new lu([i,a],0)]}class ey{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new kf(`Invalid padding: ${t}`);if(r<0)throw new kf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new kf(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new kf(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=lu.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(lu.fromNumber(r)));return i.compare(xk)===1&&(i=new lu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ew(e),[r,i]=Tw(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new ey(a,i,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=Ew(e),[r,i]=Tw(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class kf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class e0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,vm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new e0(Wt.min(),i,new Ur(An),pc(),Sn())}}class vm{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new vm(r,t,Sn(),Sn(),Sn())}}class Gp{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class t3{constructor(e,t){this.targetId=e,this.Ce=t}}class n3{constructor(e,t,r=ps.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Cw{constructor(){this.ve=0,this.Fe=Iw(),this.Me=ps.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Sn(),t=Sn(),r=Sn();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Vt(38017,{changeType:a})}})),new vm(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Iw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vk{constructor(e){this.Ge=e,this.ze=new Map,this.je=pc(),this.Je=Ap(),this.He=Ap(),this.Ye=new Ur(An)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Vt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if($v(a))if(r===0){const c=new Pt(a.path);this.et(t,c,Xi.newNoDocument(c,Wt.min()))}else Pn(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),h=d?this.ct(d,e,c):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let c,d;try{c=mu(r).toUint8Array()}catch(h){if(h instanceof SA)return yh("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new ey(c,i,a)}catch(h){return yh(h instanceof kf?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const d=this.ot(c);if(d){if(a.current&&$v(d.target)){const h=new Pt(d.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,Xi.newNoDocument(h,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let r=Sn();this.He.forEach(((a,c)=>{let d=!0;c.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const i=new e0(e,t,this.Ye,this.je,r);return this.je=pc(),this.Je=Ap(),this.He=Ap(),this.Ye=new Ur(An),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Cw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Di(An),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Di(An),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||mt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ap(){return new Ur(Pt.comparator)}function Iw(){return new Ur(Pt.comparator)}const yk={asc:"ASCENDING",desc:"DESCENDING"},bk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wk={and:"AND",or:"OR"};class _k{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yv(n,e){return n.useProto3Json||gm(e)?e:{value:e}}function vg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Nk(n,e){return vg(n,e.toTimestamp())}function Ma(n){return Pn(!!n,49232),Wt.fromTimestamp((function(t){const r=fu(t);return new rr(r.seconds,r.nanos)})(n))}function ty(n,e){return Kv(n,e).canonicalString()}function Kv(n,e){const t=(function(i){return new hr(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function i3(n){const e=hr.fromString(n);return Pn(u3(e),10190,{key:e.toString()}),e}function yg(n,e){return ty(n.databaseId,e.path)}function Bf(n,e){const t=i3(e);if(t.get(1)!==n.databaseId.projectId)throw new ct(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ct(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pt(a3(t))}function s3(n,e){return ty(n.databaseId,e)}function Ak(n){const e=i3(n);return e.length===4?hr.emptyPath():a3(e)}function Qv(n){return new hr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function a3(n){return Pn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Rw(n,e,t){return{name:yg(n,e),fields:t.value.mapValue.fields}}function Sk(n,e){return"found"in e?(function(r,i){Pn(!!i.found,43571),i.found.name,i.found.updateTime;const a=Bf(r,i.found.name),c=Ma(i.found.updateTime),d=i.found.createTime?Ma(i.found.createTime):Wt.min(),h=new Us({mapValue:{fields:i.found.fields}});return Xi.newFoundDocument(a,c,d,h)})(n,e):"missing"in e?(function(r,i){Pn(!!i.missing,3894),Pn(!!i.readTime,22933);const a=Bf(r,i.missing),c=Ma(i.readTime);return Xi.newNoDocument(a,c)})(n,e):Vt(7234,{result:e})}function jk(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Vt(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(f,p){return f.useProto3Json?(Pn(p===void 0||typeof p=="string",58123),ps.fromBase64String(p||"")):(Pn(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ps.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(f){const p=f.code===void 0?Ge.UNKNOWN:e3(f.code);return new ct(p,f.message||"")})(c);t=new n3(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bf(n,r.document.name),a=Ma(r.document.updateTime),c=r.document.createTime?Ma(r.document.createTime):Wt.min(),d=new Us({mapValue:{fields:r.document.fields}}),h=Xi.newFoundDocument(i,a,c,d),f=r.targetIds||[],p=r.removedTargetIds||[];t=new Gp(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Bf(n,r.document),a=r.readTime?Ma(r.readTime):Wt.min(),c=Xi.newNoDocument(i,a),d=r.removedTargetIds||[];t=new Gp([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Bf(n,r.document),a=r.removedTargetIds||[];t=new Gp([],a,i,null)}else{if(!("filter"in e))return Vt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new pk(i,a),d=r.targetId;t=new t3(d,c)}}return t}function o3(n,e){let t;if(e instanceof xm)t={update:Rw(n,e.key,e.value)};else if(e instanceof Zg)t={delete:yg(n,e.key)};else if(e instanceof Au)t={update:Rw(n,e.key,e.data),updateMask:Dk(e.fieldMask)};else{if(!(e instanceof JA))return Vt(16599,{Vt:e.type});t={verify:yg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,c){const d=c.transform;if(d instanceof gg)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof em)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof tm)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof xg)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Vt(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Nk(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Vt(27497)})(n,e.precondition)),t}function Ek(n,e){return n&&n.length>0?(Pn(e!==void 0,14353),n.map((t=>(function(i,a){let c=i.updateTime?Ma(i.updateTime):Ma(a);return c.isEqual(Wt.min())&&(c=Ma(a)),new uk(c,i.transformResults||[])})(t,e)))):[]}function Tk(n,e){return{documents:[s3(n,e.path)]}}function Ck(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=s3(n,i);const a=(function(f){if(f.length!==0)return c3(Oo.create(f,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(f){if(f.length!==0)return f.map((p=>(function(N){return{field:eh(N.field),direction:Lk(N.dir)}})(p)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Yv(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:i}}function Ik(n){let e=Ak(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pn(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=(function(y){const N=l3(y);return N instanceof Oo&&DA(N)?N.getFilters():[N]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((N=>(function(j){return new Zf(th(j.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(N)))})(t.orderBy));let d=null;t.limit&&(d=(function(y){let N;return N=typeof y=="object"?y.value:y,gm(N)?null:N})(t.limit));let h=null;t.startAt&&(h=(function(y){const N=!!y.before,b=y.values||[];return new pg(b,N)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const N=!y.before,b=y.values||[];return new pg(b,N)})(t.endAt)),XL(e,i,c,a,d,"F",h,f)}function Rk(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function l3(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=th(t.unaryFilter.field);return yi.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=th(t.unaryFilter.field);return yi.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=th(t.unaryFilter.field);return yi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=th(t.unaryFilter.field);return yi.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Vt(61313);default:return Vt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return yi.create(th(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Vt(58110);default:return Vt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Oo.create(t.compositeFilter.filters.map((r=>l3(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Vt(1026)}})(t.compositeFilter.op))})(n):Vt(30097,{filter:n})}function Lk(n){return yk[n]}function kk(n){return bk[n]}function Pk(n){return wk[n]}function eh(n){return{fieldPath:n.canonicalString()}}function th(n){return fs.fromServerFormat(n.fieldPath)}function c3(n){return n instanceof yi?(function(t){if(t.op==="=="){if(vw(t.value))return{unaryFilter:{field:eh(t.field),op:"IS_NAN"}};if(xw(t.value))return{unaryFilter:{field:eh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vw(t.value))return{unaryFilter:{field:eh(t.field),op:"IS_NOT_NAN"}};if(xw(t.value))return{unaryFilter:{field:eh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eh(t.field),op:kk(t.op),value:t.value}}})(n):n instanceof Oo?(function(t){const r=t.getFilters().map((i=>c3(i)));return r.length===1?r[0]:{compositeFilter:{op:Pk(t.op),filters:r}}})(n):Vt(54877,{filter:n})}function Dk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function u3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class iu{constructor(e,t,r,i,a=Wt.min(),c=Wt.min(),d=ps.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new iu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new iu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Mk{constructor(e){this.yt=e}}function Ok(n){const e=Ik({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wv(e,e.limit,"L"):e}class Fk{constructor(){this.Cn=new qk}addToCollectionParentIndex(e,t){return this.Cn.add(t),Xe.resolve()}getCollectionParents(e,t){return Xe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Xe.resolve()}deleteFieldIndex(e,t){return Xe.resolve()}deleteAllFieldIndexes(e){return Xe.resolve()}createTargetIndexes(e,t){return Xe.resolve()}getDocumentsMatchingTarget(e,t){return Xe.resolve(null)}getIndexType(e,t){return Xe.resolve(0)}getFieldIndexes(e,t){return Xe.resolve([])}getNextCollectionGroupToUpdate(e){return Xe.resolve(null)}getMinOffset(e,t){return Xe.resolve(hu.min())}getMinOffsetFromCollectionGroup(e,t){return Xe.resolve(hu.min())}updateCollectionGroup(e,t,r){return Xe.resolve()}updateIndexEntries(e,t){return Xe.resolve()}}class qk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Di(hr.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Di(hr.comparator)).toArray()}}const Lw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},d3=41943040;class ha{static withCacheSize(e){return new ha(e,ha.DEFAULT_COLLECTION_PERCENTILE,ha.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}ha.DEFAULT_COLLECTION_PERCENTILE=10,ha.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ha.DEFAULT=new ha(d3,ha.DEFAULT_COLLECTION_PERCENTILE,ha.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ha.DISABLED=new ha(-1,0,0);class Nh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Nh(0)}static cr(){return new Nh(-1)}}const kw="LruGarbageCollector",Vk=1048576;function Pw([n,e],[t,r]){const i=An(n,t);return i===0?An(e,r):i}class Bk{constructor(e){this.Ir=e,this.buffer=new Di(Pw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Pw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Uk{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){mt(kw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Dh(t)?mt(kw,"Ignoring IndexedDB error during garbage collection: ",t):await Ph(t)}await this.Vr(3e5)}))}}class zk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Xe.resolve(Wg.ce);const r=new Bk(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(mt("LruGarbageCollector","Garbage collection skipped; disabled"),Xe.resolve(Lw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(mt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,c,d,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(mt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,c=Date.now(),this.nthSequenceNumber(e,i)))).next((y=>(r=y,d=Date.now(),this.removeTargets(e,r,t)))).next((y=>(a=y,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(f=Date.now(),Jd()<=Nn.DEBUG&&mt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${i} in `+(d-c)+`ms
	Removed ${a} targets in `+(h-d)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),Xe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:y}))))}}function Hk(n,e){return new zk(n,e)}class $k{constructor(){this.changes=new ld((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Xe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Gk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Wk{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Vf(r.mutation,i,ka.empty(),rr.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Sn()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Sn()){const i=Gu();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let c=Lf();return a.forEach(((d,h)=>{c=c.insert(d,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Gu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Sn())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,i){let a=pc();const c=qf(),d=(function(){return qf()})();return t.forEach(((h,f)=>{const p=r.get(f.key);i.has(f.key)&&(p===void 0||p.mutation instanceof Au)?a=a.insert(f.key,f):p!==void 0?(c.set(f.key,p.mutation.getFieldMask()),Vf(p.mutation,f,p.mutation.getFieldMask(),rr.now())):c.set(f.key,ka.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((f,p)=>c.set(f,p))),t.forEach(((f,p)=>d.set(f,new Gk(p,c.get(f)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=qf();let i=new Ur(((c,d)=>c-d)),a=Sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let p=r.get(h)||ka.empty();p=d.applyToLocalView(f,p),r.set(h,p);const y=(i.get(d.batchId)||Sn()).add(h);i=i.insert(d.batchId,y)}))})).next((()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),f=h.key,p=h.value,y=HA();p.forEach((N=>{if(!a.has(N)){const b=QA(t.get(N),r.get(N));b!==null&&y.set(N,b),a=a.add(N)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return Xe.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(c){return Pt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):Xe.resolve(Gu());let d=Kf,h=a;return c.next((f=>Xe.forEach(f,((p,y)=>(d<y.largestBatchId&&(d=y.largestBatchId),a.get(p)?Xe.resolve():this.remoteDocumentCache.getEntry(e,p).next((N=>{h=h.insert(p,N)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,h,f,Sn()))).next((p=>({batchId:d,changes:zA(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pt(t)).next((r=>{let i=Lf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let c=Lf();return this.indexManager.getCollectionParents(e,a).next((d=>Xe.forEach(d,(h=>{const f=(function(y,N){return new Mh(N,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((p=>{p.forEach(((y,N)=>{c=c.insert(y,N)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((c=>{a.forEach(((h,f)=>{const p=f.getKey();c.get(p)===null&&(c=c.insert(p,Xi.newInvalidDocument(p)))}));let d=Lf();return c.forEach(((h,f)=>{const p=a.get(h);p!==void 0&&Vf(p.mutation,f,ka.empty(),rr.now()),Qg(t,f)&&(d=d.insert(h,f))})),d}))}}class Yk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Xe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Ma(i.createTime)}})(t)),Xe.resolve()}getNamedQuery(e,t){return Xe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:Ok(i.bundledQuery),readTime:Ma(i.readTime)}})(t)),Xe.resolve()}}class Kk{constructor(){this.overlays=new Ur(Pt.comparator),this.qr=new Map}getOverlay(e,t){return Xe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Gu();return Xe.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),Xe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),Xe.resolve()}getOverlaysForCollection(e,t,r){const i=Gu(),a=t.length+1,c=new Pt(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const h=d.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>r&&i.set(h.getKey(),h)}return Xe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Ur(((f,p)=>f-p));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let p=a.get(f.largestBatchId);p===null&&(p=Gu(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const d=Gu(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,p)=>d.set(f,p))),!(d.size()>=i)););return Xe.resolve(d)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new mk(t,r));let a=this.qr.get(t);a===void 0&&(a=Sn(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class Qk{constructor(){this.sessionToken=ps.EMPTY_BYTE_STRING}getSessionToken(e){return Xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Xe.resolve()}}class ny{constructor(){this.Qr=new Di(Ki.$r),this.Ur=new Di(Ki.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ki(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ki(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Pt(new hr([])),r=new Ki(t,e),i=new Ki(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Pt(new hr([])),r=new Ki(t,e),i=new Ki(t,e+1);let a=Sn();return this.Ur.forEachInRange([r,i],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new Ki(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ki{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Pt.comparator(e.key,t.key)||An(e.Yr,t.Yr)}static Kr(e,t){return An(e.Yr,t.Yr)||Pt.comparator(e.key,t.key)}}class Xk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Di(Ki.$r)}checkEmpty(e){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new fk(a,t,r,i);this.mutationQueue.push(c);for(const d of i)this.Zr=this.Zr.add(new Ki(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Xe.resolve(c)}lookupMutationBatch(e,t){return Xe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return Xe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?G1:this.tr-1)}getAllMutationBatches(e){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ki(t,0),i=new Ki(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(c=>{const d=this.Xr(c.Yr);a.push(d)})),Xe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Di(An);return t.forEach((i=>{const a=new Ki(i,0),c=new Ki(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(d=>{r=r.add(d.Yr)}))})),Xe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Pt.isDocumentKey(a)||(a=a.child(""));const c=new Ki(new Pt(a),0);let d=new Di(An);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(d=d.add(h.Yr)),!0)}),c),Xe.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Pn(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Xe.forEach(t.mutations,(i=>{const a=new Ki(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ki(t,0),i=this.Zr.firstAfterOrEqual(r);return Xe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Xe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Jk{constructor(e){this.ri=e,this.docs=(function(){return new Ur(Pt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Xe.resolve(r?r.document.mutableCopy():Xi.newInvalidDocument(t))}getEntries(e,t){let r=pc();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Xi.newInvalidDocument(i))})),Xe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=pc();const c=t.path,d=new Pt(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||CL(TL(p),r)<=0||(i.has(p.key)||Qg(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return Xe.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Vt(9500)}ii(e,t){return Xe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Zk(this)}getSize(e){return Xe.resolve(this.size)}}class Zk extends $k{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),Xe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class e7{constructor(e){this.persistence=e,this.si=new ld((t=>K1(t)),Q1),this.lastRemoteSnapshotVersion=Wt.min(),this.highestTargetId=0,this.oi=0,this._i=new ny,this.targetCount=0,this.ai=Nh.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),Xe.resolve()}getLastRemoteSnapshotVersion(e){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Xe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Nh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Xe.resolve()}updateTargetData(e,t){return this.Pr(t),Xe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),Xe.waitFor(a).next((()=>i))}getTargetCount(e){return Xe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return Xe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Xe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((c=>{a.push(i.markPotentiallyOrphaned(e,c))})),Xe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Xe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return Xe.resolve(r)}containsKey(e,t){return Xe.resolve(this._i.containsKey(t))}}class h3{constructor(e,t){this.ui={},this.overlays={},this.ci=new Wg(0),this.li=!1,this.li=!0,this.hi=new Qk,this.referenceDelegate=e(this),this.Pi=new e7(this),this.indexManager=new Fk,this.remoteDocumentCache=(function(i){return new Jk(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Mk(t),this.Ii=new Yk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Kk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Xk(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){mt("MemoryPersistence","Starting transaction:",e);const i=new t7(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return Xe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class t7 extends RL{constructor(e){super(),this.currentSequenceNumber=e}}class ry{constructor(e){this.persistence=e,this.Ri=new ny,this.Vi=null}static mi(e){return new ry(e)}get fi(){if(this.Vi)return this.Vi;throw Vt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Xe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Xe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Xe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.fi,(r=>{const i=Pt.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,Wt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Xe.or([()=>Xe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class bg{constructor(e,t){this.persistence=e,this.pi=new ld((r=>PL(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=Hk(this,t)}static mi(e,t){return new bg(e,t)}Ei(){}di(e){return Xe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return Xe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?Xe.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(c=>this.br(e,c,t).next((d=>{d||(r++,a.removeEntry(c,Wt.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Xe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Xe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Xe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Xe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zp(e.data.value)),t}br(e,t,r){return Xe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return Xe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class iy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Sn(),i=Sn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new iy(e,t.fromCache,r,i)}}class n7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class r7{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return PC()?8:LL(Is())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new n7;return this.Ss(e,t,c).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Jd()<=Nn.DEBUG&&mt("QueryEngine","SDK will not create cache indexes for query:",Zd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Xe.resolve()):(Jd()<=Nn.DEBUG&&mt("QueryEngine","Query:",Zd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Jd()<=Nn.DEBUG&&mt("QueryEngine","The SDK decides to create cache indexes for query:",Zd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vl(t))):Xe.resolve())}ys(e,t){if(_w(t))return Xe.resolve(null);let r=vl(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Wv(t,null,"F"),r=vl(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const c=Sn(...a);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.Ds(t,d);return this.Cs(t,f,c,h.readTime)?this.ys(e,Wv(t,null,"F")):this.vs(e,f,t,h)}))))})))))}ws(e,t,r,i){return _w(t)||i.isEqual(Wt.min())?Xe.resolve(null):this.ps.getDocuments(e,r).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,r,i)?Xe.resolve(null):(Jd()<=Nn.DEBUG&&mt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zd(t)),this.vs(e,c,t,EL(i,Kf)).next((d=>d)))}))}Ds(e,t){let r=new Di(BA(e));return t.forEach(((i,a)=>{Qg(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Jd()<=Nn.DEBUG&&mt("QueryEngine","Using full collection scan to execute query:",Zd(t)),this.ps.getDocumentsMatchingQuery(e,t,hu.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}const sy="LocalStore",i7=3e8;class s7{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ur(An),this.xs=new ld((a=>K1(a)),Q1),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function a7(n,e,t,r){return new s7(n,e,t,r)}async function f3(n,e){const t=tn(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const c=[],d=[];let h=Sn();for(const f of i){c.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of a){d.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:d})))}))}))}function o7(n,e){const t=tn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,h,f,p){const y=f.batch,N=y.keys();let b=Xe.resolve();return N.forEach((j=>{b=b.next((()=>p.getEntry(h,j))).next((C=>{const R=f.docVersions.get(j);Pn(R!==null,48541),C.version.compareTo(R)<0&&(y.applyToRemoteDocument(C,f),C.isValidDocument()&&(C.setReadTime(f.commitVersion),p.addEntry(C)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(h,y)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let h=Sn();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(h=h.add(d.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function m3(n){const e=tn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function l7(n,e){const t=tn(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const d=[];e.targetChanges.forEach(((p,y)=>{const N=i.get(y);if(!N)return;d.push(t.Pi.removeMatchingKeys(a,p.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(a,p.addedDocuments,y))));let b=N.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(ps.EMPTY_BYTE_STRING,Wt.min()).withLastLimboFreeSnapshotVersion(Wt.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),i=i.insert(y,b),(function(C,R,I){return C.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=i7?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0})(N,b,p)&&d.push(t.Pi.updateTargetData(a,b))}));let h=pc(),f=Sn();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))})),d.push(c7(a,c,e.documentUpdates).next((p=>{h=p.ks,f=p.qs}))),!r.isEqual(Wt.min())){const p=t.Pi.getLastRemoteSnapshotVersion(a).next((y=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(p)}return Xe.waitFor(d).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,h,f))).next((()=>h))})).then((a=>(t.Ms=i,a)))}function c7(n,e,t){let r=Sn(),i=Sn();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let c=pc();return t.forEach(((d,h)=>{const f=a.get(d);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(d)),h.isNoDocument()&&h.version.isEqual(Wt.min())?(e.removeEntry(d,h.readTime),c=c.insert(d,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(d,h)):mt(sy,"Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",h.version)})),{ks:c,qs:i}}))}function u7(n,e){const t=tn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=G1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function d7(n,e){const t=tn(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,Xe.resolve(i)):t.Pi.allocateTargetId(r).next((c=>(i=new iu(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Xv(n,e,t){const r=tn(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Dh(c))throw c;mt(sy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Dw(n,e,t){const r=tn(n);let i=Wt.min(),a=Sn();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,f,p){const y=tn(h),N=y.xs.get(p);return N!==void 0?Xe.resolve(y.Ms.get(N)):y.Pi.getTargetData(f,p)})(r,c,vl(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((h=>{a=h}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:Wt.min(),t?a:Sn()))).next((d=>(h7(r,ZL(e),d),{documents:d,Qs:a})))))}function h7(n,e,t){let r=n.Os.get(e)||Wt.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class Mw{constructor(){this.activeTargetIds=sk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f7{constructor(){this.Mo=new Mw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class m7{Oo(e){}shutdown(){}}const Ow="ConnectivityMonitor";class Fw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){mt(Ow,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){mt(Ow,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Sp=null;function Jv(){return Sp===null?Sp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sp++,"0x"+Sp.toString(16)}const Wx="RestConnection",p7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class g7{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===fg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const c=Jv(),d=this.zo(e,t.toUriEncodedString());mt(Wx,`Sending RPC '${e}' ${c}:`,d,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,a);const{host:f}=new URL(d),p=Ih(f);return this.Jo(e,d,h,r,p).then((y=>(mt(Wx,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw yh(Wx,`RPC '${e}' ${c} failed with error: `,y,"url: ",d,"request:",r),y}))}Ho(e,t,r,i,a,c){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=p7[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class x7{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const As="WebChannelConnection";class v7 extends g7{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const c=Jv();return new Promise(((d,h)=>{const f=new mA;f.setWithCredentials(!0),f.listenOnce(pA.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Up.NO_ERROR:const y=f.getResponseJson();mt(As,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),d(y);break;case Up.TIMEOUT:mt(As,`RPC '${e}' ${c} timed out`),h(new ct(Ge.DEADLINE_EXCEEDED,"Request time out"));break;case Up.HTTP_ERROR:const N=f.getStatus();if(mt(As,`RPC '${e}' ${c} failed with status:`,N,"response text:",f.getResponseText()),N>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const j=b?.error;if(j&&j.status&&j.message){const C=(function(I){const B=I.toLowerCase().replace(/_/g,"-");return Object.values(Ge).indexOf(B)>=0?B:Ge.UNKNOWN})(j.status);h(new ct(C,j.message))}else h(new ct(Ge.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new ct(Ge.UNAVAILABLE,"Connection failed."));break;default:Vt(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{mt(As,`RPC '${e}' ${c} completed.`)}}));const p=JSON.stringify(i);mt(As,`RPC '${e}' ${c} sending request:`,i),f.send(t,"POST",p,r,15)}))}T_(e,t,r){const i=Jv(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=vA(),d=xA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const p=a.join("");mt(As,`Creating RPC '${e}' stream ${i}: ${p}`,h);const y=c.createWebChannel(p,h);this.I_(y);let N=!1,b=!1;const j=new x7({Yo:R=>{b?mt(As,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(N||(mt(As,`Opening RPC '${e}' stream ${i} transport.`),y.open(),N=!0),mt(As,`RPC '${e}' stream ${i} sending:`,R),y.send(R))},Zo:()=>y.close()}),C=(R,I,B)=>{R.listen(I,(z=>{try{B(z)}catch(H){setTimeout((()=>{throw H}),0)}}))};return C(y,Rf.EventType.OPEN,(()=>{b||(mt(As,`RPC '${e}' stream ${i} transport opened.`),j.o_())})),C(y,Rf.EventType.CLOSE,(()=>{b||(b=!0,mt(As,`RPC '${e}' stream ${i} transport closed`),j.a_(),this.E_(y))})),C(y,Rf.EventType.ERROR,(R=>{b||(b=!0,yh(As,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),j.a_(new ct(Ge.UNAVAILABLE,"The operation could not be completed")))})),C(y,Rf.EventType.MESSAGE,(R=>{if(!b){const I=R.data[0];Pn(!!I,16349);const B=I,z=B?.error||B[0]?.error;if(z){mt(As,`RPC '${e}' stream ${i} received error:`,z);const H=z.status;let he=(function(D){const k=vi[D];if(k!==void 0)return e3(k)})(H),re=z.message;he===void 0&&(he=Ge.INTERNAL,re="Unknown error status: "+H+" with message "+z.message),b=!0,j.a_(new ct(he,re)),y.close()}else mt(As,`RPC '${e}' stream ${i} received:`,I),j.u_(I)}})),C(d,gA.STAT_EVENT,(R=>{R.stat===Vv.PROXY?mt(As,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Vv.NOPROXY&&mt(As,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Yx(){return typeof document<"u"?document:null}function t0(n){return new _k(n,!0)}class ay{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&mt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const qw="PersistentStream";class p3{constructor(e,t,r,i,a,c,d,h){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ay(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ge.RESOURCE_EXHAUSTED?(mc(t.toString()),mc("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new ct(Ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return mt(qw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(mt(qw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class y7 extends p3{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=jk(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Wt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Wt.min():c.readTime?Ma(c.readTime):Wt.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Qv(this.serializer),t.addTarget=(function(a,c){let d;const h=c.target;if(d=$v(h)?{documents:Tk(a,h)}:{query:Ck(a,h).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=r3(a,c.resumeToken);const f=Yv(a,c.expectedCount);f!==null&&(d.expectedCount=f)}else if(c.snapshotVersion.compareTo(Wt.min())>0){d.readTime=vg(a,c.snapshotVersion.toTimestamp());const f=Yv(a,c.expectedCount);f!==null&&(d.expectedCount=f)}return d})(this.serializer,e);const r=Rk(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Qv(this.serializer),t.removeTarget=e,this.q_(t)}}class b7 extends p3{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Pn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Ek(e.writeResults,e.commitTime),r=Ma(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Qv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>o3(this.serializer,r)))};this.q_(t)}}class w7{}class _7 extends w7{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ct(Ge.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,Kv(t,r),i,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ct(Ge.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Kv(t,r),i,c,d,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ct(Ge.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class N7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mc(t),this.aa=!1):mt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Zu="RemoteStore";class A7{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{cd(this)&&(mt(Zu,"Restarting streams for network reachability change."),await(async function(h){const f=tn(h);f.Ea.add(4),await ym(f),f.Ra.set("Unknown"),f.Ea.delete(4),await n0(f)})(this))}))})),this.Ra=new N7(r,i)}}async function n0(n){if(cd(n))for(const e of n.da)await e(!0)}async function ym(n){for(const e of n.da)await e(!1)}function g3(n,e){const t=tn(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),uy(t)?cy(t):Oh(t).O_()&&ly(t,e))}function oy(n,e){const t=tn(n),r=Oh(t);t.Ia.delete(e),r.O_()&&x3(t,e),t.Ia.size===0&&(r.O_()?r.L_():cd(t)&&t.Ra.set("Unknown"))}function ly(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Wt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Oh(n).Y_(e)}function x3(n,e){n.Va.Ue(e),Oh(n).Z_(e)}function cy(n){n.Va=new vk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Oh(n).start(),n.Ra.ua()}function uy(n){return cd(n)&&!Oh(n).x_()&&n.Ia.size>0}function cd(n){return tn(n).Ea.size===0}function v3(n){n.Va=void 0}async function S7(n){n.Ra.set("Online")}async function j7(n){n.Ia.forEach(((e,t)=>{ly(n,e)}))}async function E7(n,e){v3(n),uy(n)?(n.Ra.ha(e),cy(n)):n.Ra.set("Unknown")}async function T7(n,e,t){if(n.Ra.set("Online"),e instanceof n3&&e.state===2&&e.cause)try{await(async function(i,a){const c=a.cause;for(const d of a.targetIds)i.Ia.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.Ia.delete(d),i.Va.removeTarget(d))})(n,e)}catch(r){mt(Zu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wg(n,r)}else if(e instanceof Gp?n.Va.Ze(e):e instanceof t3?n.Va.st(e):n.Va.tt(e),!t.isEqual(Wt.min()))try{const r=await m3(n.localStore);t.compareTo(r)>=0&&await(function(a,c){const d=a.Va.Tt(c);return d.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=a.Ia.get(f);p&&a.Ia.set(f,p.withResumeToken(h.resumeToken,c))}})),d.targetMismatches.forEach(((h,f)=>{const p=a.Ia.get(h);if(!p)return;a.Ia.set(h,p.withResumeToken(ps.EMPTY_BYTE_STRING,p.snapshotVersion)),x3(a,h);const y=new iu(p.target,h,f,p.sequenceNumber);ly(a,y)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){mt(Zu,"Failed to raise snapshot:",r),await wg(n,r)}}async function wg(n,e,t){if(!Dh(e))throw e;n.Ea.add(1),await ym(n),n.Ra.set("Offline"),t||(t=()=>m3(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{mt(Zu,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await n0(n)}))}function y3(n,e){return e().catch((t=>wg(n,t,e)))}async function r0(n){const e=tn(n),t=gu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:G1;for(;C7(e);)try{const i=await u7(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,I7(e,i)}catch(i){await wg(e,i)}b3(e)&&w3(e)}function C7(n){return cd(n)&&n.Ta.length<10}function I7(n,e){n.Ta.push(e);const t=gu(n);t.O_()&&t.X_&&t.ea(e.mutations)}function b3(n){return cd(n)&&!gu(n).x_()&&n.Ta.length>0}function w3(n){gu(n).start()}async function R7(n){gu(n).ra()}async function L7(n){const e=gu(n);for(const t of n.Ta)e.ea(t.mutations)}async function k7(n,e,t){const r=n.Ta.shift(),i=Z1.from(r,e,t);await y3(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await r0(n)}async function P7(n,e){e&&gu(n).X_&&await(async function(r,i){if((function(c){return ZA(c)&&c!==Ge.ABORTED})(i.code)){const a=r.Ta.shift();gu(r).B_(),await y3(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await r0(r)}})(n,e),b3(n)&&w3(n)}async function Vw(n,e){const t=tn(n);t.asyncQueue.verifyOperationInProgress(),mt(Zu,"RemoteStore received new credentials");const r=cd(t);t.Ea.add(3),await ym(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await n0(t)}async function D7(n,e){const t=tn(n);e?(t.Ea.delete(2),await n0(t)):e||(t.Ea.add(2),await ym(t),t.Ra.set("Unknown"))}function Oh(n){return n.ma||(n.ma=(function(t,r,i){const a=tn(t);return a.sa(),new y7(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:S7.bind(null,n),t_:j7.bind(null,n),r_:E7.bind(null,n),H_:T7.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),uy(n)?cy(n):n.Ra.set("Unknown")):(await n.ma.stop(),v3(n))}))),n.ma}function gu(n){return n.fa||(n.fa=(function(t,r,i){const a=tn(t);return a.sa(),new b7(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:R7.bind(null,n),r_:P7.bind(null,n),ta:L7.bind(null,n),na:k7.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await r0(n)):(await n.fa.stop(),n.Ta.length>0&&(mt(Zu,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class dy{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new xl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,d=new dy(e,t,c,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(Ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hy(n,e){if(mc("AsyncQueue",`${e}: ${n}`),Dh(n))return new ct(Ge.UNAVAILABLE,`${e}: ${n}`);throw n}class uh{static emptySet(e){return new uh(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pt.comparator(t.key,r.key):(t,r)=>Pt.comparator(t.key,r.key),this.keyedMap=Lf(),this.sortedSet=new Ur(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof uh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new uh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Bw{constructor(){this.ga=new Ur(Pt.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Vt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ah{constructor(e,t,r,i,a,c,d,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Ah(e,t,uh.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class M7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class O7{constructor(){this.queries=Uw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=tn(t),a=i.queries;i.queries=Uw(),a.forEach(((c,d)=>{for(const h of d.Sa)h.onError(r)}))})(this,new ct(Ge.ABORTED,"Firestore shutting down"))}}function Uw(){return new ld((n=>VA(n)),Kg)}async function _3(n,e){const t=tn(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new M7,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const d=hy(c,`Initialization of query '${Zd(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&fy(t)}async function N3(n,e){const t=tn(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function F7(n,e){const t=tn(n);let r=!1;for(const i of e){const a=i.query,c=t.queries.get(a);if(c){for(const d of c.Sa)d.Fa(i)&&(r=!0);c.wa=i}}r&&fy(t)}function q7(n,e,t){const r=tn(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function fy(n){n.Ca.forEach((e=>{e.next()}))}var Zv,zw;(zw=Zv||(Zv={})).Ma="default",zw.Cache="cache";class A3{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ah(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ah.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zv.Cache}}class S3{constructor(e){this.key=e}}class j3{constructor(e){this.key=e}}class V7{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Sn(),this.mutatedKeys=Sn(),this.eu=BA(e),this.tu=new uh(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Bw,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,y)=>{const N=i.get(p),b=Qg(this.query,y)?y:null,j=!!N&&this.mutatedKeys.has(N.key),C=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let R=!1;N&&b?N.data.isEqual(b.data)?j!==C&&(r.track({type:3,doc:b}),R=!0):this.su(N,b)||(r.track({type:2,doc:b}),R=!0,(h&&this.eu(b,h)>0||f&&this.eu(b,f)<0)&&(d=!0)):!N&&b?(r.track({type:0,doc:b}),R=!0):N&&!b&&(r.track({type:1,doc:N}),R=!0,(h||f)&&(d=!0)),R&&(b?(c=c.add(b),a=C?a.add(p):a.delete(p)):(c=c.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{tu:c,iu:r,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((p,y)=>(function(b,j){const C=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vt(20277,{Rt:R})}};return C(b)-C(j)})(p.type,y.type)||this.eu(p.doc,y.doc))),this.ou(r),i=i??!1;const d=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,f=h!==this.Za;return this.Za=h,c.length!==0||f?{snapshot:new Ah(this.query,e.tu,a,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Bw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Sn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new j3(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new S3(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Sn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ah.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const my="SyncEngine";class B7{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class U7{constructor(e){this.key=e,this.hu=!1}}class z7{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ld((d=>VA(d)),Kg),this.Iu=new Map,this.Eu=new Set,this.du=new Ur(Pt.comparator),this.Au=new Map,this.Ru=new ny,this.Vu={},this.mu=new Map,this.fu=Nh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function H7(n,e,t=!0){const r=L3(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await E3(r,e,t,!0),i}async function $7(n,e){const t=L3(n);await E3(t,e,!0,!1)}async function E3(n,e,t,r){const i=await d7(n.localStore,vl(e)),a=i.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await G7(n,e,a,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&g3(n.remoteStore,i),d}async function G7(n,e,t,r,i){n.pu=(y,N,b)=>(async function(C,R,I,B){let z=R.view.ru(I);z.Cs&&(z=await Dw(C.localStore,R.query,!1).then((({documents:V})=>R.view.ru(V,z))));const H=B&&B.targetChanges.get(R.targetId),he=B&&B.targetMismatches.get(R.targetId)!=null,re=R.view.applyChanges(z,C.isPrimaryClient,H,he);return $w(C,R.targetId,re.au),re.snapshot})(n,y,N,b);const a=await Dw(n.localStore,e,!0),c=new V7(e,a.Qs),d=c.ru(a.documents),h=vm.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=c.applyChanges(d,n.isPrimaryClient,h);$w(n,t,f.au);const p=new B7(e,t,c);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function W7(n,e,t){const r=tn(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((c=>!Kg(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Xv(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&oy(r.remoteStore,i.targetId),e1(r,i.targetId)})).catch(Ph)):(e1(r,i.targetId),await Xv(r.localStore,i.targetId,!0))}async function Y7(n,e){const t=tn(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),oy(t.remoteStore,r.targetId))}async function K7(n,e,t){const r=nP(n);try{const i=await(function(c,d){const h=tn(c),f=rr.now(),p=d.reduce(((b,j)=>b.add(j.key)),Sn());let y,N;return h.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let j=pc(),C=Sn();return h.Ns.getEntries(b,p).next((R=>{j=R,j.forEach(((I,B)=>{B.isValidDocument()||(C=C.add(I))}))})).next((()=>h.localDocuments.getOverlayedDocuments(b,j))).next((R=>{y=R;const I=[];for(const B of d){const z=hk(B,y.get(B.key).overlayedDocument);z!=null&&I.push(new Au(B.key,z,LA(z.value.mapValue),ms.exists(!0)))}return h.mutationQueue.addMutationBatch(b,f,I,d)})).next((R=>{N=R;const I=R.applyToLocalDocumentSet(y,C);return h.documentOverlayCache.saveOverlays(b,R.batchId,I)}))})).then((()=>({batchId:N.batchId,changes:zA(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,d,h){let f=c.Vu[c.currentUser.toKey()];f||(f=new Ur(An)),f=f.insert(d,h),c.Vu[c.currentUser.toKey()]=f})(r,i.batchId,t),await bm(r,i.changes),await r0(r.remoteStore)}catch(i){const a=hy(i,"Failed to persist write");t.reject(a)}}async function T3(n,e){const t=tn(n);try{const r=await l7(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const c=t.Au.get(a);c&&(Pn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?Pn(c.hu,14607):i.removedDocuments.size>0&&(Pn(c.hu,42227),c.hu=!1))})),await bm(t,r,e)}catch(r){await Ph(r)}}function Hw(n,e,t){const r=tn(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,c)=>{const d=c.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(c,d){const h=tn(c);h.onlineState=d;let f=!1;h.queries.forEach(((p,y)=>{for(const N of y.Sa)N.va(d)&&(f=!0)})),f&&fy(h)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Q7(n,e,t){const r=tn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let c=new Ur(Pt.comparator);c=c.insert(a,Xi.newNoDocument(a,Wt.min()));const d=Sn().add(a),h=new e0(Wt.min(),new Map,new Ur(An),c,d);await T3(r,h),r.du=r.du.remove(a),r.Au.delete(e),py(r)}else await Xv(r.localStore,e,!1).then((()=>e1(r,e,t))).catch(Ph)}async function X7(n,e){const t=tn(n),r=e.batch.batchId;try{const i=await o7(t.localStore,e);I3(t,r,null),C3(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await bm(t,i)}catch(i){await Ph(i)}}async function J7(n,e,t){const r=tn(n);try{const i=await(function(c,d){const h=tn(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return h.mutationQueue.lookupMutationBatch(f,d).next((y=>(Pn(y!==null,37113),p=y.keys(),h.mutationQueue.removeMutationBatch(f,y)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>h.localDocuments.getDocuments(f,p)))}))})(r.localStore,e);I3(r,e,t),C3(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await bm(r,i)}catch(i){await Ph(i)}}function C3(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function I3(n,e,t){const r=tn(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function e1(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||R3(n,r)}))}function R3(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(oy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),py(n))}function $w(n,e,t){for(const r of t)r instanceof S3?(n.Ru.addReference(r.key,e),Z7(n,r)):r instanceof j3?(mt(my,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||R3(n,r.key)):Vt(19791,{wu:r})}function Z7(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(mt(my,"New document in limbo: "+t),n.Eu.add(r),py(n))}function py(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Pt(hr.fromString(e)),r=n.fu.next();n.Au.set(r,new U7(t)),n.du=n.du.insert(t,r),g3(n.remoteStore,new iu(vl(X1(t.path)),r,"TargetPurposeLimboResolution",Wg.ce))}}async function bm(n,e,t){const r=tn(n),i=[],a=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,h)=>{c.push(r.pu(h,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const p=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,p?"current":"not-current")}if(f){i.push(f);const p=iy.As(h.targetId,f);a.push(p)}})))})),await Promise.all(c),r.Pu.H_(i),await(async function(h,f){const p=tn(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>Xe.forEach(f,(N=>Xe.forEach(N.Es,(b=>p.persistence.referenceDelegate.addReference(y,N.targetId,b))).next((()=>Xe.forEach(N.ds,(b=>p.persistence.referenceDelegate.removeReference(y,N.targetId,b)))))))))}catch(y){if(!Dh(y))throw y;mt(sy,"Failed to update sequence numbers: "+y)}for(const y of f){const N=y.targetId;if(!y.fromCache){const b=p.Ms.get(N),j=b.snapshotVersion,C=b.withLastLimboFreeSnapshotVersion(j);p.Ms=p.Ms.insert(N,C)}}})(r.localStore,a))}async function eP(n,e){const t=tn(n);if(!t.currentUser.isEqual(e)){mt(my,"User change. New user:",e.toKey());const r=await f3(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((d=>{d.forEach((h=>{h.reject(new ct(Ge.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bm(t,r.Ls)}}function tP(n,e){const t=tn(n),r=t.Au.get(e);if(r&&r.hu)return Sn().add(r.key);{let i=Sn();const a=t.Iu.get(e);if(!a)return i;for(const c of a){const d=t.Tu.get(c);i=i.unionWith(d.view.nu)}return i}}function L3(n){const e=tn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=T3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q7.bind(null,e),e.Pu.H_=F7.bind(null,e.eventManager),e.Pu.yu=q7.bind(null,e.eventManager),e}function nP(n){const e=tn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=J7.bind(null,e),e}class _g{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=t0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return a7(this.persistence,new r7,e.initialUser,this.serializer)}Cu(e){return new h3(ry.mi,this.serializer)}Du(e){return new f7}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_g.provider={build:()=>new _g};class rP extends _g{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Pn(this.persistence.referenceDelegate instanceof bg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Uk(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ha.withCacheSize(this.cacheSizeBytes):ha.DEFAULT;return new h3((r=>bg.mi(r,t)),this.serializer)}}class t1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eP.bind(null,this.syncEngine),await D7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new O7})()}createDatastore(e){const t=t0(e.databaseInfo.databaseId),r=(function(a){return new v7(a)})(e.databaseInfo);return(function(a,c,d,h){return new _7(a,c,d,h)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,c,d){return new A7(r,i,a,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Hw(this.syncEngine,t,0)),(function(){return Fw.v()?new Fw:new m7})())}createSyncEngine(e,t){return(function(i,a,c,d,h,f,p){const y=new z7(i,a,c,d,h,f);return p&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=tn(t);mt(Zu,"RemoteStore shutting down."),r.Ea.add(5),await ym(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}t1.provider={build:()=>new t1};class k3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mc("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class iP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ct(Ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,a){const c=tn(i),d={documents:a.map((y=>yg(c.serializer,y)))},h=await c.Ho("BatchGetDocuments",c.serializer.databaseId,hr.emptyPath(),d,a.length),f=new Map;h.forEach((y=>{const N=Sk(c.serializer,y);f.set(N.key.toString(),N)}));const p=[];return a.forEach((y=>{const N=f.get(y.toString());Pn(!!N,55234,{key:y}),p.push(N)})),p})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Pt.fromPath(r);this.mutations.push(new JA(i,this.precondition(i)))})),await(async function(r,i){const a=tn(r),c={writes:i.map((d=>o3(a.serializer,d)))};await a.Go("Commit",a.serializer.databaseId,hr.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Vt(50498,{Gu:e.constructor.name});t=Wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ct(Ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Wt.min())?ms.exists(!1):ms.updateTime(t):ms.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Wt.min()))throw new ct(Ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ms.updateTime(t)}return ms.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class sP{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new ay(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new iP(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!gm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!ZA(t)}return!1}}const xu="FirestoreClient";class aP{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Cs.UNAUTHENTICATED,this.clientId=$1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async c=>{mt(xu,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(mt(xu,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=hy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Kx(n,e){n.asyncQueue.verifyOperationInProgress(),mt(xu,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await f3(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Gw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await oP(n);mt(xu,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Vw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Vw(e.remoteStore,i))),n._onlineComponents=e}async function oP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){mt(xu,"Using user provided OfflineComponentProvider");try{await Kx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ge.FAILED_PRECONDITION||i.code===Ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;yh("Error using user provided cache. Falling back to memory cache: "+t),await Kx(n,new _g)}}else mt(xu,"Using default OfflineComponentProvider"),await Kx(n,new rP(void 0));return n._offlineComponents}async function gy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(mt(xu,"Using user provided OnlineComponentProvider"),await Gw(n,n._uninitializedComponentsProvider._online)):(mt(xu,"Using default OnlineComponentProvider"),await Gw(n,new t1))),n._onlineComponents}function lP(n){return gy(n).then((e=>e.syncEngine))}function cP(n){return gy(n).then((e=>e.datastore))}async function P3(n){const e=await gy(n),t=e.eventManager;return t.onListen=H7.bind(null,e.syncEngine),t.onUnlisten=W7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Y7.bind(null,e.syncEngine),t}function uP(n,e,t={}){const r=new xl;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,h,f){const p=new k3({next:N=>{p.Nu(),c.enqueueAndForget((()=>N3(a,y)));const b=N.docs.has(d);!b&&N.fromCache?f.reject(new ct(Ge.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&N.fromCache&&h&&h.source==="server"?f.reject(new ct(Ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(N)},error:N=>f.reject(N)}),y=new A3(X1(d.path),p,{includeMetadataChanges:!0,qa:!0});return _3(a,y)})(await P3(n),n.asyncQueue,e,t,r))),r.promise}function dP(n,e,t={}){const r=new xl;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,h,f){const p=new k3({next:N=>{p.Nu(),c.enqueueAndForget((()=>N3(a,y))),N.fromCache&&h.source==="server"?f.reject(new ct(Ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(N)},error:N=>f.reject(N)}),y=new A3(d,p,{includeMetadataChanges:!0,qa:!0});return _3(a,y)})(await P3(n),n.asyncQueue,e,t,r))),r.promise}function D3(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Ww=new Map;const M3="firestore.googleapis.com",Yw=!0;class Kw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ct(Ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=M3,this.ssl=Yw}else this.host=e.host,this.ssl=e.ssl??Yw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=d3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vk)throw new ct(Ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=D3(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ct(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ct(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ct(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class i0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct(Ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ct(Ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new gL;switch(r.type){case"firstParty":return new bL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ct(Ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Ww.get(t);r&&(mt("ComponentProvider","Removing Datastore"),Ww.delete(t),r.terminate())})(this),Promise.resolve()}}function hP(n,e,t,r={}){n=lo(n,i0);const i=Ih(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;i&&(_4(`https://${d}`),N4("Firestore",!0)),a.host!==M3&&a.host!==d&&yh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...a,host:d,ssl:i,emulatorOptions:r};if(!du(h,c)&&(n._setSettings(h),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Cs.MOCK_USER;else{f=jC(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ct(Ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Cs(y)}n._authCredentials=new xL(new bA(f,p))}}class ud{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ud(this.firestore,e,this._query)}}class Zr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zr(this.firestore,e,this._key)}toJSON(){return{type:Zr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(pm(t,Zr._jsonSchema))return new Zr(e,r||null,new Pt(hr.fromString(t.referencePath)))}}Zr._jsonSchemaVersion="firestore/documentReference/1.0",Zr._jsonSchema={type:bi("string",Zr._jsonSchemaVersion),referencePath:bi("string")};class cu extends ud{constructor(e,t,r){super(e,t,X1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zr(this.firestore,null,new Pt(e))}withConverter(e){return new cu(this.firestore,e,this._path)}}function Hn(n,e,...t){if(n=Pr(n),wA("collection","path",e),n instanceof i0){const r=hr.fromString(e,...t);return lw(r),new cu(n,null,r)}{if(!(n instanceof Zr||n instanceof cu))throw new ct(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hr.fromString(e,...t));return lw(r),new cu(n.firestore,null,r)}}function Tn(n,e,...t){if(n=Pr(n),arguments.length===1&&(e=$1.newId()),wA("doc","path",e),n instanceof i0){const r=hr.fromString(e,...t);return ow(r),new Zr(n,null,new Pt(r))}{if(!(n instanceof Zr||n instanceof cu))throw new ct(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hr.fromString(e,...t));return ow(r),new Zr(n.firestore,n instanceof cu?n.converter:null,new Pt(r))}}const Qw="AsyncQueue";class Xw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ay(this,"async_queue_retry"),this._c=()=>{const r=Yx();r&&mt(Qw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Yx();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Yx();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new xl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Dh(e))throw e;mt(Qw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,mc("INTERNAL UNHANDLED ERROR: ",Jw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=dy.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Vt(47125,{Pc:Jw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Jw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Su extends i0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Xw,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xw(e),this._firestoreClient=void 0,await e}}}function fP(n,e){const t=typeof n=="object"?n:D1(),r=typeof n=="string"?n:fg,i=ad(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=AC("firestore");a&&hP(i,...a)}return i}function s0(n){if(n._terminated)throw new ct(Ge.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mP(n),n._firestoreClient}function mP(n){const e=n._freezeSettings(),t=(function(i,a,c,d){return new OL(i,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,D3(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new aP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}class La{constructor(e){this._byteString=e}static fromBase64String(e){try{return new La(ps.fromBase64String(e))}catch(t){throw new ct(Ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new La(ps.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:La._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pm(e,La._jsonSchema))return La.fromBase64String(e.bytes)}}La._jsonSchemaVersion="firestore/bytes/1.0",La._jsonSchema={type:bi("string",La._jsonSchemaVersion),bytes:bi("string")};class wm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ct(Ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xy{constructor(e){this._methodName=e}}class yl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ct(Ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ct(Ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return An(this._lat,e._lat)||An(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yl._jsonSchemaVersion}}static fromJSON(e){if(pm(e,yl._jsonSchema))return new yl(e.latitude,e.longitude)}}yl._jsonSchemaVersion="firestore/geoPoint/1.0",yl._jsonSchema={type:bi("string",yl._jsonSchemaVersion),latitude:bi("number"),longitude:bi("number")};class bl{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pm(e,bl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new bl(e.vectorValues);throw new ct(Ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bl._jsonSchemaVersion="firestore/vectorValue/1.0",bl._jsonSchema={type:bi("string",bl._jsonSchemaVersion),vectorValues:bi("object")};const pP=/^__.*__$/;class gP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Au(e,this.data,this.fieldMask,t,this.fieldTransforms):new xm(e,this.data,t,this.fieldTransforms)}}class O3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Au(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function F3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vt(40011,{Ac:n})}}class vy{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ng(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(F3(this.Ac)&&pP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||t0(e)}Cc(e,t,r,i=!1){return new vy({Ac:e,methodName:t,Dc:r,path:fs.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _m(n){const e=n._freezeSettings(),t=t0(n._databaseId);return new xP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yy(n,e,t,r,i,a={}){const c=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);by("Data must be an object, but it was:",c,r);const d=B3(r,c);let h,f;if(a.merge)h=new ka(c.fieldMask),f=c.fieldTransforms;else if(a.mergeFields){const p=[];for(const y of a.mergeFields){const N=n1(e,y,t);if(!c.contains(N))throw new ct(Ge.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);z3(p,N)||p.push(N)}h=new ka(p),f=c.fieldTransforms.filter((y=>h.covers(y.field)))}else h=null,f=c.fieldTransforms;return new gP(new Us(d),h,f)}class a0 extends xy{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof a0}}function q3(n,e,t,r){const i=n.Cc(1,e,t);by("Data must be an object, but it was:",i,r);const a=[],c=Us.empty();Nu(r,((h,f)=>{const p=wy(e,h,t);f=Pr(f);const y=i.yc(p);if(f instanceof a0)a.push(p);else{const N=Nm(f,y);N!=null&&(a.push(p),c.set(p,N))}}));const d=new ka(a);return new O3(c,d,i.fieldTransforms)}function V3(n,e,t,r,i,a){const c=n.Cc(1,e,t),d=[n1(e,r,t)],h=[i];if(a.length%2!=0)throw new ct(Ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)d.push(n1(e,a[N])),h.push(a[N+1]);const f=[],p=Us.empty();for(let N=d.length-1;N>=0;--N)if(!z3(f,d[N])){const b=d[N];let j=h[N];j=Pr(j);const C=c.yc(b);if(j instanceof a0)f.push(b);else{const R=Nm(j,C);R!=null&&(f.push(b),p.set(b,R))}}const y=new ka(f);return new O3(p,y,c.fieldTransforms)}function vP(n,e,t,r=!1){return Nm(t,n.Cc(r?4:3,e))}function Nm(n,e){if(U3(n=Pr(n)))return by("Unsupported field value:",e,n),B3(n,e);if(n instanceof xy)return(function(r,i){if(!F3(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let c=0;for(const d of r){let h=Nm(d,i.wc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=Pr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ak(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=rr.fromDate(r);return{timestampValue:vg(i.serializer,a)}}if(r instanceof rr){const a=new rr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vg(i.serializer,a)}}if(r instanceof yl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof La)return{bytesValue:r3(i.serializer,r._byteString)};if(r instanceof Zr){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ty(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bl)return(function(c,d){return{mapValue:{fields:{[IA]:{stringValue:RA},[mg]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw d.Sc("VectorValues must only contain numeric values.");return J1(d.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Gg(r)}`)})(n,e)}function B3(n,e){const t={};return AA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nu(n,((r,i)=>{const a=Nm(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function U3(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rr||n instanceof yl||n instanceof La||n instanceof Zr||n instanceof xy||n instanceof bl)}function by(n,e,t){if(!U3(t)||!_A(t)){const r=Gg(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function n1(n,e,t){if((e=Pr(e))instanceof wm)return e._internalPath;if(typeof e=="string")return wy(n,e);throw Ng("Field path arguments must be of type string or ",n,!1,void 0,t)}const yP=new RegExp("[~\\*/\\[\\]]");function wy(n,e,t){if(e.search(yP)>=0)throw Ng(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wm(...e.split("."))._internalPath}catch{throw Ng(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ng(n,e,t,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new ct(Ge.INVALID_ARGUMENT,d+n+h)}function z3(n,e){return n.some((t=>t.isEqual(e)))}class Ag{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Zr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(o0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class bP extends Ag{data(){return super.data()}}function o0(n,e){return typeof e=="string"?wy(n,e):e instanceof wm?e._internalPath:e._delegate._internalPath}function wP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ct(Ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _y{}class H3 extends _y{}function Pa(n,e,...t){let r=[];e instanceof _y&&r.push(e),r=r.concat(t),(function(a){const c=a.filter((h=>h instanceof Ny)).length,d=a.filter((h=>h instanceof l0)).length;if(c>1||c>0&&d>0)throw new ct(Ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class l0 extends H3{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new l0(e,t,r)}_apply(e){const t=this._parse(e);return $3(e._query,t),new ud(e.firestore,e.converter,Gv(e._query,t))}_parse(e){const t=_m(e.firestore);return(function(a,c,d,h,f,p,y){let N;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ct(Ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){e_(y,p);const j=[];for(const C of y)j.push(Zw(h,a,C));N={arrayValue:{values:j}}}else N=Zw(h,a,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||e_(y,p),N=vP(d,c,y,p==="in"||p==="not-in");return yi.create(f,p,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function tr(n,e,t){const r=e,i=o0("where",n);return l0._create(i,r,t)}class Ny extends _y{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ny(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Oo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let c=i;const d=a.getFlattenedFilters();for(const h of d)$3(c,h),c=Gv(c,h)})(e._query,t),new ud(e.firestore,e.converter,Gv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ay extends H3{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ay(e,t)}_apply(e){const t=(function(i,a,c){if(i.startAt!==null)throw new ct(Ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ct(Ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zf(a,c)})(e._query,this._field,this._direction);return new ud(e.firestore,e.converter,(function(i,a){const c=i.explicitOrderBy.concat([a]);return new Mh(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function Sg(n,e="asc"){const t=e,r=o0("orderBy",n);return Ay._create(r,t)}function Zw(n,e,t){if(typeof(t=Pr(t))=="string"){if(t==="")throw new ct(Ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qA(e)&&t.indexOf("/")!==-1)throw new ct(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(hr.fromString(t));if(!Pt.isDocumentKey(r))throw new ct(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gw(n,new Pt(r))}if(t instanceof Zr)return gw(n,t._key);throw new ct(Ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gg(t)}.`)}function e_(n,e){if(!Array.isArray(n)||n.length===0)throw new ct(Ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $3(n,e){const t=(function(i,a){for(const c of i)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ct(Ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ct(Ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class G3{convertValue(e,t="none"){switch(pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Vt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Nu(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[mg].arrayValue?.values?.map((r=>si(r.doubleValue)));return new bl(t)}convertGeoPoint(e){return new yl(si(e.latitude),si(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qf(e));default:return null}}convertTimestamp(e){const t=fu(e);return new rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=hr.fromString(e);Pn(u3(r),9688,{name:e});const i=new Xf(r.get(1),r.get(3)),a=new Pt(r.popFirst(5));return i.isEqual(t)||mc(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Sy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class _P extends G3{constructor(e){super(),this.firestore=e}convertBytes(e){return new La(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zr(this.firestore,null,t)}}class sh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uu extends Ag{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(o0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(Ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=uu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}uu._jsonSchemaVersion="firestore/documentSnapshot/1.0",uu._jsonSchema={type:bi("string",uu._jsonSchemaVersion),bundleSource:bi("string","DocumentSnapshot"),bundleName:bi("string"),bundle:bi("string")};class Wp extends uu{data(e={}){return super.data(e)}}class dh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new sh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Wp(this._firestore,this._userDataWriter,r.key,r,new sh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ct(Ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((d=>{const h=new Wp(i._firestore,i._userDataWriter,d.doc.key,d.doc,new sh(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const h=new Wp(i._firestore,i._userDataWriter,d.doc.key,d.doc,new sh(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,p=-1;return d.type!==0&&(f=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),p=c.indexOf(d.doc.key)),{type:NP(d.type),doc:h,oldIndex:f,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ct(Ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=dh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vt(61501,{type:n})}}function ac(n){n=lo(n,Zr);const e=lo(n.firestore,Su);return uP(s0(e),n._key).then((t=>AP(e,n,t)))}dh._jsonSchemaVersion="firestore/querySnapshot/1.0",dh._jsonSchema={type:bi("string",dh._jsonSchemaVersion),bundleSource:bi("string","QuerySnapshot"),bundleName:bi("string"),bundle:bi("string")};class jy extends G3{constructor(e){super(),this.firestore=e}convertBytes(e){return new La(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zr(this.firestore,null,t)}}function fa(n){n=lo(n,ud);const e=lo(n.firestore,Su),t=s0(e),r=new jy(e);return wP(n._query),dP(t,n._query).then((i=>new dh(e,r,n,i)))}function ma(n,e,t){n=lo(n,Zr);const r=lo(n.firestore,Su),i=Sy(n.converter,e,t);return u0(r,[yy(_m(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ms.none())])}function Xc(n,e,t,...r){n=lo(n,Zr);const i=lo(n.firestore,Su),a=_m(i);let c;return c=typeof(e=Pr(e))=="string"||e instanceof wm?V3(a,"updateDoc",n._key,e,t,r):q3(a,"updateDoc",n._key,e),u0(i,[c.toMutation(n._key,ms.exists(!0))])}function c0(n){return u0(lo(n.firestore,Su),[new Zg(n._key,ms.none())])}function W3(n,e){const t=lo(n.firestore,Su),r=Tn(n),i=Sy(n.converter,e);return u0(t,[yy(_m(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ms.exists(!1))]).then((()=>r))}function u0(n,e){return(function(r,i){const a=new xl;return r.asyncQueue.enqueueAndForget((async()=>K7(await lP(r),i,a))),a.promise})(s0(n),e)}function AP(n,e,t){const r=t.docs.get(e._key),i=new jy(n);return new uu(n,i,e._key,r,new sh(t.hasPendingWrites,t.fromCache),e.converter)}const SP={maxAttempts:5};function Pf(n,e){if((n=Pr(n)).firestore!==e)throw new ct(Ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class jP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_m(e)}get(e){const t=Pf(e,this._firestore),r=new _P(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return Vt(24041);const a=i[0];if(a.isFoundDocument())return new Ag(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Ag(this._firestore,r,t._key,null,t.converter);throw Vt(18433,{doc:a})}))}set(e,t,r){const i=Pf(e,this._firestore),a=Sy(i.converter,t,r),c=yy(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Pf(e,this._firestore);let c;return c=typeof(t=Pr(t))=="string"||t instanceof wm?V3(this._dataReader,"Transaction.update",a._key,t,r,i):q3(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Pf(e,this._firestore);return this._transaction.delete(t._key),this}}class EP extends jP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pf(e,this._firestore),r=new jy(this._firestore);return super.get(e).then((i=>new uu(this._firestore,r,t._key,i._document,new sh(!1,!1),t.converter)))}}function TP(n,e,t){n=lo(n,Su);const r={...SP,...t};return(function(a){if(a.maxAttempts<1)throw new ct(Ge.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,c,d){const h=new xl;return a.asyncQueue.enqueueAndForget((async()=>{const f=await cP(a);new sP(a.asyncQueue,f,d,c,h).ju()})),h.promise})(s0(n),(i=>e(new EP(n,i))),r)}(function(e,t=!0){(function(i){kh=i})(Rh),_l(new Do("firestore",((r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),d=new Su(new vL(r.getProvider("auth-internal")),new wL(c,r.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ct(Ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xf(f.options.projectId,p)})(c,i),c);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),ao(rw,iw,e),ao(rw,iw,"esm2020")})();var CP="firebase",IP="12.6.0";ao(CP,IP,"app");const Y3="@firebase/installations",Ey="0.6.19";const K3=1e4,Q3=`w:${Ey}`,X3="FIS_v2",RP="https://firebaseinstallations.googleapis.com/v1",LP=3600*1e3,kP="installations",PP="Installations";const DP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ed=new sd(kP,PP,DP);function J3(n){return n instanceof qo&&n.code.includes("request-failed")}function Z3({projectId:n}){return`${RP}/projects/${n}/installations`}function eS(n){return{token:n.token,requestStatus:2,expiresIn:OP(n.expiresIn),creationTime:Date.now()}}async function tS(n,e){const r=(await e.json()).error;return ed.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function nS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function MP(n,{refreshToken:e}){const t=nS(n);return t.append("Authorization",FP(e)),t}async function rS(n){const e=await n();return e.status>=500&&e.status<600?n():e}function OP(n){return Number(n.replace("s","000"))}function FP(n){return`${X3} ${n}`}async function qP({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Z3(n),i=nS(n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const c={fid:t,authVersion:X3,appId:n.appId,sdkVersion:Q3},d={method:"POST",headers:i,body:JSON.stringify(c)},h=await rS(()=>fetch(r,d));if(h.ok){const f=await h.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:eS(f.authToken)}}else throw await tS("Create Installation",h)}function iS(n){return new Promise(e=>{setTimeout(e,n)})}function VP(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const BP=/^[cdef][\w-]{21}$/,r1="";function UP(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=zP(n);return BP.test(t)?t:r1}catch{return r1}}function zP(n){return VP(n).substr(0,22)}function d0(n){return`${n.appName}!${n.appId}`}const sS=new Map;function aS(n,e){const t=d0(n);oS(t,e),HP(t,e)}function oS(n,e){const t=sS.get(n);if(t)for(const r of t)r(e)}function HP(n,e){const t=$P();t&&t.postMessage({key:n,fid:e}),GP()}let Wu=null;function $P(){return!Wu&&"BroadcastChannel"in self&&(Wu=new BroadcastChannel("[Firebase] FID Change"),Wu.onmessage=n=>{oS(n.data.key,n.data.fid)}),Wu}function GP(){sS.size===0&&Wu&&(Wu.close(),Wu=null)}const WP="firebase-installations-database",YP=1,td="firebase-installations-store";let Qx=null;function Ty(){return Qx||(Qx=C4(WP,YP,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(td)}}})),Qx}async function jg(n,e){const t=d0(n),i=(await Ty()).transaction(td,"readwrite"),a=i.objectStore(td),c=await a.get(t);return await a.put(e,t),await i.done,(!c||c.fid!==e.fid)&&aS(n,e.fid),e}async function lS(n){const e=d0(n),r=(await Ty()).transaction(td,"readwrite");await r.objectStore(td).delete(e),await r.done}async function h0(n,e){const t=d0(n),i=(await Ty()).transaction(td,"readwrite"),a=i.objectStore(td),c=await a.get(t),d=e(c);return d===void 0?await a.delete(t):await a.put(d,t),await i.done,d&&(!c||c.fid!==d.fid)&&aS(n,d.fid),d}async function Cy(n){let e;const t=await h0(n.appConfig,r=>{const i=KP(r),a=QP(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===r1?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function KP(n){const e=n||{fid:UP(),registrationStatus:0};return cS(e)}function QP(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ed.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=XP(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:JP(n)}:{installationEntry:e}}async function XP(n,e){try{const t=await qP(n,e);return jg(n.appConfig,t)}catch(t){throw J3(t)&&t.customData.serverCode===409?await lS(n.appConfig):await jg(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function JP(n){let e=await t_(n.appConfig);for(;e.registrationStatus===1;)await iS(100),e=await t_(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Cy(n);return r||t}return e}function t_(n){return h0(n,e=>{if(!e)throw ed.create("installation-not-found");return cS(e)})}function cS(n){return ZP(n)?{fid:n.fid,registrationStatus:0}:n}function ZP(n){return n.registrationStatus===1&&n.registrationTime+K3<Date.now()}async function eD({appConfig:n,heartbeatServiceProvider:e},t){const r=tD(n,t),i=MP(n,t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const c={installation:{sdkVersion:Q3,appId:n.appId}},d={method:"POST",headers:i,body:JSON.stringify(c)},h=await rS(()=>fetch(r,d));if(h.ok){const f=await h.json();return eS(f)}else throw await tS("Generate Auth Token",h)}function tD(n,{fid:e}){return`${Z3(n)}/${e}/authTokens:generate`}async function Iy(n,e=!1){let t;const r=await h0(n.appConfig,a=>{if(!uS(a))throw ed.create("not-registered");const c=a.authToken;if(!e&&iD(c))return a;if(c.requestStatus===1)return t=nD(n,e),a;{if(!navigator.onLine)throw ed.create("app-offline");const d=aD(a);return t=rD(n,d),d}});return t?await t:r.authToken}async function nD(n,e){let t=await n_(n.appConfig);for(;t.authToken.requestStatus===1;)await iS(100),t=await n_(n.appConfig);const r=t.authToken;return r.requestStatus===0?Iy(n,e):r}function n_(n){return h0(n,e=>{if(!uS(e))throw ed.create("not-registered");const t=e.authToken;return oD(t)?{...e,authToken:{requestStatus:0}}:e})}async function rD(n,e){try{const t=await eD(n,e),r={...e,authToken:t};return await jg(n.appConfig,r),t}catch(t){if(J3(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await lS(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await jg(n.appConfig,r)}throw t}}function uS(n){return n!==void 0&&n.registrationStatus===2}function iD(n){return n.requestStatus===2&&!sD(n)}function sD(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+LP}function aD(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function oD(n){return n.requestStatus===1&&n.requestTime+K3<Date.now()}async function lD(n){const e=n,{installationEntry:t,registrationPromise:r}=await Cy(e);return r?r.catch(console.error):Iy(e).catch(console.error),t.fid}async function cD(n,e=!1){const t=n;return await uD(t),(await Iy(t,e)).token}async function uD(n){const{registrationPromise:e}=await Cy(n);e&&await e}function dD(n){if(!n||!n.options)throw Xx("App Configuration");if(!n.name)throw Xx("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Xx(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Xx(n){return ed.create("missing-app-config-values",{valueName:n})}const dS="installations",hD="installations-internal",fD=n=>{const e=n.getProvider("app").getImmediate(),t=dD(e),r=ad(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},mD=n=>{const e=n.getProvider("app").getImmediate(),t=ad(e,dS).getImmediate();return{getId:()=>lD(t),getToken:i=>cD(t,i)}};function pD(){_l(new Do(dS,fD,"PUBLIC")),_l(new Do(hD,mD,"PRIVATE"))}pD();ao(Y3,Ey);ao(Y3,Ey,"esm2020");const Eg="analytics",gD="firebase_id",xD="origin",vD=60*1e3,yD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ry="https://www.googletagmanager.com/gtag/js";const zs=new Ug("@firebase/analytics");const bD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Oa=new sd("analytics","Analytics",bD);function wD(n){if(!n.startsWith(Ry)){const e=Oa.create("invalid-gtag-resource",{gtagURL:n});return zs.warn(e.message),""}return n}function hS(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function _D(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function ND(n,e){const t=_D("firebase-js-sdk-policy",{createScriptURL:wD}),r=document.createElement("script"),i=`${Ry}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function AD(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function SD(n,e,t,r,i,a){const c=r[i];try{if(c)await e[c];else{const h=(await hS(t)).find(f=>f.measurementId===i);h&&await e[h.appId]}}catch(d){zs.error(d)}n("config",i,a)}async function jD(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let c=i.send_to;Array.isArray(c)||(c=[c]);const d=await hS(t);for(const h of c){const f=d.find(y=>y.measurementId===h),p=f&&e[f.appId];if(p)a.push(p);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){zs.error(a)}}function ED(n,e,t,r){async function i(a,...c){try{if(a==="event"){const[d,h]=c;await jD(n,e,t,d,h)}else if(a==="config"){const[d,h]=c;await SD(n,e,t,r,d,h)}else if(a==="consent"){const[d,h]=c;n("consent",d,h)}else if(a==="get"){const[d,h,f]=c;n("get",d,h,f)}else if(a==="set"){const[d]=c;n("set",d)}else n(a,...c)}catch(d){zs.error(d)}}return i}function TD(n,e,t,r,i){let a=function(...c){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=ED(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function CD(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ry)&&t.src.includes(n))return t;return null}const ID=30,RD=1e3;class LD{constructor(e={},t=RD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const fS=new LD;function kD(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function PD(n){const{appId:e,apiKey:t}=n,r={method:"GET",headers:kD(t)},i=yD.replace("{app-id}",e),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let c="";try{const d=await a.json();d.error?.message&&(c=d.error.message)}catch{}throw Oa.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function DD(n,e=fS,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Oa.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Oa.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new FD;return setTimeout(async()=>{d.abort()},vD),mS({appId:r,apiKey:i,measurementId:a},c,d,e)}async function mS(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=fS){const{appId:a,measurementId:c}=n;try{await MD(r,e)}catch(d){if(c)return zs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:a,measurementId:c};throw d}try{const d=await PD(n);return i.deleteThrottleMetadata(a),d}catch(d){const h=d;if(!OD(h)){if(i.deleteThrottleMetadata(a),c)return zs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:a,measurementId:c};throw d}const f=Number(h?.customData?.httpStatus)===503?T5(t,i.intervalMillis,ID):T5(t,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:t+1};return i.setThrottleMetadata(a,p),zs.debug(`Calling attemptFetch again in ${f} millis`),mS(n,p,r,i)}}function MD(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Oa.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function OD(n){if(!(n instanceof qo)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class FD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function qD(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,c={...r,send_to:a};n("event",t,c)}}async function VD(n,e,t,r){if(r&&r.global){const i={};for(const a of Object.keys(t))i[`user_properties.${a}`]=t[a];return n("set",i),Promise.resolve()}else{const i=await e;n("config",i,{update:!0,user_properties:t})}}async function BD(){if(S4())try{await j4()}catch(n){return zs.warn(Oa.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return zs.warn(Oa.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function UD(n,e,t,r,i,a,c){const d=DD(n);d.then(N=>{t[N.measurementId]=N.appId,n.options.measurementId&&N.measurementId!==n.options.measurementId&&zs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>zs.error(N)),e.push(d);const h=BD().then(N=>{if(N)return r.getId()}),[f,p]=await Promise.all([d,h]);CD(a)||ND(a,f.measurementId),i("js",new Date);const y=c?.config??{};return y[xD]="firebase",y.update=!0,p!=null&&(y[gD]=p),i("config",f.measurementId,y),f.measurementId}class zD{constructor(e){this.app=e}_delete(){return delete hh[this.app.options.appId],Promise.resolve()}}let hh={},r_=[];const i_={};let Jx="dataLayer",HD="gtag",s_,Ly,a_=!1;function $D(){const n=[];if(A4()&&n.push("This is a browser extension environment."),DC()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Oa.create("invalid-analytics-context",{errorInfo:e});zs.warn(t.message)}}function GD(n,e,t){$D();const r=n.options.appId;if(!r)throw Oa.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)zs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Oa.create("no-api-key");if(hh[r]!=null)throw Oa.create("already-exists",{id:r});if(!a_){AD(Jx);const{wrappedGtag:a,gtagCore:c}=TD(hh,r_,i_,Jx,HD);Ly=a,s_=c,a_=!0}return hh[r]=UD(n,r_,i_,e,s_,Jx,t),new zD(n)}function WD(n=D1()){n=Pr(n);const e=ad(n,Eg);return e.isInitialized()?e.getImmediate():YD(n)}function YD(n,e={}){const t=ad(n,Eg);if(t.isInitialized()){const i=t.getImmediate();if(du(e,t.getOptions()))return i;throw Oa.create("already-initialized")}return t.initialize({options:e})}function KD(n,e,t){n=Pr(n),VD(Ly,hh[n.app.options.appId],e,t).catch(r=>zs.error(r))}function QD(n,e,t,r){n=Pr(n),qD(Ly,hh[n.app.options.appId],e,t,r).catch(i=>zs.error(i))}const o_="@firebase/analytics",l_="0.10.19";function XD(){_l(new Do(Eg,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return GD(r,i,t)},"PUBLIC")),_l(new Do("analytics-internal",n,"PRIVATE")),ao(o_,l_),ao(o_,l_,"esm2020");function n(e){try{const t=e.getProvider(Eg).getImmediate();return{logEvent:(r,i,a)=>QD(t,r,i,a),setUserProperties:(r,i)=>KD(t,r,i)}}catch(t){throw Oa.create("interop-component-reg-failed",{reason:t})}}}XD();const JD={apiKey:"AIzaSyBwaC_ySezVpfv9y9xHNromiTW77qJQlmA",authDomain:"boulangerie-da431.firebaseapp.com",projectId:"boulangerie-da431",storageBucket:"boulangerie-da431.firebasestorage.app",messagingSenderId:"324942492234",appId:"1:324942492234:web:afbc851e38b557a87f2cb3",measurementId:"G-3E7K2Y6N31"},ky=P1(JD),i1=hA(ky),wt=fP(ky);WD(ky);const c_=n=>{let e;const t=new Set,r=(f,p)=>{const y=typeof f=="function"?f(e):f;if(!Object.is(y,e)){const N=e;e=p??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(b=>b(e,N))}},i=()=>e,d={setState:r,getState:i,getInitialState:()=>h,subscribe:f=>(t.add(f),()=>t.delete(f))},h=e=n(r,i,d);return d},ZD=(n=>n?c_(n):c_),eM=n=>n;function tM(n,e=eM){const t=ru.useSyncExternalStore(n.subscribe,ru.useCallback(()=>e(n.getState()),[n,e]),ru.useCallback(()=>e(n.getInitialState()),[n,e]));return ru.useDebugValue(t),t}const u_=n=>{const e=ZD(n),t=r=>tM(e,r);return Object.assign(t,e),t},vc=(n=>n?u_(n):u_),Am=vc(n=>({user:null,isLoading:!0,isAuthenticated:!1,login:async(e,t)=>{n({isLoading:!0});try{await JR(i1,e,t),n({isLoading:!1})}catch(r){throw n({isLoading:!1}),r}},logout:async()=>{try{await i8(i1),n({user:null,isAuthenticated:!1})}catch(e){console.error("Logout error:",e)}},setUser:e=>{n({user:e,isAuthenticated:e!==null})},setLoading:e=>{n({isLoading:e})}})),Wd={clients:Hn(wt,"clients"),produits:Hn(wt,"produits"),livreurs:Hn(wt,"livreurs"),users:Hn(wt,"users"),productionPrograms:Hn(wt,"productionPrograms"),clientOrders:Hn(wt,"clientOrders"),shopStock:Hn(wt,"shopStock"),shopShifts:Hn(wt,"shopShifts"),shopSales:Hn(wt,"shopSales"),clientReturns:Hn(wt,"clientReturns"),dailyReports:Hn(wt,"dailyReports"),factures:Hn(wt,"factures"),parametres:Hn(wt,"parametres"),matieres:Hn(wt,"matieres"),mouvements:Hn(wt,"mouvements"),fournisseurs:Hn(wt,"fournisseurs")},io=n=>rr.fromDate(n),da=n=>n.toDate(),Cn={async create(n,e){const t=Wd[n];return await W3(t,e)},async getById(n,e){const t=Tn(Wd[n],e),r=await ac(t);return r.exists()?{id:r.id,...r.data()}:null},async getAll(n){return(await fa(Wd[n])).docs.map(t=>({id:t.id,...t.data()}))},async getByQuery(n,e){const t=Pa(Wd[n],...e);return(await fa(t)).docs.map(i=>({id:i.id,...i.data()}))},async update(n,e,t){const r=Tn(Wd[n],e);return await Xc(r,t)},async delete(n,e){const t=Tn(Wd[n],e);return await c0(t)}},nM={async getProgrammeByDate(n){const e=new Date(n);e.setHours(0,0,0,0);const t=new Date(n);return t.setHours(23,59,59,999),await Cn.getByQuery("productionPrograms",[tr("date",">=",io(e)),tr("date","<=",io(t))])},async getLivraisonsByDate(n){const e=new Date(n);e.setHours(0,0,0,0);const t=new Date(n);return t.setHours(23,59,59,999),await Cn.getByQuery("clientReturns",[tr("dateLivraison",">=",io(e)),tr("dateLivraison","<=",io(t))])},async getStockBoutiqueByDate(n){const e=new Date(n);e.setHours(0,0,0,0);const t=new Date(n);return t.setHours(23,59,59,999),await Cn.getByQuery("shopStock",[tr("date",">=",io(e)),tr("date","<=",io(t))])},async getRapportByDate(n){const e=new Date(n);e.setHours(0,0,0,0);const t=new Date(n);return t.setHours(23,59,59,999),await Cn.getByQuery("dailyReports",[tr("date",">=",io(e)),tr("date","<=",io(t))])},async getClientsActifs(){return await Cn.getByQuery("clients",[tr("active","==",!0),Sg("nom")])},async getProduitsActifs(){return await Cn.getByQuery("produits",[tr("active","==",!0),Sg("nom")])}},Al=vc((n,e)=>({matieres:[],mouvements:[],fournisseurs:[],isLoading:!1,error:null,chargerDonnees:async()=>{n({isLoading:!0,error:null});try{const[t,r,i]=await Promise.all([Cn.getAll("matieres"),Cn.getAll("mouvements"),Cn.getAll("fournisseurs")]),a=c=>({...c,createdAt:c.createdAt instanceof rr?c.createdAt.toDate():new Date(c.createdAt),updatedAt:c.updatedAt instanceof rr?c.updatedAt.toDate():new Date(c.updatedAt||c.createdAt),...c.date?{date:c.date instanceof rr?c.date.toDate():new Date(c.date)}:{}});n({matieres:t.map(a),mouvements:r.map(a).sort((c,d)=>d.date.getTime()-c.date.getTime()),fournisseurs:i.map(a),isLoading:!1})}catch(t){console.error("Erreur chargement stock:",t),n({isLoading:!1,error:t.message})}},addMatiere:async t=>{n({isLoading:!0});try{const r={...t,createdAt:new Date,updatedAt:new Date},a={id:(await Cn.create("matieres",r)).id,...r};n(c=>({matieres:[...c.matieres,a],isLoading:!1}))}catch(r){console.error("Erreur ajout matire:",r),n({isLoading:!1,error:r.message})}},updateMatiere:async(t,r)=>{try{await Cn.update("matieres",t,{...r,updatedAt:new Date}),n(i=>({matieres:i.matieres.map(a=>a.id===t?{...a,...r,updatedAt:new Date}:a)}))}catch(i){console.error("Erreur modif matire:",i)}},deleteMatiere:async t=>{try{await Cn.delete("matieres",t),n(r=>({matieres:r.matieres.filter(i=>i.id!==t)}))}catch(r){console.error("Erreur suppression matire:",r)}},addMouvement:async t=>{n({isLoading:!0});try{await TP(wt,async r=>{const i=Tn(wt,"matieres",t.matiereId),a=await r.get(i);if(!a.exists())throw new Error("Matire premire introuvable !");const c=a.data();let d=c.stockActuel,h=c.prixMoyenPondere,f=c.valeurTotale;if(t.type==="achat"){const b=t.quantite,j=t.prixTotal||0;d+b>0&&(h=(f+j)/(d+b)),d+=b,f+=j}else{let b=Math.abs(t.quantite);["consommation","perte","retour_fournisseur"].includes(t.type)&&(b=-b),t.type==="correction"&&(b=t.quantite),d+=b,f=d*h}const p=Tn(Hn(wt,"mouvements"));let y=t.prixTotal;t.type!=="achat"&&!y&&(y=Math.abs(t.quantite)*h);const N={id:p.id,...t,prixTotal:y,createdAt:new Date,date:t.date||new Date};Object.keys(N).forEach(b=>{N[b]===void 0&&delete N[b]}),r.set(p,N),r.update(i,{stockActuel:d,prixMoyenPondere:h,valeurTotale:f,updatedAt:new Date})}),e().chargerDonnees()}catch(r){console.error("Erreur transaction stock:",r),n({isLoading:!1,error:r.message})}},addFournisseur:async t=>{n({isLoading:!0});try{const r={...t,createdAt:new Date,updatedAt:new Date},a={id:(await Cn.create("fournisseurs",r)).id,...r};n(c=>({fournisseurs:[...c.fournisseurs,a],isLoading:!1}))}catch(r){console.error("Erreur ajout fournisseur:",r),n({isLoading:!1,error:r.message})}},updateFournisseur:async(t,r)=>{try{await Cn.update("fournisseurs",t,{...r,updatedAt:new Date}),n(i=>({fournisseurs:i.fournisseurs.map(a=>a.id===t?{...a,...r,updatedAt:new Date}:a)}))}catch(i){console.error("Erreur modif fournisseur:",i)}},deleteFournisseur:async t=>{try{await Cn.delete("fournisseurs",t),n(r=>({fournisseurs:r.fournisseurs.filter(i=>i.id!==t)}))}catch(r){console.error("Erreur suppression fournisseur:",r)}},getMatiere:t=>e().matieres.find(r=>r.id===t),getMouvementsByMatiere:t=>e().mouvements.filter(r=>r.matiereId===t),getDepensesPeriode:(t,r)=>e().mouvements.filter(i=>{const a=new Date(i.date);return i.type==="achat"&&a>=t&&a<=r}).reduce((i,a)=>i+(a.prixTotal||0),0),getValeurConsommationPeriode:(t,r)=>{const{mouvements:i,matieres:a}=e();return i.filter(c=>{const d=new Date(c.date);return["consommation","perte"].includes(c.type)&&d>=t&&d<=r}).reduce((c,d)=>{if(d.prixTotal)return c+d.prixTotal;const f=a.find(p=>p.id===d.matiereId)?.prixMoyenPondere||0;return c+Math.abs(d.quantite)*f},0)}})),wl=vc((n,e)=>({programmeActuel:null,commandesClients:[],quantitesBoutique:[],produits:[],clients:[],isLoading:!1,showCommandeForm:!1,showQuantiteBoutiqueForm:!1,commandeEnEdition:null,quantiteBoutiqueEnEdition:null,formulaireCommande:{selectedClientId:"",dateLivraison:new Date().toISOString().split("T")[0],produitsCommandes:[],utiliserPrixClient:!0},creerNouveauProgramme:t=>{const r={id:`prog_${Date.now()}`,dateProduction:t,dateCreation:new Date,statut:"brouillon",commandesClients:[],quantitesBoutique:[],totauxParProduit:[],createdAt:new Date,updatedAt:new Date};n({programmeActuel:r,commandesClients:[],quantitesBoutique:[]}),e().calculerTotauxParProduit(),console.log(" Nouveau programme cr pour",t.toLocaleDateString("fr-FR"))},chargerProgramme:async t=>{console.log(" Chargement programme pour date:",t),n({isLoading:!0});try{const r=await nM.getProgrammeByDate(t);if(console.log(" Programmes trouvs dans Firebase:",r.length),r.length>0){console.log(" Programme existant trouv, chargement...");const i=r[0],a={...i,dateProduction:i.dateProduction instanceof Date?i.dateProduction:da(i.dateProduction),dateCreation:i.dateCreation instanceof Date?i.dateCreation:da(i.dateCreation),createdAt:i.createdAt instanceof Date?i.createdAt:da(i.createdAt),updatedAt:i.updatedAt instanceof Date?i.updatedAt:da(i.updatedAt),commandesClients:(i.commandesClients||[]).map(c=>({...c,dateCommande:c.dateCommande instanceof Date?c.dateCommande:da(c.dateCommande),dateLivraison:c.dateLivraison instanceof Date?c.dateLivraison:da(c.dateLivraison),createdAt:c.createdAt instanceof Date?c.createdAt:da(c.createdAt),updatedAt:c.updatedAt instanceof Date?c.updatedAt:da(c.updatedAt)}))};n({programmeActuel:a,commandesClients:a.commandesClients||[],quantitesBoutique:a.quantitesBoutique||[],isLoading:!1}),console.log(" Programme charg avec",a.commandesClients?.length||0,"commandes")}else{console.log(" Aucun programme trouv, cration automatique...");const i={id:`prog_${Date.now()}`,dateProduction:t,dateCreation:new Date,statut:"brouillon",commandesClients:[],quantitesBoutique:[],totauxParProduit:[],createdAt:new Date,updatedAt:new Date};n({programmeActuel:i,commandesClients:[],quantitesBoutique:[],isLoading:!1}),console.log(" Nouveau programme cr automatiquement pour",t.toLocaleDateString("fr-FR"))}}catch(r){throw console.error("Erreur lors du chargement du programme:",r),n({isLoading:!1}),r}},sauvegarderProgramme:async()=>{const{programmeActuel:t,commandesClients:r,quantitesBoutique:i}=e();if(t){n({isLoading:!0});try{const a={...t,commandesClients:r,quantitesBoutique:i,dateProduction:io(t.dateProduction),dateCreation:io(t.dateCreation),createdAt:io(t.createdAt),updatedAt:io(new Date)};if(t.id.startsWith("prog_")){const{id:c,...d}=a,h=await Cn.create("productionPrograms",d);n(f=>({programmeActuel:f.programmeActuel?{...f.programmeActuel,id:h.id}:null,isLoading:!1}))}else{const{id:c,...d}=a;await Cn.update("productionPrograms",c,d),n({isLoading:!1})}}catch(a){throw console.error("Erreur lors de la sauvegarde:",a),n({isLoading:!1}),a}}},sauvegarderEtRecharger:async()=>{const{programmeActuel:t}=e();if(t)try{await e().sauvegarderProgramme(),await e().chargerProgramme(t.dateProduction),console.log(" Programme sauvegard et recharg pour viter les conflits")}catch(r){throw console.error("Erreur lors de sauvegarde+rechargement:",r),r}},validerProduction:async()=>{const{programmeActuel:t,produits:r}=e();if(t){n({isLoading:!0});try{console.log(" Validation de la production et dduction des stocks...");const i=[];let a=[];t.totauxParProduit&&t.totauxParProduit.forEach(h=>{const f=r.find(p=>p.id===h.produitId);f?.recette&&f.recette.length>0&&(a.push(`Produit: ${f.nom} (Total: ${h.totalGlobal})`),f.recette.forEach(p=>{const y=Number((p.quantite*h.totalGlobal).toFixed(3));y>0&&(i.push({matiereId:p.matiereId,quantite:y,type:"consommation",motif:`Production: ${f.nom} (${h.totalGlobal} p.)`,auteur:"Systme",responsable:"Systme (Auto)",referenceDocument:`PROD-${new Date(t.dateProduction).toLocaleDateString()}`}),a.push(`  - Ingrdient ${p.matiereId}: ${y}`))}))}),console.log(" Mouvements  gnrer:",i.length),console.log(a.join(`
`));const c=Al.getState();for(const h of i)await c.addMouvement({...h,date:new Date,userId:"system"});const d={...t,statut:"produit",updatedAt:new Date};await Cn.update("productionPrograms",t.id,{statut:"produit",updatedAt:new Date}),n({programmeActuel:d,isLoading:!1}),console.log(" Production valide et stocks dduits !")}catch(i){throw console.error("Erreur validation production:",i),n({isLoading:!1}),i}}},marquerCommeModifie:()=>{const{programmeActuel:t}=e();t&&t.statut==="envoye"&&n({programmeActuel:{...t,statut:"modifie",updatedAt:new Date}})},envoyerAuBoulanger:async()=>{const{programmeActuel:t}=e();if(t)try{const r={...t,statut:"envoye",updatedAt:new Date};n({programmeActuel:r}),await e().sauvegarderProgramme()}catch(r){throw console.error("Erreur lors de l'envoi:",r),r}},ajouterCommandeClient:t=>{const r={...t,id:`cmd_${Date.now()}`,createdAt:new Date,updatedAt:new Date};n(i=>({commandesClients:[...i.commandesClients,r]})),setTimeout(()=>{e().marquerCommeModifie(),e().calculerTotauxParProduit(),e().sauvegarderEtRecharger().catch(i=>{console.warn("Auto-sauvegarde choue:",i)})},100)},modifierCommandeClient:(t,r)=>{n(i=>({commandesClients:i.commandesClients.map(a=>a.id===t?{...a,...r,updatedAt:new Date}:a)})),setTimeout(()=>{e().marquerCommeModifie(),e().calculerTotauxParProduit(),e().sauvegarderEtRecharger().catch(console.warn)},100)},supprimerCommandeClient:t=>{n(r=>({commandesClients:r.commandesClients.filter(i=>i.id!==t)})),setTimeout(()=>{e().marquerCommeModifie(),e().calculerTotauxParProduit(),e().sauvegarderEtRecharger().catch(console.warn)},0)},supprimerCommandesLivreur:t=>{const{clients:r}=e(),i=r.filter(c=>c.livreurId===t),a=i.map(c=>c.id);console.log(` Suppression des commandes pour le livreur ${t}:`,i.map(c=>c.nom)),n(c=>{const d=c.commandesClients.length,h=c.commandesClients.filter(p=>!a.includes(p.clientId)),f=h.length;return console.log(` ${d-f} commandes supprimes (${d} -> ${f})`),{commandesClients:h}}),setTimeout(()=>{e().calculerTotauxParProduit(),e().programmeActuel?.statut==="brouillon"&&e().sauvegarderEtRecharger().catch(console.warn)},0)},annulerCommandeClient:t=>{n(r=>({commandesClients:r.commandesClients.map(i=>i.id===t?{...i,statut:"annulee",updatedAt:new Date}:i)})),setTimeout(()=>e().calculerTotauxParProduit(),0)},supprimerProduitDeCommande:(t,r)=>{n(i=>({commandesClients:i.commandesClients.map(a=>{if(a.id===t){const c=[...a.produits];return c.splice(r,1),c.length===0?null:{...a,produits:c,updatedAt:new Date}}return a}).filter(a=>a!==null)})),setTimeout(()=>{e().calculerTotauxParProduit(),e().programmeActuel?.statut==="brouillon"&&e().sauvegarderEtRecharger().catch(console.warn)},100)},sauvegarderCommandeType:async(t,r)=>{try{await Cn.update("clients",t,{commandeType:r,updatedAt:new Date}),n(i=>({clients:i.clients.map(a=>a.id===t?{...a,commandeType:r,updatedAt:new Date}:a)})),console.log(" Commande type sauvegarde pour client",t)}catch(i){throw console.error("Erreur sauvegarde commande type:",i),i}},ajouterQuantiteBoutique:t=>{n(r=>{const i=r.quantitesBoutique.findIndex(a=>a.produitId===t.produitId);if(i>=0){const a=[...r.quantitesBoutique];return a[i]=t,{quantitesBoutique:a}}else return{quantitesBoutique:[...r.quantitesBoutique,t]}}),e().marquerCommeModifie(),e().calculerTotauxParProduit(),setTimeout(()=>e().sauvegarderEtRecharger().catch(console.error),0)},modifierQuantiteBoutique:(t,r)=>{n(i=>({quantitesBoutique:i.quantitesBoutique.map(a=>a.produitId===t?{...a,quantite:r}:a)})),e().marquerCommeModifie(),e().calculerTotauxParProduit(),setTimeout(()=>e().sauvegarderEtRecharger().catch(console.error),0)},supprimerQuantiteBoutique:t=>{n(r=>({quantitesBoutique:r.quantitesBoutique.filter(i=>i.produitId!==t)})),e().marquerCommeModifie(),e().calculerTotauxParProduit(),setTimeout(()=>e().sauvegarderEtRecharger().catch(console.error),0)},calculerTotauxParProduit:()=>{const{commandesClients:t,quantitesBoutique:r,produits:i}=e(),a=new Map;t.filter(d=>d.statut!=="annulee").forEach(d=>{d.produits.forEach(h=>{const f=a.get(h.produitId)||{totalClient:0,totalBoutique:0,repartitionCar1Matin:0,repartitionCar2Matin:0,repartitionCarSoir:0},p=h.quantiteCommandee||(Number(h.repartitionCars?.car1_matin)||0)+(Number(h.repartitionCars?.car2_matin)||0)+(Number(h.repartitionCars?.car_soir)||0),y=Number(h.repartitionCars?.car1_matin)||0,N=Number(h.repartitionCars?.car2_matin)||0,b=Number(h.repartitionCars?.car_soir)||0;a.set(h.produitId,{totalClient:f.totalClient+p,totalBoutique:f.totalBoutique,repartitionCar1Matin:f.repartitionCar1Matin+y,repartitionCar2Matin:f.repartitionCar2Matin+N,repartitionCarSoir:f.repartitionCarSoir+b})})}),r.forEach(d=>{const h=a.get(d.produitId)||{totalClient:0,repartitionCar1Matin:0,repartitionCar2Matin:0,repartitionCarSoir:0};let f,p,y;d.repartitionCars?(f=d.repartitionCars.car1_matin,p=d.repartitionCars.car2_matin,y=d.repartitionCars.car_soir):(f=Math.ceil(d.quantite*.35),p=Math.ceil(d.quantite*.35),y=d.quantite-f-p),a.set(d.produitId,{totalClient:h.totalClient,totalBoutique:d.quantite,repartitionCar1Matin:h.repartitionCar1Matin+f,repartitionCar2Matin:h.repartitionCar2Matin+p,repartitionCarSoir:h.repartitionCarSoir+y})});const c=Array.from(a.entries()).map(([d,h])=>{const f=i.find(y=>y.id===d),p=h.totalClient+h.totalBoutique;return{produitId:d,produit:f,totalClient:h.totalClient,totalBoutique:h.totalBoutique,totalGlobal:p,repartitionCar1Matin:h.repartitionCar1Matin,repartitionCar2Matin:h.repartitionCar2Matin,repartitionCarSoir:h.repartitionCarSoir}});n(d=>({programmeActuel:d.programmeActuel?{...d.programmeActuel,totauxParProduit:c}:null}))},modifierRepartitionProduit:(t,r,i,a)=>{},chargerProduits:async()=>{try{const r=(await Cn.getAll("produits")).map(i=>({...i,createdAt:i.createdAt instanceof Date?i.createdAt:da(i.createdAt),updatedAt:i.updatedAt instanceof Date?i.updatedAt:da(i.updatedAt)}));n({produits:r.filter(i=>i.active)})}catch(t){throw console.error("Erreur lors du chargement des produits:",t),t}},chargerClients:async()=>{try{const r=(await Cn.getAll("clients")).map(i=>({...i,createdAt:i.createdAt instanceof Date?i.createdAt:da(i.createdAt),updatedAt:i.updatedAt instanceof Date?i.updatedAt:da(i.updatedAt)}));n({clients:r.filter(i=>i.active)})}catch(t){throw console.error("Erreur lors du chargement des clients:",t),t}},rafraichirDonnees:async()=>{try{await Promise.all([e().chargerProduits(),e().chargerClients()])}catch(t){throw console.error("Erreur lors du rafrachissement:",t),t}},setShowCommandeForm:t=>{n({showCommandeForm:t})},setShowQuantiteBoutiqueForm:t=>{n({showQuantiteBoutiqueForm:t})},setCommandeEnEdition:t=>{n({commandeEnEdition:t})},setQuantiteBoutiqueEnEdition:t=>{n({quantiteBoutiqueEnEdition:t})},updateFormulaireCommande:t=>{n(r=>({formulaireCommande:{...r.formulaireCommande,...t}}))},resetFormulaireCommande:()=>{n({formulaireCommande:{selectedClientId:"",dateLivraison:new Date().toISOString().split("T")[0],produitsCommandes:[],utiliserPrixClient:!0}})},setLoading:t=>{n({isLoading:t})},nettoyerProgrammesEnDouble:async()=>{try{console.log(" Nettoyage des programmes en double...");const t=await Cn.getAll("productionPrograms");console.log(` ${t.length} programmes trouvs`);const r=new Map;t.forEach(a=>{const c=a.dateProduction?.toDate?a.dateProduction.toDate().toDateString():new Date(a.dateProduction).toDateString();r.has(c)||r.set(c,[]),r.get(c).push(a)});let i=0;for(const[a,c]of r)if(c.length>1){console.log(` ${c.length} programmes trouvs pour ${a}`),c.sort((d,h)=>{const f=d.updatedAt?.toDate?d.updatedAt.toDate():new Date(d.updatedAt);return(h.updatedAt?.toDate?h.updatedAt.toDate():new Date(h.updatedAt)).getTime()-f.getTime()});for(let d=1;d<c.length;d++)await Cn.delete("productionPrograms",c[d].id),i++,console.log(` Programme ${c[d].id} supprim`)}console.log(` Nettoyage termin - ${i} programmes supprims`)}catch(t){throw console.error("Erreur lors du nettoyage:",t),t}},debugTotaux:()=>{const{commandesClients:t,quantitesBoutique:r,programmeActuel:i}=e();if(console.log("=== DEBUG TOTAUX ==="),console.log(" Commandes clients:",t.length),t.forEach((a,c)=>{console.log(`  Commande ${c+1}:`,a.produits.map(d=>({produit:d.produit?.nom,quantite:d.quantiteCommandee,repartition:d.repartitionCars})))}),console.log(" Quantits boutique:",r.length),r.forEach((a,c)=>{console.log(`  Boutique ${c+1}:`,{produit:a.produit?.nom,quantite:a.quantite,repartition:a.repartitionCars})}),console.log(" Totaux calculs:",i?.totauxParProduit),i?.totauxParProduit){const a=i.totauxParProduit.reduce((h,f)=>h+(f.repartitionCar1Matin||0),0),c=i.totauxParProduit.reduce((h,f)=>h+(f.repartitionCar2Matin||0),0),d=i.totauxParProduit.reduce((h,f)=>h+(f.repartitionCarSoir||0),0);console.log(" Totaux par car:"),console.log(`  Car 1 Matin: ${a}`),console.log(`  Car 2 Matin: ${c}`),console.log(`  Car Soir: ${d}`),console.log(`  TOTAL: ${a+c+d}`)}}})),nm=vc((n,e)=>({livraisonsJour:[],invendusClients:[],clients:[],produits:[],isLoading:!1,chargerLivraisonsDuJour:async t=>{n({isLoading:!0});try{console.log("Charger livraisons du jour:",t),n({isLoading:!1})}catch(r){throw n({isLoading:!1}),r}},chargerInvendusDuJour:async t=>{n({isLoading:!0});try{const r=t.toISOString().split("T")[0];console.log(` Chargement des invendus pour ${r}...`);const i=new Date(r+"T00:00:00.000Z"),a=new Date(r+"T23:59:59.999Z"),c=Pa(Hn(wt,"clientReturns"),tr("dateLivraison",">=",i),tr("dateLivraison","<=",a)),d=await fa(c);if(d.empty)console.log(" Aucun retour client trouv pour cette date"),n({invendusClients:[]});else{const h=d.docs.map(f=>{const p=f.data();return{...p,dateLivraison:p.dateLivraison.toDate(),createdAt:p.createdAt.toDate(),updatedAt:p.updatedAt.toDate()}});n({invendusClients:h}),console.log(` ${h.length} retours clients chargs depuis Firebase`)}n({isLoading:!1})}catch(r){n({isLoading:!1}),console.error(" Erreur lors du chargement des invendus:",r)}},commencerLivraison:t=>{n(r=>({livraisonsJour:r.livraisonsJour.map(i=>i.clientId===t?{...i,statut:"en_cours"}:i)}))},terminerLivraison:t=>{n(r=>({livraisonsJour:r.livraisonsJour.map(i=>i.clientId===t?{...i,statut:"termine"}:i)}))},saisirInvendusClient:(t,r,i)=>{const{livraisonsJour:a}=e(),c=a.find(f=>f.clientId===t);if(!c)return;const d=c.produits.find(f=>f.produitId===r);if(!d)return;const h=d.quantiteLivree-i;n(f=>({livraisonsJour:f.livraisonsJour.map(p=>p.clientId===t?{...p,produits:p.produits.map(y=>y.produitId===r?{...y,invendus:i,vendu:h}:y)}:p)})),n(f=>{if(f.invendusClients.find(y=>y.clientId===t))return{invendusClients:f.invendusClients.map(y=>y.clientId===t?{...y,produits:y.produits.map(N=>N.produitId===r?{...N,invendus:i,vendu:h,quantiteLivree:d.quantiteLivree}:N)}:y)};{const y={id:`inv_${t}_${Date.now()}`,clientId:t,client:c.client,dateLivraison:c.dateLivraison,produits:[{produitId:r,produit:d.produit,quantiteLivree:d.quantiteLivree,invendus:i,vendu:h}],createdAt:new Date,updatedAt:new Date};return{invendusClients:[...f.invendusClients,y]}}})},calculerVenduClient:(t,r)=>{const{livraisonsJour:i}=e(),a=i.find(d=>d.clientId===t);if(!a)return 0;const c=a.produits.find(d=>d.produitId===r);return c?c.quantiteLivree-c.invendus:0},sauvegarderInvendus:async()=>{const{invendusClients:t}=e();n({isLoading:!0});try{console.log(" Sauvegarde des invendus clients:",t);for(const r of t){const i=r.dateLivraison.toISOString().split("T")[0],a=`retours_${r.clientId}_${i}`,c={...r,dateLivraison:r.dateLivraison,createdAt:r.createdAt,updatedAt:new Date};console.log(` Sauvegarde retours client vers document ID: ${a}`);const d=Tn(wt,"clientReturns",a);await ma(d,c,{merge:!0})}console.log(" Tous les retours clients sauvegards avec succs"),n({isLoading:!1})}catch(r){throw n({isLoading:!1}),console.error(" Erreur lors de la sauvegarde des invendus:",r),r}},marquerAucunRetourClient:async(t,r)=>{n({isLoading:!0});try{console.log(' Marquage "aucun retour" pour client:',t,"date:",r.toISOString().split("T")[0]);const i=r.toISOString().split("T")[0],a=`retours_${t}_${i}`,c={clientId:t,dateLivraison:r,produits:[],retoursCompletes:!0,createdAt:new Date,updatedAt:new Date},d=Tn(wt,"clientReturns",a);await ma(d,c,{merge:!0}),n(h=>({invendusClients:[...h.invendusClients.filter(p=>!(p.clientId===t&&p.dateLivraison.toDateString()===r.toDateString())),c],isLoading:!1})),console.log(' "Aucun retour" marqu avec succs')}catch(i){throw n({isLoading:!1}),console.error(' Erreur lors du marquage "aucun retour":',i),i}},sauvegarderRetoursClient:async(t,r,i)=>{n({isLoading:!0});try{console.log(" Sauvegarde des retours pour client:",t,"date:",r.toISOString().split("T")[0]);const a=r.toISOString().split("T")[0],c=`retours_${t}_${a}`,d={clientId:t,dateLivraison:r,produits:i,retoursCompletes:!0,createdAt:new Date,updatedAt:new Date},h=Tn(wt,"clientReturns",c);await ma(h,d,{merge:!0}),n(f=>({invendusClients:[...f.invendusClients.filter(y=>!(y.clientId===t&&y.dateLivraison.toDateString()===r.toDateString())),d],isLoading:!1})),console.log(" Retours client sauvegards et finaliss avec succs")}catch(a){throw n({isLoading:!1}),console.error(" Erreur lors de la sauvegarde des retours client:",a),a}},getLivraisonByClientId:t=>{const{livraisonsJour:r}=e();return r.find(i=>i.clientId===t)},getInvendusByClientId:t=>{const{invendusClients:r}=e();return r.find(i=>i.clientId===t)},setLoading:t=>{n({isLoading:t})}}));let Yd=null;const Tg=vc((n,e)=>({stockJour:null,equipeMatin:null,equipeSoir:null,ventesJour:null,produits:[],isLoading:!1,creerStockJour:(t,r)=>{const i={id:`stock_${t.getTime()}`,date:t,produits:r.map(a=>({produitId:a.produitId,stockDebut:a.stockDebut})),createdAt:new Date,updatedAt:new Date};n({stockJour:i})},chargerStockJour:async t=>{n({isLoading:!0});try{const r=t.toISOString().split("T")[0];console.log("Recherche stock pour date:",r);const i=Pa(Hn(wt,"shopStock"),tr("date",">=",new Date(r)),tr("date","<",new Date(new Date(r).getTime()+1440*60*1e3))),a=await fa(i);if(console.log("Nombre de stocks trouvs:",a.docs.length),a.empty)console.log("Aucun stock existant trouv"),n({stockJour:null});else{const c=a.docs[0].data();console.log("Donnes stock brutes:",c);const d={...c,date:c.date.toDate(),createdAt:c.createdAt.toDate(),updatedAt:c.updatedAt.toDate()};n({stockJour:d}),console.log("Stock boutique charg:",d)}n({isLoading:!1})}catch(r){throw n({isLoading:!1}),console.error("Erreur lors du chargement du stock:",r),r}},creerStockDepuisProduction:async(t,r=!1)=>{n({isLoading:!0});try{const i=t.toISOString().split("T")[0];console.log("Recherche programme pour date:",i);const a=new Date(i+"T00:00:00.000Z"),c=new Date(i+"T23:59:59.999Z");console.log("Plage de recherche:",a,"",c);const d=Pa(Hn(wt,"productionPrograms"),tr("date",">=",a),tr("date","<=",c)),h=await fa(d);if(console.log("Programmes trouvs:",h.docs.length),h.empty){console.log("Aucun programme de production trouv pour cette date");const C=Pa(Hn(wt,"productionPrograms")),R=await fa(C);console.log("Total programmes en base:",R.docs.length),R.docs.forEach(I=>{const B=I.data();console.log("Programme trouv:",I.id,B.date)}),n({isLoading:!1,stockJour:null});return}const f=h.docs[0].data(),p=f.quantitesBoutique||[];if(console.log("Programme trouv:",f),console.log("Quantits boutique:",p),p.length===0){console.log("Aucune quantit boutique dfinie dans le programme"),n({isLoading:!1,stockJour:null});return}const y=await fa(Hn(wt,"produits")),N=new Map;y.docs.forEach(C=>{const R=C.data();N.set(C.id,R)}),console.log("Produits chargs:",Array.from(N.keys()));const b=p.map(C=>{console.log("Traitement quantit:",C);const R=N.get(C.produitId);return console.log("Produit trouv:",R),{produitId:C.produitId,stockDebut:C.quantite,produit:R||{nom:"Produit inconnu"},repartitionCars:C.repartitionCars||null}}).filter(C=>C.stockDebut>0&&C.repartitionCars!==null);if(console.log("Stock produits final:",b),b.length===0){console.log("Aucun produit avec quantit > 0 pour la boutique"),n({isLoading:!1,stockJour:null});return}const{stockJour:j}=e();if(r||!j){const C={id:`stock_${t.getTime()}`,date:t,produits:b,createdAt:new Date,updatedAt:new Date};if(j&&r){console.log("Suppression de l'ancien stock pour mise  jour");const R=Pa(Hn(wt,"shopStock"),tr("date",">=",a),tr("date","<=",c)),I=await fa(R);for(const B of I.docs)await c0(B.ref)}await W3(Hn(wt,"shopStock"),{...C,date:t,createdAt:new Date,updatedAt:new Date}),n({stockJour:C,isLoading:!1}),console.log("Stock boutique cr/mis  jour depuis les quantits dfinies:",C)}else n({isLoading:!1}),console.log("Stock existant conserv")}catch(i){n({isLoading:!1,stockJour:null}),console.error("Erreur lors de la cration du stock depuis production:",i)}},mettreAJourStockBoutique:async t=>{await e().creerStockDepuisProduction(t,!0)},commencerEquipeMatin:(t,r)=>{const{stockJour:i}=e();if(!i)return;const a={id:`equipe_matin_${r.getTime()}`,date:r,periode:"matin",vendeuse:t,produits:i.produits.map(c=>({produitId:c.produitId,stockDebut:c.stockDebut,vendu:0,reste:c.stockDebut,produit:c.produit})),statut:"en_cours",createdAt:new Date,updatedAt:new Date};n({equipeMatin:a})},commencerEquipeSoir:(t,r)=>{const{equipeMatin:i}=e();if(!i)return;const a={id:`equipe_soir_${r.getTime()}`,date:r,periode:"soir",vendeuse:t,produits:i.produits.map(c=>({produitId:c.produitId,stockDebut:c.reste,vendu:0,reste:c.reste,produit:c.produit})),statut:"en_cours",createdAt:new Date,updatedAt:new Date};n({equipeSoir:a})},saisirVenteMatin:(t,r)=>{n(i=>i.equipeMatin?{equipeMatin:{...i.equipeMatin,produits:i.equipeMatin.produits.map(a=>a.produitId===t?{...a,vendu:r,reste:a.stockDebut-r}:a),updatedAt:new Date}}:i),Yd&&clearTimeout(Yd),Yd=setTimeout(async()=>{try{console.log(" Sauvegarde automatique quipe matin..."),await e().sauvegarderEquipe("matin")}catch(i){console.error(" Erreur sauvegarde automatique matin:",i)}},2e3)},saisirVenteSoir:(t,r)=>{n(i=>i.equipeSoir?{equipeSoir:{...i.equipeSoir,produits:i.equipeSoir.produits.map(a=>a.produitId===t?{...a,vendu:r,reste:a.stockDebut-r}:a),updatedAt:new Date}}:i),Yd&&clearTimeout(Yd),Yd=setTimeout(async()=>{try{console.log(" Sauvegarde automatique quipe soir..."),await e().sauvegarderEquipe("soir")}catch(i){console.error(" Erreur sauvegarde automatique soir:",i)}},2e3)},terminerEquipeMatin:()=>{n(t=>({equipeMatin:t.equipeMatin?{...t.equipeMatin,statut:"termine",updatedAt:new Date}:null}))},terminerEquipeSoir:()=>{n(t=>({equipeSoir:t.equipeSoir?{...t.equipeSoir,statut:"termine",updatedAt:new Date}:null})),e().calculerVentesBoutique()},calculerVentesBoutique:()=>{const{stockJour:t,equipeMatin:r,equipeSoir:i}=e();if(!t||!r||!i)return;const a={id:`ventes_${t.date.getTime()}`,date:t.date,produits:t.produits.map(c=>{const d=r.produits.find(b=>b.produitId===c.produitId),h=i.produits.find(b=>b.produitId===c.produitId),f=d?.vendu||0,p=d?.reste||0,y=h?.vendu||0,N=h?.reste||0;return{produitId:c.produitId,produit:c.produit,stockDebut:c.stockDebut,venduMatin:f,resteMidi:p,venduSoir:y,invenduBoutique:N,venduTotal:f+y}}),createdAt:new Date,updatedAt:new Date};n({ventesJour:a})},calculerResteMidi:t=>{const{equipeMatin:r}=e();if(!r)return 0;const i=r.produits.find(a=>a.produitId===t);return i?i.stockDebut-i.vendu:0},calculerInvenduBoutique:t=>{const{equipeSoir:r}=e();if(!r)return 0;const i=r.produits.find(a=>a.produitId===t);return i?i.reste:0},sauvegarderEquipe:async t=>{const{equipeMatin:r,equipeSoir:i}=e(),a=t==="matin"?r:i;if(a){n({isLoading:!0});try{console.log(` Dbut sauvegarde quipe ${t}:`,a);const d=`${a.date.toISOString().split("T")[0]}_${t}`,h={...a,date:a.date,createdAt:a.createdAt,updatedAt:new Date};console.log(` Sauvegarde vers document ID: ${d}`);const f=Tn(wt,"shopShifts",d);await ma(f,h,{merge:!0}),console.log(` quipe ${t} sauvegarde avec succs - ID: ${d}`),n({isLoading:!1})}catch(c){throw n({isLoading:!1}),console.error(` Erreur lors de la sauvegarde de l'quipe ${t}:`,c),c}}},sauvegarderVentes:async()=>{const{ventesJour:t}=e();if(t){n({isLoading:!0});try{console.log(" Dbut sauvegarde ventes boutique:",t);const i=`ventes_${t.date.toISOString().split("T")[0]}`,a={...t,date:t.date,createdAt:t.createdAt,updatedAt:new Date};console.log(` Sauvegarde ventes vers document ID: ${i}`);const c=Tn(wt,"shopSales",i);await ma(c,a,{merge:!0}),console.log(` Ventes boutique sauvegardes avec succs - ID: ${i}`),n({isLoading:!1})}catch(r){throw n({isLoading:!1}),console.error(" Erreur lors de la sauvegarde des ventes:",r),r}}},chargerEquipe:async(t,r)=>{try{const i=t.toISOString().split("T")[0],a=`${i}_${r}`;console.log(` Chargement quipe ${r} pour ${i}...`);const c=Tn(wt,"shopShifts",a),d=await ac(c);if(d.exists()){const h=d.data(),f={...h,date:h.date.toDate(),createdAt:h.createdAt.toDate(),updatedAt:h.updatedAt.toDate()};n(r==="matin"?{equipeMatin:f}:{equipeSoir:f}),console.log(` quipe ${r} charge depuis Firebase`)}else console.log(` Aucune quipe ${r} trouve pour cette date`),n(r==="matin"?{equipeMatin:null}:{equipeSoir:null})}catch(i){console.error(` Erreur lors du chargement de l'quipe ${r}:`,i)}},chargerVentes:async t=>{try{const r=t.toISOString().split("T")[0],i=`ventes_${r}`;console.log(` Chargement ventes pour ${r}...`);const a=Tn(wt,"shopSales",i),c=await ac(a);if(c.exists()){const d=c.data(),h={...d,date:d.date.toDate(),createdAt:d.createdAt.toDate(),updatedAt:d.updatedAt.toDate()};n({ventesJour:h}),console.log(" Ventes charges depuis Firebase")}else console.log(" Aucunes ventes trouves pour cette date"),n({ventesJour:null})}catch(r){console.error(" Erreur lors du chargement des ventes:",r)}},setLoading:t=>{n({isLoading:t})}})),vu=vc((n,e)=>({produits:[],produitEnEdition:null,isLoadingProduits:!1,clients:[],clientEnEdition:null,isLoadingClients:!1,chargerProduits:async()=>{n({isLoadingProduits:!0});try{const t=await Cn.getAll("produits");n({produits:t,isLoadingProduits:!1})}catch(t){throw console.error("Erreur lors du chargement des produits:",t),n({isLoadingProduits:!1}),t}},ajouterProduit:async t=>{n({isLoadingProduits:!0});try{const r=new Date,i={...t,createdAt:r,updatedAt:r},c={id:(await Cn.create("produits",i)).id,...i};n(d=>({produits:[...d.produits,c],isLoadingProduits:!1}))}catch(r){throw console.error("Erreur lors de l'ajout du produit:",r),n({isLoadingProduits:!1}),r}},modifierProduit:async(t,r)=>{n({isLoadingProduits:!0});try{const i={...r,updatedAt:new Date};await Cn.update("produits",t,i),n(a=>({produits:a.produits.map(c=>c.id===t?{...c,...i}:c),isLoadingProduits:!1,produitEnEdition:null}))}catch(i){throw console.error("Erreur lors de la modification du produit:",i),n({isLoadingProduits:!1}),i}},supprimerProduit:async t=>{n({isLoadingProduits:!0});try{await Cn.delete("produits",t),n(r=>({produits:r.produits.filter(i=>i.id!==t),isLoadingProduits:!1}))}catch(r){throw console.error("Erreur lors de la suppression du produit:",r),n({isLoadingProduits:!1}),r}},setProduitEnEdition:t=>{n({produitEnEdition:t})},chargerClients:async()=>{n({isLoadingClients:!0});try{const t=await Cn.getAll("clients");n({clients:t,isLoadingClients:!1})}catch(t){throw console.error("Erreur lors du chargement des clients:",t),n({isLoadingClients:!1}),t}},ajouterClient:async t=>{n({isLoadingClients:!0});try{const r=new Date,i={...t,createdAt:r,updatedAt:r},c={id:(await Cn.create("clients",i)).id,...i};n(d=>({clients:[...d.clients,c],isLoadingClients:!1}))}catch(r){throw console.error("Erreur lors de l'ajout du client:",r),n({isLoadingClients:!1}),r}},modifierClient:async(t,r)=>{n({isLoadingClients:!0});try{const i={...r,updatedAt:new Date};await Cn.update("clients",t,i),n(a=>({clients:a.clients.map(c=>c.id===t?{...c,...i}:c),isLoadingClients:!1,clientEnEdition:null}))}catch(i){throw console.error("Erreur lors de la modification du client:",i),n({isLoadingClients:!1}),i}},supprimerClient:async t=>{n({isLoadingClients:!0});try{await Cn.delete("clients",t),n(r=>({clients:r.clients.filter(i=>i.id!==t),isLoadingClients:!1}))}catch(r){throw console.error("Erreur lors de la suppression du client:",r),n({isLoadingClients:!1}),r}},setClientEnEdition:t=>{n({clientEnEdition:t})},getProduitById:t=>{const{produits:r}=e();return r.find(i=>i.id===t)},getClientById:t=>{const{clients:r}=e();return r.find(i=>i.id===t)},getProduitsActifs:()=>{const{produits:t}=e();return t.filter(r=>r.active)},getClientsActifs:()=>{const{clients:t}=e();return t.filter(r=>r.active)},initialiserProduitsParDefaut:async()=>{console.log(" Initialisation automatique dsactive - charger manuellement les produits"),await e().chargerProduits()},initialiserClientsParDefaut:async()=>{console.log(" Initialisation automatique dsactive - charger manuellement les clients"),await e().chargerClients()}})),rM=vc((n,e)=>({rapportJour:null,historiqueRapports:[],indicateurs:null,isLoading:!1,genererRapportJour:async t=>{n({isLoading:!0});try{console.log(" Gnration rapport pour:",t.toISOString().split("T")[0]);const r=wl.getState(),i=Tg.getState(),a=nm.getState(),c=vu.getState();console.log(" Chargement des donnes depuis les stores...");try{console.log(" Test direct Firebase...");const H=Pa(Hn(wt,"productionPrograms"),tr("date",">=",new Date(t.toISOString().split("T")[0]+"T00:00:00.000Z")),tr("date","<=",new Date(t.toISOString().split("T")[0]+"T23:59:59.999Z"))),he=await fa(H);console.log(" Documents trouvs dans productionPrograms:",he.docs.length),he.docs.forEach((re,V)=>{console.log(` Document ${V+1}:`,re.id,re.data())})}catch(H){console.error(" Erreur test Firebase:",H)}console.log(" Chargement programme production..."),console.log(" Date recherche:",t,t.toISOString().split("T")[0]),await r.chargerProgramme(t),console.log(" Programme production charg");const d=wl.getState().programmeActuel;console.log(" Programme aprs chargement:",d),console.log(" Chargement ventes boutique..."),await i.chargerVentes(t),console.log(" Ventes boutique charges"),console.log(" Chargement retours clients..."),await a.chargerInvendusDuJour(t),console.log(" Retours clients chargs"),console.log(" Chargement donnes de rfrence..."),c.produits.length===0&&await c.chargerProduits(),console.log(" Donnes de rfrence charges");const h=wl.getState(),f=Tg.getState(),p=nm.getState(),y=vu.getState(),N=h.programmeActuel,b=f.ventesJour,j=p.invendusClients,C=N?.commandesClients||h.commandesClients,R=y.produits;if(console.log(" Debug - Donnes rcupres:",{programme:N,ventesJour:b,invendusClients:j,commandesClients:C,produits:R,productionState:h}),N&&console.log(" Structure dtaille du programme:",{"programme.id":N.id,"programme.dateProduction":N.dateProduction,"programme keys":Object.keys(N),"programme complet":JSON.stringify(N,null,2)}),!N||!N.totauxParProduit||N.totauxParProduit.length===0){console.warn(" Aucun programme de production trouv pour cette date. Gnration d'un rapport vide...");const H={id:`rapport_${t.getTime()}`,date:t,produits:[],totaux:{quantitePrevue:0,quantiteProduite:0,quantiteVendueTotal:0,invendusTotal:0,tauxVenteGlobal:0,pertesTotales:0},statut:"genere",createdAt:new Date,updatedAt:new Date};n({rapportJour:H,isLoading:!1}),console.log(" Rapport vide gnr:",H);try{const re=`rapport_${t.toISOString().split("T")[0]}`,V=Tn(wt,"dailyReports",re);await ma(V,H,{merge:!0}),console.log(" Rapport vide sauvegard en Firebase")}catch(he){console.error(" Erreur lors de la sauvegarde du rapport vide:",he)}return}console.log(" Donnes charges:",{programme:!!N,"programme.totauxParProduit":N?.totauxParProduit,ventesJour:!!b,invendusClients:j.length,commandesClients:C.length,"commandesClients dtail":C});const I=N.totauxParProduit.map(H=>{const he=R.find(X=>X.id===H.produitId),re=H.totalGlobal,V=H.totalBoutique||0,D=C.flatMap(X=>X.produits).filter(X=>X.produitId===H.produitId).reduce((X,q)=>{const J=Object.values(q.repartitionCars||{}).reduce((ne,ue)=>ne+(Number(ue)||0),0);return X+J},0),k=b?.produits.find(X=>X.produitId===H.produitId),G=k?.venduTotal||0,S=k?.invenduBoutique||0,L=j.flatMap(X=>X.produits).filter(X=>X.produitId===H.produitId).reduce((X,q)=>X+q.invendus,0),F=D-L,ae=D+V,ve=F+G,K=L+S,ce=(X,q)=>q>0?Math.round(X/q*1e4)/100:0,me=ce(F,D),Se=ce(G,V),qe=ce(ve,ae);return{produitId:H.produitId,produit:he,quantitePrevue:re,quantiteProduite:ae,quantiteVendueClients:F,quantiteVendueBoutique:G,quantiteVendueTotal:ve,invendusClients:L,invendusBoutique:S,invendusTotal:K,tauxVenteClients:me,tauxVenteBoutique:Se,tauxVenteGlobal:qe,ecartPrevuProduit:ae-re,ecartProduitVendu:ae-ve}}),B=I.reduce((H,he)=>({quantitePrevue:H.quantitePrevue+he.quantitePrevue,quantiteProduite:H.quantiteProduite+he.quantiteProduite,quantiteVendueTotal:H.quantiteVendueTotal+he.quantiteVendueTotal,invendusTotal:H.invendusTotal+he.invendusTotal,tauxVenteGlobal:0,pertesTotales:H.pertesTotales+he.invendusTotal}),{quantitePrevue:0,quantiteProduite:0,quantiteVendueTotal:0,invendusTotal:0,tauxVenteGlobal:0,pertesTotales:0});B.tauxVenteGlobal=B.quantiteProduite>0?Math.round(B.quantiteVendueTotal/B.quantiteProduite*1e4)/100:0;const z={id:`rapport_${t.getTime()}`,date:t,produits:I,totaux:B,statut:"genere",createdAt:new Date,updatedAt:new Date};n({rapportJour:z,isLoading:!1}),e().calculerIndicateursPerformance(t),console.log(" Rapport gnr avec succs:",z),console.log(" Sauvegarde automatique du rapport en Firebase...");try{const he=`rapport_${t.toISOString().split("T")[0]}`,re=Tn(wt,"dailyReports",he);await ma(re,z,{merge:!0}),console.log(" Rapport sauvegard automatiquement en Firebase")}catch(H){console.error(" Erreur lors de la sauvegarde automatique:",H)}}catch(r){throw n({isLoading:!1}),console.error(" Erreur lors de la gnration du rapport:",r),r}},chargerRapport:async t=>{n({isLoading:!0});try{const r=t.toISOString().split("T")[0];console.log(` Chargement rapport pour ${r}...`);const i=`rapport_${r}`,a=Tn(wt,"dailyReports",i),c=await ac(a);if(c.exists()){const d=c.data(),h={...d,date:d.date.toDate(),createdAt:d.createdAt.toDate(),updatedAt:d.updatedAt.toDate()};n({rapportJour:h}),console.log(" Rapport charg depuis Firebase"),e().calculerIndicateursPerformance(t)}else console.log(" Aucun rapport trouv pour cette date"),n({rapportJour:null,indicateurs:null});n({isLoading:!1})}catch(r){n({isLoading:!1}),console.error(" Erreur lors du chargement du rapport:",r)}},validerRapport:async()=>{const{rapportJour:t}=e();if(t)try{const r={...t,statut:"valide",updatedAt:new Date},a=`rapport_${r.date.toISOString().split("T")[0]}`;console.log(` Sauvegarde du rapport valid vers document ID: ${a}`);const c=Tn(wt,"dailyReports",a);await ma(c,r,{merge:!0}),n({rapportJour:r}),console.log(" Rapport valid et sauvegard avec succs")}catch(r){throw console.error(" Erreur lors de la validation du rapport:",r),r}},chargerHistorique:async(t,r)=>{n({isLoading:!0});try{console.log(` Chargement de l'historique du ${t.toISOString().split("T")[0]} au ${r.toISOString().split("T")[0]}`);const i=Pa(Hn(wt,"dailyReports"),tr("date",">=",t),tr("date","<=",r)),a=await fa(i);if(a.empty)console.log(" Aucun rapport trouv pour cette priode"),n({historiqueRapports:[],isLoading:!1});else{const c=a.docs.map(d=>{const h=d.data();return{...h,date:h.date.toDate(),createdAt:h.createdAt.toDate(),updatedAt:h.updatedAt.toDate()}});c.sort((d,h)=>h.date.getTime()-d.date.getTime()),n({historiqueRapports:c,isLoading:!1}),console.log(` ${c.length} rapport(s) charg(s) depuis Firebase`)}}catch(i){throw n({isLoading:!1}),console.error(" Erreur lors du chargement de l'historique:",i),i}},calculerIndicateursPerformance:t=>{const{rapportJour:r}=e();if(!r)return;const i=r.produits.reduce((d,h)=>({vendu:d.vendu+h.quantiteVendueClients,invendus:d.invendus+h.invendusClients}),{vendu:0,invendus:0}),a=r.produits.reduce((d,h)=>({vendu:d.vendu+h.quantiteVendueBoutique,invendus:d.invendus+h.invendusBoutique}),{vendu:0,invendus:0}),c={date:t,tauxVenteClients:e().calculerTauxVente(i.vendu,i.vendu+i.invendus),tauxVenteBoutique:e().calculerTauxVente(a.vendu,a.vendu+a.invendus),tauxVenteGlobal:r.totaux.tauxVenteGlobal,pertesClients:i.invendus,pertesBoutique:a.invendus,pertesTotales:r.totaux.pertesTotales};n({indicateurs:c})},calculerTauxVente:(t,r)=>r===0?0:Math.round(t/r*100*100)/100,calculerEcart:(t,r)=>t-r,setLoading:t=>{n({isLoading:t})}})),rm=vc((n,e)=>({factures:[],factureActive:null,parametres:null,isLoading:!1,genererFacturesDepuisLivraisons:async(t,r,i)=>{n({isLoading:!0});try{const{parametres:a}=e();if(!a)throw new Error("Paramtres de facturation non configurs");if(!r||r.length===0){n({isLoading:!1});return}const c=[],{factures:d}=e(),h=t.toISOString().split("T")[0],f=d.filter(y=>y.dateLivraison.toISOString().split("T")[0]===h);if(f.length>0){for(const y of f)e().verifierRetoursCompletes(y.clientId,t,i)&&y.statut==="en_attente_retours"&&(await Xc(Tn(wt,"factures",y.id),{statut:"validee",retoursCompletes:!0,validatedAt:new Date,updatedAt:new Date}),n(b=>({factures:b.factures.map(j=>j.id===y.id?{...j,statut:"validee",retoursCompletes:!0,validatedAt:new Date,updatedAt:new Date}:j)})));n({isLoading:!1});return}const p=new Map;r.forEach(y=>{const N=y.clientId;p.has(N)||p.set(N,[]),p.get(N).push(y)});for(const[y,N]of p){let b=N[0]?.client;if(!b)try{const I=await ac(Tn(wt,"clients",y));I.exists()&&(b={id:I.id,...I.data()})}catch(I){console.warn(" Impossible de rcuprer les infos client:",I)}const j=i.find(I=>I.clientId===y),C=e().verifierRetoursCompletes(y,t,i),R=[];for(const I of N)for(const B of I.produits){if(!B.produit&&B.produitId)try{const H=await ac(Tn(wt,"produits",B.produitId));H.exists()?B.produit={id:H.id,...H.data(),createdAt:H.data().createdAt?.toDate(),updatedAt:H.data().updatedAt?.toDate()}:console.warn(` Produit ${B.produitId} non trouv dans Firebase`)}catch(H){console.error(` Erreur rcupration produit ${B.produitId}:`,H)}const z=Object.values(B.repartitionCars||{}).reduce((H,he)=>H+(Number(he)||0),0);if(z>0){const H=j?.produits.find(k=>k.produitId===B.produitId),he=H?.invendus||0,re=z-he;console.log(` Calcul facture pour ${B.produit?.nom||B.produitId}:`,{clientId:y,clientNom:b?.nom,produitId:B.produitId,quantiteLivree:z,quantiteRetournee:he,quantiteFacturee:re,retoursClientTrouve:!!j,produitRetourTrouve:!!H,produitsRetours:j?.produits.map(k=>({id:k.produitId,invendus:k.invendus}))});const V=b?.typeClient==="client"||I.client?.typeClient==="client"?B.produit?.prixClient||B.produit?.prixUnitaire||0:B.produit?.prixBoutique||B.produit?.prixUnitaire||0,D=re*V;R.push({produitId:B.produitId,produit:B.produit,quantiteLivree:z,quantiteRetournee:he,quantiteFacturee:re,prixUnitaire:V,montantLigne:D})}}if(R.length>0){const I=e().calculerTotauxFacture(R,a.tauxTVADefaut),B={id:`facture_${y}_${Date.now()}`,numeroFacture:e().genererNumeroFacture(t),clientId:y,client:b,dateLivraison:t,dateFacture:new Date,lignes:R,...I,tauxTVA:a.tauxTVADefaut,statut:C?"validee":"en_attente_retours",retoursCompletes:C,conditionsPaiement:b?.conditionsPaiement||a.conditionsPaiementDefaut,createdAt:new Date,updatedAt:new Date};c.push(B);const z=B.lignes.map(re=>{const V={produitId:re.produitId,quantiteLivree:re.quantiteLivree,quantiteRetournee:re.quantiteRetournee,quantiteFacturee:re.quantiteFacturee,prixUnitaire:re.prixUnitaire,montantLigne:re.montantLigne};return re.produit&&(V.produit={id:re.produit.id,nom:re.produit.nom,description:re.produit.description||"",unite:re.produit.unite,prixClient:re.produit.prixClient||0,prixBoutique:re.produit.prixBoutique||0,prixUnitaire:re.produit.prixUnitaire||0,active:re.produit.active!==!1}),V}),H={id:B.id,numeroFacture:B.numeroFacture,clientId:B.clientId,dateLivraison:B.dateLivraison,dateFacture:B.dateFacture,lignes:z,totalHT:B.totalHT,tauxTVA:B.tauxTVA,montantTVA:B.montantTVA,totalTTC:B.totalTTC,statut:B.statut,retoursCompletes:B.retoursCompletes,conditionsPaiement:B.conditionsPaiement,createdAt:B.createdAt,updatedAt:B.updatedAt};if(B.client){const re={id:B.client.id,nom:B.client.nom,adresse:B.client.adresse||"",telephone:B.client.telephone||"",email:B.client.email||"",typeClient:B.client.typeClient,active:B.client.active};H.client=re}const he=Tn(wt,"factures",B.id);await ma(he,H,{merge:!0})}}n(y=>({factures:[...y.factures,...c],isLoading:!1}))}catch(a){throw n({isLoading:!1}),console.error(" Erreur lors de la gnration des factures:",a),a}},chargerFactures:async(t,r)=>{n({isLoading:!0});try{let i=Hn(wt,"factures");t&&r?i=Pa(Hn(wt,"factures"),tr("dateLivraison",">=",t),tr("dateLivraison","<=",r),Sg("dateFacture","desc")):i=Pa(Hn(wt,"factures"),Sg("dateFacture","desc"));const a=await fa(i);if(a.empty)n({factures:[]});else{const c=a.docs.map(d=>{const h=d.data();return{...h,dateLivraison:h.dateLivraison.toDate(),dateFacture:h.dateFacture.toDate(),createdAt:h.createdAt.toDate(),updatedAt:h.updatedAt.toDate(),validatedAt:h.validatedAt?h.validatedAt.toDate():void 0,paidAt:h.paidAt?h.paidAt.toDate():void 0}});n({factures:c})}n({isLoading:!1})}catch(i){throw n({isLoading:!1}),console.error(" Erreur lors du chargement des factures:",i),i}},chargerFacture:async t=>{n({isLoading:!0});try{const r=Tn(wt,"factures",t),i=await ac(r);if(i.exists()){const a=i.data(),c={...a,dateLivraison:a.dateLivraison.toDate(),dateFacture:a.dateFacture.toDate(),createdAt:a.createdAt.toDate(),updatedAt:a.updatedAt.toDate(),validatedAt:a.validatedAt?a.validatedAt.toDate():void 0,paidAt:a.paidAt?a.paidAt.toDate():void 0};n({factureActive:c})}else throw new Error("Facture non trouve");n({isLoading:!1})}catch(r){throw n({isLoading:!1}),console.error(" Erreur lors du chargement de la facture:",r),r}},validerFacture:async t=>{try{const r=Tn(wt,"factures",t),i={statut:"validee",validatedAt:new Date,updatedAt:new Date};await Xc(r,i),n(a=>({factures:a.factures.map(c=>c.id===t?{...c,...i}:c),factureActive:a.factureActive?.id===t?{...a.factureActive,...i}:a.factureActive}))}catch(r){throw console.error(" Erreur lors de la validation:",r),r}},envoyerFacture:async t=>{try{const r={statut:"envoyee",updatedAt:new Date};await Xc(Tn(wt,"factures",t),r),n(i=>({factures:i.factures.map(a=>a.id===t?{...a,...r}:a),factureActive:i.factureActive?.id===t?{...i.factureActive,...r}:i.factureActive}))}catch(r){throw console.error(" Erreur lors de l'envoi:",r),r}},marquerPayee:async(t,r=new Date)=>{try{const i={statut:"payee",paidAt:r,updatedAt:new Date};await Xc(Tn(wt,"factures",t),i),n(a=>({factures:a.factures.map(c=>c.id===t?{...c,...i}:c),factureActive:a.factureActive?.id===t?{...a.factureActive,...i}:a.factureActive}))}catch(i){throw console.error(" Erreur lors du marquage du paiement:",i),i}},annulerFacture:async(t,r)=>{try{const i={statut:"annulee",notes:r||"Facture annule",updatedAt:new Date};await Xc(Tn(wt,"factures",t),i),n(a=>({factures:a.factures.map(c=>c.id===t?{...c,...i}:c)}))}catch(i){throw console.error(" Erreur lors de l'annulation:",i),i}},supprimerFacture:async t=>{try{await c0(Tn(wt,"factures",t)),n(r=>({factures:r.factures.filter(i=>i.id!==t),factureActive:r.factureActive?.id===t?null:r.factureActive}))}catch(r){throw console.error(" Erreur lors de la suppression:",r),r}},chargerParametres:async()=>{try{const t=Tn(wt,"parametres","facturation"),r=await ac(t);if(r.exists()){const i=r.data();i.tauxTVADefaut===18&&(i.tauxTVADefaut=0,await ma(t,i)),n({parametres:i})}else{const i={id:"facturation",tauxTVADefaut:0,conditionsPaiementDefaut:"Payable  30 jours",mentionsLegales:"Boulangerie Chez MINA - Dakar, Sngal - RC: XXXXX - NINEA: XXXXX",numeroFactureProchain:1,prefixeFacture:"FACT"};await ma(t,i),n({parametres:i})}}catch(t){throw console.error(" Erreur lors du chargement des paramtres:",t),t}},sauvegarderParametres:async t=>{try{const{parametres:r}=e();if(!r)return;const i={...r,...t},a=Tn(wt,"parametres","facturation");await ma(a,i,{merge:!0}),n({parametres:i})}catch(r){throw console.error(" Erreur lors de la sauvegarde des paramtres:",r),r}},calculerTotauxFacture:(t,r)=>{const i=t.reduce((d,h)=>d+h.montantLigne,0),a=Math.round(i*(r/100)*100)/100,c=Math.round((i+a)*100)/100;return{totalHT:Math.round(i*100)/100,montantTVA:a,totalTTC:c}},genererNumeroFacture:t=>{const{parametres:r}=e();if(!r)return"FACT-001";const i=t.getFullYear(),a=(t.getMonth()+1).toString().padStart(2,"0"),c=t.getDate().toString().padStart(2,"0"),d=r.numeroFactureProchain.toString().padStart(3,"0");return`${r.prefixeFacture}-${i}${a}${c}-${d}`},verifierRetoursCompletes:(t,r,i)=>i.some(a=>a.clientId===t&&a.dateLivraison.toDateString()===r.toDateString()&&a.retoursCompletes===!0),setLoading:t=>{n({isLoading:t})},setFactureActive:t=>{n({factureActive:t})},actualiserStatutsFactures:async()=>{try{const{factures:t}=e(),r=t.filter(i=>i.statut==="en_attente_retours");if(r.length===0)return;for(const i of r){const a=new Date(i.dateLivraison);a.setHours(0,0,0,0);const c=new Date(i.dateLivraison);c.setHours(23,59,59,999),(await fa(Pa(Hn(wt,"clientReturns"),tr("clientId","==",i.clientId),tr("dateLivraison",">=",a),tr("dateLivraison","<=",c)))).docs.map(p=>({id:p.id,...p.data(),dateLivraison:p.data().dateLivraison.toDate(),createdAt:p.data().createdAt.toDate(),updatedAt:p.data().updatedAt.toDate()})).some(p=>p.retoursCompletes===!0)&&(await Xc(Tn(wt,"factures",i.id),{statut:"validee",retoursCompletes:!0,validatedAt:new Date,updatedAt:new Date}),n(p=>({factures:p.factures.map(y=>y.id===i.id?{...y,statut:"validee",retoursCompletes:!0,validatedAt:new Date,updatedAt:new Date}:y)})))}}catch(t){console.error(" Erreur lors de l'actualisation des statuts:",t)}},modifierTauxTVA:async(t,r)=>{try{const i=e().factures.find(d=>d.id===t);if(!i)throw new Error("Facture non trouve");const a=e().calculerTotauxFacture(i.lignes,r),c={tauxTVA:r,montantTVA:a.montantTVA,totalTTC:a.totalTTC,updatedAt:new Date};await Xc(Tn(wt,"factures",t),c),n(d=>({factures:d.factures.map(h=>h.id===t?{...h,...c}:h),factureActive:d.factureActive?.id===t?{...d.factureActive,...c}:d.factureActive}))}catch(i){throw console.error(" Erreur lors de la modification du taux TVA:",i),i}}})),iM=()=>{const{user:n,logout:e}=Am();return l.jsx("header",{className:"bg-white border-b border-gray-200",children:l.jsx("div",{className:"px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Dashboard"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grez votre boulangerie efficacement"})]}),l.jsx("div",{className:"flex items-center space-x-4",children:n&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center border border-orange-200",children:l.jsxs("span",{className:"text-sm font-bold text-orange-700",children:[(n.nom||n.email||"U").charAt(0).toUpperCase(),(n.prenom||"").charAt(0).toUpperCase()]})}),l.jsxs("div",{className:"text-sm hidden md:block",children:[l.jsx("div",{className:"font-medium text-gray-900",children:n.nom?`${n.nom} ${n.prenom}`:n.email}),l.jsx("div",{className:"text-gray-500 text-xs capitalize bg-gray-100 px-2 py-0.5 rounded-full inline-block mt-0.5",children:n.role})]})]}),l.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Dconnexion",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})})]})})})};function sM(n,e){const t=n.icons,r=n.aliases||Object.create(null),i=Object.create(null);function a(c){if(t[c])return i[c]=[];if(!(c in i)){i[c]=null;const d=r[c]&&r[c].parent,h=d&&a(d);h&&(i[c]=[d].concat(h))}return i[c]}return Object.keys(t).concat(Object.keys(r)).forEach(a),i}const pS=Object.freeze({left:0,top:0,width:16,height:16}),Cg=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Py=Object.freeze({...pS,...Cg}),s1=Object.freeze({...Py,body:"",hidden:!1});function aM(n,e){const t={};!n.hFlip!=!e.hFlip&&(t.hFlip=!0),!n.vFlip!=!e.vFlip&&(t.vFlip=!0);const r=((n.rotate||0)+(e.rotate||0))%4;return r&&(t.rotate=r),t}function d_(n,e){const t=aM(n,e);for(const r in s1)r in Cg?r in n&&!(r in t)&&(t[r]=Cg[r]):r in e?t[r]=e[r]:r in n&&(t[r]=n[r]);return t}function oM(n,e,t){const r=n.icons,i=n.aliases||Object.create(null);let a={};function c(d){a=d_(r[d]||i[d],a)}return c(e),t.forEach(c),d_(n,a)}function gS(n,e){const t=[];if(typeof n!="object"||typeof n.icons!="object")return t;n.not_found instanceof Array&&n.not_found.forEach(i=>{e(i,null),t.push(i)});const r=sM(n);for(const i in r){const a=r[i];a&&(e(i,oM(n,i,a)),t.push(i))}return t}const lM={provider:"",aliases:{},not_found:{},...pS};function Zx(n,e){for(const t in e)if(t in n&&typeof n[t]!=typeof e[t])return!1;return!0}function xS(n){if(typeof n!="object"||n===null)return null;const e=n;if(typeof e.prefix!="string"||!n.icons||typeof n.icons!="object"||!Zx(n,lM))return null;const t=e.icons;for(const i in t){const a=t[i];if(!i||typeof a.body!="string"||!Zx(a,s1))return null}const r=e.aliases||Object.create(null);for(const i in r){const a=r[i],c=a.parent;if(!i||typeof c!="string"||!t[c]&&!r[c]||!Zx(a,s1))return null}return e}const h_=Object.create(null);function cM(n,e){return{provider:n,prefix:e,icons:Object.create(null),missing:new Set}}function Sh(n,e){const t=h_[n]||(h_[n]=Object.create(null));return t[e]||(t[e]=cM(n,e))}function vS(n,e){return xS(e)?gS(e,(t,r)=>{r?n.icons[t]=r:n.missing.add(t)}):[]}function uM(n,e,t){try{if(typeof t.body=="string")return n.icons[e]={...t},!0}catch{}return!1}const yS=/^[a-z0-9]+(-[a-z0-9]+)*$/,f0=(n,e,t,r="")=>{const i=n.split(":");if(n.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const d=i.pop(),h=i.pop(),f={provider:i.length>0?i[0]:r,prefix:h,name:d};return e&&!Yp(f)?null:f}const a=i[0],c=a.split("-");if(c.length>1){const d={provider:r,prefix:c.shift(),name:c.join("-")};return e&&!Yp(d)?null:d}if(t&&r===""){const d={provider:r,prefix:"",name:a};return e&&!Yp(d,t)?null:d}return null},Yp=(n,e)=>n?!!((e&&n.prefix===""||n.prefix)&&n.name):!1;let im=!1;function bS(n){return typeof n=="boolean"&&(im=n),im}function f_(n){const e=typeof n=="string"?f0(n,!0,im):n;if(e){const t=Sh(e.provider,e.prefix),r=e.name;return t.icons[r]||(t.missing.has(r)?null:void 0)}}function dM(n,e){const t=f0(n,!0,im);if(!t)return!1;const r=Sh(t.provider,t.prefix);return e?uM(r,t.name,e):(r.missing.add(t.name),!0)}function hM(n,e){if(typeof n!="object")return!1;if(typeof e!="string"&&(e=n.provider||""),im&&!e&&!n.prefix){let i=!1;return xS(n)&&(n.prefix="",gS(n,(a,c)=>{dM(a,c)&&(i=!0)})),i}const t=n.prefix;if(!Yp({prefix:t,name:"a"}))return!1;const r=Sh(e,t);return!!vS(r,n)}const wS=Object.freeze({width:null,height:null}),_S=Object.freeze({...wS,...Cg}),fM=/(-?[0-9.]*[0-9]+[0-9.]*)/g,mM=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function m_(n,e,t){if(e===1)return n;if(t=t||100,typeof n=="number")return Math.ceil(n*e*t)/t;if(typeof n!="string")return n;const r=n.split(fM);if(r===null||!r.length)return n;const i=[];let a=r.shift(),c=mM.test(a);for(;;){if(c){const d=parseFloat(a);isNaN(d)?i.push(a):i.push(Math.ceil(d*e*t)/t)}else i.push(a);if(a=r.shift(),a===void 0)return i.join("");c=!c}}function pM(n,e="defs"){let t="";const r=n.indexOf("<"+e);for(;r>=0;){const i=n.indexOf(">",r),a=n.indexOf("</"+e);if(i===-1||a===-1)break;const c=n.indexOf(">",a);if(c===-1)break;t+=n.slice(i+1,a).trim(),n=n.slice(0,r).trim()+n.slice(c+1)}return{defs:t,content:n}}function gM(n,e){return n?"<defs>"+n+"</defs>"+e:e}function xM(n,e,t){const r=pM(n);return gM(r.defs,e+r.content+t)}const vM=n=>n==="unset"||n==="undefined"||n==="none";function yM(n,e){const t={...Py,...n},r={..._S,...e},i={left:t.left,top:t.top,width:t.width,height:t.height};let a=t.body;[t,r].forEach(C=>{const R=[],I=C.hFlip,B=C.vFlip;let z=C.rotate;I?B?z+=2:(R.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),R.push("scale(-1 1)"),i.top=i.left=0):B&&(R.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),R.push("scale(1 -1)"),i.top=i.left=0);let H;switch(z<0&&(z-=Math.floor(z/4)*4),z=z%4,z){case 1:H=i.height/2+i.top,R.unshift("rotate(90 "+H.toString()+" "+H.toString()+")");break;case 2:R.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:H=i.width/2+i.left,R.unshift("rotate(-90 "+H.toString()+" "+H.toString()+")");break}z%2===1&&(i.left!==i.top&&(H=i.left,i.left=i.top,i.top=H),i.width!==i.height&&(H=i.width,i.width=i.height,i.height=H)),R.length&&(a=xM(a,'<g transform="'+R.join(" ")+'">',"</g>"))});const c=r.width,d=r.height,h=i.width,f=i.height;let p,y;c===null?(y=d===null?"1em":d==="auto"?f:d,p=m_(y,h/f)):(p=c==="auto"?h:c,y=d===null?m_(p,f/h):d==="auto"?f:d);const N={},b=(C,R)=>{vM(R)||(N[C]=R.toString())};b("width",p),b("height",y);const j=[i.left,i.top,h,f];return N.viewBox=j.join(" "),{attributes:N,viewBox:j,body:a}}const bM=/\sid="(\S+)"/g,wM="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let _M=0;function NM(n,e=wM){const t=[];let r;for(;r=bM.exec(n);)t.push(r[1]);if(!t.length)return n;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(a=>{const c=typeof e=="function"?e(a):e+(_M++).toString(),d=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n=n.replace(new RegExp('([#;"])('+d+')([")]|\\.[a-z])',"g"),"$1"+c+i+"$3")}),n=n.replace(new RegExp(i,"g"),""),n}const a1=Object.create(null);function AM(n,e){a1[n]=e}function o1(n){return a1[n]||a1[""]}function Dy(n){let e;if(typeof n.resources=="string")e=[n.resources];else if(e=n.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:n.path||"/",maxURL:n.maxURL||500,rotate:n.rotate||750,timeout:n.timeout||5e3,random:n.random===!0,index:n.index||0,dataAfterTimeout:n.dataAfterTimeout!==!1}}const My=Object.create(null),Af=["https://api.simplesvg.com","https://api.unisvg.com"],Kp=[];for(;Af.length>0;)Af.length===1||Math.random()>.5?Kp.push(Af.shift()):Kp.push(Af.pop());My[""]=Dy({resources:["https://api.iconify.design"].concat(Kp)});function SM(n,e){const t=Dy(e);return t===null?!1:(My[n]=t,!0)}function Oy(n){return My[n]}const jM=()=>{let n;try{if(n=fetch,typeof n=="function")return n}catch{}};let p_=jM();function EM(n,e){const t=Oy(n);if(!t)return 0;let r;if(!t.maxURL)r=0;else{let i=0;t.resources.forEach(c=>{i=Math.max(i,c.length)});const a=e+".json?icons=";r=t.maxURL-i-t.path.length-a.length}return r}function TM(n){return n===404}const CM=(n,e,t)=>{const r=[],i=EM(n,e),a="icons";let c={type:a,provider:n,prefix:e,icons:[]},d=0;return t.forEach((h,f)=>{d+=h.length+1,d>=i&&f>0&&(r.push(c),c={type:a,provider:n,prefix:e,icons:[]},d=h.length),c.icons.push(h)}),r.push(c),r};function IM(n){if(typeof n=="string"){const e=Oy(n);if(e)return e.path}return"/"}const RM=(n,e,t)=>{if(!p_){t("abort",424);return}let r=IM(e.provider);switch(e.type){case"icons":{const a=e.prefix,d=e.icons.join(","),h=new URLSearchParams({icons:d});r+=a+".json?"+h.toString();break}case"custom":{const a=e.uri;r+=a.slice(0,1)==="/"?a.slice(1):a;break}default:t("abort",400);return}let i=503;p_(n+r).then(a=>{const c=a.status;if(c!==200){setTimeout(()=>{t(TM(c)?"abort":"next",c)});return}return i=501,a.json()}).then(a=>{if(typeof a!="object"||a===null){setTimeout(()=>{a===404?t("abort",a):t("next",i)});return}setTimeout(()=>{t("success",a)})}).catch(()=>{t("next",i)})},LM={prepare:CM,send:RM};function NS(n,e){n.forEach(t=>{const r=t.loaderCallbacks;r&&(t.loaderCallbacks=r.filter(i=>i.id!==e))})}function kM(n){n.pendingCallbacksFlag||(n.pendingCallbacksFlag=!0,setTimeout(()=>{n.pendingCallbacksFlag=!1;const e=n.loaderCallbacks?n.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const r=n.provider,i=n.prefix;e.forEach(a=>{const c=a.icons,d=c.pending.length;c.pending=c.pending.filter(h=>{if(h.prefix!==i)return!0;const f=h.name;if(n.icons[f])c.loaded.push({provider:r,prefix:i,name:f});else if(n.missing.has(f))c.missing.push({provider:r,prefix:i,name:f});else return t=!0,!0;return!1}),c.pending.length!==d&&(t||NS([n],a.id),a.callback(c.loaded.slice(0),c.missing.slice(0),c.pending.slice(0),a.abort))})}))}let PM=0;function DM(n,e,t){const r=PM++,i=NS.bind(null,t,r);if(!e.pending.length)return i;const a={id:r,icons:e,callback:n,abort:i};return t.forEach(c=>{(c.loaderCallbacks||(c.loaderCallbacks=[])).push(a)}),i}function MM(n){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);n.sort((i,a)=>i.provider!==a.provider?i.provider.localeCompare(a.provider):i.prefix!==a.prefix?i.prefix.localeCompare(a.prefix):i.name.localeCompare(a.name));let r={provider:"",prefix:"",name:""};return n.forEach(i=>{if(r.name===i.name&&r.prefix===i.prefix&&r.provider===i.provider)return;r=i;const a=i.provider,c=i.prefix,d=i.name,h=t[a]||(t[a]=Object.create(null)),f=h[c]||(h[c]=Sh(a,c));let p;d in f.icons?p=e.loaded:c===""||f.missing.has(d)?p=e.missing:p=e.pending;const y={provider:a,prefix:c,name:d};p.push(y)}),e}function OM(n,e=!0,t=!1){const r=[];return n.forEach(i=>{const a=typeof i=="string"?f0(i,e,t):i;a&&r.push(a)}),r}const FM={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function qM(n,e,t,r){const i=n.resources.length,a=n.random?Math.floor(Math.random()*i):n.index;let c;if(n.random){let re=n.resources.slice(0);for(c=[];re.length>1;){const V=Math.floor(Math.random()*re.length);c.push(re[V]),re=re.slice(0,V).concat(re.slice(V+1))}c=c.concat(re)}else c=n.resources.slice(a).concat(n.resources.slice(0,a));const d=Date.now();let h="pending",f=0,p,y=null,N=[],b=[];typeof r=="function"&&b.push(r);function j(){y&&(clearTimeout(y),y=null)}function C(){h==="pending"&&(h="aborted"),j(),N.forEach(re=>{re.status==="pending"&&(re.status="aborted")}),N=[]}function R(re,V){V&&(b=[]),typeof re=="function"&&b.push(re)}function I(){return{startTime:d,payload:e,status:h,queriesSent:f,queriesPending:N.length,subscribe:R,abort:C}}function B(){h="failed",b.forEach(re=>{re(void 0,p)})}function z(){N.forEach(re=>{re.status==="pending"&&(re.status="aborted")}),N=[]}function H(re,V,D){const k=V!=="success";switch(N=N.filter(G=>G!==re),h){case"pending":break;case"failed":if(k||!n.dataAfterTimeout)return;break;default:return}if(V==="abort"){p=D,B();return}if(k){p=D,N.length||(c.length?he():B());return}if(j(),z(),!n.random){const G=n.resources.indexOf(re.resource);G!==-1&&G!==n.index&&(n.index=G)}h="completed",b.forEach(G=>{G(D)})}function he(){if(h!=="pending")return;j();const re=c.shift();if(re===void 0){if(N.length){y=setTimeout(()=>{j(),h==="pending"&&(z(),B())},n.timeout);return}B();return}const V={status:"pending",resource:re,callback:(D,k)=>{H(V,D,k)}};N.push(V),f++,y=setTimeout(he,n.rotate),t(re,e,V.callback)}return setTimeout(he),I}function AS(n){const e={...FM,...n};let t=[];function r(){t=t.filter(d=>d().status==="pending")}function i(d,h,f){const p=qM(e,d,h,(y,N)=>{r(),f&&f(y,N)});return t.push(p),p}function a(d){return t.find(h=>d(h))||null}return{query:i,find:a,setIndex:d=>{e.index=d},getIndex:()=>e.index,cleanup:r}}function g_(){}const ev=Object.create(null);function VM(n){if(!ev[n]){const e=Oy(n);if(!e)return;const t=AS(e),r={config:e,redundancy:t};ev[n]=r}return ev[n]}function BM(n,e,t){let r,i;if(typeof n=="string"){const a=o1(n);if(!a)return t(void 0,424),g_;i=a.send;const c=VM(n);c&&(r=c.redundancy)}else{const a=Dy(n);if(a){r=AS(a);const c=n.resources?n.resources[0]:"",d=o1(c);d&&(i=d.send)}}return!r||!i?(t(void 0,424),g_):r.query(e,i,t)().abort}function x_(){}function UM(n){n.iconsLoaderFlag||(n.iconsLoaderFlag=!0,setTimeout(()=>{n.iconsLoaderFlag=!1,kM(n)}))}function zM(n){const e=[],t=[];return n.forEach(r=>{(r.match(yS)?e:t).push(r)}),{valid:e,invalid:t}}function Sf(n,e,t){function r(){const i=n.pendingIcons;e.forEach(a=>{i&&i.delete(a),n.icons[a]||n.missing.add(a)})}if(t&&typeof t=="object")try{if(!vS(n,t).length){r();return}}catch(i){console.error(i)}r(),UM(n)}function v_(n,e){n instanceof Promise?n.then(t=>{e(t)}).catch(()=>{e(null)}):e(n)}function HM(n,e){n.iconsToLoad?n.iconsToLoad=n.iconsToLoad.concat(e).sort():n.iconsToLoad=e,n.iconsQueueFlag||(n.iconsQueueFlag=!0,setTimeout(()=>{n.iconsQueueFlag=!1;const{provider:t,prefix:r}=n,i=n.iconsToLoad;if(delete n.iconsToLoad,!i||!i.length)return;const a=n.loadIcon;if(n.loadIcons&&(i.length>1||!a)){v_(n.loadIcons(i,r,t),p=>{Sf(n,i,p)});return}if(a){i.forEach(p=>{const y=a(p,r,t);v_(y,N=>{const b=N?{prefix:r,icons:{[p]:N}}:null;Sf(n,[p],b)})});return}const{valid:c,invalid:d}=zM(i);if(d.length&&Sf(n,d,null),!c.length)return;const h=r.match(yS)?o1(t):null;if(!h){Sf(n,c,null);return}h.prepare(t,r,c).forEach(p=>{BM(t,p,y=>{Sf(n,p.icons,y)})})}))}const $M=(n,e)=>{const t=OM(n,!0,bS()),r=MM(t);if(!r.pending.length){let h=!0;return e&&setTimeout(()=>{h&&e(r.loaded,r.missing,r.pending,x_)}),()=>{h=!1}}const i=Object.create(null),a=[];let c,d;return r.pending.forEach(h=>{const{provider:f,prefix:p}=h;if(p===d&&f===c)return;c=f,d=p,a.push(Sh(f,p));const y=i[f]||(i[f]=Object.create(null));y[p]||(y[p]=[])}),r.pending.forEach(h=>{const{provider:f,prefix:p,name:y}=h,N=Sh(f,p),b=N.pendingIcons||(N.pendingIcons=new Set);b.has(y)||(b.add(y),i[f][p].push(y))}),a.forEach(h=>{const f=i[h.provider][h.prefix];f.length&&HM(h,f)}),e?DM(e,r,a):x_};function GM(n,e){const t={...n};for(const r in e){const i=e[r],a=typeof i;r in wS?(i===null||i&&(a==="string"||a==="number"))&&(t[r]=i):a===typeof t[r]&&(t[r]=r==="rotate"?i%4:i)}return t}const WM=/[\s,]+/;function YM(n,e){e.split(WM).forEach(t=>{switch(t.trim()){case"horizontal":n.hFlip=!0;break;case"vertical":n.vFlip=!0;break}})}function KM(n,e=0){const t=n.replace(/^-?[0-9.]*/,"");function r(i){for(;i<0;)i+=4;return i%4}if(t===""){const i=parseInt(n);return isNaN(i)?0:r(i)}else if(t!==n){let i=0;switch(t){case"%":i=25;break;case"deg":i=90}if(i){let a=parseFloat(n.slice(0,n.length-t.length));return isNaN(a)?0:(a=a/i,a%1===0?r(a):0)}}return e}function QM(n,e){let t=n.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)t+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+n+"</svg>"}function XM(n){return n.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function JM(n){return"data:image/svg+xml,"+XM(n)}function ZM(n){return'url("'+JM(n)+'")'}let Uf;function e9(){try{Uf=window.trustedTypes.createPolicy("iconify",{createHTML:n=>n})}catch{Uf=null}}function t9(n){return Uf===void 0&&e9(),Uf?Uf.createHTML(n):n}const SS={..._S,inline:!1},n9={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},r9={display:"inline-block"},l1={backgroundColor:"currentColor"},jS={backgroundColor:"transparent"},y_={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},b_={WebkitMask:l1,mask:l1,background:jS};for(const n in b_){const e=b_[n];for(const t in y_)e[n+t]=y_[t]}const i9={...SS,inline:!0};function w_(n){return n+(n.match(/^[-0-9.]+$/)?"px":"")}const s9=(n,e,t)=>{const r=e.inline?i9:SS,i=GM(r,e),a=e.mode||"svg",c={},d=e.style||{},h={...a==="svg"?n9:{}};if(t){const R=f0(t,!1,!0);if(R){const I=["iconify"],B=["provider","prefix"];for(const z of B)R[z]&&I.push("iconify--"+R[z]);h.className=I.join(" ")}}for(let R in e){const I=e[R];if(I!==void 0)switch(R){case"icon":case"style":case"children":case"onLoad":case"mode":case"ssr":case"fallback":break;case"_ref":h.ref=I;break;case"className":h[R]=(h[R]?h[R]+" ":"")+I;break;case"inline":case"hFlip":case"vFlip":i[R]=I===!0||I==="true"||I===1;break;case"flip":typeof I=="string"&&YM(i,I);break;case"color":c.color=I;break;case"rotate":typeof I=="string"?i[R]=KM(I):typeof I=="number"&&(i[R]=I);break;case"ariaHidden":case"aria-hidden":I!==!0&&I!=="true"&&delete h["aria-hidden"];break;default:r[R]===void 0&&(h[R]=I)}}const f=yM(n,i),p=f.attributes;if(i.inline&&(c.verticalAlign="-0.125em"),a==="svg"){h.style={...c,...d},Object.assign(h,p);let R=0,I=e.id;return typeof I=="string"&&(I=I.replace(/-/g,"_")),h.dangerouslySetInnerHTML={__html:t9(NM(f.body,I?()=>I+"ID"+R++:"iconifyReact"))},fe.createElement("svg",h)}const{body:y,width:N,height:b}=n,j=a==="mask"||(a==="bg"?!1:y.indexOf("currentColor")!==-1),C=QM(y,{...p,width:N+"",height:b+""});return h.style={...c,"--svg":ZM(C),width:w_(p.width),height:w_(p.height),...r9,...j?l1:jS,...d},fe.createElement("span",h)};bS(!0);AM("",LM);if(typeof document<"u"&&typeof window<"u"){const n=window;if(n.IconifyPreload!==void 0){const e=n.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!hM(r))&&console.error(t)}catch{console.error(t)}})}if(n.IconifyProviders!==void 0){const e=n.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const r="IconifyProviders["+t+"] is invalid.";try{const i=e[t];if(typeof i!="object"||!i||i.resources===void 0)continue;SM(t,i)||console.error(r)}catch{console.error(r)}}}}function ES(n){const[e,t]=fe.useState(!!n.ssr),[r,i]=fe.useState({});function a(b){if(b){const j=n.icon;if(typeof j=="object")return{name:"",data:j};const C=f_(j);if(C)return{name:j,data:C}}return{name:""}}const[c,d]=fe.useState(a(!!n.ssr));function h(){const b=r.callback;b&&(b(),i({}))}function f(b){if(JSON.stringify(c)!==JSON.stringify(b))return h(),d(b),!0}function p(){var b;const j=n.icon;if(typeof j=="object"){f({name:"",data:j});return}const C=f_(j);if(f({name:j,data:C}))if(C===void 0){const R=$M([j],p);i({callback:R})}else C&&((b=n.onLoad)===null||b===void 0||b.call(n,j))}fe.useEffect(()=>(t(!0),h),[]),fe.useEffect(()=>{e&&p()},[n.icon,e]);const{name:y,data:N}=c;return N?s9({...Py,...N},n,y):n.children?n.children:n.fallback?n.fallback:fe.createElement("span",{})}const de=fe.forwardRef((n,e)=>ES({...n,_ref:e}));fe.forwardRef((n,e)=>ES({inline:!0,...n,_ref:e}));const m0="/assets/logo-DFYokJ1h.png",a9=[{name:"Programme Production",href:"/production",roles:["admin","gestionnaire"]},{name:"Vue Boulanger",href:"/boulanger",roles:["admin","boulanger"]},{name:"Livraisons",href:"/livraison",roles:["admin","livreur"]},{name:"Retours Clients",href:"/retours",roles:["admin","livreur"]},{name:"Boutique",href:"/boutique",roles:["admin","vendeuse"]},{name:"Facturation",href:"/facturation",roles:["admin","gestionnaire"]},{name:"Stocks",href:"/stocks",roles:["admin","gestionnaire"]},{name:"Rapport Journalier",href:"/rapport",roles:["admin","gestionnaire"]},{name:"Gestion Produits",href:"/admin/produits",roles:["admin"]},{name:"Gestion Clients",href:"/admin/clients",roles:["admin"]},{name:"Gestion Livreurs",href:"/admin/livreurs",roles:["admin"]},{name:"Gestion Utilisateurs",href:"/admin/users",roles:["admin"]}],o9={"Programme Production":"mdi:clipboard-text","Vue Boulanger":"ph:chef-hat-bold",Livraisons:"lucide:truck","Retours Clients":"mdi:keyboard-return",Boutique:"mdi:store",Facturation:"mdi:file-document",Stocks:"mdi:warehouse","Rapport Journalier":"mdi:chart-bar","Gestion Produits":"mdi:bread-slice","Gestion Clients":"mdi:account-group","Gestion Livreurs":"mdi:motorbike","Gestion Utilisateurs":"mdi:account-key"},l9=()=>{const{user:n}=Am(),e=a9.filter(t=>!n||t.roles.includes(n.role));return l.jsxs("div",{className:"fixed inset-y-0 left-0 w-64 bg-white border-r border-gray-200 z-30",children:[l.jsx("div",{className:"flex justify-center h-28 px-6 border-b border-gray-100 py-4",children:l.jsx("div",{className:"w-40 h-24  rounded-lg flex items-center justify-center text-white text-lg font-bold overflow-hidden",children:l.jsx("img",{src:m0,alt:"Logo Boulangerie",className:"w-full h-full object-contain"})})}),l.jsx("nav",{className:"mt-6 px-3",children:l.jsx("div",{className:"space-y-1",children:e.map(t=>l.jsxs(m4,{to:t.href,className:({isActive:r})=>`group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-150 ${r?"bg-orange-50 text-orange-700 border-l-4 border-orange-500":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[l.jsx(de,{icon:o9[t.name],className:"mr-3 text-lg"}),t.name]},t.name))})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-100",children:l.jsx("div",{className:"text-xs text-gray-500 text-center",children:l.jsx("p",{children:"Version 1.0.0"})})})]})},c9=({children:n})=>l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(l9,{}),l.jsxs("div",{className:"ml-64",children:[l.jsx(iM,{}),l.jsx("main",{className:"p-6",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:n})})]})]}),TS=()=>{const[n,e]=fe.useState(""),[t,r]=fe.useState(""),[i,a]=fe.useState(!1),{login:c,isLoading:d}=Am(),h=async f=>{f.preventDefault();try{await c(n,t)}catch(p){console.error("Erreur de connexion:",p)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto w-50 h-50 flex items-center justify-center transform hover:scale-105 transition-transform -mb-8",children:l.jsx("img",{src:m0,alt:"Logo Boulangerie",className:"w-full h-full object-contain"})}),l.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-amber-600 to-orange-600 mx-auto rounded-full"})]}),l.jsxs("div",{className:"bg-white shadow-2xl rounded-3xl p-8 border border-gray-100 backdrop-blur-sm",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center gap-3 justify-center mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-amber-600 to-orange-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-circle",className:"text-white text-lg"})}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Connexion"})]}),l.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Accdez  votre espace de gestion"})]}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse email"}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(de,{icon:"mdi:email",className:"h-5 w-5 text-gray-400"})}),l.jsx("input",{type:"email",value:n,onChange:f=>e(f.target.value),required:!0,autoComplete:"email",placeholder:"votre@email.com",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all bg-gray-50 focus:bg-white"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(de,{icon:"mdi:lock",className:"h-5 w-5 text-gray-400"})}),l.jsx("input",{type:i?"text":"password",value:t,onChange:f=>r(f.target.value),required:!0,autoComplete:"current-password",placeholder:"",className:"w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all bg-gray-50 focus:bg-white"}),l.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer text-gray-400 hover:text-gray-600",children:l.jsx(de,{icon:i?"mdi:eye-off":"mdi:eye",className:"h-5 w-5"})})]})]}),l.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transform transition-all hover:scale-105 focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:l.jsx("div",{className:"flex items-center justify-center gap-2",children:d?l.jsxs(l.Fragment,{children:[l.jsx(de,{icon:"mdi:loading",className:"text-lg animate-spin"}),l.jsx("span",{children:"Connexion..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(de,{icon:"mdi:login",className:"text-lg"}),l.jsx("span",{children:"Se connecter"})]})})})]})]})]})})};const u9=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d9=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),__=n=>{const e=d9(n);return e.charAt(0).toUpperCase()+e.slice(1)},CS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),h9=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var f9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const m9=fe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:c,...d},h)=>fe.createElement("svg",{ref:h,...f9,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:CS("lucide",i),...!a&&!h9(d)&&{"aria-hidden":"true"},...d},[...c.map(([f,p])=>fe.createElement(f,p)),...Array.isArray(a)?a:[a]]));const ci=(n,e)=>{const t=fe.forwardRef(({className:r,...i},a)=>fe.createElement(m9,{ref:a,iconNode:e,className:CS(`lucide-${u9(__(n))}`,`lucide-${n}`,r),...i}));return t.displayName=__(n),t};const p9=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],g9=ci("arrow-down-left",p9);const x9=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],v9=ci("arrow-right-left",x9);const y9=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],b9=ci("arrow-up-right",y9);const w9=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_9=ci("ban",w9);const N9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],A9=ci("circle-alert",N9);const S9=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],j9=ci("file-text",S9);const E9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],T9=ci("history",E9);const C9=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],I9=ci("map-pin",C9);const R9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],IS=ci("package",R9);const L9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],RS=ci("pen",L9);const k9=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],P9=ci("phone",k9);const D9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fy=ci("plus",D9);const M9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],O9=ci("search",M9);const F9=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],q9=ci("tag",F9);const V9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],qy=ci("trash-2",V9);const B9=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],U9=ci("trending-down",B9);const z9=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],H9=ci("trending-up",z9);const $9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],G9=ci("triangle-alert",$9);const W9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],N_=ci("user",W9);const Y9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],K9=ci("users",Y9);const Q9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X9=ci("x",Q9),Yu=({isOpen:n,onClose:e,title:t,children:r,size:i="md",inline:a=!1,position:c="center"})=>{if(fe.useEffect(()=>{const h=f=>{f.key==="Escape"&&e()};return n&&document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h),document.body.style.overflow="unset"}},[n,e]),!n)return null;const d={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return c==="relative"?l.jsxs("div",{className:"absolute top-full right-0 mt-3 w-96 bg-gradient-to-br from-white to-gray-50 rounded-xl border border-gray-200 shadow-xl hover:shadow-2xl transition-all duration-300 z-50 animate-in slide-in-from-top-2 fade-in",children:[l.jsx("div",{className:"absolute -top-2 right-6 w-4 h-4 bg-white border-l border-t border-gray-200 transform rotate-45"}),l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white rounded-t-xl",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full"}),t]}),l.jsx("button",{onClick:e,className:"rounded-lg p-2 hover:bg-gray-100 hover:scale-105 transition-all duration-200 group",title:"Fermer",children:l.jsx(de,{icon:"mdi:close",className:"text-gray-500 group-hover:text-gray-700 text-xl transition-colors"})})]}),l.jsx("div",{className:"px-6 py-5",children:r})]}):a?l.jsxs("div",{className:"w-full bg-white rounded-xl border border-gray-200 shadow-lg mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),l.jsx("button",{onClick:e,className:"rounded-md p-1 hover:bg-gray-100 transition-colors",children:l.jsx(de,{icon:"mdi:close",className:"text-gray-500 text-xl"})})]}),l.jsx("div",{className:"px-6 py-4",children:r})]}):l.jsxs("div",{className:"fixed inset-0 z-40 flex items-center justify-center",children:[l.jsx("div",{className:"fixed inset-0 bg-transparent"}),l.jsxs("div",{className:`relative w-full ${d[i]} mx-4 bg-gray-100 rounded-xl shadow-2xl max-h-[80vh] overflow-y-auto border border-gray-200 animate-in zoom-in-95 fade-in duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white rounded-t-xl",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full"}),t]}),l.jsx("button",{onClick:e,className:"rounded-lg p-2 hover:bg-gray-100 hover:scale-105 transition-all duration-200 group",children:l.jsx(de,{icon:"mdi:close",className:"text-gray-500 group-hover:text-gray-700 text-xl transition-colors"})})]}),l.jsx("div",{className:"px-6 py-5",children:r})]})]})},p0=({isOpen:n,onClose:e,onConfirm:t,title:r,message:i,confirmText:a="Confirmer",cancelText:c="Annuler",type:d="info",inline:h=!1,position:f="center"})=>{const p=()=>{t(),e()},N=(()=>{switch(d){case"warning":return{icon:"mdi:alert-circle",iconColor:"text-amber-600",confirmBg:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700"};case"danger":return{icon:"mdi:alert-circle",iconColor:"text-red-600",confirmBg:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700"};case"success":return{icon:"mdi:check-circle",iconColor:"text-green-600",confirmBg:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"};default:return{icon:"mdi:help-circle",iconColor:"text-purple-600",confirmBg:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700"}}})();return l.jsx(Yu,{isOpen:n,onClose:e,title:r,size:"sm",inline:h,position:f,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(de,{icon:N.icon,className:`text-3xl ${N.iconColor}`})}),l.jsx("div",{className:"flex-1",children:l.jsx("div",{className:"text-gray-700 whitespace-pre-line",children:i})})]}),l.jsxs("div",{className:"flex gap-3 pt-6",children:[l.jsx("button",{onClick:e,className:"flex-1 px-5 py-3 text-sm font-semibold text-gray-700 bg-white hover:bg-gray-50 border border-gray-300 rounded-lg hover:shadow-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:c}),l.jsx("button",{onClick:p,className:`flex-1 px-5 py-3 text-sm font-bold text-white ${N.confirmBg} border border-transparent rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2`,children:a})]})]})})},c1=({children:n,onConfirm:e,title:t,message:r,confirmText:i="Confirmer",cancelText:a="Annuler",type:c="info",className:d="",disabled:h=!1,...f})=>{const[p,y]=fe.useState(!1),N=()=>{y(!0)},b=async()=>{await e(),y(!1)},j=()=>{y(!1)};return l.jsxs("div",{className:"relative",children:[l.jsx("button",{...f,className:d,onClick:N,disabled:h,children:n}),l.jsx(p0,{isOpen:p,onClose:j,onConfirm:b,title:t,message:r,confirmText:i,cancelText:a,type:c,position:"relative"})]})},J9=({size:n="md",message:e="Chargement...",fullScreen:t=!1,className:r=""})=>{const i={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"},a={sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"},c=()=>l.jsxs("div",{className:`flex flex-col items-center justify-center gap-3 ${r}`,children:[l.jsx("div",{className:"animate-spin",children:l.jsx(de,{icon:"mdi:loading",className:`${i[n]} text-orange-600`})}),e&&l.jsx("p",{className:`${a[n]} text-gray-600 font-medium`,children:e})]});return t?l.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-80 backdrop-blur-sm z-50 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 shadow-lg border",children:l.jsx(c,{})})}):l.jsx(c,{})},Z9=()=>l.jsx(de,{icon:"mdi:loading",className:"animate-spin h-4 w-4"}),Vy=({message:n="Chargement des donnes..."})=>l.jsx("div",{className:"text-center py-12",children:l.jsx(J9,{size:"md",message:n})}),Br=({children:n,variant:e="primary",size:t="md",isLoading:r=!1,className:i="",disabled:a,...c})=>{const d="inline-flex items-center justify-center font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",h={primary:"bg-orange-500 hover:bg-orange-600 text-white focus:ring-orange-500 shadow-sm",secondary:"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-500 shadow-sm",danger:"bg-red-500 hover:bg-red-600 text-white focus:ring-red-500 shadow-sm",outline:"border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-orange-500"},f={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},p=`${d} ${h[e]} ${f[t]} ${i}`;return l.jsxs("button",{className:p,disabled:a||r,...c,children:[r&&l.jsx("span",{className:"-ml-1 mr-3",children:l.jsx(Z9,{})}),n]})},fr=({label:n,error:e,helperText:t,className:r="",id:i,type:a="text",...c})=>{const d=i||`input-${Math.random().toString(36).substr(2,9)}`,[h,f]=fe.useState(!1),p=a==="password",y=p?h?"text":"password":a;return l.jsxs("div",{className:"w-full",children:[n&&l.jsx("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{id:d,type:y,className:`
            block w-full rounded-lg border border-gray-300 px-3 py-2
            focus:border-orange-500 focus:ring-orange-500 focus:ring-1 sm:text-sm
            transition-colors
            ${e?"border-red-300 focus:border-red-500 focus:ring-red-500":""}
            ${r}
            ${p?"pr-10":""}
          `,...c}),p&&l.jsx("button",{type:"button",onClick:()=>f(!h),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none",tabIndex:-1,children:l.jsx(de,{icon:h?"mdi:eye-off":"mdi:eye",className:"h-5 w-5"})})]}),e&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:e}),t&&!e&&l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t})]})},jh=({label:n,error:e,helperText:t,options:r,className:i="",id:a,...c})=>{const d=a||`select-${Math.random().toString(36).substr(2,9)}`;return l.jsxs("div",{className:"w-full",children:[n&&l.jsx("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),l.jsx("select",{id:d,className:`
          block w-full rounded-lg border border-gray-300 px-3 py-2
          focus:border-orange-500 focus:ring-orange-500 focus:ring-1 sm:text-sm
          transition-colors bg-white
          ${e?"border-red-300 focus:border-red-500 focus:ring-red-500":""}
          ${i}
        `,...c,children:r.map(h=>l.jsx("option",{value:h.value,disabled:h.disabled,children:h.label},h.value))}),e&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:e}),t&&!e&&l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t})]})},eO=({produits:n,clients:e,commande:t,mode:r="create",onSave:i,onCancel:a,isLoading:c=!1,formulaireState:d,onUpdateFormulaire:h})=>{const[f,p]=fe.useState(d?.selectedClientId||""),[y,N]=fe.useState(d?.dateLivraison||new Date().toISOString().split("T")[0]),[b,j]=fe.useState(d?.produitsCommandes||[]),[C,R]=fe.useState(d?.utiliserPrixClient??!0);fe.useEffect(()=>{h&&h({selectedClientId:f,dateLivraison:y,produitsCommandes:b,utiliserPrixClient:C})},[f,y,b,C,h]),fe.useEffect(()=>{if(t){p(t.clientId);try{const S=t.dateLivraison instanceof Date?t.dateLivraison:new Date(t.dateLivraison);isNaN(S.getTime())?N(new Date().toISOString().split("T")[0]):N(S.toISOString().split("T")[0])}catch(S){console.error("Erreur de conversion de date:",S),N(new Date().toISOString().split("T")[0])}j(r==="edit"||r==="editSpecific"?t.produits.map(S=>({produitId:S.produitId,quantiteCommandee:S.quantiteCommandee,prixUnitaire:S.prixUnitaire,repartitionCars:S.repartitionCars||{car1_matin:"",car2_matin:"",car_soir:""}})):[])}else p(""),N(new Date().toISOString().split("T")[0]),j([])},[t]);const{sauvegarderCommandeType:I}=wl();fe.useEffect(()=>{if(f&&r==="create"&&b.length===0){const S=e.find(L=>L.id===f);S?.commandeType&&S.commandeType.length>0&&(j(S.commandeType.map(L=>{let F=L.prixUnitaire;if(!F){const ve=n.find(K=>K.id===L.produitId);F=S.typeClient==="boutique"?ve?.prixBoutique:ve?.prixClient}let ae=L.repartitionCars;return!ae&&L.quantiteCommandee>0&&(ae={car1_matin:L.quantiteCommandee,car2_matin:"",car_soir:""}),{...L,prixUnitaire:F||0,repartitionCars:ae||{car1_matin:"",car2_matin:"",car_soir:""}}})),kt.success(" Commande type charge !"))}},[f]);const B=async()=>{if(!(!f||b.length===0))try{const S=b.map(L=>({produitId:L.produitId,quantiteCommandee:L.quantiteCommandee,repartitionCars:{car1_matin:Number(L.repartitionCars?.car1_matin)||0,car2_matin:Number(L.repartitionCars?.car2_matin)||0,car_soir:Number(L.repartitionCars?.car_soir)||0}}));await I(f,S),kt.success(" Commande type sauvegarde pour ce client !")}catch{kt.error("Erreur lors de la sauvegarde de la commande type")}};fe.useEffect(()=>{const S=b.map(L=>{const F=n.find(ae=>ae.id===L.produitId);if(F){const ae=C?F.prixClient:F.prixBoutique;return{...L,prixUnitaire:ae}}return L});j(S)},[C,n]);const z=[{value:"",label:"Slectionnez un client"},...e.map(S=>({value:S.id,label:S.nom}))],H=[{value:"",label:"Slectionnez un produit"},...n.filter(S=>S.active).map(S=>{const L=C?S.prixClient:S.prixBoutique;return{value:S.id,label:`${S.nom} (${L?.toLocaleString("fr-FR")} FCFA)`}})],he=()=>{j([...b,{produitId:"",quantiteCommandee:0,repartitionCars:{car1_matin:"",car2_matin:"",car_soir:""}}])},re=S=>{j(b.filter((L,F)=>F!==S))},V=(S,L,F)=>{const ae=[...b];if(ae[S]={...ae[S],[L]:F},L==="produitId"){const ve=n.find(K=>K.id===F);if(ve){const K=C?ve.prixClient:ve.prixBoutique;ae[S].prixUnitaire=K}}if(L==="repartitionCars"){const ve=F,K=(Number(ve?.car1_matin)||0)+(Number(ve?.car2_matin)||0)+(Number(ve?.car_soir)||0);ae[S].quantiteCommandee=K}j(ae)},D=(S,L,F)=>{const ae=[...b],K={...ae[S].repartitionCars||{car1_matin:"",car2_matin:"",car_soir:""},[L]:F},ce=(Number(K.car1_matin)||0)+(Number(K.car2_matin)||0)+(Number(K.car_soir)||0);ae[S]={...ae[S],repartitionCars:K,quantiteCommandee:ce},j(ae)},k=S=>{if(S.preventDefault(),!f||b.length===0){alert("Veuillez slectionner un client et au moins un produit");return}const L=b.filter(ve=>{const K=(Number(ve.repartitionCars?.car1_matin)||0)+(Number(ve.repartitionCars?.car2_matin)||0)+(Number(ve.repartitionCars?.car_soir)||0);return ve.produitId&&K>0});if(L.length===0){alert("Veuillez saisir des quantits valides");return}const F=L.map(ve=>{let K=ve.prixUnitaire;if(!K){const ce=n.find(Se=>Se.id===ve.produitId);K=e.find(Se=>Se.id===f)?.typeClient==="boutique"?ce?.prixBoutique:ce?.prixClient}return{...ve,prixUnitaire:K||0,repartitionCars:{car1_matin:Number(ve.repartitionCars?.car1_matin)||0,car2_matin:Number(ve.repartitionCars?.car2_matin)||0,car_soir:Number(ve.repartitionCars?.car_soir)||0}}}),ae={clientId:f,dateLivraison:new Date(y),dateCommande:new Date,statut:"prevue",produits:F};i(ae),p(""),N(new Date().toISOString().split("T")[0]),j([])},G=()=>b.reduce((S,L)=>{const F=L.prixUnitaire||n.find(ae=>ae.id===L.produitId)?.prixUnitaire||0;return S+F*(L.quantiteCommandee||0)},0);return l.jsxs("div",{children:[l.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:l.jsx("p",{className:"text-gray-700 text-sm",children:r==="addProducts"?"Ajoutez des produits  la commande existante. Les quantits seront fusionnes avec les produits dj commands.":r==="edit"?"Modifiez les dtails de la commande. Cette action remplacera tous les produits actuels.":r==="editSpecific"?"Modifiez les dtails de ce produit spcifique dans la commande.":"Crez une nouvelle commande pour le client slectionn."})}),r==="addProducts"&&t&&l.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[l.jsxs("h4",{className:"text-sm font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:information"}),"Produits actuellement commands"]}),l.jsx("div",{className:"grid gap-2",children:t.produits.map((S,L)=>{const F=n.find(ae=>ae.id===S.produitId);return l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-blue-700",children:F?.nom||"Produit inconnu"}),l.jsxs("span",{className:"font-medium text-blue-800",children:["x",S.quantiteCommandee]})]},L)})})]}),r==="editSpecific"&&t&&l.jsxs("div",{className:"mb-6 p-4 bg-amber-50 rounded-lg border border-amber-200",children:[l.jsxs("h4",{className:"text-sm font-semibold text-amber-800 mb-2 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:pencil-outline"}),"Mode dition produit spcifique"]}),l.jsx("p",{className:"text-sm text-amber-700",children:"Vous modifiez uniquement le produit slectionn. Les autres produits de la commande ne seront pas affects."})]}),l.jsxs("form",{onSubmit:k,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(jh,{label:"Client *",value:f,onChange:S=>p(S.target.value),options:z,required:!0,disabled:r==="addProducts"||r==="editSpecific"}),l.jsx(fr,{label:"Date de livraison *",type:"date",value:y,onChange:S=>N(S.target.value),required:!0,disabled:r==="addProducts"||r==="editSpecific"})]}),l.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[l.jsxs("label",{className:"flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:C,onChange:S=>R(S.target.checked),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),l.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Utiliser les prix client"})]}),l.jsx("span",{className:"text-sm text-gray-600",children:C?"(Prix rduits pour les clients)":"(Prix boutique standard)"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900",children:r==="addProducts"?"Nouveaux produits  ajouter":r==="editSpecific"?"Produit  modifier":"Produits commands"}),r==="edit"&&l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Vous pouvez modifier les quantits ou ajouter de nouveaux produits"}),r==="create"&&l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Une seule commande par client et par date - Les produits ultrieurs s'ajouteront  cette commande"})]}),l.jsx(Br,{type:"button",variant:"outline",onClick:he,className:"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-300",children:"+ Ajouter un produit"})]}),b.length===0?l.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-gray-500",children:"Aucun produit ajout"}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Cliquez sur "Ajouter un produit" pour commencer'})]}):l.jsxs("div",{className:"space-y-4",children:[b.map((S,L)=>{const F=n.find(ve=>ve.id===S.produitId),ae=(Number(S.repartitionCars?.car1_matin)||0)+(Number(S.repartitionCars?.car2_matin)||0)+(Number(S.repartitionCars?.car_soir)||0);return l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Produit"}),l.jsx(jh,{options:H,value:S.produitId,onChange:ve=>V(L,"produitId",ve.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantit totale"}),l.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-sm font-bold text-gray-900",children:[ae||0," pice(s)"]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Calcul automatiquement"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Prix unitaire"}),l.jsx(fr,{type:"number",step:"1",placeholder:"Prix",value:S.prixUnitaire||F?.prixUnitaire||"",onChange:ve=>V(L,"prixUnitaire",parseFloat(ve.target.value)||0),className:"bg-gray-50"})]})]}),l.jsx("button",{type:"button",onClick:()=>re(L),className:"ml-3 text-red-500 hover:text-red-700 text-sm",title:"Supprimer ce produit",children:""})]}),l.jsxs("div",{className:"border-t pt-3",children:[l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Rpartition par car de livraison"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Saisissez les quantits pour chaque car"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded p-2",children:[l.jsxs("label",{className:"block text-xs font-medium text-orange-700 mb-1 flex items-center gap-1",children:[l.jsx(de,{icon:"lucide:truck",className:"text-xs"}),"Car 1 - Matin"]}),l.jsx(fr,{type:"number",min:"0",value:S.repartitionCars?.car1_matin||"",onChange:ve=>{D(L,"car1_matin",ve.target.value)},className:"text-center font-bold text-orange-700"})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:[l.jsxs("label",{className:"block text-xs font-medium text-blue-700 mb-1 flex items-center gap-1",children:[l.jsx(de,{icon:"lucide:truck",className:"text-xs"}),"Car 2 - Matin"]}),l.jsx(fr,{type:"number",min:"0",value:S.repartitionCars?.car2_matin||"",onChange:ve=>{D(L,"car2_matin",ve.target.value)},className:"text-center font-bold text-blue-700"})]}),l.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded p-2",children:[l.jsxs("label",{className:"block text-xs font-medium text-indigo-700 mb-1 flex items-center gap-1",children:[l.jsx(de,{icon:"lucide:truck",className:"text-xs"}),"Car 1 - Soir"]}),l.jsx(fr,{type:"number",min:"0",value:S.repartitionCars?.car_soir||"",onChange:ve=>{D(L,"car_soir",ve.target.value)},className:"text-center font-bold text-indigo-700"})]})]})]}),l.jsx("div",{className:"flex justify-end mt-3 pt-2 border-t",children:l.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["Total: ",ae&&(S.prixUnitaire||F?.prixUnitaire)?`${(ae*(S.prixUnitaire||F?.prixUnitaire||0)).toLocaleString("fr-FR")} FCFA`:"0 FCFA"]})})]},L)}),l.jsx("div",{className:"flex justify-center py-3",children:l.jsxs(Br,{type:"button",variant:"outline",onClick:he,className:"bg-green-50 hover:bg-green-100 text-green-700 border-green-300 border-dashed",children:[l.jsx(de,{icon:"mdi:plus",className:"mr-2"}),"Ajouter un autre produit"]})}),l.jsx("div",{className:"pt-4 border-t border-gray-200",children:l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["Total: ",G().toLocaleString("fr-FR")," FCFA"]})})})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[l.jsx(Br,{type:"button",variant:"outline",onClick:a,children:"Annuler"}),l.jsx(Br,{type:"submit",isLoading:c,disabled:!f||b.length===0,children:r==="addProducts"?"Ajouter les produits":r==="edit"?"Modifier la commande":r==="editSpecific"?"Modifier le produit":"Crer la commande"})]}),r!=="editSpecific"&&b.length>0&&f&&l.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-blue-900",children:"Commande Type"}),l.jsx("p",{className:"text-xs text-blue-700",children:"Sauvegarder cette configuration pour ce client ?"})]}),l.jsxs("button",{type:"button",onClick:B,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all shadow-sm hover:shadow-md text-sm font-medium",children:[l.jsx(de,{icon:"mdi:content-save-settings",className:"text-lg"}),"Dfinir comme commande type"]})]})})]})]})},nd=({children:n,className:e="",title:t,subtitle:r})=>l.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow ${e}`,children:[(t||r)&&l.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t&&l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:t}),r&&l.jsx("div",{className:"mt-1 text-sm text-gray-600",children:r})]}),l.jsx("div",{className:"px-6 py-4",children:n})]}),tO=({commande:n,produitIndex:e,onSave:t,onCancel:r,isLoading:i=!1})=>{const a=n.produits[e],[c,d]=fe.useState(a.prixUnitaire||0),[h,f]=fe.useState({car1_matin:a.repartitionCars?.car1_matin||"",car2_matin:a.repartitionCars?.car2_matin||"",car_soir:a.repartitionCars?.car_soir||""}),p=(Number(h.car1_matin)||0)+(Number(h.car2_matin)||0)+(Number(h.car_soir)||0),y=p>0&&c>=0,N=j=>{if(j.preventDefault(),!y)return;const C={produitId:a.produitId,quantiteCommandee:p,prixUnitaire:c,repartitionCars:{car1_matin:Number(h.car1_matin)||0,car2_matin:Number(h.car2_matin)||0,car_soir:Number(h.car_soir)||0}};t(C)},b=(j,C)=>{f(R=>({...R,[j]:C}))};return l.jsx("div",{className:"space-y-6",children:l.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantit totale (Calcule)"}),l.jsx("div",{className:"px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-500 font-medium select-none",children:p})]}),l.jsx(fr,{label:"Prix unitaire (F CFA) *",type:"number",min:"0",value:c,onChange:j=>d(Number(j.target.value)),required:!0})]}),l.jsxs(nd,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-lg text-gray-600"}),l.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Rpartition par car de livraison"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsx(fr,{label:"Car 1 - Matin",type:"number",min:"0",value:h.car1_matin,onChange:j=>b("car1_matin",j.target.value)}),l.jsx(fr,{label:"Car 2 - Matin",type:"number",min:"0",value:h.car2_matin,onChange:j=>b("car2_matin",j.target.value)}),l.jsx(fr,{label:"Car - Soir",type:"number",min:"0",value:h.car_soir,onChange:j=>b("car_soir",j.target.value)})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total distribu:"}),l.jsx("span",{className:"text-sm font-bold text-green-600",children:p})]}),l.jsx("div",{className:"text-xs text-gray-500",children:"La quantit totale est mise  jour automatiquement."})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["Total: ",(p*c).toLocaleString("fr-FR")," F CFA"]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs(Br,{type:"button",variant:"outline",onClick:r,disabled:i,children:[l.jsx(de,{icon:"mdi:close",className:"text-lg mr-2"}),"Annuler"]}),l.jsxs(Br,{type:"submit",disabled:!y||i,isLoading:i,children:[l.jsx(de,{icon:"mdi:content-save",className:"text-lg mr-2"}),"Modifier le produit"]})]})]})]})})},nO=({produits:n,quantitesActuelles:e,quantiteEnEdition:t,onSave:r,onCancel:i})=>{const[a,c]=fe.useState(""),[d,h]=fe.useState(0),[f,p]=fe.useState(0),[y,N]=fe.useState(0);fe.useEffect(()=>{if(t){c(t.produitId);const B=e.find(z=>z.produitId===t.produitId)||t;if(B.repartitionCars)h(B.repartitionCars.car1_matin||0),p(B.repartitionCars.car2_matin||0),N(B.repartitionCars.car_soir||0);else{const z=B.quantite;h(Math.ceil(z*.35)),p(Math.ceil(z*.35)),N(z-Math.ceil(z*.35)-Math.ceil(z*.35))}console.log(" Mise  jour des champs avec donnes:",B)}else c(""),h(0),p(0),N(0)},[t,e]);const b=n.filter(I=>!e.some(B=>B.produitId===I.id)||t&&I.id===t.produitId),j=[{value:"",label:"Slectionnez un produit"},...b.map(I=>({value:I.id,label:I.nom}))],C=d+f+y,R=I=>{if(I.preventDefault(),!a){alert("Veuillez slectionner un produit");return}const B=n.find(z=>z.id===a);if(B){const z={produitId:a,produit:B,quantite:C,repartitionCars:{car1_matin:d,car2_matin:f,car_soir:y}};console.log(" Sauvegarde quantit boutique:",z),r(z),c(""),h(0),p(0),N(0)}};return b.length===0?l.jsx(nd,{title:"Ajouter quantit boutique",children:l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-gray-500",children:"Tous les produits ont dj t ajouts"}),l.jsx(Br,{variant:"outline",onClick:i,className:"mt-4",children:"Fermer"})]})}):l.jsx(nd,{title:"Ajouter quantit boutique",subtitle:"Dfinissez les quantits  envoyer en boutique",children:l.jsxs("form",{onSubmit:R,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(jh,{label:"Produit *",value:a,onChange:I=>c(I.target.value),options:j,required:!0}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quantit Totale (Calcule)"}),l.jsx("div",{className:"px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl font-bold text-green-600",children:C}),l.jsx("span",{className:"text-sm text-gray-500",children:"pices"}),C===0&&l.jsx("span",{className:"text-xs text-gray-400 ml-2",children:" Saisissez les rpartitions ci-dessous"})]})})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Rpartition par Cars"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Dfinissez comment rpartir les quantits boutique entre les cars de livraison"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(de,{icon:"mdi:truck",className:"text-orange-600"}),l.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Car 1 - Matin"})]}),l.jsx(fr,{type:"number",min:"0",value:d||"",onChange:I=>h(parseInt(I.target.value)||0),placeholder:"Quantit Car 1",className:"text-center"})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(de,{icon:"mdi:truck-outline",className:"text-blue-600"}),l.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Car 2 - Matin"})]}),l.jsx(fr,{type:"number",min:"0",value:f||"",onChange:I=>p(parseInt(I.target.value)||0),placeholder:"Quantit Car 2",className:"text-center"})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(de,{icon:"mdi:truck-fast",className:"text-purple-600"}),l.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Car - Soir"})]}),l.jsx(fr,{type:"number",min:"0",value:y||"",onChange:I=>N(parseInt(I.target.value)||0),placeholder:"Quantit Car Soir",className:"text-center"})]})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[l.jsx(Br,{type:"button",variant:"outline",onClick:i,children:"Annuler"}),l.jsx(Br,{type:"submit",disabled:!a,children:"Ajouter"})]})]})})},By=()=>{const[n,e]=fe.useState({isOpen:!1,title:"",message:""}),t=fe.useCallback(a=>new Promise(c=>{e({...a,isOpen:!0,resolve:c})}),[]),r=fe.useCallback(()=>{n.resolve&&n.resolve(!0),e(a=>({...a,isOpen:!1,resolve:void 0}))},[n.resolve]),i=fe.useCallback(()=>{n.resolve&&n.resolve(!1),e(a=>({...a,isOpen:!1,resolve:void 0}))},[n.resolve]);return{isOpen:n.isOpen,title:n.title,message:n.message,confirmText:n.confirmText,cancelText:n.cancelText,type:n.type,confirm:t,handleConfirm:r,handleCancel:i}},rc={car1_matin:"Car 1 - Matin",car2_matin:"Car 2 - Matin",car_soir:"Car - Soir"};class rO{formatDate(e){return new Date(e).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}getCarColor(e){switch(e){case"car1_matin":return"#374151";case"car2_matin":return"#4b5563";case"car_soir":return"#1f2937";default:return"#4b5563"}}getSigleProduit(e){const t=e.toLowerCase().trim(),r={"pain au lait":"PAL","pain de mie":"PDM","pain complet":"PC","pain blanc":"PB","pain de campagne":"PDC",baguette:"BAG","baguette tradition":"BAG-T",croissant:"CRO","pain au chocolat":"PAC",chocolatine:"CHO",brioche:"BRI",viennoiserie:"VIE",tarte:"TAR",gteau:"GAT",sandwich:"SAN"};if(r[t])return r[t];const i=t.split(/\s+/);return i.length===1?t.substring(0,3).toUpperCase():i.map(a=>a[0]).join("").toUpperCase()}generateStyles(){return`
      <style>
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
          font-size: 14px;
          line-height: 1.4;
          color: #1f2937;
          background: white;
          padding: 12px;
        }
        
        .container {
          max-width: 100%;
          margin: 0 auto;
        }
        
        .header {
          text-align: center;
          margin-bottom: 8px;
          padding-bottom: 6px;
          border-bottom: 1px solid #e5e7eb;
        }
        
        .header h1 {
          font-size: 20px;
          font-weight: 700;
          color: #111827;
          margin-bottom: 2px;
        }
        
        .header .date {
          font-size: 11px;
          color: #6b7280;
          font-weight: 500;
        }
        
        .livreur-section {
          margin-bottom: 12px;
          page-break-inside: avoid;
        }
        
        .livreur-header {
          background: #f9fafb;
          padding: 6px 8px;
          border-left: 3px solid #4b5563;
          margin-bottom: 8px;
        }
        
        .livreur-header h2 {
          font-size: 13px;
          font-weight: 600;
          color: #111827;
          margin-bottom: 2px;
        }
        
        .livreur-header .info {
          font-size: 10px;
          color: #6b7280;
        }
        
        .car-section {
          margin-bottom: 10px;
          border: 1px solid #d1d5db;
          border-radius: 4px;
          overflow: hidden;
          page-break-inside: avoid;
        }
        
        .car-header {
          color: white;
          padding: 5px 8px;
          font-weight: 600;
          font-size: 11px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        
        .car-body {
          background: white;
        }
        
        table {
          width: 100%;
          border-collapse: collapse;
        }
        
        th {
          background: #f3f4f6;
          padding: 4px 6px;
          text-align: left;
          font-weight: 600;
          font-size: 9px;
          color: #374151;
          border-bottom: 1px solid #d1d5db;
        }
        
        td {
          padding: 4px 6px;
          border-bottom: 1px solid #e5e7eb;
          font-size: 9px;
          vertical-align: top;
        }
        
        tr:last-child td {
          border-bottom: none;
        }
        
        tr:hover {
          background: #f9fafb;
        }
        
        .summary {
          background: #374151;
          color: white;
          padding: 6px 8px;
          margin-top: 0;
          border-top: 1px solid #d1d5db;
        }
        
        .summary h4 {
          font-size: 10px;
          font-weight: 600;
          margin-bottom: 4px;
        }
        
        .summary-items {
          display: flex;
          flex-wrap: wrap;
          gap: 4px;
        }
        
        .summary-item {
          background: white;
          color: #111827;
          padding: 3px 6px;
          border-radius: 3px;
          font-size: 9px;
          font-weight: 500;
          display: inline-flex;
          align-items: center;
          gap: 4px;
        }
        
        .summary-item .count {
          background: #f3f4f6;
          padding: 1px 5px;
          border-radius: 8px;
          font-weight: 700;
        }
        
        .retours-column {
          width: 80px;
          min-height: 20px;
          border: 1px solid #d1d5db;
          border-radius: 3px;
          background: #fafafa;
        }
        
        .stats {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 8px;
          margin-bottom: 10px;
        }
        
        .stat-card {
          background: #f9fafb;
          padding: 6px 8px;
          border-radius: 4px;
          border-left: 3px solid #4b5563;
        }
        
        .stat-card .label {
          font-size: 8px;
          color: #6b7280;
          font-weight: 500;
          text-transform: uppercase;
          letter-spacing: 0.3px;
        }
        
        .stat-card .value {
          font-size: 18px;
          font-weight: 700;
          color: #111827;
          margin-top: 2px;
        }
        
        @media print {
          body {
            padding: 0;
            font-size: 9px;
          }
          
          .no-print {
            display: none !important;
          }
          
          .livreur-section {
            page-break-after: always;
          }
          
          .car-section {
            page-break-inside: avoid;
          }
          
          th {
            font-size: 8px;
            padding: 3px 5px;
          }
          
          td {
            font-size: 8px;
            padding: 3px 5px;
          }
          
          @page {
            margin: 8mm;
            size: A4;
          }
        }
      </style>
    `}generateDeliveryReportHTML(e,t){const r=e.livreur?.nom||"Clients non assigns";let i=`
      <!DOCTYPE html>
      <html lang="fr">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Programme de Livraison - ${r}</title>
        ${this.generateStyles()}
      </head>
      <body>
        <div class="container">
          <div class="header">
            <div class="logo">
              <img src="/src/assets/logo.png" alt="Boulangerie Chez Mina" style="height: 60px; margin: 0 auto 8px auto; display: block;" />
            </div>
            <h1> Programme de Livraison</h1>
            <div class="date">${this.formatDate(t)}</div>
          </div>
          
          <div class="livreur-section">
            <div class="livreur-header">
              <h2>${r}</h2>
              ${e.livreur?.telephone?`<div class="info"> ${e.livreur.telephone}</div>`:""}
              ${e.livreur?.vehicule?`<div class="info"> ${e.livreur.vehicule}</div>`:""}
            </div>
    `;const a=["car1_matin","car2_matin","car_soir"];Array.from(e.commandesParCar.entries()).sort(([f],[p])=>a.indexOf(f)-a.indexOf(p)).forEach(([f,p])=>{const y=this.getCarColor(f),N=new Map;p.forEach(C=>{const R=C.client?.id||"inconnu";N.has(R)||N.set(R,{client:C.client,produits:new Map});const I=N.get(R),B=C.produit?.nom||"Produit inconnu",z=I.produits.get(B)||0,H=Number(C.quantite)||0;I.produits.set(B,z+H)});const b=Array.from(new Set(p.map(C=>C.produit?.nom||"Produit inconnu"))).sort();i+=`
            <div class="car-section">
              <div class="car-header" style="background-color: ${y};">
                <span> ${rc[f]}</span>
                <span>${N.size} client(s)</span>
              </div>
              
              <div class="car-body">
                <table>
                  <thead>
                    <tr>
                      <th style="width: 20%;">Client</th>
      `,b.forEach(C=>{const R=this.getSigleProduit(C);i+=`<th style="text-align: center; width: ${70/b.length}%;" title="${C}">${R}</th>`}),i+=`
                      <th style="width: 10%;">Retours</th>
                    </tr>
                  </thead>
                  <tbody>
      `,Array.from(N.values()).forEach(C=>{i+=`
                    <tr>
                      <td><strong>${C.client?.nom||"Client inconnu"}</strong></td>
        `,b.forEach(R=>{const I=C.produits.get(R)||0;I>0?i+=`<td style="text-align: center; font-weight: 700;">${I}</td>`:i+='<td style="text-align: center; color: #d1d5db;">-</td>'}),i+=`
                      <td><div class="retours-column"></div></td>
                    </tr>
        `});const j={};Array.from(N.values()).forEach(C=>{C.produits.forEach((R,I)=>{j[I]=(j[I]||0)+R})}),i+=`
                  </tbody>
                </table>
              </div>
              
              <div class="summary" style="background-color: ${y};">
                <h4> Rsum ${rc[f]}</h4>
                <div class="summary-items">
      `,Object.entries(j).forEach(([C,R])=>{const I=this.getSigleProduit(C);i+=`
                  <div class="summary-item">
                    <span><strong>${I}</strong> - ${C}</span>
                    <span class="count">${R}</span>
                  </div>
        `}),i+=`
                </div>
              </div>
            </div>
      `}),i+=`
          </div>
          
          <div class="no-print" style="text-align: center; margin-top: 30px; padding: 20px; background: #f3f4f6; border-radius: 8px;">
            <button onclick="window.print()" style="background: #4b5563; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer;">
               Imprimer ce document
            </button>
            <button onclick="window.close()" style="background: #9ca3af; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; margin-left: 12px;">
               Fermer
            </button>
          </div>
        </div>
      </body>
      </html>
    `;const h=window.open("","_blank");h&&(h.document.write(i),h.document.close())}generateGlobalReportHTML(e,t){const r=e.length,i=e.reduce((h,[,f])=>h+Array.from(f.commandesParCar.values()).reduce((p,y)=>p+y.length,0),0),a=Array.from(new Set(e.flatMap(([,h])=>Array.from(h.commandesParCar.values()).flat().map(f=>f.client?.id)))).length;let c=`
      <!DOCTYPE html>
      <html lang="fr">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Rapport Global de Livraison</title>
        ${this.generateStyles()}
      </head>
      <body>
        <div class="container">
          <div class="header">
            <div class="logo">
              <img src="/src/assets/logo.png" alt="Boulangerie Chez Mina" style="height: 60px; margin: 0 auto 8px auto; display: block;" />
            </div>
            <h1> Rapport Global de Livraison</h1>
            <div class="date">${this.formatDate(t)}</div>
          </div>
          
          <div class="stats">
            <div class="stat-card">
              <div class="label">Livreurs Actifs</div>
              <div class="value">${r}</div>
            </div>
            <div class="stat-card">
              <div class="label">Total Livraisons</div>
              <div class="value">${i}</div>
            </div>
            <div class="stat-card">
              <div class="label">Clients  Livrer</div>
              <div class="value">${a}</div>
            </div>
          </div>
    `;e.forEach(([,h])=>{const f=h.livreur?.nom||"Clients non assigns";c+=`
          <div class="livreur-section">
            <div class="livreur-header">
              <h2>${f}</h2>
              ${h.livreur?.telephone?`<div class="info"> ${h.livreur.telephone}</div>`:""}
              ${h.livreur?.vehicule?`<div class="info"> ${h.livreur.vehicule}</div>`:""}
            </div>
      `;const p=["car1_matin","car2_matin","car_soir"];Array.from(h.commandesParCar.entries()).sort(([b],[j])=>p.indexOf(b)-p.indexOf(j)).forEach(([b,j])=>{const C=this.getCarColor(b),R=new Map;j.forEach(z=>{const H=z.client?.id||"inconnu";R.has(H)||R.set(H,{client:z.client,produits:new Map});const he=R.get(H),re=z.produit?.nom||"Produit inconnu",V=he.produits.get(re)||0,D=Number(z.quantite)||0;he.produits.set(re,V+D)});const I=Array.from(new Set(j.map(z=>z.produit?.nom||"Produit inconnu"))).sort();c+=`
            <div class="car-section">
              <div class="car-header" style="background-color: ${C};">
                <span> ${rc[b]}</span>
                <span>${R.size} client(s)</span>
              </div>
              
              <div class="car-body">
                <table>
                  <thead>
                    <tr>
                      <th style="width: 20%;">Client</th>
        `,I.forEach(z=>{const H=this.getSigleProduit(z);c+=`<th style="text-align: center; width: ${70/I.length}%;" title="${z}">${H}</th>`}),c+=`
                      <th style="width: 10%;">Retours</th>
                    </tr>
                  </thead>
                  <tbody>
        `,Array.from(R.values()).forEach(z=>{c+=`
                    <tr>
                      <td><strong>${z.client?.nom||"Client inconnu"}</strong></td>
          `,I.forEach(H=>{const he=z.produits.get(H)||0;he>0?c+=`<td style="text-align: center; font-weight: 700;">${he}</td>`:c+='<td style="text-align: center; color: #d1d5db;">-</td>'}),c+=`
                      <td><div class="retours-column"></div></td>
                    </tr>
          `});const B={};Array.from(R.values()).forEach(z=>{z.produits.forEach((H,he)=>{B[he]=(B[he]||0)+H})}),c+=`
                  </tbody>
                </table>
              </div>
              
              <div class="summary" style="background-color: ${C};">
                <h4> Rsum ${rc[b]}</h4>
                <div class="summary-items">
        `,Object.entries(B).forEach(([z,H])=>{const he=this.getSigleProduit(z);c+=`
                  <div class="summary-item">
                    <span><strong>${he}</strong> - ${z}</span>
                    <span class="count">${H}</span>
                  </div>
          `}),c+=`
                </div>
              </div>
            </div>
        `}),c+=`
          </div>
      `}),c+=`
          <div class="no-print" style="text-align: center; margin-top: 30px; padding: 20px; background: #f3f4f6; border-radius: 8px;">
            <button onclick="window.print()" style="background: #4b5563; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer;">
               Imprimer ce document
            </button>
            <button onclick="window.close()" style="background: #9ca3af; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; margin-left: 12px;">
               Fermer
            </button>
          </div>
        </div>
      </body>
      </html>
    `;const d=window.open("","_blank");d&&(d.document.write(c),d.document.close())}generateProductionReportHTML(e,t){const r=e.totauxParProduit?.reduce((N,b)=>N+b.totalClient,0)||0,i=e.totauxParProduit?.reduce((N,b)=>N+b.totalBoutique,0)||0,a=e.totauxParProduit?.reduce((N,b)=>N+b.totalGlobal,0)||0,c=e.totauxParProduit?.filter(N=>N.repartitionCar1Matin+N.repartitionCar2Matin>0)||[],d=e.totauxParProduit?.filter(N=>N.repartitionCarSoir>0)||[],h=e.statut==="envoye"?" CONFIRM":e.statut==="modifie"?" MODIFI":e.statut==="produit"?" PRODUIT":" BROUILLON";let f=`
      <!DOCTYPE html>
      <html lang="fr">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Programme de Production</title>
        <style>
          * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
          }

          body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            font-size: 11px;
            line-height: 1.4;
            color: #1f2937;
            background: white;
            padding: 12px;
          }

          .container {
            max-width: 100%;
            margin: 0 auto;
          }

          .header {
            text-align: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid #374151;
          }

          .header .logo {
            margin-bottom: 8px;
          }

          .header .logo img {
            height: 60px;
            margin: 0 auto;
            display: block;
          }

          .header h1 {
            font-size: 20px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 4px;
          }

          .header .date {
            font-size: 13px;
            color: #6b7280;
            font-weight: 500;
            margin-bottom: 2px;
          }

          .header .status {
            font-size: 12px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
            background: #f3f4f6;
            color: #374151;
          }

          .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
            background: #374151;
            padding: 16px;
            border-radius: 8px;
            color: white;
          }

          .stat-card {
            text-align: center;
          }

          .stat-card .label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
            opacity: 0.8;
          }

          .stat-card .value {
            font-size: 24px;
            font-weight: 700;
          }

          .stat-card .unit {
            font-size: 11px;
            opacity: 0.8;
          }

          .section {
            margin-bottom: 24px;
            page-break-inside: avoid;
          }

          .section-header {
            background: #f9fafb;
            padding: 8px 12px;
            border-left: 4px solid #4b5563;
            margin-bottom: 12px;
            border-radius: 4px;
          }

          .section-header.matin {
            border-left-color: #f59e0b;
            background: #fffbeb;
          }

          .section-header.soir {
            border-left-color: #6366f1;
            background: #eef2ff;
          }

          .section-header.boutique {
            border-left-color: #059669;
            background: #ecfdf5;
          }

          .section-header h2 {
            font-size: 16px;
            font-weight: 600;
            color: #111827;
            display: flex;
            align-items: center;
            gap: 8px;
          }

          .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
          }

          .product-card {
            border: 1px solid #d1d5db;
            border-radius: 6px;
            overflow: hidden;
            page-break-inside: avoid;
          }

          .product-header {
            background: #374151;
            color: white;
            padding: 8px 12px;
            font-weight: 600;
            font-size: 12px;
          }

          .product-header.matin {
            background: #f59e0b;
          }

          .product-header.soir {
            background: #6366f1;
          }

          .product-header.boutique {
            background: #059669;
          }

          .product-body {
            padding: 12px;
          }

          .car-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 0;
            border-bottom: 1px solid #f3f4f6;
          }

          .car-row:last-child {
            border-bottom: none;
          }

          .car-label {
            font-size: 10px;
            color: #6b7280;
            font-weight: 500;
          }

          .car-value {
            font-size: 14px;
            font-weight: 700;
            color: #111827;
          }

          .total-row {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 2px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
          }

          .total-label {
            font-size: 11px;
            font-weight: 600;
            color: #374151;
          }

          .total-value {
            font-size: 18px;
            font-weight: 700;
            color: #111827;
          }

          .soir-total {
            text-align: center;
            padding: 20px;
            background: #f8fafc;
            border-radius: 8px;
          }

          .soir-total .value {
            font-size: 32px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 4px;
          }

          .soir-total .label {
            font-size: 12px;
            color: #6b7280;
          }

          .footer {
            margin-top: 40px;
            padding-top: 16px;
            border-top: 1px solid #d1d5db;
            text-align: center;
            font-size: 9px;
            color: #6b7280;
          }

          @media print {
            body {
              padding: 8px;
              font-size: 10px;
            }

            .no-print {
              display: none !important;
            }

            .section {
              page-break-inside: avoid;
            }

            .products-grid {
              grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
              gap: 8px;
            }

            @page {
              margin: 8mm;
              size: A4;
            }
          }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <div class="logo">
              <img src="/src/assets/logo.png" alt="Boulangerie Chez Mina" />
            </div>
            <h1> Programme de Production</h1>
            <div class="date">${this.formatDate(e.dateProduction.toISOString())}</div>
            <div class="status">${h}</div>
          </div>

          <div class="stats">
            <div class="stat-card">
              <div class="label">Production Clients</div>
              <div class="value">${r}</div>
              <div class="unit">pices</div>
            </div>
            <div class="stat-card">
              <div class="label">Production Boutique</div>
              <div class="value">${i}</div>
              <div class="unit">pices</div>
            </div>
            <div class="stat-card">
              <div class="label">Total Gnral</div>
              <div class="value">${a}</div>
              <div class="unit">pices</div>
            </div>
          </div>
    `;c.length>0&&(f+=`
          <div class="section">
            <div class="section-header matin">
              <h2> Production Clients - Matin</h2>
            </div>
            <div class="products-grid">
      `,c.forEach(N=>{const b=t.find(I=>I.id===N.produitId),j=N.repartitionCar1Matin,C=N.repartitionCar2Matin,R=j+C;f+=`
              <div class="product-card">
                <div class="product-header matin">${b?.nom||"Produit"}</div>
                <div class="product-body">
                  <div class="car-row">
                    <span class="car-label">Car 1</span>
                    <span class="car-value">${j}</span>
                  </div>
                  <div class="car-row">
                    <span class="car-label">Car 2</span>
                    <span class="car-value">${C}</span>
                  </div>
                  <div class="total-row">
                    <span class="total-label">Total Matin</span>
                    <span class="total-value">${R}</span>
                  </div>
                </div>
              </div>
        `}),f+=`
            </div>
          </div>
      `),d.length>0&&(f+=`
          <div class="section">
            <div class="section-header soir">
              <h2> Production Clients - Soir</h2>
            </div>
            <div class="products-grid">
      `,d.forEach(N=>{const b=t.find(C=>C.id===N.produitId),j=N.repartitionCarSoir;f+=`
              <div class="product-card">
                <div class="product-header soir">${b?.nom||"Produit"}</div>
                <div class="product-body">
                  <div class="soir-total">
                    <div class="value">${j}</div>
                    <div class="label">pices</div>
                  </div>
                </div>
              </div>
        `}),f+=`
            </div>
          </div>
      `),e.quantitesBoutique&&e.quantitesBoutique.length>0&&(f+=`
          <div class="section">
            <div class="section-header boutique">
              <h2> Production Boutique</h2>
            </div>
            <div class="products-grid">
      `,e.quantitesBoutique.forEach(N=>{const b=t.find(C=>C.id===N.produitId),j=N.repartitionCars;f+=`
              <div class="product-card">
                <div class="product-header boutique">${b?.nom||"Produit"}</div>
                <div class="product-body">
                  <div class="total-row" style="margin-top: 0; padding-top: 0; border-top: none;">
                    <span class="total-label">Total Boutique</span>
                    <span class="total-value">${N.quantite}</span>
                  </div>
        `,j&&(f+=`
                  <div style="margin-top: 12px; padding-top: 8px; border-top: 1px solid #e5e7eb;">
                    <div style="font-size: 9px; color: #6b7280; margin-bottom: 6px; font-weight: 600;">RPARTITION:</div>
          `,j.car1_matin>0&&(f+=`
                    <div class="car-row">
                      <span class="car-label">Car 1 Matin</span>
                      <span class="car-value">${j.car1_matin}</span>
                    </div>
            `),j.car2_matin>0&&(f+=`
                    <div class="car-row">
                      <span class="car-label">Car 2 Matin</span>
                      <span class="car-value">${j.car2_matin}</span>
                    </div>
            `),j.car_soir>0&&(f+=`
                    <div class="car-row">
                      <span class="car-label">Car Soir</span>
                      <span class="car-value">${j.car_soir}</span>
                    </div>
            `),f+=`
                  </div>
          `),f+=`
                </div>
              </div>
        `}),f+=`
            </div>
          </div>
      `);const p=new Date;f+=`
          <div class="footer">
            Document gnr le ${p.toLocaleDateString("fr-FR")}  ${p.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}
            <br>
            Boulangerie Chez Mina - Programme de Production
          </div>

          <div class="no-print" style="text-align: center; margin-top: 30px; padding: 20px; background: #f3f4f6; border-radius: 8px;">
            <button onclick="window.print()" style="background: #4b5563; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer;">
               Imprimer ce document
            </button>
            <button onclick="window.close()" style="background: #9ca3af; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; margin-left: 12px;">
               Fermer
            </button>
          </div>
        </div>
      </body>
      </html>
    `;const y=window.open("","_blank");y&&(y.document.write(f),y.document.close())}generateDeliveryReceiptHTML(e,t,r){if(console.log(" Gnration bon de livraison - Donnes reues:",{commande:e?"OK":"MANQUANT",client:t?"OK":"MANQUANT",produits:r?`${r.length} produits`:"MANQUANT"}),!e){console.error(" Commande manquante pour gnrer le bon de livraison"),alert("Erreur: Impossible de gnrer le bon de livraison - commande manquante");return}if(!t){console.error(" Client manquant pour gnrer le bon de livraison"),alert("Erreur: Impossible de gnrer le bon de livraison - client manquant");return}const i=e.produits.reduce((h,f)=>h+f.quantiteCommandee*(f.prixUnitaire||0),0),a=new Date,c=new Date(e.dateLivraison),d=`
      <!DOCTYPE html>
      <html lang="fr">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Bon de Livraison - ${t?.nom||"Client"}</title>
        <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"><\/script>
        ${this.generateStyles()}
        <style>
          .delivery-header {
            text-align: center;
            background: #6b7280;
            color: white;
            padding: 20px;
            border-radius: 10px 10px 0 0;
            margin-bottom: 20px;
          }

          .client-info, .order-info {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #374151;
          }

          .products-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
          }

          .products-table th {
            background: #f3f4f6;
            padding: 15px;
            text-align: left;
            border-bottom: 2px solid #d1d5db;
            font-weight: 600;
            font-size: 15px;
          }

          .products-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #d1d5db;
            font-size: 15px;
          }

          .total-section {
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            text-align: right;
            margin-top: 20px;
            border: 2px solid #374151;
          }

          .signature-section {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 40px;
          }

          .signature-box {
            flex: 1;
            border: 2px dashed #d1d5db;
            height: 80px;
            border-radius: 8px;
            text-align: center;
            padding: 10px;
            color: #6b7280;
          }

          .icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            vertical-align: middle;
            margin-right: 6px;
          }

          .section-title {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 600;
          }

          .section-title .icon {
            margin-right: 8px;
            color: #374151;
          }

          /* Styles pour les boutons d'impression */
          .print-buttons {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: #f3f4f6;
            border-radius: 8px;
            border-top: 1px solid #d1d5db;
          }

          .print-btn {
            background: #374151;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin: 0 6px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
          }

          .print-btn:hover {
            background: #4b5563;
          }

          .print-btn.secondary {
            background: #9ca3af;
          }

          .print-btn.secondary:hover {
            background: #6b7280;
          }

          /* Styles d'impression */
          @media print {
            @page {
              margin: 15mm;
              size: A4;
            }

            body {
              font-size: 12pt;
              line-height: 1.4;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }

            .delivery-header {
              background: #6b7280 !important;
              color: white !important;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }

            .client-info, .order-info {
              background: #f8fafc !important;
              border-left: 4px solid #374151 !important;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }

            .products-table th {
              background: #f3f4f6 !important;
              border-bottom: 2px solid #374151 !important;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }

            .products-table td {
              border-bottom: 1px solid #d1d5db !important;
            }

            .total-section {
              background: #f9fafb !important;
              border: 2px solid #374151 !important;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }

            .signature-box {
              border: 2px dashed #374151 !important;
              background: white !important;
            }

            /* Masquer les boutons d'impression lors de l'impression */
            .no-print, .print-buttons {
              display: none !important;
            }

            /* viter les coupures de page dans les sections */
            .client-info, .order-info, .total-section {
              page-break-inside: avoid;
            }

            /* Garder le tableau ensemble si possible */
            .products-table {
              page-break-inside: auto;
            }

            .products-table tr {
              page-break-inside: avoid;
              page-break-after: auto;
            }
          }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="delivery-header">
            <div class="logo">
              <img src="/src/assets/logo.png" alt="Boulangerie Chez Mina" style="height: 50px; margin-bottom: 10px;" />
            </div>
            <h1><i data-lucide="clipboard-list" class="icon"></i>BON DE LIVRAISON</h1>
            <p>N ${e.id.slice(-8).toUpperCase()}</p>
          </div>

          <div class="client-info">
            <h3 class="section-title"><i data-lucide="user" class="icon"></i>INFORMATIONS CLIENT</h3>
            <p><strong>Nom :</strong> ${t?.nom||"Non spcifi"}</p>
            <p><strong>Tlphone :</strong> ${t?.telephone||"Non spcifi"}</p>
            <p><strong>Adresse :</strong> ${t?.adresse||"Non spcifie"}</p>
            <p><strong>Livreur :</strong> ${t?.livreur||"Non assign"}</p>
          </div>

          <div class="order-info">
            <h3 class="section-title"><i data-lucide="calendar" class="icon"></i>INFORMATIONS COMMANDE</h3>
            <p><strong>Date de livraison :</strong> ${c.toLocaleDateString("fr-FR")}</p>
            <p><strong>Date d'impression :</strong> ${a.toLocaleDateString("fr-FR")}  ${a.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}</p>
            <p><strong>Statut :</strong> <span style="color: #374151; font-weight: bold;"> LIVRER</span></p>
          </div>

          <table class="products-table">
            <thead>
              <tr>
                <th>Produit</th>
                <th style="text-align: center">Quantit</th>
                <th style="text-align: right">Prix unitaire</th>
                <th style="text-align: right">Total</th>
              </tr>
            </thead>
            <tbody>
              ${e.produits.map(h=>{const f=r.find(y=>y.id===h.produitId),p=h.quantiteCommandee*(h.prixUnitaire||0);return`
                  <tr>
                    <td><strong>${f?.nom||"Produit inconnu"}</strong></td>
                    <td style="text-align: center">${h.quantiteCommandee}</td>
                    <td style="text-align: right">${(h.prixUnitaire||0).toLocaleString("fr-FR")} FCFA</td>
                    <td style="text-align: right"><strong>${p.toLocaleString("fr-FR")} FCFA</strong></td>
                  </tr>
                `}).join("")}
            </tbody>
          </table>

          <div class="total-section">
            <h3><i data-lucide="banknote" class="icon"></i>TOTAL  PAYER : ${i.toLocaleString("fr-FR")} FCFA</h3>
          </div>

          <div class="signature-section">
            <div class="signature-box">
              <strong>Signature Livreur</strong>
              <br><small>Date et heure :</small>
            </div>
            <div class="signature-box">
              <strong>Signature Client</strong>
              <br><small>Nom et signature :</small>
            </div>
          </div>

          <div class="footer" style="text-align: left; margin-top: 30px;">
            <p style="font-size: 16px; font-weight: 600; color: #374151; margin-bottom: 8px;">
              Merci de votre confiance !
            </p>
            <p style="font-size: 0.8em; color: #6b7280;">
              Document gnr le ${a.toLocaleDateString("fr-FR")}  ${a.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}
              <br>
              Boulangerie Chez Mina - Bon de Livraison
            </p>
          </div>

          <div class="print-buttons">
            <button onclick="window.print()" class="print-btn">
              <i data-lucide="printer"></i>
              Imprimer ce document
            </button>
            <button onclick="window.close()" class="print-btn secondary">
              <i data-lucide="x"></i>
              Fermer
            </button>
          </div>
        </div>
        <script>
          lucide.createIcons();
        <\/script>
      </body>
      </html>
    `;console.log(" Tentative d'ouverture de la fentre d'impression...");try{const h=window.open("","_blank");h?(console.log(" Fentre ouverte avec succs, criture du contenu..."),h.document.write(d),h.document.close(),console.log(" Bon de livraison gnr et affich")):(console.error(" Impossible d'ouvrir la fentre d'impression"),alert(` Impossible d'ouvrir la fentre d'impression.
Vrifiez que les pop-ups ne sont pas bloqus dans votre navigateur.`))}catch(h){console.error(" Erreur lors de l'ouverture de la fentre:",h),alert("Erreur technique lors de l'ouverture de la fentre d'impression.")}}}const Ig=new rO,iO=()=>{const{programmeActuel:n,commandesClients:e,quantitesBoutique:t,produits:r,clients:i,showCommandeForm:a,showQuantiteBoutiqueForm:c,commandeEnEdition:d,quantiteBoutiqueEnEdition:h,formulaireCommande:f,creerNouveauProgramme:p,chargerProgramme:y,sauvegarderProgramme:N,envoyerAuBoulanger:b,ajouterCommandeClient:j,modifierCommandeClient:C,supprimerCommandeClient:R,annulerCommandeClient:I,supprimerProduitDeCommande:B,ajouterQuantiteBoutique:z,supprimerQuantiteBoutique:H,chargerProduits:he,chargerClients:re,rafraichirDonnees:V,setShowCommandeForm:D,setShowQuantiteBoutiqueForm:k,setCommandeEnEdition:G,setQuantiteBoutiqueEnEdition:S,updateFormulaireCommande:L,resetFormulaireCommande:F,validerProduction:ae,isLoading:ve}=wl(),K=By(),[ce,me]=fe.useState(new Date().toISOString().split("T")[0]),[Se,qe]=fe.useState("create"),[X,q]=fe.useState(null),[J,ne]=fe.useState(!1),[ue,pe]=fe.useState(""),we=e.filter(Te=>{if(!ue.trim())return!0;const Je=i.find(it=>it.id===Te.clientId)?.nom?.toLowerCase()||"",tt=ue.toLowerCase().trim();return Je.includes(tt)});fe.useEffect(()=>{(async()=>{try{await he(),await re();const Ae=new Date(ce);await y(Ae)}catch(Ae){console.error("Erreur lors de l'initialisation:",Ae);const Je=new Date(ce);p(Je)}})()},[ce,he,re,y,p]),fe.useEffect(()=>{const Te=()=>{document.hidden||V().catch(console.error)};return document.addEventListener("visibilitychange",Te),()=>document.removeEventListener("visibilitychange",Te)},[V]);const De=async Te=>{me(Te);try{const Ae=new Date(Te);await y(Ae)}catch(Ae){console.error("Erreur lors du changement de date:",Ae)}},Re=Te=>{if(Te){const Ae=e.find(Je=>Je.clientId===Te&&new Date(Je.dateLivraison).toDateString()===new Date(ce).toDateString());Ae?(G(Ae),qe("addProducts")):(G(null),qe("create"),L({selectedClientId:Te}))}else G(null),qe("create");D(!0)},Ue=(Te,Ae)=>{const Je=e.find(tt=>tt.id===Te);Je&&(G(Je),q(Ae),ne(!0))},Ze=Te=>{if(d&&X!==null){const Ae=[...d.produits];Ae[X]=Te,C(d.id,{...d,produits:Ae}),ne(!1),G(null),q(null),kt.success(" Produit modifi avec succs !")}},at=()=>{ne(!1),G(null),q(null)},ot=Te=>{if(Se==="addProducts"&&d){const Ae=[...d.produits];Te.produits.forEach(Je=>{const tt=Ae.findIndex(it=>it.produitId===Je.produitId);tt>=0?Ae[tt]=Je:Ae.push(Je)}),C(d.id,{...d,produits:Ae})}else if(Se==="edit"&&d)C(d.id,Te);else{const Ae=e.find(Je=>Je.clientId===Te.clientId&&new Date(Je.dateLivraison).toDateString()===new Date(Te.dateLivraison).toDateString());if(Ae){const Je=[...Ae.produits];Te.produits.forEach(tt=>{const it=Je.findIndex(lt=>lt.produitId===tt.produitId);it>=0?Je[it]=tt:Je.push(tt)}),C(Ae.id,{...Ae,produits:Je})}else j(Te)}D(!1),G(null),q(null),qe("create"),F(),Se==="addProducts"?kt.success(" Produits ajouts  la commande avec succs !"):Se==="edit"?kt.success(" Commande modifie avec succs !"):kt.success(" Nouvelle commande cre avec succs !")},ht=()=>{D(!1),G(null),q(null),qe("create"),F()},ie=async()=>{try{await N(),kt.success(" Programme de production sauvegard avec succs")}catch(Te){console.log(Te),kt.error(" Erreur lors de la sauvegarde du programme")}},rt=async()=>{if(!n){kt.error(" Aucun programme  envoyer");return}const Te=[];e.length===0&&Te.push(" Aucune commande client dfinie"),n.totauxParProduit.length===0&&Te.push(" Aucun produit dans le programme");const Ae=e.filter(Je=>Je.statut!=="annulee");Ae.length===0&&Te.push(" Toutes les commandes sont annules");for(const Je of n.totauxParProduit)Je.totalGlobal<=0&&Te.push(` Le produit "${Je.produit?.nom}" a une quantit totale de 0`);if(Te.length>0){if(!await K.confirm({title:"Validation du programme",message:` Des problmes ont t dtects :

${Te.join(`
`)}

Voulez-vous tout de mme envoyer le programme ?`,confirmText:"Envoyer malgr tout",cancelText:"Annuler",type:"warning"}))return}else if(!await K.confirm({title:"Confirmer l'envoi",message:` tes-vous sr de vouloir envoyer ce programme au boulanger ?

 ${Ae.length} commande(s) client(s)
 ${n.totauxParProduit.length} produit(s) diffrent(s)
 ${t.length} produit(s) pour la boutique

 Une fois envoy, le programme ne pourra plus tre modifi.`,confirmText:"Envoyer au Boulanger",cancelText:"Annuler",type:"info"}))return;try{await b(),kt.success(" Programme envoy au boulanger avec succs !")}catch{kt.error(" Erreur lors de l'envoi du programme")}},Kt=async()=>{if(await K.confirm({title:"Valider la production",message:` tes-vous sr de vouloir valider la production ?

Cela va :
1. Changer le statut en "Produit"
2.  Dduire AUTOMATIQUEMENT les matires premires du stock selon les recettes.

Assurez-vous que les quantits produites sont correctes.`,confirmText:"Valider et Dduire Stock",cancelText:"Annuler",type:"warning"}))try{await ae(),kt.success(" Production valide et stocks mis  jour !")}catch{kt.error(" Erreur lors de la validation")}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-linear-to-r from-purple-600 to-blue-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:clipboard-text",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Programme de Production"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Gestion des commandes clients et quantits boutique"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:ie,disabled:ve,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:content-save",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Sauvegarder"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border",children:[l.jsx(de,{icon:n?.statut==="brouillon"?"mdi:file-document-edit":n?.statut==="modifie"?"mdi:file-document-alert":n?.statut==="envoye"?"mdi:send-check":"mdi:factory",className:`text-lg ${n?.statut==="brouillon"?"text-gray-500":n?.statut==="modifie"?"text-orange-500":n?.statut==="envoye"?"text-blue-500":"text-green-500"}`}),l.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[n?.statut==="brouillon"&&"Brouillon",n?.statut==="modifie"&&"Modifi ( renvoyer)",n?.statut==="envoye"&&"Envoy au boulanger",n?.statut==="produit"&&"Production termine"]})]}),l.jsxs("div",{className:"flex gap-2",children:[(n?.statut==="brouillon"||n?.statut==="modifie")&&l.jsxs("button",{onClick:rt,disabled:!n||ve,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:[l.jsx(de,{icon:"mdi:send",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:n?.statut==="modifie"?"Renvoyer au Boulanger":"Envoyer au Boulanger"})]}),(n?.statut==="envoye"||n?.statut==="modifie")&&l.jsxs("button",{onClick:Kt,disabled:ve,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all disabled:opacity-50 shadow-md hover:shadow-lg",children:[l.jsx(de,{icon:"mdi:factory",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Valider Production"})]}),n?.statut==="produit"&&l.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg border border-green-200",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Production termine"})]})]})]}),l.jsx(p0,{isOpen:K.isOpen,onClose:K.handleCancel,onConfirm:K.handleConfirm,title:K.title,message:K.message,confirmText:K.confirmText,cancelText:K.cancelText,type:K.type,position:"relative"})]})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:calendar",className:"text-lg text-blue-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Date de production"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("input",{type:"date",value:ce,onChange:Te=>De(Te.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 font-medium"}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Programme pour ",new Date(ce).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),l.jsx(Yu,{isOpen:a,onClose:ht,title:Se==="addProducts"&&d?`Ajouter des Produits - ${i.find(Te=>Te.id===d.clientId)?.nom||"Client"}`:Se==="edit"&&d?`Modifier la Commande - ${i.find(Te=>Te.id===d.clientId)?.nom||"Client"}`:"Nouvelle Commande Client",size:"xl",position:"center",children:l.jsx(eO,{produits:r,clients:i,commande:d,mode:Se,onSave:ot,onCancel:ht,isLoading:ve,formulaireState:f,onUpdateFormulaire:L})}),J&&d&&X!==null&&l.jsx(Yu,{isOpen:J,onClose:at,title:`Modifier le Produit - ${i.find(Te=>Te.id===d.clientId)?.nom||"Client"}`,size:"xl",position:"center",children:l.jsx(tO,{produits:r,commande:d,produitIndex:X,client:i.find(Te=>Te.id===d.clientId),onSave:Ze,onCancel:at,isLoading:ve})}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-group",className:"text-lg text-green-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Commandes Clients"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Ajoutez les commandes des clients pour le jour slectionn"})]})]}),l.jsxs("button",{onClick:()=>Re(),disabled:a,className:"flex items-center gap-2 px-4 py-2 bg-linear-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouvelle commande"})]})]}),e.length>0&&l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"relative flex-1 max-w-md",children:[l.jsx(de,{icon:"mdi:magnify",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Rechercher un client...",value:ue,onChange:Te=>pe(Te.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm"}),ue&&l.jsx("button",{onClick:()=>pe(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l.jsx(de,{icon:"mdi:close"})})]}),l.jsx("div",{className:"text-sm text-gray-500",children:we.length===e.length?`${e.length} commande(s)`:`${we.length} sur ${e.length} commande(s)`})]})]})}),l.jsx("div",{className:"p-6",children:we.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:ue?"mdi:magnify":"mdi:clipboard-outline",className:"text-3xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:ue?`Aucun client trouv pour "${ue}"`:"Aucune commande client"}),l.jsx("p",{className:"text-gray-500 mb-6",children:ue?"Essayez avec d'autres termes de recherche ou ajoutez une nouvelle commande":"Commencez par ajouter une commande client pour ce jour de production"}),ue?l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsxs("button",{onClick:()=>pe(""),className:"inline-flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all",children:[l.jsx(de,{icon:"mdi:close",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Effacer la recherche"})]}),l.jsxs("button",{onClick:()=>Re(),className:"inline-flex items-center gap-2 px-4 py-2 bg-linear-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouvelle commande"})]})]}):l.jsxs("button",{onClick:()=>Re(),className:"inline-flex items-center gap-2 px-6 py-3 bg-linear-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter la premire commande"})]})]}):l.jsxs("div",{className:"space-y-4",children:[we.map(Te=>{const Ae=i.find(it=>it.id===Te.clientId),Je=Te.produits.reduce((it,lt)=>it+(lt.prixUnitaire||0)*lt.quantiteCommandee,0),tt=it=>{const lt=it?.toLowerCase()||"";return lt.includes("baguette")?"mdi:baguette":lt.includes("pain")?"mdi:bread-slice":lt.includes("croissant")?"mdi:croissant":lt.includes("brioche")?"mdi:muffin":lt.includes("tarte")?"mdi:pie":lt.includes("gateau")||lt.includes("gteau")?"mdi:cake":lt.includes("sandwich")?"mdi:food":lt.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"relative bg-linear-to-br from-white to-gray-50 border border-gray-200 rounded-xl p-6 hover:border-green-300 hover:shadow-xl transition-all duration-300 group",children:[l.jsxs("div",{className:"flex items-start justify-between mb-6",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-gray-600 to-gray-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx(de,{icon:"mdi:account",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-1",children:Ae?.nom||"Client inconnu"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded-lg",children:[l.jsx(de,{icon:"mdi:calendar-clock",className:"text-gray-500"}),l.jsx("span",{children:new Date(Te.dateLivraison).toLocaleDateString("fr-FR")})]}),Te.statut==="annulee"&&l.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 text-xs font-semibold rounded-full",children:[l.jsx(de,{icon:"mdi:cancel",className:"text-red-600"}),"ANNULE"]})]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:Je.toLocaleString("fr-FR")}),l.jsx("div",{className:"text-xs text-gray-400 font-medium",children:"FCFA"}),l.jsxs("div",{className:"flex items-center justify-end gap-1 text-sm text-gray-500 mt-1",children:[l.jsx(de,{icon:"mdi:package-variant-closed",className:"text-gray-400"}),Te.produits.length," article",Te.produits.length>1?"s":""]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-list",className:"text-gray-500"}),l.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Produits commands"}),l.jsxs("span",{className:"ml-auto text-sm font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:[Te.produits.length," item",Te.produits.length>1?"s":""]}),l.jsxs("div",{className:"flex gap-1 ml-2",children:[l.jsx("button",{onClick:()=>{Ig.generateDeliveryReceiptHTML(Te,Ae,r)},className:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-100 rounded-md transition-colors",title:"Bon de livraison",children:l.jsx(j9,{size:16})}),l.jsx("button",{onClick:()=>Re(Te.clientId),className:"p-1.5 text-green-600 hover:text-green-700 hover:bg-green-100 rounded-md transition-colors",title:"Ajouter des produits",children:l.jsx(Fy,{size:16})}),l.jsx("button",{onClick:()=>{I(Te.id),kt.success(`Commande de ${Ae?.nom||"le client"} annule`)},className:"p-1.5 text-amber-600 hover:text-amber-700 hover:bg-amber-100 rounded-md transition-colors",title:"Annuler la commande",children:l.jsx(_9,{size:16})}),l.jsx(c1,{onConfirm:()=>{R(Te.id),kt.success(`Commande de ${Ae?.nom||"le client"} supprime`)},message:`tes-vous sr de vouloir supprimer dfinitivement la commande de "${Ae?.nom||"Client inconnu"}" ?

Cette action est irrversible.`,confirmText:"Supprimer dfinitivement",cancelText:"Annuler",type:"danger",className:"p-1.5 text-red-600 hover:text-red-700 hover:bg-red-100 rounded-md transition-colors",title:"Supprimer dfinitivement",children:l.jsx(qy,{size:16})})]})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Te.produits.map((it,lt)=>{const zt=r.find($t=>$t.id===it.produitId);return l.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-xl p-4 hover:border-gray-300 hover:shadow-md transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-600 to-gray-700 rounded-lg flex items-center justify-center shadow-md",children:l.jsx(de,{icon:tt(zt?.nom||""),className:"text-lg text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h5",{className:"font-semibold text-gray-900",children:zt?.nom||"Produit inconnu"}),l.jsxs("div",{className:"flex items-center justify-between mt-1",children:[l.jsxs("span",{className:"text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded-lg font-medium",children:["x",it.quantiteCommandee]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"text-lg font-bold text-gray-800",children:[((it.prixUnitaire||0)*it.quantiteCommandee).toLocaleString("fr-FR")," F"]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:$t=>{$t.stopPropagation(),Ue(Te.id,lt)},className:"p-1 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded",title:"Modifier ce produit",children:l.jsx(de,{icon:"mdi:pencil",className:"text-lg"})}),l.jsx(c1,{onConfirm:()=>{B(Te.id,lt),kt.success(`Produit "${zt?.nom||"Produit"}" supprim de la commande`)},message:`tes-vous sr de vouloir supprimer "${zt?.nom||"ce produit"}" de cette commande ?

${Te?.produits.length===1?" Cette action supprimera compltement la commande car c'est le seul produit.":"Les autres produits de la commande seront conservs."}`,confirmText:"Supprimer le produit",cancelText:"Annuler",type:"warning",className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 rounded",onClick:$t=>$t.stopPropagation(),title:"Supprimer ce produit de la commande",children:l.jsx(de,{icon:"mdi:close",className:"text-lg"})})]})]})]})]})]}),it.repartitionCars&&l.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[l.jsxs("div",{className:"text-xs font-medium text-gray-600 mb-2 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-gray-500"}),"Livraisons programmes"]}),l.jsxs("div",{className:"flex gap-2 flex-wrap",children:[it.repartitionCars.car1_matin&&Number(it.repartitionCars.car1_matin)>0&&l.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-linear-to-r from-orange-100 to-orange-200 text-orange-800 text-xs font-semibold rounded-full shadow-sm",children:[l.jsx(de,{icon:"mdi:truck",className:"text-sm"}),l.jsxs("span",{children:["Car 1M: ",it.repartitionCars.car1_matin]})]}),it.repartitionCars.car2_matin&&Number(it.repartitionCars.car2_matin)>0&&l.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-linear-to-r from-blue-100 to-blue-200 text-blue-800 text-xs font-semibold rounded-full shadow-sm",children:[l.jsx(de,{icon:"mdi:truck-outline",className:"text-sm"}),l.jsxs("span",{children:["Car 2M: ",it.repartitionCars.car2_matin]})]}),it.repartitionCars.car_soir&&Number(it.repartitionCars.car_soir)>0&&l.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-linear-to-r from-purple-100 to-purple-200 text-purple-800 text-xs font-semibold rounded-full shadow-sm",children:[l.jsx(de,{icon:"mdi:truck-fast",className:"text-sm"}),l.jsxs("span",{children:["Car S: ",it.repartitionCars.car_soir]})]})]})]})]},lt)})})]})]},Te.id)}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mt-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.length}),l.jsx("div",{className:"text-sm text-gray-500",children:"Commandes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.reduce((Te,Ae)=>Te+Ae.produits.length,0)}),l.jsx("div",{className:"text-sm text-gray-500",children:"Articles"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[e.reduce((Te,Ae)=>Te+Ae.produits.reduce((Je,tt)=>Je+(tt.prixUnitaire||0)*tt.quantiteCommandee,0),0).toLocaleString("fr-FR")," FCFA"]}),l.jsx("div",{className:"text-sm text-gray-500",children:"Total"})]})]})})]})})]}),l.jsx(Yu,{isOpen:c,onClose:()=>{k(!1),S(null)},title:h?"Modifier Produit Boutique":"Ajouter un Produit pour la Boutique",size:"xl",children:l.jsx(nO,{produits:r,quantitesActuelles:t,quantiteEnEdition:h,onSave:Te=>{console.log(" Sauvegarde quantit boutique avec rpartition:",Te),z(Te),k(!1),S(null)},onCancel:()=>{k(!1),S(null)}})}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:storefront",className:"text-lg text-amber-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Quantits Boutique"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Dfinissez les quantits  envoyer en boutique"})]})]}),l.jsxs("button",{onClick:()=>k(!0),disabled:c,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:border-gray-400 rounded-lg transition-all disabled:opacity-50 shadow-sm hover:shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter produit"})]})]})}),l.jsx("div",{className:"p-6",children:t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:storefront-outline",className:"text-3xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune quantit boutique"}),l.jsx("p",{className:"text-gray-500 mb-6",children:"Dfinissez les produits  envoyer directement en boutique"}),l.jsxs("button",{onClick:()=>k(!0),className:"inline-flex items-center gap-2 px-6 py-3 text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:border-gray-400 rounded-lg transition-all shadow-sm hover:shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter le premier produit"})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(Te=>{const Ae=r.find(Je=>Je.id===Te.produitId);return l.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-xl p-4 hover:border-gray-300 hover:shadow-md transition-all group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-600 to-gray-700 rounded-lg flex items-center justify-center shadow-md",children:l.jsx(de,{icon:"mdi:storefront",className:"text-lg text-white"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900",children:Ae?.nom||"Produit inconnu"}),l.jsx("div",{className:"flex items-center gap-2 mt-1",children:l.jsxs("span",{className:"text-sm text-gray-700 bg-gray-100 px-2 py-1 rounded-lg font-medium",children:[Te.quantite," pice",Te.quantite>1?"s":""]})})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>{S(Te),k(!0)},className:"p-2 text-orange-500 hover:text-orange-700 hover:bg-orange-100 rounded-lg transition-colors",title:"Modifier",children:l.jsx(de,{icon:"mdi:pencil-outline",className:"text-lg"})}),l.jsx("button",{onClick:()=>H(Te.produitId),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-100 rounded-lg transition-colors",title:"Supprimer",children:l.jsx(de,{icon:"mdi:delete-outline",className:"text-lg"})})]})]}),Te.repartitionCars&&l.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[l.jsxs("div",{className:"text-xs font-medium text-gray-600 mb-2 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-gray-500"}),"Rpartition par cars"]}),l.jsxs("div",{className:"space-y-2",children:[Te.repartitionCars.car1_matin>0&&l.jsxs("div",{className:"flex items-center justify-between p-2 bg-orange-50 border border-orange-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:truck",className:"text-orange-600 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-orange-800",children:"Car 1M"})]}),l.jsx("span",{className:"text-xs font-bold text-orange-800",children:Te.repartitionCars.car1_matin})]}),Te.repartitionCars.car2_matin>0&&l.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 border border-blue-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:truck-outline",className:"text-blue-600 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-blue-800",children:"Car 2M"})]}),l.jsx("span",{className:"text-xs font-bold text-blue-800",children:Te.repartitionCars.car2_matin})]}),Te.repartitionCars.car_soir>0&&l.jsxs("div",{className:"flex items-center justify-between p-2 bg-purple-50 border border-purple-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:truck-fast",className:"text-purple-600 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-purple-800",children:"Car S"})]}),l.jsx("span",{className:"text-xs font-bold text-purple-800",children:Te.repartitionCars.car_soir})]})]})]})]},Te.produitId)})}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mt-6",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.length}),l.jsx("div",{className:"text-sm text-gray-500",children:"Produits boutique"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-amber-600",children:t.reduce((Te,Ae)=>Te+Ae.quantite,0)}),l.jsx("div",{className:"text-sm text-gray-500",children:"Total pices"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-bold text-orange-600",children:t.reduce((Te,Ae)=>Te+(Ae.repartitionCars?.car1_matin||0),0)}),l.jsx("div",{className:"text-xs text-gray-500",children:"Car 1M"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-bold text-blue-600",children:t.reduce((Te,Ae)=>Te+(Ae.repartitionCars?.car2_matin||0),0)}),l.jsx("div",{className:"text-xs text-gray-500",children:"Car 2M"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-bold text-purple-600",children:t.reduce((Te,Ae)=>Te+(Ae.repartitionCars?.car_soir||0),0)}),l.jsx("div",{className:"text-xs text-gray-500",children:"Car S"})]})]})})]})})]}),n?.totauxParProduit&&n.totauxParProduit.length>0&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:chart-pie",className:"text-lg text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Programme de Production"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Rpartition des quantits par produit et par car de livraison"})]})]})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.totauxParProduit.reduce((Te,Ae)=>Te+(Ae.repartitionCar1Matin||0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Car 1 - Matin"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[l.jsx(de,{icon:"mdi:clock-time-eight",className:"text-sm"}),l.jsx("span",{className:"text-sm",children:"06:00 - 10:00"})]})]})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:truck-delivery-outline",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.totauxParProduit.reduce((Te,Ae)=>Te+(Ae.repartitionCar2Matin||0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Car 2 - Matin"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[l.jsx(de,{icon:"mdi:clock-time-nine",className:"text-sm"}),l.jsx("span",{className:"text-sm",children:"08:00 - 12:00"})]})]})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:truck-fast",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.totauxParProduit.reduce((Te,Ae)=>Te+(Ae.repartitionCarSoir||0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Car - Soir"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[l.jsx(de,{icon:"mdi:clock-time-five",className:"text-sm"}),l.jsx("span",{className:"text-sm",children:"15:00 - 19:00"})]})]})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.totauxParProduit.reduce((Te,Ae)=>Te+Ae.totalGlobal,0)}),l.jsx("div",{className:"text-gray-100 text-xs",children:"pices"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Total Gnral"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-200",children:[l.jsx(de,{icon:"mdi:sigma",className:"text-sm"}),l.jsx("span",{className:"text-sm",children:"Toutes livraisons"})]})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Dtail par produit"}),l.jsxs("span",{className:"ml-auto text-sm font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[n.totauxParProduit.length," produit",n.totauxParProduit.length>1?"s":""]})]}),l.jsx("div",{className:"grid gap-6 lg:grid-cols-2 xl:grid-cols-3",children:n.totauxParProduit.map(Te=>{const Ae=Je=>{const tt=Je?.toLowerCase()||"";return tt.includes("baguette")?"mdi:baguette":tt.includes("pain")?"mdi:bread-slice":tt.includes("croissant")?"mdi:croissant":tt.includes("brioche")?"mdi:muffin":tt.includes("tarte")?"mdi:pie":tt.includes("gateau")||tt.includes("gteau")?"mdi:cake":tt.includes("sandwich")?"mdi:food":tt.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"bg-linear-to-br from-white to-gray-50 border border-gray-200 rounded-2xl p-6 hover:border-purple-300 hover:shadow-2xl transition-all duration-300 group",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-slate-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx(de,{icon:Ae(Te.produit?.nom||""),className:"text-2xl text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-bold text-xl text-gray-900 mb-1",children:Te.produit?.nom||Te.produitId}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl font-bold text-gray-800",children:Te.totalGlobal}),l.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:"pices"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center border border-gray-200 group-hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-group",className:"text-white text-sm"})}),l.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Clients"})]}),l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:Te.totalClient})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center border border-gray-200 group-hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:storefront",className:"text-white text-sm"})}),l.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Boutique"})]}),l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:Te.totalBoutique})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-gray-500"}),l.jsx("h5",{className:"text-sm font-semibold text-gray-700",children:"Planning de livraison"})]}),l.jsxs("div",{className:"space-y-2",children:[(Te.repartitionCar1Matin||0)>0&&l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck",className:"text-white"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-800",children:"Car 1 - Matin"}),l.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:clock-time-eight",className:"text-xs"}),"06:00 - 10:00"]})]})]}),l.jsx("div",{className:"text-xl font-bold text-gray-800",children:Te.repartitionCar1Matin})]}),(Te.repartitionCar2Matin||0)>0&&l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-outline",className:"text-white"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-800",children:"Car 2 - Matin"}),l.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:clock-time-nine",className:"text-xs"}),"08:00 - 12:00"]})]})]}),l.jsx("div",{className:"text-xl font-bold text-gray-800",children:Te.repartitionCar2Matin})]}),(Te.repartitionCarSoir||0)>0&&l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-fast",className:"text-white"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-800",children:"Car - Soir"}),l.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:clock-time-five",className:"text-xs"}),"15:00 - 19:00"]})]})]}),l.jsx("div",{className:"text-xl font-bold text-gray-800",children:Te.repartitionCarSoir})]})]})]})]},Te.produitId)})})]})]})]})]}),l.jsx("button",{onClick:()=>k(!0),disabled:c,className:"fixed bottom-6 right-6 w-16 h-16 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 disabled:opacity-50 z-50 flex items-center justify-center group",title:"Ajouter un produit boutique",children:l.jsxs("div",{className:"relative",children:[l.jsx(de,{icon:"mdi:storefront-plus",className:"text-2xl transition-transform group-hover:scale-110"}),l.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]})})]})},sO=`
  @media print {
    @page {
      margin: 0.5in;
      size: A4;
    }

    body {
      font-size: 12pt;
      line-height: 1.4;
    }

    .print\\:break-inside-avoid {
      break-inside: avoid;
    }

    .print\\:break-before-page {
      break-before: page;
    }

    .print\\:bg-white {
      background-color: white !important;
    }

    .print\\:text-black {
      color: black !important;
    }

    .print\\:border-black {
      border-color: black !important;
    }

    .print\\:shadow-none {
      box-shadow: none !important;
    }

    .print\\:rounded-none {
      border-radius: 0 !important;
    }

    .print\\:hidden {
      display: none !important;
    }

    .print\\:block {
      display: block !important;
    }

    .print\\:grid-cols-3 {
      grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
    }

    .print\\:gap-4 {
      gap: 1rem !important;
    }

    .print\\:p-4 {
      padding: 1rem !important;
    }

    .print\\:max-w-none {
      max-width: none !important;
    }

    .print\\:space-y-6 > * + * {
      margin-top: 1.5rem !important;
    }

    .print\\:mb-4 {
      margin-bottom: 1rem !important;
    }

    .print\\:mt-8 {
      margin-top: 2rem !important;
    }

    .print\\:text-lg {
      font-size: 1.125rem !important;
    }

    .print\\:text-2xl {
      font-size: 1.5rem !important;
    }

    .print\\:text-sm {
      font-size: 0.875rem !important;
    }

    .print\\:border-2 {
      border-width: 2px !important;
    }

    .print\\:bg-gray-200 {
      background-color: #e5e7eb !important;
    }
  }
`,aO=()=>{const{programmeActuel:n,chargerProgramme:e,produits:t}=wl(),r=()=>{if(console.log(" Bouton impression cliqu"),console.log(" Programme actuel:",n),console.log(" Produits:",t?.length,"produits disponibles"),n&&t){console.log(" Gnration du rapport HTML...");try{Ig.generateProductionReportHTML(n,t),console.log(" Rapport gnr avec succs")}catch(c){console.error(" Erreur lors de la gnration:",c)}}else console.warn(" Donnes manquantes:"),console.warn("  - Programme actuel:",!!n),console.warn("  - Produits:",!!t,`(${t?.length||0} lments)`)};fe.useEffect(()=>{e(new Date)},[e]),fe.useEffect(()=>{const c=document.createElement("style");return c.textContent=sO,document.head.appendChild(c),()=>{document.head.removeChild(c)}},[]);const i=n?.totauxParProduit||[],a=c=>{const d=c?.toLowerCase()||"";return d.includes("baguette")?"mdi:baguette":d.includes("pain")?"mdi:bread-slice":d.includes("croissant")?"mdi:croissant":d.includes("brioche")?"mdi:muffin":d.includes("tarte")?"mdi:pie":d.includes("gateau")||d.includes("gteau")?"mdi:cake":d.includes("sandwich")?"mdi:food":d.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"min-h-screen bg-gray-50 print:bg-white print:text-black",children:[l.jsx("div",{className:"hidden print:block print:mb-4",children:l.jsxs("div",{className:"text-center border-b-2 border-black pb-4 mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold mb-2",children:" PROGRAMME DE PRODUCTION"}),l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("span",{children:["Date: ",new Date().toLocaleDateString("fr-FR")]}),l.jsxs("span",{children:["Statut: ",n?.statut==="envoye"?" Confirm":" En attente"]}),l.jsxs("span",{children:["Imprim le: ",new Date().toLocaleDateString("fr-FR"),"  ",new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]})]})}),l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4 print:hidden",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:chef-hat",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Vue Boulanger"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Programme de production journalier"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[n&&l.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[l.jsx(de,{icon:"mdi:printer",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Imprimer le document"})]}),n&&l.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium border ${n.statut==="envoye"?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:[l.jsx(de,{icon:n.statut==="envoye"?"mdi:check-circle":"mdi:clock-outline",className:"text-sm"}),n.statut==="envoye"?"Confirm":"En attente"]})]})]})}),l.jsx("div",{className:"max-w-7xl mx-auto p-6 space-y-8 print:max-w-none print:p-4 print:space-y-6",children:!n||i.length===0?l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-12 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:bread-slice",className:"text-3xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Pas de production"}),l.jsx("p",{className:"text-gray-500",children:"Aucun programme n'a t dfini pour le moment."}),l.jsxs("button",{onClick:()=>{e(new Date)},className:"mt-6 inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[l.jsx(de,{icon:"mdi:refresh",className:"text-lg"}),l.jsx("span",{children:"Actualiser"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-gray-700 text-white rounded-xl p-6 shadow-sm flex items-center justify-between print:bg-white print:text-black print:border-2 print:border-black print:shadow-none print:rounded-none",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-gray-600 rounded-lg print:bg-gray-200 print:text-black",children:l.jsx(de,{icon:"mdi:sigma",className:"text-2xl"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold print:text-lg",children:"Total Journe"}),l.jsx("p",{className:"text-gray-400 text-sm print:text-black print:text-sm",children:"Production globale (Clients + Boutique)"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-4xl font-bold print:text-2xl",children:i.reduce((c,d)=>c+d.totalGlobal,0)}),l.jsx("div",{className:"text-gray-400 text-sm font-medium print:text-black",children:"pices au total"})]})]}),i.some(c=>c.repartitionCar1Matin+c.repartitionCar2Matin>0)&&l.jsxs("section",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunrise",className:"text-xl text-gray-500"})}),l.jsx("h2",{className:"text-2xl font-bold text-gray-700",children:"Production Clients - Matin"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 print:grid-cols-3 print:gap-4",children:i.filter(c=>c.repartitionCar1Matin+c.repartitionCar2Matin>0).map(c=>{const d=c.repartitionCar1Matin,h=c.repartitionCar2Matin,f=d+h;return l.jsxs("div",{className:"relative bg-white border border-gray-200 border-t-4 border-t-gray-600 rounded-xl p-6 hover:border-gray-300 hover:shadow-md transition-all print:border-black print:shadow-none print:rounded-none print:p-4 print:break-inside-avoid",children:[l.jsx("div",{className:"absolute top-3 right-4 text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Matin"}),l.jsxs("div",{className:"flex items-center gap-4 mb-6 pt-2",children:[l.jsx("div",{className:"w-14 h-14 bg-gray-600 rounded-xl flex items-center justify-center shadow-sm flex-shrink-0",children:l.jsx(de,{icon:a(c.produit?.nom||""),className:"text-2xl text-white"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:c.produit?.nom||"Produit"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center border border-gray-100",children:[l.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Car 1"}),l.jsx("div",{className:"text-3xl font-bold text-gray-700",children:d})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center border border-gray-100",children:[l.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase mb-1",children:"Car 2"}),l.jsx("div",{className:"text-3xl font-bold text-gray-700",children:h})]})]}),l.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Total Matin"}),l.jsxs("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:"text-2xl font-bold text-gray-800",children:f}),l.jsx("span",{className:"text-sm text-gray-500",children:"pc"})]})]})]},`matin-${c.produitId}`)})})]}),i.some(c=>c.repartitionCarSoir>0)&&l.jsxs("section",{className:"pt-8 border-t border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunset",className:"text-xl text-gray-600"})}),l.jsx("h2",{className:"text-2xl font-bold text-gray-600",children:"Production Clients - Soir"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 print:grid-cols-3 print:gap-4",children:i.filter(c=>c.repartitionCarSoir>0).map(c=>{const d=c.repartitionCarSoir;return l.jsxs("div",{className:"relative bg-white border border-gray-200 border-t-4 border-t-gray-300 rounded-xl p-6 hover:border-gray-300 hover:shadow-md transition-all print:border-black print:shadow-none print:rounded-none print:p-4 print:break-inside-avoid",children:[l.jsx("div",{className:"absolute top-3 right-4 text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Soir"}),l.jsxs("div",{className:"flex items-center gap-4 mb-8 pt-2",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-400 rounded-xl flex items-center justify-center shadow-sm flex-shrink-0",children:l.jsx(de,{icon:a(c.produit?.nom||""),className:"text-3xl text-white"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:c.produit?.nom||"Produit"})]}),l.jsxs("div",{className:"text-center mb-2",children:[l.jsx("div",{className:"text-7xl font-bold text-gray-800 tracking-tight leading-none",children:d}),l.jsx("div",{className:"text-lg text-gray-500 font-medium mt-1",children:"pices"})]})]},`soir-${c.produitId}`)})})]}),n?.quantitesBoutique&&n.quantitesBoutique.length>0&&l.jsxs("section",{className:"pt-8 border-t border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:l.jsx(de,{icon:"mdi:storefront",className:"text-xl text-blue-600"})}),l.jsx("h2",{className:"text-2xl font-bold text-blue-700",children:"Production pour Boutique"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 print:grid-cols-3 print:gap-4",children:n.quantitesBoutique.map(c=>{const d=t?.find(f=>f.id===c.produitId),h=c.repartitionCars;return l.jsxs("div",{className:"relative bg-white border-2 border-blue-200 rounded-xl p-6 hover:shadow-lg transition-all print:border-black print:shadow-none print:rounded-none print:p-4 print:break-inside-avoid",children:[l.jsx("div",{className:"absolute top-3 right-4 text-xs font-bold text-blue-500 uppercase tracking-widest",children:"Boutique"}),l.jsxs("div",{className:"flex items-center gap-4 mb-6 pt-2",children:[l.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center shadow-sm flex-shrink-0",children:l.jsx(de,{icon:a(d?.nom||""),className:"text-2xl text-white"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:d?.nom||"Produit"})]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4 text-center",children:[l.jsx("div",{className:"text-sm font-bold text-blue-600 uppercase mb-1",children:"Total Boutique"}),l.jsx("div",{className:"text-4xl font-bold text-blue-800",children:c.quantite}),l.jsx("div",{className:"text-sm text-blue-600",children:"pices"})]}),h&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-3",children:"Rpartition par cars:"}),h.car1_matin>0&&l.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded-lg",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Car 1 Matin"}),l.jsx("span",{className:"font-bold text-gray-800",children:h.car1_matin})]}),h.car2_matin>0&&l.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded-lg",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Car 2 Matin"}),l.jsx("span",{className:"font-bold text-gray-800",children:h.car2_matin})]}),h.car_soir>0&&l.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded-lg",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Car Soir"}),l.jsx("span",{className:"font-bold text-gray-800",children:h.car_soir})]})]})]},`boutique-${c.produitId}`)})})]}),!i.some(c=>c.repartitionCar1Matin+c.repartitionCar2Matin>0)&&!i.some(c=>c.repartitionCarSoir>0)&&(!n?.quantitesBoutique||n.quantitesBoutique.length===0)&&l.jsx("div",{className:"text-center py-12 text-gray-500",children:l.jsx("p",{children:"Aucune quantit  produire trouve dans le programme."})}),l.jsx("div",{className:"hidden print:block print:break-before-page print:mt-8",children:l.jsxs("div",{className:"border-t-2 border-black pt-4",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:" RSUM DE PRODUCTION"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[l.jsxs("div",{className:"border border-black p-3",children:[l.jsx("div",{className:"font-bold mb-2",children:" PRODUCTION CLIENTS"}),l.jsxs("div",{children:["Matin: ",i.reduce((c,d)=>c+(d.repartitionCar1Matin||0)+(d.repartitionCar2Matin||0),0)," pices"]}),l.jsxs("div",{children:["Soir: ",i.reduce((c,d)=>c+(d.repartitionCarSoir||0),0)," pices"]}),l.jsxs("div",{className:"font-bold",children:["Total: ",i.reduce((c,d)=>c+d.totalGlobal,0)," pices"]})]}),l.jsxs("div",{className:"border border-black p-3",children:[l.jsx("div",{className:"font-bold mb-2",children:" PRODUCTION BOUTIQUE"}),l.jsxs("div",{children:["Total: ",i.reduce((c,d)=>c+d.totalBoutique,0)," pices"]}),l.jsxs("div",{children:["Produits: ",i.filter(c=>c.totalBoutique>0).length]})]}),l.jsxs("div",{className:"border border-black p-3",children:[l.jsx("div",{className:"font-bold mb-2",children:" TOTAL GNRAL"}),l.jsxs("div",{className:"text-xl font-bold",children:[i.reduce((c,d)=>c+d.totalGlobal,0)," pices"]})]})]}),l.jsxs("div",{className:"mt-4 text-xs text-center border-t border-gray-300 pt-2",children:["Document gnr automatiquement - Boulangerie App - ",new Date().toLocaleDateString("fr-FR")]})]})})]})})]})},g0=vc((n,e)=>({livreurs:[],livreurEnEdition:null,isLoadingLivreurs:!1,chargerLivreurs:async()=>{n({isLoadingLivreurs:!0});try{const r=(await Cn.getAll("livreurs")).map(i=>({...i,createdAt:i.createdAt instanceof Date?i.createdAt:da(i.createdAt),updatedAt:i.updatedAt instanceof Date?i.updatedAt:da(i.updatedAt)}));n({livreurs:r,isLoadingLivreurs:!1})}catch(t){throw console.error("Erreur lors du chargement des livreurs:",t),n({isLoadingLivreurs:!1}),t}},ajouterLivreur:async t=>{n({isLoadingLivreurs:!0});try{const r=new Date,i={...t,createdAt:r,updatedAt:r},c={id:(await Cn.create("livreurs",i)).id,...i};n(d=>({livreurs:[...d.livreurs,c],isLoadingLivreurs:!1}))}catch(r){throw console.error("Erreur lors de l'ajout du livreur:",r),n({isLoadingLivreurs:!1}),r}},modifierLivreur:async(t,r)=>{n({isLoadingLivreurs:!0});try{const i={...r,updatedAt:new Date};await Cn.update("livreurs",t,i),n(a=>({livreurs:a.livreurs.map(c=>c.id===t?{...c,...i}:c),isLoadingLivreurs:!1,livreurEnEdition:null}))}catch(i){throw console.error("Erreur lors de la modification du livreur:",i),n({isLoadingLivreurs:!1}),i}},supprimerLivreur:async t=>{n({isLoadingLivreurs:!0});try{await Cn.delete("livreurs",t),n(r=>({livreurs:r.livreurs.filter(i=>i.id!==t),isLoadingLivreurs:!1}))}catch(r){throw console.error("Erreur lors de la suppression du livreur:",r),n({isLoadingLivreurs:!1}),r}},setLivreurEnEdition:t=>{n({livreurEnEdition:t})},getLivreurById:t=>{const{livreurs:r}=e();return r.find(i=>i.id===t)},getLivreursActifs:()=>{const{livreurs:t}=e();return t.filter(r=>r.active)}})),oO=()=>{const{commandesClients:n,chargerProgramme:e,supprimerCommandesLivreur:t}=wl(),{livreurs:r,chargerLivreurs:i}=g0(),{clients:a,produits:c,chargerProduits:d,chargerClients:h}=vu(),[f,p]=fe.useState(new Date().toISOString().split("T")[0]),[y,N]=fe.useState("tous");fe.useEffect(()=>{(async()=>{try{await Promise.all([d(),h(),i()]),await e(new Date(f))}catch(H){console.error("Erreur lors de l'initialisation:",H)}})()},[f,e,d,h,i]);const j=(()=>{const z=new Map;return console.log("Debug livraisons:"),console.log("Nombre de commandes clients:",n.length),console.log("Nombre de clients:",a.length),n.forEach(H=>{const he=a.find(D=>D.id===H.clientId);he||console.warn(" Client non trouv pour commande:",{commandeClientId:H.clientId,clientsDisponibles:a.map(D=>({id:D.id,nom:D.nom}))});const re=he?.livreurId||"non-assigne";z.has(re)||z.set(re,{livreur:r.find(D=>D.id===re),commandesParCar:new Map});const V=z.get(re);H.produits.forEach(D=>{D.repartitionCars&&Object.entries(D.repartitionCars).forEach(([k,G])=>{if(G&&G>0){const S=k;V.commandesParCar.has(S)||V.commandesParCar.set(S,[]),V.commandesParCar.get(S).push({commande:H,client:he,produit:c.find(L=>L.id===D.produitId),quantite:G})}})})}),Array.from(z.entries())})(),C=z=>{try{Ig.generateDeliveryReportHTML(z,f),kt.success("Rapport ouvert dans une nouvelle fentre !")}catch(H){console.error("Erreur lors de la gnration du rapport:",H),kt.error("Erreur lors de la gnration du rapport")}},R=()=>{try{Ig.generateGlobalReportHTML(j,f),kt.success("Rapport global ouvert dans une nouvelle fentre !")}catch(z){console.error("Erreur lors de la gnration du rapport:",z),kt.error("Erreur lors de la gnration du rapport")}},I=z=>{const H=z?.toLowerCase()||"";return H.includes("baguette")?"mdi:baguette":H.includes("pain")?"mdi:bread-slice":H.includes("croissant")?"mdi:croissant":H.includes("brioche")?"mdi:muffin":H.includes("tarte")?"mdi:pie":H.includes("gateau")||H.includes("gteau")?"mdi:cake":H.includes("sandwich")?"mdi:food":H.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"},B=()=>({headerBg:"bg-slate-600",bg:"bg-gray-50",summaryBg:"bg-slate-600",border:"border-gray-200",text:"text-gray-700",badgeBg:"bg-gray-100",badgeText:"text-gray-600",accent:"bg-slate-600"});return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Programme de Livraison"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Vue dtaille par livreur et par car de livraison"})]})]}),l.jsx("div",{className:"flex items-center gap-3",children:l.jsxs("button",{onClick:R,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200",disabled:j.length===0,children:[l.jsx(de,{icon:"mdi:printer",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Rapport Global Imprimable"})]})})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:filter",className:"text-lg text-blue-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filtres"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de livraison"}),l.jsx("input",{type:"date",value:f,onChange:z=>p(z.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 font-medium w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Car de livraison"}),l.jsxs("select",{value:y,onChange:z=>N(z.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 font-medium w-full",children:[l.jsx("option",{value:"tous",children:"Tous les cars"}),l.jsx("option",{value:"car1_matin",children:rc.car1_matin}),l.jsx("option",{value:"car2_matin",children:rc.car2_matin}),l.jsx("option",{value:"car_soir",children:rc.car_soir})]})]})]})]}),j.length===0?l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:package-variant-closed",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune livraison prvue"}),l.jsx("p",{className:"text-gray-500",children:"Aucune commande client pour cette date"})]})})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-blue-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:account-group",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:j.length}),l.jsx("div",{className:"text-blue-200 text-xs",children:"livreurs"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Livreurs Actifs"})]}),l.jsxs("div",{className:"bg-green-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.length}),l.jsx("div",{className:"text-green-200 text-xs",children:"commandes"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Commandes"})]}),l.jsxs("div",{className:"bg-orange-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:j.reduce((z,[,H])=>z+H.commandesParCar.size,0)}),l.jsx("div",{className:"text-orange-200 text-xs",children:"tournes"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Tournes Prvues"})]}),l.jsxs("div",{className:"bg-gray-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:map-marker",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:Array.from(new Set(j.flatMap(([,z])=>Array.from(z.commandesParCar.values()).flat().map(H=>H.client?.id)))).length}),l.jsx("div",{className:"text-gray-200 text-xs",children:"adresses"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Points de Livraison"})]})]}),j.map(([z,H])=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:H.livreur?"mdi:truck":"mdi:help-circle",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:H.livreur?`${H.livreur.nom} ${H.livreur.vehicule?`(${H.livreur.vehicule})`:""}`:"Clients non assigns"}),l.jsx("p",{className:"text-sm text-gray-500",children:H.livreur?.telephone?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:phone",className:"text-sm"}),H.livreur.telephone]}):"Clients sans livreur assign"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:()=>C(H),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all duration-200",title:"Gnrer le rapport imprimable pour ce livreur",children:[l.jsx(de,{icon:"mdi:printer",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Imprimer"})]}),H.livreur&&l.jsxs(c1,{onConfirm:()=>{t(z),kt.success(` Toutes les commandes de "${H.livreur?.nom}" ont t supprimes dfinitivement.`)},title:"Supprimer le programme de livraison",message:`Supprimer dfinitivement toutes les commandes de "${H.livreur?.nom}" pour le ${f} ?`,confirmText:"Supprimer dfinitivement",cancelText:"Annuler",type:"danger",className:"inline-flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all duration-200",children:[l.jsx(de,{icon:"mdi:delete-forever",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Supprimer Programme"})]})]})]})}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"space-y-8",children:Array.from(H.commandesParCar.entries()).filter(([he])=>y==="tous"||y===he).map(([he,re])=>{const V=B();return l.jsxs("div",{className:`relative bg-white border ${V.border} rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all duration-200`,children:[l.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${V.accent}`}),l.jsx("div",{className:`${V.headerBg} p-4 mb-4`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-xl text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:rc[he]}),l.jsxs("p",{className:"text-white/70 text-sm",children:[re.length," livraison(s) programme(s)"]})]})]}),l.jsx("div",{className:"bg-white/10 px-3 py-1.5 rounded-md",children:l.jsxs("span",{className:"text-white text-sm font-medium",children:[re.length," stop",re.length>1?"s":""]})})]})}),l.jsxs("div",{className:"px-6 pb-6",children:[l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:(()=>{const D=new Map;return re.forEach(k=>{const G=k.client?.id||"inconnu";D.has(G)||D.set(G,{client:k.client,produits:[]}),D.get(G).produits.push({produit:k.produit,quantite:Number(k.quantite)||0})}),Array.from(D.values()).map((k,G)=>l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 hover:shadow-sm transition-all",children:[l.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[l.jsx("div",{className:`w-10 h-10 ${V.accent} rounded-lg flex items-center justify-center`,children:l.jsx(de,{icon:"mdi:account",className:"text-white text-lg"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:k.client?.nom||"Client inconnu"}),l.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:k.client?.adresse||"Adresse non dfinie"})]})]}),l.jsx("div",{className:"border-t border-gray-100 pt-3 space-y-2",children:k.produits.map((S,L)=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:I(S.produit?.nom||""),className:"text-gray-600 text-sm"})}),l.jsx("div",{className:"flex-1",children:l.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.produit?.nom||"Produit inconnu"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg font-bold text-gray-800",children:S.quantite}),l.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:"pcs"})]})]},L))})]},G))})()}),l.jsxs("div",{className:`mt-4 ${V.summaryBg} border-l-4 ${V.accent} rounded-lg p-4`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(de,{icon:"mdi:chart-box",className:"text-white"}),l.jsxs("h4",{className:"font-medium text-white",children:["Rsum ",rc[he]]})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{const D=re.reduce((k,G)=>{const S=G.produit?.nom||"Inconnu",L=Number(G.quantite)||0;return k[S]=(k[S]||0)+L,k},{});return Object.entries(D).map(([k,G])=>l.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg border border-gray-200 shadow-sm",children:[l.jsx(de,{icon:I(k),className:"text-gray-600 text-sm"}),l.jsx("span",{className:"text-sm font-medium text-gray-900",children:k}),l.jsx("span",{className:"text-sm font-bold text-gray-900 bg-gray-100 px-2 py-1 rounded-full",children:G})]},k))})()})]})]})]},he)})})})]},z))]})]})]})},lO=()=>{const{invendusClients:n,chargerInvendusDuJour:e,marquerAucunRetourClient:t,sauvegarderRetoursClient:r,isLoading:i}=nm(),{commandesClients:a,chargerProgramme:c}=wl(),{clients:d,produits:h,chargerClients:f,chargerProduits:p}=vu(),y=By(),[N,b]=fe.useState(new Date().toISOString().split("T")[0]),[j,C]=fe.useState({});fe.useEffect(()=>{(async()=>{try{await Promise.all([f(),p(),c(new Date(N))]),await e(new Date(N))}catch(V){console.error("Erreur lors de l'initialisation:",V)}})()},[N,f,p,c,e]);const R=a.map(re=>{const V=d.find(k=>k.id===re.clientId);if(!V)return null;const D=re.produits.map(k=>{const G=h.find(me=>me.id===k.produitId),L=Object.values(k.repartitionCars||{}).reduce((me,Se)=>{const qe=typeof Se=="number"?Se:parseInt(String(Se))||0,X=isNaN(qe)?0:Math.min(qe,9999);return me+X},0),ve=n.find(me=>me.clientId===re.clientId)?.produits.find(me=>me.produitId===k.produitId)?.invendus||0,K=j[re.clientId]?.[k.produitId],ce=K!==void 0?K:ve;return{produitId:k.produitId,produit:G,quantiteLivree:L,invendus:ce,vendu:L-ce}}).filter(k=>k.quantiteLivree>0);return{...V,commande:re,produits:D}}).filter(re=>re!==null),I=(re,V,D)=>{const k=parseInt(D)||0;C(G=>({...G,[re]:{...G[re],[V]:k}}))},B=async re=>{const V=d.find(D=>D.id===re);try{await y.confirm({title:"Confirmer aucun retour",message:`Confirmer qu'il n'y a aucun retour pour le client "${V?.nom||"Inconnu"}" ?

Cela finalisera les retours pour la facturation.`,confirmText:"Confirmer",cancelText:"Annuler",type:"info"})&&(await t(re,new Date(N)),await e(new Date(N)),kt.success(` Aucun retour confirm pour ${V?.nom||"le client"}`))}catch(D){console.error('Erreur lors du marquage "aucun retour":',D),kt.error(' Erreur lors du marquage "aucun retour"')}},z=re=>n.some(V=>V.clientId===re&&V.dateLivraison.toDateString()===new Date(N).toDateString()&&V.retoursCompletes),H=async re=>{const V=d.find(k=>k.id===re),D=R.find(k=>k.id===re);if(!D){kt.error("Client non trouv");return}try{if(await y.confirm({title:"Enregistrer les retours",message:`Confirmer l'enregistrement des retours pour le client "${V?.nom||"Inconnu"}" ?

Cela finalisera les retours pour la facturation.`,confirmText:"Enregistrer",cancelText:"Annuler",type:"info"})){const G=D.produits.map(S=>({produitId:S.produitId,produit:S.produit,quantiteLivree:S.quantiteLivree,invendus:S.invendus,vendu:S.vendu}));await r(re,new Date(N),G),await e(new Date(N)),C(S=>{const L={...S};return delete L[re],L}),kt.success(` Retours enregistrs pour ${V?.nom||"le client"}`)}}catch(k){console.error("Erreur lors de l'enregistrement des retours:",k),kt.error(" Erreur lors de l'enregistrement des retours")}},he=re=>{const V=re?.toLowerCase()||"";return V.includes("baguette")?"mdi:baguette":V.includes("pain")?"mdi:bread-slice":V.includes("croissant")?"mdi:croissant":V.includes("brioche")?"mdi:muffin":V.includes("tarte")?"mdi:pie":V.includes("gateau")||V.includes("gteau")?"mdi:cake":V.includes("sandwich")?"mdi:food":V.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-linear-to-r from-red-600 to-rose-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:keyboard-return",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Saisie des Retours Clients"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Enregistrez les invendus de chaque client pour la facturation"})]})]}),l.jsx("div",{className:"flex gap-3",children:l.jsxs("button",{onClick:async()=>{await Promise.all([f(),p(),c(new Date(N))]),await e(new Date(N)),kt.success("Donnes recharges depuis la base !")},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all shadow-md",disabled:i,children:[l.jsx(de,{icon:"mdi:refresh",className:"text-lg"}),l.jsx("span",{children:"Recharger"})]})})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:calendar",className:"text-lg text-red-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Date de livraison"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("input",{type:"date",value:N,onChange:re=>b(re.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900 font-medium"}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Retours pour ",new Date(N).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),R.length===0?l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:package-variant-closed",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune livraison prvue"}),l.jsx("p",{className:"text-gray-500 mb-6",children:"Aucune commande client pour cette date"}),l.jsxs("button",{className:"inline-flex items-center gap-2 px-6 py-3 bg-linear-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Crer une commande"})]})]})})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:account-group",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:R.length}),l.jsx("div",{className:"text-gray-300 text-xs",children:"clients"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Clients Livrs"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:R.reduce((re,V)=>re+V.produits.reduce((D,k)=>D+k.quantiteLivree,0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Livr"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-down",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:R.reduce((re,V)=>re+V.produits.reduce((D,k)=>D+k.invendus,0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Invendus"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:chart-line",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:R.reduce((re,V)=>re+V.produits.reduce((D,k)=>D+k.vendu,0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Vendu"})]})]}),R.map(re=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 ${z(re.id)?"bg-green-100":"bg-orange-100"} rounded-lg flex items-center justify-center`,children:l.jsx(de,{icon:z(re.id)?"mdi:check":"mdi:account",className:`text-lg ${z(re.id)?"text-green-600":"text-orange-600"}`})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:re.nom}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:map-marker",className:"text-sm"}),re.adresse]}),re.telephone&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:phone",className:"text-sm"}),re.telephone]})]})]})]}),z(re.id)?l.jsxs("div",{className:"flex items-center gap-2 bg-green-100 text-green-700 px-3 py-1 rounded-full",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-sm"}),l.jsx("span",{className:"text-sm font-medium",children:"Retours finaliss"})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>H(re.id),disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-linear-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 shadow-md",children:[l.jsx(de,{icon:"mdi:content-save-check",className:"text-sm"}),l.jsx("span",{className:"text-sm font-medium",children:"Enregistrer les retours"})]}),l.jsxs("button",{onClick:()=>B(re.id),disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-linear-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all disabled:opacity-50 shadow-md",children:[l.jsx(de,{icon:"mdi:check-bold",className:"text-sm"}),l.jsx("span",{className:"text-sm font-medium",children:"Aucun retour"})]})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Produits livrs"}),l.jsxs("span",{className:"ml-auto text-sm font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:[re.produits.length," produit",re.produits.length>1?"s":""]})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:re.produits.map(V=>l.jsxs("div",{className:`bg-linear-to-br ${V.invendus>0?"from-red-50 to-rose-50 border-red-200":"from-green-50 to-emerald-50 border-green-200"} border rounded-xl p-4 hover:shadow-md transition-all`,children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:`w-12 h-12 bg-linear-to-br ${V.invendus>0?"from-red-500 to-rose-500":"from-green-500 to-emerald-500"} rounded-xl flex items-center justify-center shadow-md`,children:l.jsx(de,{icon:he(V.produit?.nom||""),className:"text-xl text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:V.produit?.nom||"Produit inconnu"}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Livr: ",l.jsxs("span",{className:"font-bold",children:[V.quantiteLivree," pices"]})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invendus retour:"}),l.jsx("input",{type:"number",min:"0",max:V.quantiteLivree,value:(()=>{const D=j[re.id]?.[V.produitId]??V.invendus;return D===0?"":D})(),onChange:D=>I(re.id,V.produitId,D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"0"})]}),l.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Vendu final:"}),l.jsxs("span",{className:`text-lg font-bold ${V.vendu>0?"text-green-600":"text-gray-600"}`,children:[V.vendu," pices"]})]}),V.invendus>0&&l.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:package-variant-closed",className:"text-red-500 text-sm"}),l.jsxs("span",{className:"text-xs text-red-600 font-medium",children:[V.invendus," invendu",V.invendus>1?"s":""]})]})]})]})]},V.produitId))}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mt-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(de,{icon:"mdi:chart-box",className:"text-gray-600"}),l.jsx("h4",{className:"font-semibold text-gray-800",children:"Rsum client"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:re.produits.reduce((V,D)=>V+D.quantiteLivree,0)}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total livr"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:re.produits.reduce((V,D)=>V+D.invendus,0)}),l.jsx("div",{className:"text-sm text-gray-600",children:"Invendus"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:re.produits.reduce((V,D)=>V+D.vendu,0)}),l.jsx("div",{className:"text-sm text-gray-600",children:"Vendu"})]})]})]})]})})]},re.id))]})]}),l.jsx(p0,{isOpen:y.isOpen,onClose:y.handleCancel,onConfirm:y.handleConfirm,title:y.title,message:y.message,confirmText:y.confirmText,cancelText:y.cancelText,type:y.type})]})},cO=()=>{const{stockJour:n,equipeMatin:e,equipeSoir:t,ventesJour:r,isLoading:i,chargerStockJour:a,creerStockDepuisProduction:c,mettreAJourStockBoutique:d,commencerEquipeMatin:h,commencerEquipeSoir:f,saisirVenteMatin:p,saisirVenteSoir:y,terminerEquipeMatin:N,terminerEquipeSoir:b,sauvegarderEquipe:j,calculerVentesBoutique:C,sauvegarderVentes:R,chargerEquipe:I,chargerVentes:B}=Tg(),[z,H]=fe.useState(""),[he,re]=fe.useState(""),[V,D]=fe.useState(new Date().toISOString().split("T")[0]),k=new Date(V);ru.useEffect(()=>{(async()=>{try{console.log(" Chargement des donnes pour",k.toISOString().split("T")[0]),await a(k),await new Promise(F=>setTimeout(F,100));const L=Tg.getState();!L.stockJour&&!L.isLoading&&await c(k),await I(k,"matin"),await I(k,"soir"),await B(k),console.log(" Toutes les donnes charges")}catch(L){console.error(" Erreur lors du chargement automatique:",L)}})()},[V]);const G=S=>{const L=S?.toLowerCase()||"";return L.includes("baguette")?"mdi:baguette":L.includes("pain")?"mdi:bread-slice":L.includes("croissant")?"mdi:croissant":L.includes("brioche")?"mdi:muffin":L.includes("tarte")?"mdi:pie":L.includes("gateau")||L.includes("gteau")?"mdi:cake":L.includes("sandwich")?"mdi:food":L.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-amber-600 to-orange-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:store",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion Boutique"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Suivi des ventes matin et soir"})]})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:calendar",className:"text-lg text-amber-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Date de service"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("input",{type:"date",value:V,onChange:S=>D(S.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent text-gray-900 font-medium"}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Service boutique pour ",new Date(V).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),!n&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Stock de dpart"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Chargement automatique des produits destins  la boutique"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"text-center py-12",children:i?l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),l.jsx("p",{className:"text-gray-600 font-medium",children:"Chargement du stock de production..."})]}):l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:calendar-clock",className:"text-4xl text-gray-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Stock non disponible"}),l.jsxs("p",{className:"text-gray-500 mb-6",children:["Aucune quantit boutique dfinie pour le ",new Date(V).toLocaleDateString("fr-FR")]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-sm text-gray-700 space-y-1",children:[l.jsx("p",{className:"font-semibold text-blue-800 mb-2",children:"Pour activer la boutique :"}),l.jsx("p",{children:"1. Crez un programme de production"}),l.jsx("p",{children:"2. Ajoutez des quantits  envoyer en boutique"}),l.jsx("p",{children:"3. Le stock apparatra automatiquement ici"})]})]})]})})})]}),n&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:package-check",className:"text-lg text-green-600"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Stock de dpart - ",new Date(n.date).toLocaleDateString("fr-FR")]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[n.produits.length," produit(s) reu(s) de la production"]})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"text-sm text-gray-600",children:["Stock cr le ",n.createdAt.toLocaleString("fr-FR"),n.updatedAt.getTime()!==n.createdAt.getTime()&&l.jsxs("span",{className:"text-blue-600",children:["  Mis  jour le "," ",n.updatedAt.toLocaleString("fr-FR")]})]}),l.jsxs("button",{onClick:()=>d(k),disabled:i,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:[!i&&l.jsx(de,{icon:"mdi:refresh",className:"text-sm"}),i?"Mise  jour...":"Actualiser stock"]})]}),l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0",children:l.jsx(de,{icon:"mdi:information",className:"text-white"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-blue-800 font-semibold mb-1",children:"Actualisation du stock :"}),l.jsx("p",{className:"text-blue-700 text-sm",children:'Si vous avez ajout de nouveaux produits dans le programme de production aprs avoir cr ce stock, cliquez sur "Actualiser stock" pour rcuprer les nouveaux produits.'})]})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200",children:[l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Produit"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Quantit"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Car 1M"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Car 2M"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Car S"})]})}),l.jsx("tbody",{children:n.produits.map(S=>l.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(de,{icon:G(S.produit?.nom||""),className:"text-gray-600"}),l.jsx("span",{className:"font-medium text-gray-900",children:S.produit?.nom||S.produitId})]})}),l.jsx("td",{className:"text-center py-3 px-4",children:l.jsx("span",{className:"font-bold text-gray-900",children:S.stockDebut})}),l.jsx("td",{className:"text-center py-3 px-4 text-gray-600",children:S.repartitionCars?.car1_matin||""}),l.jsx("td",{className:"text-center py-3 px-4 text-gray-600",children:S.repartitionCars?.car2_matin||""}),l.jsx("td",{className:"text-center py-3 px-4 text-gray-600",children:S.repartitionCars?.car_soir||""})]},S.produitId))})]})})]})})]}),n&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:timeline",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Flux Journalier Boutique"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Suivi des quipes matin et soir avec passage de relais"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(de,{icon:"wi:sunrise",className:"text-gray-600"}),l.jsx("span",{children:"quipe Matin:"}),l.jsx("span",{className:e?e.statut==="en_cours"?"text-blue-600":"text-green-600":"text-gray-500",children:e?e.statut==="en_cours"?"En cours":"Termine":"Non commence"})]}),l.jsx("div",{className:"w-px h-6 bg-gray-300"}),l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(de,{icon:"wi:sunset",className:"text-gray-600"}),l.jsx("span",{children:"quipe Soir:"}),l.jsx("span",{className:t?t.statut==="en_cours"?"text-blue-600":"text-green-600":"text-gray-500",children:t?t.statut==="en_cours"?"En cours":"Termine":"Non commence"})]})]}),r&&l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Total vendu"}),l.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[r.produits.reduce((S,L)=>S+L.venduTotal,0)," pices"]})]})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunrise",className:"text-lg text-orange-600"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["quipe Matin - Vendeuse #",e?e.vendeuse:" dfinir"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Service du matin (jusqu' 14h) - Stock initial de la production"})]})]})}),l.jsx("div",{className:"p-6",children:e?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-medium",children:["Vendeuse: ",e.vendeuse]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Statut: ",e.statut==="termine"?l.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-sm"}),"Termin"]}):l.jsxs("span",{className:"flex items-center gap-1 text-orange-600",children:[l.jsx(de,{icon:"mdi:clock-outline",className:"text-sm"}),"En cours"]})]})]}),e.statut==="en_cours"&&l.jsxs("button",{onClick:async()=>{try{N(),await j("matin")}catch(S){console.error("Erreur lors de la sauvegarde matin:",S)}},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Terminer l'quipe matin"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Saisie des ventes matinales"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.produits.map(S=>l.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border border-orange-200 rounded-xl p-4 hover:border-orange-300 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-center shadow-md",children:l.jsx(de,{icon:G(S.produit?.nom||""),className:"text-xl text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:S.produit?.nom||S.produitId}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Stock: ",S.stockDebut," pices"]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Vendu matin:"}),l.jsx("input",{type:"number",min:"0",max:S.stockDebut,value:S.vendu,onChange:L=>p(S.produitId,parseInt(L.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:e.statut==="termine"})]}),l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Reste midi: "}),l.jsxs("span",{className:"font-bold text-blue-600",children:[S.reste," pices"]})]})]})]},S.produitId))})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"text",placeholder:"Entrez le nom de la vendeuse du matin",value:z,onChange:S=>H(S.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),l.jsxs("button",{onClick:()=>{z.trim()&&h(z,k)},disabled:!z.trim(),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx(de,{icon:"mdi:play-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Commencer l'quipe matin"})]})]})})]}),e?.statut==="termine"&&!t&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:handshake",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Passage de Relais Matin  Soir"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Transmission du stock restant du matin  l'quipe soir"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-switch",className:"text-white"})}),l.jsxs("h3",{className:"font-semibold text-blue-800 text-lg",children:["Stock transmis par ",e.vendeuse]})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e.produits.map(S=>l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-blue-200 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:G(S.produit?.nom||""),className:"text-white text-sm"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium text-sm text-gray-900",children:S.produit?.nom||S.produitId}),l.jsx("p",{className:"text-xs text-gray-500",children:"Stock pour le soir"})]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-lg font-bold text-blue-600",children:S.reste}),l.jsx("p",{className:"text-xs text-gray-500",children:"pices"})]})]},S.produitId))})]})})]}),e?.statut==="termine"&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunset",className:"text-lg text-indigo-600"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["quipe Soir - Vendeuse #",t?t.vendeuse:" dfinir"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Service du soir (aprs 14h) - Stock = Reste du matin"})]})]})}),l.jsx("div",{className:"p-6",children:t?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-medium",children:["Vendeuse: ",t.vendeuse]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Statut: ",t.statut==="termine"?l.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-sm"}),"Termin"]}):l.jsxs("span",{className:"flex items-center gap-1 text-orange-600",children:[l.jsx(de,{icon:"mdi:clock-outline",className:"text-sm"}),"En cours"]})]})]}),t.statut==="en_cours"&&l.jsxs("button",{onClick:async()=>{try{b(),C(),await j("soir"),await new Promise(S=>setTimeout(S,100)),await R()}catch(S){console.error("Erreur lors de la finalisation:",S)}},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Terminer l'quipe soir"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Saisie des ventes du soir"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.produits.map(S=>l.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-4 hover:border-indigo-300 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-xl flex items-center justify-center shadow-md",children:l.jsx(de,{icon:G(S.produit?.nom||""),className:"text-xl text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:S.produit?.nom||S.produitId}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Stock dbut: ",S.stockDebut," pices"]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Vendu soir:"}),l.jsx("input",{type:"number",min:"0",max:S.stockDebut,value:S.vendu,onChange:L=>y(S.produitId,parseInt(L.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",disabled:t.statut==="termine"})]}),l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Invendu: "}),l.jsxs("span",{className:"font-bold text-red-600",children:[S.reste," pices"]})]})]})]},S.produitId))})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"text",placeholder:"Entrez le nom de la vendeuse du soir",value:he,onChange:S=>re(S.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),l.jsxs("button",{onClick:()=>{he.trim()&&f(he,k)},disabled:!he.trim(),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx(de,{icon:"mdi:play-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Commencer l'quipe soir"})]})]})})]}),r&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:chart-timeline",className:"text-lg text-green-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Bilan Journalier - Performance des 2 Vendeuses"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Rcapitulatif complet des ventes matin et soir"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:r.produits.reduce((S,L)=>S+L.stockDebut,0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Stock Initial"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:chart-line",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:r.produits.reduce((S,L)=>S+L.venduTotal,0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Vendu"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-down",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:r.produits.reduce((S,L)=>S+L.invenduBoutique,0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Invendus"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:percent",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-3xl font-bold",children:[Math.round(r.produits.reduce((S,L)=>S+L.venduTotal,0)/r.produits.reduce((S,L)=>S+L.stockDebut,0)*100),"%"]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"taux"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Taux de Vente"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6",children:[l.jsxs("h4",{className:"flex items-center gap-3 font-semibold text-orange-800 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunrise",className:"text-white"})}),e?.vendeuse," - quipe Matin"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Ventes totales :"}),l.jsxs("span",{className:"font-bold text-orange-700",children:[r.produits.reduce((S,L)=>S+L.venduMatin,0)," pcs"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Transmis au soir :"}),l.jsxs("span",{className:"font-medium text-blue-600",children:[r.produits.reduce((S,L)=>S+L.resteMidi,0)," pcs"]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6",children:[l.jsxs("h4",{className:"flex items-center gap-3 font-semibold text-indigo-800 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunset",className:"text-white"})}),t?.vendeuse," - quipe Soir"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Ventes totales :"}),l.jsxs("span",{className:"font-bold text-indigo-700",children:[r.produits.reduce((S,L)=>S+L.venduSoir,0)," pcs"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Invendus finaux :"}),l.jsxs("span",{className:"font-medium text-red-600",children:[r.produits.reduce((S,L)=>S+L.invenduBoutique,0)," pcs"]})]})]})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-4 border-b border-gray-200 mb-6",children:[l.jsx(de,{icon:"mdi:table-large",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dtail par produit"})]}),l.jsx("div",{className:"grid gap-4",children:r.produits.map(S=>l.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200 hover:shadow-md transition-all",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-7 gap-4 items-center",children:[l.jsx("div",{className:"md:col-span-1",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-gray-500 to-gray-700 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:G(S.produit?.nom||""),className:"text-white text-sm"})}),l.jsx("span",{className:"font-medium text-gray-900 text-sm",children:S.produit?.nom||S.produitId})]})}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-gray-800",children:S.stockDebut}),l.jsx("div",{className:"text-xs text-gray-500",children:"Stock initial"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-orange-600",children:S.venduMatin}),l.jsx("div",{className:"text-xs text-gray-500",children:"Vendu matin"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-blue-600",children:S.resteMidi}),l.jsx("div",{className:"text-xs text-gray-500",children:"Transmis soir"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-indigo-600",children:S.venduSoir}),l.jsx("div",{className:"text-xs text-gray-500",children:"Vendu soir"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-red-600",children:S.invenduBoutique}),l.jsx("div",{className:"text-xs text-gray-500",children:"Invendu final"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-bold text-green-600",children:S.venduTotal}),l.jsx("div",{className:"text-xs text-gray-500",children:"Total vendu"})]})]})},S.produitId))})]})]})})]})]})]})]})},uO=()=>{const{rapportJour:n,indicateurs:e,historiqueRapports:t,genererRapportJour:r,validerRapport:i,chargerRapport:a,chargerHistorique:c,isLoading:d}=rM(),[h,f]=fe.useState(new Date().toISOString().split("T")[0]),[p,y]=fe.useState("jour"),N=async()=>{try{console.log(" Dbut gnration rapport pour:",h),await r(new Date(h)),console.log(" Rapport gnr avec succs")}catch(C){console.error(" Erreur lors de la gnration du rapport:",C),alert("Erreur lors de la gnration du rapport: "+C)}},b=()=>{const C=new Date,R=new Date;R.setDate(C.getDate()-7),c(R,C)};fe.useEffect(()=>{a(new Date(h))},[h,a]);const j=C=>C>=90?"bg-green-100 text-green-800":C>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:chart-bar",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Rapport Journalier"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Bilan complet des activits de la journe"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:()=>y(p==="jour"?"historique":"jour"),className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx(de,{icon:p==="jour"?"mdi:history":"mdi:calendar-today",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:p==="jour"?"Historique":"Rapport du jour"})]}),p==="jour"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:N,disabled:d,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:cogs",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Gnrer le rapport"})]}),n&&n.statut==="genere"&&l.jsxs("button",{onClick:()=>i(),className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Valider le rapport"})]})]}),p==="historique"&&l.jsxs("button",{onClick:b,disabled:d,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:download",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Charger les 7 derniers jours"})]})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[p==="jour"&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:calendar",className:"text-lg text-purple-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Date du rapport"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("input",{type:"date",value:h,onChange:C=>f(C.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 font-medium"}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Rapport pour ",new Date(h).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),p==="jour"&&e&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:chart-line",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-3xl font-bold",children:[e.tauxVenteGlobal.toFixed(1),"%"]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"global"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Taux de Vente Global"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:account-group",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-3xl font-bold",children:[e.tauxVenteClients.toFixed(1),"%"]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"clients"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Taux Vente Clients"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:storefront",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-3xl font-bold",children:[e.tauxVenteBoutique.toFixed(1),"%"]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"boutique"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Taux Vente Boutique"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-down",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:e.pertesTotales}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Pertes Totales"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:account-cancel",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:e.pertesClients}),l.jsx("div",{className:"text-gray-300 text-xs",children:"clients"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Invendus Clients"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:storefront-outline",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:e.pertesBoutique}),l.jsx("div",{className:"text-gray-300 text-xs",children:"boutique"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Invendus Boutique"})]})]})]}),p==="historique"&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:history",className:"text-lg text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Historique des Rapports"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Rapports des derniers jours"})]})]})}),l.jsx("div",{className:"p-6",children:t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:file-document-outline",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun rapport trouv"}),l.jsx("p",{className:"text-gray-500 mb-6",children:`Cliquez sur "Charger les 7 derniers jours" pour voir l'historique`})]}):l.jsx("div",{className:"grid gap-4",children:t.map(C=>l.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-xl p-6 hover:border-purple-300 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:file-document",className:"text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:new Date(C.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.statut==="valide"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:C.statut})})]})]}),l.jsx("div",{className:"text-right",children:l.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${j(C.totaux.tauxVenteGlobal)}`,children:[C.totaux.tauxVenteGlobal.toFixed(1),"%"]})})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-gray-800",children:C.totaux.quantiteProduite}),l.jsx("div",{className:"text-xs text-gray-600",children:"Produite"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-green-600",children:C.totaux.quantiteVendueTotal}),l.jsx("div",{className:"text-xs text-gray-600",children:"Vendue"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-red-600",children:C.totaux.pertesTotales}),l.jsx("div",{className:"text-xs text-gray-600",children:"Pertes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[C.totaux.tauxVenteGlobal.toFixed(1),"%"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Taux vente"})]})]})]},C.id))})})]}),p==="jour"&&n?l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:clipboard-list",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Rapport Dtaill par Produit"}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Rapport du ",new Date(n.date).toLocaleDateString("fr-FR")," - Statut: ",n.statut]})]})]})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(de,{icon:"mdi:chart-box",className:"text-gray-600"}),l.jsx("h3",{className:"font-semibold text-gray-800",children:"Totaux de la journe"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:n.totaux.quantitePrevue}),l.jsx("div",{className:"text-sm text-gray-600",children:"Prvu"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.totaux.quantiteProduite}),l.jsx("div",{className:"text-sm text-gray-600",children:"Produite"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.totaux.quantiteVendueTotal}),l.jsx("div",{className:"text-sm text-gray-600",children:"Vendue"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.totaux.invendusTotal}),l.jsx("div",{className:"text-sm text-gray-600",children:"Invendus"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Dtail par produit"}),l.jsxs("span",{className:"ml-auto text-sm font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:[n.produits.length," produit",n.produits.length>1?"s":""]})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.produits.map(C=>l.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:food-variant",className:"text-white"})}),l.jsx("div",{children:l.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:C.produit?.nom||C.produitId})})]}),l.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j(C.tauxVenteGlobal)}`,children:[C.tauxVenteGlobal.toFixed(1),"%"]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-gray-800",children:C.quantitePrevue}),l.jsx("div",{className:"text-xs text-gray-600",children:"Prvu"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-blue-600",children:C.quantiteProduite}),l.jsx("div",{className:"text-xs text-gray-600",children:"Produite"})]})]}),l.jsx("div",{className:"border-t border-gray-200 pt-3",children:l.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-bold text-green-600",children:C.quantiteVendueTotal}),l.jsx("div",{className:"text-xs text-gray-600",children:"Total vendu"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-bold text-green-500",children:C.quantiteVendueClients}),l.jsx("div",{className:"text-xs text-gray-600",children:"Clients"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-bold text-green-400",children:C.quantiteVendueBoutique}),l.jsx("div",{className:"text-xs text-gray-600",children:"Boutique"})]})]})}),l.jsxs("div",{className:"bg-red-50 rounded-lg p-3 text-center",children:[l.jsx("div",{className:"text-lg font-bold text-red-600",children:C.invendusTotal}),l.jsx("div",{className:"text-xs text-gray-600",children:"Invendus total"})]})]})]},C.produitId))})]})]})]}):p==="jour"&&l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:chart-bar",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun rapport gnr"}),l.jsx("p",{className:"text-gray-500 mb-6",children:'Cliquez sur "Gnrer le rapport" pour crer le rapport de la journe'}),l.jsxs("button",{onClick:N,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:cogs",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Gnrer le rapport"})]})]})})})]})]})},dO=({produit:n,onSave:e,onCancel:t,isLoading:r=!1})=>{const{matieres:i,chargerDonnees:a}=Al(),[c,d]=fe.useState({nom:"",prixClient:0,prixBoutique:0,active:!0,recette:[]});fe.useEffect(()=>{a()},[]);const[h,f]=fe.useState({matiereId:"",quantite:""});fe.useEffect(()=>{n&&d({nom:n.nom,prixClient:n.prixClient||0,prixBoutique:n.prixBoutique||0,active:n.active,recette:n.recette||[]})},[n]);const p=()=>{if(h.matiereId&&h.quantite){const b=c.recette.findIndex(C=>C.matiereId===h.matiereId);let j=[...c.recette];b>=0?j[b].quantite=Number(h.quantite):j.push({matiereId:h.matiereId,quantite:Number(h.quantite)}),d({...c,recette:j}),f({matiereId:"",quantite:""})}},y=b=>{const j=[...c.recette];j.splice(b,1),d({...c,recette:j})},N=async b=>{b.preventDefault();try{const j={nom:c.nom,prixClient:c.prixClient,prixBoutique:c.prixBoutique,active:c.active,recette:c.recette,description:"",unite:"piece",prixUnitaire:c.prixBoutique};await e(j),n||d({nom:"",prixClient:0,prixBoutique:0,active:!0,recette:[]})}catch(j){console.error("Erreur lors de la sauvegarde:",j)}};return l.jsx(nd,{title:n?"Modifier le produit":"Ajouter un produit",subtitle:"Remplissez les informations du produit",children:l.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-medium text-gray-900 border-b pb-2",children:"Informations Gnrales"}),l.jsx(fr,{label:"Nom du produit *",value:c.nom,onChange:b=>d({...c,nom:b.target.value}),placeholder:"ex: Pain de campagne",required:!0}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(fr,{label:"Prix client (FCFA) *",type:"number",step:"1",min:"0",value:c.prixClient,onChange:b=>d({...c,prixClient:parseFloat(b.target.value)||0}),placeholder:"0",required:!0}),l.jsx(fr,{label:"Prix boutique (FCFA) *",type:"number",step:"1",min:"0",value:c.prixBoutique,onChange:b=>d({...c,prixBoutique:parseFloat(b.target.value)||0}),placeholder:"0",required:!0})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"active",type:"checkbox",checked:c.active,onChange:b=>d({...c,active:b.target.checked}),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Produit actif (visible pour la production)"})]})]}),l.jsxs("div",{className:"space-y-4 pt-2",children:[l.jsxs("h4",{className:"font-medium text-gray-900 border-b pb-2 flex items-center justify-between",children:[l.jsx("span",{children:"Recette Technique (Ingrdients)"}),l.jsx("span",{className:"text-xs text-gray-500 font-normal",children:"Optionnel"})]}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3 items-end",children:[l.jsxs("div",{className:"md:col-span-1",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Matire Premire"}),l.jsxs("select",{value:h.matiereId,onChange:b=>f({...h,matiereId:b.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-orange-500 outline-none",children:[l.jsx("option",{value:"",children:"Choisir un ingrdient..."}),i.map(b=>l.jsxs("option",{value:b.id,children:[b.nom," (",b.unite,")"]},b.id))]})]}),l.jsxs("div",{className:"md:col-span-1",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantit par unit"}),l.jsx("input",{type:"number",step:"0.001",min:"0",placeholder:"Ex: 0.250",value:h.quantite,onChange:b=>f({...h,quantite:parseFloat(b.target.value)||""}),className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-orange-500 outline-none"})]}),l.jsx("div",{className:"md:col-span-1",children:l.jsxs("button",{type:"button",onClick:p,disabled:!h.matiereId||!h.quantite,className:"w-full py-2 px-3 bg-gray-800 text-white text-sm rounded-md hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[l.jsx(de,{icon:"mdi:plus-circle"}),"Ajouter"]})})]}),c.recette.length>0?l.jsx("div",{className:"space-y-2 mt-4 max-h-40 overflow-y-auto",children:c.recette.map((b,j)=>{const C=i.find(R=>R.id===b.matiereId);return l.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border border-gray-200 shadow-sm",children:[l.jsx("span",{className:"text-sm font-medium text-gray-800",children:C?C.nom:"Matire inconnue"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-sm text-gray-600 font-mono bg-gray-100 px-2 py-0.5 rounded",children:[b.quantite," ",C?.unite]}),l.jsx("button",{type:"button",onClick:()=>y(j),className:"text-red-500 hover:text-red-700 p-1",children:l.jsx(de,{icon:"mdi:close",className:"text-lg"})})]})]},j)})}):l.jsx("div",{className:"text-center py-4 text-gray-400 text-sm italic",children:"Aucun ingrdient dfini pour cette recette."})]}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Dfinissez la quantit ncessaire pour fabriquer ",l.jsx("b",{children:"1 seule pice"})," de ce produit."]})]}),c.recette.length>0&&l.jsxs("div",{className:"space-y-4 pt-2 border-t border-gray-100",children:[l.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:finance",className:"text-orange-600"}),"Analyse de Rentabilit (Estime)"]}),l.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-xs space-y-4",children:(()=>{const b=c.recette.reduce((B,z)=>{const H=i.find(he=>he.id===z.matiereId);return B+z.quantite*(H?.prixMoyenPondere||0)},0),j=c.prixBoutique-b,C=c.prixBoutique>0?j/c.prixBoutique*100:0,R=c.prixClient-b,I=c.prixClient>0?R/c.prixClient*100:0;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[l.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Cot de Revient Matires"}),l.jsxs("span",{className:"font-bold text-gray-900",children:[Math.round(b).toLocaleString()," FCFA"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-3 border rounded-md border-gray-100",children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Marge Boutique"}),l.jsxs("div",{className:"flex items-end justify-between",children:[l.jsxs("span",{className:`text-xl font-bold ${j>=0?"text-green-600":"text-red-600"}`,children:[Math.round(j).toLocaleString()," FCFA"]}),l.jsxs("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${C>=50?"bg-green-100 text-green-700":C>=30?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:[C.toFixed(1),"%"]})]})]}),l.jsxs("div",{className:"p-3 border rounded-md border-gray-100",children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Marge Client"}),l.jsxs("div",{className:"flex items-end justify-between",children:[l.jsxs("span",{className:`text-xl font-bold ${R>=0?"text-blue-600":"text-red-600"}`,children:[Math.round(R).toLocaleString()," FCFA"]}),l.jsxs("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${I>=50?"bg-blue-100 text-blue-700":I>=30?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:[I.toFixed(1),"%"]})]})]})]})]})})()})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-100",children:[l.jsx(Br,{type:"button",variant:"outline",onClick:t,children:"Annuler"}),l.jsx(Br,{type:"submit",isLoading:r,disabled:!c.nom.trim()||c.prixClient<=0||c.prixBoutique<=0,children:n?"Enregistrer les modifications":"Crer le produit"})]})]})})},hO=()=>{const{produits:n,produitEnEdition:e,isLoadingProduits:t,chargerProduits:r,ajouterProduit:i,modifierProduit:a,supprimerProduit:c,setProduitEnEdition:d}=vu(),[h,f]=fe.useState(!1),{chargerDonnees:p}=Al();fe.useEffect(()=>{r(),p()},[r,p]);const y=async I=>{await i(I),f(!1)},N=async I=>{e&&(await a(e.id,I),d(null),f(!1))},b=async I=>{window.confirm(`tes-vous sr de vouloir supprimer "${I.nom}" ?`)&&await c(I.id)},j=()=>{d(null),f(!1)},C=I=>{d(I),f(!0)},R=I=>{const B=I?.toLowerCase()||"";return B.includes("baguette")?"mdi:baguette":B.includes("pain")?"mdi:bread-slice":B.includes("croissant")?"mdi:croissant":B.includes("brioche")?"mdi:muffin":B.includes("tarte")?"mdi:pie":B.includes("gateau")||B.includes("gteau")?"mdi:cake":B.includes("sandwich")?"mdi:food":B.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-600 to-red-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:bread-slice",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Produits"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grez votre catalogue de produits de boulangerie"})]})]}),l.jsxs("button",{onClick:()=>f(!0),disabled:h,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouveau produit"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[h&&l.jsx(dO,{produit:e,onSave:e?N:y,onCancel:j,isLoading:t}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:format-list-bulleted",className:"text-lg text-orange-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Catalogue produits"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," produit(s) enregistr(s)"]})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium",children:n.filter(I=>I.active).length})," actifs",l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium",children:n.filter(I=>!I.active).length})," inactifs"]})})]})}),l.jsx("div",{className:"p-6",children:t?l.jsx(Vy,{message:"Chargement des produits..."}):n.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(de,{icon:"mdi:bread-slice-outline",className:"text-4xl text-orange-500"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Aucun produit enregistr"}),l.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Commencez par ajouter vos premiers produits de boulangerie pour constituer votre catalogue"}),l.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter le premier produit"})]})]}):l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:n.map(I=>l.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-2xl p-6 hover:border-orange-300 hover:shadow-2xl transition-all duration-300 group",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx(de,{icon:R(I.nom),className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-1",children:I.nom}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full ${I.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.jsx(de,{icon:I.active?"mdi:check-circle":"mdi:pause-circle",className:"text-xs"}),I.active?"Actif":"Inactif"]})})]})]})}),l.jsx("div",{className:"space-y-3 mb-6",children:l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(de,{icon:"mdi:account-group",className:"text-blue-500 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Prix Client"})]}),l.jsx("div",{className:"text-xl font-bold text-blue-800",children:I.prixClient?`${I.prixClient.toLocaleString("fr-FR")} F`:"Non dfini"})]}),l.jsxs("div",{className:"bg-purple-50 rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(de,{icon:"mdi:storefront",className:"text-purple-500 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-purple-700",children:"Prix Boutique"})]}),l.jsx("div",{className:"text-xl font-bold text-purple-800",children:I.prixBoutique?`${I.prixBoutique.toLocaleString("fr-FR")} F`:"Non dfini"})]})]})}),(()=>{const{matieres:B}=Al.getState();if(!I.recette||I.recette.length===0)return null;const z=I.recette.reduce((re,V)=>{const D=B.find(k=>k.id===V.matiereId);return re+V.quantite*(D?.prixMoyenPondere||0)},0),H=I.prixBoutique?I.prixBoutique-z:0,he=I.prixBoutique?H/I.prixBoutique*100:0;return l.jsxs("div",{className:"mb-4 bg-gray-50 rounded-lg p-2 flex items-center justify-between border border-gray-100",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(de,{icon:"mdi:finance",className:"text-orange-500 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Marge Est."})]}),l.jsxs("div",{className:`text-sm font-bold ${he>=50?"text-green-600":he>=30?"text-orange-600":"text-red-600"}`,children:[Math.round(H).toLocaleString()," F ",l.jsxs("span",{className:"text-xs font-normal opacity-80",children:["(",he.toFixed(0),"%)"]})]})]})})(),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>C(I),disabled:h,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-orange-600 hover:text-orange-700 bg-orange-50 hover:bg-orange-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:pencil",className:"text-lg"}),l.jsx("span",{children:"Modifier"})]}),l.jsx("button",{onClick:()=>b(I),disabled:t,className:"flex items-center justify-center gap-2 px-4 py-2 text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50",children:l.jsx(de,{icon:"mdi:delete-outline",className:"text-lg"})})]})]},I.id))})})]})]})]})},fO=({client:n,onSave:e,onCancel:t,isLoading:r=!1})=>{const{chargerLivreurs:i,getLivreursActifs:a}=g0(),[c,d]=fe.useState({nom:"",adresse:"",telephone:"",email:"",typeClient:"client",livreurId:"",conditionsPaiement:"",eligibleRistourne:!1,active:!0});fe.useEffect(()=>{i().catch(console.error)},[i]),fe.useEffect(()=>{n&&d({nom:n.nom,adresse:n.adresse,telephone:n.telephone||"",email:n.email||"",typeClient:n.typeClient,livreurId:n.livreurId||"",conditionsPaiement:n.conditionsPaiement||"",eligibleRistourne:n.eligibleRistourne||!1,active:n.active})},[n]);const h=async f=>{f.preventDefault();try{await e(c),n||d({nom:"",adresse:"",telephone:"",email:"",typeClient:"client",livreurId:"",conditionsPaiement:"",eligibleRistourne:!1,active:!0})}catch(p){console.error("Erreur lors de la sauvegarde:",p)}};return l.jsx(nd,{title:n?"Modifier le client":"Ajouter un client",subtitle:"Remplissez les informations du client",children:l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsx(fr,{label:"Nom du client *",value:c.nom,onChange:f=>d({...c,nom:f.target.value}),placeholder:"ex: Restaurant Central",required:!0}),l.jsx(fr,{label:"Adresse *",value:c.adresse,onChange:f=>d({...c,adresse:f.target.value}),placeholder:"Adresse complte",required:!0}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(fr,{label:"Tlphone",value:c.telephone,onChange:f=>d({...c,telephone:f.target.value}),placeholder:"ex: +221 33 123 45 67"}),l.jsx(fr,{label:"Email",type:"email",value:c.email,onChange:f=>d({...c,email:f.target.value}),placeholder:"ex: contact@restaurant.sn"})]}),l.jsx(fr,{label:"Conditions de paiement",value:c.conditionsPaiement,onChange:f=>d({...c,conditionsPaiement:f.target.value}),placeholder:"ex: Payable  15 jours, Comptant, Fin de mois"}),l.jsx("p",{className:"text-xs text-gray-500 -mt-3",children:"Conditions spcifiques  ce client. Si vide, les conditions par dfaut seront utilises."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de client *"}),l.jsxs("select",{value:c.typeClient,onChange:f=>d({...c,typeClient:f.target.value}),className:"block w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-orange-500 focus:ring-1 sm:text-sm transition-colors bg-white",required:!0,children:[l.jsx("option",{value:"client",children:"Client (prix rduit)"}),l.jsx("option",{value:"boutique",children:"Boutique (prix normal)"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dfinit le type de tarification"}),c.typeClient==="boutique"&&l.jsxs("div",{className:"mt-3 flex items-start",children:[l.jsx("div",{className:"flex items-center h-5",children:l.jsx("input",{id:"eligibleRistourne",type:"checkbox",checked:c.eligibleRistourne,onChange:f=>d({...c,eligibleRistourne:f.target.checked}),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"})}),l.jsxs("div",{className:"ml-3 text-sm",children:[l.jsx("label",{htmlFor:"eligibleRistourne",className:"font-medium text-gray-700",children:"ligible  la Ristourne (Cashback)"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Le client paie le prix boutique, mais cumule la diffrence avec le prix client."})]})]})]}),l.jsxs("div",{children:[l.jsx(jh,{label:"Livreur assign",value:c.livreurId,onChange:f=>d({...c,livreurId:f.target.value}),options:[{value:"",label:"Aucun livreur ( assigner plus tard)"},...a().map(f=>({value:f.id,label:`${f.nom} ${f.vehicule?`(${f.vehicule})`:""}`}))]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Livreur responsable des livraisons de ce client"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"active",type:"checkbox",checked:c.active,onChange:f=>d({...c,active:f.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Client actif"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(Br,{type:"button",variant:"outline",onClick:t,children:"Annuler"}),l.jsx(Br,{type:"submit",isLoading:r,disabled:!c.nom.trim()||!c.adresse.trim(),children:n?"Modifier":"Ajouter"})]})]})})},mO=()=>{const{clients:n,clientEnEdition:e,isLoadingClients:t,chargerClients:r,ajouterClient:i,modifierClient:a,supprimerClient:c,setClientEnEdition:d}=vu(),{chargerLivreurs:h,getLivreurById:f}=g0(),[p,y]=fe.useState(!1);fe.useEffect(()=>{r(),h()},[r,h]);const N=async B=>{await i(B),y(!1)},b=async B=>{e&&(await a(e.id,B),d(null),y(!1))},j=async B=>{window.confirm(`tes-vous sr de vouloir supprimer "${B.nom}" ?`)&&await c(B.id)},C=()=>{d(null),y(!1)},R=B=>{d(B),y(!0)},I=B=>B==="client"?"Client (prix rduit)":"Boutique (prix normal)";return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-group",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Clients"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grez votre base de clients et dfinissez les types de tarification"})]})]}),l.jsxs("button",{onClick:()=>y(!0),disabled:p,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouveau client"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[p&&l.jsx(fO,{client:e,onSave:e?b:N,onCancel:C,isLoading:t}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:format-list-bulleted",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Liste des clients"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," client(s) enregistr(s)"]})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium",children:n.filter(B=>B.active).length})," actifs",l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium",children:n.filter(B=>!B.active).length})," inactifs"]})})]})}),l.jsx("div",{className:"p-6",children:t?l.jsx(Vy,{message:"Chargement des clients..."}):n.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(de,{icon:"mdi:account-group-outline",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Aucun client enregistr"}),l.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Commencez par ajouter vos premiers clients pour grer votre base de donnes client"}),l.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter le premier client"})]})]}):l.jsx("div",{className:"grid gap-6 lg:grid-cols-2 xl:grid-cols-3",children:n.map(B=>{const z=B.livreurId?f(B.livreurId):null;return l.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-2xl p-6 hover:border-blue-300 hover:shadow-2xl transition-all duration-300 group",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx(de,{icon:"mdi:account",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-1",children:B.nom}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 text-xs font-semibold rounded-full ${B.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.jsx(de,{icon:B.active?"mdi:check-circle":"mdi:pause-circle",className:"text-xs"}),B.active?"Actif":"Inactif"]})})]})]})}),l.jsxs("div",{className:"space-y-3 mb-6",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(de,{icon:"mdi:map-marker",className:"text-gray-400 mt-0.5"}),l.jsx("span",{className:"text-sm text-gray-700",children:B.adresse})]}),B.telephone&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:phone",className:"text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-700",children:B.telephone})]}),B.email&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:email",className:"text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-700",children:B.email})]})]}),l.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:l.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(de,{icon:"mdi:tag",className:"text-gray-500 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Type de client"})]}),l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-lg ${B.typeClient==="client"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:[l.jsx(de,{icon:B.typeClient==="client"?"mdi:account-heart":"mdi:storefront",className:"text-xs"}),I(B.typeClient)]})]})}),z?l.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-3 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-green-600 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-green-700",children:"Livreur assign"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account",className:"text-white text-xs"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-green-800",children:z.nom}),z.vehicule&&l.jsx("div",{className:"text-xs text-green-600",children:z.vehicule})]})]})]}):l.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-6",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:alert",className:"text-amber-600"}),l.jsx("span",{className:"text-sm text-amber-700 font-medium",children:"Aucun livreur assign"})]})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>R(B),disabled:p,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-blue-600 hover:text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:pencil",className:"text-lg"}),l.jsx("span",{children:"Modifier"})]}),l.jsx("button",{onClick:()=>j(B),disabled:t,className:"flex items-center justify-center gap-2 px-4 py-2 text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50",children:l.jsx(de,{icon:"mdi:delete-outline",className:"text-lg"})})]})]},B.id)})})})]})]})]})},pO=({livreur:n,onSave:e,onCancel:t,isLoading:r=!1})=>{const[i,a]=fe.useState({nom:"",telephone:"",vehicule:"",active:!0});fe.useEffect(()=>{n&&a({nom:n.nom,telephone:n.telephone||"",vehicule:n.vehicule||"",active:n.active})},[n]);const c=async d=>{d.preventDefault();try{await e(i),n||a({nom:"",telephone:"",vehicule:"",active:!0})}catch(h){console.error("Erreur lors de la sauvegarde:",h)}};return l.jsx(nd,{title:n?"Modifier le livreur":"Ajouter un livreur",subtitle:"Remplissez les informations du livreur",children:l.jsxs("form",{onSubmit:c,className:"space-y-4",children:[l.jsx(fr,{label:"Nom du livreur *",value:i.nom,onChange:d=>a({...i,nom:d.target.value}),placeholder:"ex: Jean Dupont",required:!0}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(fr,{label:"Tlphone",value:i.telephone,onChange:d=>a({...i,telephone:d.target.value}),placeholder:"ex: +226 70 12 34 56"}),l.jsx(fr,{label:"Vhicule / Plaque",value:i.vehicule,onChange:d=>a({...i,vehicule:d.target.value}),placeholder:"ex: Moto 125cc - AB123CD"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"active",type:"checkbox",checked:i.active,onChange:d=>a({...i,active:d.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Livreur actif"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(Br,{type:"button",variant:"outline",onClick:t,children:"Annuler"}),l.jsx(Br,{type:"submit",isLoading:r,disabled:!i.nom.trim(),children:n?"Modifier":"Ajouter"})]})]})})},gO=()=>{const{livreurs:n,livreurEnEdition:e,isLoadingLivreurs:t,chargerLivreurs:r,ajouterLivreur:i,modifierLivreur:a,supprimerLivreur:c,setLivreurEnEdition:d}=g0(),[h,f]=fe.useState(!1);fe.useEffect(()=>{r()},[r]);const p=async R=>{await i(R),f(!1)},y=async R=>{e&&(await a(e.id,R),d(null),f(!1))},N=async R=>{window.confirm(`tes-vous sr de vouloir supprimer "${R.nom}" ?`)&&await c(R.id)},b=()=>{d(null),f(!1)},j=R=>{d(R),f(!0)},C=()=>{d(null),f(!0)};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Livreurs"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grez les livreurs et leurs assignations clients"})]})]}),l.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouveau livreur"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[h&&l.jsx(pO,{livreur:e,onSave:e?y:p,onCancel:b,isLoading:t}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:format-list-bulleted",className:"text-lg text-green-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"quipe de livraison"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," livreur(s) enregistr(s)"]})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium",children:n.filter(R=>R.active).length})," actifs",l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium",children:n.filter(R=>!R.active).length})," inactifs"]})})]})}),l.jsx("div",{className:"p-6",children:n.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(de,{icon:"mdi:truck-delivery-outline",className:"text-4xl text-green-500"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Aucun livreur enregistr"}),l.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Commencez par ajouter vos livreurs pour organiser et grer les livraisons"}),l.jsxs("button",{onClick:C,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter le premier livreur"})]})]}):l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(R=>l.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-2xl p-6 hover:border-green-300 hover:shadow-2xl transition-all duration-300 group",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx("span",{className:"text-white font-bold text-xl",children:R.nom.charAt(0).toUpperCase()})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-1",children:R.nom}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 text-xs font-semibold rounded-full ${R.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.jsx(de,{icon:R.active?"mdi:check-circle":"mdi:pause-circle",className:"text-xs"}),R.active?"Actif":"Inactif"]})})]})]})}),l.jsxs("div",{className:"space-y-3 mb-6",children:[R.telephone&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:phone",className:"text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-700",children:R.telephone})]}),R.vehicule&&l.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:car",className:"text-green-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium text-green-700 mb-1",children:"Vhicule"}),l.jsx("div",{className:"font-semibold text-green-800",children:R.vehicule})]})]})})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>j(R),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-green-600 hover:text-green-700 bg-green-50 hover:bg-green-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md",children:[l.jsx(de,{icon:"mdi:pencil",className:"text-lg"}),l.jsx("span",{children:"Modifier"})]}),l.jsx("button",{onClick:()=>N(R),className:"flex items-center justify-center gap-2 px-4 py-2 text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md",children:l.jsx(de,{icon:"mdi:delete-outline",className:"text-lg"})})]})]},R.id))})})]})]})]})},xO={apiKey:"AIzaSyBwaC_ySezVpfv9y9xHNromiTW77qJQlmA",authDomain:"boulangerie-da431.firebaseapp.com",projectId:"boulangerie-da431",storageBucket:"boulangerie-da431.firebasestorage.app",messagingSenderId:"324942492234",appId:"1:324942492234:web:afbc851e38b557a87f2cb3",measurementId:"G-3E7K2Y6N31"},vO=()=>{const[n,e]=fe.useState([]),[t,r]=fe.useState(!1),[i,a]=fe.useState({email:"",password:"",nom:"",prenom:"",role:"livreur"}),[c,d]=fe.useState(!1),[h,f]=fe.useState(null);fe.useEffect(()=>{p()},[]);const p=async()=>{try{const j=Pa(Hn(wt,"users")),R=(await fa(j)).docs.map(I=>({id:I.id,...I.data()}));e(R)}catch(j){console.error("Error fetching users:",j)}},y=j=>{j?(f(j),a({email:j.email,password:"",nom:j.nom,prenom:j.prenom,role:j.role})):(f(null),a({email:"",password:"",nom:"",prenom:"",role:"livreur"})),r(!0)},N=async()=>{d(!0);try{if(h){const j=Tn(wt,"users",h.id);await ma(j,{...h,nom:i.nom,prenom:i.prenom,role:i.role,updatedAt:new Date},{merge:!0}),kt.success("Utilisateur modifi avec succs")}else{const j=P1(xO,"Secondary"),C=hA(j),I=(await XR(C,i.email,i.password)).user;await e8(I,{displayName:`${i.nom} ${i.prenom}`}),await ma(Tn(wt,"users",I.uid),{email:i.email,nom:i.nom,prenom:i.prenom,role:i.role,active:!0,createdAt:new Date,updatedAt:new Date}),kt.success("Utilisateur cr avec succs")}r(!1),f(null),a({email:"",password:"",nom:"",prenom:"",role:"livreur"}),p()}catch(j){console.error("Error saving user:",j),kt.error(`Erreur: ${j.message}`)}finally{d(!1)}},b=async j=>{if(window.confirm("tes-vous sr de vouloir supprimer cet utilisateur ?"))try{await c0(Tn(wt,"users",j)),kt.success("Utilisateur supprim (Firestore uniquement)"),p()}catch{kt.error("Erreur lors de la suppression")}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Utilisateurs"}),l.jsxs(Br,{onClick:()=>y(),children:[l.jsx(de,{icon:"mdi:account-plus",className:"mr-2"}),"Nouvel Utilisateur"]})]}),l.jsx(nd,{children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Utilisateur"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rle"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(j=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[j.nom," ",j.prenom]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j.role==="admin"?"bg-purple-100 text-purple-800":j.role==="livreur"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:j.role})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[l.jsx("button",{onClick:()=>y(j),className:"text-blue-600 hover:text-blue-900 mr-3",title:"Modifier",children:l.jsx(de,{icon:"mdi:pencil",className:"text-xl"})}),l.jsx("button",{onClick:()=>b(j.id),className:"text-red-600 hover:text-red-900",title:"Supprimer",children:l.jsx(de,{icon:"mdi:trash-can",className:"text-xl"})})]})]},j.id))})]})})}),l.jsx(Yu,{isOpen:t,onClose:()=>r(!1),title:h?"Modifier l'utilisateur":"Ajouter un utilisateur",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(fr,{label:"Nom",value:i.nom,onChange:j=>a({...i,nom:j.target.value})}),l.jsx(fr,{label:"Prnom",value:i.prenom,onChange:j=>a({...i,prenom:j.target.value})})]}),l.jsx(fr,{label:"Email",type:"email",value:i.email,onChange:j=>a({...i,email:j.target.value}),disabled:!!h,className:h?"bg-gray-100":""}),!h&&l.jsx(fr,{label:"Mot de passe",type:"password",value:i.password,onChange:j=>a({...i,password:j.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rle"}),l.jsxs("select",{value:i.role,onChange:j=>a({...i,role:j.target.value}),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[l.jsx("option",{value:"admin",children:"Administrateur"}),l.jsx("option",{value:"livreur",children:"Livreur"}),l.jsx("option",{value:"boulanger",children:"Boulanger"}),l.jsx("option",{value:"vendeuse",children:"Vendeuse"}),l.jsx("option",{value:"gestionnaire",children:"Gestionnaire"})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx(Br,{onClick:N,isLoading:c,children:h?"Enregistrer les modifications":"Crer l'utilisateur"})})]})})]})},Ra=n=>`${Math.round(n).toLocaleString("fr-FR")} FCFA`,jf=n=>`${Math.round(n)} FCFA`,yO="modulepreload",bO=function(n){return"/"+n},A_={},tv=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");i=h(t.map(f=>{if(f=bO(f),f in A_)return;A_[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const N=document.createElement("link");if(N.rel=p?"stylesheet":yO,p||(N.as="script"),N.crossOrigin="",N.href=f,d&&N.setAttribute("nonce",d),document.head.appendChild(N),p)return new Promise((b,j)=>{N.addEventListener("load",b),N.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};function nr(n){"@babel/helpers - typeof";return nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(n)}var Fo=Uint8Array,Da=Uint16Array,Uy=Int32Array,zy=new Fo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hy=new Fo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),S_=new Fo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),LS=function(n,e){for(var t=new Da(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Uy(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return{b:t,r:i}},kS=LS(zy,2),wO=kS.b,u1=kS.r;wO[28]=258,u1[258]=28;var _O=LS(Hy,0),j_=_O.r,d1=new Da(32768);for(var Sr=0;Sr<32768;++Sr){var Kc=(Sr&43690)>>1|(Sr&21845)<<1;Kc=(Kc&52428)>>2|(Kc&13107)<<2,Kc=(Kc&61680)>>4|(Kc&3855)<<4,d1[Sr]=((Kc&65280)>>8|(Kc&255)<<8)>>1}var zf=(function(n,e,t){for(var r=n.length,i=0,a=new Da(e);i<r;++i)n[i]&&++a[n[i]-1];var c=new Da(e);for(i=1;i<e;++i)c[i]=c[i-1]+a[i-1]<<1;var d;if(t){d=new Da(1<<e);var h=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],p=e-n[i],y=c[n[i]-1]++<<p,N=y|(1<<p)-1;y<=N;++y)d[d1[y]>>h]=f}else for(d=new Da(r),i=0;i<r;++i)n[i]&&(d[i]=d1[c[n[i]-1]++]>>15-n[i]);return d}),rd=new Fo(288);for(var Sr=0;Sr<144;++Sr)rd[Sr]=8;for(var Sr=144;Sr<256;++Sr)rd[Sr]=9;for(var Sr=256;Sr<280;++Sr)rd[Sr]=7;for(var Sr=280;Sr<288;++Sr)rd[Sr]=8;var Rg=new Fo(32);for(var Sr=0;Sr<32;++Sr)Rg[Sr]=5;var NO=zf(rd,9,0),AO=zf(Rg,5,0),PS=function(n){return(n+7)/8|0},SO=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Fo(n.subarray(e,t))},ec=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Ef=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},nv=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,a=t.slice();if(!i)return{t:MS,l:0};if(i==1){var c=new Fo(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(he,re){return he.f-re.f}),t.push({s:-1,f:25001});var d=t[0],h=t[1],f=0,p=1,y=2;for(t[0]={s:-1,f:d.f+h.f,l:d,r:h};p!=i-1;)d=t[t[f].f<t[y].f?f++:y++],h=t[f!=p&&t[f].f<t[y].f?f++:y++],t[p++]={s:-1,f:d.f+h.f,l:d,r:h};for(var N=a[0].s,r=1;r<i;++r)a[r].s>N&&(N=a[r].s);var b=new Da(N+1),j=h1(t[p-1],b,0);if(j>e){var r=0,C=0,R=j-e,I=1<<R;for(a.sort(function(re,V){return b[V.s]-b[re.s]||re.f-V.f});r<i;++r){var B=a[r].s;if(b[B]>e)C+=I-(1<<j-b[B]),b[B]=e;else break}for(C>>=R;C>0;){var z=a[r].s;b[z]<e?C-=1<<e-b[z]++-1:++r}for(;r>=0&&C;--r){var H=a[r].s;b[H]==e&&(--b[H],++C)}j=e}return{t:new Fo(b),l:j}},h1=function(n,e,t){return n.s==-1?Math.max(h1(n.l,e,t+1),h1(n.r,e,t+1)):e[n.s]=t},E_=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Da(++e),r=0,i=n[0],a=1,c=function(h){t[r++]=h},d=1;d<=e;++d)if(n[d]==i&&d!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)c(32754);a>2&&(c(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(c(i),--a;a>6;a-=6)c(8304);a>2&&(c(a-3<<5|8208),a=0)}for(;a--;)c(i);a=1,i=n[d]}return{c:t.subarray(0,r),n:e}},Tf=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},DS=function(n,e,t){var r=t.length,i=PS(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var a=0;a<r;++a)n[i+a+4]=t[a];return(i+4+r)*8},T_=function(n,e,t,r,i,a,c,d,h,f,p){ec(e,p++,t),++i[256];for(var y=nv(i,15),N=y.t,b=y.l,j=nv(a,15),C=j.t,R=j.l,I=E_(N),B=I.c,z=I.n,H=E_(C),he=H.c,re=H.n,V=new Da(19),D=0;D<B.length;++D)++V[B[D]&31];for(var D=0;D<he.length;++D)++V[he[D]&31];for(var k=nv(V,7),G=k.t,S=k.l,L=19;L>4&&!G[S_[L-1]];--L);var F=f+5<<3,ae=Tf(i,rd)+Tf(a,Rg)+c,ve=Tf(i,N)+Tf(a,C)+c+14+3*L+Tf(V,G)+2*V[16]+3*V[17]+7*V[18];if(h>=0&&F<=ae&&F<=ve)return DS(e,p,n.subarray(h,h+f));var K,ce,me,Se;if(ec(e,p,1+(ve<ae)),p+=2,ve<ae){K=zf(N,b,0),ce=N,me=zf(C,R,0),Se=C;var qe=zf(G,S,0);ec(e,p,z-257),ec(e,p+5,re-1),ec(e,p+10,L-4),p+=14;for(var D=0;D<L;++D)ec(e,p+3*D,G[S_[D]]);p+=3*L;for(var X=[B,he],q=0;q<2;++q)for(var J=X[q],D=0;D<J.length;++D){var ne=J[D]&31;ec(e,p,qe[ne]),p+=G[ne],ne>15&&(ec(e,p,J[D]>>5&127),p+=J[D]>>12)}}else K=NO,ce=rd,me=AO,Se=Rg;for(var D=0;D<d;++D){var ue=r[D];if(ue>255){var ne=ue>>18&31;Ef(e,p,K[ne+257]),p+=ce[ne+257],ne>7&&(ec(e,p,ue>>23&31),p+=zy[ne]);var pe=ue&31;Ef(e,p,me[pe]),p+=Se[pe],pe>3&&(Ef(e,p,ue>>5&8191),p+=Hy[pe])}else Ef(e,p,K[ue]),p+=ce[ue]}return Ef(e,p,K[256]),p+ce[256]},jO=new Uy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),MS=new Fo(0),EO=function(n,e,t,r,i,a){var c=a.z||n.length,d=new Fo(r+c+5*(1+Math.ceil(c/7e3))+i),h=d.subarray(r,d.length-i),f=a.l,p=(a.r||0)&7;if(e){p&&(h[0]=a.r>>3);for(var y=jO[e-1],N=y>>13,b=y&8191,j=(1<<t)-1,C=a.p||new Da(32768),R=a.h||new Da(j+1),I=Math.ceil(t/3),B=2*I,z=function(ht){return(n[ht]^n[ht+1]<<I^n[ht+2]<<B)&j},H=new Uy(25e3),he=new Da(288),re=new Da(32),V=0,D=0,k=a.i||0,G=0,S=a.w||0,L=0;k+2<c;++k){var F=z(k),ae=k&32767,ve=R[F];if(C[ae]=ve,R[F]=ae,S<=k){var K=c-k;if((V>7e3||G>24576)&&(K>423||!f)){p=T_(n,h,0,H,he,re,D,G,L,k-L,p),G=V=D=0,L=k;for(var ce=0;ce<286;++ce)he[ce]=0;for(var ce=0;ce<30;++ce)re[ce]=0}var me=2,Se=0,qe=b,X=ae-ve&32767;if(K>2&&F==z(k-X))for(var q=Math.min(N,K)-1,J=Math.min(32767,k),ne=Math.min(258,K);X<=J&&--qe&&ae!=ve;){if(n[k+me]==n[k+me-X]){for(var ue=0;ue<ne&&n[k+ue]==n[k+ue-X];++ue);if(ue>me){if(me=ue,Se=X,ue>q)break;for(var pe=Math.min(X,ue-2),we=0,ce=0;ce<pe;++ce){var De=k-X+ce&32767,Re=C[De],Ue=De-Re&32767;Ue>we&&(we=Ue,ve=De)}}}ae=ve,ve=C[ae],X+=ae-ve&32767}if(Se){H[G++]=268435456|u1[me]<<18|j_[Se];var Ze=u1[me]&31,at=j_[Se]&31;D+=zy[Ze]+Hy[at],++he[257+Ze],++re[at],S=k+me,++V}else H[G++]=n[k],++he[n[k]]}}for(k=Math.max(k,S);k<c;++k)H[G++]=n[k],++he[n[k]];p=T_(n,h,f,H,he,re,D,G,L,k-L,p),f||(a.r=p&7|h[p/8|0]<<3,p-=7,a.h=R,a.p=C,a.i=k,a.w=S)}else{for(var k=a.w||0;k<c+f;k+=65535){var ot=k+65535;ot>=c&&(h[p/8|0]=f,ot=c),p=DS(h,p+1,n.subarray(k,ot))}a.i=c}return SO(d,0,r+PS(p)+i)},OS=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,a=t.length|0,c=0;c!=a;){for(var d=Math.min(c+2655,a);c<d;++c)i+=r+=t[c];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},TO=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),c=new Fo(a.length+n.length);c.set(a),c.set(n,a.length),n=c,i.w=a.length}return EO(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},FS=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},CO=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=OS();i.p(e.dictionary),FS(n,2,i.d())}};function f1(n,e){e||(e={});var t=OS();t.p(n);var r=TO(n,e,e.dictionary?6:2,4);return CO(r,e),FS(r,r.length-4,t.d()),r}var IO=typeof TextDecoder<"u"&&new TextDecoder,RO=0;try{IO.decode(MS,{stream:!0}),RO=1}catch{}function LO(n){if(Array.isArray(n))return n}function kO(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,c,d=[],h=!0,f=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(h=(r=a.call(t)).done)&&(d.push(r.value),d.length!==e);h=!0);}catch(p){f=!0,i=p}finally{try{if(!h&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(f)throw i}}return d}}function C_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function PO(n,e){if(n){if(typeof n=="string")return C_(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?C_(n,e):void 0}}function DO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I_(n,e){return LO(n)||kO(n,e)||PO(n,e)||DO()}function R_(n,e="utf8"){return new TextDecoder(e).decode(n)}const MO=new TextEncoder;function OO(n){return MO.encode(n)}const FO=1024*8,qO=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),rv={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class $y{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=FO,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,a=e.byteLength-i;let c=i;(ArrayBuffer.isView(e)||e instanceof $y)&&(e.byteLength!==e.buffer.byteLength&&(c=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=rv[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+r);if(this.littleEndian===qO&&t!=="uint8"&&t!=="int8"){const d=new Uint8Array(this.buffer.slice(i,i+r));d.reverse();const h=new rv[t](d.buffer);return this.offset+=r,h.reverse(),h}const c=new rv[t](a);return this.offset+=r,c}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return R_(this.readBytes(e))}decodeText(e=1,t="utf8"){return R_(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(OO(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Fh(n){let e=n.length;for(;--e>=0;)n[e]=0}const VO=3,BO=258,qS=29,UO=256,zO=UO+1+qS,VS=30,HO=512,$O=new Array((zO+2)*2);Fh($O);const GO=new Array(VS*2);Fh(GO);const WO=new Array(HO);Fh(WO);const YO=new Array(BO-VO+1);Fh(YO);const KO=new Array(qS);Fh(KO);const QO=new Array(VS);Fh(QO);const XO=(n,e,t,r)=>{let i=n&65535|0,a=n>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do i=i+e[r++]|0,a=a+i|0;while(--c);i%=65521,a%=65521}return i|a<<16|0};var m1=XO;const JO=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},ZO=new Uint32Array(JO()),eF=(n,e,t,r)=>{const i=ZO,a=r+t;n^=-1;for(let c=r;c<a;c++)n=n>>>8^i[(n^e[c])&255];return n^-1};var ul=eF,p1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},BS={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const tF=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var nF=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)tF(t,r)&&(n[r]=t[r])}}return n},rF=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,i=0,a=n.length;r<a;r++){let c=n[r];t.set(c,i),i+=c.length}return t},US={assign:nF,flattenChunks:rF};let zS=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{zS=!1}const sm=new Uint8Array(256);for(let n=0;n<256;n++)sm[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;sm[254]=sm[254]=1;var iF=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,a,c=n.length,d=0;for(i=0;i<c;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<c&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),a=0,i=0;a<d;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<c&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|t&63):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|t&63):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|t&63);return e};const sF=(n,e)=>{if(e<65534&&n.subarray&&zS)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t};var aF=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i;const a=new Array(t*2);for(i=0,r=0;r<t;){let c=n[r++];if(c<128){a[i++]=c;continue}let d=sm[c];if(d>4){a[i++]=65533,r+=d-1;continue}for(c&=d===2?31:d===3?15:7;d>1&&r<t;)c=c<<6|n[r++]&63,d--;if(d>1){a[i++]=65533;continue}c<65536?a[i++]=c:(c-=65536,a[i++]=55296|c>>10&1023,a[i++]=56320|c&1023)}return sF(a,i)},oF=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+sm[n[t]]>e?t:e},g1={string2buf:iF,buf2string:aF,utf8border:oF};function lF(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var cF=lF;const jp=16209,uF=16191;var dF=function(e,t){let r,i,a,c,d,h,f,p,y,N,b,j,C,R,I,B,z,H,he,re,V,D,k,G;const S=e.state;r=e.next_in,k=e.input,i=r+(e.avail_in-5),a=e.next_out,G=e.output,c=a-(t-e.avail_out),d=a+(e.avail_out-257),h=S.dmax,f=S.wsize,p=S.whave,y=S.wnext,N=S.window,b=S.hold,j=S.bits,C=S.lencode,R=S.distcode,I=(1<<S.lenbits)-1,B=(1<<S.distbits)-1;e:do{j<15&&(b+=k[r++]<<j,j+=8,b+=k[r++]<<j,j+=8),z=C[b&I];t:for(;;){if(H=z>>>24,b>>>=H,j-=H,H=z>>>16&255,H===0)G[a++]=z&65535;else if(H&16){he=z&65535,H&=15,H&&(j<H&&(b+=k[r++]<<j,j+=8),he+=b&(1<<H)-1,b>>>=H,j-=H),j<15&&(b+=k[r++]<<j,j+=8,b+=k[r++]<<j,j+=8),z=R[b&B];n:for(;;){if(H=z>>>24,b>>>=H,j-=H,H=z>>>16&255,H&16){if(re=z&65535,H&=15,j<H&&(b+=k[r++]<<j,j+=8,j<H&&(b+=k[r++]<<j,j+=8)),re+=b&(1<<H)-1,re>h){e.msg="invalid distance too far back",S.mode=jp;break e}if(b>>>=H,j-=H,H=a-c,re>H){if(H=re-H,H>p&&S.sane){e.msg="invalid distance too far back",S.mode=jp;break e}if(V=0,D=N,y===0){if(V+=f-H,H<he){he-=H;do G[a++]=N[V++];while(--H);V=a-re,D=G}}else if(y<H){if(V+=f+y-H,H-=y,H<he){he-=H;do G[a++]=N[V++];while(--H);if(V=0,y<he){H=y,he-=H;do G[a++]=N[V++];while(--H);V=a-re,D=G}}}else if(V+=y-H,H<he){he-=H;do G[a++]=N[V++];while(--H);V=a-re,D=G}for(;he>2;)G[a++]=D[V++],G[a++]=D[V++],G[a++]=D[V++],he-=3;he&&(G[a++]=D[V++],he>1&&(G[a++]=D[V++]))}else{V=a-re;do G[a++]=G[V++],G[a++]=G[V++],G[a++]=G[V++],he-=3;while(he>2);he&&(G[a++]=G[V++],he>1&&(G[a++]=G[V++]))}}else if((H&64)===0){z=R[(z&65535)+(b&(1<<H)-1)];continue n}else{e.msg="invalid distance code",S.mode=jp;break e}break}}else if((H&64)===0){z=C[(z&65535)+(b&(1<<H)-1)];continue t}else if(H&32){S.mode=uF;break e}else{e.msg="invalid literal/length code",S.mode=jp;break e}break}}while(r<i&&a<d);he=j>>3,r-=he,j-=he<<3,b&=(1<<j)-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=a<d?257+(d-a):257-(a-d),S.hold=b,S.bits=j};const Kd=15,L_=852,k_=592,P_=0,iv=1,D_=2,hF=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),fF=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),mF=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),pF=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),gF=(n,e,t,r,i,a,c,d)=>{const h=d.bits;let f=0,p=0,y=0,N=0,b=0,j=0,C=0,R=0,I=0,B=0,z,H,he,re,V,D=null,k;const G=new Uint16Array(Kd+1),S=new Uint16Array(Kd+1);let L=null,F,ae,ve;for(f=0;f<=Kd;f++)G[f]=0;for(p=0;p<r;p++)G[e[t+p]]++;for(b=h,N=Kd;N>=1&&G[N]===0;N--);if(b>N&&(b=N),N===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,d.bits=1,0;for(y=1;y<N&&G[y]===0;y++);for(b<y&&(b=y),R=1,f=1;f<=Kd;f++)if(R<<=1,R-=G[f],R<0)return-1;if(R>0&&(n===P_||N!==1))return-1;for(S[1]=0,f=1;f<Kd;f++)S[f+1]=S[f]+G[f];for(p=0;p<r;p++)e[t+p]!==0&&(c[S[e[t+p]]++]=p);if(n===P_?(D=L=c,k=20):n===iv?(D=hF,L=fF,k=257):(D=mF,L=pF,k=0),B=0,p=0,f=y,V=a,j=b,C=0,he=-1,I=1<<b,re=I-1,n===iv&&I>L_||n===D_&&I>k_)return 1;for(;;){F=f-C,c[p]+1<k?(ae=0,ve=c[p]):c[p]>=k?(ae=L[c[p]-k],ve=D[c[p]-k]):(ae=96,ve=0),z=1<<f-C,H=1<<j,y=H;do H-=z,i[V+(B>>C)+H]=F<<24|ae<<16|ve|0;while(H!==0);for(z=1<<f-1;B&z;)z>>=1;if(z!==0?(B&=z-1,B+=z):B=0,p++,--G[f]===0){if(f===N)break;f=e[t+c[p]]}if(f>b&&(B&re)!==he){for(C===0&&(C=b),V+=y,j=f-C,R=1<<j;j+C<N&&(R-=G[j+C],!(R<=0));)j++,R<<=1;if(I+=1<<j,n===iv&&I>L_||n===D_&&I>k_)return 1;he=B&re,i[he]=b<<24|j<<16|V-a|0}}return B!==0&&(i[V+B]=f-C<<24|64<<16|0),d.bits=b,0};var Hf=gF;const xF=0,HS=1,$S=2,{Z_FINISH:M_,Z_BLOCK:vF,Z_TREES:Ep,Z_OK:id,Z_STREAM_END:yF,Z_NEED_DICT:bF,Z_STREAM_ERROR:co,Z_DATA_ERROR:GS,Z_MEM_ERROR:WS,Z_BUF_ERROR:wF,Z_DEFLATED:O_}=BS,x0=16180,F_=16181,q_=16182,V_=16183,B_=16184,U_=16185,z_=16186,H_=16187,$_=16188,G_=16189,Lg=16190,tc=16191,sv=16192,W_=16193,av=16194,Y_=16195,K_=16196,Q_=16197,X_=16198,Tp=16199,Cp=16200,J_=16201,Z_=16202,eN=16203,tN=16204,nN=16205,ov=16206,rN=16207,iN=16208,Lr=16209,YS=16210,KS=16211,_F=852,NF=592,AF=15,SF=AF,sN=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function jF(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const dd=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<x0||e.mode>KS?1:0},QS=n=>{if(dd(n))return co;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=x0,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(_F),e.distcode=e.distdyn=new Int32Array(NF),e.sane=1,e.back=-1,id},XS=n=>{if(dd(n))return co;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,QS(n)},JS=(n,e)=>{let t;if(dd(n))return co;const r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?co:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,XS(n))},ZS=(n,e)=>{if(!n)return co;const t=new jF;n.state=t,t.strm=n,t.window=null,t.mode=x0;const r=JS(n,e);return r!==id&&(n.state=null),r},EF=n=>ZS(n,SF);let aN=!0,lv,cv;const TF=n=>{if(aN){lv=new Int32Array(512),cv=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Hf(HS,n.lens,0,288,lv,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Hf($S,n.lens,0,32,cv,0,n.work,{bits:5}),aN=!1}n.lencode=lv,n.lenbits=9,n.distcode=cv,n.distbits=5},ej=(n,e,t,r)=>{let i;const a=n.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(e.subarray(t-r,t-r+i),a.wnext),r-=i,r?(a.window.set(e.subarray(t-r,t),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},CF=(n,e)=>{let t,r,i,a,c,d,h,f,p,y,N,b,j,C,R=0,I,B,z,H,he,re,V,D;const k=new Uint8Array(4);let G,S;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(dd(n)||!n.output||!n.input&&n.avail_in!==0)return co;t=n.state,t.mode===tc&&(t.mode=sv),c=n.next_out,i=n.output,h=n.avail_out,a=n.next_in,r=n.input,d=n.avail_in,f=t.hold,p=t.bits,y=d,N=h,D=id;e:for(;;)switch(t.mode){case x0:if(t.wrap===0){t.mode=sv;break}for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,k[0]=f&255,k[1]=f>>>8&255,t.check=ul(t.check,k,2,0),f=0,p=0,t.mode=F_;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){n.msg="incorrect header check",t.mode=Lr;break}if((f&15)!==O_){n.msg="unknown compression method",t.mode=Lr;break}if(f>>>=4,p-=4,V=(f&15)+8,t.wbits===0&&(t.wbits=V),V>15||V>t.wbits){n.msg="invalid window size",t.mode=Lr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=f&512?G_:tc,f=0,p=0;break;case F_:for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.flags=f,(t.flags&255)!==O_){n.msg="unknown compression method",t.mode=Lr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Lr;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=ul(t.check,k,2,0)),f=0,p=0,t.mode=q_;case q_:for(;p<32;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,k[2]=f>>>16&255,k[3]=f>>>24&255,t.check=ul(t.check,k,4,0)),f=0,p=0,t.mode=V_;case V_:for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=ul(t.check,k,2,0)),f=0,p=0,t.mode=B_;case B_:if(t.flags&1024){for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=ul(t.check,k,2,0)),f=0,p=0}else t.head&&(t.head.extra=null);t.mode=U_;case U_:if(t.flags&1024&&(b=t.length,b>d&&(b=d),b&&(t.head&&(V=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(a,a+b),V)),t.flags&512&&t.wrap&4&&(t.check=ul(t.check,r,b,a)),d-=b,a+=b,t.length-=b),t.length))break e;t.length=0,t.mode=z_;case z_:if(t.flags&2048){if(d===0)break e;b=0;do V=r[a+b++],t.head&&V&&t.length<65536&&(t.head.name+=String.fromCharCode(V));while(V&&b<d);if(t.flags&512&&t.wrap&4&&(t.check=ul(t.check,r,b,a)),d-=b,a+=b,V)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=H_;case H_:if(t.flags&4096){if(d===0)break e;b=0;do V=r[a+b++],t.head&&V&&t.length<65536&&(t.head.comment+=String.fromCharCode(V));while(V&&b<d);if(t.flags&512&&t.wrap&4&&(t.check=ul(t.check,r,b,a)),d-=b,a+=b,V)break e}else t.head&&(t.head.comment=null);t.mode=$_;case $_:if(t.flags&512){for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.wrap&4&&f!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Lr;break}f=0,p=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=tc;break;case G_:for(;p<32;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}n.adler=t.check=sN(f),f=0,p=0,t.mode=Lg;case Lg:if(t.havedict===0)return n.next_out=c,n.avail_out=h,n.next_in=a,n.avail_in=d,t.hold=f,t.bits=p,bF;n.adler=t.check=1,t.mode=tc;case tc:if(e===vF||e===Ep)break e;case sv:if(t.last){f>>>=p&7,p-=p&7,t.mode=ov;break}for(;p<3;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}switch(t.last=f&1,f>>>=1,p-=1,f&3){case 0:t.mode=W_;break;case 1:if(TF(t),t.mode=Tp,e===Ep){f>>>=2,p-=2;break e}break;case 2:t.mode=K_;break;case 3:n.msg="invalid block type",t.mode=Lr}f>>>=2,p-=2;break;case W_:for(f>>>=p&7,p-=p&7;p<32;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if((f&65535)!==(f>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Lr;break}if(t.length=f&65535,f=0,p=0,t.mode=av,e===Ep)break e;case av:t.mode=Y_;case Y_:if(b=t.length,b){if(b>d&&(b=d),b>h&&(b=h),b===0)break e;i.set(r.subarray(a,a+b),c),d-=b,a+=b,h-=b,c+=b,t.length-=b;break}t.mode=tc;break;case K_:for(;p<14;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.nlen=(f&31)+257,f>>>=5,p-=5,t.ndist=(f&31)+1,f>>>=5,p-=5,t.ncode=(f&15)+4,f>>>=4,p-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Lr;break}t.have=0,t.mode=Q_;case Q_:for(;t.have<t.ncode;){for(;p<3;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.lens[L[t.have++]]=f&7,f>>>=3,p-=3}for(;t.have<19;)t.lens[L[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,G={bits:t.lenbits},D=Hf(xF,t.lens,0,19,t.lencode,0,t.work,G),t.lenbits=G.bits,D){n.msg="invalid code lengths set",t.mode=Lr;break}t.have=0,t.mode=X_;case X_:for(;t.have<t.nlen+t.ndist;){for(;R=t.lencode[f&(1<<t.lenbits)-1],I=R>>>24,B=R>>>16&255,z=R&65535,!(I<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(z<16)f>>>=I,p-=I,t.lens[t.have++]=z;else{if(z===16){for(S=I+2;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(f>>>=I,p-=I,t.have===0){n.msg="invalid bit length repeat",t.mode=Lr;break}V=t.lens[t.have-1],b=3+(f&3),f>>>=2,p-=2}else if(z===17){for(S=I+3;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}f>>>=I,p-=I,V=0,b=3+(f&7),f>>>=3,p-=3}else{for(S=I+7;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}f>>>=I,p-=I,V=0,b=11+(f&127),f>>>=7,p-=7}if(t.have+b>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Lr;break}for(;b--;)t.lens[t.have++]=V}}if(t.mode===Lr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Lr;break}if(t.lenbits=9,G={bits:t.lenbits},D=Hf(HS,t.lens,0,t.nlen,t.lencode,0,t.work,G),t.lenbits=G.bits,D){n.msg="invalid literal/lengths set",t.mode=Lr;break}if(t.distbits=6,t.distcode=t.distdyn,G={bits:t.distbits},D=Hf($S,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,G),t.distbits=G.bits,D){n.msg="invalid distances set",t.mode=Lr;break}if(t.mode=Tp,e===Ep)break e;case Tp:t.mode=Cp;case Cp:if(d>=6&&h>=258){n.next_out=c,n.avail_out=h,n.next_in=a,n.avail_in=d,t.hold=f,t.bits=p,dF(n,N),c=n.next_out,i=n.output,h=n.avail_out,a=n.next_in,r=n.input,d=n.avail_in,f=t.hold,p=t.bits,t.mode===tc&&(t.back=-1);break}for(t.back=0;R=t.lencode[f&(1<<t.lenbits)-1],I=R>>>24,B=R>>>16&255,z=R&65535,!(I<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(B&&(B&240)===0){for(H=I,he=B,re=z;R=t.lencode[re+((f&(1<<H+he)-1)>>H)],I=R>>>24,B=R>>>16&255,z=R&65535,!(H+I<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}f>>>=H,p-=H,t.back+=H}if(f>>>=I,p-=I,t.back+=I,t.length=z,B===0){t.mode=nN;break}if(B&32){t.back=-1,t.mode=tc;break}if(B&64){n.msg="invalid literal/length code",t.mode=Lr;break}t.extra=B&15,t.mode=J_;case J_:if(t.extra){for(S=t.extra;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Z_;case Z_:for(;R=t.distcode[f&(1<<t.distbits)-1],I=R>>>24,B=R>>>16&255,z=R&65535,!(I<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if((B&240)===0){for(H=I,he=B,re=z;R=t.distcode[re+((f&(1<<H+he)-1)>>H)],I=R>>>24,B=R>>>16&255,z=R&65535,!(H+I<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}f>>>=H,p-=H,t.back+=H}if(f>>>=I,p-=I,t.back+=I,B&64){n.msg="invalid distance code",t.mode=Lr;break}t.offset=z,t.extra=B&15,t.mode=eN;case eN:if(t.extra){for(S=t.extra;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Lr;break}t.mode=tN;case tN:if(h===0)break e;if(b=N-h,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Lr;break}b>t.wnext?(b-=t.wnext,j=t.wsize-b):j=t.wnext-b,b>t.length&&(b=t.length),C=t.window}else C=i,j=c-t.offset,b=t.length;b>h&&(b=h),h-=b,t.length-=b;do i[c++]=C[j++];while(--b);t.length===0&&(t.mode=Cp);break;case nN:if(h===0)break e;i[c++]=t.length,h--,t.mode=Cp;break;case ov:if(t.wrap){for(;p<32;){if(d===0)break e;d--,f|=r[a++]<<p,p+=8}if(N-=h,n.total_out+=N,t.total+=N,t.wrap&4&&N&&(n.adler=t.check=t.flags?ul(t.check,i,N,c-N):m1(t.check,i,N,c-N)),N=h,t.wrap&4&&(t.flags?f:sN(f))!==t.check){n.msg="incorrect data check",t.mode=Lr;break}f=0,p=0}t.mode=rN;case rN:if(t.wrap&&t.flags){for(;p<32;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.wrap&4&&f!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Lr;break}f=0,p=0}t.mode=iN;case iN:D=yF;break e;case Lr:D=GS;break e;case YS:return WS;case KS:default:return co}return n.next_out=c,n.avail_out=h,n.next_in=a,n.avail_in=d,t.hold=f,t.bits=p,(t.wsize||N!==n.avail_out&&t.mode<Lr&&(t.mode<ov||e!==M_))&&ej(n,n.output,n.next_out,N-n.avail_out),y-=n.avail_in,N-=n.avail_out,n.total_in+=y,n.total_out+=N,t.total+=N,t.wrap&4&&N&&(n.adler=t.check=t.flags?ul(t.check,i,N,n.next_out-N):m1(t.check,i,N,n.next_out-N)),n.data_type=t.bits+(t.last?64:0)+(t.mode===tc?128:0)+(t.mode===Tp||t.mode===av?256:0),(y===0&&N===0||e===M_)&&D===id&&(D=wF),D},IF=n=>{if(dd(n))return co;let e=n.state;return e.window&&(e.window=null),n.state=null,id},RF=(n,e)=>{if(dd(n))return co;const t=n.state;return(t.wrap&2)===0?co:(t.head=e,e.done=!1,id)},LF=(n,e)=>{const t=e.length;let r,i,a;return dd(n)||(r=n.state,r.wrap!==0&&r.mode!==Lg)?co:r.mode===Lg&&(i=1,i=m1(i,e,t,0),i!==r.check)?GS:(a=ej(n,e,t,t),a?(r.mode=YS,WS):(r.havedict=1,id))};var kF=XS,PF=JS,DF=QS,MF=EF,OF=ZS,FF=CF,qF=IF,VF=RF,BF=LF,UF="pako inflate (from Nodeca project)",nc={inflateReset:kF,inflateReset2:PF,inflateResetKeep:DF,inflateInit:MF,inflateInit2:OF,inflate:FF,inflateEnd:qF,inflateGetHeader:VF,inflateSetDictionary:BF,inflateInfo:UF};function zF(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var HF=zF;const tj=Object.prototype.toString,{Z_NO_FLUSH:$F,Z_FINISH:GF,Z_OK:am,Z_STREAM_END:uv,Z_NEED_DICT:dv,Z_STREAM_ERROR:WF,Z_DATA_ERROR:oN,Z_MEM_ERROR:YF}=BS;function Sm(n){this.options=US.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cF,this.strm.avail_out=0;let t=nc.inflateInit2(this.strm,e.windowBits);if(t!==am)throw new Error(p1[t]);if(this.header=new HF,nc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=g1.string2buf(e.dictionary):tj.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=nc.inflateSetDictionary(this.strm,e.dictionary),t!==am)))throw new Error(p1[t])}Sm.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,c,d;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?GF:$F,tj.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),a=nc.inflate(t,c),a===dv&&i&&(a=nc.inflateSetDictionary(t,i),a===am?a=nc.inflate(t,c):a===oN&&(a=dv));t.avail_in>0&&a===uv&&t.state.wrap>0&&n[t.next_in]!==0;)nc.inflateReset(t),a=nc.inflate(t,c);switch(a){case WF:case oN:case dv:case YF:return this.onEnd(a),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||a===uv))if(this.options.to==="string"){let h=g1.utf8border(t.output,t.next_out),f=t.next_out-h,p=g1.buf2string(t.output,h);t.next_out=f,t.avail_out=r-f,f&&t.output.set(t.output.subarray(h,h+f),0),this.onData(p)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===am&&d===0)){if(a===uv)return a=nc.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Sm.prototype.onData=function(n){this.chunks.push(n)};Sm.prototype.onEnd=function(n){n===am&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=US.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function KF(n,e){const t=new Sm(e);if(t.push(n),t.err)throw t.msg||p1[t.err];return t.result}var QF=Sm,XF=KF,JF={Inflate:QF,inflate:XF};const{Inflate:ZF,inflate:eq}=JF;var lN=ZF,tq=eq;const nj=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;nj[n]=e}const cN=4294967295;function nq(n,e,t){let r=n;for(let i=0;i<t;i++)r=nj[(r^e[i])&255]^r>>>8;return r}function rq(n,e){return(nq(cN,n,e)^cN)>>>0}function uN(n,e,t){const r=n.readUint32(),i=rq(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function rj(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function ij(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function sj(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function aj(n,e,t,r,i){let a=0;if(t.length===0){for(;a<i;a++)e[a]=n[a];for(;a<r;a++)e[a]=n[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=n[a]+(t[a]>>1)&255;for(;a<r;a++)e[a]=n[a]+(e[a-i]+t[a]>>1)&255}}function oj(n,e,t,r,i){let a=0;if(t.length===0){for(;a<i;a++)e[a]=n[a];for(;a<r;a++)e[a]=n[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=n[a]+t[a]&255;for(;a<r;a++)e[a]=n[a]+iq(e[a-i],t[a],t[a-i])&255}}function iq(n,e,t){const r=n+e-t,i=Math.abs(r-n),a=Math.abs(r-e),c=Math.abs(r-t);return i<=a&&i<=c?n:a<=c?e:t}function sq(n,e,t,r,i,a){switch(n){case 0:rj(e,t,i);break;case 1:ij(e,t,i,a);break;case 2:sj(e,t,r,i);break;case 3:aj(e,t,r,i,a);break;case 4:oj(e,t,r,i,a);break;default:throw new Error(`Unsupported filter: ${n}`)}}const aq=new Uint16Array([255]),oq=new Uint8Array(aq.buffer),lq=oq[0]===255;function cq(n){const{data:e,width:t,height:r,channels:i,depth:a}=n,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(a/8)*i,h=new Uint8Array(r*t*d);let f=0;for(let p=0;p<7;p++){const y=c[p],N=Math.ceil((t-y.x)/y.xStep),b=Math.ceil((r-y.y)/y.yStep);if(N<=0||b<=0)continue;const j=N*d,C=new Uint8Array(j);for(let R=0;R<b;R++){const I=e[f++],B=e.subarray(f,f+j);f+=j;const z=new Uint8Array(j);sq(I,B,z,C,j,d),C.set(z);for(let H=0;H<N;H++){const he=y.x+H*y.xStep,re=y.y+R*y.yStep;if(!(he>=t||re>=r))for(let V=0;V<d;V++)h[(re*t+he)*d+V]=z[H*d+V]}}}if(a===16){const p=new Uint16Array(h.buffer);if(lq)for(let y=0;y<p.length;y++)p[y]=uq(p[y]);return p}else return h}function uq(n){return(n&255)<<8|n>>8&255}const dq=new Uint16Array([255]),hq=new Uint8Array(dq.buffer),fq=hq[0]===255,mq=new Uint8Array(0);function dN(n){const{data:e,width:t,height:r,channels:i,depth:a}=n,c=Math.ceil(a/8)*i,d=Math.ceil(a/8*i*t),h=new Uint8Array(r*d);let f=mq,p=0,y,N;for(let b=0;b<r;b++){switch(y=e.subarray(p+1,p+1+d),N=h.subarray(b*d,(b+1)*d),e[p]){case 0:rj(y,N,d);break;case 1:ij(y,N,d,c);break;case 2:sj(y,N,f,d);break;case 3:aj(y,N,f,d,c);break;case 4:oj(y,N,f,d,c);break;default:throw new Error(`Unsupported filter: ${e[p]}`)}f=N,p+=d+1}if(a===16){const b=new Uint16Array(h.buffer);if(fq)for(let j=0;j<b.length;j++)b[j]=pq(b[j]);return b}else return h}function pq(n){return(n&255)<<8|n>>8&255}const Qp=Uint8Array.of(137,80,78,71,13,10,26,10);function hN(n){if(!gq(n.readBytes(Qp.length)))throw new Error("wrong PNG signature")}function gq(n){if(n.length<Qp.length)return!1;for(let e=0;e<Qp.length;e++)if(n[e]!==Qp[e])return!1;return!0}const xq="tEXt",vq=0,lj=new TextDecoder("latin1");function yq(n){if(wq(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const bq=/^[\u0000-\u00FF]*$/;function wq(n){if(!bq.test(n))throw new Error("invalid latin1 text")}function _q(n,e,t){const r=cj(e);n[r]=Nq(e,t-r.length-1)}function cj(n){for(n.mark();n.readByte()!==vq;);const e=n.offset;n.reset();const t=lj.decode(n.readBytes(e-n.offset-1));return n.skip(1),yq(t),t}function Nq(n,e){return lj.decode(n.readBytes(e))}const Ia={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},hv={UNKNOWN:-1,DEFLATE:0},fN={UNKNOWN:-1,ADAPTIVE:0},fv={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Ip={NONE:0,BACKGROUND:1,PREVIOUS:2},mv={SOURCE:0,OVER:1};class Aq extends $y{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new lN,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=hv.UNKNOWN,this._filterMethod=fN.UNKNOWN,this._interlaceMethod=fv.UNKNOWN,this._colorType=Ia.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(hN(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(hN(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case xq:_q(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?uN(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?uN(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Sq(this.readUint8());const t=this.readUint8();this._colorType=t;let r;switch(t){case Ia.GREYSCALE:r=1;break;case Ia.TRUECOLOUR:r=3;break;case Ia.INDEXED_COLOUR:r=1;break;case Ia.GREYSCALE_ALPHA:r=2;break;case Ia.TRUECOLOUR_ALPHA:r=4;break;case Ia.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==hv.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Ia.GREYSCALE:case Ia.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case Ia.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case Ia.UNKNOWN:case Ia.GREYSCALE_ALPHA:case Ia.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=cj(this),r=this.readUint8();if(r!==hv.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:tq(i)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=dN({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case Ip.NONE:break;case Ip.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let a=0;a<this._png.width;a++){const c=(i*e.width+a)*this._png.channels;for(let d=0;d<this._png.channels;d++)r.data[c+d]=0}break;case Ip.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const r=1<<this._png.depth,i=(a,c)=>{const d=((a+t.yOffset)*this._png.width+t.xOffset+c)*this._png.channels,h=(a*t.width+c)*this._png.channels;return{index:d,frameIndex:h}};switch(t.blendOp){case mv.SOURCE:for(let a=0;a<t.height;a++)for(let c=0;c<t.width;c++){const{index:d,frameIndex:h}=i(a,c);for(let f=0;f<this._png.channels;f++)e.data[d+f]=t.data[h+f]}break;case mv.OVER:for(let a=0;a<t.height;a++)for(let c=0;c<t.width;c++){const{index:d,frameIndex:h}=i(a,c);for(let f=0;f<this._png.channels;f++){const p=t.data[h+this._png.channels-1]/r,y=f%(this._png.channels-1)===0?1:t.data[h+f],N=Math.floor(p*y+(1-p)*e.data[d+f]);e.data[d+f]+=N}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==fN.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===fv.NO_INTERLACE)this._png.data=dN({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===fv.ADAM7)this._png.data=cq({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Ip.NONE,blendOp:mv.SOURCE,data:e}),this._inflator=new lN,this._writingDataChunks=!1}}function Sq(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var mN;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(mN||(mN={}));function jq(n,e){return new Aq(n,e).decode()}var Zt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function pv(){Zt.console&&typeof Zt.console.log=="function"&&Zt.console.log.apply(Zt.console,arguments)}var vr={log:pv,warn:function(n){Zt.console&&(typeof Zt.console.warn=="function"?Zt.console.warn.apply(Zt.console,arguments):pv.call(null,arguments))},error:function(n){Zt.console&&(typeof Zt.console.error=="function"?Zt.console.error.apply(Zt.console,arguments):pv(n))}};function gv(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Hu(r.response,e,t)},r.onerror=function(){vr.error("could not download file")},r.send()}function pN(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Rp(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Hu=Zt.saveAs||((typeof window>"u"?"undefined":nr(window))!=="object"||window!==Zt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Zt.URL||Zt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?pN(i.href)?gv(n,e,t):Rp(i,i.target="_blank"):Rp(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Rp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(pN(n))gv(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Rp(r)})}else navigator.msSaveOrOpenBlob((function(i,a){return a===void 0?a={autoBom:!1}:nr(a)!=="object"&&(vr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return gv(n,e,t);var i=n.type==="application/octet-stream",a=/constructor/i.test(Zt.HTMLElement)||Zt.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&a)&&(typeof FileReader>"u"?"undefined":nr(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var p=d.result;p=c?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},d.readAsDataURL(n)}else{var h=Zt.URL||Zt.webkitURL,f=h.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});function uj(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,a=t[r].process,c=i.exec(n);c&&(e=a(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+d+h+f}}var Xp=Zt.atob.bind(Zt),gN=Zt.btoa.bind(Zt);function xv(n,e){var t=n[0],r=n[1],i=n[2],a=n[3];t=Ss(t,r,i,a,e[0],7,-680876936),a=Ss(a,t,r,i,e[1],12,-389564586),i=Ss(i,a,t,r,e[2],17,606105819),r=Ss(r,i,a,t,e[3],22,-1044525330),t=Ss(t,r,i,a,e[4],7,-176418897),a=Ss(a,t,r,i,e[5],12,1200080426),i=Ss(i,a,t,r,e[6],17,-1473231341),r=Ss(r,i,a,t,e[7],22,-45705983),t=Ss(t,r,i,a,e[8],7,1770035416),a=Ss(a,t,r,i,e[9],12,-1958414417),i=Ss(i,a,t,r,e[10],17,-42063),r=Ss(r,i,a,t,e[11],22,-1990404162),t=Ss(t,r,i,a,e[12],7,1804603682),a=Ss(a,t,r,i,e[13],12,-40341101),i=Ss(i,a,t,r,e[14],17,-1502002290),t=js(t,r=Ss(r,i,a,t,e[15],22,1236535329),i,a,e[1],5,-165796510),a=js(a,t,r,i,e[6],9,-1069501632),i=js(i,a,t,r,e[11],14,643717713),r=js(r,i,a,t,e[0],20,-373897302),t=js(t,r,i,a,e[5],5,-701558691),a=js(a,t,r,i,e[10],9,38016083),i=js(i,a,t,r,e[15],14,-660478335),r=js(r,i,a,t,e[4],20,-405537848),t=js(t,r,i,a,e[9],5,568446438),a=js(a,t,r,i,e[14],9,-1019803690),i=js(i,a,t,r,e[3],14,-187363961),r=js(r,i,a,t,e[8],20,1163531501),t=js(t,r,i,a,e[13],5,-1444681467),a=js(a,t,r,i,e[2],9,-51403784),i=js(i,a,t,r,e[7],14,1735328473),t=Es(t,r=js(r,i,a,t,e[12],20,-1926607734),i,a,e[5],4,-378558),a=Es(a,t,r,i,e[8],11,-2022574463),i=Es(i,a,t,r,e[11],16,1839030562),r=Es(r,i,a,t,e[14],23,-35309556),t=Es(t,r,i,a,e[1],4,-1530992060),a=Es(a,t,r,i,e[4],11,1272893353),i=Es(i,a,t,r,e[7],16,-155497632),r=Es(r,i,a,t,e[10],23,-1094730640),t=Es(t,r,i,a,e[13],4,681279174),a=Es(a,t,r,i,e[0],11,-358537222),i=Es(i,a,t,r,e[3],16,-722521979),r=Es(r,i,a,t,e[6],23,76029189),t=Es(t,r,i,a,e[9],4,-640364487),a=Es(a,t,r,i,e[12],11,-421815835),i=Es(i,a,t,r,e[15],16,530742520),t=Ts(t,r=Es(r,i,a,t,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Ts(a,t,r,i,e[7],10,1126891415),i=Ts(i,a,t,r,e[14],15,-1416354905),r=Ts(r,i,a,t,e[5],21,-57434055),t=Ts(t,r,i,a,e[12],6,1700485571),a=Ts(a,t,r,i,e[3],10,-1894986606),i=Ts(i,a,t,r,e[10],15,-1051523),r=Ts(r,i,a,t,e[1],21,-2054922799),t=Ts(t,r,i,a,e[8],6,1873313359),a=Ts(a,t,r,i,e[15],10,-30611744),i=Ts(i,a,t,r,e[6],15,-1560198380),r=Ts(r,i,a,t,e[13],21,1309151649),t=Ts(t,r,i,a,e[4],6,-145523070),a=Ts(a,t,r,i,e[11],10,-1120210379),i=Ts(i,a,t,r,e[2],15,718787259),r=Ts(r,i,a,t,e[9],21,-343485551),n[0]=su(t,n[0]),n[1]=su(r,n[1]),n[2]=su(i,n[2]),n[3]=su(a,n[3])}function v0(n,e,t,r,i,a){return e=su(su(e,n),su(r,a)),su(e<<i|e>>>32-i,t)}function Ss(n,e,t,r,i,a,c){return v0(e&t|~e&r,n,e,i,a,c)}function js(n,e,t,r,i,a,c){return v0(e&r|t&~r,n,e,i,a,c)}function Es(n,e,t,r,i,a,c){return v0(e^t^r,n,e,i,a,c)}function Ts(n,e,t,r,i,a,c){return v0(t^(e|~r),n,e,i,a,c)}function dj(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)xv(r,Eq(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(xv(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,xv(r,i),r}function Eq(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var xN="0123456789abcdef".split("");function Tq(n){for(var e="",t=0;t<4;t++)e+=xN[n>>8*t+4&15]+xN[n>>8*t&15];return e}function Cq(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function x1(n){return dj(n).map(Cq).join("")}var Iq=(function(n){for(var e=0;e<n.length;e++)n[e]=Tq(n[e]);return n.join("")})(dj("hello"))!="5d41402abc4b2a76b9719d911017c592";function su(n,e){if(Iq){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function v1(n,e){var t,r,i,a;if(n!==t){for(var c=(i=n,a=1+(256/n.length|0),new Array(a+1).join(i)),d=[],h=0;h<256;h++)d[h]=h;var f=0;for(h=0;h<256;h++){var p=d[h];f=(f+p+c.charCodeAt(h))%256,d[h]=d[f],d[f]=p}t=n,r=d}else d=r;var y=e.length,N=0,b=0,j="";for(h=0;h<y;h++)b=(b+(p=d[N=(N+1)%256]))%256,d[N]=d[b],d[b]=p,c=d[(d[N]+d[b])%256],j+=String.fromCharCode(e.charCodeAt(h)^c);return j}var vN={print:4,modify:8,copy:16,"annot-forms":32};function nh(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(d){if(vN.perm!==void 0)throw new Error("Invalid permission: "+d);i+=vN[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,c),this.P=-(1+(255^i)),this.encryptionKey=x1(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=v1(this.encryptionKey,this.padding)}function rh(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function yN(n){if(nr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[r,!!i],a},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[t]){var c=e[t][a];try{c[0].apply(n,r)}catch(d){Zt.console&&vr.error("jsPDF PubSub Error",d.message,d)}c[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function kg(n){if(!(this instanceof kg))return new kg(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function hj(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function $u(n,e,t,r,i){if(!(this instanceof $u))return new $u(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,hj.call(this,r,i)}function ah(n,e,t,r,i){if(!(this instanceof ah))return new ah(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,hj.call(this,r,i)}function jt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],c=[],d=1,h=16,f="S",p=null;nr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,a=n.compress||n.compressPdf||a,(p=n.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),d=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(h=n.floatPrecision),f=n.defaultPathOperation||"S"),c=n.filters||(a===!0?["FlateEncode"]:c),r=r||"mm",t=(""+(t||"P")).toLowerCase();var y=n.putOnlyUsedFonts||!1,N={},b={internal:{},__private__:{}};b.__private__.PubSub=yN;var j="1.3",C=b.__private__.getPdfVersion=function(){return j};b.__private__.setPdfVersion=function(A){j=A};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return R};var I=b.__private__.getPageFormat=function(A){return R[A]};i=i||"a4";var B="compat",z="advanced",H=B;function he(){this.saveGraphicsState(),ie(new Tt(Xt,0,0,-Xt,0,Ds()*Xt).toString()+" cm"),this.setFontSize(this.getFontSize()/Xt),f="n",H=z}function re(){this.restoreGraphicsState(),f="S",H=B}var V=b.__private__.combineFontStyleAndFontWeight=function(A,U){if(A=="bold"&&U=="normal"||A=="bold"&&U==400||A=="normal"&&U=="italic"||A=="bold"&&U=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return U&&(A=U==400||U==="normal"?A==="italic"?"italic":"normal":U!=700&&U!=="bold"||A!=="normal"?(U==700?"bold":U)+""+A:"bold"),A};b.advancedAPI=function(A){var U=H===B;return U&&he.call(this),typeof A!="function"||(A(this),U&&re.call(this)),this},b.compatAPI=function(A){var U=H===z;return U&&re.call(this),typeof A!="function"||(A(this),U&&he.call(this)),this},b.isAdvancedAPI=function(){return H===z};var D,k=function(A){if(H!==z)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},G=b.roundToPrecision=b.__private__.roundToPrecision=function(A,U){var oe=e||U;if(isNaN(A)||isNaN(oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(oe).replace(/0+$/,"")};D=b.hpf=b.__private__.hpf=typeof h=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return G(A,h)}:h==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return G(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return G(A,16)};var S=b.f2=b.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return G(A,2)},L=b.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return G(A,3)},F=b.scale=b.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return H===B?A*Xt:H===z?A:void 0},ae=function(A){return F((function(U){return H===B?Ds()-U:H===z?U:void 0})(A))};b.__private__.setPrecision=b.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var ve,K="00000000000000000000000000000000",ce=b.__private__.getFileId=function(){return K},me=b.__private__.setFileId=function(A){return K=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():K.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(mr=new nh(p.userPermissions,p.userPassword,p.ownerPassword,K)),K};b.setFileId=function(A){return me(A),this},b.getFileId=function(){return ce()};var Se=b.__private__.convertDateToPDFDate=function(A){var U=A.getTimezoneOffset(),oe=U<0?"+":"-",xe=Math.floor(Math.abs(U/60)),Ne=Math.abs(U%60),ze=[oe,ne(xe),"'",ne(Ne),"'"].join("");return["D:",A.getFullYear(),ne(A.getMonth()+1),ne(A.getDate()),ne(A.getHours()),ne(A.getMinutes()),ne(A.getSeconds()),ze].join("")},qe=b.__private__.convertPDFDateToDate=function(A){var U=parseInt(A.substr(2,4),10),oe=parseInt(A.substr(6,2),10)-1,xe=parseInt(A.substr(8,2),10),Ne=parseInt(A.substr(10,2),10),ze=parseInt(A.substr(12,2),10),Qe=parseInt(A.substr(14,2),10);return new Date(U,oe,xe,Ne,ze,Qe,0)},X=b.__private__.setCreationDate=function(A){var U;if(A===void 0&&(A=new Date),A instanceof Date)U=Se(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");U=A}return ve=U},q=b.__private__.getCreationDate=function(A){var U=ve;return A==="jsDate"&&(U=qe(ve)),U};b.setCreationDate=function(A){return X(A),this},b.getCreationDate=function(A){return q(A)};var J,ne=b.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},ue=b.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},pe=0,we=[],De=[],Re=0,Ue=[],Ze=[],at=!1,ot=De;b.__private__.setCustomOutputDestination=function(A){at=!0,ot=A};var ht=function(A){at||(ot=A)};b.__private__.resetCustomOutputDestination=function(){at=!1,ot=De};var ie=b.__private__.out=function(A){return A=A.toString(),Re+=A.length+1,ot.push(A),ot},rt=b.__private__.write=function(A){return ie(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},Kt=b.__private__.getArrayBuffer=function(A){for(var U=A.length,oe=new ArrayBuffer(U),xe=new Uint8Array(oe);U--;)xe[U]=A.charCodeAt(U);return oe},Te=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return Te};var Ae=n.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(A){return Ae=H===z?A/Xt:A,this};var Je,tt=b.__private__.getFontSize=b.getFontSize=function(){return H===B?Ae:Ae*Xt},it=n.R2L||!1;b.__private__.setR2L=b.setR2L=function(A){return it=A,this},b.__private__.getR2L=b.getR2L=function(){return it};var lt,zt=b.__private__.setZoomMode=function(A){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))Je=A;else if(isNaN(A)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');Je=A}else Je=parseInt(A,10)};b.__private__.getZoomMode=function(){return Je};var $t,Gt=b.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');lt=A};b.__private__.getPageMode=function(){return lt};var cn=b.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');$t=A};b.__private__.getLayoutMode=function(){return $t},b.__private__.setDisplayMode=b.setDisplayMode=function(A,U,oe){return zt(A),cn(U),Gt(oe),this};var nn={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(A){if(Object.keys(nn).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return nn[A]},b.__private__.getDocumentProperties=function(){return nn},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(A){for(var U in nn)nn.hasOwnProperty(U)&&A[U]&&(nn[U]=A[U]);return this},b.__private__.setDocumentProperty=function(A,U){if(Object.keys(nn).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return nn[A]=U};var bt,Xt,_t,yr,rn,It={},Bt={},en=[],Et={},Dn={},Ft={},qt={},Fn=null,St=0,Nt=[],un=new yN(b),wi=n.hotfixes||[],ui={},Hs={},ei=[],Tt=function A(U,oe,xe,Ne,ze,Qe){if(!(this instanceof A))return new A(U,oe,xe,Ne,ze,Qe);isNaN(U)&&(U=1),isNaN(oe)&&(oe=0),isNaN(xe)&&(xe=0),isNaN(Ne)&&(Ne=1),isNaN(ze)&&(ze=0),isNaN(Qe)&&(Qe=0),this._matrix=[U,oe,xe,Ne,ze,Qe]};Object.defineProperty(Tt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Tt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Tt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Tt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Tt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Tt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Tt.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Tt.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Tt.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Tt.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Tt.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Tt.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Tt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Tt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Tt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Tt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Tt.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(A)},Tt.prototype.multiply=function(A){var U=A.sx*this.sx+A.shy*this.shx,oe=A.sx*this.shy+A.shy*this.sy,xe=A.shx*this.sx+A.sy*this.shx,Ne=A.shx*this.shy+A.sy*this.sy,ze=A.tx*this.sx+A.ty*this.shx+this.tx,Qe=A.tx*this.shy+A.ty*this.sy+this.ty;return new Tt(U,oe,xe,Ne,ze,Qe)},Tt.prototype.decompose=function(){var A=this.sx,U=this.shy,oe=this.shx,xe=this.sy,Ne=this.tx,ze=this.ty,Qe=Math.sqrt(A*A+U*U),ft=(A/=Qe)*oe+(U/=Qe)*xe;oe-=A*ft,xe-=U*ft;var xt=Math.sqrt(oe*oe+xe*xe);return ft/=xt,A*(xe/=xt)<U*(oe/=xt)&&(A=-A,U=-U,ft=-ft,Qe=-Qe),{scale:new Tt(Qe,0,0,xt,0,0),translate:new Tt(1,0,0,1,Ne,ze),rotate:new Tt(A,U,-U,A,0,0),skew:new Tt(1,0,ft,1,0,0)}},Tt.prototype.toString=function(A){return this.join(" ")},Tt.prototype.inversed=function(){var A=this.sx,U=this.shy,oe=this.shx,xe=this.sy,Ne=this.tx,ze=this.ty,Qe=1/(A*xe-U*oe),ft=xe*Qe,xt=-U*Qe,Dt=-oe*Qe,Ct=A*Qe;return new Tt(ft,xt,Dt,Ct,-ft*Ne-Dt*ze,-xt*Ne-Ct*ze)},Tt.prototype.applyToPoint=function(A){var U=A.x*this.sx+A.y*this.shx+this.tx,oe=A.x*this.shy+A.y*this.sy+this.ty;return new fi(U,oe)},Tt.prototype.applyToRectangle=function(A){var U=this.applyToPoint(A),oe=this.applyToPoint(new fi(A.x+A.w,A.y+A.h));return new Gs(U.x,U.y,oe.x-U.x,oe.y-U.y)},Tt.prototype.clone=function(){var A=this.sx,U=this.shy,oe=this.shx,xe=this.sy,Ne=this.tx,ze=this.ty;return new Tt(A,U,oe,xe,Ne,ze)},b.Matrix=Tt;var ga=b.matrixMult=function(A,U){return U.multiply(A)},Ji=new Tt(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Ji;var Mi=function(A,U){if(!Dn[A]){var oe=(U instanceof $u?"Sh":"P")+(Object.keys(Et).length+1).toString(10);U.id=oe,Dn[A]=oe,Et[oe]=U,un.publish("addPattern",U)}};b.ShadingPattern=$u,b.TilingPattern=ah,b.addShadingPattern=function(A,U){return k("addShadingPattern()"),Mi(A,U),this},b.beginTilingPattern=function(A){k("beginTilingPattern()"),Ws(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},b.endTilingPattern=function(A,U){k("endTilingPattern()"),U.stream=Ze[J].join(`
`),Mi(A,U),un.publish("endTilingPattern",U),ei.pop().restore()};var Oi,Yn=b.__private__.newObject=function(){var A=ir();return zr(A,!0),A},ir=b.__private__.newObjectDeferred=function(){return pe++,we[pe]=function(){return Re},pe},zr=function(A,U){return U=typeof U=="boolean"&&U,we[A]=Re,U&&ie(A+" 0 obj"),A},_i=b.__private__.newAdditionalObject=function(){var A={objId:ir(),content:""};return Ue.push(A),A},di=ir(),qn=ir(),Qn=b.__private__.decodeColorString=function(A){var U=A.split(" ");if(U.length!==2||U[1]!=="g"&&U[1]!=="G")U.length!==5||U[4]!=="k"&&U[4]!=="K"||(U=[(1-U[0])*(1-U[3]),(1-U[1])*(1-U[3]),(1-U[2])*(1-U[3]),"r"]);else{var oe=parseFloat(U[0]);U=[oe,oe,oe,"r"]}for(var xe="#",Ne=0;Ne<3;Ne++)xe+=("0"+Math.floor(255*parseFloat(U[Ne])).toString(16)).slice(-2);return xe},Hr=b.__private__.encodeColorString=function(A){var U;typeof A=="string"&&(A={ch1:A});var oe=A.ch1,xe=A.ch2,Ne=A.ch3,ze=A.ch4,Qe=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof oe=="string"&&oe.charAt(0)!=="#"){var ft=new uj(oe);if(ft.ok)oe=ft.toHex();else if(!/^\d*\.?\d*$/.test(oe))throw new Error('Invalid color "'+oe+'" passed to jsPDF.encodeColorString.')}if(typeof oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(oe)&&(oe="#"+oe[1]+oe[1]+oe[2]+oe[2]+oe[3]+oe[3]),typeof oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(oe)){var xt=parseInt(oe.substr(1),16);oe=xt>>16&255,xe=xt>>8&255,Ne=255&xt}if(xe===void 0||ze===void 0&&oe===xe&&xe===Ne)U=typeof oe=="string"?oe+" "+Qe[0]:A.precision===2?S(oe/255)+" "+Qe[0]:L(oe/255)+" "+Qe[0];else if(ze===void 0||nr(ze)==="object"){if(ze&&!isNaN(ze.a)&&ze.a===0)return["1.","1.","1.",Qe[1]].join(" ");U=typeof oe=="string"?[oe,xe,Ne,Qe[1]].join(" "):A.precision===2?[S(oe/255),S(xe/255),S(Ne/255),Qe[1]].join(" "):[L(oe/255),L(xe/255),L(Ne/255),Qe[1]].join(" ")}else U=typeof oe=="string"?[oe,xe,Ne,ze,Qe[2]].join(" "):A.precision===2?[S(oe),S(xe),S(Ne),S(ze),Qe[2]].join(" "):[L(oe),L(xe),L(Ne),L(ze),Qe[2]].join(" ");return U},Fi=b.__private__.getFilters=function(){return c},gs=b.__private__.putStream=function(A){var U=(A=A||{}).data||"",oe=A.filters||Fi(),xe=A.alreadyAppliedFilters||[],Ne=A.addLength1||!1,ze=U.length,Qe=A.objectId,ft=function(T){return T};if(p!==null&&Qe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(ft=mr.encryptor(Qe,0));var xt={};oe===!0&&(oe=["FlateEncode"]);var Dt=A.additionalKeyValues||[],Ct=(xt=jt.API.processDataByFilters!==void 0?jt.API.processDataByFilters(U,oe):{data:U,reverseChain:[]}).reverseChain+(Array.isArray(xe)?xe.join(" "):xe.toString());if(xt.data.length!==0&&(Dt.push({key:"Length",value:xt.data.length}),Ne===!0&&Dt.push({key:"Length1",value:ze})),Ct.length!=0)if(Ct.split("/").length-1==1)Dt.push({key:"Filter",value:Ct});else{Dt.push({key:"Filter",value:"["+Ct+"]"});for(var pn=0;pn<Dt.length;pn+=1)if(Dt[pn].key==="DecodeParms"){for(var sr=[],Kn=0;Kn<xt.reverseChain.split("/").length-1;Kn+=1)sr.push("null");sr.push(Dt[pn].value),Dt[pn].value="["+sr.join(" ")+"]"}}ie("<<");for(var x=0;x<Dt.length;x++)ie("/"+Dt[x].key+" "+Dt[x].value);ie(">>"),xt.data.length!==0&&(ie("stream"),ie(ft(xt.data)),ie("endstream"))},Fa=b.__private__.putPage=function(A){var U=A.number,oe=A.data,xe=A.objId,Ne=A.contentsObjId;zr(xe,!0),ie("<</Type /Page"),ie("/Parent "+A.rootDictionaryObjId+" 0 R"),ie("/Resources "+A.resourceDictionaryObjId+" 0 R"),ie("/MediaBox ["+parseFloat(D(A.mediaBox.bottomLeftX))+" "+parseFloat(D(A.mediaBox.bottomLeftY))+" "+D(A.mediaBox.topRightX)+" "+D(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&ie("/CropBox ["+D(A.cropBox.bottomLeftX)+" "+D(A.cropBox.bottomLeftY)+" "+D(A.cropBox.topRightX)+" "+D(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&ie("/BleedBox ["+D(A.bleedBox.bottomLeftX)+" "+D(A.bleedBox.bottomLeftY)+" "+D(A.bleedBox.topRightX)+" "+D(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&ie("/TrimBox ["+D(A.trimBox.bottomLeftX)+" "+D(A.trimBox.bottomLeftY)+" "+D(A.trimBox.topRightX)+" "+D(A.trimBox.topRightY)+"]"),A.artBox!==null&&ie("/ArtBox ["+D(A.artBox.bottomLeftX)+" "+D(A.artBox.bottomLeftY)+" "+D(A.artBox.topRightX)+" "+D(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&ie("/UserUnit "+A.userUnit),un.publish("putPage",{objId:xe,pageContext:Nt[U],pageNumber:U,page:oe}),ie("/Contents "+Ne+" 0 R"),ie(">>"),ie("endobj");var ze=oe.join(`
`);return H===z&&(ze+=`
Q`),zr(Ne,!0),gs({data:ze,filters:Fi(),objectId:Ne}),ie("endobj"),xe},Rs=b.__private__.putPages=function(){var A,U,oe=[];for(A=1;A<=St;A++)Nt[A].objId=ir(),Nt[A].contentsObjId=ir();for(A=1;A<=St;A++)oe.push(Fa({number:A,data:Ze[A],objId:Nt[A].objId,contentsObjId:Nt[A].contentsObjId,mediaBox:Nt[A].mediaBox,cropBox:Nt[A].cropBox,bleedBox:Nt[A].bleedBox,trimBox:Nt[A].trimBox,artBox:Nt[A].artBox,userUnit:Nt[A].userUnit,rootDictionaryObjId:di,resourceDictionaryObjId:qn}));zr(di,!0),ie("<</Type /Pages");var xe="/Kids [";for(U=0;U<St;U++)xe+=oe[U]+" 0 R ";ie(xe+"]"),ie("/Count "+St),ie(">>"),ie("endobj"),un.publish("postPutPages")},qi=function(A){un.publish("putFont",{font:A,out:ie,newObject:Yn,putStream:gs}),A.isAlreadyPutted!==!0&&(A.objectNumber=Yn(),ie("<<"),ie("/Type /Font"),ie("/BaseFont /"+rh(A.postScriptName)),ie("/Subtype /Type1"),typeof A.encoding=="string"&&ie("/Encoding /"+A.encoding),ie("/FirstChar 32"),ie("/LastChar 255"),ie(">>"),ie("endobj"))},xa=function(A){A.objectNumber=Yn();var U=[];U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Form"}),U.push({key:"BBox",value:"["+[D(A.x),D(A.y),D(A.x+A.width),D(A.y+A.height)].join(" ")+"]"}),U.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var oe=A.pages[1].join(`
`);gs({data:oe,additionalKeyValues:U,objectId:A.objectNumber}),ie("endobj")},Zi=function(A,U){U||(U=21);var oe=Yn(),xe=(function(Qe,ft){var xt,Dt=[],Ct=1/(ft-1);for(xt=0;xt<1;xt+=Ct)Dt.push(xt);if(Dt.push(1),Qe[0].offset!=0){var pn={offset:0,color:Qe[0].color};Qe.unshift(pn)}if(Qe[Qe.length-1].offset!=1){var sr={offset:1,color:Qe[Qe.length-1].color};Qe.push(sr)}for(var Kn="",x=0,T=0;T<Dt.length;T++){for(xt=Dt[T];xt>Qe[x+1].offset;)x++;var O=Qe[x].offset,ee=(xt-O)/(Qe[x+1].offset-O),Ee=Qe[x].color,Me=Qe[x+1].color;Kn+=ue(Math.round((1-ee)*Ee[0]+ee*Me[0]).toString(16))+ue(Math.round((1-ee)*Ee[1]+ee*Me[1]).toString(16))+ue(Math.round((1-ee)*Ee[2]+ee*Me[2]).toString(16))}return Kn.trim()})(A.colors,U),Ne=[];Ne.push({key:"FunctionType",value:"0"}),Ne.push({key:"Domain",value:"[0.0 1.0]"}),Ne.push({key:"Size",value:"["+U+"]"}),Ne.push({key:"BitsPerSample",value:"8"}),Ne.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ne.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gs({data:xe,additionalKeyValues:Ne,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:oe}),ie("endobj"),A.objectNumber=Yn(),ie("<< /ShadingType "+A.type),ie("/ColorSpace /DeviceRGB");var ze="/Coords ["+D(parseFloat(A.coords[0]))+" "+D(parseFloat(A.coords[1]))+" ";A.type===2?ze+=D(parseFloat(A.coords[2]))+" "+D(parseFloat(A.coords[3])):ze+=D(parseFloat(A.coords[2]))+" "+D(parseFloat(A.coords[3]))+" "+D(parseFloat(A.coords[4]))+" "+D(parseFloat(A.coords[5])),ie(ze+="]"),A.matrix&&ie("/Matrix ["+A.matrix.toString()+"]"),ie("/Function "+oe+" 0 R"),ie("/Extend [true true]"),ie(">>"),ie("endobj")},Ni=function(A,U){var oe=ir(),xe=Yn();U.push({resourcesOid:oe,objectOid:xe}),A.objectNumber=xe;var Ne=[];Ne.push({key:"Type",value:"/Pattern"}),Ne.push({key:"PatternType",value:"1"}),Ne.push({key:"PaintType",value:"1"}),Ne.push({key:"TilingType",value:"1"}),Ne.push({key:"BBox",value:"["+A.boundingBox.map(D).join(" ")+"]"}),Ne.push({key:"XStep",value:D(A.xStep)}),Ne.push({key:"YStep",value:D(A.yStep)}),Ne.push({key:"Resources",value:oe+" 0 R"}),A.matrix&&Ne.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),gs({data:A.stream,additionalKeyValues:Ne,objectId:A.objectNumber}),ie("endobj")},es=function(A){for(var U in A.objectNumber=Yn(),ie("<<"),A)switch(U){case"opacity":ie("/ca "+S(A[U]));break;case"stroke-opacity":ie("/CA "+S(A[U]))}ie(">>"),ie("endobj")},xs=function(A){zr(A.resourcesOid,!0),ie("<<"),ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var U in ie("/Font <<"),It)It.hasOwnProperty(U)&&(y===!1||y===!0&&N.hasOwnProperty(U))&&ie("/"+U+" "+It[U].objectNumber+" 0 R");ie(">>")})(),(function(){if(Object.keys(Et).length>0){for(var U in ie("/Shading <<"),Et)Et.hasOwnProperty(U)&&Et[U]instanceof $u&&Et[U].objectNumber>=0&&ie("/"+U+" "+Et[U].objectNumber+" 0 R");un.publish("putShadingPatternDict"),ie(">>")}})(),(function(U){if(Object.keys(Et).length>0){for(var oe in ie("/Pattern <<"),Et)Et.hasOwnProperty(oe)&&Et[oe]instanceof b.TilingPattern&&Et[oe].objectNumber>=0&&Et[oe].objectNumber<U&&ie("/"+oe+" "+Et[oe].objectNumber+" 0 R");un.publish("putTilingPatternDict"),ie(">>")}})(A.objectOid),(function(){if(Object.keys(Ft).length>0){var U;for(U in ie("/ExtGState <<"),Ft)Ft.hasOwnProperty(U)&&Ft[U].objectNumber>=0&&ie("/"+U+" "+Ft[U].objectNumber+" 0 R");un.publish("putGStateDict"),ie(">>")}})(),(function(){for(var U in ie("/XObject <<"),ui)ui.hasOwnProperty(U)&&ui[U].objectNumber>=0&&ie("/"+U+" "+ui[U].objectNumber+" 0 R");un.publish("putXobjectDict"),ie(">>")})(),ie(">>"),ie("endobj")},br=function(A){Bt[A.fontName]=Bt[A.fontName]||{},Bt[A.fontName][A.fontStyle]=A.id},Uo=function(A,U,oe,xe,Ne){var ze={id:"F"+(Object.keys(It).length+1).toString(10),postScriptName:A,fontName:U,fontStyle:oe,encoding:xe,isStandardFont:Ne||!1,metadata:{}};return un.publish("addFont",{font:ze,instance:this}),It[ze.id]=ze,br(ze),ze.id},Vi=b.__private__.pdfEscape=b.pdfEscape=function(A,U){return(function(oe,xe){var Ne,ze,Qe,ft,xt,Dt,Ct,pn,sr;if(Qe=(xe=xe||{}).sourceEncoding||"Unicode",xt=xe.outputEncoding,(xe.autoencode||xt)&&It[bt].metadata&&It[bt].metadata[Qe]&&It[bt].metadata[Qe].encoding&&(ft=It[bt].metadata[Qe].encoding,!xt&&It[bt].encoding&&(xt=It[bt].encoding),!xt&&ft.codePages&&(xt=ft.codePages[0]),typeof xt=="string"&&(xt=ft[xt]),xt)){for(Ct=!1,Dt=[],Ne=0,ze=oe.length;Ne<ze;Ne++)(pn=xt[oe.charCodeAt(Ne)])?Dt.push(String.fromCharCode(pn)):Dt.push(oe[Ne]),Dt[Ne].charCodeAt(0)>>8&&(Ct=!0);oe=Dt.join("")}for(Ne=oe.length;Ct===void 0&&Ne!==0;)oe.charCodeAt(Ne-1)>>8&&(Ct=!0),Ne--;if(!Ct)return oe;for(Dt=xe.noBOM?[]:[254,255],Ne=0,ze=oe.length;Ne<ze;Ne++){if((sr=(pn=oe.charCodeAt(Ne))>>8)>>8)throw new Error("Character at position "+Ne+" of string '"+oe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Dt.push(sr),Dt.push(pn-(sr<<8))}return String.fromCharCode.apply(void 0,Dt)})(A,U).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vs=b.__private__.beginPage=function(A){Ze[++St]=[],Nt[St]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},zo(St),ht(Ze[J])},Ls=function(A,U){var oe,xe,Ne;switch(t=U||t,typeof A=="string"&&(oe=I(A.toLowerCase()),Array.isArray(oe)&&(xe=oe[0],Ne=oe[1])),Array.isArray(A)&&(xe=A[0]*Xt,Ne=A[1]*Xt),isNaN(xe)&&(xe=i[0],Ne=i[1]),(xe>14400||Ne>14400)&&(vr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),xe=Math.min(14400,xe),Ne=Math.min(14400,Ne)),i=[xe,Ne],t.substr(0,1)){case"l":Ne>xe&&(i=[Ne,xe]);break;case"p":xe>Ne&&(i=[Ne,xe])}vs(i),Rt(Ui),ie(ns),is!==0&&ie(is+" J"),Mr!==0&&ie(Mr+" j"),un.publish("addPage",{pageNumber:St})},ho=function(A){A>0&&A<=St&&(Ze.splice(A,1),Nt.splice(A,1),St--,J>St&&(J=St),this.setPage(J))},zo=function(A){A>0&&A<=St&&(J=A)},Ho=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Ze.length-1},El=function(A,U,oe){var xe,Ne=void 0;return oe=oe||{},A=A!==void 0?A:It[bt].fontName,U=U!==void 0?U:It[bt].fontStyle,xe=A.toLowerCase(),Bt[xe]!==void 0&&Bt[xe][U]!==void 0?Ne=Bt[xe][U]:Bt[A]!==void 0&&Bt[A][U]!==void 0?Ne=Bt[A][U]:oe.disableWarning===!1&&vr.warn("Unable to look up font label for font '"+A+"', '"+U+"'. Refer to getFontList() for available fonts."),Ne||oe.noFallback||(Ne=Bt.times[U])==null&&(Ne=Bt.times.normal),Ne},ts=b.__private__.putInfo=function(){var A=Yn(),U=function(xe){return xe};for(var oe in p!==null&&(U=mr.encryptor(A,0)),ie("<<"),ie("/Producer ("+Vi(U("jsPDF "+jt.version))+")"),nn)nn.hasOwnProperty(oe)&&nn[oe]&&ie("/"+oe.substr(0,1).toUpperCase()+oe.substr(1)+" ("+Vi(U(nn[oe]))+")");ie("/CreationDate ("+Vi(U(ve))+")"),ie(">>"),ie("endobj")},hi=b.__private__.putCatalog=function(A){var U=(A=A||{}).rootDictionaryObjId||di;switch(Yn(),ie("<<"),ie("/Type /Catalog"),ie("/Pages "+U+" 0 R"),Je||(Je="fullwidth"),Je){case"fullwidth":ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ie("/OpenAction [3 0 R /Fit]");break;case"original":ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var oe=""+Je;oe.substr(oe.length-1)==="%"&&(Je=parseInt(Je)/100),typeof Je=="number"&&ie("/OpenAction [3 0 R /XYZ null null "+S(Je)+"]")}switch($t||($t="continuous"),$t){case"continuous":ie("/PageLayout /OneColumn");break;case"single":ie("/PageLayout /SinglePage");break;case"two":case"twoleft":ie("/PageLayout /TwoColumnLeft");break;case"tworight":ie("/PageLayout /TwoColumnRight")}lt&&ie("/PageMode /"+lt),un.publish("putCatalog"),ie(">>"),ie("endobj")},jr=b.__private__.putTrailer=function(){ie("trailer"),ie("<<"),ie("/Size "+(pe+1)),ie("/Root "+pe+" 0 R"),ie("/Info "+(pe-1)+" 0 R"),p!==null&&ie("/Encrypt "+mr.oid+" 0 R"),ie("/ID [ <"+K+"> <"+K+"> ]"),ie(">>")},mn=b.__private__.putHeader=function(){ie("%PDF-"+j),ie("%")},va=b.__private__.putXRef=function(){var A="0000000000";ie("xref"),ie("0 "+(pe+1)),ie("0000000000 65535 f ");for(var U=1;U<=pe;U++)typeof we[U]=="function"?ie((A+we[U]()).slice(-10)+" 00000 n "):we[U]!==void 0?ie((A+we[U]).slice(-10)+" 00000 n "):ie("0000000000 00000 n ")},ys=b.__private__.buildDocument=function(){var A;pe=0,Re=0,De=[],we=[],Ue=[],di=ir(),qn=ir(),ht(De),un.publish("buildDocument"),mn(),Rs(),(function(){un.publish("putAdditionalObjects");for(var oe=0;oe<Ue.length;oe++){var xe=Ue[oe];zr(xe.objId,!0),ie(xe.content),ie("endobj")}un.publish("postPutAdditionalObjects")})(),A=[],(function(){for(var oe in It)It.hasOwnProperty(oe)&&(y===!1||y===!0&&N.hasOwnProperty(oe))&&qi(It[oe])})(),(function(){var oe;for(oe in Ft)Ft.hasOwnProperty(oe)&&es(Ft[oe])})(),(function(){for(var oe in ui)ui.hasOwnProperty(oe)&&xa(ui[oe])})(),(function(oe){var xe;for(xe in Et)Et.hasOwnProperty(xe)&&(Et[xe]instanceof $u?Zi(Et[xe]):Et[xe]instanceof ah&&Ni(Et[xe],oe))})(A),un.publish("putResources"),A.forEach(xs),xs({resourcesOid:qn,objectOid:Number.MAX_SAFE_INTEGER}),un.publish("postPutResources"),p!==null&&(mr.oid=Yn(),ie("<<"),ie("/Filter /Standard"),ie("/V "+mr.v),ie("/R "+mr.r),ie("/U <"+mr.toHexString(mr.U)+">"),ie("/O <"+mr.toHexString(mr.O)+">"),ie("/P "+mr.P),ie(">>"),ie("endobj")),ts(),hi();var U=Re;return va(),jr(),ie("startxref"),ie(""+U),ie("%%EOF"),ht(Ze[J]),De.join(`
`)},bn=b.__private__.getBlob=function(A){return new Blob([Kt(A)],{type:"application/pdf"})},qa=b.output=b.__private__.output=(Oi=function(A,U){switch(typeof(U=U||{})=="string"?U={filename:U}:U.filename=U.filename||"generated.pdf",A){case void 0:return ys();case"save":b.save(U.filename);break;case"arraybuffer":return Kt(ys());case"blob":return bn(ys());case"bloburi":case"bloburl":if(Zt.URL!==void 0&&typeof Zt.URL.createObjectURL=="function")return Zt.URL&&Zt.URL.createObjectURL(bn(ys()))||void 0;vr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var oe="",xe=ys();try{oe=gN(xe)}catch{oe=gN(unescape(encodeURIComponent(xe)))}return"data:application/pdf;filename="+U.filename+";base64,"+oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Zt)==="[object Window]"){var Ne="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ze=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';U.pdfObjectUrl&&(Ne=U.pdfObjectUrl,ze="");var Qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ne+'"'+ze+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(U)+");<\/script></body></html>",ft=Zt.open();return ft!==null&&ft.document.write(Qe),ft}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Zt)==="[object Window]"){var xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(U.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+U.filename+'" width="500px" height="400px" /></body></html>',Dt=Zt.open();if(Dt!==null){Dt.document.write(xt);var Ct=this;Dt.document.documentElement.querySelector("#pdfViewer").onload=function(){Dt.document.title=U.filename,Dt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ct.output("bloburl"))}}return Dt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Zt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",U)+'"></iframe></body></html>',sr=Zt.open();if(sr!==null&&(sr.document.write(pn),sr.document.title=U.filename),sr||typeof safari>"u")return sr;break;case"datauri":case"dataurl":return Zt.document.location.href=this.output("datauristring",U);default:return null}},Oi.foo=function(){try{return Oi.apply(this,arguments)}catch(oe){var A=oe.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var U="Error in function "+A.split(`
`)[0].split("<")[0]+": "+oe.message;if(!Zt.console)throw new Error(U);Zt.console.error(U,oe),Zt.alert&&alert(U)}},Oi.foo.bar=Oi,Oi.foo),Dr=function(A){return Array.isArray(wi)===!0&&wi.indexOf(A)>-1};switch(r){case"pt":Xt=1;break;case"mm":Xt=72/25.4;break;case"cm":Xt=72/2.54;break;case"in":Xt=72;break;case"px":Xt=Dr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xt=12;break;case"ex":Xt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Xt=r}var mr=null;X(),me();var Er=b.__private__.getPageInfo=b.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[A].objId,pageNumber:A,pageContext:Nt[A]}},fo=b.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var U in Nt)if(Nt[U].objId===A)break;return Er(U)},yc=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:Nt[J].objId,pageNumber:J,pageContext:Nt[J]}};b.addPage=function(){return Ls.apply(this,arguments),this},b.setPage=function(){return zo.apply(this,arguments),ht.call(this,Ze[J]),this},b.insertPage=function(A){return this.addPage(),this.movePage(J,A),this},b.movePage=function(A,U){var oe,xe;if(A>U){oe=Ze[A],xe=Nt[A];for(var Ne=A;Ne>U;Ne--)Ze[Ne]=Ze[Ne-1],Nt[Ne]=Nt[Ne-1];Ze[U]=oe,Nt[U]=xe,this.setPage(U)}else if(A<U){oe=Ze[A],xe=Nt[A];for(var ze=A;ze<U;ze++)Ze[ze]=Ze[ze+1],Nt[ze]=Nt[ze+1];Ze[U]=oe,Nt[U]=xe,this.setPage(U)}return this},b.deletePage=function(){return ho.apply(this,arguments),this},b.__private__.text=b.text=function(A,U,oe,xe,Ne){var ze,Qe,ft,xt,Dt,Ct,pn,sr,Kn,x=(xe=xe||{}).scope||this;if(typeof A=="number"&&typeof U=="number"&&(typeof oe=="string"||Array.isArray(oe))){var T=oe;oe=U,U=A,A=T}if(arguments[3]instanceof Tt==0?(ft=arguments[4],xt=arguments[5],nr(pn=arguments[3])==="object"&&pn!==null||(typeof ft=="string"&&(xt=ft,ft=null),typeof pn=="string"&&(xt=pn,pn=null),typeof pn=="number"&&(ft=pn,pn=null),xe={flags:pn,angle:ft,align:xt})):(k("The transform parameter of text() with a Matrix value"),Kn=Ne),isNaN(U)||isNaN(oe)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return x;var O,ee="",Ee=typeof xe.lineHeightFactor=="number"?xe.lineHeightFactor:wa,Me=x.internal.scaleFactor;function nt(Mn){return Mn=Mn.split("	").join(Array(xe.TabLen||9).join(" ")),Vi(Mn,pn)}function Qt(Mn){for(var jn,or=Mn.concat(),Fr=[],Xa=or.length;Xa--;)typeof(jn=or.shift())=="string"?Fr.push(jn):Array.isArray(Mn)&&(jn.length===1||jn[1]===void 0&&jn[2]===void 0)?Fr.push(jn[0]):Fr.push([jn[0],jn[1],jn[2]]);return Fr}function ar(Mn,jn){var or;if(typeof Mn=="string")or=jn(Mn)[0];else if(Array.isArray(Mn)){for(var Fr,Xa,Sa=Mn.concat(),Dl=[],Tu=Sa.length;Tu--;)typeof(Fr=Sa.shift())=="string"?Dl.push(jn(Fr)[0]):Array.isArray(Fr)&&typeof Fr[0]=="string"&&(Xa=jn(Fr[0],Fr[1],Fr[2]),Dl.push([Xa[0],Xa[1],Xa[2]]));or=Dl}return or}var hn=!1,Bn=!0;if(typeof A=="string")hn=!0;else if(Array.isArray(A)){var mi=A.concat();Qe=[];for(var Si,Xn=mi.length;Xn--;)(typeof(Si=mi.shift())!="string"||Array.isArray(Si)&&typeof Si[0]!="string")&&(Bn=!1);hn=Bn}if(hn===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var ji=Ae/x.internal.scaleFactor,Ms=ji*(Ee-1);switch(xe.baseline){case"bottom":oe-=Ms;break;case"top":oe+=ji-Ms;break;case"hanging":oe+=ji-2*Ms;break;case"middle":oe+=ji/2-Ms}if((Ct=xe.maxWidth||0)>0&&(typeof A=="string"?A=x.splitTextToSize(A,Ct):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(Mn,jn){return Mn.concat(x.splitTextToSize(jn,Ct))},[]))),ze={text:A,x:U,y:oe,options:xe,mutex:{pdfEscape:Vi,activeFontKey:bt,fonts:It,activeFontSize:Ae}},un.publish("preProcessText",ze),A=ze.text,ft=(xe=ze.options).angle,Kn instanceof Tt==0&&ft&&typeof ft=="number"){ft*=Math.PI/180,xe.rotationDirection===0&&(ft=-ft),H===z&&(ft=-ft);var Ha=Math.cos(ft),$a=Math.sin(ft);Kn=new Tt(Ha,$a,-$a,Ha,0,0)}else ft&&ft instanceof Tt&&(Kn=ft);H!==z||Kn||(Kn=Ji),(Dt=xe.charSpace||rs)!==void 0&&(ee+=D(F(Dt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(sr=xe.horizontalScale)!==void 0&&(ee+=D(100*sr)+` Tz
`),xe.lang;var as=-1,vo=xe.renderingMode!==void 0?xe.renderingMode:xe.stroke,bc=x.internal.getCurrentPageInfo().pageContext;switch(vo){case 0:case!1:case"fill":as=0;break;case 1:case!0:case"stroke":as=1;break;case 2:case"fillThenStroke":as=2;break;case 3:case"invisible":as=3;break;case 4:case"fillAndAddForClipping":as=4;break;case 5:case"strokeAndAddPathForClipping":as=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":as=6;break;case 7:case"addToPathForClipping":as=7}var ju=bc.usedRenderingMode!==void 0?bc.usedRenderingMode:-1;as!==-1?ee+=as+` Tr
`:ju!==-1&&(ee+=`0 Tr
`),as!==-1&&(bc.usedRenderingMode=as),xt=xe.align||"left";var Os,Na=Ae*Ee,yo=x.internal.pageSize.getWidth(),Eu=It[bt];Dt=xe.charSpace||rs,Ct=xe.maxWidth||0,pn=Object.assign({autoencode:!0,noBOM:!0},xe.flags);var Aa=[],Qo=function(Mn){return x.getStringUnitWidth(Mn,{font:Eu,charSpace:Dt,fontSize:Ae,doKerning:!1})*Ae/Me};if(Object.prototype.toString.call(A)==="[object Array]"){var ws;Qe=Qt(A),xt!=="left"&&(Os=Qe.map(Qo));var os,Ga=0;if(xt==="right"){U-=Os[0],A=[],Xn=Qe.length;for(var Wa=0;Wa<Xn;Wa++)Wa===0?(os=ni(U),ws=$r(oe)):(os=F(Ga-Os[Wa]),ws=-Na),A.push([Qe[Wa],os,ws]),Ga=Os[Wa]}else if(xt==="center"){U-=Os[0]/2,A=[],Xn=Qe.length;for(var bo=0;bo<Xn;bo++)bo===0?(os=ni(U),ws=$r(oe)):(os=F((Ga-Os[bo])/2),ws=-Na),A.push([Qe[bo],os,ws]),Ga=Os[bo]}else if(xt==="left"){A=[],Xn=Qe.length;for(var wc=0;wc<Xn;wc++)A.push(Qe[wc])}else if(xt==="justify"&&Eu.encoding==="Identity-H"){A=[],Xn=Qe.length,Ct=Ct!==0?Ct:yo;for(var _c=0,Or=0;Or<Xn;Or++)if(ws=Or===0?$r(oe):-Na,os=Or===0?ni(U):_c,Or<Xn-1){var fd=F((Ct-Os[Or])/(Qe[Or].split(" ").length-1)),Ya=Qe[Or].split(" ");A.push([Ya[0]+" ",os,ws]),_c=0;for(var Ka=1;Ka<Ya.length;Ka++){var Ei=(Qo(Ya[Ka-1]+" "+Ya[Ka])-Qo(Ya[Ka]))*Me+fd;Ka==Ya.length-1?A.push([Ya[Ka],Ei,0]):A.push([Ya[Ka]+" ",Ei,0]),_c-=Ei}}else A.push([Qe[Or],os,ws]);A.push(["",_c,0])}else{if(xt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],Xn=Qe.length,Ct=Ct!==0?Ct:yo,Or=0;Or<Xn;Or++){ws=Or===0?$r(oe):-Na,os=Or===0?ni(U):0;var wo=Qe[Or].split(" ").length-1,Nc=wo>0?(Ct-Os[Or])/wo:0;Or<Xn-1?Aa.push(D(F(Nc))):Aa.push(0),A.push([Qe[Or],os,ws])}}}(typeof xe.R2L=="boolean"?xe.R2L:it)===!0&&(A=ar(A,function(Mn,jn,or){return[Mn.split("").reverse().join(""),jn,or]})),ze={text:A,x:U,y:oe,options:xe,mutex:{pdfEscape:Vi,activeFontKey:bt,fonts:It,activeFontSize:Ae}},un.publish("postProcessText",ze),A=ze.text,O=ze.mutex.isHex||!1;var Ac=It[bt].encoding;Ac!=="WinAnsiEncoding"&&Ac!=="StandardEncoding"||(A=ar(A,function(Mn,jn,or){return[nt(Mn),jn,or]})),Qe=Qt(A),A=[];for(var _o,No,Qa,Pl=Array.isArray(Qe[0])?1:0,Fs="",Ao=function(Mn,jn,or){var Fr="";return or instanceof Tt?(or=typeof xe.angle=="number"?ga(or,new Tt(1,0,0,1,Mn,jn)):ga(new Tt(1,0,0,1,Mn,jn),or),H===z&&(or=ga(new Tt(1,0,0,-1,0,0),or)),Fr=or.join(" ")+` Tm
`):Fr=D(Mn)+" "+D(jn)+` Td
`,Fr},zi=0;zi<Qe.length;zi++){switch(Fs="",Pl){case 1:Qa=(O?"<":"(")+Qe[zi][0]+(O?">":")"),_o=parseFloat(Qe[zi][1]),No=parseFloat(Qe[zi][2]);break;case 0:Qa=(O?"<":"(")+Qe[zi]+(O?">":")"),_o=ni(U),No=$r(oe)}Aa!==void 0&&Aa[zi]!==void 0&&(Fs=Aa[zi]+` Tw
`),zi===0?A.push(Fs+Ao(_o,No,Kn)+Qa):Pl===0?A.push(Fs+Qa):Pl===1&&A.push(Fs+Ao(_o,No,Kn)+Qa)}A=Pl===0?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var Qs=`BT
/`;return Qs+=bt+" "+Ae+` Tf
`,Qs+=D(Ae*Ee)+` TL
`,Qs+=Ps+`
`,Qs+=ee,Qs+=A,ie(Qs+="ET"),N[bt]=!0,x};var Tl=b.__private__.clip=b.clip=function(A){return ie(A==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return Tl("evenodd")},b.__private__.discardPath=b.discardPath=function(){return ie("n"),this};var Ai=b.__private__.isValidStyle=function(A){var U=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(U=!0),U};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(A){return Ai(A)&&(f=A),this};var Cl=b.__private__.getStyle=b.getStyle=function(A){var U=f;switch(A){case"D":case"S":U="S";break;case"F":U="f";break;case"FD":case"DF":U="B";break;case"f":case"f*":case"B":case"B*":U=A}return U},ya=b.close=function(){return ie("h"),this};b.stroke=function(){return ie("S"),this},b.fill=function(A){return ti("f",A),this},b.fillEvenOdd=function(A){return ti("f*",A),this},b.fillStroke=function(A){return ti("B",A),this},b.fillStrokeEvenOdd=function(A){return ti("B*",A),this};var ti=function(A,U){nr(U)==="object"?Rl(U,A):ie(A)},Va=function(A){A===null||H===z&&A===void 0||(A=Cl(A),ie(A))};function Il(A,U,oe,xe,Ne){var ze=new ah(U||this.boundingBox,oe||this.xStep,xe||this.yStep,this.gState,Ne||this.matrix);ze.stream=this.stream;var Qe=A+"$$"+this.cloneIndex+++"$$";return Mi(Qe,ze),ze}var Rl=function(A,U){var oe=Dn[A.key],xe=Et[oe];if(xe instanceof $u)ie("q"),ie($o(U)),xe.gState&&b.setGState(xe.gState),ie(A.matrix.toString()+" cm"),ie("/"+oe+" sh"),ie("Q");else if(xe instanceof ah){var Ne=new Tt(1,0,0,-1,0,Ds());A.matrix&&(Ne=Ne.multiply(A.matrix||Ji),oe=Il.call(xe,A.key,A.boundingBox,A.xStep,A.yStep,Ne).id),ie("q"),ie("/Pattern cs"),ie("/"+oe+" scn"),xe.gState&&b.setGState(xe.gState),ie(U),ie("Q")}},$o=function(A){switch(A){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Go=b.moveTo=function(A,U){return ie(D(F(A))+" "+D(ae(U))+" m"),this},ba=b.lineTo=function(A,U){return ie(D(F(A))+" "+D(ae(U))+" l"),this},Bi=b.curveTo=function(A,U,oe,xe,Ne,ze){return ie([D(F(A)),D(ae(U)),D(F(oe)),D(ae(xe)),D(F(Ne)),D(ae(ze)),"c"].join(" ")),this};b.__private__.line=b.line=function(A,U,oe,xe,Ne){if(isNaN(A)||isNaN(U)||isNaN(oe)||isNaN(xe)||!Ai(Ne))throw new Error("Invalid arguments passed to jsPDF.line");return H===B?this.lines([[oe-A,xe-U]],A,U,[1,1],Ne||"S"):this.lines([[oe-A,xe-U]],A,U,[1,1]).stroke()},b.__private__.lines=b.lines=function(A,U,oe,xe,Ne,ze){var Qe,ft,xt,Dt,Ct,pn,sr,Kn,x,T,O,ee;if(typeof A=="number"&&(ee=oe,oe=U,U=A,A=ee),xe=xe||[1,1],ze=ze||!1,isNaN(U)||isNaN(oe)||!Array.isArray(A)||!Array.isArray(xe)||!Ai(Ne)||typeof ze!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Go(U,oe),Qe=xe[0],ft=xe[1],Dt=A.length,T=U,O=oe,xt=0;xt<Dt;xt++)(Ct=A[xt]).length===2?(T=Ct[0]*Qe+T,O=Ct[1]*ft+O,ba(T,O)):(pn=Ct[0]*Qe+T,sr=Ct[1]*ft+O,Kn=Ct[2]*Qe+T,x=Ct[3]*ft+O,T=Ct[4]*Qe+T,O=Ct[5]*ft+O,Bi(pn,sr,Kn,x,T,O));return ze&&ya(),Va(Ne),this},b.path=function(A){for(var U=0;U<A.length;U++){var oe=A[U],xe=oe.c;switch(oe.op){case"m":Go(xe[0],xe[1]);break;case"l":ba(xe[0],xe[1]);break;case"c":Bi.apply(this,xe);break;case"h":ya()}}return this},b.__private__.rect=b.rect=function(A,U,oe,xe,Ne){if(isNaN(A)||isNaN(U)||isNaN(oe)||isNaN(xe)||!Ai(Ne))throw new Error("Invalid arguments passed to jsPDF.rect");return H===B&&(xe=-xe),ie([D(F(A)),D(ae(U)),D(F(oe)),D(F(xe)),"re"].join(" ")),Va(Ne),this},b.__private__.triangle=b.triangle=function(A,U,oe,xe,Ne,ze,Qe){if(isNaN(A)||isNaN(U)||isNaN(oe)||isNaN(xe)||isNaN(Ne)||isNaN(ze)||!Ai(Qe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[oe-A,xe-U],[Ne-oe,ze-xe],[A-Ne,U-ze]],A,U,[1,1],Qe,!0),this},b.__private__.roundedRect=b.roundedRect=function(A,U,oe,xe,Ne,ze,Qe){if(isNaN(A)||isNaN(U)||isNaN(oe)||isNaN(xe)||isNaN(Ne)||isNaN(ze)||!Ai(Qe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ft=4/3*(Math.SQRT2-1);return Ne=Math.min(Ne,.5*oe),ze=Math.min(ze,.5*xe),this.lines([[oe-2*Ne,0],[Ne*ft,0,Ne,ze-ze*ft,Ne,ze],[0,xe-2*ze],[0,ze*ft,-Ne*ft,ze,-Ne,ze],[2*Ne-oe,0],[-Ne*ft,0,-Ne,-ze*ft,-Ne,-ze],[0,2*ze-xe],[0,-ze*ft,Ne*ft,-ze,Ne,-ze]],A+Ne,U,[1,1],Qe,!0),this},b.__private__.ellipse=b.ellipse=function(A,U,oe,xe,Ne){if(isNaN(A)||isNaN(U)||isNaN(oe)||isNaN(xe)||!Ai(Ne))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ze=4/3*(Math.SQRT2-1)*oe,Qe=4/3*(Math.SQRT2-1)*xe;return Go(A+oe,U),Bi(A+oe,U-Qe,A+ze,U-xe,A,U-xe),Bi(A-ze,U-xe,A-oe,U-Qe,A-oe,U),Bi(A-oe,U+Qe,A-ze,U+xe,A,U+xe),Bi(A+ze,U+xe,A+oe,U+Qe,A+oe,U),Va(Ne),this},b.__private__.circle=b.circle=function(A,U,oe,xe){if(isNaN(A)||isNaN(U)||isNaN(oe)||!Ai(xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,U,oe,oe,xe)},b.setFont=function(A,U,oe){return oe&&(U=V(U,oe)),bt=El(A,U,{disableWarning:!1}),this};var ks=b.__private__.getFont=b.getFont=function(){return It[El.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var A,U,oe={};for(A in Bt)if(Bt.hasOwnProperty(A))for(U in oe[A]=[],Bt[A])Bt[A].hasOwnProperty(U)&&oe[A].push(U);return oe},b.addFont=function(A,U,oe,xe,Ne){var ze=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ze.indexOf(arguments[3])!==-1?Ne=arguments[3]:arguments[3]&&ze.indexOf(arguments[3])==-1&&(oe=V(oe,xe)),Uo.call(this,A,U,oe,Ne=Ne||"Identity-H")};var wa,Ui=n.lineWidth||.200025,Ba=b.__private__.getLineWidth=b.getLineWidth=function(){return Ui},Rt=b.__private__.setLineWidth=b.setLineWidth=function(A){return Ui=A,ie(D(F(A))+" w"),this};b.__private__.setLineDash=jt.API.setLineDash=jt.API.setLineDashPattern=function(A,U){if(A=A||[],U=U||0,isNaN(U)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(oe){return D(F(oe))}).join(" "),U=D(F(U)),ie("["+A+"] "+U+" d"),this};var mo=b.__private__.getLineHeight=b.getLineHeight=function(){return Ae*wa};b.__private__.getLineHeight=b.getLineHeight=function(){return Ae*wa};var Wo=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(wa=A),this},Ua=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return wa};Wo(n.lineHeight);var ni=b.__private__.getHorizontalCoordinate=function(A){return F(A)},$r=b.__private__.getVerticalCoordinate=function(A){return H===z?A:Nt[J].mediaBox.topRightY-Nt[J].mediaBox.bottomLeftY-F(A)},po=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(A){return D(ni(A))},Vn=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(A){return D($r(A))},ns=n.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return Qn(ns)},b.__private__.setStrokeColor=b.setDrawColor=function(A,U,oe,xe){return ns=Hr({ch1:A,ch2:U,ch3:oe,ch4:xe,pdfColorType:"draw",precision:2}),ie(ns),this};var go=n.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return Qn(go)},b.__private__.setFillColor=b.setFillColor=function(A,U,oe,xe){return go=Hr({ch1:A,ch2:U,ch3:oe,ch4:xe,pdfColorType:"fill",precision:2}),ie(go),this};var Ps=n.textColor||"0 g",Ll=b.__private__.getTextColor=b.getTextColor=function(){return Qn(Ps)};b.__private__.setTextColor=b.setTextColor=function(A,U,oe,xe){return Ps=Hr({ch1:A,ch2:U,ch3:oe,ch4:xe,pdfColorType:"text",precision:3}),this};var rs=n.charSpace,_a=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(rs||0)};b.__private__.setCharSpace=b.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return rs=A,this};var is=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(A){var U=b.CapJoinStyles[A];if(U===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return is=U,ie(U+" J"),this};var Mr=0;b.__private__.setLineJoin=b.setLineJoin=function(A){var U=b.CapJoinStyles[A];if(U===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Mr=U,ie(U+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ie(D(F(A))+" M"),this},b.GState=kg,b.setGState=function(A){(A=typeof A=="string"?Ft[qt[A]]:$s(null,A)).equals(Fn)||(ie("/"+A.id+" gs"),Fn=A)};var $s=function(A,U){if(!A||!qt[A]){var oe=!1;for(var xe in Ft)if(Ft.hasOwnProperty(xe)&&Ft[xe].equals(U)){oe=!0;break}if(oe)U=Ft[xe];else{var Ne="GS"+(Object.keys(Ft).length+1).toString(10);Ft[Ne]=U,U.id=Ne}return A&&(qt[A]=U.id),un.publish("addGState",U),U}};b.addGState=function(A,U){return $s(A,U),this},b.saveGraphicsState=function(){return ie("q"),en.push({key:bt,size:Ae,color:Ps}),this},b.restoreGraphicsState=function(){ie("Q");var A=en.pop();return bt=A.key,Ae=A.size,Ps=A.color,Fn=null,this},b.setCurrentTransformationMatrix=function(A){return ie(A.toString()+" cm"),this},b.comment=function(A){return ie("#"+A),this};var fi=function(A,U){var oe=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return oe},set:function(ze){isNaN(ze)||(oe=parseFloat(ze))}});var xe=U||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return xe},set:function(ze){isNaN(ze)||(xe=parseFloat(ze))}});var Ne="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ne},set:function(ze){Ne=ze.toString()}}),this},Gs=function(A,U,oe,xe){fi.call(this,A,U),this.type="rect";var Ne=oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ne},set:function(Qe){isNaN(Qe)||(Ne=parseFloat(Qe))}});var ze=xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ze},set:function(Qe){isNaN(Qe)||(ze=parseFloat(Qe))}}),this},za=function(){this.page=St,this.currentPage=J,this.pages=Ze.slice(0),this.pagesContext=Nt.slice(0),this.x=_t,this.y=yr,this.matrix=rn,this.width=bs(J),this.height=Yo(J),this.outputDestination=ot,this.id="",this.objectNumber=-1};za.prototype.restore=function(){St=this.page,J=this.currentPage,Nt=this.pagesContext,Ze=this.pages,_t=this.x,yr=this.y,rn=this.matrix,xo(J,this.width),ss(J,this.height),ot=this.outputDestination};var Ws=function(A,U,oe,xe,Ne){ei.push(new za),St=J=0,Ze=[],_t=A,yr=U,rn=Ne,vs([oe,xe])};for(var Ys in b.beginFormObject=function(A,U,oe,xe,Ne){return Ws(A,U,oe,xe,Ne),this},b.endFormObject=function(A){return(function(U){if(Hs[U])ei.pop().restore();else{var oe=new za,xe="Xo"+(Object.keys(ui).length+1).toString(10);oe.id=xe,Hs[U]=xe,ui[xe]=oe,un.publish("addFormObject",oe),ei.pop().restore()}})(A),this},b.doFormObject=function(A,U){var oe=ui[Hs[A]];return ie("q"),ie(U.toString()+" cm"),ie("/"+oe.id+" Do"),ie("Q"),this},b.getFormObject=function(A){var U=ui[Hs[A]];return{x:U.x,y:U.y,width:U.width,height:U.height,matrix:U.matrix}},b.save=function(A,U){return A=A||"generated.pdf",(U=U||{}).returnPromise=U.returnPromise||!1,U.returnPromise===!1?(Hu(bn(ys()),A),typeof Hu.unload=="function"&&Zt.setTimeout&&setTimeout(Hu.unload,911),this):new Promise(function(oe,xe){try{var Ne=Hu(bn(ys()),A);typeof Hu.unload=="function"&&Zt.setTimeout&&setTimeout(Hu.unload,911),oe(Ne)}catch(ze){xe(ze.message)}})},jt.API)jt.API.hasOwnProperty(Ys)&&(Ys==="events"&&jt.API.events.length?(function(A,U){var oe,xe,Ne;for(Ne=U.length-1;Ne!==-1;Ne--)oe=U[Ne][0],xe=U[Ne][1],A.subscribe.apply(A,[oe].concat(typeof xe=="function"?[xe]:xe))})(un,jt.API.events):b[Ys]=jt.API[Ys]);function bs(A){return Nt[A].mediaBox.topRightX-Nt[A].mediaBox.bottomLeftX}function xo(A,U){Nt[A].mediaBox.topRightX=U+Nt[A].mediaBox.bottomLeftX}function Yo(A){return Nt[A].mediaBox.topRightY-Nt[A].mediaBox.bottomLeftY}function ss(A,U){Nt[A].mediaBox.topRightY=U+Nt[A].mediaBox.bottomLeftY}var Ks=b.getPageWidth=function(A){return bs(A=A||J)/Xt},kl=b.setPageWidth=function(A,U){xo(A,U*Xt)},Ds=b.getPageHeight=function(A){return Yo(A=A||J)/Xt},Ko=b.setPageHeight=function(A,U){ss(A,U*Xt)};return b.internal={pdfEscape:Vi,getStyle:Cl,getFont:ks,getFontSize:tt,getCharSpace:_a,getTextColor:Ll,getLineHeight:mo,getLineHeightFactor:Ua,getLineWidth:Ba,write:rt,getHorizontalCoordinate:ni,getVerticalCoordinate:$r,getCoordinateString:po,getVerticalCoordinateString:Vn,collections:{},newObject:Yn,newAdditionalObject:_i,newObjectDeferred:ir,newObjectDeferredBegin:zr,getFilters:Fi,putStream:gs,events:un,scaleFactor:Xt,pageSize:{getWidth:function(){return Ks(J)},setWidth:function(A){kl(J,A)},getHeight:function(){return Ds(J)},setHeight:function(A){Ko(J,A)}},encryptionOptions:p,encryption:mr,getEncryptor:function(A){return p!==null?mr.encryptor(A,0):function(U){return U}},output:qa,getNumberOfPages:Ho,get pages(){return Ze},out:ie,f2:S,f3:L,getPageInfo:Er,getPageInfoByObjId:fo,getCurrentPageInfo:yc,getPDFVersion:C,Point:fi,Rectangle:Gs,Matrix:Tt,hasHotfix:Dr},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Ks(J)},set:function(A){kl(J,A)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Ds(J)},set:function(A){Ko(J,A)},enumerable:!0,configurable:!0}),(function(A){for(var U=0,oe=Te.length;U<oe;U++){var xe=Uo.call(this,A[U][0],A[U][1],A[U][2],Te[U][3],!0);y===!1&&(N[xe]=!0);var Ne=A[U][0].split("-");br({id:xe,fontName:Ne[0],fontStyle:Ne[1]||""})}un.publish("addFonts",{fonts:It,dictionary:Bt})}).call(b,Te),bt="F1",Ls(i,t),un.publish("initialized"),b}nh.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},nh.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},nh.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},nh.prototype.processOwnerPassword=function(n,e){return v1(x1(e).substr(0,5),n)},nh.prototype.encryptor=function(n,e){var t=x1(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return v1(t,r)}},kg.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||nr(n)!==nr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},jt.API={events:[]},jt.version="3.0.4";var Jr=jt.API,Gy=1,hd=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qd=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},on=function(n){return n.toFixed(2)},Qc=function(n){return n.toFixed(5)};Jr.__acroform__={};var pa=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},bN=function(n){return n*Gy},dl=function(n){var e=new mj,t=yt.internal.getHeight(n)||0,r=yt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(on(r)),Number(on(t))],e},Rq=Jr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},Lq=Jr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},kq=Jr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},ai=Jr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return kq(n,e-1)},oi=Jr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Rq(n,e-1)},li=Jr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Lq(n,e-1)},Pq=Jr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],a=n[1],c=n[2],d=n[3],h={};return h.lowerLeft_X=t(i)||0,h.lowerLeft_Y=r(a+d)||0,h.upperRight_X=t(i+c)||0,h.upperRight_Y=r(a)||0,[Number(on(h.lowerLeft_X)),Number(on(h.lowerLeft_Y)),Number(on(h.upperRight_X)),Number(on(h.upperRight_Y))]},Dq=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=y1(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+on(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=dl(n);return a.scope=n.scope,a.stream=e.join(`
`),a}},y1=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(S){return S.split(`
`)}):i.map(function(S){return[S]});var a=t,c=yt.internal.getHeight(n)||0;c=c<0?-c:c;var d=yt.internal.getWidth(n)||0;d=d<0?-d:d;var h=function(S,L,F){if(S+1<i.length){var ae=L+" "+i[S+1][0];return Lp(ae,n,F).width<=d-4}return!1};a++;e:for(;a>0;){e="",a--;var f,p,y=Lp("3",n,a).height,N=n.multiline?c-a:(c-y)/2,b=N+=2,j=0,C=0,R=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Lp(e,n,a=12).width+", FieldWidth:"+d+`
`;break}for(var I="",B=0,z=0;z<i.length;z++)if(i.hasOwnProperty(z)){var H=!1;if(i[z].length!==1&&R!==i[z].length-1){if((y+2)*(B+2)+2>c)continue e;I+=i[z][R],H=!0,C=z,z--}else{I=(I+=i[z][R]+" ").substr(I.length-1)==" "?I.substr(0,I.length-1):I;var he=parseInt(z),re=h(he,I,a),V=z>=i.length-1;if(re&&!V){I+=" ",R=0;continue}if(re||V){if(V)C=he;else if(n.multiline&&(y+2)*(B+2)+2>c)continue e}else{if(!n.multiline||(y+2)*(B+2)+2>c)continue e;C=he}}for(var D="",k=j;k<=C;k++){var G=i[k];if(n.multiline){if(k===C){D+=G[R]+" ",R=(R+1)%G.length;continue}if(k===j){D+=G[G.length-1]+" ";continue}}D+=G[0]+" "}switch(D=D.substr(D.length-1)==" "?D.substr(0,D.length-1):D,p=Lp(D,n,a).width,n.textAlign){case"right":f=d-p-2;break;case"center":f=(d-p)/2;break;default:f=2}e+=on(f)+" "+on(b)+` Td
`,e+="("+hd(D)+`) Tj
`,e+=-on(f)+` 0 Td
`,b=-(a+2),p=0,j=H?C:C+1,B++,I=""}break}return r.text=e,r.fontSize=a,r},Lp=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},Mq={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Oq=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Fq=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Vo.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Mq)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Gy=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new pj,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&Oq(a,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var a=!r;for(var c in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(c)){var d=r[c],h=[],f=d.Rect;if(d.Rect&&(d.Rect=Pq(d.Rect,i)),i.internal.newObjectDeferredBegin(d.objId,!0),d.DA=yt.createDefaultAppearanceStream(d),nr(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(h=d.getKeyValueListForStream()),d.Rect=f,d.hasAppearanceStream&&!d.appearanceStreamContent){var p=Dq(d);h.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(d.appearanceStreamContent){var y="";for(var N in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(N)){var b=d.appearanceStreamContent[N];if(y+="/"+N+" ",y+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var c in b)if(b.hasOwnProperty(c)){var j=b[c];typeof j=="function"&&(j=j.call(i,d)),y+="/"+c+" "+j+" ",i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j)}}else typeof(j=b)=="function"&&(j=j.call(i,d)),y+="/"+c+" "+j,i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j);y+=">>"}h.push({key:"AP",value:`<<
`+y+">>"})}i.internal.putStream({additionalKeyValues:h,objectId:d.objId}),i.internal.out("endobj")}a&&(function(C,R){for(var I in C)if(C.hasOwnProperty(I)){var B=I,z=C[I];R.internal.newObjectDeferredBegin(z.objId,!0),nr(z)==="object"&&typeof z.putStream=="function"&&z.putStream(),delete C[B]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},fj=Jr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(c){return c};if(Array.isArray(n)){for(var i="[",a=0;a<n.length;a++)switch(a!==0&&(i+=" "),nr(n[a])){case"boolean":case"number":case"object":i+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+hd(r(n[a].toString()))+")"):i+=n[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},vv=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+hd(r(n))+")"},ml=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ml.prototype.toString=function(){return this.objId+" 0 R"},ml.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ml.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:fj(i,this.objId,this.scope)}):i instanceof ml?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var mj=function(){ml.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};pa(mj,ml);var pj=function(){ml.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+hd(t(n))+")"}},set:function(t){n=t}})};pa(pj,ml);var Vo=function n(){ml.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute F supplied.');e=I}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ai(e,3)},set:function(I){I?this.F=oi(e,3):this.F=li(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute Ff supplied.');t=I}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(I){r=I!==void 0?I:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(I){r[0]=I}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(I){r[1]=I}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(I){r[2]=I}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(I){r[3]=I}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(I){switch(I){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=I;break;default:throw new Error('Invalid value "'+I+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Pg)return;a="FieldObject"+n.FieldNum++}var I=function(B){return B};return this.scope&&(I=this.scope.internal.getEncryptor(this.objId)),"("+hd(I(a))+")"},set:function(I){a=I.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(I){a=I}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(I){c=I}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(I){d=I}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(I){h=I}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Gy:f},set:function(I){f=I}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(I){p=I}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Pg||this instanceof Ku))return vv(y,this.objId,this.scope)},set:function(I){I=I.toString(),y=I}});var N=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(N)return this instanceof Qi==0?vv(N,this.objId,this.scope):N},set:function(I){I=I.toString(),N=this instanceof Qi==0?I.substr(0,1)==="("?Qd(I.substr(1,I.length-2)):Qd(I):I}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qi==1?Qd(N.substr(1,N.length-1)):N},set:function(I){I=I.toString(),N=this instanceof Qi==1?"/"+I:I}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(I){this.V=I}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Qi==0?vv(b,this.objId,this.scope):b},set:function(I){I=I.toString(),b=this instanceof Qi==0?I.substr(0,1)==="("?Qd(I.substr(1,I.length-2)):Qd(I):I}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qi==1?Qd(b.substr(1,b.length-1)):b},set:function(I){I=I.toString(),b=this instanceof Qi==1?"/"+I:I}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,C=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return C},set:function(I){I=!!I,C=I}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(I){j=I}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,1)},set:function(I){I?this.Ff=oi(this.Ff,1):this.Ff=li(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,2)},set:function(I){I?this.Ff=oi(this.Ff,2):this.Ff=li(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,3)},set:function(I){I?this.Ff=oi(this.Ff,3):this.Ff=li(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(I){if([0,1,2].indexOf(I)===-1)throw new Error('Invalid value "'+I+'" for attribute Q supplied.');R=I}}),Object.defineProperty(this,"textAlign",{get:function(){var I;switch(R){case 0:default:I="left";break;case 1:I="center";break;case 2:I="right"}return I},configurable:!0,enumerable:!0,set:function(I){switch(I){case"right":case 2:R=2;break;case"center":case 1:R=1;break;default:R=0}}})};pa(Vo,ml);var fh=function(){Vo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return fj(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(a,c,d){d||(d=1);for(var h,f=[];h=c.exec(a);)f.push(h[d]);return f})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,18)},set:function(t){t?this.Ff=oi(this.Ff,18):this.Ff=li(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=oi(this.Ff,19):this.Ff=li(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,20)},set:function(t){t?(this.Ff=oi(this.Ff,20),e.sort()):this.Ff=li(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,22)},set:function(t){t?this.Ff=oi(this.Ff,22):this.Ff=li(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(t){t?this.Ff=oi(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,27)},set:function(t){t?this.Ff=oi(this.Ff,27):this.Ff=li(this.Ff,27)}}),this.hasAppearanceStream=!1};pa(fh,Vo);var mh=function(){fh.call(this),this.fontName="helvetica",this.combo=!1};pa(mh,fh);var ph=function(){mh.call(this),this.combo=!0};pa(ph,mh);var Jp=function(){ph.call(this),this.edit=!0};pa(Jp,ph);var Qi=function(){Vo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,15)},set:function(t){t?this.Ff=oi(this.Ff,15):this.Ff=li(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,16)},set:function(t){t?this.Ff=oi(this.Ff,16):this.Ff=li(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,17)},set:function(t){t?this.Ff=oi(this.Ff,17):this.Ff=li(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(t){t?this.Ff=oi(this.Ff,26):this.Ff=li(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+hd(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){nr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};pa(Qi,Vo);var Zp=function(){Qi.call(this),this.pushButton=!0};pa(Zp,Qi);var gh=function(){Qi.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};pa(gh,Qi);var Pg=function(){var n,e;Vo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(d){return d};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,c=[];for(a in c.push("<<"),r)c.push("/"+a+" ("+hd(i(r[a]))+")");return c.push(">>"),c.join(`
`)},set:function(i){nr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};pa(Pg,Vo),gh.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},gh.prototype.createOption=function(n){var e=new Pg;return e.Parent=this,e.optionName=n,this.Kids.push(e),qq.call(this.scope,e),e};var eg=function(){Qi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};pa(eg,Qi);var Ku=function(){Vo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,13)},set:function(e){e?this.Ff=oi(this.Ff,13):this.Ff=li(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,21)},set:function(e){e?this.Ff=oi(this.Ff,21):this.Ff=li(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(e){e?this.Ff=oi(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,24)},set:function(e){e?this.Ff=oi(this.Ff,24):this.Ff=li(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,25)},set:function(e){e?this.Ff=oi(this.Ff,25):this.Ff=li(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(e){e?this.Ff=oi(this.Ff,26):this.Ff=li(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};pa(Ku,Vo);var tg=function(){Ku.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,14)},set:function(n){n?this.Ff=oi(this.Ff,14):this.Ff=li(this.Ff,14)}}),this.password=!0};pa(tg,Ku);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=dl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),a=y1(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+on(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=dl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],a=yt.internal.getHeight(n),c=yt.internal.getWidth(n),d=y1(n,n.caption);return i.push("1 g"),i.push("0 0 "+on(c)+" "+on(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+on(c-1)+" "+on(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+on(d.fontSize)+" Tf "+r),i.push(d.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=dl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Circle.YesNormal,e.D[n]=yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=dl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=yt.internal.Bezier_C,a=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Qc(yt.internal.getWidth(n)/2)+" "+Qc(yt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=dl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*yt.internal.Bezier_C).toFixed(5)),c=Number((r*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qc(yt.internal.getWidth(n)/2)+" "+Qc(yt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Qc(yt.internal.getWidth(n)/2)+" "+Qc(yt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),t.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),t.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),t.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=dl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qc(yt.internal.getWidth(n)/2)+" "+Qc(yt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Cross.YesNormal,e.D[n]=yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=dl(n);e.scope=n.scope;var t=[],r=yt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+on(yt.internal.getWidth(n)-2)+" "+on(yt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(on(r.x1.x)+" "+on(r.x1.y)+" m"),t.push(on(r.x2.x)+" "+on(r.x2.y)+" l"),t.push(on(r.x4.x)+" "+on(r.x4.y)+" m"),t.push(on(r.x3.x)+" "+on(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=dl(n);e.scope=n.scope;var t=yt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+on(yt.internal.getWidth(n)-2)+" "+on(yt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(on(t.x1.x)+" "+on(t.x1.y)+" m"),r.push(on(t.x2.x)+" "+on(t.x2.y)+" l"),r.push(on(t.x4.x)+" "+on(t.x4.y)+" m"),r.push(on(t.x3.x)+" "+on(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=dl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};yt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=yt.internal.getWidth(n),t=yt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},yt.internal.getWidth=function(n){var e=0;return nr(n)==="object"&&(e=bN(n.Rect[2])),e},yt.internal.getHeight=function(n){var e=0;return nr(n)==="object"&&(e=bN(n.Rect[3])),e};var qq=Jr.addField=function(n){if(Fq(this,n),!(n instanceof Vo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Jr.AcroFormChoiceField=fh,Jr.AcroFormListBox=mh,Jr.AcroFormComboBox=ph,Jr.AcroFormEditBox=Jp,Jr.AcroFormButton=Qi,Jr.AcroFormPushButton=Zp,Jr.AcroFormRadioButton=gh,Jr.AcroFormCheckBox=eg,Jr.AcroFormTextField=Ku,Jr.AcroFormPasswordField=tg,Jr.AcroFormAppearance=yt,Jr.AcroForm={ChoiceField:fh,ListBox:mh,ComboBox:ph,EditBox:Jp,Button:Qi,PushButton:Zp,RadioButton:gh,CheckBox:eg,TextField:Ku,PasswordField:tg,Appearance:yt},jt.AcroForm={ChoiceField:fh,ListBox:mh,ComboBox:ph,EditBox:Jp,Button:Qi,PushButton:Zp,RadioButton:gh,CheckBox:eg,TextField:Ku,PasswordField:tg,Appearance:yt};jt.AcroForm;function gj(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(S,L){var F,ae,ve,K,ce,me=t;if((L=L||t)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(re(S))for(ce in r)for(ve=r[ce],F=0;F<ve.length;F+=1){for(K=!0,ae=0;ae<ve[F].length;ae+=1)if(ve[F][ae]!==void 0&&ve[F][ae]!==S[ae]){K=!1;break}if(K===!0){me=ce;break}}else for(ce in r)for(ve=r[ce],F=0;F<ve.length;F+=1){for(K=!0,ae=0;ae<ve[F].length;ae+=1)if(ve[F][ae]!==void 0&&ve[F][ae]!==S.charCodeAt(ae)){K=!1;break}if(K===!0){me=ce;break}}return me===t&&L!==t&&(me=L),me},a=function S(L){for(var F=this.internal.write,ae=this.internal.putStream,ve=(0,this.internal.getFilters)();ve.indexOf("FlateEncode")!==-1;)ve.splice(ve.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var K=[];if(K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Image"}),K.push({key:"Width",value:L.width}),K.push({key:"Height",value:L.height}),L.colorSpace===I.INDEXED?K.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(K.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===I.DEVICE_CMYK&&K.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),K.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&K.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var ce="",me=0,Se=L.transparency.length;me<Se;me++)ce+=L.transparency[me]+" "+L.transparency[me]+" ";K.push({key:"Mask",value:"["+ce+"]"})}L.sMask!==void 0&&K.push({key:"SMask",value:L.objectId+1+" 0 R"});var qe=L.filter!==void 0?["/"+L.filter]:void 0;if(ae({data:L.data,additionalKeyValues:K,alreadyAppliedFilters:qe,objectId:L.objectId}),F("endobj"),"sMask"in L&&L.sMask!==void 0){var X,q=(X=L.sMaskBitsPerComponent)!==null&&X!==void 0?X:L.bitsPerComponent,J={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:q,data:L.sMask};"filter"in L&&(J.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(q," /Columns ").concat(L.width),J.filter=L.filter),S.call(this,J)}if(L.colorSpace===I.INDEXED){var ne=this.internal.newObject();ae({data:D(new Uint8Array(L.palette)),objectId:ne}),F("endobj")}},c=function(){var S=this.internal.collections[e+"images"];for(var L in S)a.call(this,S[L])},d=function(){var S,L=this.internal.collections[e+"images"],F=this.internal.write;for(var ae in L)F("/I"+(S=L[ae]).index,S.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",d))},f=function(){var S=this.internal.collections[e+"images"];return h.call(this),S},p=function(){return Object.keys(this.internal.collections[e+"images"]).length},y=function(S){return typeof n["process"+S.toUpperCase()]=="function"},N=function(S){return nr(S)==="object"&&S.nodeType===1},b=function(S,L){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var F=""+S.getAttribute("src");if(F.indexOf("data:image/")===0)return Xp(unescape(F).split("base64,").pop());var ae=n.loadFile(F,!0);if(ae!==void 0)return ae}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var ve;switch(L){case"PNG":ve="image/png";break;case"WEBP":ve="image/webp";break;default:ve="image/jpeg"}return Xp(S.toDataURL(ve,1).split("base64,").pop())}},j=function(S){var L=this.internal.collections[e+"images"];if(L){for(var F in L)if(S===L[F].alias)return L[F]}},C=function(S,L,F){return S||L||(S=-96,L=-96),S<0&&(S=-1*F.width*72/S/this.internal.scaleFactor),L<0&&(L=-1*F.height*72/L/this.internal.scaleFactor),S===0&&(S=L*F.width/F.height),L===0&&(L=S*F.height/F.width),[S,L]},R=function(S,L,F,ae,ve,K){var ce=C.call(this,F,ae,ve),me=this.internal.getCoordinateString,Se=this.internal.getVerticalCoordinateString,qe=f.call(this);if(F=ce[0],ae=ce[1],qe[ve.index]=ve,K){K*=Math.PI/180;var X=Math.cos(K),q=Math.sin(K),J=function(ue){return ue.toFixed(4)},ne=[J(X),J(q),J(-1*q),J(X),0,0,"cm"]}this.internal.write("q"),K?(this.internal.write([1,"0","0",1,me(S),Se(L+ae),"cm"].join(" ")),this.internal.write(ne.join(" ")),this.internal.write([me(F),"0","0",me(ae),"0","0","cm"].join(" "))):this.internal.write([me(F),"0","0",me(ae),me(S),Se(L+ae),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ve.index+" Do"),this.internal.write("Q")},I=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var B=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},z=n.__addimage__.sHashCode=function(S){var L,F,ae=0;if(typeof S=="string")for(F=S.length,L=0;L<F;L++)ae=(ae<<5)-ae+S.charCodeAt(L),ae|=0;else if(re(S))for(F=S.byteLength/2,L=0;L<F;L++)ae=(ae<<5)-ae+S[L],ae|=0;return ae},H=n.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var L=!0;return S.length===0&&(L=!1),S.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(L=!1),L},he=n.__addimage__.extractImageFromDataUrl=function(S){if(S==null||!(S=S.trim()).startsWith("data:"))return null;var L=S.indexOf(",");return L<0?null:S.substring(0,L).trim().endsWith("base64")?S.substring(L+1):null};n.__addimage__.isArrayBuffer=function(S){return S instanceof ArrayBuffer};var re=n.__addimage__.isArrayBufferView=function(S){return S instanceof Int8Array||S instanceof Uint8Array||S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array},V=n.__addimage__.binaryStringToUint8Array=function(S){for(var L=S.length,F=new Uint8Array(L),ae=0;ae<L;ae++)F[ae]=S.charCodeAt(ae);return F},D=n.__addimage__.arrayBufferToBinaryString=function(S){for(var L="",F=re(S)?S:new Uint8Array(S),ae=0;ae<F.length;ae+=8192)L+=String.fromCharCode.apply(null,F.subarray(ae,ae+8192));return L};n.addImage=function(){var S,L,F,ae,ve,K,ce,me,Se;if(typeof arguments[1]=="number"?(L=t,F=arguments[1],ae=arguments[2],ve=arguments[3],K=arguments[4],ce=arguments[5],me=arguments[6],Se=arguments[7]):(L=arguments[1],F=arguments[2],ae=arguments[3],ve=arguments[4],K=arguments[5],ce=arguments[6],me=arguments[7],Se=arguments[8]),nr(S=arguments[0])==="object"&&!N(S)&&"imageData"in S){var qe=S;S=qe.imageData,L=qe.format||L||t,F=qe.x||F||0,ae=qe.y||ae||0,ve=qe.w||qe.width||ve,K=qe.h||qe.height||K,ce=qe.alias||ce,me=qe.compression||me,Se=qe.rotation||qe.angle||Se}var X=this.internal.getFilters();if(me===void 0&&X.indexOf("FlateEncode")!==-1&&(me="SLOW"),isNaN(F)||isNaN(ae))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var q=k.call(this,S,L,ce,me);return R.call(this,F,ae,ve,K,q,Se),this};var k=function(S,L,F,ae){var ve,K,ce;if(typeof S=="string"&&i(S)===t){S=unescape(S);var me=G(S,!1);(me!==""||(me=n.loadFile(S,!0))!==void 0)&&(S=me)}if(N(S)&&(S=b(S,L)),L=i(S,L),!y(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((ce=F)==null||ce.length===0)&&(F=(function(Se){return typeof Se=="string"||re(Se)?z(Se):re(Se.data)?z(Se.data):null})(S)),(ve=j.call(this,F))||(S instanceof Uint8Array||L==="RGBA"||(K=S,S=V(S)),ve=this["process"+L.toUpperCase()](S,p.call(this),F,(function(Se){return Se&&typeof Se=="string"&&(Se=Se.toUpperCase()),Se in n.image_compression?Se:B.NONE})(ae),K)),!ve)throw new Error("An unknown error occurred whilst processing the image.");return ve},G=n.__addimage__.convertBase64ToBinaryString=function(S,L){L=typeof L!="boolean"||L;var F,ae="";if(typeof S=="string"){var ve;F=(ve=he(S))!==null&&ve!==void 0?ve:S;try{ae=Xp(F)}catch(K){if(L)throw H(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+K.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ae};n.getImageProperties=function(S){var L,F,ae="";if(N(S)&&(S=b(S)),typeof S=="string"&&i(S)===t&&((ae=G(S,!1))===""&&(ae=n.loadFile(S)||""),S=ae),F=i(S),!y(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(S instanceof Uint8Array||(S=V(S)),!(L=this["process"+F.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=F,L}})(jt.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};jt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,a,c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,p=!1,y=0;y<f.length&&!p;y++)switch((r=f[y]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var N=0;N<f.length;N++){r=f[N];var b=this.internal.pdfEscape,j=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),I=this.internal.getEncryptor(C.objId),B=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+c(r.bounds.x)+" "+d(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y)+"] ")+"/Contents ("+b(I(r.contents))+")",a+=" /Popup "+R.objId+" 0 R",a+=" /P "+h.objId+" 0 R",a+=" /T ("+b(I(B))+") >>",C.content=a;var z=C.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+c(r.bounds.x+30)+" "+d(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w+30)+" "+d(r.bounds.y)+"] ")+" /Parent "+z,r.open&&(a+=" /Open true"),a+=" >>",R.content=a,this.internal.write(C.objId,"0 R",R.objId,"0 R");break;case"freetext":i="/Rect ["+c(r.bounds.x)+" "+d(r.bounds.y)+" "+c(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y+r.bounds.h)+"] ";var H=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+b(j(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+H+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var he=this.annotations._nameMap[r.options.name];r.options.pageNumber=he.page,r.options.top=he.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+b(j(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var re=d(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+re+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,a,c){var d=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:h(t),y:f(r),w:h(t+i),h:f(r+a)},options:c,type:"link"})},n.textWithLink=function(t,r,i,a){var c,d,h=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){d=a.maxWidth;var p=this.splitTextToSize(t,d).length;c=Math.ceil(f*p)}else d=h,c=f;return this.text(t,r,i,a),i+=.2*f,a.align==="center"&&(r-=h/2),a.align==="right"&&(r-=h),this.link(r,i-f,d,c,a),h},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(jt.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(C){return e[C.charCodeAt(0)]!==void 0},c=n.__arabicParser__.isArabicLetter=function(C){return typeof C=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(C)},d=n.__arabicParser__.isArabicEndLetter=function(C){return c(C)&&a(C)&&e[C.charCodeAt(0)].length<=2},h=n.__arabicParser__.isArabicAlfLetter=function(C){return c(C)&&i.indexOf(C.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(C){return c(C)&&a(C)&&e[C.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(C){return c(C)&&a(C)&&e[C.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(C){return c(C)&&a(C)&&e[C.charCodeAt(0)].length>=3};var p=n.__arabicParser__.arabicLetterHasMedialForm=function(C){return c(C)&&a(C)&&e[C.charCodeAt(0)].length==4},y=n.__arabicParser__.resolveLigatures=function(C){var R=0,I=t,B="",z=0;for(R=0;R<C.length;R+=1)I[C.charCodeAt(R)]!==void 0?(z++,typeof(I=I[C.charCodeAt(R)])=="number"&&(B+=String.fromCharCode(I),I=t,z=0),R===C.length-1&&(I=t,B+=C.charAt(R-(z-1)),R-=z-1,z=0)):(I=t,B+=C.charAt(R-z),R-=z,z=0);return B};n.__arabicParser__.isArabicDiacritic=function(C){return C!==void 0&&r[C.charCodeAt(0)]!==void 0};var N=n.__arabicParser__.getCorrectForm=function(C,R,I){return c(C)?a(C)===!1?-1:!f(C)||!c(R)&&!c(I)||!c(I)&&d(R)||d(C)&&!c(R)||d(C)&&h(R)||d(C)&&d(R)?0:p(C)&&c(R)&&!d(R)&&c(I)&&f(I)?3:d(C)||!c(I)?1:2:-1},b=function(C){var R=0,I=0,B=0,z="",H="",he="",re=(C=C||"").split("\\s+"),V=[];for(R=0;R<re.length;R+=1){for(V.push(""),I=0;I<re[R].length;I+=1)z=re[R][I],H=re[R][I-1],he=re[R][I+1],c(z)?(B=N(z,H,he),V[R]+=B!==-1?String.fromCharCode(e[z.charCodeAt(0)][B]):z):V[R]+=z;V[R]=y(V[R])}return V.join(" ")},j=n.__arabicParser__.processArabic=n.processArabic=function(){var C,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,I=[];if(Array.isArray(R)){var B=0;for(I=[],B=0;B<R.length;B+=1)Array.isArray(R[B])?I.push([b(R[B][0]),R[B][1],R[B][2]]):I.push([b(R[B])]);C=I}else C=b(R);return typeof arguments[0]=="string"?C:(arguments[0].text=C,arguments[0])};n.events.push(["preProcessText",j])})(jt.API),jt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(d){r=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(d){i=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(d){a=d}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(d){c=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(jt.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(C){h=C}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(C){f=C}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(C){p=C}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(C){y=C}});var N=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return N},set:function(C){N=C}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(C){b=C}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(C){j=C}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(h){return r.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},n.getTextDimensions=function(h,f){r.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),y=f.font||this.getFont(),N=f.scaleFactor||this.internal.scaleFactor,b=0,j=0,C=0,R=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var I=f.maxWidth;I>0?typeof h=="string"?h=this.splitTextToSize(h,I):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(z,H){return z.concat(R.splitTextToSize(H,I))},[])):h=Array.isArray(h)?h:[h];for(var B=0;B<h.length;B++)b<(C=this.getStringUnitWidth(h[B],{font:y})*p)&&(b=C);return b!==0&&(j=h.length),{w:b/=N,h:Math.max((j*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/N,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=n.cell=function(){var h;h=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,y=this.internal.__cell__.margins||e,N=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=y.top,b&&N&&(this.printHeaderRow(h.lineNumber,!0),h.y+=N[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-p,h.y+p,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+p,{align:"center",baseline:"top",maxWidth:h.width-p-p}):this.text(h.text,h.x+p,h.y+p,{align:"left",baseline:"top",maxWidth:h.width-p-p})),this.internal.__cell__.lastCell=h,this};n.table=function(h,f,p,y,N){if(r.call(this),!p)throw new Error("No data for PDF table.");var b,j,C,R,I=[],B=[],z=[],H={},he={},re=[],V=[],D=(N=N||{}).autoSize||!1,k=N.printHeaders!==!1,G=N.css&&N.css["font-size"]!==void 0?16*N.css["font-size"]:N.fontSize||12,S=N.margins||Object.assign({width:this.getPageWidth()},e),L=typeof N.padding=="number"?N.padding:3,F=N.headerBackgroundColor||"#c8c8c8",ae=N.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=G,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=ae,this.setFontSize(G),y==null)B=I=Object.keys(p[0]),z=I.map(function(){return"left"});else if(Array.isArray(y)&&nr(y[0])==="object")for(I=y.map(function(qe){return qe.name}),B=y.map(function(qe){return qe.prompt||qe.name||""}),z=y.map(function(qe){return qe.align||"left"}),b=0;b<y.length;b+=1)he[y[b].name]=.7499990551181103*y[b].width;else Array.isArray(y)&&typeof y[0]=="string"&&(B=I=y,z=I.map(function(){return"left"}));if(D||Array.isArray(y)&&typeof y[0]=="string")for(b=0;b<I.length;b+=1){for(H[R=I[b]]=p.map(function(qe){return qe[R]}),this.setFont(void 0,"bold"),re.push(this.getTextDimensions(B[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=H[R],this.setFont(void 0,"normal"),C=0;C<j.length;C+=1)re.push(this.getTextDimensions(j[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);he[R]=Math.max.apply(null,re)+L+L,re=[]}if(k){var ve={};for(b=0;b<I.length;b+=1)ve[I[b]]={},ve[I[b]].text=B[b],ve[I[b]].align=z[b];var K=d.call(this,ve,he);V=I.map(function(qe){return new a(h,f,he[qe],K,ve[qe].text,void 0,ve[qe].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var ce=y.reduce(function(qe,X){return qe[X.name]=X.align,qe},{});for(b=0;b<p.length;b+=1){"rowStart"in N&&N.rowStart instanceof Function&&N.rowStart({row:b,data:p[b]},this);var me=d.call(this,p[b],he);for(C=0;C<I.length;C+=1){var Se=p[b][I[C]];"cellStart"in N&&N.cellStart instanceof Function&&N.cellStart({row:b,col:C,data:Se},this),c.call(this,new a(h,f,he[I[C]],me,Se,b+2,ce[I[C]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var d=function(h,f){var p=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,N=this.internal.scaleFactor;return Object.keys(h).map(function(b){var j=h[b];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,f[b]-p-p)},this).map(function(b){return this.getLineHeightFactor()*b.length*y/N+p+p},this).reduce(function(b,j){return Math.max(b,j)},0)};n.setTableHeaderRow=function(h){r.call(this),this.internal.__cell__.tableHeaderRow=h},n.printHeaderRow=function(h,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var N=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){p=this.internal.__cell__.tableHeaderRow[b].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,N.push(p)),p.lineNumber=h;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,p),this.setTextColor(j)}N.length>0&&this.setTableHeaderRow(N),this.setFont(void 0,"normal"),t=!1}})(jt.API);var xj={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},vj=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],b1=gj(vj),yj=[100,200,300,400,500,600,700,800,900],Vq=gj(yj);function yv(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(a){return xj[a=a||"normal"]?a:"normal"})(n.style),r=(function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400})(n.weight),i=(function(a){return typeof b1[a=a||"normal"]=="number"?a:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function wN(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Bq={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},_N={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function NN(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function AN(n){return n.trimLeft()}function Uq(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function zq(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var kp,SN,jN,Xd,Pp,EN,TN,CN,bv=["times"];function IN(n,e,t,r,i){var a=4,c=LN;switch(i){case jt.API.image_compression.FAST:a=1,c=RN;break;case jt.API.image_compression.MEDIUM:a=6,c=kN;break;case jt.API.image_compression.SLOW:a=9,c=PN}n=(function(h,f,p,y){for(var N,b=h.length/f,j=new Uint8Array(h.length+b),C=[Hq,RN,LN,kN,PN],R=0;R<b;R+=1){var I=R*f,B=h.subarray(I,I+f);if(y)j.set(y(B,p,N),I+R);else{for(var z=C.length,H=[],he=0;he<z;he+=1)H[he]=C[he](B,p,N);var re=Gq(H.concat());j.set(H[re],I+R)}N=B}return j})(n,e,Math.ceil(t*r/8),c);var d=f1(n,{level:a});return jt.API.__addimage__.arrayBufferToBinaryString(d)}function Hq(n){var e=Array.apply([],n);return e.unshift(0),e}function RN(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var a=n[i-e]||0;r[i+1]=n[i]-a+256&255}return r}function LN(n,e,t){var r=n.length,i=[];i[0]=2;for(var a=0;a<r;a+=1){var c=t&&t[a]||0;i[a+1]=n[a]-c+256&255}return i}function kN(n,e,t){var r=n.length,i=[];i[0]=3;for(var a=0;a<r;a+=1){var c=n[a-e]||0,d=t&&t[a]||0;i[a+1]=n[a]+256-(c+d>>>1)&255}return i}function PN(n,e,t){var r=n.length,i=[];i[0]=4;for(var a=0;a<r;a+=1){var c=$q(n[a-e]||0,t&&t[a]||0,t&&t[a-e]||0);i[a+1]=n[a]-c+256&255}return i}function $q(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),a=Math.abs(n+e-t-t);return r<=i&&r<=a?n:i<=a?e:t}function Gq(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function wv(n,e,t){var r=e*t,i=Math.floor(r/8),a=16-(r-8*i+t),c=(1<<t)-1;return bj(n,i)>>a&c}function DN(n,e,t,r){var i=t*r,a=Math.floor(i/8),c=16-(i-8*a+r),d=(1<<r)-1,h=(e&d)<<c;(function(f,p,y){if(p+1<f.byteLength)f.setUint16(p,y,!1);else{var N=y>>8&255;f.setUint8(p,N)}})(n,a,bj(n,a)&~(d<<c)&65535|h)}function bj(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function Wq(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],a=i>>7,c=1<<1+(7&i);n[e++],n[e++];var d=null,h=null;a&&(d=e,h=c,e+=3*c);var f=!0,p=[],y=0,N=null,b=0,j=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,j=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var C=n[e++];y=n[e++]|n[e++]<<8,N=n[e++],1&C||(N=null),b=C>>2&7,e++;break;case 254:for(;;){if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var R=n[e++]|n[e++]<<8,I=n[e++]|n[e++]<<8,B=n[e++]|n[e++]<<8,z=n[e++]|n[e++]<<8,H=n[e++],he=H>>6&1,re=1<<1+(7&H),V=d,D=h,k=!1;H>>7&&(k=!0,V=e,D=re,e+=3*re);var G=e;for(e++;;){var S;if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}p.push({x:R,y:I,width:B,height:z,has_local_palette:k,palette_offset:V,palette_size:D,data_offset:G,data_length:e-G,transparent_index:N,interlaced:!!he,delay:y,disposal:b});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return j},this.frameInfo=function(L){if(L<0||L>=p.length)throw new Error("Frame index out of range.");return p[L]},this.decodeAndBlitFrameBGRA=function(L,F){var ae=this.frameInfo(L),ve=ae.width*ae.height,K=new Uint8Array(ve);MN(n,ae.data_offset,K,ve);var ce=ae.palette_offset,me=ae.transparent_index;me===null&&(me=256);var Se=ae.width,qe=t-Se,X=Se,q=4*(ae.y*t+ae.x),J=4*((ae.y+ae.height)*t+ae.x),ne=q,ue=4*qe;ae.interlaced===!0&&(ue+=4*t*7);for(var pe=8,we=0,De=K.length;we<De;++we){var Re=K[we];if(X===0&&(X=Se,(ne+=ue)>=J&&(ue=4*qe+4*t*(pe-1),ne=q+(Se+qe)*(pe<<1),pe>>=1)),Re===me)ne+=4;else{var Ue=n[ce+3*Re],Ze=n[ce+3*Re+1],at=n[ce+3*Re+2];F[ne++]=at,F[ne++]=Ze,F[ne++]=Ue,F[ne++]=255}--X}},this.decodeAndBlitFrameRGBA=function(L,F){var ae=this.frameInfo(L),ve=ae.width*ae.height,K=new Uint8Array(ve);MN(n,ae.data_offset,K,ve);var ce=ae.palette_offset,me=ae.transparent_index;me===null&&(me=256);var Se=ae.width,qe=t-Se,X=Se,q=4*(ae.y*t+ae.x),J=4*((ae.y+ae.height)*t+ae.x),ne=q,ue=4*qe;ae.interlaced===!0&&(ue+=4*t*7);for(var pe=8,we=0,De=K.length;we<De;++we){var Re=K[we];if(X===0&&(X=Se,(ne+=ue)>=J&&(ue=4*qe+4*t*(pe-1),ne=q+(Se+qe)*(pe<<1),pe>>=1)),Re===me)ne+=4;else{var Ue=n[ce+3*Re],Ze=n[ce+3*Re+1],at=n[ce+3*Re+2];F[ne++]=Ue,F[ne++]=Ze,F[ne++]=at,F[ne++]=255}--X}}}function MN(n,e,t,r){for(var i=n[e++],a=1<<i,c=a+1,d=c+1,h=i+1,f=(1<<h)-1,p=0,y=0,N=0,b=n[e++],j=new Int32Array(4096),C=null;;){for(;p<16&&b!==0;)y|=n[e++]<<p,p+=8,b===1?b=n[e++]:--b;if(p<h)break;var R=y&f;if(y>>=h,p-=h,R!==a){if(R===c)break;for(var I=R<d?R:C,B=0,z=I;z>a;)z=j[z]>>8,++B;var H=z;if(N+B+(I!==R?1:0)>r)return void vr.log("Warning, gif stream longer than expected.");t[N++]=H;var he=N+=B;for(I!==R&&(t[N++]=H),z=I;B--;)z=j[z],t[--he]=255&z,z>>=8;C!==null&&d<4096&&(j[d++]=C<<8|H,d>=f+1&&h<12&&(++h,f=f<<1|1)),C=R}else d=c+1,f=(1<<(h=i+1))-1,C=null}return N!==r&&vr.log("Warning, gif stream shorter than expected."),t}function _v(n){var e,t,r,i,a,c=Math.floor,d=new Array(64),h=new Array(64),f=new Array(64),p=new Array(64),y=new Array(65535),N=new Array(65535),b=new Array(64),j=new Array(64),C=[],R=0,I=7,B=new Array(64),z=new Array(64),H=new Array(64),he=new Array(256),re=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],ae=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ve=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function K(q,J){for(var ne=0,ue=0,pe=new Array,we=1;we<=16;we++){for(var De=1;De<=q[we];De++)pe[J[ue]]=[],pe[J[ue]][0]=ne,pe[J[ue]][1]=we,ue++,ne++;ne*=2}return pe}function ce(q){for(var J=q[0],ne=q[1]-1;ne>=0;)J&1<<ne&&(R|=1<<I),ne--,--I<0&&(R==255?(me(255),me(0)):me(R),I=7,R=0)}function me(q){C.push(q)}function Se(q){me(q>>8&255),me(255&q)}function qe(q,J,ne,ue,pe){for(var we,De=pe[0],Re=pe[240],Ue=(function(Ae,Je){var tt,it,lt,zt,$t,Gt,cn,nn,bt,Xt,_t=0;for(bt=0;bt<8;++bt){tt=Ae[_t],it=Ae[_t+1],lt=Ae[_t+2],zt=Ae[_t+3],$t=Ae[_t+4],Gt=Ae[_t+5],cn=Ae[_t+6];var yr=tt+(nn=Ae[_t+7]),rn=tt-nn,It=it+cn,Bt=it-cn,en=lt+Gt,Et=lt-Gt,Dn=zt+$t,Ft=zt-$t,qt=yr+Dn,Fn=yr-Dn,St=It+en,Nt=It-en;Ae[_t]=qt+St,Ae[_t+4]=qt-St;var un=.707106781*(Nt+Fn);Ae[_t+2]=Fn+un,Ae[_t+6]=Fn-un;var wi=.382683433*((qt=Ft+Et)-(Nt=Bt+rn)),ui=.5411961*qt+wi,Hs=1.306562965*Nt+wi,ei=.707106781*(St=Et+Bt),Tt=rn+ei,ga=rn-ei;Ae[_t+5]=ga+ui,Ae[_t+3]=ga-ui,Ae[_t+1]=Tt+Hs,Ae[_t+7]=Tt-Hs,_t+=8}for(_t=0,bt=0;bt<8;++bt){tt=Ae[_t],it=Ae[_t+8],lt=Ae[_t+16],zt=Ae[_t+24],$t=Ae[_t+32],Gt=Ae[_t+40],cn=Ae[_t+48];var Ji=tt+(nn=Ae[_t+56]),Mi=tt-nn,Oi=it+cn,Yn=it-cn,ir=lt+Gt,zr=lt-Gt,_i=zt+$t,di=zt-$t,qn=Ji+_i,Qn=Ji-_i,Hr=Oi+ir,Fi=Oi-ir;Ae[_t]=qn+Hr,Ae[_t+32]=qn-Hr;var gs=.707106781*(Fi+Qn);Ae[_t+16]=Qn+gs,Ae[_t+48]=Qn-gs;var Fa=.382683433*((qn=di+zr)-(Fi=Yn+Mi)),Rs=.5411961*qn+Fa,qi=1.306562965*Fi+Fa,xa=.707106781*(Hr=zr+Yn),Zi=Mi+xa,Ni=Mi-xa;Ae[_t+40]=Ni+Rs,Ae[_t+24]=Ni-Rs,Ae[_t+8]=Zi+qi,Ae[_t+56]=Zi-qi,_t++}for(bt=0;bt<64;++bt)Xt=Ae[bt]*Je[bt],b[bt]=Xt>0?Xt+.5|0:Xt-.5|0;return b})(q,J),Ze=0;Ze<64;++Ze)j[V[Ze]]=Ue[Ze];var at=j[0]-ne;ne=j[0],at==0?ce(ue[0]):(ce(ue[N[we=32767+at]]),ce(y[we]));for(var ot=63;ot>0&&j[ot]==0;)ot--;if(ot==0)return ce(De),ne;for(var ht,ie=1;ie<=ot;){for(var rt=ie;j[ie]==0&&ie<=ot;)++ie;var Kt=ie-rt;if(Kt>=16){ht=Kt>>4;for(var Te=1;Te<=ht;++Te)ce(Re);Kt&=15}we=32767+j[ie],ce(pe[(Kt<<4)+N[we]]),ce(y[we]),ie++}return ot!=63&&ce(De),ne}function X(q){q=Math.min(Math.max(q,1),100),a!=q&&((function(J){for(var ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ue=0;ue<64;ue++){var pe=c((ne[ue]*J+50)/100);pe=Math.min(Math.max(pe,1),255),d[V[ue]]=pe}for(var we=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],De=0;De<64;De++){var Re=c((we[De]*J+50)/100);Re=Math.min(Math.max(Re,1),255),h[V[De]]=Re}for(var Ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ze=0,at=0;at<8;at++)for(var ot=0;ot<8;ot++)f[Ze]=1/(d[V[Ze]]*Ue[at]*Ue[ot]*8),p[Ze]=1/(h[V[Ze]]*Ue[at]*Ue[ot]*8),Ze++})(q<50?Math.floor(5e3/q):Math.floor(200-2*q)),a=q)}this.encode=function(q,J){J&&X(J),C=new Array,R=0,I=7,Se(65496),Se(65504),Se(16),me(74),me(70),me(73),me(70),me(0),me(1),me(1),me(0),Se(1),Se(1),me(0),me(0),(function(){Se(65499),Se(132),me(0);for(var it=0;it<64;it++)me(d[it]);me(1);for(var lt=0;lt<64;lt++)me(h[lt])})(),(function(it,lt){Se(65472),Se(17),me(8),Se(lt),Se(it),me(3),me(1),me(17),me(0),me(2),me(17),me(1),me(3),me(17),me(1)})(q.width,q.height),(function(){Se(65476),Se(418),me(0);for(var it=0;it<16;it++)me(D[it+1]);for(var lt=0;lt<=11;lt++)me(k[lt]);me(16);for(var zt=0;zt<16;zt++)me(G[zt+1]);for(var $t=0;$t<=161;$t++)me(S[$t]);me(1);for(var Gt=0;Gt<16;Gt++)me(L[Gt+1]);for(var cn=0;cn<=11;cn++)me(F[cn]);me(17);for(var nn=0;nn<16;nn++)me(ae[nn+1]);for(var bt=0;bt<=161;bt++)me(ve[bt])})(),Se(65498),Se(12),me(3),me(1),me(0),me(2),me(17),me(3),me(17),me(0),me(63),me(0);var ne=0,ue=0,pe=0;R=0,I=7,this.encode.displayName="_encode_";for(var we,De,Re,Ue,Ze,at,ot,ht,ie,rt=q.data,Kt=q.width,Te=q.height,Ae=4*Kt,Je=0;Je<Te;){for(we=0;we<Ae;){for(Ze=Ae*Je+we,ot=-1,ht=0,ie=0;ie<64;ie++)at=Ze+(ht=ie>>3)*Ae+(ot=4*(7&ie)),Je+ht>=Te&&(at-=Ae*(Je+1+ht-Te)),we+ot>=Ae&&(at-=we+ot-Ae+4),De=rt[at++],Re=rt[at++],Ue=rt[at++],B[ie]=(re[De]+re[Re+256|0]+re[Ue+512|0]>>16)-128,z[ie]=(re[De+768|0]+re[Re+1024|0]+re[Ue+1280|0]>>16)-128,H[ie]=(re[De+1280|0]+re[Re+1536|0]+re[Ue+1792|0]>>16)-128;ne=qe(B,f,ne,e,r),ue=qe(z,p,ue,t,i),pe=qe(H,p,pe,t,i),we+=32}Je+=8}if(I>=0){var tt=[];tt[1]=I+1,tt[0]=(1<<I+1)-1,ce(tt)}return Se(65497),new Uint8Array(C)},n=n||50,(function(){for(var q=String.fromCharCode,J=0;J<256;J++)he[J]=q(J)})(),e=K(D,k),t=K(L,F),r=K(G,S),i=K(ae,ve),(function(){for(var q=1,J=2,ne=1;ne<=15;ne++){for(var ue=q;ue<J;ue++)N[32767+ue]=ne,y[32767+ue]=[],y[32767+ue][1]=ne,y[32767+ue][0]=ue;for(var pe=-(J-1);pe<=-q;pe++)N[32767+pe]=ne,y[32767+pe]=[],y[32767+pe][1]=ne,y[32767+pe][0]=J-1+pe;q<<=1,J<<=1}})(),(function(){for(var q=0;q<256;q++)re[q]=19595*q,re[q+256|0]=38470*q,re[q+512|0]=7471*q+32768,re[q+768|0]=-11059*q,re[q+1024|0]=-21709*q,re[q+1280|0]=32768*q+8421375,re[q+1536|0]=-27439*q,re[q+1792|0]=-5329*q})(),X(n)}function ko(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ON(n){function e(k){if(!k)throw Error("assert :P")}function t(k,G,S){for(var L=0;4>L;L++)if(k[G+L]!=S.charCodeAt(L))return!0;return!1}function r(k,G,S,L,F){for(var ae=0;ae<F;ae++)k[G+ae]=S[L+ae]}function i(k,G,S,L){for(var F=0;F<L;F++)k[G+F]=S}function a(k){return new Int32Array(k)}function c(k,G){for(var S=[],L=0;L<k;L++)S.push(new G);return S}function d(k,G){var S=[];return(function L(F,ae,ve){for(var K=ve[ae],ce=0;ce<K&&(F.push(ve.length>ae+1?[]:new G),!(ve.length<ae+1));ce++)L(F[ce],ae+1,ve)})(S,0,k),S}var h=function(){var k=this;function G(g,w){for(var E=1<<w-1>>>0;g&E;)E>>>=1;return E?(g&E-1)+E:g}function S(g,w,E,P,$){e(!(P%E));do g[w+(P-=E)]=$;while(0<P)}function L(g,w,E,P,$){if(e(2328>=$),512>=$)var W=a(512);else if((W=a($))==null)return 0;return(function(Y,Z,te,le,ye,Le){var se,_e,Ce=Z,Be=1<<te,Ie=a(16),Ve=a(16);for(e(ye!=0),e(le!=null),e(Y!=null),e(0<te),_e=0;_e<ye;++_e){if(15<le[_e])return 0;++Ie[le[_e]]}if(Ie[0]==ye)return 0;for(Ve[1]=0,se=1;15>se;++se){if(Ie[se]>1<<se)return 0;Ve[se+1]=Ve[se]+Ie[se]}for(_e=0;_e<ye;++_e)se=le[_e],0<le[_e]&&(Le[Ve[se]++]=_e);if(Ve[15]==1)return(le=new F).g=0,le.value=Le[0],S(Y,Ce,1,Be,le),Be;var $e,et=-1,Ke=Be-1,vt=0,ut=1,Jt=1,pt=1<<te;for(_e=0,se=1,ye=2;se<=te;++se,ye<<=1){if(ut+=Jt<<=1,0>(Jt-=Ie[se]))return 0;for(;0<Ie[se];--Ie[se])(le=new F).g=se,le.value=Le[_e++],S(Y,Ce+vt,ye,pt,le),vt=G(vt,se)}for(se=te+1,ye=2;15>=se;++se,ye<<=1){if(ut+=Jt<<=1,0>(Jt-=Ie[se]))return 0;for(;0<Ie[se];--Ie[se]){if(le=new F,(vt&Ke)!=et){for(Ce+=pt,$e=1<<(et=se)-te;15>et&&!(0>=($e-=Ie[et]));)++et,$e<<=1;Be+=pt=1<<($e=et-te),Y[Z+(et=vt&Ke)].g=$e+te,Y[Z+et].value=Ce-Z-et}le.g=se-te,le.value=Le[_e++],S(Y,Ce+(vt>>te),ye,pt,le),vt=G(vt,se)}}return ut!=2*Ve[15]-1?0:Be})(g,w,E,P,$,W)}function F(){this.value=this.g=0}function ae(){this.value=this.g=0}function ve(){this.G=c(5,F),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Qo,ae)}function K(g,w,E,P){e(g!=null),e(w!=null),e(2147483648>P),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=w,g.pa=E,g.Jd=w,g.Yc=E+P,g.Zc=4<=P?E+P-4+1:E,De(g)}function ce(g,w){for(var E=0;0<w--;)E|=Ue(g,128)<<w;return E}function me(g,w){var E=ce(g,w);return Re(g)?-E:E}function Se(g,w,E,P){var $,W=0;for(e(g!=null),e(w!=null),e(4294967288>P),g.Sb=P,g.Ra=0,g.u=0,g.h=0,4<P&&(P=4),$=0;$<P;++$)W+=w[E+$]<<8*$;g.Ra=W,g.bb=P,g.oa=w,g.pa=E}function qe(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<Ga-8>>>0,++g.bb,g.u-=8;ue(g)&&(g.h=1,g.u=0)}function X(g,w){if(e(0<=w),!g.h&&w<=os){var E=ne(g)&ws[w];return g.u+=w,qe(g),E}return g.h=1,g.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ne(g){return g.Ra>>>(g.u&Ga-1)>>>0}function ue(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>Ga}function pe(g,w){g.u=w,g.h=ue(g)}function we(g){g.u>=Wa&&(e(g.u>=Wa),qe(g))}function De(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function Re(g){return ce(g,1)}function Ue(g,w){var E=g.Ca;0>g.b&&De(g);var P=g.b,$=E*w>>>8,W=(g.I>>>P>$)+0;for(W?(E-=$,g.I-=$+1<<P>>>0):E=$+1,P=E,$=0;256<=P;)$+=8,P>>=8;return P=7^$+bo[P],g.b-=P,g.Ca=(E<<P)-1,W}function Ze(g,w,E){g[w+0]=E>>24&255,g[w+1]=E>>16&255,g[w+2]=E>>8&255,g[w+3]=255&E}function at(g,w){return g[w+0]|g[w+1]<<8}function ot(g,w){return at(g,w)|g[w+2]<<16}function ht(g,w){return at(g,w)|at(g,w+2)<<16}function ie(g,w){var E=1<<w;return e(g!=null),e(0<w),g.X=a(E),g.X==null?0:(g.Mb=32-w,g.Xa=w,1)}function rt(g,w){e(g!=null),e(w!=null),e(g.Xa==w.Xa),r(w.X,0,g.X,0,1<<w.Xa)}function Kt(){this.X=[],this.Xa=this.Mb=0}function Te(g,w,E,P){e(E!=null),e(P!=null);var $=E[0],W=P[0];return $==0&&($=(g*W+w/2)/w),W==0&&(W=(w*$+g/2)/g),0>=$||0>=W?0:(E[0]=$,P[0]=W,1)}function Ae(g,w){return g+(1<<w)-1>>>w}function Je(g,w){return((4278255360&g)+(4278255360&w)>>>0&4278255360)+((16711935&g)+(16711935&w)>>>0&16711935)>>>0}function tt(g,w){k[w]=function(E,P,$,W,Y,Z,te){var le;for(le=0;le<Y;++le){var ye=k[g](Z[te+le-1],$,W+le);Z[te+le]=Je(E[P+le],ye)}}}function it(){this.ud=this.hd=this.jd=0}function lt(g,w){return((4278124286&(g^w))>>>1)+(g&w)>>>0}function zt(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function $t(g,w){return zt(g+(g-w+.5>>1))}function Gt(g,w,E){return Math.abs(w-E)-Math.abs(g-E)}function cn(g,w,E,P,$,W,Y){for(P=W[Y-1],E=0;E<$;++E)W[Y+E]=P=Je(g[w+E],P)}function nn(g,w,E,P,$){var W;for(W=0;W<E;++W){var Y=g[w+W],Z=Y>>8&255,te=16711935&(te=(te=16711935&Y)+((Z<<16)+Z));P[$+W]=(4278255360&Y)+te>>>0}}function bt(g,w){w.jd=255&g,w.hd=g>>8&255,w.ud=g>>16&255}function Xt(g,w,E,P,$,W){var Y;for(Y=0;Y<P;++Y){var Z=w[E+Y],te=Z>>>8,le=Z,ye=255&(ye=(ye=Z>>>16)+((g.jd<<24>>24)*(te<<24>>24)>>>5));le=255&(le=(le+=(g.hd<<24>>24)*(te<<24>>24)>>>5)+((g.ud<<24>>24)*(ye<<24>>24)>>>5)),$[W+Y]=(4278255360&Z)+(ye<<16)+le}}function _t(g,w,E,P,$){k[w]=function(W,Y,Z,te,le,ye,Le,se,_e){for(te=Le;te<se;++te)for(Le=0;Le<_e;++Le)le[ye++]=$(Z[P(W[Y++])])},k[g]=function(W,Y,Z,te,le,ye,Le){var se=8>>W.b,_e=W.Ea,Ce=W.K[0],Be=W.w;if(8>se)for(W=(1<<W.b)-1,Be=(1<<se)-1;Y<Z;++Y){var Ie,Ve=0;for(Ie=0;Ie<_e;++Ie)Ie&W||(Ve=P(te[le++])),ye[Le++]=$(Ce[Ve&Be]),Ve>>=se}else k["VP8LMapColor"+E](te,le,Ce,Be,ye,Le,Y,Z,_e)}}function yr(g,w,E,P,$){for(E=w+E;w<E;){var W=g[w++];P[$++]=W>>16&255,P[$++]=W>>8&255,P[$++]=255&W}}function rn(g,w,E,P,$){for(E=w+E;w<E;){var W=g[w++];P[$++]=W>>16&255,P[$++]=W>>8&255,P[$++]=255&W,P[$++]=W>>24&255}}function It(g,w,E,P,$){for(E=w+E;w<E;){var W=(Y=g[w++])>>16&240|Y>>12&15,Y=240&Y|Y>>28&15;P[$++]=W,P[$++]=Y}}function Bt(g,w,E,P,$){for(E=w+E;w<E;){var W=(Y=g[w++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;P[$++]=W,P[$++]=Y}}function en(g,w,E,P,$){for(E=w+E;w<E;){var W=g[w++];P[$++]=255&W,P[$++]=W>>8&255,P[$++]=W>>16&255}}function Et(g,w,E,P,$,W){if(W==0)for(E=w+E;w<E;)Ze(P,((W=g[w++])[0]>>24|W[1]>>8&65280|W[2]<<8&16711680|W[3]<<24)>>>0),$+=32;else r(P,$,g,w,E)}function Dn(g,w){k[w][0]=k[g+"0"],k[w][1]=k[g+"1"],k[w][2]=k[g+"2"],k[w][3]=k[g+"3"],k[w][4]=k[g+"4"],k[w][5]=k[g+"5"],k[w][6]=k[g+"6"],k[w][7]=k[g+"7"],k[w][8]=k[g+"8"],k[w][9]=k[g+"9"],k[w][10]=k[g+"10"],k[w][11]=k[g+"11"],k[w][12]=k[g+"12"],k[w][13]=k[g+"13"],k[w][14]=k[g+"0"],k[w][15]=k[g+"0"]}function Ft(g){return g==Pu||g==vd||g==jc||g==yd}function qt(){this.eb=[],this.size=this.A=this.fb=0}function Fn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function St(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new qt,this.f.kb=new Fn,this.sd=null}function Nt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function un(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function wi(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function ui(g,w){var E=g.T,P=w.ba.f.RGBA,$=P.eb,W=P.fb+g.ka*P.A,Y=Ii[w.ba.S],Z=g.y,te=g.O,le=g.f,ye=g.N,Le=g.ea,se=g.W,_e=w.cc,Ce=w.dc,Be=w.Mc,Ie=w.Nc,Ve=g.ka,$e=g.ka+g.T,et=g.U,Ke=et+1>>1;for(Ve==0?Y(Z,te,null,null,le,ye,Le,se,le,ye,Le,se,$,W,null,null,et):(Y(w.ec,w.fc,Z,te,_e,Ce,Be,Ie,le,ye,Le,se,$,W-P.A,$,W,et),++E);Ve+2<$e;Ve+=2)_e=le,Ce=ye,Be=Le,Ie=se,ye+=g.Rc,se+=g.Rc,W+=2*P.A,Y(Z,(te+=2*g.fa)-g.fa,Z,te,_e,Ce,Be,Ie,le,ye,Le,se,$,W-P.A,$,W,et);return te+=g.fa,g.j+$e<g.o?(r(w.ec,w.fc,Z,te,et),r(w.cc,w.dc,le,ye,Ke),r(w.Mc,w.Nc,Le,se,Ke),E--):1&$e||Y(Z,te,null,null,le,ye,Le,se,le,ye,Le,se,$,W+P.A,null,null,et),E}function Hs(g,w,E){var P=g.F,$=[g.J];if(P!=null){var W=g.U,Y=w.ba.S,Z=Y==ku||Y==jc;w=w.ba.f.RGBA;var te=[0],le=g.ka;te[0]=g.T,g.Kb&&(le==0?--te[0]:(--le,$[0]-=g.width),g.j+g.ka+g.T==g.o&&(te[0]=g.o-g.j-le));var ye=w.eb;le=w.fb+le*w.A,g=Cu(P,$[0],g.width,W,te,ye,le+(Z?0:3),w.A),e(E==te),g&&Ft(Y)&&Ml(ye,le,Z,W,te,w.A)}return 0}function ei(g){var w=g.ma,E=w.ba.S,P=11>E,$=E==$i||E==Js||E==ku||E==Sc||E==12||Ft(E);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!yo(w.Oa,g,$?11:12))return 0;if($&&Ft(E)&&Qt(),g.da)alert("todo:use_scaling");else{if(P){if(w.Ib=wi,g.Kb){if(E=g.U+1>>1,w.memory=a(g.U+2*E),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+g.U,w.Mc=w.cc,w.Nc=w.dc+E,w.Ib=ui,Qt()}}else alert("todo:EmitYUV");$&&(w.Jb=Hs,P&&Me())}if(P&&!rl){for(g=0;256>g;++g)Ri[g]=89858*(g-128)+Cc>>ia,b0[g]=-22014*(g-128)+Cc,Rm[g]=-45773*(g-128),Ad[g]=113618*(g-128)+Cc>>ia;for(g=Vl;g<nl;++g)w=76283*(g-16)+Cc>>ia,w0[g-Vl]=ts(w,255),_0[g-Vl]=ts(w+8>>4,15);rl=1}return 1}function Tt(g){var w=g.ma,E=g.U,P=g.T;return e(!(1&g.ka)),0>=E||0>=P?0:(E=w.Ib(g,w),w.Jb!=null&&w.Jb(g,w,E),w.Dc+=E,1)}function ga(g){g.ma.memory=null}function Ji(g,w,E,P){return X(g,8)!=47?0:(w[0]=X(g,14)+1,E[0]=X(g,14)+1,P[0]=X(g,1),X(g,3)!=0?0:!g.h)}function Mi(g,w){if(4>g)return g+1;var E=g-2>>1;return(2+(1&g)<<E)+X(w,E)+1}function Oi(g,w){return 120<w?w-120:1<=(E=((E=ea[w-1])>>4)*g+(8-(15&E)))?E:1;var E}function Yn(g,w,E){var P=ne(E),$=g[w+=255&P].g-8;return 0<$&&(pe(E,E.u+8),P=ne(E),w+=g[w].value,w+=P&(1<<$)-1),pe(E,E.u+g[w].g),g[w].value}function ir(g,w,E){return E.g+=g.g,E.value+=g.value<<w>>>0,e(8>=E.g),g.g}function zr(g,w,E){var P=g.xc;return e((w=P==0?0:g.vc[g.md*(E>>P)+(w>>P)])<g.Wb),g.Ya[w]}function _i(g,w,E,P){var $=g.ab,W=g.c*w,Y=g.C;w=Y+w;var Z=E,te=P;for(P=g.Ta,E=g.Ua;0<$--;){var le=g.gc[$],ye=Y,Le=w,se=Z,_e=te,Ce=(te=P,Z=E,le.Ea);switch(e(ye<Le),e(Le<=le.nc),le.hc){case 2:Or(se,_e,(Le-ye)*Ce,te,Z);break;case 0:var Be=ye,Ie=Le,Ve=te,$e=Z,et=(pt=le).Ea;Be==0&&(wc(se,_e,null,null,1,Ve,$e),cn(se,_e+1,0,0,et-1,Ve,$e+1),_e+=et,$e+=et,++Be);for(var Ke=1<<pt.b,vt=Ke-1,ut=Ae(et,pt.b),Jt=pt.K,pt=pt.w+(Be>>pt.b)*ut;Be<Ie;){var gn=Jt,gr=pt,sn=1;for(_c(se,_e,Ve,$e-et,1,Ve,$e);sn<et;){var dt=(sn&~vt)+Ke;dt>et&&(dt=et),(0,wo[gn[gr++]>>8&15])(se,_e+ +sn,Ve,$e+sn-et,dt-sn,Ve,$e+sn),sn=dt}_e+=et,$e+=et,++Be&vt||(pt+=ut)}Le!=le.nc&&r(te,Z-Ce,te,Z+(Le-ye-1)*Ce,Ce);break;case 1:for(Ce=se,Ie=_e,et=(se=le.Ea)-($e=se&~(Ve=(_e=1<<le.b)-1)),Be=Ae(se,le.b),Ke=le.K,le=le.w+(ye>>le.b)*Be;ye<Le;){for(vt=Ke,ut=le,Jt=new it,pt=Ie+$e,gn=Ie+se;Ie<pt;)bt(vt[ut++],Jt),Nc(Jt,Ce,Ie,_e,te,Z),Ie+=_e,Z+=_e;Ie<gn&&(bt(vt[ut++],Jt),Nc(Jt,Ce,Ie,et,te,Z),Ie+=et,Z+=et),++ye&Ve||(le+=Be)}break;case 3:if(se==te&&_e==Z&&0<le.b){for(Ie=te,se=Ce=Z+(Le-ye)*Ce-($e=(Le-ye)*Ae(le.Ea,le.b)),_e=te,Ve=Z,Be=[],$e=(et=$e)-1;0<=$e;--$e)Be[$e]=_e[Ve+$e];for($e=et-1;0<=$e;--$e)Ie[se+$e]=Be[$e];fd(le,ye,Le,te,Ce,te,Z)}else fd(le,ye,Le,se,_e,te,Z)}Z=P,te=E}te!=E&&r(P,E,Z,te,W)}function di(g,w){var E=g.V,P=g.Ba+g.c*g.C,$=w-g.C;if(e(w<=g.l.o),e(16>=$),0<$){var W=g.l,Y=g.Ta,Z=g.Ua,te=W.width;if(_i(g,$,E,P),$=Z=[Z],e((E=g.C)<(P=w)),e(W.v<W.va),P>W.o&&(P=W.o),E<W.j){var le=W.j-E;E=W.j,$[0]+=le*te}if(E>=P?E=0:($[0]+=4*W.v,W.ka=E-W.j,W.U=W.va-W.v,W.T=P-E,E=1),E){if(Z=Z[0],11>(E=g.ca).S){var ye=E.f.RGBA,Le=(P=E.S,$=W.U,W=W.T,le=ye.eb,ye.A),se=W;for(ye=ye.fb+g.Ma*ye.A;0<se--;){var _e=Y,Ce=Z,Be=$,Ie=le,Ve=ye;switch(P){case gd:Ac(_e,Ce,Be,Ie,Ve);break;case $i:_o(_e,Ce,Be,Ie,Ve);break;case Pu:_o(_e,Ce,Be,Ie,Ve),Ml(Ie,Ve,0,Be,1,0);break;case xd:Pl(_e,Ce,Be,Ie,Ve);break;case Js:Et(_e,Ce,Be,Ie,Ve,1);break;case vd:Et(_e,Ce,Be,Ie,Ve,1),Ml(Ie,Ve,0,Be,1,0);break;case ku:Et(_e,Ce,Be,Ie,Ve,0);break;case jc:Et(_e,Ce,Be,Ie,Ve,0),Ml(Ie,Ve,1,Be,1,0);break;case Sc:No(_e,Ce,Be,Ie,Ve);break;case yd:No(_e,Ce,Be,Ie,Ve),Xs(Ie,Ve,Be,1,0);break;case Xo:Qa(_e,Ce,Be,Ie,Ve);break;default:e(0)}Z+=te,ye+=Le}g.Ma+=W}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=E.height)}}g.C=w,e(g.C<=g.i)}function qn(g){var w;if(0<g.ua)return 0;for(w=0;w<g.Wb;++w){var E=g.Ya[w].G,P=g.Ya[w].H;if(0<E[1][P[1]+0].g||0<E[2][P[2]+0].g||0<E[3][P[3]+0].g)return 0}return 1}function Qn(g,w,E,P,$,W){if(g.Z!=0){var Y=g.qd,Z=g.rd;for(e(jo[g.Z]!=null);w<E;++w)jo[g.Z](Y,Z,P,$,P,$,W),Y=P,Z=$,$+=W;g.qd=Y,g.rd=Z}}function Hr(g,w){var E=g.l.ma,P=E.Z==0||E.Z==1?g.l.j:g.C;if(P=g.C<P?P:g.C,e(w<=g.l.o),w>P){var $=g.l.width,W=E.ca,Y=E.tb+$*P,Z=g.V,te=g.Ba+g.c*P,le=g.gc;e(g.ab==1),e(le[0].hc==3),Ka(le[0],P,w,Z,te,W,Y),Qn(E,P,w,W,Y,$)}g.C=g.Ma=w}function Fi(g,w,E,P,$,W,Y){var Z=g.$/P,te=g.$%P,le=g.m,ye=g.s,Le=E+g.$,se=Le;$=E+P*$;var _e=E+P*W,Ce=280+ye.ua,Be=g.Pb?Z:16777216,Ie=0<ye.ua?ye.Wa:null,Ve=ye.wc,$e=Le<_e?zr(ye,te,Z):null;e(g.C<W),e(_e<=$);var et=!1;e:for(;;){for(;et||Le<_e;){var Ke=0;if(Z>=Be){var vt=Le-E;e((Be=g).Pb),Be.wd=Be.m,Be.xd=vt,0<Be.s.ua&&rt(Be.s.Wa,Be.s.vb),Be=Z+Jo}if(te&Ve||($e=zr(ye,te,Z)),e($e!=null),$e.Qb&&(w[Le]=$e.qb,et=!0),!et)if(we(le),$e.jc){Ke=le,vt=w;var ut=Le,Jt=$e.pd[ne(Ke)&Qo-1];e($e.jc),256>Jt.g?(pe(Ke,Ke.u+Jt.g),vt[ut]=Jt.value,Ke=0):(pe(Ke,Ke.u+Jt.g-256),e(256<=Jt.value),Ke=Jt.value),Ke==0&&(et=!0)}else Ke=Yn($e.G[0],$e.H[0],le);if(le.h)break;if(et||256>Ke){if(!et)if($e.nd)w[Le]=($e.qb|Ke<<8)>>>0;else{if(we(le),et=Yn($e.G[1],$e.H[1],le),we(le),vt=Yn($e.G[2],$e.H[2],le),ut=Yn($e.G[3],$e.H[3],le),le.h)break;w[Le]=(ut<<24|et<<16|Ke<<8|vt)>>>0}if(et=!1,++Le,++te>=P&&(te=0,++Z,Y!=null&&Z<=W&&!(Z%16)&&Y(g,Z),Ie!=null))for(;se<Le;)Ke=w[se++],Ie.X[(506832829*Ke&4294967295)>>>Ie.Mb]=Ke}else if(280>Ke){if(Ke=Mi(Ke-256,le),vt=Yn($e.G[4],$e.H[4],le),we(le),vt=Oi(P,vt=Mi(vt,le)),le.h)break;if(Le-E<vt||$-Le<Ke)break e;for(ut=0;ut<Ke;++ut)w[Le+ut]=w[Le+ut-vt];for(Le+=Ke,te+=Ke;te>=P;)te-=P,++Z,Y!=null&&Z<=W&&!(Z%16)&&Y(g,Z);if(e(Le<=$),te&Ve&&($e=zr(ye,te,Z)),Ie!=null)for(;se<Le;)Ke=w[se++],Ie.X[(506832829*Ke&4294967295)>>>Ie.Mb]=Ke}else{if(!(Ke<Ce))break e;for(et=Ke-280,e(Ie!=null);se<Le;)Ke=w[se++],Ie.X[(506832829*Ke&4294967295)>>>Ie.Mb]=Ke;Ke=Le,e(!(et>>>(vt=Ie).Xa)),w[Ke]=vt.X[et],et=!0}et||e(le.h==ue(le))}if(g.Pb&&le.h&&Le<$)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&rt(g.s.vb,g.s.Wa);else{if(le.h)break e;Y?.(g,Z>W?W:Z),g.a=0,g.$=Le-E}return 1}return g.a=3,0}function gs(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var w=g.Wa;w!=null&&(w.X=null),g.vb=null,e(g!=null)}function Fa(){var g=new Dt;return g==null?null:(g.a=0,g.xb=zh,Dn("Predictor","VP8LPredictors"),Dn("Predictor","VP8LPredictors_C"),Dn("PredictorAdd","VP8LPredictorsAdd"),Dn("PredictorAdd","VP8LPredictorsAdd_C"),Or=nn,Nc=Xt,Ac=yr,_o=rn,No=It,Qa=Bt,Pl=en,k.VP8LMapColor32b=Ya,k.VP8LMapColor8b=Ei,g)}function Rs(g,w,E,P,$){var W=1,Y=[g],Z=[w],te=P.m,le=P.s,ye=null,Le=0;e:for(;;){if(E)for(;W&&X(te,1);){var se=Y,_e=Z,Ce=P,Be=1,Ie=Ce.m,Ve=Ce.gc[Ce.ab],$e=X(Ie,2);if(Ce.Oc&1<<$e)W=0;else{switch(Ce.Oc|=1<<$e,Ve.hc=$e,Ve.Ea=se[0],Ve.nc=_e[0],Ve.K=[null],++Ce.ab,e(4>=Ce.ab),$e){case 0:case 1:Ve.b=X(Ie,3)+2,Be=Rs(Ae(Ve.Ea,Ve.b),Ae(Ve.nc,Ve.b),0,Ce,Ve.K),Ve.K=Ve.K[0];break;case 3:var et,Ke=X(Ie,8)+1,vt=16<Ke?0:4<Ke?1:2<Ke?2:3;if(se[0]=Ae(Ve.Ea,vt),Ve.b=vt,et=Be=Rs(Ke,1,0,Ce,Ve.K)){var ut,Jt=Ke,pt=Ve,gn=1<<(8>>pt.b),gr=a(gn);if(gr==null)et=0;else{var sn=pt.K[0],dt=pt.w;for(gr[0]=pt.K[0][0],ut=1;ut<1*Jt;++ut)gr[ut]=Je(sn[dt+ut],gr[ut-1]);for(;ut<4*gn;++ut)gr[ut]=0;pt.K[0]=null,pt.K[0]=gr,et=1}}Be=et;break;case 2:break;default:e(0)}W=Be}}if(Y=Y[0],Z=Z[0],W&&X(te,1)&&!(W=1<=(Le=X(te,4))&&11>=Le)){P.a=3;break e}var st;if(st=W)t:{var wr,Ut,ln,$n=P,ri=Y,Li=Z,lr=Le,Gr=E,Gi=$n.m,Wr=$n.s,fn=[null],In=1,_r=0,On=ta[lr];n:for(;;){if(Gr&&X(Gi,1)){var ii=X(Gi,3)+2,Nr=Ae(ri,ii),Rn=Ae(Li,ii),Vr=Nr*Rn;if(!Rs(Nr,Rn,0,$n,fn))break n;for(fn=fn[0],Wr.xc=ii,wr=0;wr<Vr;++wr){var Gn=fn[wr]>>8&65535;fn[wr]=Gn,Gn>=In&&(In=Gn+1)}}if(Gi.h)break n;for(Ut=0;5>Ut;++Ut){var Yr=Fl[Ut];!Ut&&0<lr&&(Yr+=1<<lr),_r<Yr&&(_r=Yr)}var Kr=c(In*On,F),Jn=In,En=c(Jn,ve);if(En==null)var Wi=null;else e(65536>=Jn),Wi=En;var Cr=a(_r);if(Wi==null||Cr==null||Kr==null){$n.a=1;break n}var Lt=Kr;for(wr=ln=0;wr<In;++wr){var Mt=Wi[wr],Ln=Mt.G,_s=Mt.H,sa=0,cs=1,Qr=0;for(Ut=0;5>Ut;++Ut){Yr=Fl[Ut],Ln[Ut]=Lt,_s[Ut]=ln,!Ut&&0<lr&&(Yr+=1<<lr);i:{var il,sl=Yr,jd=$n,cr=Cr,$h=Lt,Gh=ln,Ed=0,Eo=jd.m,N0=X(Eo,1);if(i(cr,0,0,sl),N0){var Wh=X(Eo,1)+1,Yh=X(Eo,1),Td=X(Eo,Yh==0?1:8);cr[Td]=1,Wh==2&&(cr[Td=X(Eo,8)]=1);var pi=1}else{var Ir=a(19),Fu=X(Eo,4)+4;if(19<Fu){jd.a=3;var al=0;break i}for(il=0;il<Fu;++il)Ir[Du[il]]=X(Eo,3);var Rc=void 0,Bl=void 0,Za=jd,Cd=Ir,Lc=sl,Id=cr,Rd=0,To=Za.m,Kh=8,Qh=c(128,F);r:for(;L(Qh,0,7,Cd,19);){if(X(To,1)){var Lm=2+2*X(To,3);if((Rc=2+X(To,Lm))>Lc)break r}else Rc=Lc;for(Bl=0;Bl<Lc&&Rc--;){we(To);var Xh=Qh[0+(127&ne(To))];pe(To,To.u+Xh.g);var ol=Xh.value;if(16>ol)Id[Bl++]=ol,ol!=0&&(Kh=ol);else{var km=ol==16,Pm=ol-16,Dm=Ec[Pm],Jh=X(To,Zs[Pm])+Dm;if(Bl+Jh>Lc)break r;for(var Mm=km?Kh:0;0<Jh--;)Id[Bl++]=Mm}}Rd=1;break r}Rd||(Za.a=3),pi=Rd}(pi=pi&&!Eo.h)&&(Ed=L($h,Gh,8,cr,sl)),pi&&Ed!=0?al=Ed:(jd.a=3,al=0)}if(al==0)break n;if(cs&&bd[Ut]==1&&(cs=Lt[ln].g==0),sa+=Lt[ln].g,ln+=al,3>=Ut){var Ul,Ld=Cr[0];for(Ul=1;Ul<Yr;++Ul)Cr[Ul]>Ld&&(Ld=Cr[Ul]);Qr+=Ld}}if(Mt.nd=cs,Mt.Qb=0,cs&&(Mt.qb=(Ln[3][_s[3]+0].value<<24|Ln[1][_s[1]+0].value<<16|Ln[2][_s[2]+0].value)>>>0,sa==0&&256>Ln[0][_s[0]+0].value&&(Mt.Qb=1,Mt.qb+=Ln[0][_s[0]+0].value<<8)),Mt.jc=!Mt.Qb&&6>Qr,Mt.jc){var qu,eo=Mt;for(qu=0;qu<Qo;++qu){var Co=qu,Io=eo.pd[Co],kd=eo.G[0][eo.H[0]+Co];256<=kd.value?(Io.g=kd.g+256,Io.value=kd.value):(Io.g=0,Io.value=0,Co>>=ir(kd,8,Io),Co>>=ir(eo.G[1][eo.H[1]+Co],16,Io),Co>>=ir(eo.G[2][eo.H[2]+Co],0,Io),ir(eo.G[3][eo.H[3]+Co],24,Io))}}}Wr.vc=fn,Wr.Wb=In,Wr.Ya=Wi,Wr.yc=Kr,st=1;break t}st=0}if(!(W=st)){P.a=3;break e}if(0<Le){if(le.ua=1<<Le,!ie(le.Wa,Le)){P.a=1,W=0;break e}}else le.ua=0;var Pd=P,zl=Y,Om=Z,kc=Pd.s,Pc=kc.xc;if(Pd.c=zl,Pd.i=Om,kc.md=Ae(zl,Pc),kc.wc=Pc==0?-1:(1<<Pc)-1,E){P.xb=Zo;break e}if((ye=a(Y*Z))==null){P.a=1,W=0;break e}W=(W=Fi(P,ye,0,Y,Z,Z,null))&&!te.h;break e}return W?($!=null?$[0]=ye:(e(ye==null),e(E)),P.$=0,E||gs(le)):gs(le),W}function qi(g,w){var E=g.c*g.i,P=E+w+16*w;return e(g.c<=w),g.V=a(P),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+E+w,1)}function xa(g,w){var E=g.C,P=w-E,$=g.V,W=g.Ba+g.c*E;for(e(w<=g.l.o);0<P;){var Y=16<P?16:P,Z=g.l.ma,te=g.l.width,le=te*Y,ye=Z.ca,Le=Z.tb+te*E,se=g.Ta,_e=g.Ua;_i(g,Y,$,W),qs(se,_e,ye,Le,le),Qn(Z,E,E+Y,ye,Le,te),P-=Y,$+=Y*g.c,E+=Y}e(E==w),g.C=g.Ma=w}function Zi(){this.ub=this.yd=this.td=this.Rb=0}function Ni(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function es(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function xs(){this.Yb=(function(){var g=[];return(function w(E,P,$){for(var W=$[P],Y=0;Y<W&&(E.push($.length>P+1?[]:0),!($.length<P+1));Y++)w(E[Y],P+1,$)})(g,0,[3,11]),g})()}function br(){this.jb=a(3),this.Wc=d([4,8],xs),this.Xc=d([4,17],xs)}function Uo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Vi(){this.ld=this.La=this.dd=this.tc=0}function vs(){this.Na=this.la=0}function Ls(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ho(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function zo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vi),this.Y=0,this.ya=Array(new ho),this.aa=0,this.l=new hi}function Ho(){this.y=a(16),this.f=a(8),this.ea=a(8)}function El(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new Zi,this.Kc=new Ni,this.ed=new Uo,this.Qa=new es,this.Ic=this.$c=this.Aa=0,this.D=new zo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,q),this.ia=0,this.pb=c(4,Ls),this.Pa=new br,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ho),this.Hd=0,this.rb=Array(new vs),this.sb=0,this.wa=Array(new Vi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ho),this.L=this.aa=0,this.gd=d([4,2],Vi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ts(g,w){return 0>g?0:g>w?w:g}function hi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function jr(){var g=new El;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,Vs||(Vs=bn)),g}function mn(g,w,E){return g.a==0&&(g.a=w,g.sc=E,g.cb=0),0}function va(g,w,E){return 3<=E&&g[w+0]==157&&g[w+1]==1&&g[w+2]==42}function ys(g,w){if(g==null)return 0;if(g.a=0,g.sc="OK",w==null)return mn(g,2,"null VP8Io passed to VP8GetHeaders()");var E=w.data,P=w.w,$=w.ha;if(4>$)return mn(g,7,"Truncated header.");var W=E[P+0]|E[P+1]<<8|E[P+2]<<16,Y=g.Od;if(Y.Rb=!(1&W),Y.td=W>>1&7,Y.yd=W>>4&1,Y.ub=W>>5,3<Y.td)return mn(g,3,"Incorrect keyframe parameters.");if(!Y.yd)return mn(g,4,"Frame not displayable.");P+=3,$-=3;var Z=g.Kc;if(Y.Rb){if(7>$)return mn(g,7,"cannot parse picture header");if(!va(E,P,$))return mn(g,3,"Bad code word");Z.c=16383&(E[P+4]<<8|E[P+3]),Z.Td=E[P+4]>>6,Z.i=16383&(E[P+6]<<8|E[P+5]),Z.Ud=E[P+6]>>6,P+=7,$-=7,g.za=Z.c+15>>4,g.Ub=Z.i+15>>4,w.width=Z.c,w.height=Z.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,i((W=g.Pa).jb,0,255,W.jb.length),e((W=g.Qa)!=null),W.Cb=0,W.Bb=0,W.Fb=1,i(W.Zb,0,0,W.Zb.length),i(W.Lb,0,0,W.Lb)}if(Y.ub>$)return mn(g,7,"bad partition length");K(W=g.m,E,P,Y.ub),P+=Y.ub,$-=Y.ub,Y.Rb&&(Z.Ld=Re(W),Z.Kd=Re(W)),Z=g.Qa;var te,le=g.Pa;if(e(W!=null),e(Z!=null),Z.Cb=Re(W),Z.Cb){if(Z.Bb=Re(W),Re(W)){for(Z.Fb=Re(W),te=0;4>te;++te)Z.Zb[te]=Re(W)?me(W,7):0;for(te=0;4>te;++te)Z.Lb[te]=Re(W)?me(W,6):0}if(Z.Bb)for(te=0;3>te;++te)le.jb[te]=Re(W)?ce(W,8):255}else Z.Bb=0;if(W.Ka)return mn(g,3,"cannot parse segment header");if((Z=g.ed).zd=Re(W),Z.Tb=ce(W,6),Z.wb=ce(W,3),Z.Pc=Re(W),Z.Pc&&Re(W)){for(le=0;4>le;++le)Re(W)&&(Z.vd[le]=me(W,6));for(le=0;4>le;++le)Re(W)&&(Z.od[le]=me(W,6))}if(g.L=Z.Tb==0?0:Z.zd?1:2,W.Ka)return mn(g,3,"cannot parse filter header");var ye=$;if($=te=P,P=te+ye,Z=ye,g.Xb=(1<<ce(g.m,2))-1,ye<3*(le=g.Xb))E=7;else{for(te+=3*le,Z-=3*le,ye=0;ye<le;++ye){var Le=E[$+0]|E[$+1]<<8|E[$+2]<<16;Le>Z&&(Le=Z),K(g.Jc[+ye],E,te,Le),te+=Le,Z-=Le,$+=3}K(g.Jc[+le],E,te,Z),E=te<P?0:5}if(E!=0)return mn(g,E,"cannot parse partitions");for(E=ce(te=g.m,7),$=Re(te)?me(te,4):0,P=Re(te)?me(te,4):0,Z=Re(te)?me(te,4):0,le=Re(te)?me(te,4):0,te=Re(te)?me(te,4):0,ye=g.Qa,Le=0;4>Le;++Le){if(ye.Cb){var se=ye.Zb[Le];ye.Fb||(se+=E)}else{if(0<Le){g.pb[Le]=g.pb[0];continue}se=E}var _e=g.pb[Le];_e.Sc[0]=na[ts(se+$,127)],_e.Sc[1]=ra[ts(se+0,127)],_e.Eb[0]=2*na[ts(se+P,127)],_e.Eb[1]=101581*ra[ts(se+Z,127)]>>16,8>_e.Eb[1]&&(_e.Eb[1]=8),_e.Qc[0]=na[ts(se+le,117)],_e.Qc[1]=ra[ts(se+te,127)],_e.lc=se+te}if(!Y.Rb)return mn(g,4,"Not a key frame.");for(Re(W),Y=g.Pa,E=0;4>E;++E){for($=0;8>$;++$)for(P=0;3>P;++P)for(Z=0;11>Z;++Z)le=Ue(W,pr[E][$][P][Z])?ce(W,8):Im[E][$][P][Z],Y.Wc[E][$].Yb[P][Z]=le;for($=0;17>$;++$)Y.Xc[E][$]=Y.Wc[E][xn[$]]}return g.kc=Re(W),g.kc&&(g.Bd=ce(W,8)),g.cb=1}function bn(g,w,E,P,$,W,Y){var Z=w[$].Yb[E];for(E=0;16>$;++$){if(!Ue(g,Z[E+0]))return $;for(;!Ue(g,Z[E+1]);)if(Z=w[++$].Yb[0],E=0,$==16)return 16;var te=w[$+1].Yb;if(Ue(g,Z[E+2])){var le=g,ye=0;if(Ue(le,(se=Z)[(Le=E)+3]))if(Ue(le,se[Le+6])){for(Z=0,Le=2*(ye=Ue(le,se[Le+8]))+(se=Ue(le,se[Le+9+ye])),ye=0,se=Cm[Le];se[Z];++Z)ye+=ye+Ue(le,se[Z]);ye+=3+(8<<Le)}else Ue(le,se[Le+7])?(ye=7+2*Ue(le,165),ye+=Ue(le,145)):ye=5+Ue(le,159);else ye=Ue(le,se[Le+4])?3+Ue(le,se[Le+5]):2;Z=te[2]}else ye=1,Z=te[1];te=Y+Uh[$],0>(le=g).b&&De(le);var Le,se=le.b,_e=(Le=le.Ca>>1)-(le.I>>se)>>31;--le.b,le.Ca+=_e,le.Ca|=1,le.I-=(Le+1&_e)<<se,W[te]=((ye^_e)-_e)*P[(0<$)+0]}return 16}function qa(g){var w=g.rb[g.sb-1];w.la=0,w.Na=0,i(g.zc,0,0,g.zc.length),g.ja=0}function Dr(g,w,E,P,$){$=g[w+E+32*P]+($>>3),g[w+E+32*P]=-256&$?0>$?0:255:$}function mr(g,w,E,P,$,W){Dr(g,w,0,E,P+$),Dr(g,w,1,E,P+W),Dr(g,w,2,E,P-W),Dr(g,w,3,E,P-$)}function Er(g){return(20091*g>>16)+g}function fo(g,w,E,P){var $,W=0,Y=a(16);for($=0;4>$;++$){var Z=g[w+0]+g[w+8],te=g[w+0]-g[w+8],le=(35468*g[w+4]>>16)-Er(g[w+12]),ye=Er(g[w+4])+(35468*g[w+12]>>16);Y[W+0]=Z+ye,Y[W+1]=te+le,Y[W+2]=te-le,Y[W+3]=Z-ye,W+=4,w++}for($=W=0;4>$;++$)Z=(g=Y[W+0]+4)+Y[W+8],te=g-Y[W+8],le=(35468*Y[W+4]>>16)-Er(Y[W+12]),Dr(E,P,0,0,Z+(ye=Er(Y[W+4])+(35468*Y[W+12]>>16))),Dr(E,P,1,0,te+le),Dr(E,P,2,0,te-le),Dr(E,P,3,0,Z-ye),W++,P+=32}function yc(g,w,E,P){var $=g[w+0]+4,W=35468*g[w+4]>>16,Y=Er(g[w+4]),Z=35468*g[w+1]>>16;mr(E,P,0,$+Y,g=Er(g[w+1]),Z),mr(E,P,1,$+W,g,Z),mr(E,P,2,$-W,g,Z),mr(E,P,3,$-Y,g,Z)}function Tl(g,w,E,P,$){fo(g,w,E,P),$&&fo(g,w+16,E,P+4)}function Ai(g,w,E,P){Ao(g,w+0,E,P,1),Ao(g,w+32,E,P+128,1)}function Cl(g,w,E,P){var $;for(g=g[w+0]+4,$=0;4>$;++$)for(w=0;4>w;++w)Dr(E,P,w,$,g)}function ya(g,w,E,P){g[w+0]&&Mn(g,w+0,E,P),g[w+16]&&Mn(g,w+16,E,P+4),g[w+32]&&Mn(g,w+32,E,P+128),g[w+48]&&Mn(g,w+48,E,P+128+4)}function ti(g,w,E,P){var $,W=a(16);for($=0;4>$;++$){var Y=g[w+0+$]+g[w+12+$],Z=g[w+4+$]+g[w+8+$],te=g[w+4+$]-g[w+8+$],le=g[w+0+$]-g[w+12+$];W[0+$]=Y+Z,W[8+$]=Y-Z,W[4+$]=le+te,W[12+$]=le-te}for($=0;4>$;++$)Y=(g=W[0+4*$]+3)+W[3+4*$],Z=W[1+4*$]+W[2+4*$],te=W[1+4*$]-W[2+4*$],le=g-W[3+4*$],E[P+0]=Y+Z>>3,E[P+16]=le+te>>3,E[P+32]=Y-Z>>3,E[P+48]=le-te>>3,P+=64}function Va(g,w,E){var P,$=w-32,W=Hi,Y=255-g[$-1];for(P=0;P<E;++P){var Z,te=W,le=Y+g[w-1];for(Z=0;Z<E;++Z)g[w+Z]=te[le+g[$+Z]];w+=32}}function Il(g,w){Va(g,w,4)}function Rl(g,w){Va(g,w,8)}function $o(g,w){Va(g,w,16)}function Go(g,w){var E;for(E=0;16>E;++E)r(g,w+32*E,g,w-32,16)}function ba(g,w){var E;for(E=16;0<E;--E)i(g,w,g[w-1],16),w+=32}function Bi(g,w,E){var P;for(P=0;16>P;++P)i(w,E+32*P,g,16)}function ks(g,w){var E,P=16;for(E=0;16>E;++E)P+=g[w-1+32*E]+g[w+E-32];Bi(P>>5,g,w)}function wa(g,w){var E,P=8;for(E=0;16>E;++E)P+=g[w-1+32*E];Bi(P>>4,g,w)}function Ui(g,w){var E,P=8;for(E=0;16>E;++E)P+=g[w+E-32];Bi(P>>4,g,w)}function Ba(g,w){Bi(128,g,w)}function Rt(g,w,E){return g+2*w+E+2>>2}function mo(g,w){var E,P=w-32;for(P=new Uint8Array([Rt(g[P-1],g[P+0],g[P+1]),Rt(g[P+0],g[P+1],g[P+2]),Rt(g[P+1],g[P+2],g[P+3]),Rt(g[P+2],g[P+3],g[P+4])]),E=0;4>E;++E)r(g,w+32*E,P,0,P.length)}function Wo(g,w){var E=g[w-1],P=g[w-1+32],$=g[w-1+64],W=g[w-1+96];Ze(g,w+0,16843009*Rt(g[w-1-32],E,P)),Ze(g,w+32,16843009*Rt(E,P,$)),Ze(g,w+64,16843009*Rt(P,$,W)),Ze(g,w+96,16843009*Rt($,W,W))}function Ua(g,w){var E,P=4;for(E=0;4>E;++E)P+=g[w+E-32]+g[w-1+32*E];for(P>>=3,E=0;4>E;++E)i(g,w+32*E,P,4)}function ni(g,w){var E=g[w-1+0],P=g[w-1+32],$=g[w-1+64],W=g[w-1-32],Y=g[w+0-32],Z=g[w+1-32],te=g[w+2-32],le=g[w+3-32];g[w+0+96]=Rt(P,$,g[w-1+96]),g[w+1+96]=g[w+0+64]=Rt(E,P,$),g[w+2+96]=g[w+1+64]=g[w+0+32]=Rt(W,E,P),g[w+3+96]=g[w+2+64]=g[w+1+32]=g[w+0+0]=Rt(Y,W,E),g[w+3+64]=g[w+2+32]=g[w+1+0]=Rt(Z,Y,W),g[w+3+32]=g[w+2+0]=Rt(te,Z,Y),g[w+3+0]=Rt(le,te,Z)}function $r(g,w){var E=g[w+1-32],P=g[w+2-32],$=g[w+3-32],W=g[w+4-32],Y=g[w+5-32],Z=g[w+6-32],te=g[w+7-32];g[w+0+0]=Rt(g[w+0-32],E,P),g[w+1+0]=g[w+0+32]=Rt(E,P,$),g[w+2+0]=g[w+1+32]=g[w+0+64]=Rt(P,$,W),g[w+3+0]=g[w+2+32]=g[w+1+64]=g[w+0+96]=Rt($,W,Y),g[w+3+32]=g[w+2+64]=g[w+1+96]=Rt(W,Y,Z),g[w+3+64]=g[w+2+96]=Rt(Y,Z,te),g[w+3+96]=Rt(Z,te,te)}function po(g,w){var E=g[w-1+0],P=g[w-1+32],$=g[w-1+64],W=g[w-1-32],Y=g[w+0-32],Z=g[w+1-32],te=g[w+2-32],le=g[w+3-32];g[w+0+0]=g[w+1+64]=W+Y+1>>1,g[w+1+0]=g[w+2+64]=Y+Z+1>>1,g[w+2+0]=g[w+3+64]=Z+te+1>>1,g[w+3+0]=te+le+1>>1,g[w+0+96]=Rt($,P,E),g[w+0+64]=Rt(P,E,W),g[w+0+32]=g[w+1+96]=Rt(E,W,Y),g[w+1+32]=g[w+2+96]=Rt(W,Y,Z),g[w+2+32]=g[w+3+96]=Rt(Y,Z,te),g[w+3+32]=Rt(Z,te,le)}function Vn(g,w){var E=g[w+0-32],P=g[w+1-32],$=g[w+2-32],W=g[w+3-32],Y=g[w+4-32],Z=g[w+5-32],te=g[w+6-32],le=g[w+7-32];g[w+0+0]=E+P+1>>1,g[w+1+0]=g[w+0+64]=P+$+1>>1,g[w+2+0]=g[w+1+64]=$+W+1>>1,g[w+3+0]=g[w+2+64]=W+Y+1>>1,g[w+0+32]=Rt(E,P,$),g[w+1+32]=g[w+0+96]=Rt(P,$,W),g[w+2+32]=g[w+1+96]=Rt($,W,Y),g[w+3+32]=g[w+2+96]=Rt(W,Y,Z),g[w+3+64]=Rt(Y,Z,te),g[w+3+96]=Rt(Z,te,le)}function ns(g,w){var E=g[w-1+0],P=g[w-1+32],$=g[w-1+64],W=g[w-1+96];g[w+0+0]=E+P+1>>1,g[w+2+0]=g[w+0+32]=P+$+1>>1,g[w+2+32]=g[w+0+64]=$+W+1>>1,g[w+1+0]=Rt(E,P,$),g[w+3+0]=g[w+1+32]=Rt(P,$,W),g[w+3+32]=g[w+1+64]=Rt($,W,W),g[w+3+64]=g[w+2+64]=g[w+0+96]=g[w+1+96]=g[w+2+96]=g[w+3+96]=W}function go(g,w){var E=g[w-1+0],P=g[w-1+32],$=g[w-1+64],W=g[w-1+96],Y=g[w-1-32],Z=g[w+0-32],te=g[w+1-32],le=g[w+2-32];g[w+0+0]=g[w+2+32]=E+Y+1>>1,g[w+0+32]=g[w+2+64]=P+E+1>>1,g[w+0+64]=g[w+2+96]=$+P+1>>1,g[w+0+96]=W+$+1>>1,g[w+3+0]=Rt(Z,te,le),g[w+2+0]=Rt(Y,Z,te),g[w+1+0]=g[w+3+32]=Rt(E,Y,Z),g[w+1+32]=g[w+3+64]=Rt(P,E,Y),g[w+1+64]=g[w+3+96]=Rt($,P,E),g[w+1+96]=Rt(W,$,P)}function Ps(g,w){var E;for(E=0;8>E;++E)r(g,w+32*E,g,w-32,8)}function Ll(g,w){var E;for(E=0;8>E;++E)i(g,w,g[w-1],8),w+=32}function rs(g,w,E){var P;for(P=0;8>P;++P)i(w,E+32*P,g,8)}function _a(g,w){var E,P=8;for(E=0;8>E;++E)P+=g[w+E-32]+g[w-1+32*E];rs(P>>4,g,w)}function is(g,w){var E,P=4;for(E=0;8>E;++E)P+=g[w+E-32];rs(P>>3,g,w)}function Mr(g,w){var E,P=4;for(E=0;8>E;++E)P+=g[w-1+32*E];rs(P>>3,g,w)}function $s(g,w){rs(128,g,w)}function fi(g,w,E){var P=g[w-E],$=g[w+0],W=3*($-P)+So[1020+g[w-2*E]-g[w+E]],Y=Lu[112+(W+4>>3)];g[w-E]=Hi[255+P+Lu[112+(W+3>>3)]],g[w+0]=Hi[255+$-Y]}function Gs(g,w,E,P){var $=g[w+0],W=g[w+E];return Ti[255+g[w-2*E]-g[w-E]]>P||Ti[255+W-$]>P}function za(g,w,E,P){return 4*Ti[255+g[w-E]-g[w+0]]+Ti[255+g[w-2*E]-g[w+E]]<=P}function Ws(g,w,E,P,$){var W=g[w-3*E],Y=g[w-2*E],Z=g[w-E],te=g[w+0],le=g[w+E],ye=g[w+2*E],Le=g[w+3*E];return 4*Ti[255+Z-te]+Ti[255+Y-le]>P?0:Ti[255+g[w-4*E]-W]<=$&&Ti[255+W-Y]<=$&&Ti[255+Y-Z]<=$&&Ti[255+Le-ye]<=$&&Ti[255+ye-le]<=$&&Ti[255+le-te]<=$}function Ys(g,w,E,P){var $=2*P+1;for(P=0;16>P;++P)za(g,w+P,E,$)&&fi(g,w+P,E)}function bs(g,w,E,P){var $=2*P+1;for(P=0;16>P;++P)za(g,w+P*E,1,$)&&fi(g,w+P*E,1)}function xo(g,w,E,P){var $;for($=3;0<$;--$)Ys(g,w+=4*E,E,P)}function Yo(g,w,E,P){var $;for($=3;0<$;--$)bs(g,w+=4,E,P)}function ss(g,w,E,P,$,W,Y,Z){for(W=2*W+1;0<$--;){if(Ws(g,w,E,W,Y))if(Gs(g,w,E,Z))fi(g,w,E);else{var te=g,le=w,ye=E,Le=te[le-2*ye],se=te[le-ye],_e=te[le+0],Ce=te[le+ye],Be=te[le+2*ye],Ie=27*($e=So[1020+3*(_e-se)+So[1020+Le-Ce]])+63>>7,Ve=18*$e+63>>7,$e=9*$e+63>>7;te[le-3*ye]=Hi[255+te[le-3*ye]+$e],te[le-2*ye]=Hi[255+Le+Ve],te[le-ye]=Hi[255+se+Ie],te[le+0]=Hi[255+_e-Ie],te[le+ye]=Hi[255+Ce-Ve],te[le+2*ye]=Hi[255+Be-$e]}w+=P}}function Ks(g,w,E,P,$,W,Y,Z){for(W=2*W+1;0<$--;){if(Ws(g,w,E,W,Y))if(Gs(g,w,E,Z))fi(g,w,E);else{var te=g,le=w,ye=E,Le=te[le-ye],se=te[le+0],_e=te[le+ye],Ce=Lu[112+(4+(Be=3*(se-Le))>>3)],Be=Lu[112+(Be+3>>3)],Ie=Ce+1>>1;te[le-2*ye]=Hi[255+te[le-2*ye]+Ie],te[le-ye]=Hi[255+Le+Be],te[le+0]=Hi[255+se-Ce],te[le+ye]=Hi[255+_e-Ie]}w+=P}}function kl(g,w,E,P,$,W){ss(g,w,E,1,16,P,$,W)}function Ds(g,w,E,P,$,W){ss(g,w,1,E,16,P,$,W)}function Ko(g,w,E,P,$,W){var Y;for(Y=3;0<Y;--Y)Ks(g,w+=4*E,E,1,16,P,$,W)}function A(g,w,E,P,$,W){var Y;for(Y=3;0<Y;--Y)Ks(g,w+=4,1,E,16,P,$,W)}function U(g,w,E,P,$,W,Y,Z){ss(g,w,$,1,8,W,Y,Z),ss(E,P,$,1,8,W,Y,Z)}function oe(g,w,E,P,$,W,Y,Z){ss(g,w,1,$,8,W,Y,Z),ss(E,P,1,$,8,W,Y,Z)}function xe(g,w,E,P,$,W,Y,Z){Ks(g,w+4*$,$,1,8,W,Y,Z),Ks(E,P+4*$,$,1,8,W,Y,Z)}function Ne(g,w,E,P,$,W,Y,Z){Ks(g,w+4,1,$,8,W,Y,Z),Ks(E,P+4,1,$,8,W,Y,Z)}function ze(){this.ba=new St,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new un,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Qe(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ft(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xt(){this.ua=0,this.Wa=new Kt,this.vb=new Kt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ve,this.yc=new F}function Dt(){this.xb=this.a=0,this.l=new hi,this.ca=new St,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xt,this.ab=0,this.gc=c(4,ft),this.Oc=0}function Ct(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new hi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function pn(g,w,E,P,$,W,Y){for(g=g==null?0:g[w+0],w=0;w<Y;++w)$[W+w]=g+E[P+w]&255,g=$[W+w]}function sr(g,w,E,P,$,W,Y){var Z;if(g==null)pn(null,null,E,P,$,W,Y);else for(Z=0;Z<Y;++Z)$[W+Z]=g[w+Z]+E[P+Z]&255}function Kn(g,w,E,P,$,W,Y){if(g==null)pn(null,null,E,P,$,W,Y);else{var Z,te=g[w+0],le=te,ye=te;for(Z=0;Z<Y;++Z)le=ye+(te=g[w+Z])-le,ye=E[P+Z]+(-256&le?0>le?0:255:le)&255,le=te,$[W+Z]=ye}}function x(g,w,E,P){var $=w.width,W=w.o;if(e(g!=null&&w!=null),0>E||0>=P||E+P>W)return null;if(!g.Cc){if(g.ga==null){var Y;if(g.ga=new Ct,(Y=g.ga==null)||(Y=w.width*w.o,e(g.Gb.length==0),g.Gb=a(Y),g.Uc=0,g.Gb==null?Y=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,Y=1),Y=!Y),!Y){Y=g.ga;var Z=g.Fa,te=g.P,le=g.qc,ye=g.mb,Le=g.nb,se=te+1,_e=le-1,Ce=Y.l;if(e(Z!=null&&ye!=null&&w!=null),jo[0]=null,jo[1]=pn,jo[2]=sr,jo[3]=Kn,Y.ca=ye,Y.tb=Le,Y.c=w.width,Y.i=w.height,e(0<Y.c&&0<Y.i),1>=le)w=0;else if(Y.$a=3&Z[te+0],Y.Z=Z[te+0]>>2&3,Y.Lc=Z[te+0]>>4&3,te=Z[te+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||te)w=0;else if(Ce.put=Tt,Ce.ac=ei,Ce.bc=ga,Ce.ma=Y,Ce.width=w.width,Ce.height=w.height,Ce.Da=w.Da,Ce.v=w.v,Ce.va=w.va,Ce.j=w.j,Ce.o=w.o,Y.$a)e:{e(Y.$a==1),w=Fa();t:for(;;){if(w==null){w=0;break e}if(e(Y!=null),Y.mc=w,w.c=Y.c,w.i=Y.i,w.l=Y.l,w.l.ma=Y,w.l.width=Y.c,w.l.height=Y.i,w.a=0,Se(w.m,Z,se,_e),!Rs(Y.c,Y.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&qn(w.s)?(Y.ic=1,Z=w.c*w.i,w.Ta=null,w.Ua=0,w.V=a(Z),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(Y.ic=0,w=qi(w,Y.c)),!w))break t;w=1;break e}Y.mc=null,w=0}else w=_e>=Y.c*Y.i;Y=!w}if(Y)return null;g.ga.Lc!=1?g.Ga=0:P=W-E}e(g.ga!=null),e(E+P<=W);e:{if(w=(Z=g.ga).c,W=Z.l.o,Z.$a==0){if(se=g.rc,_e=g.Vc,Ce=g.Fa,te=g.P+1+E*w,le=g.mb,ye=g.nb+E*w,e(te<=g.P+g.qc),Z.Z!=0)for(e(jo[Z.Z]!=null),Y=0;Y<P;++Y)jo[Z.Z](se,_e,Ce,te,le,ye,w),se=le,_e=ye,ye+=w,te+=w;else for(Y=0;Y<P;++Y)r(le,ye,Ce,te,w),se=le,_e=ye,ye+=w,te+=w;g.rc=se,g.Vc=_e}else{if(e(Z.mc!=null),w=E+P,e((Y=Z.mc)!=null),e(w<=Y.i),Y.C>=w)w=1;else if(Z.ic||Me(),Z.ic){Z=Y.V,se=Y.Ba,_e=Y.c;var Be=Y.i,Ie=(Ce=1,te=Y.$/_e,le=Y.$%_e,ye=Y.m,Le=Y.s,Y.$),Ve=_e*Be,$e=_e*w,et=Le.wc,Ke=Ie<$e?zr(Le,le,te):null;e(Ie<=Ve),e(w<=Be),e(qn(Le));t:for(;;){for(;!ye.h&&Ie<$e;){if(le&et||(Ke=zr(Le,le,te)),e(Ke!=null),we(ye),256>(Be=Yn(Ke.G[0],Ke.H[0],ye)))Z[se+Ie]=Be,++Ie,++le>=_e&&(le=0,++te<=w&&!(te%16)&&Hr(Y,te));else{if(!(280>Be)){Ce=0;break t}Be=Mi(Be-256,ye);var vt,ut=Yn(Ke.G[4],Ke.H[4],ye);if(we(ye),!(Ie>=(ut=Oi(_e,ut=Mi(ut,ye)))&&Ve-Ie>=Be)){Ce=0;break t}for(vt=0;vt<Be;++vt)Z[se+Ie+vt]=Z[se+Ie+vt-ut];for(Ie+=Be,le+=Be;le>=_e;)le-=_e,++te<=w&&!(te%16)&&Hr(Y,te);Ie<$e&&le&et&&(Ke=zr(Le,le,te))}e(ye.h==ue(ye))}Hr(Y,te>w?w:te);break t}!Ce||ye.h&&Ie<Ve?(Ce=0,Y.a=ye.h?5:3):Y.$=Ie,w=Ce}else w=Fi(Y,Y.V,Y.Ba,Y.c,Y.i,w,xa);if(!w){P=0;break e}}E+P>=W&&(g.Cc=1),P=1}if(!P)return null;if(g.Cc&&((P=g.ga)!=null&&(P.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+E*$}function T(g,w,E,P,$,W){for(;0<$--;){var Y,Z=g,te=w+(E?1:0),le=g,ye=w+(E?0:3);for(Y=0;Y<P;++Y){var Le=le[ye+4*Y];Le!=255&&(Le*=32897,Z[te+4*Y+0]=Z[te+4*Y+0]*Le>>23,Z[te+4*Y+1]=Z[te+4*Y+1]*Le>>23,Z[te+4*Y+2]=Z[te+4*Y+2]*Le>>23)}w+=W}}function O(g,w,E,P,$){for(;0<P--;){var W;for(W=0;W<E;++W){var Y=g[w+2*W+0],Z=15&(le=g[w+2*W+1]),te=4369*Z,le=(240&le|le>>4)*te>>16;g[w+2*W+0]=(240&Y|Y>>4)*te>>16&240|(15&Y|Y<<4)*te>>16>>4&15,g[w+2*W+1]=240&le|Z}w+=$}}function ee(g,w,E,P,$,W,Y,Z){var te,le,ye=255;for(le=0;le<$;++le){for(te=0;te<P;++te){var Le=g[w+te];W[Y+4*te]=Le,ye&=Le}w+=E,Y+=Z}return ye!=255}function Ee(g,w,E,P,$){var W;for(W=0;W<$;++W)E[P+W]=g[w+W]>>8}function Me(){Ml=T,Xs=O,Cu=ee,qs=Ee}function nt(g,w,E){k[g]=function(P,$,W,Y,Z,te,le,ye,Le,se,_e,Ce,Be,Ie,Ve,$e,et){var Ke,vt=et-1>>1,ut=Z[te+0]|le[ye+0]<<16,Jt=Le[se+0]|_e[Ce+0]<<16;e(P!=null);var pt=3*ut+Jt+131074>>2;for(w(P[$+0],255&pt,pt>>16,Be,Ie),W!=null&&(pt=3*Jt+ut+131074>>2,w(W[Y+0],255&pt,pt>>16,Ve,$e)),Ke=1;Ke<=vt;++Ke){var gn=Z[te+Ke]|le[ye+Ke]<<16,gr=Le[se+Ke]|_e[Ce+Ke]<<16,sn=ut+gn+Jt+gr+524296,dt=sn+2*(gn+Jt)>>3;pt=dt+ut>>1,ut=(sn=sn+2*(ut+gr)>>3)+gn>>1,w(P[$+2*Ke-1],255&pt,pt>>16,Be,Ie+(2*Ke-1)*E),w(P[$+2*Ke-0],255&ut,ut>>16,Be,Ie+(2*Ke-0)*E),W!=null&&(pt=sn+Jt>>1,ut=dt+gr>>1,w(W[Y+2*Ke-1],255&pt,pt>>16,Ve,$e+(2*Ke-1)*E),w(W[Y+2*Ke+0],255&ut,ut>>16,Ve,$e+(2*Ke+0)*E)),ut=gn,Jt=gr}1&et||(pt=3*ut+Jt+131074>>2,w(P[$+et-1],255&pt,pt>>16,Be,Ie+(et-1)*E),W!=null&&(pt=3*Jt+ut+131074>>2,w(W[Y+et-1],255&pt,pt>>16,Ve,$e+(et-1)*E)))}}function Qt(){Ii[gd]=ql,Ii[$i]=Tc,Ii[xd]=Hh,Ii[Js]=_d,Ii[ku]=el,Ii[Sc]=Ja,Ii[Xo]=tl,Ii[Pu]=Tc,Ii[vd]=_d,Ii[jc]=el,Ii[yd]=Ja}function ar(g){return g&-16384?0>g?0:255:g>>Nd}function hn(g,w){return ar((19077*g>>8)+(26149*w>>8)-14234)}function Bn(g,w,E){return ar((19077*g>>8)-(6419*w>>8)-(13320*E>>8)+8708)}function mi(g,w){return ar((19077*g>>8)+(33050*w>>8)-17685)}function Si(g,w,E,P,$){P[$+0]=hn(g,E),P[$+1]=Bn(g,w,E),P[$+2]=mi(g,w)}function Xn(g,w,E,P,$){P[$+0]=mi(g,w),P[$+1]=Bn(g,w,E),P[$+2]=hn(g,E)}function ji(g,w,E,P,$){var W=Bn(g,w,E);w=W<<3&224|mi(g,w)>>3,P[$+0]=248&hn(g,E)|W>>5,P[$+1]=w}function Ms(g,w,E,P,$){var W=240&mi(g,w)|15;P[$+0]=240&hn(g,E)|Bn(g,w,E)>>4,P[$+1]=W}function Ha(g,w,E,P,$){P[$+0]=255,Si(g,w,E,P,$+1)}function $a(g,w,E,P,$){Xn(g,w,E,P,$),P[$+3]=255}function as(g,w,E,P,$){Si(g,w,E,P,$),P[$+3]=255}function vo(g,w,E){k[g]=function(P,$,W,Y,Z,te,le,ye,Le){for(var se=ye+(-2&Le)*E;ye!=se;)w(P[$+0],W[Y+0],Z[te+0],le,ye),w(P[$+1],W[Y+0],Z[te+0],le,ye+E),$+=2,++Y,++te,ye+=2*E;1&Le&&w(P[$+0],W[Y+0],Z[te+0],le,ye)}}function bc(g,w,E){return E==0?g==0?w==0?6:5:w==0?4:0:E}function ju(g,w,E,P,$){switch(g>>>30){case 3:Ao(w,E,P,$,0);break;case 2:zi(w,E,P,$);break;case 1:Mn(w,E,P,$)}}function Os(g,w){var E,P,$=w.M,W=w.Nb,Y=g.oc,Z=g.pc+40,te=g.oc,le=g.pc+584,ye=g.oc,Le=g.pc+600;for(E=0;16>E;++E)Y[Z+32*E-1]=129;for(E=0;8>E;++E)te[le+32*E-1]=129,ye[Le+32*E-1]=129;for(0<$?Y[Z-1-32]=te[le-1-32]=ye[Le-1-32]=129:(i(Y,Z-32-1,127,21),i(te,le-32-1,127,9),i(ye,Le-32-1,127,9)),P=0;P<g.za;++P){var se=w.ya[w.aa+P];if(0<P){for(E=-1;16>E;++E)r(Y,Z+32*E-4,Y,Z+32*E+12,4);for(E=-1;8>E;++E)r(te,le+32*E-4,te,le+32*E+4,4),r(ye,Le+32*E-4,ye,Le+32*E+4,4)}var _e=g.Gd,Ce=g.Hd+P,Be=se.ad,Ie=se.Hc;if(0<$&&(r(Y,Z-32,_e[Ce].y,0,16),r(te,le-32,_e[Ce].f,0,8),r(ye,Le-32,_e[Ce].ea,0,8)),se.Za){var Ve=Y,$e=Z-32+16;for(0<$&&(P>=g.za-1?i(Ve,$e,_e[Ce].y[15],4):r(Ve,$e,_e[Ce+1].y,0,4)),E=0;4>E;E++)Ve[$e+128+E]=Ve[$e+256+E]=Ve[$e+384+E]=Ve[$e+0+E];for(E=0;16>E;++E,Ie<<=2)Ve=Y,$e=Z+qr[E],Tr[se.Ob[E]](Ve,$e),ju(Ie,Be,16*+E,Ve,$e)}else if(Ve=bc(P,$,se.Ob[0]),ls[Ve](Y,Z),Ie!=0)for(E=0;16>E;++E,Ie<<=2)ju(Ie,Be,16*+E,Y,Z+qr[E]);for(E=se.Gc,Ve=bc(P,$,se.Dd),ja[Ve](te,le),ja[Ve](ye,Le),Ie=Be,Ve=te,$e=le,255&(se=0|E)&&(170&se?Qs(Ie,256,Ve,$e):jn(Ie,256,Ve,$e)),se=ye,Ie=Le,255&(E>>=8)&&(170&E?Qs(Be,320,se,Ie):jn(Be,320,se,Ie)),$<g.Ub-1&&(r(_e[Ce].y,0,Y,Z+480,16),r(_e[Ce].f,0,te,le+224,8),r(_e[Ce].ea,0,ye,Le+224,8)),E=8*W*g.B,_e=g.sa,Ce=g.ta+16*P+16*W*g.R,Be=g.qa,se=g.ra+8*P+E,Ie=g.Ha,Ve=g.Ia+8*P+E,E=0;16>E;++E)r(_e,Ce+E*g.R,Y,Z+32*E,16);for(E=0;8>E;++E)r(Be,se+E*g.B,te,le+32*E,8),r(Ie,Ve+E*g.B,ye,Le+32*E,8)}}function Na(g,w,E,P,$,W,Y,Z,te){var le=[0],ye=[0],Le=0,se=te!=null?te.kd:0,_e=te??new Qe;if(g==null||12>E)return 7;_e.data=g,_e.w=w,_e.ha=E,w=[w],E=[E],_e.gb=[_e.gb];e:{var Ce=w,Be=E,Ie=_e.gb;if(e(g!=null),e(Be!=null),e(Ie!=null),Ie[0]=0,12<=Be[0]&&!t(g,Ce[0],"RIFF")){if(t(g,Ce[0]+8,"WEBP")){Ie=3;break e}var Ve=ht(g,Ce[0]+4);if(12>Ve||4294967286<Ve){Ie=3;break e}if(se&&Ve>Be[0]-8){Ie=7;break e}Ie[0]=Ve,Ce[0]+=12,Be[0]-=12}Ie=0}if(Ie!=0)return Ie;for(Ve=0<_e.gb[0],E=E[0];;){e:{var $e=g;Be=w,Ie=E;var et=le,Ke=ye,vt=Ce=[0];if((pt=Le=[Le])[0]=0,8>Ie[0])Ie=7;else{if(!t($e,Be[0],"VP8X")){if(ht($e,Be[0]+4)!=10){Ie=3;break e}if(18>Ie[0]){Ie=7;break e}var ut=ht($e,Be[0]+8),Jt=1+ot($e,Be[0]+12);if(2147483648<=Jt*($e=1+ot($e,Be[0]+15))){Ie=3;break e}vt!=null&&(vt[0]=ut),et!=null&&(et[0]=Jt),Ke!=null&&(Ke[0]=$e),Be[0]+=18,Ie[0]-=18,pt[0]=1}Ie=0}}if(Le=Le[0],Ce=Ce[0],Ie!=0)return Ie;if(Be=!!(2&Ce),!Ve&&Le)return 3;if(W!=null&&(W[0]=!!(16&Ce)),Y!=null&&(Y[0]=Be),Z!=null&&(Z[0]=0),Y=le[0],Ce=ye[0],Le&&Be&&te==null){Ie=0;break}if(4>E){Ie=7;break}if(Ve&&Le||!Ve&&!Le&&!t(g,w[0],"ALPH")){E=[E],_e.na=[_e.na],_e.P=[_e.P],_e.Sa=[_e.Sa];e:{ut=g,Ie=w,Ve=E;var pt=_e.gb;et=_e.na,Ke=_e.P,vt=_e.Sa,Jt=22,e(ut!=null),e(Ve!=null),$e=Ie[0];var gn=Ve[0];for(e(et!=null),e(vt!=null),et[0]=null,Ke[0]=null,vt[0]=0;;){if(Ie[0]=$e,Ve[0]=gn,8>gn){Ie=7;break e}var gr=ht(ut,$e+4);if(4294967286<gr){Ie=3;break e}var sn=8+gr+1&-2;if(Jt+=sn,0<pt&&Jt>pt){Ie=3;break e}if(!t(ut,$e,"VP8 ")||!t(ut,$e,"VP8L")){Ie=0;break e}if(gn[0]<sn){Ie=7;break e}t(ut,$e,"ALPH")||(et[0]=ut,Ke[0]=$e+8,vt[0]=gr),$e+=sn,gn-=sn}}if(E=E[0],_e.na=_e.na[0],_e.P=_e.P[0],_e.Sa=_e.Sa[0],Ie!=0)break}E=[E],_e.Ja=[_e.Ja],_e.xa=[_e.xa];e:if(pt=g,Ie=w,Ve=E,et=_e.gb[0],Ke=_e.Ja,vt=_e.xa,ut=Ie[0],$e=!t(pt,ut,"VP8 "),Jt=!t(pt,ut,"VP8L"),e(pt!=null),e(Ve!=null),e(Ke!=null),e(vt!=null),8>Ve[0])Ie=7;else{if($e||Jt){if(pt=ht(pt,ut+4),12<=et&&pt>et-12){Ie=3;break e}if(se&&pt>Ve[0]-8){Ie=7;break e}Ke[0]=pt,Ie[0]+=8,Ve[0]-=8,vt[0]=Jt}else vt[0]=5<=Ve[0]&&pt[ut+0]==47&&!(pt[ut+4]>>5),Ke[0]=Ve[0];Ie=0}if(E=E[0],_e.Ja=_e.Ja[0],_e.xa=_e.xa[0],w=w[0],Ie!=0)break;if(4294967286<_e.Ja)return 3;if(Z==null||Be||(Z[0]=_e.xa?2:1),Y=[Y],Ce=[Ce],_e.xa){if(5>E){Ie=7;break}Z=Y,se=Ce,Be=W,g==null||5>E?g=0:5<=E&&g[w+0]==47&&!(g[w+4]>>5)?(Ve=[0],pt=[0],et=[0],Se(Ke=new J,g,w,E),Ji(Ke,Ve,pt,et)?(Z!=null&&(Z[0]=Ve[0]),se!=null&&(se[0]=pt[0]),Be!=null&&(Be[0]=et[0]),g=1):g=0):g=0}else{if(10>E){Ie=7;break}Z=Ce,g==null||10>E||!va(g,w+3,E-3)?g=0:(se=g[w+0]|g[w+1]<<8|g[w+2]<<16,Be=16383&(g[w+7]<<8|g[w+6]),g=16383&(g[w+9]<<8|g[w+8]),1&se||3<(se>>1&7)||!(se>>4&1)||se>>5>=_e.Ja||!Be||!g?g=0:(Y&&(Y[0]=Be),Z&&(Z[0]=g),g=1))}if(!g||(Y=Y[0],Ce=Ce[0],Le&&(le[0]!=Y||ye[0]!=Ce)))return 3;te!=null&&(te[0]=_e,te.offset=w-te.w,e(4294967286>w-te.w),e(te.offset==te.ha-E));break}return Ie==0||Ie==7&&Le&&te==null?(W!=null&&(W[0]|=_e.na!=null&&0<_e.na.length),P!=null&&(P[0]=Y),$!=null&&($[0]=Ce),0):Ie}function yo(g,w,E){var P=w.width,$=w.height,W=0,Y=0,Z=P,te=$;if(w.Da=g!=null&&0<g.Da,w.Da&&(Z=g.cd,te=g.bd,W=g.v,Y=g.j,11>E||(W&=-2,Y&=-2),0>W||0>Y||0>=Z||0>=te||W+Z>P||Y+te>$))return 0;if(w.v=W,w.j=Y,w.va=W+Z,w.o=Y+te,w.U=Z,w.T=te,w.da=g!=null&&0<g.da,w.da){if(!Te(Z,te,E=[g.ib],W=[g.hb]))return 0;w.ib=E[0],w.hb=W[0]}return w.ob=g!=null&&g.ob,w.Kb=g==null||!g.Sd,w.da&&(w.ob=w.ib<3*P/4&&w.hb<3*$/4,w.Kb=0),1}function Eu(g){if(g==null)return 2;if(11>g.S){var w=g.f.RGBA;w.fb+=(g.height-1)*w.A,w.A=-w.A}else w=g.f.kb,g=g.height,w.O+=(g-1)*w.fa,w.fa=-w.fa,w.N+=(g-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(g-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(g-1)*w.lb,w.lb=-w.lb);return 0}function Aa(g,w,E,P){if(P==null||0>=g||0>=w)return 2;if(E!=null){if(E.Da){var $=E.cd,W=E.bd,Y=-2&E.v,Z=-2&E.j;if(0>Y||0>Z||0>=$||0>=W||Y+$>g||Z+W>w)return 2;g=$,w=W}if(E.da){if(!Te(g,w,$=[E.ib],W=[E.hb]))return 2;g=$[0],w=W[0]}}P.width=g,P.height=w;e:{var te=P.width,le=P.height;if(g=P.S,0>=te||0>=le||!(g>=gd&&13>g))g=2;else{if(0>=P.Rd&&P.sd==null){Y=W=$=w=0;var ye=(Z=te*Sd[g])*le;if(11>g||(W=(le+1)/2*(w=(te+1)/2),g==12&&(Y=($=te)*le)),(le=a(ye+2*W+Y))==null){g=1;break e}P.sd=le,11>g?((te=P.f.RGBA).eb=le,te.fb=0,te.A=Z,te.size=ye):((te=P.f.kb).y=le,te.O=0,te.fa=Z,te.Fd=ye,te.f=le,te.N=0+ye,te.Ab=w,te.Cd=W,te.ea=le,te.W=0+ye+W,te.Db=w,te.Ed=W,g==12&&(te.F=le,te.J=0+ye+2*W),te.Tc=Y,te.lb=$)}if(w=1,$=P.S,W=P.width,Y=P.height,$>=gd&&13>$)if(11>$)g=P.f.RGBA,w&=(Z=Math.abs(g.A))*(Y-1)+W<=g.size,w&=Z>=W*Sd[$],w&=g.eb!=null;else{g=P.f.kb,Z=(W+1)/2,ye=(Y+1)/2,te=Math.abs(g.fa),le=Math.abs(g.Ab);var Le=Math.abs(g.Db),se=Math.abs(g.lb),_e=se*(Y-1)+W;w&=te*(Y-1)+W<=g.Fd,w&=le*(ye-1)+Z<=g.Cd,w=(w&=Le*(ye-1)+Z<=g.Ed)&te>=W&le>=Z&Le>=Z,w&=g.y!=null,w&=g.f!=null,w&=g.ea!=null,$==12&&(w&=se>=W,w&=_e<=g.Tc,w&=g.F!=null)}else w=0;g=w?0:2}}return g!=0||E!=null&&E.fd&&(g=Eu(P)),g}var Qo=64,ws=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],os=24,Ga=32,Wa=8,bo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];tt("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(g){return g},k.Predictor2=function(g,w,E){return w[E+0]},k.Predictor3=function(g,w,E){return w[E+1]},k.Predictor4=function(g,w,E){return w[E-1]},k.Predictor5=function(g,w,E){return lt(lt(g,w[E+1]),w[E+0])},k.Predictor6=function(g,w,E){return lt(g,w[E-1])},k.Predictor7=function(g,w,E){return lt(g,w[E+0])},k.Predictor8=function(g,w,E){return lt(w[E-1],w[E+0])},k.Predictor9=function(g,w,E){return lt(w[E+0],w[E+1])},k.Predictor10=function(g,w,E){return lt(lt(g,w[E-1]),lt(w[E+0],w[E+1]))},k.Predictor11=function(g,w,E){var P=w[E+0];return 0>=Gt(P>>24&255,g>>24&255,(w=w[E-1])>>24&255)+Gt(P>>16&255,g>>16&255,w>>16&255)+Gt(P>>8&255,g>>8&255,w>>8&255)+Gt(255&P,255&g,255&w)?P:g},k.Predictor12=function(g,w,E){var P=w[E+0];return(zt((g>>24&255)+(P>>24&255)-((w=w[E-1])>>24&255))<<24|zt((g>>16&255)+(P>>16&255)-(w>>16&255))<<16|zt((g>>8&255)+(P>>8&255)-(w>>8&255))<<8|zt((255&g)+(255&P)-(255&w)))>>>0},k.Predictor13=function(g,w,E){var P=w[E-1];return($t((g=lt(g,w[E+0]))>>24&255,P>>24&255)<<24|$t(g>>16&255,P>>16&255)<<16|$t(g>>8&255,P>>8&255)<<8|$t(255&g,255&P))>>>0};var wc=k.PredictorAdd0;k.PredictorAdd1=cn,tt("Predictor2","PredictorAdd2"),tt("Predictor3","PredictorAdd3"),tt("Predictor4","PredictorAdd4"),tt("Predictor5","PredictorAdd5"),tt("Predictor6","PredictorAdd6"),tt("Predictor7","PredictorAdd7"),tt("Predictor8","PredictorAdd8"),tt("Predictor9","PredictorAdd9"),tt("Predictor10","PredictorAdd10"),tt("Predictor11","PredictorAdd11"),tt("Predictor12","PredictorAdd12"),tt("Predictor13","PredictorAdd13");var _c=k.PredictorAdd2;_t("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),_t("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Or,fd=k.ColorIndexInverseTransform,Ya=k.MapARGB,Ka=k.VP8LColorIndexInverseTransformAlpha,Ei=k.MapAlpha,wo=k.VP8LPredictorsAdd=[];wo.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var Nc,Ac,_o,No,Qa,Pl,Fs,Ao,zi,Qs,Mn,jn,or,Fr,Xa,Sa,Dl,Tu,qh,jm,Em,Tm,Vh,Bh,Ml,Xs,Cu,qs,Ol=a(511),md=a(2041),Iu=a(225),Ru=a(767),pd=0,So=md,Lu=Iu,Hi=Ru,Ti=Ol,gd=0,$i=1,xd=2,Js=3,ku=4,Sc=5,Xo=6,Pu=7,vd=8,jc=9,yd=10,Zs=[2,3,7],Ec=[3,3,11],Fl=[280,256,256,256,40],bd=[0,1,1,1,0],Du=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ea=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ta=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Jo=8,na=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ra=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Vs=null,Cm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Uh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],wd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Im=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ci=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ls=[],Tr=[],ja=[],Zo=1,zh=2,jo=[],Ii=[];nt("UpsampleRgbLinePair",Si,3),nt("UpsampleBgrLinePair",Xn,3),nt("UpsampleRgbaLinePair",as,4),nt("UpsampleBgraLinePair",$a,4),nt("UpsampleArgbLinePair",Ha,4),nt("UpsampleRgba4444LinePair",Ms,2),nt("UpsampleRgb565LinePair",ji,2);var ql=k.UpsampleRgbLinePair,Hh=k.UpsampleBgrLinePair,Tc=k.UpsampleRgbaLinePair,_d=k.UpsampleBgraLinePair,el=k.UpsampleArgbLinePair,Ja=k.UpsampleRgba4444LinePair,tl=k.UpsampleRgb565LinePair,ia=16,Cc=1<<ia-1,Vl=-227,nl=482,Nd=6,rl=0,Ri=a(256),Ad=a(256),Rm=a(256),b0=a(256),w0=a(nl-Vl),_0=a(nl-Vl);vo("YuvToRgbRow",Si,3),vo("YuvToBgrRow",Xn,3),vo("YuvToRgbaRow",as,4),vo("YuvToBgraRow",$a,4),vo("YuvToArgbRow",Ha,4),vo("YuvToRgba4444Row",Ms,2),vo("YuvToRgb565Row",ji,2);var qr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ic=[0,2,8],Mu=[8,7,6,4,4,2,2,2,1,1,1,1],Ou=1;this.WebPDecodeRGBA=function(g,w,E,P,$){var W=$i,Y=new ze,Z=new St;Y.ba=Z,Z.S=W,Z.width=[Z.width],Z.height=[Z.height];var te=Z.width,le=Z.height,ye=new Nt;if(ye==null||g==null)var Le=2;else e(ye!=null),Le=Na(g,w,E,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(Le!=0?te=0:(te!=null&&(te[0]=ye.width[0]),le!=null&&(le[0]=ye.height[0]),te=1),te){Z.width=Z.width[0],Z.height=Z.height[0],P!=null&&(P[0]=Z.width),$!=null&&($[0]=Z.height);e:{if(P=new hi,($=new Qe).data=g,$.w=w,$.ha=E,$.kd=1,w=[0],e($!=null),((g=Na($.data,$.w,$.ha,null,null,null,w,null,$))==0||g==7)&&w[0]&&(g=4),(w=g)==0){if(e(Y!=null),P.data=$.data,P.w=$.w+$.offset,P.ha=$.ha-$.offset,P.put=Tt,P.ac=ei,P.bc=ga,P.ma=Y,$.xa){if((g=Fa())==null){Y=1;break e}if((function(se,_e){var Ce=[0],Be=[0],Ie=[0];t:for(;;){if(se==null)return 0;if(_e==null)return se.a=2,0;if(se.l=_e,se.a=0,Se(se.m,_e.data,_e.w,_e.ha),!Ji(se.m,Ce,Be,Ie)){se.a=3;break t}if(se.xb=zh,_e.width=Ce[0],_e.height=Be[0],!Rs(Ce[0],Be[0],1,se,null))break t;return 1}return e(se.a!=0),0})(g,P)){if(P=(w=Aa(P.width,P.height,Y.Oa,Y.ba))==0){t:{P=g;n:for(;;){if(P==null){P=0;break t}if(e(P.s.yc!=null),e(P.s.Ya!=null),e(0<P.s.Wb),e((E=P.l)!=null),e(($=E.ma)!=null),P.xb!=0){if(P.ca=$.ba,P.tb=$.tb,e(P.ca!=null),!yo($.Oa,E,Js)){P.a=2;break n}if(!qi(P,E.width)||E.da)break n;if((E.da||Ft(P.ca.S))&&Me(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&Me()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!ie(P.s.vb,P.s.Wa.Xa)){P.a=1;break n}P.xb=0}if(!Fi(P,P.V,P.Ba,P.c,P.i,E.o,di))break n;$.Dc=P.Ma,P=1;break t}e(P.a!=0),P=0}P=!P}P&&(w=g.a)}else w=g.a}else{if((g=new jr)==null){Y=1;break e}if(g.Fa=$.na,g.P=$.P,g.qc=$.Sa,ys(g,P)){if((w=Aa(P.width,P.height,Y.Oa,Y.ba))==0){if(g.Aa=0,E=Y.Oa,e(($=g)!=null),E!=null){if(0<(te=0>(te=E.Md)?0:100<te?255:255*te/100)){for(le=ye=0;4>le;++le)12>(Le=$.pb[le]).lc&&(Le.ia=te*Mu[0>Le.lc?0:Le.lc]>>3),ye|=Le.ia;ye&&(alert("todo:VP8InitRandom"),$.ia=1)}$.Ga=E.Id,100<$.Ga?$.Ga=100:0>$.Ga&&($.Ga=0)}(function(se,_e){if(se==null)return 0;if(_e==null)return mn(se,2,"NULL VP8Io parameter in VP8Decode().");if(!se.cb&&!ys(se,_e))return 0;if(e(se.cb),_e.ac==null||_e.ac(_e)){_e.ob&&(se.L=0);var Ce=Ic[se.L];if(se.L==2?(se.yb=0,se.zb=0):(se.yb=_e.v-Ce>>4,se.zb=_e.j-Ce>>4,0>se.yb&&(se.yb=0),0>se.zb&&(se.zb=0)),se.Va=_e.o+15+Ce>>4,se.Hb=_e.va+15+Ce>>4,se.Hb>se.za&&(se.Hb=se.za),se.Va>se.Ub&&(se.Va=se.Ub),0<se.L){var Be=se.ed;for(Ce=0;4>Ce;++Ce){var Ie;if(se.Qa.Cb){var Ve=se.Qa.Lb[Ce];se.Qa.Fb||(Ve+=Be.Tb)}else Ve=Be.Tb;for(Ie=0;1>=Ie;++Ie){var $e=se.gd[Ce][Ie],et=Ve;if(Be.Pc&&(et+=Be.vd[0],Ie&&(et+=Be.od[0])),0<(et=0>et?0:63<et?63:et)){var Ke=et;0<Be.wb&&(Ke=4<Be.wb?Ke>>2:Ke>>1)>9-Be.wb&&(Ke=9-Be.wb),1>Ke&&(Ke=1),$e.dd=Ke,$e.tc=2*et+Ke,$e.ld=40<=et?2:15<=et?1:0}else $e.tc=0;$e.La=Ie}}}Ce=0}else mn(se,6,"Frame setup failed"),Ce=se.a;if(Ce=Ce==0){if(Ce){se.$c=0,0<se.Aa||(se.Ic=Ou);t:{Ce=se.Ic,Be=4*(Ke=se.za);var vt=32*Ke,ut=Ke+1,Jt=0<se.L?Ke*(0<se.Aa?2:1):0,pt=(se.Aa==2?2:1)*Ke;if(($e=Be+832+(Ie=3*(16*Ce+Ic[se.L])/2*vt)+(Ve=se.Fa!=null&&0<se.Fa.length?se.Kc.c*se.Kc.i:0))!=$e)Ce=0;else{if($e>se.Vb){if(se.Vb=0,se.Ec=a($e),se.Fc=0,se.Ec==null){Ce=mn(se,1,"no memory during frame initialization.");break t}se.Vb=$e}$e=se.Ec,et=se.Fc,se.Ac=$e,se.Bc=et,et+=Be,se.Gd=c(vt,Ho),se.Hd=0,se.rb=c(ut+1,vs),se.sb=1,se.wa=Jt?c(Jt,Vi):null,se.Y=0,se.D.Nb=0,se.D.wa=se.wa,se.D.Y=se.Y,0<se.Aa&&(se.D.Y+=Ke),e(!0),se.oc=$e,se.pc=et,et+=832,se.ya=c(pt,ho),se.aa=0,se.D.ya=se.ya,se.D.aa=se.aa,se.Aa==2&&(se.D.aa+=Ke),se.R=16*Ke,se.B=8*Ke,Ke=(vt=Ic[se.L])*se.R,vt=vt/2*se.B,se.sa=$e,se.ta=et+Ke,se.qa=se.sa,se.ra=se.ta+16*Ce*se.R+vt,se.Ha=se.qa,se.Ia=se.ra+8*Ce*se.B+vt,se.$c=0,et+=Ie,se.mb=Ve?$e:null,se.nb=Ve?et:null,e(et+Ve<=se.Fc+se.Vb),qa(se),i(se.Ac,se.Bc,0,Be),Ce=1}}if(Ce){if(_e.ka=0,_e.y=se.sa,_e.O=se.ta,_e.f=se.qa,_e.N=se.ra,_e.ea=se.Ha,_e.Vd=se.Ia,_e.fa=se.R,_e.Rc=se.B,_e.F=null,_e.J=0,!pd){for(Ce=-255;255>=Ce;++Ce)Ol[255+Ce]=0>Ce?-Ce:Ce;for(Ce=-1020;1020>=Ce;++Ce)md[1020+Ce]=-128>Ce?-128:127<Ce?127:Ce;for(Ce=-112;112>=Ce;++Ce)Iu[112+Ce]=-16>Ce?-16:15<Ce?15:Ce;for(Ce=-255;510>=Ce;++Ce)Ru[255+Ce]=0>Ce?0:255<Ce?255:Ce;pd=1}Fs=ti,Ao=Tl,Qs=Ai,Mn=Cl,jn=ya,zi=yc,or=kl,Fr=Ds,Xa=U,Sa=oe,Dl=Ko,Tu=A,qh=xe,jm=Ne,Em=Ys,Tm=bs,Vh=xo,Bh=Yo,Tr[0]=Ua,Tr[1]=Il,Tr[2]=mo,Tr[3]=Wo,Tr[4]=ni,Tr[5]=po,Tr[6]=$r,Tr[7]=Vn,Tr[8]=go,Tr[9]=ns,ls[0]=ks,ls[1]=$o,ls[2]=Go,ls[3]=ba,ls[4]=wa,ls[5]=Ui,ls[6]=Ba,ja[0]=_a,ja[1]=Rl,ja[2]=Ps,ja[3]=Ll,ja[4]=Mr,ja[5]=is,ja[6]=$s,Ce=1}else Ce=0}Ce&&(Ce=(function(gn,gr){for(gn.M=0;gn.M<gn.Va;++gn.M){var sn,dt=gn.Jc[gn.M&gn.Xb],st=gn.m,wr=gn;for(sn=0;sn<wr.za;++sn){var Ut=st,ln=wr,$n=ln.Ac,ri=ln.Bc+4*sn,Li=ln.zc,lr=ln.ya[ln.aa+sn];if(ln.Qa.Bb?lr.$b=Ue(Ut,ln.Pa.jb[0])?2+Ue(Ut,ln.Pa.jb[2]):Ue(Ut,ln.Pa.jb[1]):lr.$b=0,ln.kc&&(lr.Ad=Ue(Ut,ln.Bd)),lr.Za=!Ue(Ut,145)+0,lr.Za){var Gr=lr.Ob,Gi=0;for(ln=0;4>ln;++ln){var Wr,fn=Li[0+ln];for(Wr=0;4>Wr;++Wr){fn=Ci[$n[ri+Wr]][fn];for(var In=wd[Ue(Ut,fn[0])];0<In;)In=wd[2*In+Ue(Ut,fn[In])];fn=-In,$n[ri+Wr]=fn}r(Gr,Gi,$n,ri,4),Gi+=4,Li[0+ln]=fn}}else fn=Ue(Ut,156)?Ue(Ut,128)?1:3:Ue(Ut,163)?2:0,lr.Ob[0]=fn,i($n,ri,fn,4),i(Li,0,fn,4);lr.Dd=Ue(Ut,142)?Ue(Ut,114)?Ue(Ut,183)?1:3:2:0}if(wr.m.Ka)return mn(gn,7,"Premature end-of-partition0 encountered.");for(;gn.ja<gn.za;++gn.ja){if(wr=dt,Ut=(st=gn).rb[st.sb-1],$n=st.rb[st.sb+st.ja],sn=st.ya[st.aa+st.ja],ri=st.kc?sn.Ad:0)Ut.la=$n.la=0,sn.Za||(Ut.Na=$n.Na=0),sn.Hc=0,sn.Gc=0,sn.ia=0;else{var _r,On;if(Ut=$n,$n=wr,ri=st.Pa.Xc,Li=st.ya[st.aa+st.ja],lr=st.pb[Li.$b],ln=Li.ad,Gr=0,Gi=st.rb[st.sb-1],fn=Wr=0,i(ln,Gr,0,384),Li.Za)var ii=0,Nr=ri[3];else{In=a(16);var Rn=Ut.Na+Gi.Na;if(Rn=Vs($n,ri[1],Rn,lr.Eb,0,In,0),Ut.Na=Gi.Na=(0<Rn)+0,1<Rn)Fs(In,0,ln,Gr);else{var Vr=In[0]+3>>3;for(In=0;256>In;In+=16)ln[Gr+In]=Vr}ii=1,Nr=ri[0]}var Gn=15&Ut.la,Yr=15&Gi.la;for(In=0;4>In;++In){var Kr=1&Yr;for(Vr=On=0;4>Vr;++Vr)Gn=Gn>>1|(Kr=(Rn=Vs($n,Nr,Rn=Kr+(1&Gn),lr.Sc,ii,ln,Gr))>ii)<<7,On=On<<2|(3<Rn?3:1<Rn?2:ln[Gr+0]!=0),Gr+=16;Gn>>=4,Yr=Yr>>1|Kr<<7,Wr=(Wr<<8|On)>>>0}for(Nr=Gn,ii=Yr>>4,_r=0;4>_r;_r+=2){for(On=0,Gn=Ut.la>>4+_r,Yr=Gi.la>>4+_r,In=0;2>In;++In){for(Kr=1&Yr,Vr=0;2>Vr;++Vr)Rn=Kr+(1&Gn),Gn=Gn>>1|(Kr=0<(Rn=Vs($n,ri[2],Rn,lr.Qc,0,ln,Gr)))<<3,On=On<<2|(3<Rn?3:1<Rn?2:ln[Gr+0]!=0),Gr+=16;Gn>>=2,Yr=Yr>>1|Kr<<5}fn|=On<<4*_r,Nr|=Gn<<4<<_r,ii|=(240&Yr)<<_r}Ut.la=Nr,Gi.la=ii,Li.Hc=Wr,Li.Gc=fn,Li.ia=43690&fn?0:lr.ia,ri=!(Wr|fn)}if(0<st.L&&(st.wa[st.Y+st.ja]=st.gd[sn.$b][sn.Za],st.wa[st.Y+st.ja].La|=!ri),wr.Ka)return mn(gn,7,"Premature end-of-file encountered.")}if(qa(gn),st=gr,wr=1,sn=(dt=gn).D,Ut=0<dt.L&&dt.M>=dt.zb&&dt.M<=dt.Va,dt.Aa==0)t:{if(sn.M=dt.M,sn.uc=Ut,Os(dt,sn),wr=1,sn=(On=dt.D).Nb,Ut=(fn=Ic[dt.L])*dt.R,$n=fn/2*dt.B,In=16*sn*dt.R,Vr=8*sn*dt.B,ri=dt.sa,Li=dt.ta-Ut+In,lr=dt.qa,ln=dt.ra-$n+Vr,Gr=dt.Ha,Gi=dt.Ia-$n+Vr,Yr=(Gn=On.M)==0,Wr=Gn>=dt.Va-1,dt.Aa==2&&Os(dt,On),On.uc)for(Kr=(Rn=dt).D.M,e(Rn.D.uc),On=Rn.yb;On<Rn.Hb;++On){ii=On,Nr=Kr;var Jn=(En=(Qr=Rn).D).Nb;_r=Qr.R;var En=En.wa[En.Y+ii],Wi=Qr.sa,Cr=Qr.ta+16*Jn*_r+16*ii,Lt=En.dd,Mt=En.tc;if(Mt!=0)if(e(3<=Mt),Qr.L==1)0<ii&&Tm(Wi,Cr,_r,Mt+4),En.La&&Bh(Wi,Cr,_r,Mt),0<Nr&&Em(Wi,Cr,_r,Mt+4),En.La&&Vh(Wi,Cr,_r,Mt);else{var Ln=Qr.B,_s=Qr.qa,sa=Qr.ra+8*Jn*Ln+8*ii,cs=Qr.Ha,Qr=Qr.Ia+8*Jn*Ln+8*ii;Jn=En.ld,0<ii&&(Fr(Wi,Cr,_r,Mt+4,Lt,Jn),Sa(_s,sa,cs,Qr,Ln,Mt+4,Lt,Jn)),En.La&&(Tu(Wi,Cr,_r,Mt,Lt,Jn),jm(_s,sa,cs,Qr,Ln,Mt,Lt,Jn)),0<Nr&&(or(Wi,Cr,_r,Mt+4,Lt,Jn),Xa(_s,sa,cs,Qr,Ln,Mt+4,Lt,Jn)),En.La&&(Dl(Wi,Cr,_r,Mt,Lt,Jn),qh(_s,sa,cs,Qr,Ln,Mt,Lt,Jn))}}if(dt.ia&&alert("todo:DitherRow"),st.put!=null){if(On=16*Gn,Gn=16*(Gn+1),Yr?(st.y=dt.sa,st.O=dt.ta+In,st.f=dt.qa,st.N=dt.ra+Vr,st.ea=dt.Ha,st.W=dt.Ia+Vr):(On-=fn,st.y=ri,st.O=Li,st.f=lr,st.N=ln,st.ea=Gr,st.W=Gi),Wr||(Gn-=fn),Gn>st.o&&(Gn=st.o),st.F=null,st.J=null,dt.Fa!=null&&0<dt.Fa.length&&On<Gn&&(st.J=x(dt,st,On,Gn-On),st.F=dt.mb,st.F==null&&st.F.length==0)){wr=mn(dt,3,"Could not decode alpha data.");break t}On<st.j&&(fn=st.j-On,On=st.j,e(!(1&fn)),st.O+=dt.R*fn,st.N+=dt.B*(fn>>1),st.W+=dt.B*(fn>>1),st.F!=null&&(st.J+=st.width*fn)),On<Gn&&(st.O+=st.v,st.N+=st.v>>1,st.W+=st.v>>1,st.F!=null&&(st.J+=st.v),st.ka=On-st.j,st.U=st.va-st.v,st.T=Gn-On,wr=st.put(st))}sn+1!=dt.Ic||Wr||(r(dt.sa,dt.ta-Ut,ri,Li+16*dt.R,Ut),r(dt.qa,dt.ra-$n,lr,ln+8*dt.B,$n),r(dt.Ha,dt.Ia-$n,Gr,Gi+8*dt.B,$n))}if(!wr)return mn(gn,6,"Output aborted.")}return 1})(se,_e)),_e.bc!=null&&_e.bc(_e),Ce&=1}return Ce?(se.cb=0,Ce):0})(g,P)||(w=g.a)}}else w=g.a}w==0&&Y.Oa!=null&&Y.Oa.fd&&(w=Eu(Y.ba))}Y=w}W=Y!=0?null:11>W?Z.f.RGBA.eb:Z.f.kb.y}else W=null;return W};var Sd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(k,G){for(var S="",L=0;L<4;L++)S+=String.fromCharCode(k[G++]);return S}function p(k,G){return k[G+0]|k[G+1]<<8}function y(k,G){return(k[G+0]|k[G+1]<<8|k[G+2]<<16)>>>0}function N(k,G){return(k[G+0]|k[G+1]<<8|k[G+2]<<16|k[G+3]<<24)>>>0}new h;var b=[0],j=[0],C=[],R=new h,I=n,B=(function(k,G){var S={},L=0,F=!1,ae=0,ve=0;if(S.frames=[],!(function(q,J){for(var ne=0;ne<4;ne++)if(q[J+ne]!="RIFF".charCodeAt(ne))return!0;return!1})(k,G)){for(N(k,G+=4),G+=8;G<k.length;){var K=f(k,G),ce=N(k,G+=4);G+=4;var me=ce+(1&ce);switch(K){case"VP8 ":case"VP8L":S.frames[L]===void 0&&(S.frames[L]={}),(X=S.frames[L]).src_off=F?ve:G-8,X.src_size=ae+ce+8,L++,F&&(F=!1,ae=0,ve=0);break;case"VP8X":(X=S.header={}).feature_flags=k[G];var Se=G+4;X.canvas_width=1+y(k,Se),Se+=3,X.canvas_height=1+y(k,Se),Se+=3;break;case"ALPH":F=!0,ae=me+8,ve=G-8;break;case"ANIM":(X=S.header).bgcolor=N(k,G),Se=G+4,X.loop_count=p(k,Se),Se+=2;break;case"ANMF":var qe,X;(X=S.frames[L]={}).offset_x=2*y(k,G),G+=3,X.offset_y=2*y(k,G),G+=3,X.width=1+y(k,G),G+=3,X.height=1+y(k,G),G+=3,X.duration=y(k,G),G+=3,qe=k[G++],X.dispose=1&qe,X.blend=qe>>1&1}K!="ANMF"&&(G+=me)}return S}})(I,0);B.response=I,B.rgbaoutput=!0,B.dataurl=!1;var z=B.header?B.header:null,H=B.frames?B.frames:null;if(z){z.loop_counter=z.loop_count,b=[z.canvas_height],j=[z.canvas_width];for(var he=0;he<H.length&&H[he].blend!=0;he++);}var re=H[0],V=R.WebPDecodeRGBA(I,re.src_off,re.src_size,j,b);re.rgba=V,re.imgwidth=j[0],re.imgheight=b[0];for(var D=0;D<j[0]*b[0]*4;D++)C[D]=V[D];return this.width=j,this.height=b,this.data=C,this}(function(n){var e,t,r,i,a,c,d,h,f,p=function(q){return q=q||{},this.isStrokeTransparent=q.isStrokeTransparent||!1,this.strokeOpacity=q.strokeOpacity||1,this.strokeStyle=q.strokeStyle||"#000000",this.fillStyle=q.fillStyle||"#000000",this.isFillTransparent=q.isFillTransparent||!1,this.fillOpacity=q.fillOpacity||1,this.font=q.font||"10px sans-serif",this.textBaseline=q.textBaseline||"alphabetic",this.textAlign=q.textAlign||"left",this.lineWidth=q.lineWidth||1,this.lineJoin=q.lineJoin||"miter",this.lineCap=q.lineCap||"butt",this.path=q.path||[],this.transform=q.transform!==void 0?q.transform.clone():new h,this.globalCompositeOperation=q.globalCompositeOperation||"normal",this.globalAlpha=q.globalAlpha||1,this.clip_path=q.clip_path||[],this.currentPoint=q.currentPoint||new c,this.miterLimit=q.miterLimit||10,this.lastPoint=q.lastPoint||new c,this.lineDashOffset=q.lineDashOffset||0,this.lineDash=q.lineDash||[],this.margin=q.margin||[0,0,0,0],this.prevPageLastElemOffset=q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof q.ignoreClearRect!="boolean"||q.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new y(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,c=this.internal.Point,d=this.internal.Rectangle,h=this.internal.Matrix,f=new p}]);var y=function(q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=q;Object.defineProperty(this,"pdf",{get:function(){return J}});var ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ne},set:function(ie){ne=!!ie}});var ue=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ue},set:function(ie){ue=!!ie}});var pe=0;Object.defineProperty(this,"posX",{get:function(){return pe},set:function(ie){isNaN(ie)||(pe=ie)}});var we=0;Object.defineProperty(this,"posY",{get:function(){return we},set:function(ie){isNaN(ie)||(we=ie)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(ie){var rt;typeof ie=="number"?rt=[ie,ie,ie,ie]:((rt=new Array(4))[0]=ie[0],rt[1]=ie.length>=2?ie[1]:rt[0],rt[2]=ie.length>=3?ie[2]:rt[0],rt[3]=ie.length>=4?ie[3]:rt[1]),f.margin=rt}});var De=!1;Object.defineProperty(this,"autoPaging",{get:function(){return De},set:function(ie){De=ie}});var Re=0;Object.defineProperty(this,"lastBreak",{get:function(){return Re},set:function(ie){Re=ie}});var Ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ue},set:function(ie){Ue=ie}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(ie){ie instanceof p&&(f=ie)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(ie){f.path=ie}});var Ze=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ze},set:function(ie){Ze=ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ie){var rt;rt=N(ie),this.ctx.fillStyle=rt.style,this.ctx.isFillTransparent=rt.a===0,this.ctx.fillOpacity=rt.a,this.pdf.setFillColor(rt.r,rt.g,rt.b,{a:rt.a}),this.pdf.setTextColor(rt.r,rt.g,rt.b,{a:rt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ie){var rt=N(ie);this.ctx.strokeStyle=rt.style,this.ctx.isStrokeTransparent=rt.a===0,this.ctx.strokeOpacity=rt.a,rt.a===0?this.pdf.setDrawColor(255,255,255):(rt.a,this.pdf.setDrawColor(rt.r,rt.g,rt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ie){["butt","round","square"].indexOf(ie)!==-1&&(this.ctx.lineCap=ie,this.pdf.setLineCap(ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ie){isNaN(ie)||(this.ctx.lineWidth=ie,this.pdf.setLineWidth(ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ie){["bevel","round","miter"].indexOf(ie)!==-1&&(this.ctx.lineJoin=ie,this.pdf.setLineJoin(ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ie){isNaN(ie)||(this.ctx.miterLimit=ie,this.pdf.setMiterLimit(ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ie){this.ctx.textBaseline=ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ie){["right","end","center","left","start"].indexOf(ie)!==-1&&(this.ctx.textAlign=ie)}});var at=null,ot=null,ht=null;Object.defineProperty(this,"fontFaces",{get:function(){return ht},set:function(ie){at=null,ot=null,ht=ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ie){var rt;if(this.ctx.font=ie,(rt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ie))!==null){var Kt=rt[1];rt[2];var Te=rt[3],Ae=rt[4];rt[5];var Je=rt[6],tt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ae)[2];Ae=Math.floor(tt==="px"?parseFloat(Ae)*this.pdf.internal.scaleFactor:tt==="em"?parseFloat(Ae)*this.pdf.getFontSize():parseFloat(Ae)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ae);var it=(function(_t){var yr,rn,It=[],Bt=_t.trim();if(Bt==="")return bv;if(Bt in _N)return[_N[Bt]];for(;Bt!=="";){switch(rn=null,yr=(Bt=AN(Bt)).charAt(0)){case'"':case"'":rn=Uq(Bt.substring(1),yr);break;default:rn=zq(Bt)}if(rn===null||(It.push(rn[0]),(Bt=AN(rn[1]))!==""&&Bt.charAt(0)!==","))return bv;Bt=Bt.replace(/^,/,"")}return It})(Je);if(this.fontFaces){var lt=(function(_t,yr){var rn=_t.getFontList(),It=JSON.stringify(rn);if(at===null||ot!==It){var Bt=(function(en){var Et=[];return Object.keys(en).forEach(function(Dn){en[Dn].forEach(function(Ft){var qt=null;switch(Ft){case"bold":qt={family:Dn,weight:"bold"};break;case"italic":qt={family:Dn,style:"italic"};break;case"bolditalic":qt={family:Dn,weight:"bold",style:"italic"};break;case"":case"normal":qt={family:Dn}}qt!==null&&(qt.ref={name:Dn,style:Ft},Et.push(qt))})}),Et})(rn);at=(function(en){for(var Et={},Dn=0;Dn<en.length;++Dn){var Ft=yv(en[Dn]),qt=Ft.family,Fn=Ft.stretch,St=Ft.style,Nt=Ft.weight;Et[qt]=Et[qt]||{},Et[qt][Fn]=Et[qt][Fn]||{},Et[qt][Fn][St]=Et[qt][Fn][St]||{},Et[qt][Fn][St][Nt]=Ft}return Et})(Bt.concat(yr)),ot=It}return at})(this.pdf,this.fontFaces),zt=it.map(function(_t){return{family:_t,stretch:"normal",weight:Te,style:Kt}}),$t=(function(_t,yr,rn){for(var It=(rn=rn||{}).defaultFontFamily||"times",Bt=Object.assign({},Bq,rn.genericFontFamilies||{}),en=null,Et=null,Dn=0;Dn<yr.length;++Dn)if(Bt[(en=yv(yr[Dn])).family]&&(en.family=Bt[en.family]),_t.hasOwnProperty(en.family)){Et=_t[en.family];break}if(!(Et=Et||_t[It]))throw new Error("Could not find a font-family for the rule '"+NN(en)+"' and default family '"+It+"'.");if(Et=(function(Ft,qt){if(qt[Ft])return qt[Ft];var Fn=b1[Ft],St=Fn<=b1.normal?-1:1,Nt=wN(qt,vj,Fn,St);if(!Nt)throw new Error("Could not find a matching font-stretch value for "+Ft);return Nt})(en.stretch,Et),Et=(function(Ft,qt){if(qt[Ft])return qt[Ft];for(var Fn=xj[Ft],St=0;St<Fn.length;++St)if(qt[Fn[St]])return qt[Fn[St]];throw new Error("Could not find a matching font-style for "+Ft)})(en.style,Et),!(Et=(function(Ft,qt){if(qt[Ft])return qt[Ft];if(Ft===400&&qt[500])return qt[500];if(Ft===500&&qt[400])return qt[400];var Fn=Vq[Ft],St=wN(qt,yj,Fn,Ft<400?-1:1);if(!St)throw new Error("Could not find a matching font-weight for value "+Ft);return St})(en.weight,Et)))throw new Error("Failed to resolve a font for the rule '"+NN(en)+"'.");return Et})(lt,zt);this.pdf.setFont($t.ref.name,$t.ref.style)}else{var Gt="";(Te==="bold"||parseInt(Te,10)>=700||Kt==="bold")&&(Gt="bold"),Kt==="italic"&&(Gt+="italic"),Gt.length===0&&(Gt="normal");for(var cn="",nn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},bt=0;bt<it.length;bt++){if(this.pdf.internal.getFont(it[bt],Gt,{noFallback:!0,disableWarning:!0})!==void 0){cn=it[bt];break}if(Gt==="bolditalic"&&this.pdf.internal.getFont(it[bt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)cn=it[bt],Gt="bold";else if(this.pdf.internal.getFont(it[bt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){cn=it[bt],Gt="normal";break}}if(cn===""){for(var Xt=0;Xt<it.length;Xt++)if(nn[it[Xt]]){cn=nn[it[Xt]];break}}cn=cn===""?"Times":cn,this.pdf.setFont(cn,Gt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ie){this.ctx.globalCompositeOperation=ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ie){this.ctx.globalAlpha=ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ie){this.ctx.lineDashOffset=ie,X.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ie){this.ctx.lineDash=ie,X.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ie){this.ctx.ignoreClearRect=!!ie}})};y.prototype.setLineDash=function(q){this.lineDash=q},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){H.call(this,"fill",!1)},y.prototype.stroke=function(){H.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(q,J){if(isNaN(q)||isNaN(J))throw vr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ne=this.ctx.transform.applyToPoint(new c(q,J));this.path.push({type:"mt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new c(q,J)},y.prototype.closePath=function(){var q=new c(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&nr(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){q=new c(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(q.x,q.y)},y.prototype.lineTo=function(q,J){if(isNaN(q)||isNaN(J))throw vr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ne=this.ctx.transform.applyToPoint(new c(q,J));this.path.push({type:"lt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new c(ne.x,ne.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),H.call(this,null,!0)},y.prototype.quadraticCurveTo=function(q,J,ne,ue){if(isNaN(ne)||isNaN(ue)||isNaN(q)||isNaN(J))throw vr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pe=this.ctx.transform.applyToPoint(new c(ne,ue)),we=this.ctx.transform.applyToPoint(new c(q,J));this.path.push({type:"qct",x1:we.x,y1:we.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new c(pe.x,pe.y)},y.prototype.bezierCurveTo=function(q,J,ne,ue,pe,we){if(isNaN(pe)||isNaN(we)||isNaN(q)||isNaN(J)||isNaN(ne)||isNaN(ue))throw vr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var De=this.ctx.transform.applyToPoint(new c(pe,we)),Re=this.ctx.transform.applyToPoint(new c(q,J)),Ue=this.ctx.transform.applyToPoint(new c(ne,ue));this.path.push({type:"bct",x1:Re.x,y1:Re.y,x2:Ue.x,y2:Ue.y,x:De.x,y:De.y}),this.ctx.lastPoint=new c(De.x,De.y)},y.prototype.arc=function(q,J,ne,ue,pe,we){if(isNaN(q)||isNaN(J)||isNaN(ne)||isNaN(ue)||isNaN(pe))throw vr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(we=!!we,!this.ctx.transform.isIdentity){var De=this.ctx.transform.applyToPoint(new c(q,J));q=De.x,J=De.y;var Re=this.ctx.transform.applyToPoint(new c(0,ne)),Ue=this.ctx.transform.applyToPoint(new c(0,0));ne=Math.sqrt(Math.pow(Re.x-Ue.x,2)+Math.pow(Re.y-Ue.y,2))}Math.abs(pe-ue)>=2*Math.PI&&(ue=0,pe=2*Math.PI),this.path.push({type:"arc",x:q,y:J,radius:ne,startAngle:ue,endAngle:pe,counterclockwise:we})},y.prototype.arcTo=function(q,J,ne,ue,pe){throw new Error("arcTo not implemented.")},y.prototype.rect=function(q,J,ne,ue){if(isNaN(q)||isNaN(J)||isNaN(ne)||isNaN(ue))throw vr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(q,J),this.lineTo(q+ne,J),this.lineTo(q+ne,J+ue),this.lineTo(q,J+ue),this.lineTo(q,J),this.lineTo(q+ne,J),this.lineTo(q,J)},y.prototype.fillRect=function(q,J,ne,ue){if(isNaN(q)||isNaN(J)||isNaN(ne)||isNaN(ue))throw vr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var pe={};this.lineCap!=="butt"&&(pe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(pe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(q,J,ne,ue),this.fill(),pe.hasOwnProperty("lineCap")&&(this.lineCap=pe.lineCap),pe.hasOwnProperty("lineJoin")&&(this.lineJoin=pe.lineJoin)}},y.prototype.strokeRect=function(q,J,ne,ue){if(isNaN(q)||isNaN(J)||isNaN(ne)||isNaN(ue))throw vr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(q,J,ne,ue),this.stroke())},y.prototype.clearRect=function(q,J,ne,ue){if(isNaN(q)||isNaN(J)||isNaN(ne)||isNaN(ue))throw vr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(q,J,ne,ue))},y.prototype.save=function(q){q=typeof q!="boolean"||q;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),q){this.ctx.fontSize=this.pdf.internal.getFontSize();var ue=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ue}},y.prototype.restore=function(q){q=typeof q!="boolean"||q;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("Q");this.pdf.setPage(J),q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var N=function(q){var J,ne,ue,pe;if(q.isCanvasGradient===!0&&(q=q.getColor()),!q)return{r:0,g:0,b:0,a:0,style:q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(q))J=0,ne=0,ue=0,pe=0;else{var we=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(q);if(we!==null)J=parseInt(we[1]),ne=parseInt(we[2]),ue=parseInt(we[3]),pe=1;else if((we=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(q))!==null)J=parseInt(we[1]),ne=parseInt(we[2]),ue=parseInt(we[3]),pe=parseFloat(we[4]);else{if(pe=1,typeof q=="string"&&q.charAt(0)!=="#"){var De=new uj(q);q=De.ok?De.toHex():"#000000"}q.length===4?(J=q.substring(1,2),J+=J,ne=q.substring(2,3),ne+=ne,ue=q.substring(3,4),ue+=ue):(J=q.substring(1,3),ne=q.substring(3,5),ue=q.substring(5,7)),J=parseInt(J,16),ne=parseInt(ne,16),ue=parseInt(ue,16)}}return{r:J,g:ne,b:ue,a:pe,style:q}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(q,J,ne,ue){if(isNaN(J)||isNaN(ne)||typeof q!="string")throw vr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ue=isNaN(ue)?void 0:ue,!b.call(this)){var pe=me(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;L.call(this,{text:q,x:J,y:ne,scale:we,angle:pe,align:this.textAlign,maxWidth:ue})}},y.prototype.strokeText=function(q,J,ne,ue){if(isNaN(J)||isNaN(ne)||typeof q!="string")throw vr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){ue=isNaN(ue)?void 0:ue;var pe=me(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;L.call(this,{text:q,x:J,y:ne,scale:we,renderingMode:"stroke",angle:pe,align:this.textAlign,maxWidth:ue})}},y.prototype.measureText=function(q){if(typeof q!="string")throw vr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,ne=this.pdf.internal.scaleFactor,ue=J.internal.getFontSize(),pe=J.getStringUnitWidth(q)*ue/J.internal.scaleFactor;return new function(we){var De=(we=we||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return De}}),this}({width:pe*=Math.round(96*ne/72*1e4)/1e4})},y.prototype.scale=function(q,J){if(isNaN(q)||isNaN(J))throw vr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ne=new h(q,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},y.prototype.rotate=function(q){if(isNaN(q))throw vr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new h(Math.cos(q),Math.sin(q),-Math.sin(q),Math.cos(q),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},y.prototype.translate=function(q,J){if(isNaN(q)||isNaN(J))throw vr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ne=new h(1,0,0,1,q,J);this.ctx.transform=this.ctx.transform.multiply(ne)},y.prototype.transform=function(q,J,ne,ue,pe,we){if(isNaN(q)||isNaN(J)||isNaN(ne)||isNaN(ue)||isNaN(pe)||isNaN(we))throw vr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var De=new h(q,J,ne,ue,pe,we);this.ctx.transform=this.ctx.transform.multiply(De)},y.prototype.setTransform=function(q,J,ne,ue,pe,we){q=isNaN(q)?1:q,J=isNaN(J)?0:J,ne=isNaN(ne)?0:ne,ue=isNaN(ue)?1:ue,pe=isNaN(pe)?0:pe,we=isNaN(we)?0:we,this.ctx.transform=new h(q,J,ne,ue,pe,we)};var C=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(q,J,ne,ue,pe,we,De,Re,Ue){var Ze=this.pdf.getImageProperties(q),at=1,ot=1,ht=1,ie=1;ue!==void 0&&Re!==void 0&&(ht=Re/ue,ie=Ue/pe,at=Ze.width/ue*Re/ue,ot=Ze.height/pe*Ue/pe),we===void 0&&(we=J,De=ne,J=0,ne=0),ue!==void 0&&Re===void 0&&(Re=ue,Ue=pe),ue===void 0&&Re===void 0&&(Re=Ze.width,Ue=Ze.height);var rt=this.ctx.transform.decompose(),Kt=me(rt.rotate.shx),Te=new h,Ae=(Te=(Te=(Te=Te.multiply(rt.translate)).multiply(rt.skew)).multiply(rt.scale)).applyToRectangle(new d(we-J*ht,De-ne*ie,ue*at,pe*ot));if(this.autoPaging){for(var Je,tt=R.call(this,Ae),it=[],lt=0;lt<tt.length;lt+=1)it.indexOf(tt[lt])===-1&&it.push(tt[lt]);z(it);for(var zt=it[0],$t=it[it.length-1],Gt=zt;Gt<$t+1;Gt++){this.pdf.setPage(Gt);var cn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nn=Gt===1?this.posY+this.margin[0]:this.margin[0],bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=Gt===1?0:bt+(Gt-2)*Xt;if(this.ctx.clip_path.length!==0){var yr=this.path;Je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Je,this.posX+this.margin[3],-_t+nn+this.ctx.prevPageLastElemOffset),he.call(this,"fill",!0),this.path=yr}var rn=JSON.parse(JSON.stringify(Ae));rn=B([rn],this.posX+this.margin[3],-_t+nn+this.ctx.prevPageLastElemOffset)[0];var It=(Gt>zt||Gt<$t)&&C.call(this);It&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],cn,Xt,null).clip().discardPath()),this.pdf.addImage(q,"JPEG",rn.x,rn.y,rn.w,rn.h,null,null,Kt),It&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(q,"JPEG",Ae.x,Ae.y,Ae.w,Ae.h,null,null,Kt)};var R=function(q,J,ne){var ue=[];J=J||this.pdf.internal.pageSize.width,ne=ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var pe=this.posY+this.ctx.prevPageLastElemOffset;switch(q.type){default:case"mt":case"lt":ue.push(Math.floor((q.y+pe)/ne)+1);break;case"arc":ue.push(Math.floor((q.y+pe-q.radius)/ne)+1),ue.push(Math.floor((q.y+pe+q.radius)/ne)+1);break;case"qct":var we=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x,q.y);ue.push(Math.floor((we.y+pe)/ne)+1),ue.push(Math.floor((we.y+we.h+pe)/ne)+1);break;case"bct":var De=qe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x2,q.y2,q.x,q.y);ue.push(Math.floor((De.y+pe)/ne)+1),ue.push(Math.floor((De.y+De.h+pe)/ne)+1);break;case"rect":ue.push(Math.floor((q.y+pe)/ne)+1),ue.push(Math.floor((q.y+q.h+pe)/ne)+1)}for(var Re=0;Re<ue.length;Re+=1)for(;this.pdf.internal.getNumberOfPages()<ue[Re];)I.call(this);return ue},I=function(){var q=this.fillStyle,J=this.strokeStyle,ne=this.font,ue=this.lineCap,pe=this.lineWidth,we=this.lineJoin;this.pdf.addPage(),this.fillStyle=q,this.strokeStyle=J,this.font=ne,this.lineCap=ue,this.lineWidth=pe,this.lineJoin=we},B=function(q,J,ne){for(var ue=0;ue<q.length;ue++)switch(q[ue].type){case"bct":q[ue].x2+=J,q[ue].y2+=ne;case"qct":q[ue].x1+=J,q[ue].y1+=ne;default:q[ue].x+=J,q[ue].y+=ne}return q},z=function(q){return q.sort(function(J,ne){return J-ne})},H=function(q,J){var ne=this.fillStyle,ue=this.strokeStyle,pe=this.lineCap,we=this.lineWidth,De=Math.abs(we*this.ctx.transform.scaleX),Re=this.lineJoin;if(this.autoPaging){for(var Ue,Ze,at=JSON.parse(JSON.stringify(this.path)),ot=JSON.parse(JSON.stringify(this.path)),ht=[],ie=0;ie<ot.length;ie++)if(ot[ie].x!==void 0)for(var rt=R.call(this,ot[ie]),Kt=0;Kt<rt.length;Kt+=1)ht.indexOf(rt[Kt])===-1&&ht.push(rt[Kt]);for(var Te=0;Te<ht.length;Te++)for(;this.pdf.internal.getNumberOfPages()<ht[Te];)I.call(this);z(ht);for(var Ae=ht[0],Je=ht[ht.length-1],tt=Ae;tt<Je+1;tt++){this.pdf.setPage(tt),this.fillStyle=ne,this.strokeStyle=ue,this.lineCap=pe,this.lineWidth=De,this.lineJoin=Re;var it=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],lt=tt===1?this.posY+this.margin[0]:this.margin[0],zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Gt=tt===1?0:zt+(tt-2)*$t;if(this.ctx.clip_path.length!==0){var cn=this.path;Ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Ue,this.posX+this.margin[3],-Gt+lt+this.ctx.prevPageLastElemOffset),he.call(this,q,!0),this.path=cn}if(Ze=JSON.parse(JSON.stringify(at)),this.path=B(Ze,this.posX+this.margin[3],-Gt+lt+this.ctx.prevPageLastElemOffset),J===!1||tt===0){var nn=(tt>Ae||tt<Je)&&C.call(this);nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],it,$t,null).clip().discardPath()),he.call(this,q,J),nn&&this.pdf.restoreGraphicsState()}this.lineWidth=we}this.path=at}else this.lineWidth=De,he.call(this,q,J),this.lineWidth=we},he=function(q,J){if((q!=="stroke"||J||!j.call(this))&&(q==="stroke"||J||!b.call(this))){for(var ne,ue,pe=[],we=this.path,De=0;De<we.length;De++){var Re=we[De];switch(Re.type){case"begin":pe.push({begin:!0});break;case"close":pe.push({close:!0});break;case"mt":pe.push({start:Re,deltas:[],abs:[]});break;case"lt":var Ue=pe.length;if(we[De-1]&&!isNaN(we[De-1].x)&&(ne=[Re.x-we[De-1].x,Re.y-we[De-1].y],Ue>0)){for(;Ue>=0;Ue--)if(pe[Ue-1].close!==!0&&pe[Ue-1].begin!==!0){pe[Ue-1].deltas.push(ne),pe[Ue-1].abs.push(Re);break}}break;case"bct":ne=[Re.x1-we[De-1].x,Re.y1-we[De-1].y,Re.x2-we[De-1].x,Re.y2-we[De-1].y,Re.x-we[De-1].x,Re.y-we[De-1].y],pe[pe.length-1].deltas.push(ne);break;case"qct":var Ze=we[De-1].x+2/3*(Re.x1-we[De-1].x),at=we[De-1].y+2/3*(Re.y1-we[De-1].y),ot=Re.x+2/3*(Re.x1-Re.x),ht=Re.y+2/3*(Re.y1-Re.y),ie=Re.x,rt=Re.y;ne=[Ze-we[De-1].x,at-we[De-1].y,ot-we[De-1].x,ht-we[De-1].y,ie-we[De-1].x,rt-we[De-1].y],pe[pe.length-1].deltas.push(ne);break;case"arc":pe.push({deltas:[],abs:[],arc:!0}),Array.isArray(pe[pe.length-1].abs)&&pe[pe.length-1].abs.push(Re)}}ue=J?null:q==="stroke"?"stroke":"fill";for(var Kt=!1,Te=0;Te<pe.length;Te++)if(pe[Te].arc)for(var Ae=pe[Te].abs,Je=0;Je<Ae.length;Je++){var tt=Ae[Je];tt.type==="arc"?D.call(this,tt.x,tt.y,tt.radius,tt.startAngle,tt.endAngle,tt.counterclockwise,void 0,J,!Kt):F.call(this,tt.x,tt.y),Kt=!0}else if(pe[Te].close===!0)this.pdf.internal.out("h"),Kt=!1;else if(pe[Te].begin!==!0){var it=pe[Te].start.x,lt=pe[Te].start.y;ae.call(this,pe[Te].deltas,it,lt),Kt=!0}ue&&k.call(this,ue),J&&G.call(this)}},re=function(q){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ne=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return q-ne;case"top":return q+J-ne;case"hanging":return q+J-2*ne;case"middle":return q+J/2-ne;default:return q}},V=function(q){return q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var q=function(){};return q.colorStops=[],q.addColorStop=function(J,ne){this.colorStops.push([J,ne])},q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},q.isCanvasGradient=!0,q},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var D=function(q,J,ne,ue,pe,we,De,Re,Ue){for(var Ze=K.call(this,ne,ue,pe,we),at=0;at<Ze.length;at++){var ot=Ze[at];at===0&&(Ue?S.call(this,ot.x1+q,ot.y1+J):F.call(this,ot.x1+q,ot.y1+J)),ve.call(this,q,J,ot.x2,ot.y2,ot.x3,ot.y3,ot.x4,ot.y4)}Re?G.call(this):k.call(this,De)},k=function(q){switch(q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},G=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(q,J){this.pdf.internal.out(t(q)+" "+r(J)+" m")},L=function(q){var J;switch(q.align){case"right":case"end":J="right";break;case"center":J="center";break;default:J="left"}var ne,ue,pe,we=this.pdf.getTextDimensions(q.text),De=re.call(this,q.y),Re=V.call(this,De)-we.h,Ue=this.ctx.transform.applyToPoint(new c(q.x,De));if(this.autoPaging){var Ze=this.ctx.transform.decompose(),at=new h;at=(at=(at=at.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale);for(var ot=this.ctx.transform.applyToRectangle(new d(q.x,De,we.w,we.h)),ht=at.applyToRectangle(new d(q.x,Re,we.w,we.h)),ie=R.call(this,ht),rt=[],Kt=0;Kt<ie.length;Kt+=1)rt.indexOf(ie[Kt])===-1&&rt.push(ie[Kt]);z(rt);for(var Te=rt[0],Ae=rt[rt.length-1],Je=Te;Je<Ae+1;Je++){this.pdf.setPage(Je);var tt=Je===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[2],zt=lt-this.margin[0],$t=this.pdf.internal.pageSize.width-this.margin[1],Gt=$t-this.margin[3],cn=Je===1?0:it+(Je-2)*zt;if(this.ctx.clip_path.length!==0){var nn=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(ne,this.posX+this.margin[3],-1*cn+tt),he.call(this,"fill",!0),this.path=nn}var bt=B([JSON.parse(JSON.stringify(ht))],this.posX+this.margin[3],-cn+tt+this.ctx.prevPageLastElemOffset)[0];q.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*q.scale),pe=this.lineWidth,this.lineWidth=pe*q.scale);var Xt=this.autoPaging!=="text";if(Xt||bt.y+bt.h<=lt){if(Xt||bt.y>=tt&&bt.x<=$t){var _t=Xt?q.text:this.pdf.splitTextToSize(q.text,q.maxWidth||$t-bt.x)[0],yr=B([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-cn+tt+this.ctx.prevPageLastElemOffset)[0],rn=Xt&&(Je>Te||Je<Ae)&&C.call(this);rn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,zt,null).clip().discardPath()),this.pdf.text(_t,yr.x,yr.y,{angle:q.angle,align:J,renderingMode:q.renderingMode}),rn&&this.pdf.restoreGraphicsState()}}else bt.y<lt&&(this.ctx.prevPageLastElemOffset+=lt-bt.y);q.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=pe)}}else q.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*q.scale),pe=this.lineWidth,this.lineWidth=pe*q.scale),this.pdf.text(q.text,Ue.x+this.posX,Ue.y+this.posY,{angle:q.angle,align:J,renderingMode:q.renderingMode,maxWidth:q.maxWidth}),q.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=pe)},F=function(q,J,ne,ue){ne=ne||0,ue=ue||0,this.pdf.internal.out(t(q+ne)+" "+r(J+ue)+" l")},ae=function(q,J,ne){return this.pdf.lines(q,J,ne,null,null)},ve=function(q,J,ne,ue,pe,we,De,Re){this.pdf.internal.out([e(i(ne+q)),e(a(ue+J)),e(i(pe+q)),e(a(we+J)),e(i(De+q)),e(a(Re+J)),"c"].join(" "))},K=function(q,J,ne,ue){for(var pe=2*Math.PI,we=Math.PI/2;J>ne;)J-=pe;var De=Math.abs(ne-J);De<pe&&ue&&(De=pe-De);for(var Re=[],Ue=ue?-1:1,Ze=J;De>1e-5;){var at=Ze+Ue*Math.min(De,we);Re.push(ce.call(this,q,Ze,at)),De-=Math.abs(at-Ze),Ze=at}return Re},ce=function(q,J,ne){var ue=(ne-J)/2,pe=q*Math.cos(ue),we=q*Math.sin(ue),De=pe,Re=-we,Ue=De*De+Re*Re,Ze=Ue+De*pe+Re*we,at=4/3*(Math.sqrt(2*Ue*Ze)-Ze)/(De*we-Re*pe),ot=De-at*Re,ht=Re+at*De,ie=ot,rt=-ht,Kt=ue+J,Te=Math.cos(Kt),Ae=Math.sin(Kt);return{x1:q*Math.cos(J),y1:q*Math.sin(J),x2:ot*Te-ht*Ae,y2:ot*Ae+ht*Te,x3:ie*Te-rt*Ae,y3:ie*Ae+rt*Te,x4:q*Math.cos(ne),y4:q*Math.sin(ne)}},me=function(q){return 180*q/Math.PI},Se=function(q,J,ne,ue,pe,we){var De=q+.5*(ne-q),Re=J+.5*(ue-J),Ue=pe+.5*(ne-pe),Ze=we+.5*(ue-we),at=Math.min(q,pe,De,Ue),ot=Math.max(q,pe,De,Ue),ht=Math.min(J,we,Re,Ze),ie=Math.max(J,we,Re,Ze);return new d(at,ht,ot-at,ie-ht)},qe=function(q,J,ne,ue,pe,we,De,Re){var Ue,Ze,at,ot,ht,ie,rt,Kt,Te,Ae,Je,tt,it,lt,zt=ne-q,$t=ue-J,Gt=pe-ne,cn=we-ue,nn=De-pe,bt=Re-we;for(Ze=0;Ze<41;Ze++)Te=(rt=(at=q+(Ue=Ze/40)*zt)+Ue*((ht=ne+Ue*Gt)-at))+Ue*(ht+Ue*(pe+Ue*nn-ht)-rt),Ae=(Kt=(ot=J+Ue*$t)+Ue*((ie=ue+Ue*cn)-ot))+Ue*(ie+Ue*(we+Ue*bt-ie)-Kt),Ze==0?(Je=Te,tt=Ae,it=Te,lt=Ae):(Je=Math.min(Je,Te),tt=Math.min(tt,Ae),it=Math.max(it,Te),lt=Math.max(lt,Ae));return new d(Math.round(Je),Math.round(tt),Math.round(it-Je),Math.round(lt-tt))},X=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var q,J,ne=(q=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:q,lineDashOffset:J}));this.prevLineDash!==ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ne)}}})(jt.API),(function(n){var e=function(c){var d,h,f,p,y,N,b,j,C,R;for(h=[],f=0,p=(c+=d="\0\0\0\0".slice(c.length%4||4)).length;p>f;f+=4)(y=(c.charCodeAt(f)<<24)+(c.charCodeAt(f+1)<<16)+(c.charCodeAt(f+2)<<8)+c.charCodeAt(f+3))!==0?(N=(y=((y=((y=((y=(y-(R=y%85))/85)-(C=y%85))/85)-(j=y%85))/85)-(b=y%85))/85)%85,h.push(N+33,b+33,j+33,C+33,R+33)):h.push(122);return(function(I,B){for(var z=B;z>0;z--)I.pop()})(h,d.length),String.fromCharCode.apply(String,h)+"~>"},t=function(c){var d,h,f,p,y,N=String,b="length",j=255,C="charCodeAt",R="slice",I="replace";for(c[R](-2),c=c[R](0,-2)[I](/\s/g,"")[I]("z","!!!!!"),f=[],p=0,y=(c+=d="uuuuu"[R](c[b]%5||5))[b];y>p;p+=5)h=52200625*(c[C](p)-33)+614125*(c[C](p+1)-33)+7225*(c[C](p+2)-33)+85*(c[C](p+3)-33)+(c[C](p+4)-33),f.push(j&h>>24,j&h>>16,j&h>>8,j&h);return(function(B,z){for(var H=z;H>0;H--)B.pop()})(f,d[b]),N.fromCharCode.apply(N,f)},r=function(c){return c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(c){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),d.test(c)===!1)return"";for(var h="",f=0;f<c.length;f+=2)h+=String.fromCharCode("0x"+(c[f]+c[f+1]));return h},a=function(c){for(var d=new Uint8Array(c.length),h=c.length;h--;)d[h]=c.charCodeAt(h);return(d=f1(d)).reduce(function(f,p){return f+String.fromCharCode(p)},"")};n.processDataByFilters=function(c,d){var h=0,f=c||"",p=[];for(typeof(d=d||[])=="string"&&(d=[d]),h=0;h<d.length;h+=1)switch(d[h]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=i(f),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=r(f),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=a(f),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[h]+'" is not implemented')}return{data:f,reverseChain:p.reverse().join(" ")}}})(jt.API),(function(n){n.loadFile=function(e,t,r){return(function(i,a,c){a=a!==!1,c=typeof c=="function"?c:function(){};var d=void 0;try{d=(function(h,f,p){var y=new XMLHttpRequest,N=0,b=function(j){var C=j.length,R=[],I=String.fromCharCode;for(N=0;N<C;N+=1)R.push(I(255&j.charCodeAt(N)));return R.join("")};if(y.open("GET",h,!f),y.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(y.onload=function(){y.status===200?p(b(this.responseText)):p(void 0)}),y.send(null),f&&y.status===200)return b(y.responseText)})(i,a,c)}catch{}return d})(e,t,r)},n.loadImageFile=n.loadFile})(jt.API),(function(n){function e(){return(Zt.html2canvas?Promise.resolve(Zt.html2canvas):tv(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function t(){return(Zt.DOMPurify?Promise.resolve(Zt.DOMPurify):tv(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var r=function(d){var h=nr(d);return h==="undefined"?"undefined":h==="string"||d instanceof String?"string":h==="number"||d instanceof Number?"number":h==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":h==="object"?"object":"unknown"},i=function(d,h){var f=document.createElement(d);for(var p in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[p]=h.style[p];return f},a=function d(h,f){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),y=h.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||p.appendChild(d(y,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p},c=function d(h){var f=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),p=d.convert(Promise.resolve(),f);return(p=p.setProgress(1,d,1,[d])).set(h)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(d,h){return d.__proto__=h||c.prototype,d},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(d,h){return this.then(function(){switch(h=h||(function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),h){case"string":return this.then(t).then(function(f){return this.set({src:i("div",{innerHTML:d,dompurify:f})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},c.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var f=this.opt.jsPDF,p=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,N=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete N.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=p,p)for(var b=0;b<p.length;++b){var j=p[b],C=j.src.find(function(R){return R.format==="truetype"});C&&f.addFont(C.url,j.ref.name,j.ref.style)}return N.windowHeight=N.windowHeight||0,N.windowHeight=N.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):N.windowHeight,f.context2d.save(!0),h(this.prop.container,N)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(d,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(d,h):this.outputPdf(d,h)},c.prototype.outputPdf=function(d,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,h)})},c.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},c.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(d){if(r(d)!=="object")return this;var h=Object.keys(d||{}).map(function(f){if(f in c.template.prop)return function(){this.prop[f]=d[f]};switch(f){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[f]=d[f]}}},this);return this.then(function(){return this.thenList(h)})},c.prototype.get=function(d,h){return this.then(function(){var f=d in c.template.prop?this.prop[d]:this.opt[d];return h?h(f):f})},c.prototype.setMargin=function(d){return this.then(function(){switch(r(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},c.prototype.setPageSize=function(d){function h(f,p){return Math.floor(f*p/72*96)}return this.then(function(){(d=d||jt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:h(d.inner.width,d.k),height:h(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},c.prototype.setProgress=function(d,h,f,p){return d!=null&&(this.progress.val=d),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(d,h,f,p){return this.setProgress(d?this.progress.val+d:null,h||null,f?this.progress.n+f:null,p?this.progress.stack.concat(p):null)},c.prototype.then=function(d,h){var f=this;return this.thenCore(d,h,function(p,y){return f.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(N){return f.updateProgress(null,p),N}).then(p,y).then(function(N){return f.updateProgress(1),N})})},c.prototype.thenCore=function(d,h,f){f=f||Promise.prototype.then;var p=this;d&&(d=d.bind(p)),h&&(h=h.bind(p));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:c.convert(Object.assign({},p),Promise.prototype),N=f.call(y,d,h);return c.convert(N,p.__proto__)},c.prototype.thenExternal=function(d,h){return Promise.prototype.then.call(this,d,h)},c.prototype.thenList=function(d){var h=this;return d.forEach(function(f){h=h.thenCore(f)}),h},c.prototype.catch=function(d){d&&(d=d.bind(this));var h=Promise.prototype.catch.call(this,d);return c.convert(h,this)},c.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},c.prototype.error=function(d){return this.then(function(){throw new Error(d)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,jt.getPageSize=function(d,h,f){if(nr(d)==="object"){var p=d;d=p.orientation,h=p.unit||h,f=p.format||f}h=h||"mm",f=f||"a4",d=(""+(d||"P")).toLowerCase();var y,N=(""+f).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+h}var j,C=0,R=0;if(b.hasOwnProperty(N))C=b[N][1]/y,R=b[N][0]/y;else try{C=f[1],R=f[0]}catch{throw new Error("Invalid format: "+f)}if(d==="p"||d==="portrait")d="p",R>C&&(j=R,R=C,C=j);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",C>R&&(j=R,R=C,C=j)}return{width:R,height:C,unit:h,k:y,orientation:d}},n.html=function(d,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(yv):null;var f=new c(h);return h.worker?f:f.from(d).doCallback()}})(jt.API),jt.API.addJS=function(n){return jN=n,this.internal.events.subscribe("postPutResources",function(){kp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(kp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),SN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+jN+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){kp!==void 0&&SN!==void 0&&this.internal.out("/Names <</JavaScript "+kp+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var c=i[a],d=r.exec(c);if(d!=null){var h=d[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(a=0;a<f;a++){var y=t.internal.newObject();p.push(y);var N=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+N.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<p.length;a++)t.internal.write("(page_"+(a+1)+")"+p[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,a){var c={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var c=r.children[a];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var d=this.count=this.count_r({count:0},c);if(d>0&&this.line("/Count "+d),c.options&&c.options.pageNumber){var h=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])})(jt.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,a,c,d){var h,f=this.decode.DCT_DECODE,p=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(y){for(var N,b=256*y.charCodeAt(4)+y.charCodeAt(5),j=y.length,C={width:0,height:0,numcomponents:1},R=4;R<j;R+=2){if(R+=b,e.indexOf(y.charCodeAt(R+1))!==-1){N=256*y.charCodeAt(R+5)+y.charCodeAt(R+6),C={width:256*y.charCodeAt(R+7)+y.charCodeAt(R+8),height:N,numcomponents:y.charCodeAt(R+9)};break}b=256*y.charCodeAt(R+2)+y.charCodeAt(R+3)}return C})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}p={data:t,width:h.width,height:h.height,colorSpace:d,bitsPerComponent:8,filter:f,index:r,alias:i}}return p}})(jt.API),jt.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,a=jq(n,{checkCrc:!0}),c=a.width,d=a.height,h=a.channels,f=a.palette,p=a.depth;i=f&&h===1?(function(D){for(var k=D.width,G=D.height,S=D.data,L=D.palette,F=D.depth,ae=!1,ve=[],K=[],ce=void 0,me=!1,Se=0,qe=0;qe<L.length;qe++){var X=I_(L[qe],4),q=X[0],J=X[1],ne=X[2],ue=X[3];ve.push(q,J,ne),ue!=null&&(ue===0?(Se++,K.length<1&&K.push(qe)):ue<255&&(me=!0))}if(me||Se>1){ae=!0,K=void 0;var pe=k*G;ce=new Uint8Array(pe);for(var we=new DataView(S.buffer),De=0;De<pe;De++){var Re=wv(we,De,F),Ue=I_(L[Re],4)[3];ce[De]=Ue}}else Se===0&&(K=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ae?8:void 0,colorBytes:S,alphaBytes:ce,needSMask:ae,palette:ve,mask:K}})(a):h===2||h===4?(function(D){for(var k=D.data,G=D.width,S=D.height,L=D.channels,F=D.depth,ae=L===2?"DeviceGray":"DeviceRGB",ve=L-1,K=G*S,ce=ve,me=K*ce,Se=1*K,qe=Math.ceil(me*F/8),X=Math.ceil(Se*F/8),q=new Uint8Array(qe),J=new Uint8Array(X),ne=new DataView(k.buffer),ue=new DataView(q.buffer),pe=new DataView(J.buffer),we=!1,De=0;De<K;De++){for(var Re=De*L,Ue=0;Ue<ce;Ue++)DN(ue,wv(ne,Re+Ue,F),De*ce+Ue,F);var Ze=wv(ne,Re+ce,F);Ze<(1<<F)-1&&(we=!0),DN(pe,Ze,1*De,F)}return{colorSpace:ae,colorsPerPixel:ve,sMaskBitsPerComponent:we?F:void 0,colorBytes:q,alphaBytes:J,needSMask:we}})(a):(function(D){var k=D.data,G=D.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:G,colorsPerPixel:G==="DeviceGray"?1:3,colorBytes:k instanceof Uint16Array?(function(S){for(var L=S.length,F=new Uint8Array(2*L),ae=new DataView(F.buffer,F.byteOffset,F.byteLength),ve=0;ve<L;ve++)ae.setUint16(2*ve,S[ve],!1);return F})(k):k,needSMask:!1}})(a);var y,N,b,j=i,C=j.colorSpace,R=j.colorsPerPixel,I=j.sMaskBitsPerComponent,B=j.colorBytes,z=j.alphaBytes,H=j.needSMask,he=j.palette,re=j.mask,V=null;return r!==jt.API.image_compression.NONE&&typeof f1=="function"?(V=(function(D){var k;switch(D){case jt.API.image_compression.FAST:k=11;break;case jt.API.image_compression.MEDIUM:k=13;break;case jt.API.image_compression.SLOW:k=14;break;default:k=12}return k})(r),y=this.decode.FLATE_DECODE,N="/Predictor ".concat(V," /Colors ").concat(R," /BitsPerComponent ").concat(p," /Columns ").concat(c),n=IN(B,Math.ceil(c*R*p/8),R,p,r),H&&(b=IN(z,Math.ceil(c*I/8),1,I,r))):(y=void 0,N=void 0,n=B,H&&(b=z)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:t,data:n,index:e,filter:y,decodeParameters:N,transparency:re,palette:he,sMask:b,predictor:V,width:c,height:d,bitsPerComponent:p,sMaskBitsPerComponent:I,colorSpace:C}}},(function(n){n.processGIF89A=function(e,t,r,i){var a=new Wq(e),c=a.width,d=a.height,h=[];a.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:c,height:d},p=new _v(100).encode(f,100);return n.processJPEG.call(this,p,t,r,i)},n.processGIF87A=n.processGIF89A})(jt.API),ko.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ko.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){vr.log("bit decode error:"+t)}},ko.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+8*i*4,d=0;d<8&&8*i+d<this.width;d++){var h=this.palette[a>>7-d&1];this.data[c+4*d]=h.blue,this.data[c+4*d+1]=h.green,this.data[c+4*d+2]=h.red,this.data[c+4*d+3]=255}t!==0&&(this.pos+=4-t)}},ko.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var a=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+2*i*4,d=a>>4,h=15&a,f=this.palette[d];if(this.data[c]=f.blue,this.data[c+1]=f.green,this.data[c+2]=f.red,this.data[c+3]=255,2*i+1>=this.width)break;f=this.palette[h],this.data[c+4]=f.blue,this.data[c+4+1]=f.green,this.data[c+4+2]=f.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},ko.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;if(i<this.palette.length){var c=this.palette[i];this.data[a]=c.red,this.data[a+1]=c.green,this.data[a+2]=c.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},ko.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&e)/e*255|0,d=(a>>5&e)/e*255|0,h=(a>>10&e)/e*255|0,f=a>>15?255:0,p=r*this.width*4+4*i;this.data[p]=h,this.data[p+1]=d,this.data[p+2]=c,this.data[p+3]=f}this.pos+=n}},ko.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(c&e)/e*255|0,h=(c>>5&t)/t*255|0,f=(c>>11)/e*255|0,p=i*this.width*4+4*a;this.data[p]=f,this.data[p+1]=h,this.data[p+2]=d,this.data[p+3]=255}this.pos+=n}},ko.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=a,this.data[c+1]=i,this.data[c+2]=r,this.data[c+3]=255}this.pos+=this.width%4}},ko.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=a,this.data[d+1]=i,this.data[d+2]=r,this.data[d+3]=c}},ko.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var a=new ko(e,!1),c=a.width,d=a.height,h={data:a.getData(),width:c,height:d},f=new _v(100).encode(h,100);return n.processJPEG.call(this,f,t,r,i)}})(jt.API),ON.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var a=new ON(e),c=a.width,d=a.height,h={data:a.getData(),width:c,height:d},f=new _v(100).encode(h,100);return n.processJPEG.call(this,f,t,r,i)}})(jt.API),jt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,a=new Uint8Array(i/4*3),c=new Uint8Array(i/4),d=0,h=0,f=0;f<i;f+=4){var p=r[f],y=r[f+1],N=r[f+2],b=r[f+3];a[d++]=p,a[d++]=y,a[d++]=N,c[h++]=b}var j=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:j,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},jt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Xd=jt.API,Pp=Xd.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:i.metadata.Unicode.widths,h=d.fof?d.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,p=f.fof?f.fof:1,y=e.doKerning!==!1,N=0,b=n.length,j=0,C=d[0]||h,R=[];for(t=0;t<b;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?R.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+c*(1e3/a)||0)/1e3):(N=y&&nr(f[r])==="object"&&!isNaN(parseInt(f[r][j],10))?f[r][j]/p:0,R.push((d[r]||C)/h+N)),j=r;return R},EN=Xd.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Xd.processArabic&&(n=Xd.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Pp.apply(this,arguments).reduce(function(a,c){return a+c},0)},TN=function(n,e,t,r){for(var i=[],a=0,c=n.length,d=0;a!==c&&d+e[a]<t;)d+=e[a],a++;i.push(n.slice(0,a));var h=a;for(d=0;a!==c;)d+e[a]>r&&(i.push(n.slice(h,a)),d=0,h=a),d+=e[a],a++;return h!==a&&i.push(n.slice(h,a)),i},CN=function(n,e,t){t||(t={});var r,i,a,c,d,h,f,p=[],y=[p],N=t.textIndent||0,b=0,j=0,C=n.split(" "),R=Pp.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?C[0].length+2:t.lineIndent||0){var I=Array(h).join(" "),B=[];C.map(function(H){(H=H.split(/\s*\n/)).length>1?B=B.concat(H.map(function(he,re){return(re&&he.length?`
`:"")+he})):B.push(H[0])}),C=B,h=EN.apply(this,[I,t])}for(a=0,c=C.length;a<c;a++){var z=0;if(r=C[a],h&&r[0]==`
`&&(r=r.substr(1),z=1),N+b+(j=(i=Pp.apply(this,[r,t])).reduce(function(H,he){return H+he},0))>e||z){if(j>e){for(d=TN.apply(this,[r,i,e-(N+b),e]),p.push(d.shift()),p=[d.pop()];d.length;)y.push([d.shift()]);j=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(H,he){return H+he},0)}else p=[r];y.push(p),N=j+h,b=R}else p.push(r),N+=b+j,b=R}return f=h?function(H,he){return(he?I:"")+H.join(" ")}:function(H){return H.join(" ")},y.map(f)},Xd.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var y=this.internal.getFont(p.fontName,p.fontStyle),N="Unicode";return y.metadata[N]?{widths:y.metadata[N].widths||{0:1},kerning:y.metadata[N].kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var d,h,f=[];for(d=0,h=r.length;d<h;d++)f=f.concat(CN.apply(this,[r[d],c,a]));return f},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},a=0;a<16;a++)r[t[a]]=e[a],i[e[a]]=t[a];var c=function(N){return"0x"+parseInt(N,10).toString(16)},d=n.__fontmetrics__.compress=function(N){var b,j,C,R,I=["{"];for(var B in N){if(b=N[B],isNaN(parseInt(B,10))?j="'"+B+"'":(B=parseInt(B,10),j=(j=c(B).slice(2)).slice(0,-1)+i[j.slice(-1)]),typeof b=="number")b<0?(C=c(b).slice(3),R="-"):(C=c(b).slice(2),R=""),C=R+C.slice(0,-1)+i[C.slice(-1)];else{if(nr(b)!=="object")throw new Error("Don't know what to do with value type "+nr(b)+".");C=d(b)}I.push(j+C)}return I.push("}"),I.join("")},h=n.__fontmetrics__.uncompress=function(N){if(typeof N!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,j,C,R,I={},B=1,z=I,H=[],he="",re="",V=N.length-1,D=1;D<V;D+=1)(R=N[D])=="'"?b?(C=b.join(""),b=void 0):b=[]:b?b.push(R):R=="{"?(H.push([z,C]),z={},C=void 0):R=="}"?((j=H.pop())[0][j[1]]=z,C=void 0,z=j[0]):R=="-"?B=-1:C===void 0?r.hasOwnProperty(R)?(he+=r[R],C=parseInt(he,16)*B,B=1,he=""):he+=R:r.hasOwnProperty(R)?(re+=r[R],z[C]=parseInt(re,16)*B,B=1,C=void 0,re=""):re+=R;return I},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},y={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(N){var b=N.font,j=y.Unicode[b.postScriptName];j&&(b.metadata.Unicode={},b.metadata.Unicode.widths=j.widths,b.metadata.Unicode.kerning=j.kerning);var C=p.Unicode[b.postScriptName];C&&(b.metadata.Unicode.encoding=C,b.encoding=C.codePages[0])}])})(jt.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=t.charCodeAt(a);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(c,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(Xp(d)),c.metadata=n.API.TTFFont.open(d),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(i,r)}}])})(jt),jt.API.addSvgAsImage=function(n,e,t,r,i,a,c,d){if(isNaN(e)||isNaN(t))throw vr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw vr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=r,h.height=i;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return(Zt.canvg?Promise.resolve(Zt.canvg):tv(()=>import("./index.es-DL3jl-kI.js"),[])).catch(function(N){return Promise.reject(new Error("Could not load canvg: "+N))}).then(function(N){return N.default?N.default:N}).then(function(N){return N.fromString(f,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(p)}).then(function(){y.addImage(h.toDataURL("image/jpeg",1),e,t,r,i,c,d)})},jt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},jt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,a,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(c),h=[],f=0,p=0,y=0;function N(j,C){var R,I=!1;for(R=0;R<j.length;R+=1)j[R]===C&&(I=!0);return I}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var b=d.length;for(y=0;y<b;y+=1)t[d[y]].value=t[d[y]].defaultValue,t[d[y]].explicitSet=!1}if(nr(n)==="object"){for(i in n)if(a=n[i],N(d,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&N(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(f=0;f<a.length;f+=1)if(r=!0,a[f].length===1&&typeof a[f][0]=="number")h.push(String(a[f]-1));else if(a[f].length>1){for(p=0;p<a[f].length;p+=1)typeof a[f][p]!="number"&&(r=!1);r===!0&&h.push([a[f][0]-1,a[f][1]-1].join(" "))}t[i].value="["+h.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,C=[];for(j in t)t[j].explicitSet===!0&&(t[j].type==="name"?C.push("/"+j+" /"+t[j].value):C.push("/"+j+" "+t[j].value));C.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+C.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),f=a.length+c.length+d.length+i.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+a+c+d+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(jt.API),(function(n){var e=n.API,t=e.pdfEscape16=function(a,c){for(var d,h=c.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],y=0,N=a.length;y<N;++y){if(d=c.metadata.characterToGlyph(a.charCodeAt(y)),c.metadata.glyIdsUsed.push(d),c.metadata.toUnicode[d]=a.charCodeAt(y),h.indexOf(d)==-1&&(h.push(d),h.push([parseInt(c.metadata.widthOfGlyph(d),10)])),d=="0")return p.join("");d=d.toString(16),p.push(f[4-d.length],d)}return p.join("")},r=function(a){var c,d,h,f,p,y,N;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],y=0,N=(d=Object.keys(a).sort(function(b,j){return b-j})).length;y<N;y++)c=d[y],h.length>=100&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),a[c]!==void 0&&a[c]!==null&&typeof a[c].toString=="function"&&(f=("0000"+a[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),h.push("<"+c+"><"+f+">"));return h.length&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(c){var d=c.font,h=c.out,f=c.newObject,p=c.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="Identity-H"){for(var y=d.metadata.Unicode.widths,N=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),b="",j=0;j<N.length;j++)b+=String.fromCharCode(N[j]);var C=f();p({data:b,addLength1:!0,objectId:C}),h("endobj");var R=f();p({data:r(d.metadata.toUnicode),addLength1:!0,objectId:R}),h("endobj");var I=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+rh(d.fontName)),h("/FontFile2 "+C+" 0 R"),h("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),h("/Flags "+d.metadata.flags),h("/StemV "+d.metadata.stemV),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h(">>"),h("endobj");var B=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+rh(d.fontName)),h("/FontDescriptor "+I+" 0 R"),h("/W "+n.API.PDFObject.convert(y)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+d.encoding+")"),h(">>"),h(">>"),h("endobj"),d.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+R+" 0 R"),h("/BaseFont /"+rh(d.fontName)),h("/Encoding /"+d.encoding),h("/DescendantFonts ["+B+" 0 R]"),h(">>"),h("endobj"),d.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(c){var d=c.font,h=c.out,f=c.newObject,p=c.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var y=d.metadata.rawData,N="",b=0;b<y.length;b++)N+=String.fromCharCode(y[b]);var j=f();p({data:N,addLength1:!0,objectId:j}),h("endobj");var C=f();p({data:r(d.metadata.toUnicode),addLength1:!0,objectId:C}),h("endobj");var R=f();h("<<"),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h("/StemV "+d.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+j+" 0 R"),h("/Flags 96"),h("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),h("/FontName /"+rh(d.fontName)),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h(">>"),h("endobj"),d.objectNumber=f();for(var I=0;I<d.metadata.hmtx.widths.length;I++)d.metadata.hmtx.widths[I]=parseInt(d.metadata.hmtx.widths[I]*(1e3/d.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+C+" 0 R/BaseFont/"+rh(d.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),h("endobj"),d.isAlreadyPutted=!0}})(a)}]);var i=function(a){var c,d=a.text||"",h=a.x,f=a.y,p=a.options||{},y=a.mutex||{},N=y.pdfEscape,b=y.activeFontKey,j=y.fonts,C=b,R="",I=0,B="",z=j[C].encoding;if(j[C].encoding!=="Identity-H")return{text:d,x:h,y:f,options:p,mutex:y};for(B=d,C=b,Array.isArray(d)&&(B=d[0]),I=0;I<B.length;I+=1)j[C].metadata.hasOwnProperty("cmap")&&(c=j[C].metadata.cmap.unicode.codeMap[B[I].charCodeAt(0)]),c||B[I].charCodeAt(0)<256&&j[C].metadata.hasOwnProperty("Unicode")?R+=B[I]:R+="";var H="";return parseInt(C.slice(1))<14||z==="WinAnsiEncoding"?H=N(R,C).split("").map(function(he){return he.charCodeAt(0).toString(16)}).join(""):z==="Identity-H"&&(H=t(R,j[C])),y.isHex=!0,{text:H,x:h,y:f,options:p,mutex:y}};e.events.push(["postProcessText",function(a){var c=a.text||"",d=[],h={text:c,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(c)){var f=0;for(f=0;f<c.length;f+=1)Array.isArray(c[f])&&c[f].length===3?d.push([i(Object.assign({},h,{text:c[f][0]})).text,c[f][1],c[f][2]]):d.push(i(Object.assign({},h,{text:c[f]})).text);a.text=d}else a.text=i(Object.assign({},h,{text:c})).text}])})(jt),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(jt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,a,c,d,h,f,p,y=e,N=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},C={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],I=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),B=!1,z=0;this.__bidiEngine__={};var H=function(S){var L=S.charCodeAt(),F=L>>8,ae=C[F];return ae!==void 0?y[256*ae+(255&L)]:F===252||F===253?"AL":I.test(F)?"L":F===8?"R":"N"},he=function(S){for(var L,F=0;F<S.length;F++){if((L=H(S.charAt(F)))==="L")return!1;if(L==="R")return!0}return!1},re=function(S,L,F,ae){var ve,K,ce,me,Se=L[ae];switch(Se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":B=!1;break;case"N":case"AN":break;case"EN":B&&(Se="AN");break;case"AL":B=!0,Se="R";break;case"WS":case"BN":Se="N";break;case"CS":ae<1||ae+1>=L.length||(ve=F[ae-1])!=="EN"&&ve!=="AN"||(K=L[ae+1])!=="EN"&&K!=="AN"?Se="N":B&&(K="AN"),Se=K===ve?K:"N";break;case"ES":Se=(ve=ae>0?F[ae-1]:"B")==="EN"&&ae+1<L.length&&L[ae+1]==="EN"?"EN":"N";break;case"ET":if(ae>0&&F[ae-1]==="EN"){Se="EN";break}if(B){Se="N";break}for(ce=ae+1,me=L.length;ce<me&&L[ce]==="ET";)ce++;Se=ce<me&&L[ce]==="EN"?"EN":"N";break;case"NSM":if(c&&!d){for(me=L.length,ce=ae+1;ce<me&&L[ce]==="NSM";)ce++;if(ce<me){var qe=S[ae],X=qe>=1425&&qe<=2303||qe===64286;if(ve=L[ce],X&&(ve==="R"||ve==="AL")){Se="R";break}}}Se=ae<1||(ve=L[ae-1])==="B"?"N":F[ae-1];break;case"B":B=!1,i=!0,Se=z;break;case"S":a=!0,Se="N"}return Se},V=function(S,L,F){var ae=S.split("");return F&&D(ae,F,{hiLevel:z}),ae.reverse(),L&&L.reverse(),ae.join("")},D=function(S,L,F){var ae,ve,K,ce,me,Se=-1,qe=S.length,X=0,q=[],J=z?b:N,ne=[];for(B=!1,i=!1,a=!1,ve=0;ve<qe;ve++)ne[ve]=H(S[ve]);for(K=0;K<qe;K++){if(me=X,q[K]=re(S,ne,q,K),ae=240&(X=J[me][j[q[K]]]),X&=15,L[K]=ce=J[X][5],ae>0)if(ae===16){for(ve=Se;ve<K;ve++)L[ve]=1;Se=-1}else Se=-1;if(J[X][6])Se===-1&&(Se=K);else if(Se>-1){for(ve=Se;ve<K;ve++)L[ve]=ce;Se=-1}ne[K]==="B"&&(L[K]=0),F.hiLevel|=ce}a&&(function(ue,pe,we){for(var De=0;De<we;De++)if(ue[De]==="S"){pe[De]=z;for(var Re=De-1;Re>=0&&ue[Re]==="WS";Re--)pe[Re]=z}})(ne,L,qe)},k=function(S,L,F,ae,ve){if(!(ve.hiLevel<S)){if(S===1&&z===1&&!i)return L.reverse(),void(F&&F.reverse());for(var K,ce,me,Se,qe=L.length,X=0;X<qe;){if(ae[X]>=S){for(me=X+1;me<qe&&ae[me]>=S;)me++;for(Se=X,ce=me-1;Se<ce;Se++,ce--)K=L[Se],L[Se]=L[ce],L[ce]=K,F&&(K=F[Se],F[Se]=F[ce],F[ce]=K);X=me}X++}}},G=function(S,L,F){var ae=S.split(""),ve={hiLevel:z};return F||(F=[]),D(ae,F,ve),(function(K,ce,me){if(me.hiLevel!==0&&p)for(var Se,qe=0;qe<K.length;qe++)ce[qe]===1&&(Se=R.indexOf(K[qe]))>=0&&(K[qe]=R[Se+1])})(ae,F,ve),k(2,ae,L,F,ve),k(1,ae,L,F,ve),ae.join("")};return this.__bidiEngine__.doBidiReorder=function(S,L,F){if((function(ve,K){if(K)for(var ce=0;ce<ve.length;ce++)K[ce]=ce;d===void 0&&(d=he(ve)),f===void 0&&(f=he(ve))})(S,L),c||!h||f)if(c&&h&&d^f)z=d?1:0,S=V(S,L,F);else if(!c&&h&&f)z=d?1:0,S=G(S,L,F),S=V(S,L);else if(!c||d||h||f){if(c&&!h&&d^f)S=V(S,L),d?(z=0,S=G(S,L,F)):(z=1,S=G(S,L,F),S=V(S,L));else if(c&&d&&!h&&f)z=1,S=G(S,L,F),S=V(S,L);else if(!c&&!h&&d^f){var ae=p;d?(z=1,S=G(S,L,F),z=0,p=!1,S=G(S,L,F),p=ae):(z=0,S=G(S,L,F),S=V(S,L),z=1,p=!1,S=G(S,L,F),p=ae,S=V(S,L))}}else z=0,S=G(S,L,F);else z=d?1:0,S=G(S,L,F);return S},this.__bidiEngine__.setOptions=function(S){S&&(c=S.isInputVisual,h=S.isOutputVisual,d=S.isInputRtl,f=S.isOutputRtl,p=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var c=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var d=0;for(c=[],d=0;d<i.length;d+=1)Object.prototype.toString.call(i[d])==="[object Array]"?c.push([t.doBidiReorder(i[d][0]),i[d][1],i[d][2]]):c.push([t.doBidiReorder(i[d])]);r.text=c}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(jt),jt.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new yu(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new lV(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new Yq(this.contents),this.head=new Qq(this),this.name=new tV(this),this.cmap=new wj(this),this.toUnicode={},this.hhea=new Xq(this),this.maxp=new nV(this),this.hmtx=new rV(this),this.post=new Zq(this),this.os2=new Jq(this),this.loca=new oV(this),this.glyf=new iV(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,d,h,f;for(f=[],c=0,d=(h=this.bbox).length;c<d;c++)e=h[c],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,a,c,d;for(c=0,a=0,d=(e=""+e).length;0<=d?a<d:a>d;a=0<=d?++a:--a)i=e.charCodeAt(a),c+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return c*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var Bo,yu=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,a,c,d,h;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),c=this.readByte(),d=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^c)+256*(255^d)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*a+65536*c+256*d+h},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)t=e[r],a.push(this.writeByte(t));return a},n})(),Yq=(function(){var n;function e(t){var r,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,a,c,d,h,f,p,y,N,b,j,C;for(C in b=Object.keys(t).length,h=Math.log(2),y=16*Math.floor(Math.log(b)/h),c=Math.floor(y/h),p=16*b-y,(i=new yu).writeInt(this.scalarType),i.writeShort(b),i.writeShort(y),i.writeShort(c),i.writeShort(p),a=16*b,f=i.pos+a,d=null,j=[],t)for(N=t[C],i.writeString(C),i.writeInt(n(N)),i.writeInt(f),i.writeInt(N.length),j=j.concat(N),C==="head"&&(d=f),f+=N.length;f%4;)j.push(0),f++;return i.write(j),r=2981146554-n(i.data),i.pos=d+8,i.writeUInt32(r),i.data},n=function(t){var r,i,a,c;for(t=_j.call(t);t.length%4;)t.push(0);for(a=new yu(t),i=0,r=0,c=t.length;r<c;r=r+=4)i+=a.readUInt32();return 4294967295&i},e})(),Kq={}.hasOwnProperty,jl=function(n,e){for(var t in e)Kq.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Bo=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var Qq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return jl(n,Bo),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new yu).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),FN=(function(){function n(e,t){var r,i,a,c,d,h,f,p,y,N,b,j,C,R,I,B,z;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),y=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(b=e.readUInt16(),N=b/2,e.pos+=6,a=(function(){var H,he;for(he=[],h=H=0;0<=N?H<N:H>N;h=0<=N?++H:--H)he.push(e.readUInt16());return he})(),e.pos+=2,C=(function(){var H,he;for(he=[],h=H=0;0<=N?H<N:H>N;h=0<=N?++H:--H)he.push(e.readUInt16());return he})(),f=(function(){var H,he;for(he=[],h=H=0;0<=N?H<N:H>N;h=0<=N?++H:--H)he.push(e.readUInt16());return he})(),p=(function(){var H,he;for(he=[],h=H=0;0<=N?H<N:H>N;h=0<=N?++H:--H)he.push(e.readUInt16());return he})(),i=(this.length-e.pos+this.offset)/2,d=(function(){var H,he;for(he=[],h=H=0;0<=i?H<i:H>i;h=0<=i?++H:--H)he.push(e.readUInt16());return he})(),h=I=0,z=a.length;I<z;h=++I)for(R=a[h],r=B=j=C[h];j<=R?B<=R:B>=R;r=j<=R?++B:--B)p[h]===0?c=r+f[h]:(c=d[p[h]/2+(r-j)-(N-h)]||0)!==0&&(c+=f[h]),this.codeMap[r]=65535&c}e.pos=y}return n.encode=function(e,t){var r,i,a,c,d,h,f,p,y,N,b,j,C,R,I,B,z,H,he,re,V,D,k,G,S,L,F,ae,ve,K,ce,me,Se,qe,X,q,J,ne,ue,pe,we,De,Re,Ue,Ze,at;switch(ae=new yu,c=Object.keys(e).sort(function(ot,ht){return ot-ht}),t){case"macroman":for(C=0,R=(function(){var ot=[];for(j=0;j<256;++j)ot.push(0);return ot})(),B={0:0},a={},ve=0,Se=c.length;ve<Se;ve++)B[Re=e[i=c[ve]]]==null&&(B[Re]=++C),a[i]={old:e[i],new:B[e[i]]},R[i]=B[e[i]];return ae.writeUInt16(1),ae.writeUInt16(0),ae.writeUInt32(12),ae.writeUInt16(0),ae.writeUInt16(262),ae.writeUInt16(0),ae.write(R),{charMap:a,subtable:ae.data,maxGlyphID:C+1};case"unicode":for(L=[],y=[],z=0,B={},r={},I=f=null,K=0,qe=c.length;K<qe;K++)B[he=e[i=c[K]]]==null&&(B[he]=++z),r[i]={old:he,new:B[he]},d=B[he]-i,I!=null&&d===f||(I&&y.push(I),L.push(i),f=d),I=i;for(I&&y.push(I),y.push(65535),L.push(65535),G=2*(k=L.length),D=2*Math.pow(Math.log(k)/Math.LN2,2),N=Math.log(D/2)/Math.LN2,V=2*k-D,h=[],re=[],b=[],j=ce=0,X=L.length;ce<X;j=++ce){if(S=L[j],p=y[j],S===65535){h.push(0),re.push(0);break}if(S-(F=r[S].new)>=32768)for(h.push(0),re.push(2*(b.length+k-j)),i=me=S;S<=p?me<=p:me>=p;i=S<=p?++me:--me)b.push(r[i].new);else h.push(F-S),re.push(0)}for(ae.writeUInt16(3),ae.writeUInt16(1),ae.writeUInt32(12),ae.writeUInt16(4),ae.writeUInt16(16+8*k+2*b.length),ae.writeUInt16(0),ae.writeUInt16(G),ae.writeUInt16(D),ae.writeUInt16(N),ae.writeUInt16(V),we=0,q=y.length;we<q;we++)i=y[we],ae.writeUInt16(i);for(ae.writeUInt16(0),De=0,J=L.length;De<J;De++)i=L[De],ae.writeUInt16(i);for(Ue=0,ne=h.length;Ue<ne;Ue++)d=h[Ue],ae.writeUInt16(d);for(Ze=0,ue=re.length;Ze<ue;Ze++)H=re[Ze],ae.writeUInt16(H);for(at=0,pe=b.length;at<pe;at++)C=b[at],ae.writeUInt16(C);return{charMap:r,subtable:ae.data,maxGlyphID:z+1}}},n})(),wj=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return jl(n,Bo),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new FN(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=FN.encode(e,t),(i=new yu).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),Xq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return jl(n,Bo),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),Jq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return jl(n,Bo),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),Zq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return jl(n,Bo),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var c,d,h;for(h=[],a=c=0,d=this.file.maxp.numGlyphs;0<=d?c<d:c>d;a=0<=d?++c:--c)h.push(e.readUInt32());return h}).call(this)}},n})(),eV=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},tV=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return jl(n,Bo),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,a,c,d,h,f,p,y,N;for(e.pos=this.offset,e.readShort(),t=e.readShort(),d=e.readShort(),r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(h={},a=p=0,y=r.length;p<y;a=++p)i=r[a],e.pos=i.offset,f=e.readString(i.length),c=new eV(f,i),h[N=i.nameID]==null&&(h[N]=[]),h[i.nameID].push(c);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},n})(),nV=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return jl(n,Bo),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),rV=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return jl(n,Bo),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,a,c,d,h;for(e.pos=this.offset,this.metrics=[],t=0,d=this.file.hhea.numberOfMetrics;0<=d?t<d:t>d;t=0<=d?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,p;for(p=[],t=f=0;0<=i?f<i:f>i;t=0<=i?++f:--f)p.push(e.readInt16());return p})(),this.widths=(function(){var f,p,y,N;for(N=[],f=0,p=(y=this.metrics).length;f<p;f++)a=y[f],N.push(a.advance);return N}).call(this),r=this.widths[this.widths.length-1],h=[],t=c=0;0<=i?c<i:c>i;t=0<=i?++c:--c)h.push(this.widths.push(r));return h},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),_j=[].slice,iV=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return jl(n,Bo),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,a,c,d,h,f,p,y;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,r=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,c=(d=new yu(t.read(i))).readShort(),f=d.readShort(),y=d.readShort(),h=d.readShort(),p=d.readShort(),this.cache[e]=c===-1?new aV(d,f,y,h,p):new sV(d,c,f,y,h,p),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,a,c,d,h;for(c=[],a=[],d=0,h=t.length;d<h;d++)i=e[t[d]],a.push(c.length),i&&(c=c.concat(i.encode(r)));return a.push(c.length),{table:c,offsets:a}},n})(),sV=(function(){function n(e,t,r,i,a,c){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=c,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),aV=(function(){function n(e,t,r,i,a){var c,d;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;d=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&d;)c.pos+=1&d?4:2,128&d?c.pos+=8:64&d?c.pos+=4:8&d&&(c.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new yu(_j.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),oV=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return jl(n,Bo),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=4)a.push(e.readUInt32());return a}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,a=0,c=0;c<r.length;++c)if(r[c]=i,a<t.length&&t[a]==c){++a,r[c]=i;var d=this.offsets[c],h=this.offsets[c+1]-d;h>0&&(i+=h)}for(var f=new Array(4*r.length),p=0;p<r.length;++p)f[4*p+3]=255&r[p],f[4*p+2]=(65280&r[p])>>8,f[4*p+1]=(16711680&r[p])>>16,f[4*p]=(4278190080&r[p])>>24;return f},n})(),lV=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,a;for(t in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,a,c,d,h;for(i={},c=0,d=e.length;c<d;c++)i[a=e[c]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(r=i[a])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in h=this.glyphsFor(t))r=h[a],i[a]=r;return i},n.prototype.encode=function(e,t){var r,i,a,c,d,h,f,p,y,N,b,j,C,R,I;for(i in r=wj.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),b={0:0},I=r.charMap)b[(h=I[i]).old]=h.new;for(j in N=r.maxGlyphID,c)j in b||(b[j]=N++);return p=(function(B){var z,H;for(z in H={},B)H[B[z]]=z;return H})(b),y=Object.keys(p).sort(function(B,z){return B-z}),C=(function(){var B,z,H;for(H=[],B=0,z=y.length;B<z;B++)d=y[B],H.push(p[d]);return H})(),a=this.font.glyf.encode(c,C,b),f=this.font.loca.encode(a.offsets,C),R={cmap:this.font.cmap.raw(),glyf:a.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},n})();jt.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,a,c;if(Array.isArray(t))return"["+(function(){var d,h,f;for(f=[],d=0,h=t.length;d<h;d++)r=t[d],f.push(e.convert(r));return f})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)c=t[i],a.push("/"+i+" "+e.convert(c));return a.push(">>"),a.join(`
`)}return""+t},e})();function Nj(n,e,t,r,i){r=r||{};var a=1.15,c=i.internal.scaleFactor,d=i.internal.getFontSize()/c,h=i.getLineHeightFactor?i.getLineHeightFactor():a,f=d*h,p=/\r\n|\r|\n/g,y="",N=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(y=typeof n=="string"?n.split(p):n,N=y.length||1),t+=d*(2-a),r.valign==="middle"?t-=N/2*f:r.valign==="bottom"&&(t-=N*f),r.halign==="center"||r.halign==="right"){var b=d;if(r.halign==="center"&&(b*=.5),y&&N>=1){for(var j=0;j<y.length;j++)i.text(y[j],e-i.getStringUnitWidth(y[j])*b,t),t+=f;return i}e-=i.getStringUnitWidth(n)*b}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var qN={},xh=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:qN=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,a;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var c=this.jsPDFDocument.internal.getFont(),d=c.fontStyle,h=c.fontName;if(e.font&&(h=e.font),e.fontStyle){d=e.fontStyle;var f=this.getFontList()[h];f&&f.indexOf(d)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(f[0]),d=f[0])}if(this.jsPDFDocument.setFont(h,d),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var p=n.unifyColor(e.fillColor);p&&(r=this.jsPDFDocument).setFillColor.apply(r,p),p=n.unifyColor(e.textColor),p&&(i=this.jsPDFDocument).setTextColor.apply(i,p),p=n.unifyColor(e.lineColor),p&&(a=this.jsPDFDocument).setDrawColor.apply(a,p),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,a){return this.jsPDFDocument.rect(e,t,r,i,a)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return qN||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),w1=function(n,e){return w1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},w1(n,e)};function Aj(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");w1(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Sj=(function(n){Aj(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e})(Array);function cV(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function uV(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function Dg(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(a){return t.getTextWidth(a)}).reduce(function(a,c){return Math.max(a,c)},0);return i}function jj(n,e,t,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:a});var c=Ej(i,!1);c&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,c)}function Ej(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function y0(n,e){var t,r,i,a;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(a=n.bottom)!==null&&a!==void 0?a:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function Tj(n,e){var t=y0(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function dV(n,e,t,r,i){var a={},c=1.3333333333333333,d=Nv(e,function(z){return i.getComputedStyle(z).backgroundColor});d!=null&&(a.fillColor=d);var h=Nv(e,function(z){return i.getComputedStyle(z).color});h!=null&&(a.textColor=h);var f=fV(r,t);f&&(a.cellPadding=f);var p="borderTopColor",y=c*t,N=r.borderTopWidth;if(r.borderBottomWidth===N&&r.borderRightWidth===N&&r.borderLeftWidth===N){var b=(parseFloat(N)||0)/y;b&&(a.lineWidth=b)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/y,right:(parseFloat(r.borderRightWidth)||0)/y,bottom:(parseFloat(r.borderBottomWidth)||0)/y,left:(parseFloat(r.borderLeftWidth)||0)/y},a.lineWidth.top||(a.lineWidth.right?p="borderRightColor":a.lineWidth.bottom?p="borderBottomColor":a.lineWidth.left&&(p="borderLeftColor"));var j=Nv(e,function(z){return i.getComputedStyle(z)[p]});j!=null&&(a.lineColor=j);var C=["left","right","center","justify"];C.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),C=["middle","bottom","top"],C.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var R=parseInt(r.fontSize||"");isNaN(R)||(a.fontSize=R/c);var I=hV(r);I&&(a.fontStyle=I);var B=(r.fontFamily||"").toLowerCase();return n.indexOf(B)!==-1&&(a.font=B),a}function hV(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function Nv(n,e){var t=Cj(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function Cj(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:Cj(n.parentElement,e):t}function fV(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,a=t.map(function(d){return parseInt(d||"0")/r}),c=y0(a,0);return i>c.top&&(c.top=i),i>c.bottom&&(c.bottom=i),c}function Ij(n,e,t,r,i){var a,c;r===void 0&&(r=!1),i===void 0&&(i=!1);var d;typeof e=="string"?d=t.document.querySelector(e):d=e;var h=Object.keys(n.getFontList()),f=n.scaleFactor(),p=[],y=[],N=[];if(!d)return console.error("Html table could not be found with input: ",e),{head:p,body:y,foot:N};for(var b=0;b<d.rows.length;b++){var j=d.rows[b],C=(c=(a=j?.parentElement)===null||a===void 0?void 0:a.tagName)===null||c===void 0?void 0:c.toLowerCase(),R=mV(h,f,t,j,r,i);R&&(C==="thead"?p.push(R):C==="tfoot"?N.push(R):y.push(R))}return{head:p,body:y,foot:N}}function mV(n,e,t,r,i,a){for(var c=new Sj(r),d=0;d<r.cells.length;d++){var h=r.cells[d],f=t.getComputedStyle(h);if(i||f.display!=="none"){var p=void 0;a&&(p=dV(n,h,e,f,t)),c.push({rowSpan:h.rowSpan,colSpan:h.colSpan,styles:p,_element:h,content:pV(h)})}}var y=t.getComputedStyle(r);if(c.length>0&&(i||y.display!=="none"))return c}function pV(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function gV(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function oc(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(n),c=1;c<arguments.length;c++){var d=arguments[c];if(d!=null)for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(a[h]=d[h])}return a}function Rj(n,e){var t=new xh(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();gV(i,r,e);var a=oc({},i,r,e),c;typeof window<"u"&&(c=window);var d=xV(i,r,e),h=vV(i,r,e),f=yV(t,a),p=wV(t,a,c);return{id:e.tableId,content:p,hooks:h,styles:d,settings:f}}function xV(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(h){if(h==="columnStyles"){var f=n[h],p=e[h],y=t[h];r.columnStyles=oc({},f,p,y)}else{var N=[n,e,t],b=N.map(function(j){return j[h]||{}});r[h]=oc({},b[0],b[1],b[2])}},a=0,c=Object.keys(r);a<c.length;a++){var d=c[a];i(d)}return r}function vV(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,c=r;a<c.length;a++){var d=c[a];d.didParseCell&&i.didParseCell.push(d.didParseCell),d.willDrawCell&&i.willDrawCell.push(d.willDrawCell),d.didDrawCell&&i.didDrawCell.push(d.didDrawCell),d.willDrawPage&&i.willDrawPage.push(d.willDrawPage),d.didDrawPage&&i.didDrawPage.push(d.didDrawPage)}return i}function yV(n,e){var t,r,i,a,c,d,h,f,p,y,N,b,j=y0(e.margin,40/n.scaleFactor()),C=(t=bV(n,e.startY))!==null&&t!==void 0?t:j.top,R;e.showFoot===!0?R="everyPage":e.showFoot===!1?R="never":R=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var I;e.showHead===!0?I="everyPage":e.showHead===!1?I="never":I=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var B=(a=e.useCss)!==null&&a!==void 0?a:!1,z=e.theme||(B?"plain":"striped"),H=!!e.horizontalPageBreak,he=(c=e.horizontalPageBreakRepeat)!==null&&c!==void 0?c:null;return{includeHiddenHtml:(d=e.includeHiddenHtml)!==null&&d!==void 0?d:!1,useCss:B,theme:z,startY:C,margin:j,pageBreak:(h=e.pageBreak)!==null&&h!==void 0?h:"auto",rowPageBreak:(f=e.rowPageBreak)!==null&&f!==void 0?f:"auto",tableWidth:(p=e.tableWidth)!==null&&p!==void 0?p:"auto",showHead:I,showFoot:R,tableLineWidth:(y=e.tableLineWidth)!==null&&y!==void 0?y:0,tableLineColor:(N=e.tableLineColor)!==null&&N!==void 0?N:200,horizontalPageBreak:H,horizontalPageBreakRepeat:he,horizontalPageBreakBehaviour:(b=e.horizontalPageBreakBehaviour)!==null&&b!==void 0?b:"afterAllRows"}}function bV(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),a=!1;if(t&&t.startPageNumber){var c=t.startPageNumber+t.pageNumber-1;a=c===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&t?.finalY!=null?t.finalY+20/r:null}function wV(n,e,t){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var c=e.includeHiddenHtml;if(t){var d=Ij(n,e.html,t,c,e.useCss)||{};r=d.head||r,i=d.body||r,a=d.foot||r}else console.error("Cannot parse html in non browser environment")}var h=e.columns||_V(r,i,a);return{columns:h,head:r,body:i,foot:a}}function _V(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var c=1,d;Array.isArray(r)?d=r[parseInt(a)]:d=r[a],typeof d=="object"&&!Array.isArray(d)&&(c=d?.colSpan||1);for(var h=0;h<c;h++){var f=void 0;Array.isArray(r)?f=i.length:f=a+(h>0?"_".concat(h):"");var p={dataKey:f};i.push(p)}}),i}var _1=(function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n})(),NV=(function(n){Aj(e,n);function e(t,r,i,a,c,d){var h=n.call(this,t,r,d)||this;return h.cell=i,h.row=a,h.column=c,h.section=a.section,h}return e})(_1),AV=(function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,a,c){for(var d=0,h=t;d<h.length;d++){var f=h[d],p=new NV(e,this,r,i,a,c),y=f(p)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],y)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new _1(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new _1(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n})(),Lj=(function(){function n(e,t,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof Sj&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=a}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=t.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,a){var c=r.cells[a.index];if(!c)return 0;var d=t.getLineHeight(c.styles.fontSize),h=c.padding("vertical"),f=h+d;return f>i?f:i},0)},n})(),kj=(function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var c=a!=null?""+a:"",d=/\r\n|\r|\n/g;this.text=c.split(d)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=y0(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n})(),SV=(function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],c=a.cells[this.index];c&&typeof c.styles.cellWidth=="number"&&(t=Math.max(t,c.styles.cellWidth))}return t},n})();function jV(n,e){EV(n,e);var t=[],r=0;e.columns.forEach(function(a){var c=a.getMaxCustomCellWidth(e);c?a.width=c:(a.width=a.wrappedWidth,t.push(a)),r+=a.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=N1(t,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=N1(t,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),CV(e),IV(e,n),TV(e)}function EV(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=Tj(n,e);e.allRows().forEach(function(a){for(var c=0,d=e.columns;c<d.length;c++){var h=d[c],f=a.cells[h.index];if(f){var p=e.hooks.didParseCell;e.callCellHooks(n,p,f,a,h,null);var y=f.padding("horizontal");f.contentWidth=Dg(f.text,f.styles,n)+y;var N=Dg(f.text.join(" ").split(/[^\S\u00A0]+/),f.styles,n);if(f.minReadableWidth=N+f.padding("horizontal"),typeof f.styles.cellWidth=="number")f.minWidth=f.styles.cellWidth,f.wrappedWidth=f.styles.cellWidth;else if(f.styles.cellWidth==="wrap"||r===!0)f.contentWidth>i?(f.minWidth=i,f.wrappedWidth=i):(f.minWidth=f.contentWidth,f.wrappedWidth=f.contentWidth);else{var b=10/t;f.minWidth=f.styles.minCellWidth||b,f.wrappedWidth=f.contentWidth,f.minWidth>f.wrappedWidth&&(f.wrappedWidth=f.minWidth)}}}}),e.allRows().forEach(function(a){for(var c=0,d=e.columns;c<d.length;c++){var h=d[c],f=a.cells[h.index];if(f&&f.colSpan===1)h.wrappedWidth=Math.max(h.wrappedWidth,f.wrappedWidth),h.minWidth=Math.max(h.minWidth,f.minWidth),h.minReadableWidth=Math.max(h.minReadableWidth,f.minReadableWidth);else{var p=e.styles.columnStyles[h.dataKey]||e.styles.columnStyles[h.index]||{},y=p.cellWidth||p.minCellWidth;y&&typeof y=="number"&&(h.minWidth=y,h.wrappedWidth=y)}f&&(f.colSpan>1&&!h.minWidth&&(h.minWidth=f.minWidth),f.colSpan>1&&!h.wrappedWidth&&(h.wrappedWidth=f.minWidth))}})}function N1(n,e,t){for(var r=e,i=n.reduce(function(b,j){return b+j.wrappedWidth},0),a=0;a<n.length;a++){var c=n[a],d=c.wrappedWidth/i,h=r*d,f=c.width+h,p=t(c),y=f<p?p:f;e-=y-c.width,c.width=y}if(e=Math.round(e*1e10)/1e10,e){var N=n.filter(function(b){return e<0?b.width>t(b):!0});N.length&&(e=N1(N,e,t))}return e}function TV(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var a=r[i],c=0,d=n.columns;c<d.length;c++){var h=d[c],f=e[h.index];if(t>1)t--,delete a.cells[h.index];else if(f)f.cell.height+=a.height,t=f.cell.colSpan,delete a.cells[h.index],f.left--,f.left<=1&&delete e[h.index];else{var p=a.cells[h.index];if(!p)continue;if(p.height=a.height,p.rowSpan>1){var y=r.length-i,N=p.rowSpan>y?y:p.rowSpan;e[h.index]={cell:p,left:N,row:a}}}}}function CV(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,a=0,c=0,d=0;d<n.columns.length;d++){var h=n.columns[d];if(c-=1,c>1&&n.columns[d+1])a+=h.width,delete r.cells[h.index];else if(i){var f=i;delete r.cells[h.index],i=null,f.width=h.width+a}else{var f=r.cells[h.index];if(!f)continue;if(c=f.colSpan,a=0,f.colSpan>1){i=f,a+=h.width;continue}f.width=h.width+a}}}function IV(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var a=i[r],c=0,d=n.columns;c<d.length;c++){var h=d[c],f=a.cells[h.index];if(f){e.applyStyles(f.styles,!0);var p=f.width-f.padding("horizontal");if(f.styles.overflow==="linebreak")f.text=e.splitTextToSize(f.text,p+1/e.scaleFactor(),{fontSize:f.styles.fontSize});else if(f.styles.overflow==="ellipsize")f.text=VN(f.text,p,f.styles,e,"...");else if(f.styles.overflow==="hidden")f.text=VN(f.text,p,f.styles,e,"");else if(typeof f.styles.overflow=="function"){var y=f.styles.overflow(f.text,p);typeof y=="string"?f.text=[y]:f.text=y}f.contentHeight=f.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var N=f.contentHeight/f.rowSpan;f.rowSpan>1&&t.count*t.height<N*f.rowSpan?t={height:N,count:f.rowSpan}:t&&t.count>0&&t.height>N&&(N=t.height),N>a.height&&(a.height=N)}}t.count--}}function VN(n,e,t,r,i){return n.map(function(a){return RV(a,e,t,r,i)})}function RV(n,e,t,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=Dg(n,t,r))return n;for(;e<Dg(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function Pj(n,e){var t=new xh(n),r=LV(e,t.scaleFactor()),i=new AV(e,r);return jV(t,i),t.applyStyles(t.userStyles),i}function LV(n,e){var t=n.content,r=PV(t.columns);if(t.head.length===0){var i=BN(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=BN(r,"foot");i&&t.foot.push(i)}var a=n.settings.theme,c=n.styles;return{columns:r,head:Av("head",t.head,r,c,a,e),body:Av("body",t.body,r,c,a,e),foot:Av("foot",t.foot,r,c,a,e)}}function Av(n,e,t,r,i,a){var c={},d=e.map(function(h,f){for(var p=0,y={},N=0,b=0,j=0,C=t;j<C.length;j++){var R=C[j];if(c[R.index]==null||c[R.index].left===0)if(b===0){var I=void 0;Array.isArray(h)?I=h[R.index-N-p]:I=h[R.dataKey];var B={};typeof I=="object"&&!Array.isArray(I)&&(B=I?.styles||{});var z=DV(n,R,f,i,r,a,B),H=new kj(I,z,n);y[R.dataKey]=H,y[R.index]=H,b=H.colSpan-1,c[R.index]={left:H.rowSpan-1,times:b}}else b--,N++;else c[R.index].left--,b=c[R.index].times,p++}return new Lj(h,f,n,y)});return d}function BN(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=kV(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function kV(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function PV(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new SV(i,e,t)})}function DV(n,e,t,r,i,a,c){var d=uV(r),h;n==="head"?h=i.headStyles:n==="body"?h=i.bodyStyles:n==="foot"&&(h=i.footStyles);var f=oc({},d.table,d[n],i.styles,h),p=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},y=n==="body"?p:{},N=n==="body"&&t%2===0?oc({},d.alternateRow,i.alternateRowStyles):{},b=cV(a),j=oc({},b,f,N,y);return oc(j,c)}function MV(n,e,t){var r;t===void 0&&(t={});var i=Tj(n,e),a=new Map,c=[],d=[],h=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?h=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(h=[e.settings.horizontalPageBreakRepeat]),h.forEach(function(N){var b=e.columns.find(function(j){return j.dataKey===N||j.index===N});b&&!a.has(b.index)&&(a.set(b.index,!0),c.push(b.index),d.push(e.columns[b.index]),i-=b.wrappedWidth)});for(var f=!0,p=(r=t?.start)!==null&&r!==void 0?r:0;p<e.columns.length;){if(a.has(p)){p++;continue}var y=e.columns[p].wrappedWidth;if(f||i>=y)f=!1,c.push(p),d.push(e.columns[p]),i-=y;else break;p++}return{colIndexes:c,columns:d,lastIndex:p-1}}function OV(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=MV(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function Dj(n,e){var t=e.settings,r=t.startY,i=t.margin,a={x:i.left,y:r},c=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),d=r+i.bottom+c;if(t.pageBreak==="avoid"){var h=e.body,f=h.reduce(function(N,b){return N+b.height},0);d+=f}var p=new xh(n);(t.pageBreak==="always"||t.startY!=null&&d>p.pageSize().height)&&(Oj(p),a.y=i.top),e.callWillDrawPageHooks(p,a);var y=oc({},a);e.startPageNumber=p.pageNumber(),t.horizontalPageBreak?FV(p,e,y,a):(p.applyStyles(p.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(N){return gc(p,e,N,a,e.columns)}),p.applyStyles(p.userStyles),e.body.forEach(function(N,b){var j=b===e.body.length-1;Mg(p,e,N,j,y,a,e.columns)}),p.applyStyles(p.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(N){return gc(p,e,N,a,e.columns)})),jj(p,e,y,a),e.callEndPageHooks(p,a),e.finalY=a.y,n.lastAutoTable=e,p.applyStyles(p.userStyles)}function FV(n,e,t,r){var i=OV(n,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(f,p){n.applyStyles(n.userStyles),p>0?$f(n,e,t,r,f.columns,!0):UN(n,e,r,f.columns),qV(n,e,t,r,f.columns),Sv(n,e,r,f.columns)});else for(var c=-1,d=i[0],h=function(){var f=c;if(d){n.applyStyles(n.userStyles);var p=d.columns;c>=0?$f(n,e,t,r,p,!0):UN(n,e,r,p),f=zN(n,e,c+1,r,p),Sv(n,e,r,p)}var y=f-c;i.slice(1).forEach(function(N){n.applyStyles(n.userStyles),$f(n,e,t,r,N.columns,!0),zN(n,e,c+1,r,N.columns,y),Sv(n,e,r,N.columns)}),c=f};c<e.body.length-1;)h()}function UN(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return gc(n,e,a,t,r)})}function qV(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(a,c){var d=c===e.body.length-1;Mg(n,e,a,d,t,r,i)})}function zN(n,e,t,r,i,a){n.applyStyles(n.userStyles),a=a??e.body.length;var c=Math.min(t+a,e.body.length),d=-1;return e.body.slice(t,c).forEach(function(h,f){var p=t+f===e.body.length-1,y=Mj(n,e,p,r);h.canEntireRowFit(y,i)&&(gc(n,e,h,r,i),d=t+f)}),d}function Sv(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return gc(n,e,a,t,r)})}function VV(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function BV(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var a=0,c=0,d=t.columns;c<d.length;c++){var h=d[c],f=n.cells[h.index];if(f){Array.isArray(f.text)||(f.text=[f.text]);var p=new kj(f.raw,f.styles,f.section);p=oc(p,f),p.text=[];var y=VV(f,e,r);f.text.length>y&&(p.text=f.text.splice(y,f.text.length));var N=r.scaleFactor(),b=r.getLineHeightFactor();f.contentHeight=f.getContentHeight(N,b),f.contentHeight>=e&&(f.contentHeight=e,p.styles.minCellHeight-=e),f.contentHeight>n.height&&(n.height=f.contentHeight),p.contentHeight=p.getContentHeight(N,b),p.contentHeight>a&&(a=p.contentHeight),i[h.index]=p}}var j=new Lj(n.raw,-1,n.section,i,!0);j.height=a;for(var C=0,R=t.columns;C<R.length;C++){var h=R[C],p=j.cells[h.index];p&&(p.height=j.height);var f=n.cells[h.index];f&&(f.height=n.height)}return j}function UV(n,e,t,r){var i=n.pageSize().height,a=r.settings.margin,c=a.top+a.bottom,d=i-c;e.section==="body"&&(d-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var h=e.getMinimumRowHeight(r.columns,n),f=h<t;if(h>d)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!f)return!1;var p=e.hasRowSpan(r.columns),y=e.getMaxCellHeight(r.columns)>d;return y?(p&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(p||r.settings.rowPageBreak==="avoid")}function Mg(n,e,t,r,i,a,c){var d=Mj(n,e,r,a);if(t.canEntireRowFit(d,c))gc(n,e,t,a,c);else if(UV(n,t,d,e)){var h=BV(t,d,e,n);gc(n,e,t,a,c),$f(n,e,i,a,c),Mg(n,e,h,r,i,a,c)}else $f(n,e,i,a,c),Mg(n,e,t,r,i,a,c)}function gc(n,e,t,r,i){r.x=e.settings.margin.left;for(var a=0,c=i;a<c.length;a++){var d=c[a],h=t.cells[d.index];if(!h){r.x+=d.width;continue}n.applyStyles(h.styles),h.x=r.x,h.y=r.y;var f=e.callCellHooks(n,e.hooks.willDrawCell,h,t,d,r);if(f===!1){r.x+=d.width;continue}zV(n,h,r);var p=h.getTextPos();Nj(h.text,p.x,p.y,{halign:h.styles.halign,valign:h.styles.valign,maxWidth:Math.ceil(h.width-h.padding("left")-h.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,h,t,d,r),r.x+=d.width}r.y+=t.height}function zV(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=Ej(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),HV(n,e,t,r.lineWidth))}function HV(n,e,t,r){var i,a,c,d;r.top&&(i=t.x,a=t.y,c=t.x+e.width,d=t.y,r.right&&(c+=.5*r.right),r.left&&(i-=.5*r.left),h(r.top,i,a,c,d)),r.bottom&&(i=t.x,a=t.y+e.height,c=t.x+e.width,d=t.y+e.height,r.right&&(c+=.5*r.right),r.left&&(i-=.5*r.left),h(r.bottom,i,a,c,d)),r.left&&(i=t.x,a=t.y,c=t.x,d=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(d+=.5*r.bottom),h(r.left,i,a,c,d)),r.right&&(i=t.x+e.width,a=t.y,c=t.x+e.width,d=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(d+=.5*r.bottom),h(r.right,i,a,c,d));function h(f,p,y,N,b){n.getDocument().setLineWidth(f),n.getDocument().line(p,y,N,b,"S")}}function Mj(n,e,t,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function $f(n,e,t,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(d){return gc(n,e,d,r,i)}),e.callEndPageHooks(n,r);var c=e.settings.margin;jj(n,e,t,r),Oj(n),e.pageNumber++,r.x=c.left,r.y=c.top,t.y=c.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(d){return gc(n,e,d,r,i)}),n.applyStyles(n.userStyles))}function Oj(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function $V(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=Rj(this,r),a=Pj(this,i);return Dj(this,a),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){Nj(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return xh.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){xh.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new xh(this),a=Ij(i,e,window,t,!1),c=a.head,d=a.body,h=((r=c[0])===null||r===void 0?void 0:r.map(function(f){return f.content}))||[];return{columns:h,rows:d,data:d}}}var jv;function Fj(n,e){var t=Rj(n,e),r=Pj(n,t);Dj(n,r)}try{if(typeof window<"u"&&window){var HN=window,$N=HN.jsPDF||((jv=HN.jspdf)===null||jv===void 0?void 0:jv.jsPDF);$N&&$V($N)}}catch(n){console.error("Could not apply autoTable plugin",n)}const GV=n=>new Promise((e,t)=>{const r=new Image;r.src=n,r.onload=()=>e(r),r.onerror=t}),WV=async n=>{const e=new jt,t=[107,114,128],r=[107,114,128],i=[243,244,246];try{const N=await GV(m0);e.addImage(N,"PNG",20,15,25,25)}catch(N){console.error("Erreur chargement logo",N)}e.setFontSize(24),e.setTextColor(t[0],t[1],t[2]),e.text("BOULANGERIE",55,25),e.setFontSize(10),e.setTextColor(r[0],r[1],r[2]),e.text("Adresse de la boulangerie",55,32),e.text("Tl: +221 77 575 41 59 / +221 78 582 27 72",55,37),e.text("Email: contact@boulangerie.sn",55,42),e.setFontSize(28),e.setTextColor(0,0,0),e.text("FACTURE",140,25),e.setFontSize(11),e.setTextColor(r[0],r[1],r[2]),e.text(`N ${n.numeroFacture}`,140,35),e.text(`Date: ${n.dateFacture.toLocaleDateString("fr-FR")}`,140,42),e.text(`Livraison: ${n.dateLivraison.toLocaleDateString("fr-FR")}`,140,49);const a=YV(n.statut);e.setFillColor(a[0],a[1],a[2]),e.rect(140,52,50,8,"F"),e.setTextColor(255,255,255),e.setFontSize(9),e.text(KV(n.statut),142,58),e.setLineWidth(.5),e.setDrawColor(r[0],r[1],r[2]),e.line(20,70,190,70),e.setFontSize(14),e.setTextColor(0,0,0),e.text("FACTURER :",20,85),e.setFontSize(11),e.setTextColor(r[0],r[1],r[2]);let c=95;if(e.text(n.client?.nom||"Client inconnu",20,c),n.client?.adresse){c+=6;const N=n.client.adresse;e.text(N,20,c)}if(n.client?.telephone&&(c+=6,e.text(`Tl: ${n.client.telephone}`,20,c)),n.client?.email){c+=6;const N=n.client.email;e.text(`Email: ${N}`,20,c)}e.setFontSize(11),e.setTextColor(0,0,0),e.text("CONDITIONS:",140,85),e.setTextColor(r[0],r[1],r[2]);const d=n.conditionsPaiement||" rception";e.text(d,140,95),e.text(`TVA: ${n.tauxTVA}%`,140,102);const h=Math.max(c+15,120),f=n.lignes.map(N=>[N.produit?.nom||"Produit inconnu",N.quantiteLivree.toString(),N.quantiteRetournee.toString(),N.quantiteFacturee.toString(),jf(N.prixUnitaire),jf(N.montantLigne)]);Fj(e,{startY:h,head:[["Produit","Qt Liv.","Qt Ret.","Qt Fact.","P.U.","Total"]],body:f,theme:"grid",headStyles:{fillColor:t,textColor:[255,255,255],fontSize:8,fontStyle:"bold",halign:"center"},bodyStyles:{fontSize:8,cellPadding:2},columnStyles:{0:{cellWidth:"auto",halign:"left",minCellWidth:50},1:{cellWidth:20,halign:"center"},2:{cellWidth:20,halign:"center"},3:{cellWidth:20,halign:"center"},4:{cellWidth:24,halign:"right"},5:{cellWidth:24,halign:"right"}},alternateRowStyles:{fillColor:i},margin:{left:20,right:20},styles:{overflow:"linebreak",cellWidth:"wrap"}});const p=e.lastAutoTable.finalY+10;e.setFillColor(i[0],i[1],i[2]),e.rect(125,p,65,36,"F"),e.setFontSize(9),e.setTextColor(0,0,0),e.text("Total HT:",130,p+10),e.text(jf(n.totalHT),185,p+10,{align:"right"}),e.text(`TVA (${n.tauxTVA}%):`,130,p+19),e.text(jf(n.montantTVA),185,p+19,{align:"right"}),e.setLineWidth(.3),e.line(130,p+23,185,p+23),e.setFontSize(10),e.setFont("helvetica","bold"),e.text("TOTAL TTC:",130,p+32),e.text(jf(n.totalTTC),185,p+32,{align:"right"});const y=e.internal.pageSize.height;return e.setFontSize(8),e.setFont("helvetica","normal"),e.setTextColor(r[0],r[1],r[2]),e.text("Merci de votre confiance !",20,y-25),e.text("TVA incluse - Paiement  rception de facture",20,y-20),e.text(`Facture gnre le ${new Date().toLocaleDateString("fr-FR")}  ${new Date().toLocaleTimeString("fr-FR")}`,20,y-15),e.text("Page 1/1",170,y-15),e},YV=n=>{switch(n){case"en_attente_retours":return[251,191,36];case"validee":return[59,130,246];case"envoyee":return[99,102,241];case"payee":return[34,197,94];case"annulee":return[239,68,68];default:return[107,114,128]}},KV=n=>{switch(n){case"en_attente_retours":return"EN ATTENTE";case"validee":return"VALIDE";case"envoyee":return"ENVOYE";case"payee":return"PAYE";case"annulee":return"ANNULE";default:return n.toUpperCase()}},qj=async n=>{try{const e=await WV(n),t=`Facture_${n.numeroFacture}_${n.client?.nom?.replace(/\s/g,"_")||"Client"}.pdf`;return e.save(t),!0}catch(e){throw console.error("Erreur lors de la gnration du PDF:",e),new Error("Impossible de gnrer le PDF")}},QV=({facture:n,isOpen:e,onClose:t})=>{const{modifierTauxTVA:r}=rm(),[i,a]=fe.useState(!1),[c,d]=fe.useState("");if(!n)return null;const h=b=>{switch(b){case"en_attente_retours":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"validee":return"bg-blue-100 text-blue-800 border-blue-200";case"envoyee":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"payee":return"bg-green-100 text-green-800 border-green-200";case"annulee":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=b=>{switch(b){case"en_attente_retours":return"En attente retours";case"validee":return"Valide";case"envoyee":return"Envoye";case"payee":return"Paye";case"annulee":return"Annule";default:return b}},p=async()=>{try{const b=parseFloat(c);if(isNaN(b)||b<0||b>100){kt.error(" Veuillez saisir un taux de TVA valide (0-100%)");return}await r(n.id,b),kt.success(` Taux de TVA modifi  ${b}%`),a(!1),d("")}catch{kt.error(" Erreur lors de la modification du taux de TVA")}},y=()=>{d(n.tauxTVA.toString()),a(!0)},N=()=>{a(!1),d("")};return l.jsx(Yu,{isOpen:e,onClose:t,title:`Facture ${n.numeroFacture}`,size:"lg",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"border-b border-gray-200 pb-4",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center gap-3",children:[l.jsx("img",{src:m0,alt:"Logo",className:"h-8 w-auto"}),n.numeroFacture]}),l.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Date de livraison : ",n.dateLivraison.toLocaleDateString("fr-FR")]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Date de facturation : ",n.dateFacture.toLocaleDateString("fr-FR")]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${h(n.statut)}`,children:f(n.statut)}),l.jsx("div",{className:"mt-2 text-2xl font-bold text-gray-900",children:Ra(n.totalTTC)}),(n.statut==="validee"||n.statut==="envoyee"||n.statut==="payee")&&l.jsx("div",{className:"mt-3",children:l.jsxs(Br,{onClick:async()=>{try{await qj(n),kt.success(` PDF de la facture ${n.numeroFacture} tlcharg`)}catch{kt.error(" Erreur lors de la gnration du PDF")}},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:download",className:"text-sm"}),"Tlcharger PDF"]})})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:account",className:"text-xl text-blue-600"}),"Informations client"]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Nom : "}),l.jsx("span",{className:"text-gray-900",children:n.client?.nom||"Client inconnu"})]}),n.client?.adresse&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Adresse : "}),l.jsx("span",{className:"text-gray-900",children:n.client.adresse})]}),n.client?.telephone&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Tlphone : "}),l.jsx("span",{className:"text-gray-900",children:n.client.telephone})]}),n.client?.email&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Email : "}),l.jsx("span",{className:"text-gray-900",children:n.client.email})]})]})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:file-document",className:"text-xl text-green-600"}),"Dtails facture"]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Conditions de paiement : "}),l.jsx("span",{className:"text-gray-900",children:n.conditionsPaiement})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"TVA : "}),i?l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("input",{type:"number",value:c,onChange:b=>d(b.target.value),className:"w-16 px-2 py-1 border border-gray-300 rounded text-sm",min:"0",max:"100",step:"0.1",autoFocus:!0}),l.jsx("span",{className:"text-gray-600 text-sm",children:"%"}),l.jsx("button",{onClick:p,className:"text-green-600 hover:text-green-800 text-sm p-1",title:"Confirmer",children:l.jsx(de,{icon:"mdi:check"})}),l.jsx("button",{onClick:N,className:"text-red-600 hover:text-red-800 text-sm p-1",title:"Annuler",children:l.jsx(de,{icon:"mdi:close"})})]}):l.jsxs("span",{className:"text-gray-900 flex items-center gap-2",children:[n.tauxTVA,"%",n.statut!=="payee"&&n.statut!=="annulee"&&l.jsx("button",{onClick:y,className:"text-blue-600 hover:text-blue-800 text-xs p-1",title:"Modifier le taux de TVA",children:l.jsx(de,{icon:"mdi:pencil"})})]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Retours complts : "}),l.jsx("span",{className:`font-medium ${n.retoursCompletes?"text-green-600":"text-orange-600"}`,children:n.retoursCompletes?"Oui":"Non"})]}),n.validatedAt&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Valide le : "}),l.jsx("span",{className:"text-gray-900",children:n.validatedAt.toLocaleDateString("fr-FR")})]}),n.paidAt&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Paye le : "}),l.jsx("span",{className:"text-gray-900",children:n.paidAt.toLocaleDateString("fr-FR")})]})]})]})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:format-list-bulleted",className:"text-xl text-purple-600"}),"Dtail des produits"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 rounded-lg",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produit"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qt livre"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qt retourne"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qt facture"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix unitaire"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.lignes.map((b,j)=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:b.produit?.nom||"Produit inconnu"}),l.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:b.quantiteLivree}),l.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:b.quantiteRetournee}),l.jsx("td",{className:"px-4 py-3 text-sm text-center font-medium text-gray-900",children:b.quantiteFacturee}),l.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:Ra(b.prixUnitaire)}),l.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900",children:Ra(b.montantLigne)})]},j))})]})})]}),l.jsx("div",{className:"border-t border-gray-200 pt-4",children:l.jsx("div",{className:"flex justify-end",children:l.jsx("div",{className:"w-64",children:l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Total HT :"}),l.jsx("span",{className:"text-gray-900",children:Ra(n.totalHT)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"font-medium text-gray-700",children:["TVA (",n.tauxTVA,"%) :"]}),l.jsx("span",{className:"text-gray-900",children:Ra(n.montantTVA)})]}),l.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[l.jsx("span",{className:"font-bold text-gray-900",children:"Total TTC :"}),l.jsx("span",{className:"font-bold text-lg text-gray-900",children:Ra(n.totalTTC)})]})]})})})})]})})},XV=({isOpen:n,onClose:e})=>{const{chargerFactures:t}=rm(),{chargerClients:r}=vu(),[i,a]=fe.useState(new Date().getMonth()),[c,d]=fe.useState(new Date().getFullYear()),[h,f]=fe.useState(!1),[p,y]=fe.useState([]),N=async()=>{f(!0);try{await t(),await r();const j=vu.getState().clients.filter(R=>R.typeClient==="boutique"&&R.eligibleRistourne);if(j.length===0){y([]),kt("Aucun client ligible  la ristourne trouv.",{icon:""});return}const C=[];for(const R of j){const I=rm.getState().factures.filter(he=>{const re=new Date(he.dateLivraison);return he.clientId===R.id&&re.getMonth()===i&&re.getFullYear()===c&&he.statut!=="annulee"&&he.statut!=="brouillon"});if(I.length===0)continue;let B=0,z=0,H=0;I.forEach(he=>{he.lignes.forEach(re=>{const V=re.quantiteFacturee;if(V<=0)return;const D=re.produit;if(D&&D.prixClient&&D.prixBoutique){const k=(D.prixBoutique||0)-(D.prixClient||0);k>0&&(B+=k*V)}z+=V,H+=re.montantLigne})}),B>0&&C.push({client:R.nom,nombreFactures:I.length,volumeProduits:z,totalPaye:H,totalRistourne:B})}y(C),C.length===0?kt("Aucune ristourne gnre pour cette priode.",{icon:"info"}):kt.success(`${C.length} clients avec ristourne calcule !`)}catch(j){console.error(j),kt.error("Erreur lors du calcul")}finally{f(!1)}},b=()=>{const j=new jt;j.setFontSize(18),j.text("Rapport des Ristournes Mensuelles",14,22),j.setFontSize(11);const C=new Date(c,i).toLocaleString("fr-FR",{month:"long",year:"numeric"});j.text(`Priode : ${C}`,14,32),j.text(`Gnr le : ${new Date().toLocaleDateString("fr-FR")}`,14,38);const R=["Client","Nbr Factures","Qt Produits","Total Ristourne"],I=p.map(H=>[H.client,H.nombreFactures,H.volumeProduits,Ra(H.totalRistourne)]);Fj(j,{head:[R],body:I,startY:45,theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[66,66,66]}});const B=p.reduce((H,he)=>H+he.totalRistourne,0),z=j.lastAutoTable.finalY||50;j.setFontSize(12),j.setFont("helvetica","bold"),j.text(`Total  reverser : ${Ra(B)}`,14,z+15),j.save(`ristournes_${c}_${i+1}.pdf`),kt.success("PDF tlcharg !")};return l.jsx(Yu,{isOpen:n,onClose:e,title:"Calculateur de Ristournes (Cashback)",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex gap-4 items-end bg-gray-50 p-4 rounded-lg",children:[l.jsx("div",{className:"flex-1",children:l.jsx(jh,{label:"Mois",value:i.toString(),onChange:j=>a(parseInt(j.target.value)),options:Array.from({length:12},(j,C)=>({value:C.toString(),label:new Date(2e3,C,1).toLocaleString("fr-FR",{month:"long"})}))})}),l.jsx("div",{className:"flex-1",children:l.jsx(jh,{label:"Anne",value:c.toString(),onChange:j=>d(parseInt(j.target.value)),options:[{value:"2024",label:"2024"},{value:"2025",label:"2025"}]})}),l.jsx(Br,{onClick:N,isLoading:h,children:"Calculer"})]}),l.jsx("div",{className:"min-h-[200px]",children:h?l.jsx(Vy,{message:"Analyse des factures en cours..."}):p.length>0?l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"overflow-x-auto border rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Vol. Produits"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ristourne"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((j,C)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:j.client}),l.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-500",children:j.volumeProduits}),l.jsx("td",{className:"px-4 py-3 text-sm text-right font-bold text-green-600",children:Ra(j.totalRistourne)})]},C))}),l.jsx("tfoot",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("td",{colSpan:2,className:"px-4 py-3 text-sm font-bold text-gray-900 text-right",children:"TOTAL"}),l.jsx("td",{className:"px-4 py-3 text-sm font-bold text-green-700 text-right",children:Ra(p.reduce((j,C)=>j+C.totalRistourne,0))})]})})]})}),l.jsx("div",{className:"flex justify-end",children:l.jsxs(Br,{variant:"secondary",onClick:b,children:[l.jsx(de,{icon:"mdi:file-pdf-box",className:"mr-2 text-lg"}),"Tlcharger le rapport PDF"]})})]}):l.jsx("div",{className:"text-center py-10 text-gray-500",children:"Cliquez sur Calculer pour voir les ristournes  reverser."})})]})})},JV=()=>{const{factures:n,factureActive:e,isLoading:t,chargerFactures:r,chargerParametres:i,genererFacturesDepuisLivraisons:a,envoyerFacture:c,marquerPayee:d,annulerFacture:h,supprimerFacture:f,setFactureActive:p,actualiserStatutsFactures:y}=rm(),{chargerProgramme:N}=wl(),{chargerInvendusDuJour:b}=nm(),j=By(),[C,R]=fe.useState(new Date().toISOString().split("T")[0]),[I,B]=fe.useState("tous"),[z,H]=fe.useState(!1),[he,re]=fe.useState(!1);fe.useEffect(()=>{(async()=>{try{await i(),await r()}catch(ce){console.error("Erreur lors de l'initialisation:",ce)}})()},[i,r]),fe.useEffect(()=>{(async()=>{try{await r(),await y()}catch(ce){console.error("Erreur lors du rechargement des factures:",ce)}})()},[C,r,y]),fe.useEffect(()=>{const K=setInterval(async()=>{try{await y(),await r()}catch(ce){console.error("Erreur lors de la synchronisation automatique:",ce)}},3e4);return()=>clearInterval(K)},[y,r]);const V=async()=>{try{const K=new Date(C),ce=n.filter(X=>X.dateLivraison.toISOString().split("T")[0]===C);if(ce.length>0){const X=ce.filter(J=>J.statut==="en_attente_retours").length;if(!await j.confirm({title:"Mise  jour des factures",message:`Il existe dj ${ce.length} facture(s) pour le ${new Date(C).toLocaleDateString("fr-FR")} :
 ${X} facture(s) en attente de retours
 ${ce.length-X} facture(s) dj valide(s)

Cette action va :
 Vrifier l'tat des retours clients
 Mettre  jour automatiquement les statuts
 Passer en "Valide" si retours complts
 NE crera PAS de doublons`,confirmText:"Mettre  jour",cancelText:"Annuler",type:"warning"}))return}console.log(" Chargement du programme pour",K.toLocaleDateString("fr-FR")),await N(K),console.log(" Chargement des retours clients pour",K.toLocaleDateString("fr-FR")),await b(K),await new Promise(X=>setTimeout(X,500));const Se=wl.getState().programmeActuel?.commandesClients||[];console.log(` ${Se.length} commandes clients charges`);const qe=nm.getState().invendusClients;console.log(` ${qe.length} retours clients chargs`),qe.length>0?console.log(" Clients avec retours:",qe.map(X=>({clientId:X.clientId,client:X.client?.nom,produits:X.produits.length,retoursCompletes:X.retoursCompletes}))):console.warn(" Aucun retour client trouv pour cette date"),await a(K,Se,qe),await r(),kt.success(" Factures gnres avec succs")}catch(K){console.error("Erreur lors de la gnration:",K),kt.error(` Erreur lors de la gnration: ${K}`)}},D=async(K,ce)=>{try{switch(K){case"voir":p(ce),H(!0);break;case"pdf":try{await qj(ce),kt.success(` PDF de la facture ${ce.numeroFacture} tlcharg`)}catch(me){console.error("Erreur lors de la gnration du PDF:",me),kt.error(" Erreur lors de la gnration du PDF")}break;case"envoyer":{await j.confirm({title:"Envoyer la facture",message:`Envoyer la facture ${ce.numeroFacture} au client "${ce.client?.nom||"Inconnu"}" ?

La facture passera au statut "Envoye".`,confirmText:"Envoyer",cancelText:"Annuler",type:"info"})&&(await c(ce.id),kt.success(` Facture ${ce.numeroFacture} envoye au client`));break}case"relancer":kt(" Relance client - Fonctionnalit  implmenter",{icon:"",duration:3e3});break;case"payer":{await j.confirm({title:"Marquer comme paye",message:`Confirmer le paiement de la facture ${ce.numeroFacture} (${Ra(ce.totalTTC)}) ?

La facture passera au statut "Paye".`,confirmText:"Confirmer le paiement",cancelText:"Annuler",type:"success"})&&(await d(ce.id),kt.success(` Facture ${ce.numeroFacture} marque comme paye`));break}case"annuler":{await j.confirm({title:"Annuler la facture",message:`tes-vous sr de vouloir annuler la facture ${ce.numeroFacture} ?

Cette action est irrversible et la facture ne pourra plus tre modifie.`,confirmText:"Annuler la facture",cancelText:"Conserver",type:"danger"})&&(await h(ce.id),kt.success(` Facture ${ce.numeroFacture} annule`));break}case"supprimer":{await j.confirm({title:"Supprimer la facture",message:`ATTENTION : tes-vous sr de vouloir SUPPRIMER DFINITIVEMENT la facture ${ce.numeroFacture} ?

Cette action supprimera la facture de la base de donnes.`,confirmText:"Supprimer dfinitivement",cancelText:"Annuler",type:"danger"})&&(await f(ce.id),kt.success(` Facture ${ce.numeroFacture} supprime`));break}}}catch(me){console.error("Erreur lors de l'action:",me),kt.error(` Erreur: ${me}`)}},k=async()=>{const K=n.filter(me=>me.dateLivraison.toISOString().split("T")[0]===C&&me.statut==="en_attente_retours");if(K.length===0){kt(` Aucune facture en attente de retours pour le ${new Date(C).toLocaleDateString("fr-FR")}.`,{icon:"",duration:3e3});return}if(await j.confirm({title:"Actualisation des statuts",message:`${K.length} facture(s) en attente de retours trouve(s) pour le ${new Date(C).toLocaleDateString("fr-FR")}.

Cette action va :
 Vrifier l'tat des retours pour chaque client
 Mettre  jour automatiquement les statuts
 Valider les factures si retours complts`,confirmText:"Actualiser",cancelText:"Annuler",type:"info"}))try{await y(),await r(),kt.success(` Statuts des factures du ${new Date(C).toLocaleDateString("fr-FR")} actualiss`)}catch(me){console.error("Erreur lors de l'actualisation:",me),kt.error(` Erreur lors de l'actualisation: ${me}`)}},G=n.filter(K=>{const Se=K.dateLivraison.toISOString().split("T")[0]===C,qe=I==="tous"||K.statut===I;return Se&&qe}),S=n.filter(K=>K.dateLivraison.toISOString().split("T")[0]===C),L={total:S.length,enAttente:S.filter(K=>K.statut==="en_attente_retours").length,validees:S.filter(K=>K.statut==="validee").length,payees:S.filter(K=>K.statut==="payee").length,montantTotal:S.filter(K=>K.statut!=="annulee").reduce((K,ce)=>K+ce.totalTTC,0),montantEnAttente:S.filter(K=>K.statut==="validee"||K.statut==="envoyee").reduce((K,ce)=>K+ce.totalTTC,0)},F=K=>{switch(K){case"brouillon":return"text-gray-600 bg-gray-100";case"en_attente_retours":return"text-yellow-700 bg-yellow-100";case"validee":return"text-blue-700 bg-blue-100";case"envoyee":return"text-indigo-700 bg-indigo-100";case"payee":return"text-green-700 bg-green-100";case"annulee":return"text-red-700 bg-red-100";default:return"text-gray-600 bg-gray-100"}},ae=K=>{switch(K){case"brouillon":return"Brouillon";case"en_attente_retours":return"En attente retours";case"validee":return"Valide";case"envoyee":return"Envoye";case"payee":return"Paye";case"annulee":return"Annule";default:return K}},ve=K=>{const ce=[{key:"voir",label:"Voir dtails",icon:"mdi:eye",color:"text-blue-600"}];switch(K.statut){case"en_attente_retours":ce.push({key:"supprimer",label:"Supprimer",icon:"mdi:trash-can-outline",color:"text-red-500 hover:bg-red-50"});break;case"validee":ce.push({key:"pdf",label:"Tlcharger PDF",icon:"mdi:download",color:"text-gray-600"}),ce.push({key:"envoyer",label:"Envoyer au client",icon:"mdi:send",color:"text-indigo-600"}),ce.push({key:"annuler",label:"Annuler",icon:"mdi:cancel",color:"text-red-600"}),ce.push({key:"supprimer",label:"Supprimer",icon:"mdi:trash-can-outline",color:"text-red-500 hover:bg-red-50"});break;case"envoyee":ce.push({key:"pdf",label:"Tlcharger PDF",icon:"mdi:download",color:"text-gray-600"}),ce.push({key:"relancer",label:"Relancer client",icon:"mdi:email-send",color:"text-orange-600"}),ce.push({key:"payer",label:"Marquer paye",icon:"mdi:cash-check",color:"text-green-600"});break;case"payee":ce.push({key:"pdf",label:"Tlcharger PDF",icon:"mdi:download",color:"text-gray-600"});break;case"annulee":ce.push({key:"supprimer",label:"Supprimer",icon:"mdi:trash-can-outline",color:"text-red-500 hover:bg-red-50"});break}return ce};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-linear-to-r from-purple-600 to-indigo-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:file-document",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Factures"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Gnration et suivi des factures clients bases sur les livraisons et retours"})]})]}),l.jsxs(Br,{onClick:()=>re(!0),variant:"outline",className:"flex items-center gap-2 border-orange-200 text-orange-700 hover:bg-orange-50 hover:border-orange-300",children:[l.jsx(de,{icon:"mdi:calculator",className:"text-xl"}),l.jsx("span",{children:"Calculer Ristournes"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:file-multiple",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:L.total}),l.jsx("div",{className:"text-gray-300 text-xs",children:"factures"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Factures"}),l.jsx("div",{className:"text-gray-300 text-sm",children:"Toutes priodes confondues"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:clock-outline",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:L.enAttente}),l.jsx("div",{className:"text-gray-300 text-xs",children:"en attente"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"En Attente Retours"}),l.jsx("div",{className:"text-gray-300 text-sm",children:"Ncessite saisie retours"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:check-circle",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:L.payees}),l.jsx("div",{className:"text-gray-300 text-xs",children:"payes"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Factures Payes"}),l.jsx("div",{className:"text-gray-300 text-sm",children:"Compltement rgles"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:cash",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-bold",children:Ra(L.montantTotal)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"FCFA"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Montant Total"}),l.jsx("div",{className:"text-gray-300 text-sm",children:"Chiffre d'affaires global"})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:file-plus",className:"text-lg text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Gnration de factures"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Crer des factures bases sur les livraisons du jour"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[l.jsx("div",{className:"flex-1 min-w-48",children:l.jsx(fr,{type:"date",label:"Date de livraison",value:C,onChange:K=>R(K.target.value)})}),l.jsxs(Br,{onClick:V,isLoading:t,className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:plus",className:"text-sm"}),n.some(K=>K.dateLivraison.toISOString().split("T")[0]===C)?"Mettre  jour factures":"Gnrer nouvelles factures"," du ",new Date(C).toLocaleDateString("fr-FR")]}),l.jsxs(Br,{onClick:k,isLoading:t,variant:"secondary",className:"flex items-center gap-2",children:[!t&&l.jsx(de,{icon:"mdi:sync",className:"text-sm"}),"Synchroniser avec retours"]})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:file-document-multiple",className:"text-lg text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Liste des factures"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Filtrer et grer vos factures"})]})]})}),l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"mb-4 flex flex-wrap gap-4",children:l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filtrer par statut"}),l.jsxs("select",{value:I,onChange:K=>B(K.target.value),className:"block rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-orange-500 focus:ring-1 sm:text-sm transition-colors bg-white",children:[l.jsx("option",{value:"tous",children:"Tous"}),l.jsx("option",{value:"en_attente_retours",children:"En attente retours"}),l.jsx("option",{value:"validee",children:"Valides"}),l.jsx("option",{value:"envoyee",children:"Envoyes"}),l.jsx("option",{value:"payee",children:"Payes"}),l.jsx("option",{value:"annulee",children:"Annules"})]})]})}),G.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(de,{icon:"mdi:file-document-outline",className:"text-6xl mb-4 text-gray-400"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune facture trouve"}),l.jsx("p",{className:"text-gray-600",children:I==="tous"?"Commencez par gnrer des factures pour une date donne":`Aucune facture avec le statut "${ae(I)}"`})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"N Facture"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date livraison"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant TTC"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Retours"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(K=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:K.numeroFacture}),l.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.client?.nom||"Client inconnu"}),l.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:K.dateLivraison.toLocaleDateString("fr-FR")}),l.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:Ra(K.totalTTC)}),l.jsx("td",{className:"px-4 py-2 text-sm",children:l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F(K.statut)}`,children:ae(K.statut)})}),l.jsx("td",{className:"px-4 py-2 text-sm text-center",children:K.retoursCompletes?l.jsx(de,{icon:"mdi:check-circle",className:"text-green-500 text-lg"}):l.jsx(de,{icon:"mdi:clock-outline",className:"text-yellow-500 text-lg"})}),l.jsx("td",{className:"px-4 py-2 text-sm",children:l.jsx("div",{className:"flex space-x-2",children:ve(K).map(ce=>l.jsx("button",{onClick:()=>D(ce.key,K),className:`p-1 rounded hover:bg-gray-100 ${ce.color}`,title:ce.label,children:l.jsx(de,{icon:ce.icon,className:"text-lg"})},ce.key))})})]},K.id))})]})})]})]})]}),l.jsx(p0,{isOpen:j.isOpen,onClose:j.handleCancel,onConfirm:j.handleConfirm,title:j.title,message:j.message,confirmText:j.confirmText,cancelText:j.cancelText,type:j.type}),l.jsx(QV,{facture:e,isOpen:z,onClose:()=>{H(!1),p(null)}}),l.jsx(XV,{isOpen:he,onClose:()=>re(!1)})]})},ZV=()=>{const{matieres:n,getDepensesPeriode:e,getValeurConsommationPeriode:t}=Al(),{factures:r,chargerFactures:i}=rm(),[a,c]=ru.useState(0),[d,h]=ru.useState(!0),f=n.reduce((z,H)=>z+H.valeurTotale,0),p=new Date,y=new Date(p.getFullYear(),p.getMonth(),1),N=new Date(p.getFullYear(),p.getMonth()+1,0),b=t(y,p),j=e(y,p);ru.useEffect(()=>{(async()=>{h(!0);try{await i(y,N);const H=Pa(Hn(wt,"shopSales"),tr("date",">=",y),tr("date","<=",N)),he=await fa(H);let re=0;he.docs.forEach(V=>{const D=V.data();if(D.produits&&Array.isArray(D.produits)){const k=D.produits.reduce((G,S)=>{const L=S.produit?.prixBoutique||0,F=S.venduTotal||0;return G+L*F},0);re+=k}}),c(re)}catch(H){console.error("Erreur chargement stats:",H)}finally{h(!1)}})()},[]);const R=r.filter(z=>z.statut==="validee"||z.statut==="payee"||z.statut==="envoyee").reduce((z,H)=>z+H.totalTTC,0)+a,I=R-b,B=R>0?I/R*100:0;return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[l.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Valeur totale Stock"}),l.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:[Math.round(f).toLocaleString()," FCFA"]})]}),l.jsx("div",{className:"p-3 bg-blue-50 rounded-lg text-blue-600",children:l.jsx(IS,{size:24})})]})}),l.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Flux de Trsorerie (Achats)"}),l.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:[Math.round(j).toLocaleString()," FCFA"]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Achats du mois"})]}),l.jsx("div",{className:"p-3 bg-orange-50 rounded-lg text-orange-600",children:l.jsx(U9,{size:24})})]})}),l.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Cot Production"}),l.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mt-1 text-orange-600",children:[Math.round(b).toLocaleString()," FCFA"]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Matires consommes"})]}),l.jsx("div",{className:"p-3 bg-orange-50 rounded-lg text-orange-600",children:l.jsx(A9,{size:24})})]})}),l.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Marge Brute (Comptable)"}),d?l.jsx("h3",{className:"text-2xl font-bold text-gray-300 mt-1 animate-pulse",children:"..."}):l.jsxs(l.Fragment,{children:[l.jsxs("h3",{className:`text-2xl font-bold mt-1 ${I>=0?"text-green-600":"text-red-600"}`,children:[Math.round(I).toLocaleString()," FCFA"]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${B>30?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[B.toFixed(1),"%"]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Ventes - Conso."})]})]})]}),l.jsx("div",{className:"p-3 bg-purple-50 rounded-lg text-purple-600",children:l.jsx(H9,{size:24})})]})})]})},eB=({onAddMouvement:n})=>{const{matieres:e,addMatiere:t,updateMatiere:r,deleteMatiere:i}=Al(),[a,c]=fe.useState(null),[d,h]=fe.useState(!1),[f,p]=fe.useState({nom:"",unite:"kg",stockMinimum:"",prixMoyenPondere:"",stockActuel:"",valeurTotale:0}),y=j=>{j.preventDefault(),a?(r(a,{...f,stockMinimum:Number(f.stockMinimum)||0,stockActuel:Number(f.stockActuel)||0,prixMoyenPondere:Number(f.prixMoyenPondere)||0,valeurTotale:(Number(f.stockActuel)||0)*(Number(f.prixMoyenPondere)||0)}),c(null)):t({nom:f.nom||"",unite:f.unite||"kg",stockMinimum:Number(f.stockMinimum)||0,stockActuel:Number(f.stockActuel)||0,prixMoyenPondere:Number(f.prixMoyenPondere)||0,valeurTotale:(Number(f.stockActuel)||0)*(Number(f.prixMoyenPondere)||0),active:!0}),p({nom:"",unite:"kg",stockMinimum:"",prixMoyenPondere:"",stockActuel:"",valeurTotale:0}),h(!1)},N=j=>{p(j),c(j.id),h(!0)},b=j=>{window.confirm("tes-vous sr de vouloir supprimer cette matire premire ?")&&i(j)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Matires Premires"}),l.jsxs("button",{onClick:()=>{c(null),c(null),p({nom:"",unite:"kg",stockMinimum:"",prixMoyenPondere:"",stockActuel:"",valeurTotale:0}),h(!d)},className:"flex items-center space-x-2 bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:[l.jsx(Fy,{size:20}),l.jsx("span",{children:"Nouvelle Matire"})]})]}),d&&l.jsxs("form",{onSubmit:y,className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),l.jsx("input",{required:!0,type:"text",value:f.nom,onChange:j=>p({...f,nom:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: Farine T55"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),l.jsxs("select",{value:f.unite,onChange:j=>p({...f,unite:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",children:[l.jsx("option",{value:"kg",children:"Kilogramme (kg)"}),l.jsx("option",{value:"g",children:"Gramme (g)"}),l.jsx("option",{value:"l",children:"Litre (l)"}),l.jsx("option",{value:"piece",children:"Pice"}),l.jsx("option",{value:"sac_50kg",children:"Sac 50kg"}),l.jsx("option",{value:"sac_25kg",children:"Sac 25kg"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Initial"}),l.jsx("input",{type:"number",min:"0",step:"0.01",value:f.stockActuel,onChange:j=>p({...f,stockActuel:j.target.value===""?"":parseFloat(j.target.value)}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",disabled:!!a}),a&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Pour modifier le stock, utilisez "Mouvement"'})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seuil d'alerte"}),l.jsx("input",{type:"number",min:"0",value:f.stockMinimum,onChange:j=>p({...f,stockMinimum:j.target.value===""?"":parseFloat(j.target.value)}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix Moyen Initial (FCFA)"}),l.jsx("input",{type:"number",min:"0",value:f.prixMoyenPondere,onChange:j=>p({...f,prixMoyenPondere:j.target.value===""?"":parseFloat(j.target.value)}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",disabled:!!a})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Annuler"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:a?"Mettre  jour":"Crer"})]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"Nom"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-600",children:"Stock Actuel"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-600",children:"Valeur (FCFA)"}),l.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-600",children:"tat"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-600",children:"Actions"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.map(j=>{const C=j.stockActuel<=j.stockMinimum;return l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsxs("td",{className:"px-6 py-4",children:[l.jsx("div",{className:"font-medium text-gray-900",children:j.nom}),l.jsxs("div",{className:"text-xs text-gray-500",children:["PMP: ",Math.round(j.prixMoyenPondere).toLocaleString()," FCFA / ",j.unite]})]}),l.jsxs("td",{className:"px-6 py-4 text-right font-medium text-gray-900",children:[j.stockActuel.toLocaleString()," ",l.jsx("span",{className:"text-gray-500 text-sm",children:j.unite})]}),l.jsx("td",{className:"px-6 py-4 text-right text-gray-600",children:Math.round(j.valeurTotale).toLocaleString()}),l.jsx("td",{className:"px-6 py-4 text-center",children:C?l.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[l.jsx(G9,{size:12,className:"mr-1"}),"Critique"]}):l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"OK"})}),l.jsx("td",{className:"px-6 py-4 text-right",children:l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx("button",{onClick:()=>n(j),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Ajouter un mouvement",children:l.jsx(v9,{size:18})}),l.jsx("button",{onClick:()=>N(j),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Modifier",children:l.jsx(RS,{size:18})}),l.jsx("button",{onClick:()=>b(j.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Supprimer",children:l.jsx(qy,{size:18})})]})})]},j.id)}),e.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"Aucune matire premire enregistre."})})]})]})})]})},tB=({isOpen:n,onClose:e,selectedMatiere:t})=>{const{addMouvement:r,fournisseurs:i}=Al(),[a,c]=fe.useState({type:"achat",quantite:"",prixTotal:"",motif:"",auteur:"",responsable:"",fournisseurId:"",referenceDocument:""});if(fe.useEffect(()=>{n&&c({type:"achat",quantite:"",prixTotal:"",motif:"",auteur:"",responsable:"",fournisseurId:"",referenceDocument:""})},[n,t]),!n||!t)return null;const d=p=>{const y=p===""?"":parseFloat(p),N={...a,quantite:y};a.type==="achat"&&typeof y=="number"&&t.prixMoyenPondere>0&&(N.prixTotal=Math.round(y*t.prixMoyenPondere)),c(N)},h=async p=>{p.preventDefault();try{await r({date:new Date,matiereId:t.id,type:a.type,quantite:Number(a.quantite)||0,prixTotal:a.type==="achat"?Number(a.prixTotal)||0:void 0,motif:a.motif,auteur:a.auteur,responsable:a.responsable,referenceDocument:a.referenceDocument,userId:"current-user-id"}),e()}catch(y){console.error("Erreur lors de l'ajout du mouvement:",y),alert("Erreur lors de l'enregistrement. Vrifiez votre connexion.")}},f=["consommation","perte","retour_fournisseur"].includes(a.type);return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[l.jsxs("h3",{className:"font-bold text-gray-800",children:["Mouvement de Stock : ",t.nom]}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:l.jsx(X9,{size:20})})]}),l.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de mouvement"}),l.jsxs("select",{value:a.type,onChange:p=>c({...a,type:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",children:[l.jsx("option",{value:"achat",children:"Achat / Entre"}),l.jsx("option",{value:"consommation",children:"Consommation (Production)"}),l.jsx("option",{value:"perte",children:"Perte / Gchis"}),l.jsx("option",{value:"retour_fournisseur",children:"Retour Fournisseur"}),l.jsx("option",{value:"correction",children:"Correction d'Inventaire"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[f?"Quantit Sortante":"Quantit Entrante"," (",t.unite,")"]}),l.jsx("input",{type:"number",min:"0",step:"0.01",required:!0,value:a.quantite,onChange:p=>d(p.target.value),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none font-bold text-lg"})]}),a.type==="achat"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix Total (FCFA)"}),l.jsx("input",{type:"number",min:"0",required:!0,value:a.prixTotal,onChange:p=>c({...a,prixTotal:p.target.value===""?"":parseFloat(p.target.value)}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:["Soit ",Number(a.quantite)>0?Math.round((Number(a.prixTotal)||0)/Number(a.quantite)):0," FCFA / ",t.unite]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fournisseur (Optionnel)"}),l.jsxs("select",{value:a.fournisseurId,onChange:p=>c({...a,fournisseurId:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",children:[l.jsx("option",{value:"",children:"Slectionner..."}),i.map(p=>l.jsx("option",{value:p.id,children:p.nom},p.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rfrence Facture / BL"}),l.jsx("input",{type:"text",value:a.referenceDocument,onChange:p=>c({...a,referenceDocument:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Auteur (Celui qui sort)"}),l.jsx("input",{type:"text",required:!0,value:a.auteur,onChange:p=>c({...a,auteur:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: Boulanger"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Valid par (Responsable) ",a.type!=="achat"&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",required:a.type!=="achat",value:a.responsable,onChange:p=>c({...a,responsable:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:a.type==="achat"?"Optionnel":"Ex: Grant"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motif / Commentaire"}),l.jsx("input",{type:"text",value:a.motif,onChange:p=>c({...a,motif:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:a.type==="perte"?"Ex: Sac dchir, Humidit...":"Optionnel"})]}),l.jsxs("div",{className:"pt-4 flex space-x-3",children:[l.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Annuler"}),l.jsxs("button",{type:"submit",className:`flex-1 px-4 py-2 rounded-lg text-white font-medium ${f?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"}`,children:["Valider ",f?"la Sortie":"l'Entre"]})]})]})]})})},nB=()=>{const{mouvements:n,matieres:e}=Al(),[t,r]=fe.useState(""),a=n.map(h=>{const f=e.find(y=>y.id===h.matiereId);let p=h.prixTotal;return!p&&f&&["consommation","perte"].includes(h.type)&&(p=Math.abs(h.quantite)*f.prixMoyenPondere),{...h,matiereNom:f?f.nom:"Article Inconnu",matiereUnite:f?f.unite:"",displayPrice:p}}).filter(h=>h.matiereNom.toLowerCase().includes(t.toLowerCase())||h.motif&&h.motif.toLowerCase().includes(t.toLowerCase())),c=h=>{switch(h){case"achat":return"bg-green-100 text-green-800";case"consommation":return"bg-blue-100 text-blue-800";case"perte":return"bg-red-100 text-red-800";case"correction":return"bg-gray-100 text-gray-800";case"retour_fournisseur":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},d=h=>h==="achat"?l.jsx(g9,{size:16,className:"mr-1"}):l.jsx(b9,{size:16,className:"mr-1"});return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Historique des Mouvements"}),l.jsxs("div",{className:"relative",children:[l.jsx(O9,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),l.jsx("input",{type:"text",placeholder:"Rechercher...",value:t,onChange:h=>r(h.target.value),className:"pl-10 pr-4 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-orange-500 outline-none w-64"})]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:[l.jsx("th",{className:"px-6 py-3",children:"Date"}),l.jsx("th",{className:"px-6 py-3",children:"Article"}),l.jsx("th",{className:"px-6 py-3",children:"Type"}),l.jsx("th",{className:"px-6 py-3",children:"Auteur / Resp."}),l.jsx("th",{className:"px-6 py-3 text-right",children:"Quantit"}),l.jsx("th",{className:"px-6 py-3 text-right",children:"Prix Total"}),l.jsx("th",{className:"px-6 py-3",children:"Motif / Rf"})]})}),l.jsxs("tbody",{className:"bg-white divide-y divide-gray-100",children:[a.map(h=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[new Date(h.date).toLocaleDateString("fr-FR")," ",l.jsx("span",{className:"text-xs",children:new Date(h.date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h.matiereNom}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c(h.type)}`,children:[d(h.type),h.type==="achat"?"Entre":h.type.charAt(0).toUpperCase()+h.type.slice(1)]})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[l.jsx("div",{className:"font-medium",children:h.auteur||"Inconnu"}),h.responsable&&l.jsxs("div",{className:"text-xs text-gray-500 text-green-600",children:["Valid par: ",h.responsable]})]}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:[h.quantite," ",l.jsx("span",{className:"text-gray-500 font-normal",children:h.matiereUnite})]}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:[h.displayPrice?`${h.displayPrice.toLocaleString()} FCFA`:"-",!h.prixTotal&&h.displayPrice&&l.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"(est.)"})]}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{children:h.motif||"-"}),h.referenceDocument&&l.jsxs("span",{className:"text-xs text-gray-400",children:["Rf: ",h.referenceDocument]})]})})]},h.id)),a.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"Aucun mouvement trouv."})})]})]})})]})},rB=()=>{const{fournisseurs:n,addFournisseur:e,updateFournisseur:t,deleteFournisseur:r}=Al(),[i,a]=fe.useState(null),[c,d]=fe.useState(!1),[h,f]=fe.useState({nom:"",contact:"",telephone:"",adresse:"",categories:""}),p=async j=>{j.preventDefault();const C=h.categories.split(",").map(R=>R.trim()).filter(R=>R!=="");i?(await t(i,{nom:h.nom,contact:h.contact,telephone:h.telephone,adresse:h.adresse,categories:C}),a(null)):await e({nom:h.nom,contact:h.contact,telephone:h.telephone,adresse:h.adresse,categories:C,active:!0}),y(),d(!1)},y=()=>{f({nom:"",contact:"",telephone:"",adresse:"",categories:""})},N=j=>{f({nom:j.nom,contact:j.contact,telephone:j.telephone||"",adresse:j.adresse||"",categories:j.categories.join(", ")}),a(j.id),d(!0)},b=async j=>{window.confirm("tes-vous sr de vouloir supprimer ce fournisseur ?")&&await r(j)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Fournisseurs"}),l.jsxs("button",{onClick:()=>{a(null),y(),d(!c)},className:"flex items-center space-x-2 bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:[l.jsx(Fy,{size:20}),l.jsx("span",{children:"Nouveau Fournisseur"})]})]}),c&&l.jsxs("form",{onSubmit:p,className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de l'entreprise"}),l.jsx("input",{required:!0,type:"text",value:h.nom,onChange:j=>f({...h,nom:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: Grands Moulins de Dakar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Principal (Nom)"}),l.jsx("input",{required:!0,type:"text",value:h.contact,onChange:j=>f({...h,contact:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: M. Diallo"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tlphone"}),l.jsx("input",{type:"tel",value:h.telephone,onChange:j=>f({...h,telephone:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: 77 123 45 67"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse"}),l.jsx("input",{type:"text",value:h.adresse,onChange:j=>f({...h,adresse:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Adresse du dpt / bureau"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catgories (spares par des virgules)"}),l.jsx("input",{type:"text",value:h.categories,onChange:j=>f({...h,categories:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: Farine, Levure, Emballage"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Annuler"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:i?"Mettre  jour":"Ajouter"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.map(j=>l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5 hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-lg text-gray-800",children:j.nom}),l.jsxs("div",{className:"flex items-center text-gray-500 text-sm mt-1",children:[l.jsx(N_,{size:14,className:"mr-1"}),j.contact]})]}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("button",{onClick:()=>N(j),className:"p-1.5 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",children:l.jsx(RS,{size:16})}),l.jsx("button",{onClick:()=>b(j.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:l.jsx(qy,{size:16})})]})]}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[j.telephone&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(P9,{size:14,className:"mr-2 text-gray-400"}),j.telephone]}),j.adresse&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(I9,{size:14,className:"mr-2 text-gray-400"}),j.adresse]})]}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-50 flex flex-wrap gap-2",children:[j.categories.map((C,R)=>l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-600",children:[l.jsx(q9,{size:10,className:"mr-1"}),C]},R)),j.categories.length===0&&l.jsx("span",{className:"text-xs text-gray-400 italic",children:"Aucune catgorie"})]})]},j.id)),n.length===0&&!c&&l.jsxs("div",{className:"col-span-full py-12 text-center text-gray-500 bg-gray-50 rounded-xl border border-dashed border-gray-200",children:[l.jsx(N_,{size:48,className:"mx-auto mb-4 opacity-20"}),l.jsx("p",{children:"Aucun fournisseur enregistr."}),l.jsx("button",{onClick:()=>d(!0),className:"mt-4 text-orange-500 hover:text-orange-600 font-medium",children:"Ajouter le premier fournisseur"})]})]})]})},iB=()=>{const[n,e]=fe.useState("stock"),[t,r]=fe.useState(!1),[i,a]=fe.useState(void 0),{chargerDonnees:c,isLoading:d}=Al();if(fe.useEffect(()=>{c()},[c]),d)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx("div",{className:"w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full animate-spin"})});const h=f=>{a(f),r(!0)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Stocks"}),l.jsx("p",{className:"text-gray-500",children:"Suivi des matires premires et dpenses (FCFA)"})]})}),l.jsx(ZV,{}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[l.jsx("div",{className:"border-b border-gray-100",children:l.jsxs("nav",{className:"flex space-x-4 px-6","aria-label":"Tabs",children:[l.jsxs("button",{onClick:()=>e("stock"),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${n==="stock"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(IS,{size:18}),l.jsx("span",{children:"Inventaire"})]}),l.jsxs("button",{onClick:()=>e("mouvements"),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${n==="mouvements"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(T9,{size:18}),l.jsx("span",{children:"Historique Mouvements"})]}),l.jsxs("button",{onClick:()=>e("fournisseurs"),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${n==="fournisseurs"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(K9,{size:18}),l.jsx("span",{children:"Fournisseurs"})]})]})}),l.jsxs("div",{className:"p-6",children:[n==="stock"&&l.jsx(eB,{onAddMouvement:h}),n==="mouvements"&&l.jsx(nB,{}),n==="fournisseurs"&&l.jsx(rB,{})]})]}),l.jsx(tB,{isOpen:t,onClose:()=>{r(!1),a(void 0)},selectedMatiere:i})]})},ro=({children:n})=>{const{isAuthenticated:e,isLoading:t}=Am();return t?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):e?l.jsx(c9,{children:n}):l.jsx(TS,{})};function sB(){const{setUser:n,setLoading:e}=Am();return fe.useEffect(()=>{const t=r8(i1,async r=>{if(e(!0),r)try{const i=Tn(wt,"users",r.uid),a=await ac(i);if(a.exists()){const c=a.data();n({id:r.uid,email:r.email||"",nom:c.nom||"",prenom:c.prenom||"",role:c.role||"admin",active:c.active??!0,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date})}else console.warn("Profil utilisateur introuvable dans Firestore"),n({id:r.uid,email:r.email||"",nom:"",prenom:"",role:"admin",active:!0,createdAt:new Date,updatedAt:new Date})}catch(i){console.error("Erreur lors de la rcupration du profil:",i),n(null)}else n(null);e(!1)});return()=>t()},[n,e]),l.jsx(oC,{children:l.jsxs(FT,{children:[l.jsx(Bs,{path:"/login",element:l.jsx(TS,{})}),l.jsx(Bs,{path:"/production",element:l.jsx(ro,{children:l.jsx(iO,{})})}),l.jsx(Bs,{path:"/boulanger",element:l.jsx(ro,{children:l.jsx(aO,{})})}),l.jsx(Bs,{path:"/livraison",element:l.jsx(ro,{children:l.jsx(oO,{})})}),l.jsx(Bs,{path:"/retours",element:l.jsx(ro,{children:l.jsx(lO,{})})}),l.jsx(Bs,{path:"/boutique",element:l.jsx(ro,{children:l.jsx(cO,{})})}),l.jsx(Bs,{path:"/rapport",element:l.jsx(ro,{children:l.jsx(uO,{})})}),l.jsx(Bs,{path:"/admin/produits",element:l.jsx(ro,{children:l.jsx(hO,{})})}),l.jsx(Bs,{path:"/admin/clients",element:l.jsx(ro,{children:l.jsx(mO,{})})}),l.jsx(Bs,{path:"/admin/livreurs",element:l.jsx(ro,{children:l.jsx(gO,{})})}),l.jsx(Bs,{path:"/admin/users",element:l.jsx(ro,{children:l.jsx(vO,{})})}),l.jsx(Bs,{path:"/facturation",element:l.jsx(ro,{children:l.jsx(JV,{})})}),l.jsx(Bs,{path:"/stocks",element:l.jsx(ro,{children:l.jsx(iB,{})})}),l.jsx(Bs,{path:"/",element:l.jsx(MT,{to:"/production",replace:!0})})]})})}rE.createRoot(document.getElementById("root")).render(l.jsxs(fe.StrictMode,{children:[l.jsx(sB,{}),l.jsx($E,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]}));export{nr as _,aB as c,W6 as g};
