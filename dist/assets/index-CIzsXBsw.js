(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var cB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function J6(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Px={exports:{}},Af={};var m5;function Z6(){if(m5)return Af;m5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var c=null;if(a!==void 0&&(c=""+a),i.key!==void 0&&(c=""+i.key),"key"in i){a={};for(var d in i)d!=="key"&&(a[d]=i[d])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:c,ref:i!==void 0?i:null,props:a}}return Af.Fragment=e,Af.jsx=t,Af.jsxs=t,Af}var p5;function eE(){return p5||(p5=1,Px.exports=Z6()),Px.exports}var l=eE(),Dx={exports:{}},an={};var g5;function tE(){if(g5)return an;g5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function b(J){return J===null||typeof J!="object"?null:(J=_&&J[_]||J["@@iterator"],typeof J=="function"?J:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,L={};function j(J,q,X){this.props=J,this.context=q,this.refs=L,this.updater=X||T}j.prototype.isReactComponent={},j.prototype.setState=function(J,q){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,q,"setState")},j.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function U(){}U.prototype=j.prototype;function z(J,q,X){this.props=J,this.context=q,this.refs=L,this.updater=X||T}var B=z.prototype=new U;B.constructor=z,I(B,j.prototype),B.isPureReactComponent=!0;var re=Array.isArray;function ne(){}var V={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function k(J,q,X){var ie=X.ref;return{$$typeof:n,type:J,key:q,ref:ie!==void 0?ie:null,props:X}}function $(J,q){return k(J.type,q,J.props)}function S(J){return typeof J=="object"&&J!==null&&J.$$typeof===n}function R(J){var q={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(X){return q[X]})}var F=/\/+/g;function oe(J,q){return typeof J=="object"&&J!==null&&J.key!=null?R(""+J.key):q.toString(36)}function be(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(ne,ne):(J.status="pending",J.then(function(q){J.status==="pending"&&(J.status="fulfilled",J.value=q)},function(q){J.status==="pending"&&(J.status="rejected",J.reason=q)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function Q(J,q,X,ie,fe){var ge=typeof J;(ge==="undefined"||ge==="boolean")&&(J=null);var _e=!1;if(J===null)_e=!0;else switch(ge){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(J.$$typeof){case n:case e:_e=!0;break;case p:return _e=J._init,Q(_e(J._payload),q,X,ie,fe)}}if(_e)return fe=fe(J),_e=ie===""?"."+oe(J,0):ie,re(fe)?(X="",_e!=null&&(X=_e.replace(F,"$&/")+"/"),Q(fe,q,X,"",function(Be){return Be})):fe!=null&&(S(fe)&&(fe=$(fe,X+(fe.key==null||J&&J.key===fe.key?"":(""+fe.key).replace(F,"$&/")+"/")+_e)),q.push(fe)),1;_e=0;var Le=ie===""?".":ie+":";if(re(J))for(var ke=0;ke<J.length;ke++)ie=J[ke],ge=Le+oe(ie,ke),_e+=Q(ie,q,X,ge,fe);else if(ke=b(J),typeof ke=="function")for(J=ke.call(J),ke=0;!(ie=J.next()).done;)ie=ie.value,ge=Le+oe(ie,ke++),_e+=Q(ie,q,X,ge,fe);else if(ge==="object"){if(typeof J.then=="function")return Q(be(J),q,X,ie,fe);throw q=String(J),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return _e}function ae(J,q,X){if(J==null)return J;var ie=[],fe=0;return Q(J,ie,"","",function(ge){return q.call(X,ge,fe++)}),ie}function me(J){if(J._status===-1){var q=J._result;q=q(),q.then(function(X){(J._status===0||J._status===-1)&&(J._status=1,J._result=X)},function(X){(J._status===0||J._status===-1)&&(J._status=2,J._result=X)}),J._status===-1&&(J._status=0,J._result=q)}if(J._status===1)return J._result.default;throw J._result}var je=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},Fe={map:ae,forEach:function(J,q,X){ae(J,function(){q.apply(this,arguments)},X)},count:function(J){var q=0;return ae(J,function(){q++}),q},toArray:function(J){return ae(J,function(q){return q})||[]},only:function(J){if(!S(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return an.Activity=v,an.Children=Fe,an.Component=j,an.Fragment=t,an.Profiler=i,an.PureComponent=z,an.StrictMode=r,an.Suspense=h,an.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,an.__COMPILER_RUNTIME={__proto__:null,c:function(J){return V.H.useMemoCache(J)}},an.cache=function(J){return function(){return J.apply(null,arguments)}},an.cacheSignal=function(){return null},an.cloneElement=function(J,q,X){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var ie=I({},J.props),fe=J.key;if(q!=null)for(ge in q.key!==void 0&&(fe=""+q.key),q)!D.call(q,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&q.ref===void 0||(ie[ge]=q[ge]);var ge=arguments.length-2;if(ge===1)ie.children=X;else if(1<ge){for(var _e=Array(ge),Le=0;Le<ge;Le++)_e[Le]=arguments[Le+2];ie.children=_e}return k(J.type,fe,ie)},an.createContext=function(J){return J={$$typeof:c,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:a,_context:J},J},an.createElement=function(J,q,X){var ie,fe={},ge=null;if(q!=null)for(ie in q.key!==void 0&&(ge=""+q.key),q)D.call(q,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(fe[ie]=q[ie]);var _e=arguments.length-2;if(_e===1)fe.children=X;else if(1<_e){for(var Le=Array(_e),ke=0;ke<_e;ke++)Le[ke]=arguments[ke+2];fe.children=Le}if(J&&J.defaultProps)for(ie in _e=J.defaultProps,_e)fe[ie]===void 0&&(fe[ie]=_e[ie]);return k(J,ge,fe)},an.createRef=function(){return{current:null}},an.forwardRef=function(J){return{$$typeof:d,render:J}},an.isValidElement=S,an.lazy=function(J){return{$$typeof:p,_payload:{_status:-1,_result:J},_init:me}},an.memo=function(J,q){return{$$typeof:f,type:J,compare:q===void 0?null:q}},an.startTransition=function(J){var q=V.T,X={};V.T=X;try{var ie=J(),fe=V.S;fe!==null&&fe(X,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(ne,je)}catch(ge){je(ge)}finally{q!==null&&X.types!==null&&(q.types=X.types),V.T=q}},an.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},an.use=function(J){return V.H.use(J)},an.useActionState=function(J,q,X){return V.H.useActionState(J,q,X)},an.useCallback=function(J,q){return V.H.useCallback(J,q)},an.useContext=function(J){return V.H.useContext(J)},an.useDebugValue=function(){},an.useDeferredValue=function(J,q){return V.H.useDeferredValue(J,q)},an.useEffect=function(J,q){return V.H.useEffect(J,q)},an.useEffectEvent=function(J){return V.H.useEffectEvent(J)},an.useId=function(){return V.H.useId()},an.useImperativeHandle=function(J,q,X){return V.H.useImperativeHandle(J,q,X)},an.useInsertionEffect=function(J,q){return V.H.useInsertionEffect(J,q)},an.useLayoutEffect=function(J,q){return V.H.useLayoutEffect(J,q)},an.useMemo=function(J,q){return V.H.useMemo(J,q)},an.useOptimistic=function(J,q){return V.H.useOptimistic(J,q)},an.useReducer=function(J,q,X){return V.H.useReducer(J,q,X)},an.useRef=function(J){return V.H.useRef(J)},an.useState=function(J){return V.H.useState(J)},an.useSyncExternalStore=function(J,q,X){return V.H.useSyncExternalStore(J,q,X)},an.useTransition=function(){return V.H.useTransition()},an.version="19.2.1",an}var x5;function T1(){return x5||(x5=1,Dx.exports=tE()),Dx.exports}var he=T1();const lc=J6(he);var Mx={exports:{}},Sf={},Ox={exports:{}},Fx={};var v5;function nE(){return v5||(v5=1,(function(n){function e(Q,ae){var me=Q.length;Q.push(ae);e:for(;0<me;){var je=me-1>>>1,Fe=Q[je];if(0<i(Fe,ae))Q[je]=ae,Q[me]=Fe,me=je;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ae=Q[0],me=Q.pop();if(me!==ae){Q[0]=me;e:for(var je=0,Fe=Q.length,J=Fe>>>1;je<J;){var q=2*(je+1)-1,X=Q[q],ie=q+1,fe=Q[ie];if(0>i(X,me))ie<Fe&&0>i(fe,X)?(Q[je]=fe,Q[ie]=me,je=ie):(Q[je]=X,Q[q]=me,je=q);else if(ie<Fe&&0>i(fe,me))Q[je]=fe,Q[ie]=me,je=ie;else break e}}return ae}function i(Q,ae){var me=Q.sortIndex-ae.sortIndex;return me!==0?me:Q.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],f=[],p=1,v=null,_=3,b=!1,T=!1,I=!1,L=!1,j=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function B(Q){for(var ae=t(f);ae!==null;){if(ae.callback===null)r(f);else if(ae.startTime<=Q)r(f),ae.sortIndex=ae.expirationTime,e(h,ae);else break;ae=t(f)}}function re(Q){if(I=!1,B(Q),!T)if(t(h)!==null)T=!0,ne||(ne=!0,R());else{var ae=t(f);ae!==null&&be(re,ae.startTime-Q)}}var ne=!1,V=-1,D=5,k=-1;function $(){return L?!0:!(n.unstable_now()-k<D)}function S(){if(L=!1,ne){var Q=n.unstable_now();k=Q;var ae=!0;try{e:{T=!1,I&&(I=!1,U(V),V=-1),b=!0;var me=_;try{t:{for(B(Q),v=t(h);v!==null&&!(v.expirationTime>Q&&$());){var je=v.callback;if(typeof je=="function"){v.callback=null,_=v.priorityLevel;var Fe=je(v.expirationTime<=Q);if(Q=n.unstable_now(),typeof Fe=="function"){v.callback=Fe,B(Q),ae=!0;break t}v===t(h)&&r(h),B(Q)}else r(h);v=t(h)}if(v!==null)ae=!0;else{var J=t(f);J!==null&&be(re,J.startTime-Q),ae=!1}}break e}finally{v=null,_=me,b=!1}ae=void 0}}finally{ae?R():ne=!1}}}var R;if(typeof z=="function")R=function(){z(S)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,oe=F.port2;F.port1.onmessage=S,R=function(){oe.postMessage(null)}}else R=function(){j(S,0)};function be(Q,ae){V=j(function(){Q(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(Q){switch(_){case 1:case 2:case 3:var ae=3;break;default:ae=_}var me=_;_=ae;try{return Q()}finally{_=me}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(Q,ae){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var me=_;_=Q;try{return ae()}finally{_=me}},n.unstable_scheduleCallback=function(Q,ae,me){var je=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?je+me:je):me=je,Q){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=me+Fe,Q={id:p++,callback:ae,priorityLevel:Q,startTime:me,expirationTime:Fe,sortIndex:-1},me>je?(Q.sortIndex=me,e(f,Q),t(h)===null&&Q===t(f)&&(I?(U(V),V=-1):I=!0,be(re,me-je))):(Q.sortIndex=Fe,e(h,Q),T||b||(T=!0,ne||(ne=!0,R()))),Q},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(Q){var ae=_;return function(){var me=_;_=ae;try{return Q.apply(this,arguments)}finally{_=me}}}})(Fx)),Fx}var y5;function rE(){return y5||(y5=1,Ox.exports=nE()),Ox.exports}var qx={exports:{}},js={};var b5;function iE(){if(b5)return js;b5=1;var n=T1();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(h,f,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:v==null?null:""+v,children:h,containerInfo:f,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return js.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,js.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(h,f,null,p)},js.flushSync=function(h){var f=c.T,p=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=f,r.p=p,r.d.f()}},js.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},js.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},js.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,v=d(p,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:b}):p==="script"&&r.d.X(h,{crossOrigin:v,integrity:_,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},js.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=d(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},js.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,v=d(p,f.crossOrigin);r.d.L(h,p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},js.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=d(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},js.requestFormReset=function(h){r.d.r(h)},js.unstable_batchedUpdates=function(h,f){return h(f)},js.useFormState=function(h,f,p){return c.H.useFormState(h,f,p)},js.useFormStatus=function(){return c.H.useHostTransitionStatus()},js.version="19.2.1",js}var w5;function sE(){if(w5)return qx.exports;w5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qx.exports=iE(),qx.exports}var _5;function aE(){if(_5)return Sf;_5=1;var n=rE(),e=T1(),t=sE();function r(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function c(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(r(188))}function f(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(r(188));return o!==s?null:s}for(var u=s,m=o;;){var y=u.return;if(y===null)break;var N=y.alternate;if(N===null){if(m=y.return,m!==null){u=m;continue}break}if(y.child===N.child){for(N=y.child;N;){if(N===u)return h(y),s;if(N===m)return h(y),o;N=N.sibling}throw Error(r(188))}if(u.return!==m.return)u=y,m=N;else{for(var M=!1,K=y.child;K;){if(K===u){M=!0,u=y,m=N;break}if(K===m){M=!0,m=y,u=N;break}K=K.sibling}if(!M){for(K=N.child;K;){if(K===u){M=!0,u=N,m=y;break}if(K===m){M=!0,m=N,u=y;break}K=K.sibling}if(!M)throw Error(r(189))}}if(u.alternate!==m)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?s:o}function p(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=p(s),o!==null)return o;s=s.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),z=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),S=Symbol.iterator;function R(s){return s===null||typeof s!="object"?null:(s=S&&s[S]||s["@@iterator"],typeof s=="function"?s:null)}var F=Symbol.for("react.client.reference");function oe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===F?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case I:return"Fragment";case j:return"Profiler";case L:return"StrictMode";case re:return"Suspense";case ne:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case T:return"Portal";case z:return s.displayName||"Context";case U:return(s._context.displayName||"Context")+".Consumer";case B:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return o=s.displayName||null,o!==null?o:oe(s.type)||"Memo";case D:o=s._payload,s=s._init;try{return oe(s(o))}catch{}}return null}var be=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},je=[],Fe=-1;function J(s){return{current:s}}function q(s){0>Fe||(s.current=je[Fe],je[Fe]=null,Fe--)}function X(s,o){Fe++,je[Fe]=s.current,s.current=o}var ie=J(null),fe=J(null),ge=J(null),_e=J(null);function Le(s,o){switch(X(ge,o),X(fe,s),X(ie,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?Ob(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=Ob(o),s=Fb(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}q(ie),X(ie,s)}function ke(){q(ie),q(fe),q(ge)}function Be(s){s.memoizedState!==null&&X(_e,s);var o=ie.current,u=Fb(o,s.type);o!==u&&(X(fe,s),X(ie,u))}function Ze(s){fe.current===s&&(q(ie),q(fe)),_e.current===s&&(q(_e),bf._currentValue=me)}var ot,st;function dt(s){if(ot===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);ot=o&&o[1]||"",st=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+s+st}var se=!1;function rt(s,o){if(!s||se)return"";se=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var Ye=function(){throw Error()};if(Object.defineProperty(Ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ye,[])}catch(Oe){var Me=Oe}Reflect.construct(s,[],Ye)}else{try{Ye.call()}catch(Oe){Me=Oe}s.call(Ye.prototype)}}else{try{throw Error()}catch(Oe){Me=Oe}(Ye=s())&&typeof Ye.catch=="function"&&Ye.catch(function(){})}}catch(Oe){if(Oe&&Me&&typeof Oe.stack=="string")return[Oe.stack,Me.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=m.DetermineComponentFrameRoot(),M=N[0],K=N[1];if(M&&K){var xe=M.split(`
`),Pe=K.split(`
`);for(y=m=0;m<xe.length&&!xe[m].includes("DetermineComponentFrameRoot");)m++;for(;y<Pe.length&&!Pe[y].includes("DetermineComponentFrameRoot");)y++;if(m===xe.length||y===Pe.length)for(m=xe.length-1,y=Pe.length-1;1<=m&&0<=y&&xe[m]!==Pe[y];)y--;for(;1<=m&&0<=y;m--,y--)if(xe[m]!==Pe[y]){if(m!==1||y!==1)do if(m--,y--,0>y||xe[m]!==Pe[y]){var He=`
`+xe[m].replace(" at new "," at ");return s.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",s.displayName)),He}while(1<=m&&0<=y);break}}}finally{se=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?dt(u):""}function Kt(s,o){switch(s.tag){case 26:case 27:case 5:return dt(s.type);case 16:return dt("Lazy");case 13:return s.child!==o&&o!==null?dt("Suspense Fallback"):dt("Suspense");case 19:return dt("SuspenseList");case 0:case 15:return rt(s.type,!1);case 11:return rt(s.type.render,!1);case 1:return rt(s.type,!0);case 31:return dt("Activity");default:return""}}function St(s){try{var o="",u=null;do o+=Kt(s,u),u=s,s=s.return;while(s);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var pe=Object.prototype.hasOwnProperty,Ue=n.unstable_scheduleCallback,Qe=n.unstable_cancelCallback,at=n.unstable_shouldYield,nt=n.unstable_requestPaint,pt=n.unstable_now,Gt=n.unstable_getCurrentPriorityLevel,Mt=n.unstable_ImmediatePriority,cn=n.unstable_UserBlockingPriority,nn=n.unstable_NormalPriority,bt=n.unstable_LowPriority,Xt=n.unstable_IdlePriority,_t=n.log,br=n.unstable_setDisableYieldValue,rn=null,Lt=null;function zt(s){if(typeof _t=="function"&&br(s),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(rn,s)}catch{}}var en=Math.clz32?Math.clz32:Vt,Tt=Math.log,Dn=Math.LN2;function Vt(s){return s>>>=0,s===0?32:31-(Tt(s)/Dn|0)|0}var Bt=256,qn=262144,jt=4194304;function Nt(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function un(s,o,u){var m=s.pendingLanes;if(m===0)return 0;var y=0,N=s.suspendedLanes,M=s.pingedLanes;s=s.warmLanes;var K=m&134217727;return K!==0?(m=K&~N,m!==0?y=Nt(m):(M&=K,M!==0?y=Nt(M):u||(u=K&~s,u!==0&&(y=Nt(u))))):(K=m&~N,K!==0?y=Nt(K):M!==0?y=Nt(M):u||(u=m&~s,u!==0&&(y=Nt(u)))),y===0?0:o!==0&&o!==y&&(o&N)===0&&(N=y&-y,u=o&-o,N>=u||N===32&&(u&4194048)!==0)?o:y}function Ni(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function hi(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ys(){var s=jt;return jt<<=1,(jt&62914560)===0&&(jt=4194304),s}function ni(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function Ct(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ya(s,o,u,m,y,N){var M=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var K=s.entanglements,xe=s.expirationTimes,Pe=s.hiddenUpdates;for(u=M&~u;0<u;){var He=31-en(u),Ye=1<<He;K[He]=0,xe[He]=-1;var Me=Pe[He];if(Me!==null)for(Pe[He]=null,He=0;He<Me.length;He++){var Oe=Me[He];Oe!==null&&(Oe.lane&=-536870913)}u&=~Ye}m!==0&&es(s,m,0),N!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=N&~(M&~o))}function es(s,o,u){s.pendingLanes|=o,s.suspendedLanes&=~o;var m=31-en(o);s.entangledLanes|=o,s.entanglements[m]=s.entanglements[m]|1073741824|u&261930}function Fi(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var m=31-en(u),y=1<<m;y&o|s[m]&o&&(s[m]|=o),u&=~y}}function qi(s,o){var u=o&-o;return u=(u&42)!==0?1:Kn(u),(u&(s.suspendedLanes|o))!==0?0:u}function Kn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ir(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function $r(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:o5(s.type))}function Ai(s,o){var u=ae.p;try{return ae.p=s,o()}finally{ae.p=u}}var fi=Math.random().toString(36).slice(2),Vn="__reactFiber$"+fi,Xn="__reactProps$"+fi,Gr="__reactContainer$"+fi,Vi="__reactEvents$"+fi,ys="__reactListeners$"+fi,Va="__reactHandles$"+fi,Ps="__reactResources$"+fi,Bi="__reactMarker$"+fi;function ba(s){delete s[Vn],delete s[Xn],delete s[Vi],delete s[ys],delete s[Va]}function ts(s){var o=s[Vn];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Gr]||u[Vn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=$b(s);s!==null;){if(u=s[Vn])return u;s=$b(s)}return o}s=u,u=s.parentNode}return null}function Si(s){if(s=s[Vn]||s[Gr]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function ns(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(r(33))}function bs(s){var o=s[Ps];return o||(o=s[Ps]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function wr(s){s[Bi]=!0}var zo=new Set,Ui={};function ws(s,o){Ds(s,o),Ds(s+"Capture",o)}function Ds(s,o){for(Ui[s]=o,s=0;s<o.length;s++)zo.add(o[s])}var ho=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ho={},$o={};function Ll(s){return pe.call($o,s)?!0:pe.call(Ho,s)?!1:ho.test(s)?$o[s]=!0:(Ho[s]=!0,!1)}function rs(s,o,u){if(Ll(o))if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+u)}}function mi(s,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+u)}}function Tr(s,o,u,m){if(m===null)s.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(o,u,""+m)}}function mn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function wa(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function _s(s,o,u){var m=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var y=m.get,N=m.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return y.call(this)},set:function(M){u=""+M,N.call(this,M)}}),Object.defineProperty(s,o,{enumerable:m.enumerable}),{getValue:function(){return u},setValue:function(M){u=""+M},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function bn(s){if(!s._valueTracker){var o=wa(s)?"checked":"value";s._valueTracker=_s(s,o,""+s[o])}}function Ba(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return s&&(m=wa(s)?s.checked?"true":"false":s.value),s=m,s!==u?(o.setValue(s),!0):!1}function Mr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var pr=/[\n"\\]/g;function Cr(s){return s.replace(pr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function fo(s,o,u,m,y,N,M,K){s.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.type=M:s.removeAttribute("type"),o!=null?M==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+mn(o)):s.value!==""+mn(o)&&(s.value=""+mn(o)):M!=="submit"&&M!=="reset"||s.removeAttribute("value"),o!=null?Rl(s,M,mn(o)):u!=null?Rl(s,M,mn(u)):m!=null&&s.removeAttribute("value"),y==null&&N!=null&&(s.defaultChecked=!!N),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?s.name=""+mn(K):s.removeAttribute("name")}function Ac(s,o,u,m,y,N,M,K){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.type=N),o!=null||u!=null){if(!(N!=="submit"&&N!=="reset"||o!=null)){bn(s);return}u=u!=null?""+mn(u):"",o=o!=null?""+mn(o):u,K||o===s.value||(s.value=o),s.defaultValue=o}m=m??y,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=K?s.checked:!!m,s.defaultChecked=!!m,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(s.name=M),bn(s)}function Rl(s,o,u){o==="number"&&Mr(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function ji(s,o,u,m){if(s=s.options,o){o={};for(var y=0;y<u.length;y++)o["$"+u[y]]=!0;for(u=0;u<s.length;u++)y=o.hasOwnProperty("$"+s[u].value),s[u].selected!==y&&(s[u].selected=y),y&&m&&(s[u].defaultSelected=!0)}else{for(u=""+mn(u),o=null,y=0;y<s.length;y++){if(s[y].value===u){s[y].selected=!0,m&&(s[y].defaultSelected=!0);return}o!==null||s[y].disabled||(o=s[y])}o!==null&&(o.selected=!0)}}function kl(s,o,u){if(o!=null&&(o=""+mn(o),o!==s.value&&(s.value=o),u==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=u!=null?""+mn(u):""}function _a(s,o,u,m){if(o==null){if(m!=null){if(u!=null)throw Error(r(92));if(be(m)){if(1<m.length)throw Error(r(93));m=m[0]}u=m}u==null&&(u=""),o=u}u=mn(o),s.defaultValue=u,m=s.textContent,m===u&&m!==""&&m!==null&&(s.value=m),bn(s)}function ri(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var Ua=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pl(s,o,u){var m=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":m?s.setProperty(o,u):typeof u!="number"||u===0||Ua.has(o)?o==="float"?s.cssFloat=u:s[o]=(""+u).trim():s[o]=u+"px"}function Dl(s,o,u){if(o!=null&&typeof o!="object")throw Error(r(62));if(s=s.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var y in o)m=o[y],o.hasOwnProperty(y)&&u[y]!==m&&Pl(s,y,m)}else for(var N in o)o.hasOwnProperty(N)&&Pl(s,N,o[N])}function Go(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Na=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zi(s){return Na.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ms(){}var Aa=null;function Hi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var za=null,Rt=null;function mo(s){var o=Si(s);if(o&&(s=o.stateNode)){var u=s[Xn]||null;e:switch(s=o.stateNode,o.type){case"input":if(fo(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Cr(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==s&&m.form===s.form){var y=m[Xn]||null;if(!y)throw Error(r(90));fo(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<u.length;o++)m=u[o],m.form===s.form&&Ba(m)}break e;case"textarea":kl(s,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&ji(s,!!u.multiple,o,!1)}}}var Yo=!1;function Ha(s,o,u){if(Yo)return s(o,u);Yo=!0;try{var m=s(o);return m}finally{if(Yo=!1,(za!==null||Rt!==null)&&(ep(),za&&(o=za,s=Rt,Rt=za=null,mo(o),s)))for(o=0;o<s.length;o++)mo(s[o])}}function ii(s,o){var u=s.stateNode;if(u===null)return null;var m=u[Xn]||null;if(m===null)return null;u=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(r(231,o,typeof u));return u}var Wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),po=!1;if(Wr)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){po=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{po=!1}var is=null,go=null,Os=null;function Ml(){if(Os)return Os;var s,o=go,u=o.length,m,y="value"in is?is.value:is.textContent,N=y.length;for(s=0;s<u&&o[s]===y[s];s++);var M=u-s;for(m=1;m<=M&&o[u-m]===y[N-m];m++);return Os=y.slice(s,1<m?1-m:void 0)}function ss(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Sa(){return!0}function as(){return!1}function Or(s){function o(u,m,y,N,M){this._reactName=u,this._targetInst=y,this.type=m,this.nativeEvent=N,this.target=M,this.currentTarget=null;for(var K in s)s.hasOwnProperty(K)&&(u=s[K],this[K]=u?u(N):N[K]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Sa:as,this.isPropagationStopped=as,this}return v(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Sa)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Sa)},persist:function(){},isPersistent:Sa}),o}var Ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=Or(Ks),Qs=v({},Ks,{view:0,detail:0}),$a=Or(Qs),Xs,Js,Ns,xo=v({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ot,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ns&&(Ns&&s.type==="mousemove"?(Xs=s.screenX-Ns.screenX,Js=s.screenY-Ns.screenY):Js=Xs=0,Ns=s),Xs)},movementY:function(s){return"movementY"in s?s.movementY:Js}}),Ko=Or(xo),os=v({},xo,{dataTransfer:0}),Zs=Or(os),Ol=v({},Qs,{relatedTarget:0}),Fs=Or(Ol),Qo=v({},Ks,{animationName:0,elapsedTime:0,pseudoElement:0}),A=Or(Qo),H=v({},Ks,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ce=Or(H),ve=v({},Ks,{data:0}),Ae=Or(ve),ze={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ht={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xt(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=ht[s])?!!o[s]:!1}function Ot(){return xt}var It=v({},Qs,{key:function(s){if(s.key){var o=ze[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=ss(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Xe[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ot,charCode:function(s){return s.type==="keypress"?ss(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ss(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),pn=Or(It),sr=v({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qn=Or(sr),x=v({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ot}),C=Or(x),O=v({},Ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),ee=Or(O),Ee=v({},xo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),De=Or(Ee),tt=v({},Ks,{newState:0,oldState:0}),Qt=Or(tt),ar=[9,13,27,32],hn=Wr&&"CompositionEvent"in window,Un=null;Wr&&"documentMode"in document&&(Un=document.documentMode);var gi=Wr&&"TextEvent"in window&&!Un,Ei=Wr&&(!hn||Un&&8<Un&&11>=Un),Jn=" ",Ti=!1;function qs(s,o){switch(s){case"keyup":return ar.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ga(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Wa=!1;function ls(s,o){switch(s){case"compositionend":return Ga(o);case"keypress":return o.which!==32?null:(Ti=!0,Jn);case"textInput":return s=o.data,s===Jn&&Ti?null:s;default:return null}}function vo(s,o){if(Wa)return s==="compositionend"||!hn&&qs(s,o)?(s=Ml(),Os=go=is=null,Wa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ei&&o.locale!=="ko"?null:o.data;default:return null}}var Sc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iu(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!Sc[s.type]:o==="textarea"}function Vs(s,o,u,m){za?Rt?Rt.push(m):Rt=[m]:za=m,o=op(o,"onChange"),0<o.length&&(u=new pi("onChange","change",null,u,m),s.push({event:u,listeners:o}))}var ja=null,yo=null;function Lu(s){Lb(s,0)}function Ea(s){var o=ns(s);if(Ba(o))return s}function Xo(s,o){if(s==="change")return o}var As=!1;if(Wr){var cs;if(Wr){var Ya="oninput"in document;if(!Ya){var Ka=document.createElement("div");Ka.setAttribute("oninput","return;"),Ya=typeof Ka.oninput=="function"}cs=Ya}else cs=!1;As=cs&&(!document.documentMode||9<document.documentMode)}function bo(){ja&&(ja.detachEvent("onpropertychange",jc),yo=ja=null)}function jc(s){if(s.propertyName==="value"&&Ea(yo)){var o=[];Vs(o,yo,s,Hi(s)),Ha(Lu,o)}}function Ec(s,o,u){s==="focusin"?(bo(),ja=o,yo=u,ja.attachEvent("onpropertychange",jc)):s==="focusout"&&bo()}function Fr(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ea(yo)}function xd(s,o){if(s==="click")return Ea(o)}function Qa(s,o){if(s==="input"||s==="change")return Ea(o)}function Xa(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Ci=typeof Object.is=="function"?Object.is:Xa;function wo(s,o){if(Ci(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var y=u[m];if(!pe.call(o,y)||!Ci(s[y],o[y]))return!1}return!0}function Tc(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Cc(s,o){var u=Tc(s);s=0;for(var m;u;){if(u.nodeType===3){if(m=s+u.textContent.length,s<=o&&m>=o)return{node:u,offset:o-s};s=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Tc(u)}}function _o(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?_o(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function No(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Mr(s.document);o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=Mr(s.document)}return o}function Ja(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var Fl=Wr&&"documentMode"in document&&11>=document.documentMode,Bs=null,Ao=null,$i=null,ea=!1;function Mn(s,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ea||Bs==null||Bs!==Mr(m)||(m=Bs,"selectionStart"in m&&Ja(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),$i&&wo($i,m)||($i=m,m=op(Ao,"onSelect"),0<m.length&&(o=new pi("onSelect","select",null,o,u),s.push({event:o,listeners:m}),o.target=Bs)))}function jn(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var or={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionrun:jn("Transition","TransitionRun"),transitionstart:jn("Transition","TransitionStart"),transitioncancel:jn("Transition","TransitionCancel"),transitionend:jn("Transition","TransitionEnd")},qr={},Za={};Wr&&(Za=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function Ta(s){if(qr[s])return qr[s];if(!or[s])return s;var o=or[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in Za)return qr[s]=o[u];return s}var ql=Ta("animationend"),Ru=Ta("animationiteration"),Uh=Ta("animationstart"),Im=Ta("transitionrun"),Lm=Ta("transitionstart"),Rm=Ta("transitioncancel"),zh=Ta("transitionend"),Hh=new Map,Vl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vl.push("scrollEnd");function ta(s,o){Hh.set(s,o),ws(o,[s])}var ku=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Us=[],Bl=0,vd=0;function Pu(){for(var s=Bl,o=vd=Bl=0;o<s;){var u=Us[o];Us[o++]=null;var m=Us[o];Us[o++]=null;var y=Us[o];Us[o++]=null;var N=Us[o];if(Us[o++]=null,m!==null&&y!==null){var M=m.pending;M===null?y.next=y:(y.next=M.next,M.next=y),m.pending=y}N!==0&&Mu(u,y,N)}}function Du(s,o,u,m){Us[Bl++]=s,Us[Bl++]=o,Us[Bl++]=u,Us[Bl++]=m,vd|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function yd(s,o,u,m){return Du(s,o,u,m),Gi(s)}function So(s,o){return Du(s,null,null,o),Gi(s)}function Mu(s,o,u){s.lanes|=u;var m=s.alternate;m!==null&&(m.lanes|=u);for(var y=!1,N=s.return;N!==null;)N.childLanes|=u,m=N.alternate,m!==null&&(m.childLanes|=u),N.tag===22&&(s=N.stateNode,s===null||s._visibility&1||(y=!0)),s=N,N=N.return;return s.tag===3?(N=s.stateNode,y&&o!==null&&(y=31-en(u),s=N.hiddenUpdates,m=s[y],m===null?s[y]=[o]:m.push(o),o.lane=u|536870912),N):null}function Gi(s){if(50<ff)throw ff=0,ix=null,Error(r(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Ii={};function bd(s,o,u,m){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wi(s,o,u,m){return new bd(s,o,u,m)}function wd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function na(s,o){var u=s.alternate;return u===null?(u=Wi(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function Ou(s,o){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,o=u.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Ic(s,o,u,m,y,N){var M=0;if(m=s,typeof s=="function")wd(s)&&(M=1);else if(typeof s=="string")M=V6(s,u,ie.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=Wi(31,u,o,y),s.elementType=k,s.lanes=N,s;case I:return Jo(u.children,y,N,o);case L:M=8,y|=24;break;case j:return s=Wi(12,u,o,y|2),s.elementType=j,s.lanes=N,s;case re:return s=Wi(13,u,o,y),s.elementType=re,s.lanes=N,s;case ne:return s=Wi(19,u,o,y),s.elementType=ne,s.lanes=N,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case z:M=10;break e;case U:M=9;break e;case B:M=11;break e;case V:M=14;break e;case D:M=16,m=null;break e}M=29,u=Error(r(130,s===null?"null":typeof s,"")),m=null}return o=Wi(M,u,o,y),o.elementType=s,o.type=m,o.lanes=N,o}function Jo(s,o,u,m){return s=Wi(7,s,m,o),s.lanes=u,s}function Fu(s,o,u){return s=Wi(6,s,null,o),s.lanes=u,s}function _d(s){var o=Wi(18,null,null,0);return o.stateNode=s,o}function Lc(s,o,u){return o=Wi(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Nd=new WeakMap;function ra(s,o){if(typeof s=="object"&&s!==null){var u=Nd.get(s);return u!==void 0?u:(o={value:s,source:o,stack:St(o)},Nd.set(s,o),o)}return{value:s,source:o,stack:St(o)}}var Rc=[],Ul=0,Ad=null,qu=0,ia=[],sa=0,Zo=null,aa=1,oa="";function zs(s,o){Rc[Ul++]=qu,Rc[Ul++]=Ad,Ad=s,qu=o}function km(s,o,u){ia[sa++]=aa,ia[sa++]=oa,ia[sa++]=Zo,Zo=s;var m=aa;s=oa;var y=32-en(m)-1;m&=~(1<<y),u+=1;var N=32-en(o)+y;if(30<N){var M=y-y%5;N=(m&(1<<M)-1).toString(32),m>>=M,y-=M,aa=1<<32-en(o)+y|u<<y|m,oa=N+s}else aa=1<<N|u<<y|m,oa=s}function $h(s){s.return!==null&&(zs(s,1),km(s,1,0))}function Sd(s){for(;s===Ad;)Ad=Rc[--Ul],Rc[Ul]=null,qu=Rc[--Ul],Rc[Ul]=null;for(;s===Zo;)Zo=ia[--sa],ia[sa]=null,oa=ia[--sa],ia[sa]=null,aa=ia[--sa],ia[sa]=null}function Pm(s,o){ia[sa++]=aa,ia[sa++]=oa,ia[sa++]=Zo,aa=o.id,oa=o.overflow,Zo=s}var Li=null,gr=null,xn=!1,us=null,Ir=!1,Ca=Error(r(519));function el(s){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kc(ra(o,s)),Ca}function Gh(s){var o=s.stateNode,u=s.type,m=s.memoizedProps;switch(o[Vn]=s,o[Xn]=m,u){case"dialog":yn("cancel",o),yn("close",o);break;case"iframe":case"object":case"embed":yn("load",o);break;case"video":case"audio":for(u=0;u<pf.length;u++)yn(pf[u],o);break;case"source":yn("error",o);break;case"img":case"image":case"link":yn("error",o),yn("load",o);break;case"details":yn("toggle",o);break;case"input":yn("invalid",o),Ac(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":yn("invalid",o);break;case"textarea":yn("invalid",o),_a(o,m.value,m.defaultValue,m.children)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||m.suppressHydrationWarning===!0||Db(o.textContent,u)?(m.popover!=null&&(yn("beforetoggle",o),yn("toggle",o)),m.onScroll!=null&&yn("scroll",o),m.onScrollEnd!=null&&yn("scrollend",o),m.onClick!=null&&(o.onclick=Ms),o=!0):o=!1,o||el(s,!0)}function jo(s){for(Li=s.return;Li;)switch(Li.tag){case 5:case 31:case 13:Ir=!1;return;case 27:case 3:Ir=!0;return;default:Li=Li.return}}function Ri(s){if(s!==Li)return!1;if(!xn)return jo(s),xn=!0,!1;var o=s.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||yx(s.type,s.memoizedProps)),u=!u),u&&gr&&el(s),jo(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));gr=Hb(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));gr=Hb(s)}else o===27?(o=gr,Wc(s.type)?(s=Ax,Ax=null,gr=s):gr=o):gr=Li?ro(s.stateNode.nextSibling):null;return!0}function zl(){gr=Li=null,xn=!1}function Wh(){var s=us;return s!==null&&(fa===null?fa=s:fa.push.apply(fa,s),us=null),s}function kc(s){us===null?us=[s]:us.push(s)}var jd=J(null),tl=null,eo=null;function nl(s,o,u){X(jd,o._currentValue),o._currentValue=u}function la(s){s._currentValue=jd.current,q(jd)}function Pc(s,o,u){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===u)break;s=s.return}}function Hl(s,o,u,m){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var N=y.dependencies;if(N!==null){var M=y.child;N=N.firstContext;e:for(;N!==null;){var K=N;N=y;for(var xe=0;xe<o.length;xe++)if(K.context===o[xe]){N.lanes|=u,K=N.alternate,K!==null&&(K.lanes|=u),Pc(N.return,u,s),m||(M=null);break e}N=K.next}}else if(y.tag===18){if(M=y.return,M===null)throw Error(r(341));M.lanes|=u,N=M.alternate,N!==null&&(N.lanes|=u),Pc(M,u,s),M=null}else M=y.child;if(M!==null)M.return=y;else for(M=y;M!==null;){if(M===s){M=null;break}if(y=M.sibling,y!==null){y.return=M.return,M=y;break}M=M.return}y=M}}function rl(s,o,u,m){s=null;for(var y=o,N=!1;y!==null;){if(!N){if((y.flags&524288)!==0)N=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var M=y.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var K=y.type;Ci(y.pendingProps.value,M.value)||(s!==null?s.push(K):s=[K])}}else if(y===_e.current){if(M=y.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(bf):s=[bf])}y=y.return}s!==null&&Hl(o,s,u,m),o.flags|=262144}function Ed(s){for(s=s.firstContext;s!==null;){if(!Ci(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function il(s){tl=s,eo=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ki(s){return Dm(tl,s)}function Td(s,o){return tl===null&&il(s),Dm(s,o)}function Dm(s,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},eo===null){if(s===null)throw Error(r(308));eo=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else eo=eo.next=o;return u}var N0=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(u,m){s.push(m)}};this.abort=function(){o.aborted=!0,s.forEach(function(u){return u()})}},A0=n.unstable_scheduleCallback,S0=n.unstable_NormalPriority,Vr={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dc(){return{controller:new N0,data:new Map,refCount:0}}function Vu(s){s.refCount--,s.refCount===0&&A0(S0,function(){s.controller.abort()})}var Bu=null,Cd=0,g=0,w=null;function E(s,o){if(Bu===null){var u=Bu=[];Cd=0,g=ux(),w={status:"pending",value:void 0,then:function(m){u.push(m)}}}return Cd++,o.then(P,P),o}function P(){if(--Cd===0&&Bu!==null){w!==null&&(w.status="fulfilled");var s=Bu;Bu=null,g=0,w=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function G(s,o){var u=[],m={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return s.then(function(){m.status="fulfilled",m.value=o;for(var y=0;y<u.length;y++)(0,u[y])(o)},function(y){for(m.status="rejected",m.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),m}var W=Q.S;Q.S=function(s,o){sb=pt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&E(s,o),W!==null&&W(s,o)};var Y=J(null);function Z(){var s=Y.current;return s!==null?s:vr.pooledCache}function te(s,o){o===null?X(Y,Y.current):X(Y,o.pool)}function ue(){var s=Z();return s===null?null:{parent:Vr._currentValue,pool:s}}var ye=Error(r(460)),Ie=Error(r(474)),le=Error(r(542)),Ne={then:function(){}};function Te(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ve(s,o,u){switch(u=s[u],u===void 0?s.push(o):u!==o&&(o.then(Ms,Ms),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,et(s),s;default:if(typeof o.status=="string")o.then(Ms,Ms);else{if(s=vr,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=o,s.status="pending",s.then(function(m){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=m}},function(m){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,et(s),s}throw qe=o,ye}}function Ce(s){try{var o=s._init;return o(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(qe=u,ye):u}}var qe=null;function $e(){if(qe===null)throw Error(r(459));var s=qe;return qe=null,s}function et(s){if(s===ye||s===le)throw Error(r(483))}var Ke=null,vt=0;function ct(s){var o=vt;return vt+=1,Ke===null&&(Ke=[]),Ve(Ke,s,o)}function Jt(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function mt(s,o){throw o.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(o),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function gn(s){function o(Se,we){if(s){var Re=Se.deletions;Re===null?(Se.deletions=[we],Se.flags|=16):Re.push(we)}}function u(Se,we){if(!s)return null;for(;we!==null;)o(Se,we),we=we.sibling;return null}function m(Se){for(var we=new Map;Se!==null;)Se.key!==null?we.set(Se.key,Se):we.set(Se.index,Se),Se=Se.sibling;return we}function y(Se,we){return Se=na(Se,we),Se.index=0,Se.sibling=null,Se}function N(Se,we,Re){return Se.index=Re,s?(Re=Se.alternate,Re!==null?(Re=Re.index,Re<we?(Se.flags|=67108866,we):Re):(Se.flags|=67108866,we)):(Se.flags|=1048576,we)}function M(Se){return s&&Se.alternate===null&&(Se.flags|=67108866),Se}function K(Se,we,Re,We){return we===null||we.tag!==6?(we=Fu(Re,Se.mode,We),we.return=Se,we):(we=y(we,Re),we.return=Se,we)}function xe(Se,we,Re,We){var qt=Re.type;return qt===I?He(Se,we,Re.props.children,We,Re.key):we!==null&&(we.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===D&&Ce(qt)===we.type)?(we=y(we,Re.props),Jt(we,Re),we.return=Se,we):(we=Ic(Re.type,Re.key,Re.props,null,Se.mode,We),Jt(we,Re),we.return=Se,we)}function Pe(Se,we,Re,We){return we===null||we.tag!==4||we.stateNode.containerInfo!==Re.containerInfo||we.stateNode.implementation!==Re.implementation?(we=Lc(Re,Se.mode,We),we.return=Se,we):(we=y(we,Re.children||[]),we.return=Se,we)}function He(Se,we,Re,We,qt){return we===null||we.tag!==7?(we=Jo(Re,Se.mode,We,qt),we.return=Se,we):(we=y(we,Re),we.return=Se,we)}function Ye(Se,we,Re){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=Fu(""+we,Se.mode,Re),we.return=Se,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case b:return Re=Ic(we.type,we.key,we.props,null,Se.mode,Re),Jt(Re,we),Re.return=Se,Re;case T:return we=Lc(we,Se.mode,Re),we.return=Se,we;case D:return we=Ce(we),Ye(Se,we,Re)}if(be(we)||R(we))return we=Jo(we,Se.mode,Re,null),we.return=Se,we;if(typeof we.then=="function")return Ye(Se,ct(we),Re);if(we.$$typeof===z)return Ye(Se,Td(Se,we),Re);mt(Se,we)}return null}function Me(Se,we,Re,We){var qt=we!==null?we.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return qt!==null?null:K(Se,we,""+Re,We);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case b:return Re.key===qt?xe(Se,we,Re,We):null;case T:return Re.key===qt?Pe(Se,we,Re,We):null;case D:return Re=Ce(Re),Me(Se,we,Re,We)}if(be(Re)||R(Re))return qt!==null?null:He(Se,we,Re,We,null);if(typeof Re.then=="function")return Me(Se,we,ct(Re),We);if(Re.$$typeof===z)return Me(Se,we,Td(Se,Re),We);mt(Se,Re)}return null}function Oe(Se,we,Re,We,qt){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return Se=Se.get(Re)||null,K(we,Se,""+We,qt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case b:return Se=Se.get(We.key===null?Re:We.key)||null,xe(we,Se,We,qt);case T:return Se=Se.get(We.key===null?Re:We.key)||null,Pe(we,Se,We,qt);case D:return We=Ce(We),Oe(Se,we,Re,We,qt)}if(be(We)||R(We))return Se=Se.get(Re)||null,He(we,Se,We,qt,null);if(typeof We.then=="function")return Oe(Se,we,Re,ct(We),qt);if(We.$$typeof===z)return Oe(Se,we,Re,Td(we,We),qt);mt(we,We)}return null}function gt(Se,we,Re,We){for(var qt=null,zn=null,At=we,dn=we=0,_n=null;At!==null&&dn<Re.length;dn++){At.index>dn?(_n=At,At=null):_n=At.sibling;var Hn=Me(Se,At,Re[dn],We);if(Hn===null){At===null&&(At=_n);break}s&&At&&Hn.alternate===null&&o(Se,At),we=N(Hn,we,dn),zn===null?qt=Hn:zn.sibling=Hn,zn=Hn,At=_n}if(dn===Re.length)return u(Se,At),xn&&zs(Se,dn),qt;if(At===null){for(;dn<Re.length;dn++)At=Ye(Se,Re[dn],We),At!==null&&(we=N(At,we,dn),zn===null?qt=At:zn.sibling=At,zn=At);return xn&&zs(Se,dn),qt}for(At=m(At);dn<Re.length;dn++)_n=Oe(At,Se,dn,Re[dn],We),_n!==null&&(s&&_n.alternate!==null&&At.delete(_n.key===null?dn:_n.key),we=N(_n,we,dn),zn===null?qt=_n:zn.sibling=_n,zn=_n);return s&&At.forEach(function(Jc){return o(Se,Jc)}),xn&&zs(Se,dn),qt}function $t(Se,we,Re,We){if(Re==null)throw Error(r(151));for(var qt=null,zn=null,At=we,dn=we=0,_n=null,Hn=Re.next();At!==null&&!Hn.done;dn++,Hn=Re.next()){At.index>dn?(_n=At,At=null):_n=At.sibling;var Jc=Me(Se,At,Hn.value,We);if(Jc===null){At===null&&(At=_n);break}s&&At&&Jc.alternate===null&&o(Se,At),we=N(Jc,we,dn),zn===null?qt=Jc:zn.sibling=Jc,zn=Jc,At=_n}if(Hn.done)return u(Se,At),xn&&zs(Se,dn),qt;if(At===null){for(;!Hn.done;dn++,Hn=Re.next())Hn=Ye(Se,Hn.value,We),Hn!==null&&(we=N(Hn,we,dn),zn===null?qt=Hn:zn.sibling=Hn,zn=Hn);return xn&&zs(Se,dn),qt}for(At=m(At);!Hn.done;dn++,Hn=Re.next())Hn=Oe(At,Se,dn,Hn.value,We),Hn!==null&&(s&&Hn.alternate!==null&&At.delete(Hn.key===null?dn:Hn.key),we=N(Hn,we,dn),zn===null?qt=Hn:zn.sibling=Hn,zn=Hn);return s&&At.forEach(function(X6){return o(Se,X6)}),xn&&zs(Se,dn),qt}function dr(Se,we,Re,We){if(typeof Re=="object"&&Re!==null&&Re.type===I&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case b:e:{for(var qt=Re.key;we!==null;){if(we.key===qt){if(qt=Re.type,qt===I){if(we.tag===7){u(Se,we.sibling),We=y(we,Re.props.children),We.return=Se,Se=We;break e}}else if(we.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===D&&Ce(qt)===we.type){u(Se,we.sibling),We=y(we,Re.props),Jt(We,Re),We.return=Se,Se=We;break e}u(Se,we);break}else o(Se,we);we=we.sibling}Re.type===I?(We=Jo(Re.props.children,Se.mode,We,Re.key),We.return=Se,Se=We):(We=Ic(Re.type,Re.key,Re.props,null,Se.mode,We),Jt(We,Re),We.return=Se,Se=We)}return M(Se);case T:e:{for(qt=Re.key;we!==null;){if(we.key===qt)if(we.tag===4&&we.stateNode.containerInfo===Re.containerInfo&&we.stateNode.implementation===Re.implementation){u(Se,we.sibling),We=y(we,Re.children||[]),We.return=Se,Se=We;break e}else{u(Se,we);break}else o(Se,we);we=we.sibling}We=Lc(Re,Se.mode,We),We.return=Se,Se=We}return M(Se);case D:return Re=Ce(Re),dr(Se,we,Re,We)}if(be(Re))return gt(Se,we,Re,We);if(R(Re)){if(qt=R(Re),typeof qt!="function")throw Error(r(150));return Re=qt.call(Re),$t(Se,we,Re,We)}if(typeof Re.then=="function")return dr(Se,we,ct(Re),We);if(Re.$$typeof===z)return dr(Se,we,Td(Se,Re),We);mt(Se,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint"?(Re=""+Re,we!==null&&we.tag===6?(u(Se,we.sibling),We=y(we,Re),We.return=Se,Se=We):(u(Se,we),We=Fu(Re,Se.mode,We),We.return=Se,Se=We),M(Se)):u(Se,we)}return function(Se,we,Re,We){try{vt=0;var qt=dr(Se,we,Re,We);return Ke=null,qt}catch(At){if(At===ye||At===le)throw At;var zn=Wi(29,At,null,Se.mode);return zn.lanes=We,zn.return=Se,zn}finally{}}}var xr=gn(!0),sn=gn(!1),ut=!1;function it(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _r(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ht(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ln(s,o,u){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Yn&2)!==0){var y=m.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),m.pending=o,o=Gi(s),Mu(s,null,u),o}return Du(s,m,o,u),Gi(s)}function Gn(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,Fi(s,u)}}function si(s,o){var u=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var y=null,N=null;if(u=u.firstBaseUpdate,u!==null){do{var M={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};N===null?y=N=M:N=N.next=M,u=u.next}while(u!==null);N===null?y=N=o:N=N.next=o}else y=N=o;u={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:N,shared:m.shared,callbacks:m.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}var Pi=!1;function lr(){if(Pi){var s=w;if(s!==null)throw s}}function Yr(s,o,u,m){Pi=!1;var y=s.updateQueue;ut=!1;var N=y.firstBaseUpdate,M=y.lastBaseUpdate,K=y.shared.pending;if(K!==null){y.shared.pending=null;var xe=K,Pe=xe.next;xe.next=null,M===null?N=Pe:M.next=Pe,M=xe;var He=s.alternate;He!==null&&(He=He.updateQueue,K=He.lastBaseUpdate,K!==M&&(K===null?He.firstBaseUpdate=Pe:K.next=Pe,He.lastBaseUpdate=xe))}if(N!==null){var Ye=y.baseState;M=0,He=Pe=xe=null,K=N;do{var Me=K.lane&-536870913,Oe=Me!==K.lane;if(Oe?(wn&Me)===Me:(m&Me)===Me){Me!==0&&Me===g&&(Pi=!0),He!==null&&(He=He.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var gt=s,$t=K;Me=o;var dr=u;switch($t.tag){case 1:if(gt=$t.payload,typeof gt=="function"){Ye=gt.call(dr,Ye,Me);break e}Ye=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=$t.payload,Me=typeof gt=="function"?gt.call(dr,Ye,Me):gt,Me==null)break e;Ye=v({},Ye,Me);break e;case 2:ut=!0}}Me=K.callback,Me!==null&&(s.flags|=64,Oe&&(s.flags|=8192),Oe=y.callbacks,Oe===null?y.callbacks=[Me]:Oe.push(Me))}else Oe={lane:Me,tag:K.tag,payload:K.payload,callback:K.callback,next:null},He===null?(Pe=He=Oe,xe=Ye):He=He.next=Oe,M|=Me;if(K=K.next,K===null){if(K=y.shared.pending,K===null)break;Oe=K,K=Oe.next,Oe.next=null,y.lastBaseUpdate=Oe,y.shared.pending=null}}while(!0);He===null&&(xe=Ye),y.baseState=xe,y.firstBaseUpdate=Pe,y.lastBaseUpdate=He,N===null&&(y.shared.lanes=0),Uc|=M,s.lanes=M,s.memoizedState=Ye}}function Yi(s,o){if(typeof s!="function")throw Error(r(191,s));s.call(o)}function Kr(s,o){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)Yi(u[s],o)}var fn=J(null),In=J(0);function Nr(s,o){s=ec,X(In,s),X(fn,o),ec=s|o.baseLanes}function On(){X(In,ec),X(fn,fn.current)}function ai(){ec=In.current,q(fn),q(In)}var Ar=J(null),Ln=null;function Br(s){var o=s.alternate;X(En,En.current&1),X(Ar,s),Ln===null&&(o===null||fn.current!==null||o.memoizedState!==null)&&(Ln=s)}function Wn(s){X(En,En.current),X(Ar,s),Ln===null&&(Ln=s)}function Qr(s){s.tag===22?(X(En,En.current),X(Ar,s),Ln===null&&(Ln=s)):Xr()}function Xr(){X(En,En.current),X(Ar,Ar.current)}function Zn(s){q(Ar),Ln===s&&(Ln=null),q(En)}var En=J(0);function Ki(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||_x(u)||Nx(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Lr=0,kt=null,Ft=null,Rn=null,Ss=!1,ca=!1,ds=!1,Jr=0,sl=0,al=null,Id=0;function cr(){throw Error(r(321))}function Yh(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!Ci(s[u],o[u]))return!1;return!0}function Kh(s,o,u,m,y,N){return Lr=N,kt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Q.H=s===null||s.memoizedState===null?g2:k0,ds=!1,N=u(m,y),ds=!1,ca&&(N=Eo(o,u,m,y)),Ld(s),N}function Ld(s){Q.H=rf;var o=Ft!==null&&Ft.next!==null;if(Lr=0,Rn=Ft=kt=null,Ss=!1,sl=0,al=null,o)throw Error(r(300));s===null||vi||(s=s.dependencies,s!==null&&Ed(s)&&(vi=!0))}function Eo(s,o,u,m){kt=s;var y=0;do{if(ca&&(al=null),sl=0,ca=!1,25<=y)throw Error(r(301));if(y+=1,Rn=Ft=null,s.updateQueue!=null){var N=s.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}Q.H=x2,N=o(u,m)}while(ca);return N}function j0(){var s=Q.H,o=s.useState()[0];return o=typeof o.then=="function"?ol(o):o,s=s.useState()[0],(Ft!==null?Ft.memoizedState:null)!==s&&(kt.flags|=1024),o}function Qh(){var s=Jr!==0;return Jr=0,s}function Xh(s,o,u){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~u}function Rd(s){if(Ss){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Ss=!1}Lr=0,Rn=Ft=kt=null,ca=!1,sl=Jr=0,al=null}function xi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?kt.memoizedState=Rn=s:Rn=Rn.next=s,Rn}function Rr(){if(Ft===null){var s=kt.alternate;s=s!==null?s.memoizedState:null}else s=Ft.next;var o=Rn===null?kt.memoizedState:Rn.next;if(o!==null)Rn=o,Ft=s;else{if(s===null)throw kt.alternate===null?Error(r(467)):Error(r(310));Ft=s,s={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Rn===null?kt.memoizedState=Rn=s:Rn=Rn.next=s}return Rn}function Uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ol(s){var o=sl;return sl+=1,al===null&&(al=[]),s=Ve(al,s,o),o=kt,(Rn===null?o.memoizedState:Rn.next)===null&&(o=o.alternate,Q.H=o===null||o.memoizedState===null?g2:k0),s}function Mc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ol(s);if(s.$$typeof===z)return ki(s)}throw Error(r(438,String(s)))}function $l(s){var o=null,u=kt.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var m=kt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Uu(),kt.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(s),m=0;m<s;m++)u[m]=$;return o.index++,u}function to(s,o){return typeof o=="function"?o(s):o}function kd(s){var o=Rr();return Oc(o,Ft,s)}function Oc(s,o,u){var m=s.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=u;var y=s.baseQueue,N=m.pending;if(N!==null){if(y!==null){var M=y.next;y.next=N.next,N.next=M}o.baseQueue=y=N,m.pending=null}if(N=s.baseState,y===null)s.memoizedState=N;else{o=y.next;var K=M=null,xe=null,Pe=o,He=!1;do{var Ye=Pe.lane&-536870913;if(Ye!==Pe.lane?(wn&Ye)===Ye:(Lr&Ye)===Ye){var Me=Pe.revertLane;if(Me===0)xe!==null&&(xe=xe.next={lane:0,revertLane:0,gesture:null,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),Ye===g&&(He=!0);else if((Lr&Me)===Me){Pe=Pe.next,Me===g&&(He=!0);continue}else Ye={lane:0,revertLane:Pe.revertLane,gesture:null,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},xe===null?(K=xe=Ye,M=N):xe=xe.next=Ye,kt.lanes|=Me,Uc|=Me;Ye=Pe.action,ds&&u(N,Ye),N=Pe.hasEagerState?Pe.eagerState:u(N,Ye)}else Me={lane:Ye,revertLane:Pe.revertLane,gesture:Pe.gesture,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},xe===null?(K=xe=Me,M=N):xe=xe.next=Me,kt.lanes|=Ye,Uc|=Ye;Pe=Pe.next}while(Pe!==null&&Pe!==o);if(xe===null?M=N:xe.next=K,!Ci(N,s.memoizedState)&&(vi=!0,He&&(u=w,u!==null)))throw u;s.memoizedState=N,s.baseState=M,s.baseQueue=xe,m.lastRenderedState=N}return y===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function Pd(s){var o=Rr(),u=o.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var m=u.dispatch,y=u.pending,N=o.memoizedState;if(y!==null){u.pending=null;var M=y=y.next;do N=s(N,M.action),M=M.next;while(M!==y);Ci(N,o.memoizedState)||(vi=!0),o.memoizedState=N,o.baseQueue===null&&(o.baseState=N),u.lastRenderedState=N}return[N,m]}function Dd(s,o,u){var m=kt,y=Rr(),N=xn;if(N){if(u===void 0)throw Error(r(407));u=u()}else u=o();var M=!Ci((Ft||y).memoizedState,u);if(M&&(y.memoizedState=u,vi=!0),y=y.queue,E0(Zh.bind(null,m,y,s),[s]),y.getSnapshot!==o||M||Rn!==null&&Rn.memoizedState.tag&1){if(m.flags|=2048,Wl(9,{destroy:void 0},Jh.bind(null,m,y,u,o),null),vr===null)throw Error(r(349));N||(Lr&127)!==0||To(m,o,u)}return u}function To(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=kt.updateQueue,o===null?(o=Uu(),kt.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function Jh(s,o,u,m){o.value=u,o.getSnapshot=m,Mm(o)&&ef(s)}function Zh(s,o,u){return u(function(){Mm(o)&&ef(s)})}function Mm(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!Ci(s,u)}catch{return!0}}function ef(s){var o=So(s,2);o!==null&&ma(o,s,2)}function ll(s){var o=xi();if(typeof s=="function"){var u=s;if(s=u(),ds){zt(!0);try{u()}finally{zt(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:s},o}function Om(s,o,u,m){return s.baseState=u,Oc(s,Ft,typeof m=="function"?m:to)}function Fm(s,o,u,m,y){if(Um(s))throw Error(r(485));if(s=o.action,s!==null){var N={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){N.listeners.push(M)}};Q.T!==null?u(!0):N.isTransition=!1,m(N),u=o.pending,u===null?(N.next=o.pending=N,qm(o,N)):(N.next=u.next,o.pending=u.next=N)}}function qm(s,o){var u=o.action,m=o.payload,y=s.state;if(o.isTransition){var N=Q.T,M={};Q.T=M;try{var K=u(y,m),xe=Q.S;xe!==null&&xe(M,K),tf(s,o,K)}catch(Pe){Gl(s,o,Pe)}finally{N!==null&&M.types!==null&&(N.types=M.types),Q.T=N}}else try{N=u(y,m),tf(s,o,N)}catch(Pe){Gl(s,o,Pe)}}function tf(s,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){Vm(s,o,m)},function(m){return Gl(s,o,m)}):Vm(s,o,u)}function Vm(s,o,u){o.status="fulfilled",o.value=u,Md(o),s.state=u,o=s.pending,o!==null&&(u=o.next,u===o?s.pending=null:(u=u.next,o.next=u,qm(s,u)))}function Gl(s,o,u){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=u,Md(o),o=o.next;while(o!==m)}s.action=null}function Md(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function zu(s,o){return o}function no(s,o){if(xn){var u=vr.formState;if(u!==null){e:{var m=kt;if(xn){if(gr){t:{for(var y=gr,N=Ir;y.nodeType!==8;){if(!N){y=null;break t}if(y=ro(y.nextSibling),y===null){y=null;break t}}N=y.data,y=N==="F!"||N==="F"?y:null}if(y){gr=ro(y.nextSibling),m=y.data==="F!";break e}}el(m)}m=!1}m&&(o=u[0])}}return u=xi(),u.memoizedState=u.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zu,lastRenderedState:o},u.queue=m,u=f2.bind(null,kt,m),m.dispatch=u,m=ll(!1),N=R0.bind(null,kt,!1,m.queue),m=xi(),y={state:o,dispatch:null,action:s,pending:null},m.queue=y,u=Fm.bind(null,kt,y,N,u),y.dispatch=u,m.memoizedState=s,[o,u,!1]}function Co(s){var o=Rr();return Io(o,Ft,s)}function Io(s,o,u){if(o=Oc(s,o,zu)[0],s=kd(to)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=ol(o)}catch(M){throw M===ye?le:M}else m=o;o=Rr();var y=o.queue,N=y.dispatch;return u!==o.memoizedState&&(kt.flags|=2048,Wl(9,{destroy:void 0},Od.bind(null,y,u),null)),[m,N,s]}function Od(s,o){s.action=o}function Fd(s){var o=Rr(),u=Ft;if(u!==null)return Io(o,u,s);Rr(),o=o.memoizedState,u=Rr();var m=u.queue.dispatch;return u.memoizedState=s,[o,m,!1]}function Wl(s,o,u,m){return s={tag:s,create:u,deps:m,inst:o,next:null},o=kt.updateQueue,o===null&&(o=Uu(),kt.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=s.next=s:(m=u.next,u.next=s,s.next=m,o.lastEffect=s),s}function Bm(){return Rr().memoizedState}function Fc(s,o,u,m){var y=xi();kt.flags|=s,y.memoizedState=Wl(1|o,{destroy:void 0},u,m===void 0?null:m)}function qc(s,o,u,m){var y=Rr();m=m===void 0?null:m;var N=y.memoizedState.inst;Ft!==null&&m!==null&&Yh(m,Ft.memoizedState.deps)?y.memoizedState=Wl(o,N,u,m):(kt.flags|=s,y.memoizedState=Wl(1|o,N,u,m))}function Zy(s,o){Fc(8390656,8,s,o)}function E0(s,o){qc(2048,8,s,o)}function $j(s){kt.flags|=4;var o=kt.updateQueue;if(o===null)o=Uu(),kt.updateQueue=o,o.events=[s];else{var u=o.events;u===null?o.events=[s]:u.push(s)}}function e2(s){var o=Rr().memoizedState;return $j({ref:o,nextImpl:s}),function(){if((Yn&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function t2(s,o){return qc(4,2,s,o)}function n2(s,o){return qc(4,4,s,o)}function r2(s,o){if(typeof o=="function"){s=s();var u=o(s);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function i2(s,o,u){u=u!=null?u.concat([s]):null,qc(4,4,r2.bind(null,o,s),u)}function T0(){}function s2(s,o){var u=Rr();o=o===void 0?null:o;var m=u.memoizedState;return o!==null&&Yh(o,m[1])?m[0]:(u.memoizedState=[s,o],s)}function a2(s,o){var u=Rr();o=o===void 0?null:o;var m=u.memoizedState;if(o!==null&&Yh(o,m[1]))return m[0];if(m=s(),ds){zt(!0);try{s()}finally{zt(!1)}}return u.memoizedState=[m,o],m}function C0(s,o,u){return u===void 0||(Lr&1073741824)!==0&&(wn&261930)===0?s.memoizedState=o:(s.memoizedState=u,s=ob(),kt.lanes|=s,Uc|=s,u)}function o2(s,o,u,m){return Ci(u,o)?u:fn.current!==null?(s=C0(s,u,m),Ci(s,o)||(vi=!0),s):(Lr&42)===0||(Lr&1073741824)!==0&&(wn&261930)===0?(vi=!0,s.memoizedState=u):(s=ob(),kt.lanes|=s,Uc|=s,o)}function l2(s,o,u,m,y){var N=ae.p;ae.p=N!==0&&8>N?N:8;var M=Q.T,K={};Q.T=K,R0(s,!1,o,u);try{var xe=y(),Pe=Q.S;if(Pe!==null&&Pe(K,xe),xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){var He=G(xe,m);nf(s,o,He,Ra(s))}else nf(s,o,m,Ra(s))}catch(Ye){nf(s,o,{then:function(){},status:"rejected",reason:Ye},Ra())}finally{ae.p=N,M!==null&&K.types!==null&&(M.types=K.types),Q.T=M}}function Gj(){}function I0(s,o,u,m){if(s.tag!==5)throw Error(r(476));var y=c2(s).queue;l2(s,y,o,me,u===null?Gj:function(){return u2(s),u(m)})}function c2(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:me},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:u},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function u2(s){var o=c2(s);o.next===null&&(o=s.alternate.memoizedState),nf(s,o.next.queue,{},Ra())}function L0(){return ki(bf)}function d2(){return Rr().memoizedState}function h2(){return Rr().memoizedState}function Wj(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var u=Ra();s=Ht(u);var m=ln(o,s,u);m!==null&&(ma(m,o,u),Gn(m,o,u)),o={cache:Dc()},s.payload=o;return}o=o.return}}function Yj(s,o,u){var m=Ra();u={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Um(s)?m2(o,u):(u=yd(s,o,u,m),u!==null&&(ma(u,s,m),p2(u,o,m)))}function f2(s,o,u){var m=Ra();nf(s,o,u,m)}function nf(s,o,u,m){var y={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Um(s))m2(o,y);else{var N=s.alternate;if(s.lanes===0&&(N===null||N.lanes===0)&&(N=o.lastRenderedReducer,N!==null))try{var M=o.lastRenderedState,K=N(M,u);if(y.hasEagerState=!0,y.eagerState=K,Ci(K,M))return Du(s,o,y,0),vr===null&&Pu(),!1}catch{}finally{}if(u=yd(s,o,y,m),u!==null)return ma(u,s,m),p2(u,o,m),!0}return!1}function R0(s,o,u,m){if(m={lane:2,revertLane:ux(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Um(s)){if(o)throw Error(r(479))}else o=yd(s,u,m,2),o!==null&&ma(o,s,2)}function Um(s){var o=s.alternate;return s===kt||o!==null&&o===kt}function m2(s,o){ca=Ss=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function p2(s,o,u){if((u&4194048)!==0){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,Fi(s,u)}}var rf={readContext:ki,use:Mc,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useLayoutEffect:cr,useInsertionEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useSyncExternalStore:cr,useId:cr,useHostTransitionStatus:cr,useFormState:cr,useActionState:cr,useOptimistic:cr,useMemoCache:cr,useCacheRefresh:cr};rf.useEffectEvent=cr;var g2={readContext:ki,use:Mc,useCallback:function(s,o){return xi().memoizedState=[s,o===void 0?null:o],s},useContext:ki,useEffect:Zy,useImperativeHandle:function(s,o,u){u=u!=null?u.concat([s]):null,Fc(4194308,4,r2.bind(null,o,s),u)},useLayoutEffect:function(s,o){return Fc(4194308,4,s,o)},useInsertionEffect:function(s,o){Fc(4,2,s,o)},useMemo:function(s,o){var u=xi();o=o===void 0?null:o;var m=s();if(ds){zt(!0);try{s()}finally{zt(!1)}}return u.memoizedState=[m,o],m},useReducer:function(s,o,u){var m=xi();if(u!==void 0){var y=u(o);if(ds){zt(!0);try{u(o)}finally{zt(!1)}}}else y=o;return m.memoizedState=m.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},m.queue=s,s=s.dispatch=Yj.bind(null,kt,s),[m.memoizedState,s]},useRef:function(s){var o=xi();return s={current:s},o.memoizedState=s},useState:function(s){s=ll(s);var o=s.queue,u=f2.bind(null,kt,o);return o.dispatch=u,[s.memoizedState,u]},useDebugValue:T0,useDeferredValue:function(s,o){var u=xi();return C0(u,s,o)},useTransition:function(){var s=ll(!1);return s=l2.bind(null,kt,s.queue,!0,!1),xi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,u){var m=kt,y=xi();if(xn){if(u===void 0)throw Error(r(407));u=u()}else{if(u=o(),vr===null)throw Error(r(349));(wn&127)!==0||To(m,o,u)}y.memoizedState=u;var N={value:u,getSnapshot:o};return y.queue=N,Zy(Zh.bind(null,m,N,s),[s]),m.flags|=2048,Wl(9,{destroy:void 0},Jh.bind(null,m,N,u,o),null),u},useId:function(){var s=xi(),o=vr.identifierPrefix;if(xn){var u=oa,m=aa;u=(m&~(1<<32-en(m)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Jr++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=Id++,o="_"+o+"r_"+u.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:L0,useFormState:no,useActionState:no,useOptimistic:function(s){var o=xi();o.memoizedState=o.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=R0.bind(null,kt,!0,u),u.dispatch=o,[s,o]},useMemoCache:$l,useCacheRefresh:function(){return xi().memoizedState=Wj.bind(null,kt)},useEffectEvent:function(s){var o=xi(),u={impl:s};return o.memoizedState=u,function(){if((Yn&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},k0={readContext:ki,use:Mc,useCallback:s2,useContext:ki,useEffect:E0,useImperativeHandle:i2,useInsertionEffect:t2,useLayoutEffect:n2,useMemo:a2,useReducer:kd,useRef:Bm,useState:function(){return kd(to)},useDebugValue:T0,useDeferredValue:function(s,o){var u=Rr();return o2(u,Ft.memoizedState,s,o)},useTransition:function(){var s=kd(to)[0],o=Rr().memoizedState;return[typeof s=="boolean"?s:ol(s),o]},useSyncExternalStore:Dd,useId:d2,useHostTransitionStatus:L0,useFormState:Co,useActionState:Co,useOptimistic:function(s,o){var u=Rr();return Om(u,Ft,s,o)},useMemoCache:$l,useCacheRefresh:h2};k0.useEffectEvent=e2;var x2={readContext:ki,use:Mc,useCallback:s2,useContext:ki,useEffect:E0,useImperativeHandle:i2,useInsertionEffect:t2,useLayoutEffect:n2,useMemo:a2,useReducer:Pd,useRef:Bm,useState:function(){return Pd(to)},useDebugValue:T0,useDeferredValue:function(s,o){var u=Rr();return Ft===null?C0(u,s,o):o2(u,Ft.memoizedState,s,o)},useTransition:function(){var s=Pd(to)[0],o=Rr().memoizedState;return[typeof s=="boolean"?s:ol(s),o]},useSyncExternalStore:Dd,useId:d2,useHostTransitionStatus:L0,useFormState:Fd,useActionState:Fd,useOptimistic:function(s,o){var u=Rr();return Ft!==null?Om(u,Ft,s,o):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:$l,useCacheRefresh:h2};x2.useEffectEvent=e2;function P0(s,o,u,m){o=s.memoizedState,u=u(m,o),u=u==null?o:v({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var D0={enqueueSetState:function(s,o,u){s=s._reactInternals;var m=Ra(),y=Ht(m);y.payload=o,u!=null&&(y.callback=u),o=ln(s,y,m),o!==null&&(ma(o,s,m),Gn(o,s,m))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var m=Ra(),y=Ht(m);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=ln(s,y,m),o!==null&&(ma(o,s,m),Gn(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=Ra(),m=Ht(u);m.tag=2,o!=null&&(m.callback=o),o=ln(s,m,u),o!==null&&(ma(o,s,u),Gn(o,s,u))}};function v2(s,o,u,m,y,N,M){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,N,M):o.prototype&&o.prototype.isPureReactComponent?!wo(u,m)||!wo(y,N):!0}function y2(s,o,u,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==s&&D0.enqueueReplaceState(o,o.state,null)}function Hu(s,o){var u=o;if("ref"in o){u={};for(var m in o)m!=="ref"&&(u[m]=o[m])}if(s=s.defaultProps){u===o&&(u=v({},u));for(var y in s)u[y]===void 0&&(u[y]=s[y])}return u}function b2(s){ku(s)}function w2(s){console.error(s)}function _2(s){ku(s)}function zm(s,o){try{var u=s.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function N2(s,o,u){try{var m=s.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function M0(s,o,u){return u=Ht(u),u.tag=3,u.payload={element:null},u.callback=function(){zm(s,o)},u}function A2(s){return s=Ht(s),s.tag=3,s}function S2(s,o,u,m){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var N=m.value;s.payload=function(){return y(N)},s.callback=function(){N2(o,u,m)}}var M=u.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(s.callback=function(){N2(o,u,m),typeof y!="function"&&(zc===null?zc=new Set([this]):zc.add(this));var K=m.stack;this.componentDidCatch(m.value,{componentStack:K!==null?K:""})})}function Kj(s,o,u,m,y){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=u.alternate,o!==null&&rl(o,u,y,!0),u=Ar.current,u!==null){switch(u.tag){case 31:case 13:return Ln===null?tp():u.alternate===null&&Zr===0&&(Zr=3),u.flags&=-257,u.flags|=65536,u.lanes=y,m===Ne?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([m]):o.add(m),ox(s,m,y)),!1;case 22:return u.flags|=65536,m===Ne?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([m]):u.add(m)),ox(s,m,y)),!1}throw Error(r(435,u.tag))}return ox(s,m,y),tp(),!1}if(xn)return o=Ar.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,m!==Ca&&(s=Error(r(422),{cause:m}),kc(ra(s,u)))):(m!==Ca&&(o=Error(r(423),{cause:m}),kc(ra(o,u))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,m=ra(m,u),y=M0(s.stateNode,m,y),si(s,y),Zr!==4&&(Zr=2)),!1;var N=Error(r(520),{cause:m});if(N=ra(N,u),hf===null?hf=[N]:hf.push(N),Zr!==4&&(Zr=2),o===null)return!0;m=ra(m,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,s=y&-y,u.lanes|=s,s=M0(u.stateNode,m,s),si(u,s),!1;case 1:if(o=u.type,N=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(zc===null||!zc.has(N))))return u.flags|=65536,y&=-y,u.lanes|=y,y=A2(y),S2(y,s,u,m),si(u,y),!1}u=u.return}while(u!==null);return!1}var O0=Error(r(461)),vi=!1;function hs(s,o,u,m){o.child=s===null?sn(o,null,u,m):xr(o,s.child,u,m)}function j2(s,o,u,m,y){u=u.render;var N=o.ref;if("ref"in m){var M={};for(var K in m)K!=="ref"&&(M[K]=m[K])}else M=m;return il(o),m=Kh(s,o,u,M,N,y),K=Qh(),s!==null&&!vi?(Xh(s,o,y),Yl(s,o,y)):(xn&&K&&$h(o),o.flags|=1,hs(s,o,m,y),o.child)}function E2(s,o,u,m,y){if(s===null){var N=u.type;return typeof N=="function"&&!wd(N)&&N.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=N,T2(s,o,N,m,y)):(s=Ic(u.type,null,m,o,o.mode,y),s.ref=o.ref,s.return=o,o.child=s)}if(N=s.child,!$0(s,y)){var M=N.memoizedProps;if(u=u.compare,u=u!==null?u:wo,u(M,m)&&s.ref===o.ref)return Yl(s,o,y)}return o.flags|=1,s=na(N,m),s.ref=o.ref,s.return=o,o.child=s}function T2(s,o,u,m,y){if(s!==null){var N=s.memoizedProps;if(wo(N,m)&&s.ref===o.ref)if(vi=!1,o.pendingProps=m=N,$0(s,y))(s.flags&131072)!==0&&(vi=!0);else return o.lanes=s.lanes,Yl(s,o,y)}return F0(s,o,u,m,y)}function C2(s,o,u,m){var y=m.children,N=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(N=N!==null?N.baseLanes|u:u,s!==null){for(m=o.child=s.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;m=y&~N}else m=0,o.child=null;return I2(s,o,N,u,m)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&te(o,N!==null?N.cachePool:null),N!==null?Nr(o,N):On(),Qr(o);else return m=o.lanes=536870912,I2(s,o,N!==null?N.baseLanes|u:u,u,m)}else N!==null?(te(o,N.cachePool),Nr(o,N),Xr(),o.memoizedState=null):(s!==null&&te(o,null),On(),Xr());return hs(s,o,y,u),o.child}function sf(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function I2(s,o,u,m,y){var N=Z();return N=N===null?null:{parent:Vr._currentValue,pool:N},o.memoizedState={baseLanes:u,cachePool:N},s!==null&&te(o,null),On(),Qr(o),s!==null&&rl(s,o,m,!0),o.childLanes=y,null}function Hm(s,o){return o=Gm({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function L2(s,o,u){return xr(o,s.child,null,u),s=Hm(o,o.pendingProps),s.flags|=2,Zn(o),o.memoizedState=null,s}function Qj(s,o,u){var m=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(xn){if(m.mode==="hidden")return s=Hm(o,m),o.lanes=536870912,sf(null,s);if(Wn(o),(s=gr)?(s=zb(s,Ir),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Zo!==null?{id:aa,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},u=_d(s),u.return=o,o.child=u,Li=o,gr=null)):s=null,s===null)throw el(o);return o.lanes=536870912,null}return Hm(o,m)}var N=s.memoizedState;if(N!==null){var M=N.dehydrated;if(Wn(o),y)if(o.flags&256)o.flags&=-257,o=L2(s,o,u);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(r(558));else if(vi||rl(s,o,u,!1),y=(u&s.childLanes)!==0,vi||y){if(m=vr,m!==null&&(M=qi(m,u),M!==0&&M!==N.retryLane))throw N.retryLane=M,So(s,M),ma(m,s,M),O0;tp(),o=L2(s,o,u)}else s=N.treeContext,gr=ro(M.nextSibling),Li=o,xn=!0,us=null,Ir=!1,s!==null&&Pm(o,s),o=Hm(o,m),o.flags|=4096;return o}return s=na(s.child,{mode:m.mode,children:m.children}),s.ref=o.ref,o.child=s,s.return=o,s}function $m(s,o){var u=o.ref;if(u===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(s===null||s.ref!==u)&&(o.flags|=4194816)}}function F0(s,o,u,m,y){return il(o),u=Kh(s,o,u,m,void 0,y),m=Qh(),s!==null&&!vi?(Xh(s,o,y),Yl(s,o,y)):(xn&&m&&$h(o),o.flags|=1,hs(s,o,u,y),o.child)}function R2(s,o,u,m,y,N){return il(o),o.updateQueue=null,u=Eo(o,m,u,y),Ld(s),m=Qh(),s!==null&&!vi?(Xh(s,o,N),Yl(s,o,N)):(xn&&m&&$h(o),o.flags|=1,hs(s,o,u,N),o.child)}function k2(s,o,u,m,y){if(il(o),o.stateNode===null){var N=Ii,M=u.contextType;typeof M=="object"&&M!==null&&(N=ki(M)),N=new u(m,N),o.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=D0,o.stateNode=N,N._reactInternals=o,N=o.stateNode,N.props=m,N.state=o.memoizedState,N.refs={},it(o),M=u.contextType,N.context=typeof M=="object"&&M!==null?ki(M):Ii,N.state=o.memoizedState,M=u.getDerivedStateFromProps,typeof M=="function"&&(P0(o,u,M,m),N.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(M=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),M!==N.state&&D0.enqueueReplaceState(N,N.state,null),Yr(o,m,N,y),lr(),N.state=o.memoizedState),typeof N.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(s===null){N=o.stateNode;var K=o.memoizedProps,xe=Hu(u,K);N.props=xe;var Pe=N.context,He=u.contextType;M=Ii,typeof He=="object"&&He!==null&&(M=ki(He));var Ye=u.getDerivedStateFromProps;He=typeof Ye=="function"||typeof N.getSnapshotBeforeUpdate=="function",K=o.pendingProps!==K,He||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(K||Pe!==M)&&y2(o,N,m,M),ut=!1;var Me=o.memoizedState;N.state=Me,Yr(o,m,N,y),lr(),Pe=o.memoizedState,K||Me!==Pe||ut?(typeof Ye=="function"&&(P0(o,u,Ye,m),Pe=o.memoizedState),(xe=ut||v2(o,u,xe,m,Me,Pe,M))?(He||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(o.flags|=4194308)):(typeof N.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=Pe),N.props=m,N.state=Pe,N.context=M,m=xe):(typeof N.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{N=o.stateNode,_r(s,o),M=o.memoizedProps,He=Hu(u,M),N.props=He,Ye=o.pendingProps,Me=N.context,Pe=u.contextType,xe=Ii,typeof Pe=="object"&&Pe!==null&&(xe=ki(Pe)),K=u.getDerivedStateFromProps,(Pe=typeof K=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(M!==Ye||Me!==xe)&&y2(o,N,m,xe),ut=!1,Me=o.memoizedState,N.state=Me,Yr(o,m,N,y),lr();var Oe=o.memoizedState;M!==Ye||Me!==Oe||ut||s!==null&&s.dependencies!==null&&Ed(s.dependencies)?(typeof K=="function"&&(P0(o,u,K,m),Oe=o.memoizedState),(He=ut||v2(o,u,He,m,Me,Oe,xe)||s!==null&&s.dependencies!==null&&Ed(s.dependencies))?(Pe||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(m,Oe,xe),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(m,Oe,xe)),typeof N.componentDidUpdate=="function"&&(o.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof N.componentDidUpdate!="function"||M===s.memoizedProps&&Me===s.memoizedState||(o.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&Me===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Oe),N.props=m,N.state=Oe,N.context=xe,m=He):(typeof N.componentDidUpdate!="function"||M===s.memoizedProps&&Me===s.memoizedState||(o.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&Me===s.memoizedState||(o.flags|=1024),m=!1)}return N=m,$m(s,o),m=(o.flags&128)!==0,N||m?(N=o.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:N.render(),o.flags|=1,s!==null&&m?(o.child=xr(o,s.child,null,y),o.child=xr(o,null,u,y)):hs(s,o,u,y),o.memoizedState=N.state,s=o.child):s=Yl(s,o,y),s}function P2(s,o,u,m){return zl(),o.flags|=256,hs(s,o,u,m),o.child}var q0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function V0(s){return{baseLanes:s,cachePool:ue()}}function B0(s,o,u){return s=s!==null?s.childLanes&~u:0,o&&(s|=La),s}function D2(s,o,u){var m=o.pendingProps,y=!1,N=(o.flags&128)!==0,M;if((M=N)||(M=s!==null&&s.memoizedState===null?!1:(En.current&2)!==0),M&&(y=!0,o.flags&=-129),M=(o.flags&32)!==0,o.flags&=-33,s===null){if(xn){if(y?Br(o):Xr(),(s=gr)?(s=zb(s,Ir),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Zo!==null?{id:aa,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},u=_d(s),u.return=o,o.child=u,Li=o,gr=null)):s=null,s===null)throw el(o);return Nx(s)?o.lanes=32:o.lanes=536870912,null}var K=m.children;return m=m.fallback,y?(Xr(),y=o.mode,K=Gm({mode:"hidden",children:K},y),m=Jo(m,y,u,null),K.return=o,m.return=o,K.sibling=m,o.child=K,m=o.child,m.memoizedState=V0(u),m.childLanes=B0(s,M,u),o.memoizedState=q0,sf(null,m)):(Br(o),U0(o,K))}var xe=s.memoizedState;if(xe!==null&&(K=xe.dehydrated,K!==null)){if(N)o.flags&256?(Br(o),o.flags&=-257,o=z0(s,o,u)):o.memoizedState!==null?(Xr(),o.child=s.child,o.flags|=128,o=null):(Xr(),K=m.fallback,y=o.mode,m=Gm({mode:"visible",children:m.children},y),K=Jo(K,y,u,null),K.flags|=2,m.return=o,K.return=o,m.sibling=K,o.child=m,xr(o,s.child,null,u),m=o.child,m.memoizedState=V0(u),m.childLanes=B0(s,M,u),o.memoizedState=q0,o=sf(null,m));else if(Br(o),Nx(K)){if(M=K.nextSibling&&K.nextSibling.dataset,M)var Pe=M.dgst;M=Pe,m=Error(r(419)),m.stack="",m.digest=M,kc({value:m,source:null,stack:null}),o=z0(s,o,u)}else if(vi||rl(s,o,u,!1),M=(u&s.childLanes)!==0,vi||M){if(M=vr,M!==null&&(m=qi(M,u),m!==0&&m!==xe.retryLane))throw xe.retryLane=m,So(s,m),ma(M,s,m),O0;_x(K)||tp(),o=z0(s,o,u)}else _x(K)?(o.flags|=192,o.child=s.child,o=null):(s=xe.treeContext,gr=ro(K.nextSibling),Li=o,xn=!0,us=null,Ir=!1,s!==null&&Pm(o,s),o=U0(o,m.children),o.flags|=4096);return o}return y?(Xr(),K=m.fallback,y=o.mode,xe=s.child,Pe=xe.sibling,m=na(xe,{mode:"hidden",children:m.children}),m.subtreeFlags=xe.subtreeFlags&65011712,Pe!==null?K=na(Pe,K):(K=Jo(K,y,u,null),K.flags|=2),K.return=o,m.return=o,m.sibling=K,o.child=m,sf(null,m),m=o.child,K=s.child.memoizedState,K===null?K=V0(u):(y=K.cachePool,y!==null?(xe=Vr._currentValue,y=y.parent!==xe?{parent:xe,pool:xe}:y):y=ue(),K={baseLanes:K.baseLanes|u,cachePool:y}),m.memoizedState=K,m.childLanes=B0(s,M,u),o.memoizedState=q0,sf(s.child,m)):(Br(o),u=s.child,s=u.sibling,u=na(u,{mode:"visible",children:m.children}),u.return=o,u.sibling=null,s!==null&&(M=o.deletions,M===null?(o.deletions=[s],o.flags|=16):M.push(s)),o.child=u,o.memoizedState=null,u)}function U0(s,o){return o=Gm({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Gm(s,o){return s=Wi(22,s,null,o),s.lanes=0,s}function z0(s,o,u){return xr(o,s.child,null,u),s=U0(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function M2(s,o,u){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),Pc(s.return,o,u)}function H0(s,o,u,m,y,N){var M=s.memoizedState;M===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:y,treeForkCount:N}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=m,M.tail=u,M.tailMode=y,M.treeForkCount=N)}function O2(s,o,u){var m=o.pendingProps,y=m.revealOrder,N=m.tail;m=m.children;var M=En.current,K=(M&2)!==0;if(K?(M=M&1|2,o.flags|=128):M&=1,X(En,M),hs(s,o,m,u),m=xn?qu:0,!K&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&M2(s,u,o);else if(s.tag===19)M2(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(u=o.child,y=null;u!==null;)s=u.alternate,s!==null&&Ki(s)===null&&(y=u),u=u.sibling;u=y,u===null?(y=o.child,o.child=null):(y=u.sibling,u.sibling=null),H0(o,!1,y,u,N,m);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=o.child,o.child=null;y!==null;){if(s=y.alternate,s!==null&&Ki(s)===null){o.child=y;break}s=y.sibling,y.sibling=u,u=y,y=s}H0(o,!0,u,null,N,m);break;case"together":H0(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function Yl(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Uc|=o.lanes,(u&o.childLanes)===0)if(s!==null){if(rl(s,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(r(153));if(o.child!==null){for(s=o.child,u=na(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=na(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function $0(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Ed(s)))}function Xj(s,o,u){switch(o.tag){case 3:Le(o,o.stateNode.containerInfo),nl(o,Vr,s.memoizedState.cache),zl();break;case 27:case 5:Be(o);break;case 4:Le(o,o.stateNode.containerInfo);break;case 10:nl(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Wn(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Br(o),o.flags|=128,null):(u&o.child.childLanes)!==0?D2(s,o,u):(Br(o),s=Yl(s,o,u),s!==null?s.sibling:null);Br(o);break;case 19:var y=(s.flags&128)!==0;if(m=(u&o.childLanes)!==0,m||(rl(s,o,u,!1),m=(u&o.childLanes)!==0),y){if(m)return O2(s,o,u);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),X(En,En.current),m)break;return null;case 22:return o.lanes=0,C2(s,o,u,o.pendingProps);case 24:nl(o,Vr,s.memoizedState.cache)}return Yl(s,o,u)}function F2(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps)vi=!0;else{if(!$0(s,u)&&(o.flags&128)===0)return vi=!1,Xj(s,o,u);vi=(s.flags&131072)!==0}else vi=!1,xn&&(o.flags&1048576)!==0&&km(o,qu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(s=Ce(o.elementType),o.type=s,typeof s=="function")wd(s)?(m=Hu(s,m),o.tag=1,o=k2(null,o,s,m,u)):(o.tag=0,o=F0(null,o,s,m,u));else{if(s!=null){var y=s.$$typeof;if(y===B){o.tag=11,o=j2(null,o,s,m,u);break e}else if(y===V){o.tag=14,o=E2(null,o,s,m,u);break e}}throw o=oe(s)||s,Error(r(306,o,""))}}return o;case 0:return F0(s,o,o.type,o.pendingProps,u);case 1:return m=o.type,y=Hu(m,o.pendingProps),k2(s,o,m,y,u);case 3:e:{if(Le(o,o.stateNode.containerInfo),s===null)throw Error(r(387));m=o.pendingProps;var N=o.memoizedState;y=N.element,_r(s,o),Yr(o,m,null,u);var M=o.memoizedState;if(m=M.cache,nl(o,Vr,m),m!==N.cache&&Hl(o,[Vr],u,!0),lr(),m=M.element,N.isDehydrated)if(N={element:m,isDehydrated:!1,cache:M.cache},o.updateQueue.baseState=N,o.memoizedState=N,o.flags&256){o=P2(s,o,m,u);break e}else if(m!==y){y=ra(Error(r(424)),o),kc(y),o=P2(s,o,m,u);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(gr=ro(s.firstChild),Li=o,xn=!0,us=null,Ir=!0,u=sn(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(zl(),m===y){o=Yl(s,o,u);break e}hs(s,o,m,u)}o=o.child}return o;case 26:return $m(s,o),s===null?(u=Kb(o.type,null,o.pendingProps,null))?o.memoizedState=u:xn||(u=o.type,s=o.pendingProps,m=lp(ge.current).createElement(u),m[Vn]=o,m[Xn]=s,fs(m,u,s),wr(m),o.stateNode=m):o.memoizedState=Kb(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Be(o),s===null&&xn&&(m=o.stateNode=Gb(o.type,o.pendingProps,ge.current),Li=o,Ir=!0,y=gr,Wc(o.type)?(Ax=y,gr=ro(m.firstChild)):gr=y),hs(s,o,o.pendingProps.children,u),$m(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&xn&&((y=m=gr)&&(m=E6(m,o.type,o.pendingProps,Ir),m!==null?(o.stateNode=m,Li=o,gr=ro(m.firstChild),Ir=!1,y=!0):y=!1),y||el(o)),Be(o),y=o.type,N=o.pendingProps,M=s!==null?s.memoizedProps:null,m=N.children,yx(y,N)?m=null:M!==null&&yx(y,M)&&(o.flags|=32),o.memoizedState!==null&&(y=Kh(s,o,j0,null,null,u),bf._currentValue=y),$m(s,o),hs(s,o,m,u),o.child;case 6:return s===null&&xn&&((s=u=gr)&&(u=T6(u,o.pendingProps,Ir),u!==null?(o.stateNode=u,Li=o,gr=null,s=!0):s=!1),s||el(o)),null;case 13:return D2(s,o,u);case 4:return Le(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=xr(o,null,m,u):hs(s,o,m,u),o.child;case 11:return j2(s,o,o.type,o.pendingProps,u);case 7:return hs(s,o,o.pendingProps,u),o.child;case 8:return hs(s,o,o.pendingProps.children,u),o.child;case 12:return hs(s,o,o.pendingProps.children,u),o.child;case 10:return m=o.pendingProps,nl(o,o.type,m.value),hs(s,o,m.children,u),o.child;case 9:return y=o.type._context,m=o.pendingProps.children,il(o),y=ki(y),m=m(y),o.flags|=1,hs(s,o,m,u),o.child;case 14:return E2(s,o,o.type,o.pendingProps,u);case 15:return T2(s,o,o.type,o.pendingProps,u);case 19:return O2(s,o,u);case 31:return Qj(s,o,u);case 22:return C2(s,o,u,o.pendingProps);case 24:return il(o),m=ki(Vr),s===null?(y=Z(),y===null&&(y=vr,N=Dc(),y.pooledCache=N,N.refCount++,N!==null&&(y.pooledCacheLanes|=u),y=N),o.memoizedState={parent:m,cache:y},it(o),nl(o,Vr,y)):((s.lanes&u)!==0&&(_r(s,o),Yr(o,null,null,u),lr()),y=s.memoizedState,N=o.memoizedState,y.parent!==m?(y={parent:m,cache:m},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),nl(o,Vr,m)):(m=N.cache,nl(o,Vr,m),m!==y.cache&&Hl(o,[Vr],u,!0))),hs(s,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Kl(s){s.flags|=4}function G0(s,o,u,m,y){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(db())s.flags|=8192;else throw qe=Ne,Ie}else s.flags&=-16777217}function q2(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!e5(o))if(db())s.flags|=8192;else throw qe=Ne,Ie}function Wm(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Ys():536870912,s.lanes|=o,Ud|=o)}function af(s,o){if(!xn)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Sr(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,m=0;if(o)for(var y=s.child;y!==null;)u|=y.lanes|y.childLanes,m|=y.subtreeFlags&65011712,m|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)u|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=m,s.childLanes=u,o}function Jj(s,o,u){var m=o.pendingProps;switch(Sd(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sr(o),null;case 1:return Sr(o),null;case 3:return u=o.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),la(Vr),ke(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Ri(o)?Kl(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Wh())),Sr(o),null;case 26:var y=o.type,N=o.memoizedState;return s===null?(Kl(o),N!==null?(Sr(o),q2(o,N)):(Sr(o),G0(o,y,null,m,u))):N?N!==s.memoizedState?(Kl(o),Sr(o),q2(o,N)):(Sr(o),o.flags&=-16777217):(s=s.memoizedProps,s!==m&&Kl(o),Sr(o),G0(o,y,s,m,u)),null;case 27:if(Ze(o),u=ge.current,y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&Kl(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return Sr(o),null}s=ie.current,Ri(o)?Gh(o):(s=Gb(y,m,u),o.stateNode=s,Kl(o))}return Sr(o),null;case 5:if(Ze(o),y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&Kl(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return Sr(o),null}if(N=ie.current,Ri(o))Gh(o);else{var M=lp(ge.current);switch(N){case 1:N=M.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:N=M.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":N=M.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":N=M.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":N=M.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof m.is=="string"?M.createElement("select",{is:m.is}):M.createElement("select"),m.multiple?N.multiple=!0:m.size&&(N.size=m.size);break;default:N=typeof m.is=="string"?M.createElement(y,{is:m.is}):M.createElement(y)}}N[Vn]=o,N[Xn]=m;e:for(M=o.child;M!==null;){if(M.tag===5||M.tag===6)N.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===o)break e;for(;M.sibling===null;){if(M.return===null||M.return===o)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}o.stateNode=N;e:switch(fs(N,y,m),y){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Kl(o)}}return Sr(o),G0(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,u),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==m&&Kl(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(r(166));if(s=ge.current,Ri(o)){if(s=o.stateNode,u=o.memoizedProps,m=null,y=Li,y!==null)switch(y.tag){case 27:case 5:m=y.memoizedProps}s[Vn]=o,s=!!(s.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||Db(s.nodeValue,u)),s||el(o,!0)}else s=lp(s).createTextNode(m),s[Vn]=o,o.stateNode=s}return Sr(o),null;case 31:if(u=o.memoizedState,s===null||s.memoizedState!==null){if(m=Ri(o),u!==null){if(s===null){if(!m)throw Error(r(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Vn]=o}else zl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Sr(o),s=!1}else u=Wh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return o.flags&256?(Zn(o),o):(Zn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Sr(o),null;case 13:if(m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Ri(o),m!==null&&m.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Vn]=o}else zl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Sr(o),y=!1}else y=Wh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Zn(o),o):(Zn(o),null)}return Zn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=m!==null,s=s!==null&&s.memoizedState!==null,u&&(m=o.child,y=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(y=m.alternate.memoizedState.cachePool.pool),N=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(N=m.memoizedState.cachePool.pool),N!==y&&(m.flags|=2048)),u!==s&&u&&(o.child.flags|=8192),Wm(o,o.updateQueue),Sr(o),null);case 4:return ke(),s===null&&mx(o.stateNode.containerInfo),Sr(o),null;case 10:return la(o.type),Sr(o),null;case 19:if(q(En),m=o.memoizedState,m===null)return Sr(o),null;if(y=(o.flags&128)!==0,N=m.rendering,N===null)if(y)af(m,!1);else{if(Zr!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(N=Ki(s),N!==null){for(o.flags|=128,af(m,!1),s=N.updateQueue,o.updateQueue=s,Wm(o,s),o.subtreeFlags=0,s=u,u=o.child;u!==null;)Ou(u,s),u=u.sibling;return X(En,En.current&1|2),xn&&zs(o,m.treeForkCount),o.child}s=s.sibling}m.tail!==null&&pt()>Jm&&(o.flags|=128,y=!0,af(m,!1),o.lanes=4194304)}else{if(!y)if(s=Ki(N),s!==null){if(o.flags|=128,y=!0,s=s.updateQueue,o.updateQueue=s,Wm(o,s),af(m,!0),m.tail===null&&m.tailMode==="hidden"&&!N.alternate&&!xn)return Sr(o),null}else 2*pt()-m.renderingStartTime>Jm&&u!==536870912&&(o.flags|=128,y=!0,af(m,!1),o.lanes=4194304);m.isBackwards?(N.sibling=o.child,o.child=N):(s=m.last,s!==null?s.sibling=N:o.child=N,m.last=N)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=pt(),s.sibling=null,u=En.current,X(En,y?u&1|2:u&1),xn&&zs(o,m.treeForkCount),s):(Sr(o),null);case 22:case 23:return Zn(o),ai(),m=o.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(u&536870912)!==0&&(o.flags&128)===0&&(Sr(o),o.subtreeFlags&6&&(o.flags|=8192)):Sr(o),u=o.updateQueue,u!==null&&Wm(o,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048),s!==null&&q(Y),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),la(Vr),Sr(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function Zj(s,o){switch(Sd(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return la(Vr),ke(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Ze(o),null;case 31:if(o.memoizedState!==null){if(Zn(o),o.alternate===null)throw Error(r(340));zl()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(Zn(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(r(340));zl()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return q(En),null;case 4:return ke(),null;case 10:return la(o.type),null;case 22:case 23:return Zn(o),ai(),s!==null&&q(Y),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return la(Vr),null;case 25:return null;default:return null}}function V2(s,o){switch(Sd(o),o.tag){case 3:la(Vr),ke();break;case 26:case 27:case 5:Ze(o);break;case 4:ke();break;case 31:o.memoizedState!==null&&Zn(o);break;case 13:Zn(o);break;case 19:q(En);break;case 10:la(o.type);break;case 22:case 23:Zn(o),ai(),s!==null&&q(Y);break;case 24:la(Vr)}}function of(s,o){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&s)===s){m=void 0;var N=u.create,M=u.inst;m=N(),M.destroy=m}u=u.next}while(u!==y)}}catch(K){tr(o,o.return,K)}}function Vc(s,o,u){try{var m=o.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var N=y.next;m=N;do{if((m.tag&s)===s){var M=m.inst,K=M.destroy;if(K!==void 0){M.destroy=void 0,y=o;var xe=u,Pe=K;try{Pe()}catch(He){tr(y,xe,He)}}}m=m.next}while(m!==N)}}catch(He){tr(o,o.return,He)}}function B2(s){var o=s.updateQueue;if(o!==null){var u=s.stateNode;try{Kr(o,u)}catch(m){tr(s,s.return,m)}}}function U2(s,o,u){u.props=Hu(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(m){tr(s,o,m)}}function lf(s,o){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof u=="function"?s.refCleanup=u(m):u.current=m}}catch(y){tr(s,o,y)}}function cl(s,o){var u=s.ref,m=s.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(y){tr(s,o,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){tr(s,o,y)}else u.current=null}function z2(s){var o=s.type,u=s.memoizedProps,m=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break e;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(y){tr(s,s.return,y)}}function W0(s,o,u){try{var m=s.stateNode;w6(m,s.type,u,o),m[Xn]=o}catch(y){tr(s,s.return,y)}}function H2(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Wc(s.type)||s.tag===4}function Y0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||H2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Wc(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function K0(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(s),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ms));else if(m!==4&&(m===27&&Wc(s.type)&&(u=s.stateNode,o=null),s=s.child,s!==null))for(K0(s,o,u),s=s.sibling;s!==null;)K0(s,o,u),s=s.sibling}function Ym(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(m!==4&&(m===27&&Wc(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Ym(s,o,u),s=s.sibling;s!==null;)Ym(s,o,u),s=s.sibling}function $2(s){var o=s.stateNode,u=s.memoizedProps;try{for(var m=s.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);fs(o,m,u),o[Vn]=s,o[Xn]=u}catch(N){tr(s,s.return,N)}}var Ql=!1,yi=!1,Q0=!1,G2=typeof WeakSet=="function"?WeakSet:Set,Qi=null;function e6(s,o){if(s=s.containerInfo,xx=pp,s=No(s),Ja(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var y=m.anchorOffset,N=m.focusNode;m=m.focusOffset;try{u.nodeType,N.nodeType}catch{u=null;break e}var M=0,K=-1,xe=-1,Pe=0,He=0,Ye=s,Me=null;t:for(;;){for(var Oe;Ye!==u||y!==0&&Ye.nodeType!==3||(K=M+y),Ye!==N||m!==0&&Ye.nodeType!==3||(xe=M+m),Ye.nodeType===3&&(M+=Ye.nodeValue.length),(Oe=Ye.firstChild)!==null;)Me=Ye,Ye=Oe;for(;;){if(Ye===s)break t;if(Me===u&&++Pe===y&&(K=M),Me===N&&++He===m&&(xe=M),(Oe=Ye.nextSibling)!==null)break;Ye=Me,Me=Ye.parentNode}Ye=Oe}u=K===-1||xe===-1?null:{start:K,end:xe}}else u=null}u=u||{start:0,end:0}}else u=null;for(vx={focusedElem:s,selectionRange:u},pp=!1,Qi=o;Qi!==null;)if(o=Qi,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Qi=s;else for(;Qi!==null;){switch(o=Qi,N=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)y=s[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&N!==null){s=void 0,u=o,y=N.memoizedProps,N=N.memoizedState,m=u.stateNode;try{var gt=Hu(u.type,y);s=m.getSnapshotBeforeUpdate(gt,N),m.__reactInternalSnapshotBeforeUpdate=s}catch($t){tr(u,u.return,$t)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,u=s.nodeType,u===9)wx(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":wx(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=o.sibling,s!==null){s.return=o.return,Qi=s;break}Qi=o.return}}function W2(s,o,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:Jl(s,u),m&4&&of(5,u);break;case 1:if(Jl(s,u),m&4)if(s=u.stateNode,o===null)try{s.componentDidMount()}catch(M){tr(u,u.return,M)}else{var y=Hu(u.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(y,o,s.__reactInternalSnapshotBeforeUpdate)}catch(M){tr(u,u.return,M)}}m&64&&B2(u),m&512&&lf(u,u.return);break;case 3:if(Jl(s,u),m&64&&(s=u.updateQueue,s!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{Kr(s,o)}catch(M){tr(u,u.return,M)}}break;case 27:o===null&&m&4&&$2(u);case 26:case 5:Jl(s,u),o===null&&m&4&&z2(u),m&512&&lf(u,u.return);break;case 12:Jl(s,u);break;case 31:Jl(s,u),m&4&&Q2(s,u);break;case 13:Jl(s,u),m&4&&X2(s,u),m&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=c6.bind(null,u),C6(s,u))));break;case 22:if(m=u.memoizedState!==null||Ql,!m){o=o!==null&&o.memoizedState!==null||yi,y=Ql;var N=yi;Ql=m,(yi=o)&&!N?Zl(s,u,(u.subtreeFlags&8772)!==0):Jl(s,u),Ql=y,yi=N}break;case 30:break;default:Jl(s,u)}}function Y2(s){var o=s.alternate;o!==null&&(s.alternate=null,Y2(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&ba(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var kr=null,ua=!1;function Xl(s,o,u){for(u=u.child;u!==null;)K2(s,o,u),u=u.sibling}function K2(s,o,u){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(rn,u)}catch{}switch(u.tag){case 26:yi||cl(u,o),Xl(s,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:yi||cl(u,o);var m=kr,y=ua;Wc(u.type)&&(kr=u.stateNode,ua=!1),Xl(s,o,u),xf(u.stateNode),kr=m,ua=y;break;case 5:yi||cl(u,o);case 6:if(m=kr,y=ua,kr=null,Xl(s,o,u),kr=m,ua=y,kr!==null)if(ua)try{(kr.nodeType===9?kr.body:kr.nodeName==="HTML"?kr.ownerDocument.body:kr).removeChild(u.stateNode)}catch(N){tr(u,o,N)}else try{kr.removeChild(u.stateNode)}catch(N){tr(u,o,N)}break;case 18:kr!==null&&(ua?(s=kr,Bb(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Qd(s)):Bb(kr,u.stateNode));break;case 4:m=kr,y=ua,kr=u.stateNode.containerInfo,ua=!0,Xl(s,o,u),kr=m,ua=y;break;case 0:case 11:case 14:case 15:Vc(2,u,o),yi||Vc(4,u,o),Xl(s,o,u);break;case 1:yi||(cl(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"&&U2(u,o,m)),Xl(s,o,u);break;case 21:Xl(s,o,u);break;case 22:yi=(m=yi)||u.memoizedState!==null,Xl(s,o,u),yi=m;break;default:Xl(s,o,u)}}function Q2(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Qd(s)}catch(u){tr(o,o.return,u)}}}function X2(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Qd(s)}catch(u){tr(o,o.return,u)}}function t6(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new G2),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new G2),o;default:throw Error(r(435,s.tag))}}function Km(s,o){var u=t6(s);o.forEach(function(m){if(!u.has(m)){u.add(m);var y=u6.bind(null,s,m);m.then(y,y)}})}function da(s,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var y=u[m],N=s,M=o,K=M;e:for(;K!==null;){switch(K.tag){case 27:if(Wc(K.type)){kr=K.stateNode,ua=!1;break e}break;case 5:kr=K.stateNode,ua=!1;break e;case 3:case 4:kr=K.stateNode.containerInfo,ua=!0;break e}K=K.return}if(kr===null)throw Error(r(160));K2(N,M,y),kr=null,ua=!1,N=y.alternate,N!==null&&(N.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)J2(o,s),o=o.sibling}var Lo=null;function J2(s,o){var u=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:da(o,s),ha(s),m&4&&(Vc(3,s,s.return),of(3,s),Vc(5,s,s.return));break;case 1:da(o,s),ha(s),m&512&&(yi||u===null||cl(u,u.return)),m&64&&Ql&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var y=Lo;if(da(o,s),ha(s),m&512&&(yi||u===null||cl(u,u.return)),m&4){var N=u!==null?u.memoizedState:null;if(m=s.memoizedState,u===null)if(m===null)if(s.stateNode===null){e:{m=s.type,u=s.memoizedProps,y=y.ownerDocument||y;t:switch(m){case"title":N=y.getElementsByTagName("title")[0],(!N||N[Bi]||N[Vn]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=y.createElement(m),y.head.insertBefore(N,y.querySelector("head > title"))),fs(N,m,u),N[Vn]=s,wr(N),m=N;break e;case"link":var M=Jb("link","href",y).get(m+(u.href||""));if(M){for(var K=0;K<M.length;K++)if(N=M[K],N.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&N.getAttribute("rel")===(u.rel==null?null:u.rel)&&N.getAttribute("title")===(u.title==null?null:u.title)&&N.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){M.splice(K,1);break t}}N=y.createElement(m),fs(N,m,u),y.head.appendChild(N);break;case"meta":if(M=Jb("meta","content",y).get(m+(u.content||""))){for(K=0;K<M.length;K++)if(N=M[K],N.getAttribute("content")===(u.content==null?null:""+u.content)&&N.getAttribute("name")===(u.name==null?null:u.name)&&N.getAttribute("property")===(u.property==null?null:u.property)&&N.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&N.getAttribute("charset")===(u.charSet==null?null:u.charSet)){M.splice(K,1);break t}}N=y.createElement(m),fs(N,m,u),y.head.appendChild(N);break;default:throw Error(r(468,m))}N[Vn]=s,wr(N),m=N}s.stateNode=m}else Zb(y,s.type,s.stateNode);else s.stateNode=Xb(y,m,s.memoizedProps);else N!==m?(N===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):N.count--,m===null?Zb(y,s.type,s.stateNode):Xb(y,m,s.memoizedProps)):m===null&&s.stateNode!==null&&W0(s,s.memoizedProps,u.memoizedProps)}break;case 27:da(o,s),ha(s),m&512&&(yi||u===null||cl(u,u.return)),u!==null&&m&4&&W0(s,s.memoizedProps,u.memoizedProps);break;case 5:if(da(o,s),ha(s),m&512&&(yi||u===null||cl(u,u.return)),s.flags&32){y=s.stateNode;try{ri(y,"")}catch(gt){tr(s,s.return,gt)}}m&4&&s.stateNode!=null&&(y=s.memoizedProps,W0(s,y,u!==null?u.memoizedProps:y)),m&1024&&(Q0=!0);break;case 6:if(da(o,s),ha(s),m&4){if(s.stateNode===null)throw Error(r(162));m=s.memoizedProps,u=s.stateNode;try{u.nodeValue=m}catch(gt){tr(s,s.return,gt)}}break;case 3:if(dp=null,y=Lo,Lo=cp(o.containerInfo),da(o,s),Lo=y,ha(s),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Qd(o.containerInfo)}catch(gt){tr(s,s.return,gt)}Q0&&(Q0=!1,Z2(s));break;case 4:m=Lo,Lo=cp(s.stateNode.containerInfo),da(o,s),ha(s),Lo=m;break;case 12:da(o,s),ha(s);break;case 31:da(o,s),ha(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Km(s,m)));break;case 13:da(o,s),ha(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Xm=pt()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Km(s,m)));break;case 22:y=s.memoizedState!==null;var xe=u!==null&&u.memoizedState!==null,Pe=Ql,He=yi;if(Ql=Pe||y,yi=He||xe,da(o,s),yi=He,Ql=Pe,ha(s),m&8192)e:for(o=s.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(u===null||xe||Ql||yi||$u(s)),u=null,o=s;;){if(o.tag===5||o.tag===26){if(u===null){xe=u=o;try{if(N=xe.stateNode,y)M=N.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{K=xe.stateNode;var Ye=xe.memoizedProps.style,Me=Ye!=null&&Ye.hasOwnProperty("display")?Ye.display:null;K.style.display=Me==null||typeof Me=="boolean"?"":(""+Me).trim()}}catch(gt){tr(xe,xe.return,gt)}}}else if(o.tag===6){if(u===null){xe=o;try{xe.stateNode.nodeValue=y?"":xe.memoizedProps}catch(gt){tr(xe,xe.return,gt)}}}else if(o.tag===18){if(u===null){xe=o;try{var Oe=xe.stateNode;y?Ub(Oe,!0):Ub(xe.stateNode,!1)}catch(gt){tr(xe,xe.return,gt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=s.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,Km(s,u))));break;case 19:da(o,s),ha(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Km(s,m)));break;case 30:break;case 21:break;default:da(o,s),ha(s)}}function ha(s){var o=s.flags;if(o&2){try{for(var u,m=s.return;m!==null;){if(H2(m)){u=m;break}m=m.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var y=u.stateNode,N=Y0(s);Ym(s,N,y);break;case 5:var M=u.stateNode;u.flags&32&&(ri(M,""),u.flags&=-33);var K=Y0(s);Ym(s,K,M);break;case 3:case 4:var xe=u.stateNode.containerInfo,Pe=Y0(s);K0(s,Pe,xe);break;default:throw Error(r(161))}}catch(He){tr(s,s.return,He)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Z2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Z2(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Jl(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)W2(s,o.alternate,o),o=o.sibling}function $u(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Vc(4,o,o.return),$u(o);break;case 1:cl(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&U2(o,o.return,u),$u(o);break;case 27:xf(o.stateNode);case 26:case 5:cl(o,o.return),$u(o);break;case 22:o.memoizedState===null&&$u(o);break;case 30:$u(o);break;default:$u(o)}s=s.sibling}}function Zl(s,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,y=s,N=o,M=N.flags;switch(N.tag){case 0:case 11:case 15:Zl(y,N,u),of(4,N);break;case 1:if(Zl(y,N,u),m=N,y=m.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Pe){tr(m,m.return,Pe)}if(m=N,y=m.updateQueue,y!==null){var K=m.stateNode;try{var xe=y.shared.hiddenCallbacks;if(xe!==null)for(y.shared.hiddenCallbacks=null,y=0;y<xe.length;y++)Yi(xe[y],K)}catch(Pe){tr(m,m.return,Pe)}}u&&M&64&&B2(N),lf(N,N.return);break;case 27:$2(N);case 26:case 5:Zl(y,N,u),u&&m===null&&M&4&&z2(N),lf(N,N.return);break;case 12:Zl(y,N,u);break;case 31:Zl(y,N,u),u&&M&4&&Q2(y,N);break;case 13:Zl(y,N,u),u&&M&4&&X2(y,N);break;case 22:N.memoizedState===null&&Zl(y,N,u),lf(N,N.return);break;case 30:break;default:Zl(y,N,u)}o=o.sibling}}function X0(s,o){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Vu(u))}function J0(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Vu(s))}function Ro(s,o,u,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)eb(s,o,u,m),o=o.sibling}function eb(s,o,u,m){var y=o.flags;switch(o.tag){case 0:case 11:case 15:Ro(s,o,u,m),y&2048&&of(9,o);break;case 1:Ro(s,o,u,m);break;case 3:Ro(s,o,u,m),y&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Vu(s)));break;case 12:if(y&2048){Ro(s,o,u,m),s=o.stateNode;try{var N=o.memoizedProps,M=N.id,K=N.onPostCommit;typeof K=="function"&&K(M,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(xe){tr(o,o.return,xe)}}else Ro(s,o,u,m);break;case 31:Ro(s,o,u,m);break;case 13:Ro(s,o,u,m);break;case 23:break;case 22:N=o.stateNode,M=o.alternate,o.memoizedState!==null?N._visibility&2?Ro(s,o,u,m):cf(s,o):N._visibility&2?Ro(s,o,u,m):(N._visibility|=2,qd(s,o,u,m,(o.subtreeFlags&10256)!==0||!1)),y&2048&&X0(M,o);break;case 24:Ro(s,o,u,m),y&2048&&J0(o.alternate,o);break;default:Ro(s,o,u,m)}}function qd(s,o,u,m,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var N=s,M=o,K=u,xe=m,Pe=M.flags;switch(M.tag){case 0:case 11:case 15:qd(N,M,K,xe,y),of(8,M);break;case 23:break;case 22:var He=M.stateNode;M.memoizedState!==null?He._visibility&2?qd(N,M,K,xe,y):cf(N,M):(He._visibility|=2,qd(N,M,K,xe,y)),y&&Pe&2048&&X0(M.alternate,M);break;case 24:qd(N,M,K,xe,y),y&&Pe&2048&&J0(M.alternate,M);break;default:qd(N,M,K,xe,y)}o=o.sibling}}function cf(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=s,m=o,y=m.flags;switch(m.tag){case 22:cf(u,m),y&2048&&X0(m.alternate,m);break;case 24:cf(u,m),y&2048&&J0(m.alternate,m);break;default:cf(u,m)}o=o.sibling}}var uf=8192;function Vd(s,o,u){if(s.subtreeFlags&uf)for(s=s.child;s!==null;)tb(s,o,u),s=s.sibling}function tb(s,o,u){switch(s.tag){case 26:Vd(s,o,u),s.flags&uf&&s.memoizedState!==null&&B6(u,Lo,s.memoizedState,s.memoizedProps);break;case 5:Vd(s,o,u);break;case 3:case 4:var m=Lo;Lo=cp(s.stateNode.containerInfo),Vd(s,o,u),Lo=m;break;case 22:s.memoizedState===null&&(m=s.alternate,m!==null&&m.memoizedState!==null?(m=uf,uf=16777216,Vd(s,o,u),uf=m):Vd(s,o,u));break;default:Vd(s,o,u)}}function nb(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function df(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Qi=m,ib(m,s)}nb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)rb(s),s=s.sibling}function rb(s){switch(s.tag){case 0:case 11:case 15:df(s),s.flags&2048&&Vc(9,s,s.return);break;case 3:df(s);break;case 12:df(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Qm(s)):df(s);break;default:df(s)}}function Qm(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Qi=m,ib(m,s)}nb(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Vc(8,o,o.return),Qm(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Qm(o));break;default:Qm(o)}s=s.sibling}}function ib(s,o){for(;Qi!==null;){var u=Qi;switch(u.tag){case 0:case 11:case 15:Vc(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Vu(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,Qi=m;else e:for(u=s;Qi!==null;){m=Qi;var y=m.sibling,N=m.return;if(Y2(m),m===u){Qi=null;break e}if(y!==null){y.return=N,Qi=y;break e}Qi=N}}}var n6={getCacheForType:function(s){var o=ki(Vr),u=o.data.get(s);return u===void 0&&(u=s(),o.data.set(s,u)),u},cacheSignal:function(){return ki(Vr).controller.signal}},r6=typeof WeakMap=="function"?WeakMap:Map,Yn=0,vr=null,vn=null,wn=0,er=0,Ia=null,Bc=!1,Bd=!1,Z0=!1,ec=0,Zr=0,Uc=0,Gu=0,ex=0,La=0,Ud=0,hf=null,fa=null,tx=!1,Xm=0,sb=0,Jm=1/0,Zm=null,zc=null,Di=0,Hc=null,zd=null,tc=0,nx=0,rx=null,ab=null,ff=0,ix=null;function Ra(){return(Yn&2)!==0&&wn!==0?wn&-wn:Q.T!==null?ux():$r()}function ob(){if(La===0)if((wn&536870912)===0||xn){var s=qn;qn<<=1,(qn&3932160)===0&&(qn=262144),La=s}else La=536870912;return s=Ar.current,s!==null&&(s.flags|=32),La}function ma(s,o,u){(s===vr&&(er===2||er===9)||s.cancelPendingCommit!==null)&&(Hd(s,0),$c(s,wn,La,!1)),Ct(s,u),((Yn&2)===0||s!==vr)&&(s===vr&&((Yn&2)===0&&(Gu|=u),Zr===4&&$c(s,wn,La,!1)),ul(s))}function lb(s,o,u){if((Yn&6)!==0)throw Error(r(327));var m=!u&&(o&127)===0&&(o&s.expiredLanes)===0||Ni(s,o),y=m?a6(s,o):ax(s,o,!0),N=m;do{if(y===0){Bd&&!m&&$c(s,o,0,!1);break}else{if(u=s.current.alternate,N&&!i6(u)){y=ax(s,o,!1),N=!1;continue}if(y===2){if(N=o,s.errorRecoveryDisabledLanes&N)var M=0;else M=s.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){o=M;e:{var K=s;y=hf;var xe=K.current.memoizedState.isDehydrated;if(xe&&(Hd(K,M).flags|=256),M=ax(K,M,!1),M!==2){if(Z0&&!xe){K.errorRecoveryDisabledLanes|=N,Gu|=N,y=4;break e}N=fa,fa=y,N!==null&&(fa===null?fa=N:fa.push.apply(fa,N))}y=M}if(N=!1,y!==2)continue}}if(y===1){Hd(s,0),$c(s,o,0,!0);break}e:{switch(m=s,N=y,N){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:$c(m,o,La,!Bc);break e;case 2:fa=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(y=Xm+300-pt(),10<y)){if($c(m,o,La,!Bc),un(m,0,!0)!==0)break e;tc=o,m.timeoutHandle=qb(cb.bind(null,m,u,fa,Zm,tx,o,La,Gu,Ud,Bc,N,"Throttled",-0,0),y);break e}cb(m,u,fa,Zm,tx,o,La,Gu,Ud,Bc,N,null,-0,0)}}break}while(!0);ul(s)}function cb(s,o,u,m,y,N,M,K,xe,Pe,He,Ye,Me,Oe){if(s.timeoutHandle=-1,Ye=o.subtreeFlags,Ye&8192||(Ye&16785408)===16785408){Ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ms},tb(o,N,Ye);var gt=(N&62914560)===N?Xm-pt():(N&4194048)===N?sb-pt():0;if(gt=U6(Ye,gt),gt!==null){tc=N,s.cancelPendingCommit=gt(xb.bind(null,s,o,N,u,m,y,M,K,xe,He,Ye,null,Me,Oe)),$c(s,N,M,!Pe);return}}xb(s,o,N,u,m,y,M,K,xe)}function i6(s){for(var o=s;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var y=u[m],N=y.getSnapshot;y=y.value;try{if(!Ci(N(),y))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function $c(s,o,u,m){o&=~ex,o&=~Gu,s.suspendedLanes|=o,s.pingedLanes&=~o,m&&(s.warmLanes|=o),m=s.expirationTimes;for(var y=o;0<y;){var N=31-en(y),M=1<<N;m[N]=-1,y&=~M}u!==0&&es(s,u,o)}function ep(){return(Yn&6)===0?(mf(0),!1):!0}function sx(){if(vn!==null){if(er===0)var s=vn.return;else s=vn,eo=tl=null,Rd(s),Ke=null,vt=0,s=vn;for(;s!==null;)V2(s.alternate,s),s=s.return;vn=null}}function Hd(s,o){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,A6(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),tc=0,sx(),vr=s,vn=u=na(s.current,null),wn=o,er=0,Ia=null,Bc=!1,Bd=Ni(s,o),Z0=!1,Ud=La=ex=Gu=Uc=Zr=0,fa=hf=null,tx=!1,(o&8)!==0&&(o|=o&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=o;0<m;){var y=31-en(m),N=1<<y;o|=s[y],m&=~N}return ec=o,Pu(),u}function ub(s,o){kt=null,Q.H=rf,o===ye||o===le?(o=$e(),er=3):o===Ie?(o=$e(),er=4):er=o===O0?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ia=o,vn===null&&(Zr=1,zm(s,ra(o,s.current)))}function db(){var s=Ar.current;return s===null?!0:(wn&4194048)===wn?Ln===null:(wn&62914560)===wn||(wn&536870912)!==0?s===Ln:!1}function hb(){var s=Q.H;return Q.H=rf,s===null?rf:s}function fb(){var s=Q.A;return Q.A=n6,s}function tp(){Zr=4,Bc||(wn&4194048)!==wn&&Ar.current!==null||(Bd=!0),(Uc&134217727)===0&&(Gu&134217727)===0||vr===null||$c(vr,wn,La,!1)}function ax(s,o,u){var m=Yn;Yn|=2;var y=hb(),N=fb();(vr!==s||wn!==o)&&(Zm=null,Hd(s,o)),o=!1;var M=Zr;e:do try{if(er!==0&&vn!==null){var K=vn,xe=Ia;switch(er){case 8:sx(),M=6;break e;case 3:case 2:case 9:case 6:Ar.current===null&&(o=!0);var Pe=er;if(er=0,Ia=null,$d(s,K,xe,Pe),u&&Bd){M=0;break e}break;default:Pe=er,er=0,Ia=null,$d(s,K,xe,Pe)}}s6(),M=Zr;break}catch(He){ub(s,He)}while(!0);return o&&s.shellSuspendCounter++,eo=tl=null,Yn=m,Q.H=y,Q.A=N,vn===null&&(vr=null,wn=0,Pu()),M}function s6(){for(;vn!==null;)mb(vn)}function a6(s,o){var u=Yn;Yn|=2;var m=hb(),y=fb();vr!==s||wn!==o?(Zm=null,Jm=pt()+500,Hd(s,o)):Bd=Ni(s,o);e:do try{if(er!==0&&vn!==null){o=vn;var N=Ia;t:switch(er){case 1:er=0,Ia=null,$d(s,o,N,1);break;case 2:case 9:if(Te(N)){er=0,Ia=null,pb(o);break}o=function(){er!==2&&er!==9||vr!==s||(er=7),ul(s)},N.then(o,o);break e;case 3:er=7;break e;case 4:er=5;break e;case 7:Te(N)?(er=0,Ia=null,pb(o)):(er=0,Ia=null,$d(s,o,N,7));break;case 5:var M=null;switch(vn.tag){case 26:M=vn.memoizedState;case 5:case 27:var K=vn;if(M?e5(M):K.stateNode.complete){er=0,Ia=null;var xe=K.sibling;if(xe!==null)vn=xe;else{var Pe=K.return;Pe!==null?(vn=Pe,np(Pe)):vn=null}break t}}er=0,Ia=null,$d(s,o,N,5);break;case 6:er=0,Ia=null,$d(s,o,N,6);break;case 8:sx(),Zr=6;break e;default:throw Error(r(462))}}o6();break}catch(He){ub(s,He)}while(!0);return eo=tl=null,Q.H=m,Q.A=y,Yn=u,vn!==null?0:(vr=null,wn=0,Pu(),Zr)}function o6(){for(;vn!==null&&!at();)mb(vn)}function mb(s){var o=F2(s.alternate,s,ec);s.memoizedProps=s.pendingProps,o===null?np(s):vn=o}function pb(s){var o=s,u=o.alternate;switch(o.tag){case 15:case 0:o=R2(u,o,o.pendingProps,o.type,void 0,wn);break;case 11:o=R2(u,o,o.pendingProps,o.type.render,o.ref,wn);break;case 5:Rd(o);default:V2(u,o),o=vn=Ou(o,ec),o=F2(u,o,ec)}s.memoizedProps=s.pendingProps,o===null?np(s):vn=o}function $d(s,o,u,m){eo=tl=null,Rd(o),Ke=null,vt=0;var y=o.return;try{if(Kj(s,y,o,u,wn)){Zr=1,zm(s,ra(u,s.current)),vn=null;return}}catch(N){if(y!==null)throw vn=y,N;Zr=1,zm(s,ra(u,s.current)),vn=null;return}o.flags&32768?(xn||m===1?s=!0:Bd||(wn&536870912)!==0?s=!1:(Bc=s=!0,(m===2||m===9||m===3||m===6)&&(m=Ar.current,m!==null&&m.tag===13&&(m.flags|=16384))),gb(o,s)):np(o)}function np(s){var o=s;do{if((o.flags&32768)!==0){gb(o,Bc);return}s=o.return;var u=Jj(o.alternate,o,ec);if(u!==null){vn=u;return}if(o=o.sibling,o!==null){vn=o;return}vn=o=s}while(o!==null);Zr===0&&(Zr=5)}function gb(s,o){do{var u=Zj(s.alternate,s);if(u!==null){u.flags&=32767,vn=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(s=s.sibling,s!==null)){vn=s;return}vn=s=u}while(s!==null);Zr=6,vn=null}function xb(s,o,u,m,y,N,M,K,xe){s.cancelPendingCommit=null;do rp();while(Di!==0);if((Yn&6)!==0)throw Error(r(327));if(o!==null){if(o===s.current)throw Error(r(177));if(N=o.lanes|o.childLanes,N|=vd,ya(s,u,N,M,K,xe),s===vr&&(vn=vr=null,wn=0),zd=o,Hc=s,tc=u,nx=N,rx=y,ab=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,d6(nn,function(){return _b(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=Q.T,Q.T=null,y=ae.p,ae.p=2,M=Yn,Yn|=4;try{e6(s,o,u)}finally{Yn=M,ae.p=y,Q.T=m}}Di=1,vb(),yb(),bb()}}function vb(){if(Di===1){Di=0;var s=Hc,o=zd,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null;var m=ae.p;ae.p=2;var y=Yn;Yn|=4;try{J2(o,s);var N=vx,M=No(s.containerInfo),K=N.focusedElem,xe=N.selectionRange;if(M!==K&&K&&K.ownerDocument&&_o(K.ownerDocument.documentElement,K)){if(xe!==null&&Ja(K)){var Pe=xe.start,He=xe.end;if(He===void 0&&(He=Pe),"selectionStart"in K)K.selectionStart=Pe,K.selectionEnd=Math.min(He,K.value.length);else{var Ye=K.ownerDocument||document,Me=Ye&&Ye.defaultView||window;if(Me.getSelection){var Oe=Me.getSelection(),gt=K.textContent.length,$t=Math.min(xe.start,gt),dr=xe.end===void 0?$t:Math.min(xe.end,gt);!Oe.extend&&$t>dr&&(M=dr,dr=$t,$t=M);var Se=Cc(K,$t),we=Cc(K,dr);if(Se&&we&&(Oe.rangeCount!==1||Oe.anchorNode!==Se.node||Oe.anchorOffset!==Se.offset||Oe.focusNode!==we.node||Oe.focusOffset!==we.offset)){var Re=Ye.createRange();Re.setStart(Se.node,Se.offset),Oe.removeAllRanges(),$t>dr?(Oe.addRange(Re),Oe.extend(we.node,we.offset)):(Re.setEnd(we.node,we.offset),Oe.addRange(Re))}}}}for(Ye=[],Oe=K;Oe=Oe.parentNode;)Oe.nodeType===1&&Ye.push({element:Oe,left:Oe.scrollLeft,top:Oe.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<Ye.length;K++){var We=Ye[K];We.element.scrollLeft=We.left,We.element.scrollTop=We.top}}pp=!!xx,vx=xx=null}finally{Yn=y,ae.p=m,Q.T=u}}s.current=o,Di=2}}function yb(){if(Di===2){Di=0;var s=Hc,o=zd,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=Q.T,Q.T=null;var m=ae.p;ae.p=2;var y=Yn;Yn|=4;try{W2(s,o.alternate,o)}finally{Yn=y,ae.p=m,Q.T=u}}Di=3}}function bb(){if(Di===4||Di===3){Di=0,nt();var s=Hc,o=zd,u=tc,m=ab;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Di=5:(Di=0,zd=Hc=null,wb(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(zc=null),ir(u),o=o.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(rn,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=Q.T,y=ae.p,ae.p=2,Q.T=null;try{for(var N=s.onRecoverableError,M=0;M<m.length;M++){var K=m[M];N(K.value,{componentStack:K.stack})}}finally{Q.T=o,ae.p=y}}(tc&3)!==0&&rp(),ul(s),y=s.pendingLanes,(u&261930)!==0&&(y&42)!==0?s===ix?ff++:(ff=0,ix=s):ff=0,mf(0)}}function wb(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Vu(o)))}function rp(){return vb(),yb(),bb(),_b()}function _b(){if(Di!==5)return!1;var s=Hc,o=nx;nx=0;var u=ir(tc),m=Q.T,y=ae.p;try{ae.p=32>u?32:u,Q.T=null,u=rx,rx=null;var N=Hc,M=tc;if(Di=0,zd=Hc=null,tc=0,(Yn&6)!==0)throw Error(r(331));var K=Yn;if(Yn|=4,rb(N.current),eb(N,N.current,M,u),Yn=K,mf(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(rn,N)}catch{}return!0}finally{ae.p=y,Q.T=m,wb(s,o)}}function Nb(s,o,u){o=ra(u,o),o=M0(s.stateNode,o,2),s=ln(s,o,2),s!==null&&(Ct(s,2),ul(s))}function tr(s,o,u){if(s.tag===3)Nb(s,s,u);else for(;o!==null;){if(o.tag===3){Nb(o,s,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(zc===null||!zc.has(m))){s=ra(u,s),u=A2(2),m=ln(o,u,2),m!==null&&(S2(u,m,o,s),Ct(m,2),ul(m));break}}o=o.return}}function ox(s,o,u){var m=s.pingCache;if(m===null){m=s.pingCache=new r6;var y=new Set;m.set(o,y)}else y=m.get(o),y===void 0&&(y=new Set,m.set(o,y));y.has(u)||(Z0=!0,y.add(u),s=l6.bind(null,s,o,u),o.then(s,s))}function l6(s,o,u){var m=s.pingCache;m!==null&&m.delete(o),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,vr===s&&(wn&u)===u&&(Zr===4||Zr===3&&(wn&62914560)===wn&&300>pt()-Xm?(Yn&2)===0&&Hd(s,0):ex|=u,Ud===wn&&(Ud=0)),ul(s)}function Ab(s,o){o===0&&(o=Ys()),s=So(s,o),s!==null&&(Ct(s,o),ul(s))}function c6(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),Ab(s,u)}function u6(s,o){var u=0;switch(s.tag){case 31:case 13:var m=s.stateNode,y=s.memoizedState;y!==null&&(u=y.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(o),Ab(s,u)}function d6(s,o){return Ue(s,o)}var ip=null,Gd=null,lx=!1,sp=!1,cx=!1,Gc=0;function ul(s){s!==Gd&&s.next===null&&(Gd===null?ip=Gd=s:Gd=Gd.next=s),sp=!0,lx||(lx=!0,f6())}function mf(s,o){if(!cx&&sp){cx=!0;do for(var u=!1,m=ip;m!==null;){if(s!==0){var y=m.pendingLanes;if(y===0)var N=0;else{var M=m.suspendedLanes,K=m.pingedLanes;N=(1<<31-en(42|s)+1)-1,N&=y&~(M&~K),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(u=!0,Tb(m,N))}else N=wn,N=un(m,m===vr?N:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(N&3)===0||Ni(m,N)||(u=!0,Tb(m,N));m=m.next}while(u);cx=!1}}function h6(){Sb()}function Sb(){sp=lx=!1;var s=0;Gc!==0&&N6()&&(s=Gc);for(var o=pt(),u=null,m=ip;m!==null;){var y=m.next,N=jb(m,o);N===0?(m.next=null,u===null?ip=y:u.next=y,y===null&&(Gd=u)):(u=m,(s!==0||(N&3)!==0)&&(sp=!0)),m=y}Di!==0&&Di!==5||mf(s),Gc!==0&&(Gc=0)}function jb(s,o){for(var u=s.suspendedLanes,m=s.pingedLanes,y=s.expirationTimes,N=s.pendingLanes&-62914561;0<N;){var M=31-en(N),K=1<<M,xe=y[M];xe===-1?((K&u)===0||(K&m)!==0)&&(y[M]=hi(K,o)):xe<=o&&(s.expiredLanes|=K),N&=~K}if(o=vr,u=wn,u=un(s,s===o?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,u===0||s===o&&(er===2||er===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&Qe(m),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||Ni(s,u)){if(o=u&-u,o===s.callbackPriority)return o;switch(m!==null&&Qe(m),ir(u)){case 2:case 8:u=cn;break;case 32:u=nn;break;case 268435456:u=Xt;break;default:u=nn}return m=Eb.bind(null,s),u=Ue(u,m),s.callbackPriority=o,s.callbackNode=u,o}return m!==null&&m!==null&&Qe(m),s.callbackPriority=2,s.callbackNode=null,2}function Eb(s,o){if(Di!==0&&Di!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(rp()&&s.callbackNode!==u)return null;var m=wn;return m=un(s,s===vr?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(lb(s,m,o),jb(s,pt()),s.callbackNode!=null&&s.callbackNode===u?Eb.bind(null,s):null)}function Tb(s,o){if(rp())return null;lb(s,o,!0)}function f6(){S6(function(){(Yn&6)!==0?Ue(Mt,h6):Sb()})}function ux(){if(Gc===0){var s=g;s===0&&(s=Bt,Bt<<=1,(Bt&261888)===0&&(Bt=256)),Gc=s}return Gc}function Cb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:zi(""+s)}function Ib(s,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,s.id&&u.setAttribute("form",s.id),o.parentNode.insertBefore(u,o),s=new FormData(s),u.parentNode.removeChild(u),s}function m6(s,o,u,m,y){if(o==="submit"&&u&&u.stateNode===y){var N=Cb((y[Xn]||null).action),M=m.submitter;M&&(o=(o=M[Xn]||null)?Cb(o.formAction):M.getAttribute("formAction"),o!==null&&(N=o,M=null));var K=new pi("action","action",null,m,y);s.push({event:K,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Gc!==0){var xe=M?Ib(y,M):new FormData(y);I0(u,{pending:!0,data:xe,method:y.method,action:N},null,xe)}}else typeof N=="function"&&(K.preventDefault(),xe=M?Ib(y,M):new FormData(y),I0(u,{pending:!0,data:xe,method:y.method,action:N},N,xe))},currentTarget:y}]})}}for(var dx=0;dx<Vl.length;dx++){var hx=Vl[dx],p6=hx.toLowerCase(),g6=hx[0].toUpperCase()+hx.slice(1);ta(p6,"on"+g6)}ta(ql,"onAnimationEnd"),ta(Ru,"onAnimationIteration"),ta(Uh,"onAnimationStart"),ta("dblclick","onDoubleClick"),ta("focusin","onFocus"),ta("focusout","onBlur"),ta(Im,"onTransitionRun"),ta(Lm,"onTransitionStart"),ta(Rm,"onTransitionCancel"),ta(zh,"onTransitionEnd"),Ds("onMouseEnter",["mouseout","mouseover"]),Ds("onMouseLeave",["mouseout","mouseover"]),Ds("onPointerEnter",["pointerout","pointerover"]),Ds("onPointerLeave",["pointerout","pointerover"]),ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ws("onBeforeInput",["compositionend","keypress","textInput","paste"]),ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pf));function Lb(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var m=s[u],y=m.event;m=m.listeners;e:{var N=void 0;if(o)for(var M=m.length-1;0<=M;M--){var K=m[M],xe=K.instance,Pe=K.currentTarget;if(K=K.listener,xe!==N&&y.isPropagationStopped())break e;N=K,y.currentTarget=Pe;try{N(y)}catch(He){ku(He)}y.currentTarget=null,N=xe}else for(M=0;M<m.length;M++){if(K=m[M],xe=K.instance,Pe=K.currentTarget,K=K.listener,xe!==N&&y.isPropagationStopped())break e;N=K,y.currentTarget=Pe;try{N(y)}catch(He){ku(He)}y.currentTarget=null,N=xe}}}}function yn(s,o){var u=o[Vi];u===void 0&&(u=o[Vi]=new Set);var m=s+"__bubble";u.has(m)||(Rb(o,s,2,!1),u.add(m))}function fx(s,o,u){var m=0;o&&(m|=4),Rb(u,s,m,o)}var ap="_reactListening"+Math.random().toString(36).slice(2);function mx(s){if(!s[ap]){s[ap]=!0,zo.forEach(function(u){u!=="selectionchange"&&(x6.has(u)||fx(u,!1,s),fx(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[ap]||(o[ap]=!0,fx("selectionchange",!1,o))}}function Rb(s,o,u,m){switch(o5(o)){case 2:var y=$6;break;case 8:y=G6;break;default:y=Cx}u=y.bind(null,o,u,s),y=void 0,!po||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),m?y!==void 0?s.addEventListener(o,u,{capture:!0,passive:y}):s.addEventListener(o,u,!0):y!==void 0?s.addEventListener(o,u,{passive:y}):s.addEventListener(o,u,!1)}function px(s,o,u,m,y){var N=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var K=m.stateNode.containerInfo;if(K===y)break;if(M===4)for(M=m.return;M!==null;){var xe=M.tag;if((xe===3||xe===4)&&M.stateNode.containerInfo===y)return;M=M.return}for(;K!==null;){if(M=ts(K),M===null)return;if(xe=M.tag,xe===5||xe===6||xe===26||xe===27){m=N=M;continue e}K=K.parentNode}}m=m.return}Ha(function(){var Pe=N,He=Hi(u),Ye=[];e:{var Me=Hh.get(s);if(Me!==void 0){var Oe=pi,gt=s;switch(s){case"keypress":if(ss(u)===0)break e;case"keydown":case"keyup":Oe=pn;break;case"focusin":gt="focus",Oe=Fs;break;case"focusout":gt="blur",Oe=Fs;break;case"beforeblur":case"afterblur":Oe=Fs;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=Ko;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=Zs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=C;break;case ql:case Ru:case Uh:Oe=A;break;case zh:Oe=ee;break;case"scroll":case"scrollend":Oe=$a;break;case"wheel":Oe=De;break;case"copy":case"cut":case"paste":Oe=ce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=Qn;break;case"toggle":case"beforetoggle":Oe=Qt}var $t=(o&4)!==0,dr=!$t&&(s==="scroll"||s==="scrollend"),Se=$t?Me!==null?Me+"Capture":null:Me;$t=[];for(var we=Pe,Re;we!==null;){var We=we;if(Re=We.stateNode,We=We.tag,We!==5&&We!==26&&We!==27||Re===null||Se===null||(We=ii(we,Se),We!=null&&$t.push(gf(we,We,Re))),dr)break;we=we.return}0<$t.length&&(Me=new Oe(Me,gt,null,u,He),Ye.push({event:Me,listeners:$t}))}}if((o&7)===0){e:{if(Me=s==="mouseover"||s==="pointerover",Oe=s==="mouseout"||s==="pointerout",Me&&u!==Aa&&(gt=u.relatedTarget||u.fromElement)&&(ts(gt)||gt[Gr]))break e;if((Oe||Me)&&(Me=He.window===He?He:(Me=He.ownerDocument)?Me.defaultView||Me.parentWindow:window,Oe?(gt=u.relatedTarget||u.toElement,Oe=Pe,gt=gt?ts(gt):null,gt!==null&&(dr=a(gt),$t=gt.tag,gt!==dr||$t!==5&&$t!==27&&$t!==6)&&(gt=null)):(Oe=null,gt=Pe),Oe!==gt)){if($t=Ko,We="onMouseLeave",Se="onMouseEnter",we="mouse",(s==="pointerout"||s==="pointerover")&&($t=Qn,We="onPointerLeave",Se="onPointerEnter",we="pointer"),dr=Oe==null?Me:ns(Oe),Re=gt==null?Me:ns(gt),Me=new $t(We,we+"leave",Oe,u,He),Me.target=dr,Me.relatedTarget=Re,We=null,ts(He)===Pe&&($t=new $t(Se,we+"enter",gt,u,He),$t.target=Re,$t.relatedTarget=dr,We=$t),dr=We,Oe&&gt)t:{for($t=v6,Se=Oe,we=gt,Re=0,We=Se;We;We=$t(We))Re++;We=0;for(var qt=we;qt;qt=$t(qt))We++;for(;0<Re-We;)Se=$t(Se),Re--;for(;0<We-Re;)we=$t(we),We--;for(;Re--;){if(Se===we||we!==null&&Se===we.alternate){$t=Se;break t}Se=$t(Se),we=$t(we)}$t=null}else $t=null;Oe!==null&&kb(Ye,Me,Oe,$t,!1),gt!==null&&dr!==null&&kb(Ye,dr,gt,$t,!0)}}e:{if(Me=Pe?ns(Pe):window,Oe=Me.nodeName&&Me.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&Me.type==="file")var zn=Xo;else if(Iu(Me))if(As)zn=Qa;else{zn=Fr;var At=Ec}else Oe=Me.nodeName,!Oe||Oe.toLowerCase()!=="input"||Me.type!=="checkbox"&&Me.type!=="radio"?Pe&&Go(Pe.elementType)&&(zn=Xo):zn=xd;if(zn&&(zn=zn(s,Pe))){Vs(Ye,zn,u,He);break e}At&&At(s,Me,Pe),s==="focusout"&&Pe&&Me.type==="number"&&Pe.memoizedProps.value!=null&&Rl(Me,"number",Me.value)}switch(At=Pe?ns(Pe):window,s){case"focusin":(Iu(At)||At.contentEditable==="true")&&(Bs=At,Ao=Pe,$i=null);break;case"focusout":$i=Ao=Bs=null;break;case"mousedown":ea=!0;break;case"contextmenu":case"mouseup":case"dragend":ea=!1,Mn(Ye,u,He);break;case"selectionchange":if(Fl)break;case"keydown":case"keyup":Mn(Ye,u,He)}var dn;if(hn)e:{switch(s){case"compositionstart":var _n="onCompositionStart";break e;case"compositionend":_n="onCompositionEnd";break e;case"compositionupdate":_n="onCompositionUpdate";break e}_n=void 0}else Wa?qs(s,u)&&(_n="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(_n="onCompositionStart");_n&&(Ei&&u.locale!=="ko"&&(Wa||_n!=="onCompositionStart"?_n==="onCompositionEnd"&&Wa&&(dn=Ml()):(is=He,go="value"in is?is.value:is.textContent,Wa=!0)),At=op(Pe,_n),0<At.length&&(_n=new Ae(_n,s,null,u,He),Ye.push({event:_n,listeners:At}),dn?_n.data=dn:(dn=Ga(u),dn!==null&&(_n.data=dn)))),(dn=gi?ls(s,u):vo(s,u))&&(_n=op(Pe,"onBeforeInput"),0<_n.length&&(At=new Ae("onBeforeInput","beforeinput",null,u,He),Ye.push({event:At,listeners:_n}),At.data=dn)),m6(Ye,s,Pe,u,He)}Lb(Ye,o)})}function gf(s,o,u){return{instance:s,listener:o,currentTarget:u}}function op(s,o){for(var u=o+"Capture",m=[];s!==null;){var y=s,N=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||N===null||(y=ii(s,u),y!=null&&m.unshift(gf(s,y,N)),y=ii(s,o),y!=null&&m.push(gf(s,y,N))),s.tag===3)return m;s=s.return}return[]}function v6(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function kb(s,o,u,m,y){for(var N=o._reactName,M=[];u!==null&&u!==m;){var K=u,xe=K.alternate,Pe=K.stateNode;if(K=K.tag,xe!==null&&xe===m)break;K!==5&&K!==26&&K!==27||Pe===null||(xe=Pe,y?(Pe=ii(u,N),Pe!=null&&M.unshift(gf(u,Pe,xe))):y||(Pe=ii(u,N),Pe!=null&&M.push(gf(u,Pe,xe)))),u=u.return}M.length!==0&&s.push({event:o,listeners:M})}var y6=/\r\n?/g,b6=/\u0000|\uFFFD/g;function Pb(s){return(typeof s=="string"?s:""+s).replace(y6,`
`).replace(b6,"")}function Db(s,o){return o=Pb(o),Pb(s)===o}function ur(s,o,u,m,y,N){switch(u){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||ri(s,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&ri(s,""+m);break;case"className":mi(s,"class",m);break;case"tabIndex":mi(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":mi(s,u,m);break;case"style":Dl(s,m,N);break;case"data":if(o!=="object"){mi(s,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||u!=="href")){s.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(u);break}m=zi(""+m),s.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(u==="formAction"?(o!=="input"&&ur(s,o,"name",y.name,y,null),ur(s,o,"formEncType",y.formEncType,y,null),ur(s,o,"formMethod",y.formMethod,y,null),ur(s,o,"formTarget",y.formTarget,y,null)):(ur(s,o,"encType",y.encType,y,null),ur(s,o,"method",y.method,y,null),ur(s,o,"target",y.target,y,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(u);break}m=zi(""+m),s.setAttribute(u,m);break;case"onClick":m!=null&&(s.onclick=Ms);break;case"onScroll":m!=null&&yn("scroll",s);break;case"onScrollEnd":m!=null&&yn("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(u=m.__html,u!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}u=zi(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(u,""+m):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":m===!0?s.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(u,m):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(u,m):s.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(u):s.setAttribute(u,m);break;case"popover":yn("beforetoggle",s),yn("toggle",s),rs(s,"popover",m);break;case"xlinkActuate":Tr(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Tr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Tr(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Tr(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Tr(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Tr(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Tr(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Tr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Tr(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":rs(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Wo.get(u)||u,rs(s,u,m))}}function gx(s,o,u,m,y,N){switch(u){case"style":Dl(s,m,N);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(u=m.__html,u!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"children":typeof m=="string"?ri(s,m):(typeof m=="number"||typeof m=="bigint")&&ri(s,""+m);break;case"onScroll":m!=null&&yn("scroll",s);break;case"onScrollEnd":m!=null&&yn("scrollend",s);break;case"onClick":m!=null&&(s.onclick=Ms);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ui.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),o=u.slice(2,y?u.length-7:void 0),N=s[Xn]||null,N=N!=null?N[u]:null,typeof N=="function"&&s.removeEventListener(o,N,y),typeof m=="function")){typeof N!="function"&&N!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(o,m,y);break e}u in s?s[u]=m:m===!0?s.setAttribute(u,""):rs(s,u,m)}}}function fs(s,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yn("error",s),yn("load",s);var m=!1,y=!1,N;for(N in u)if(u.hasOwnProperty(N)){var M=u[N];if(M!=null)switch(N){case"src":m=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ur(s,o,N,M,u,null)}}y&&ur(s,o,"srcSet",u.srcSet,u,null),m&&ur(s,o,"src",u.src,u,null);return;case"input":yn("invalid",s);var K=N=M=y=null,xe=null,Pe=null;for(m in u)if(u.hasOwnProperty(m)){var He=u[m];if(He!=null)switch(m){case"name":y=He;break;case"type":M=He;break;case"checked":xe=He;break;case"defaultChecked":Pe=He;break;case"value":N=He;break;case"defaultValue":K=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,o));break;default:ur(s,o,m,He,u,null)}}Ac(s,N,K,xe,Pe,M,y,!1);return;case"select":yn("invalid",s),m=M=N=null;for(y in u)if(u.hasOwnProperty(y)&&(K=u[y],K!=null))switch(y){case"value":N=K;break;case"defaultValue":M=K;break;case"multiple":m=K;default:ur(s,o,y,K,u,null)}o=N,u=M,s.multiple=!!m,o!=null?ji(s,!!m,o,!1):u!=null&&ji(s,!!m,u,!0);return;case"textarea":yn("invalid",s),N=y=m=null;for(M in u)if(u.hasOwnProperty(M)&&(K=u[M],K!=null))switch(M){case"value":m=K;break;case"defaultValue":y=K;break;case"children":N=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(91));break;default:ur(s,o,M,K,u,null)}_a(s,m,y,N);return;case"option":for(xe in u)if(u.hasOwnProperty(xe)&&(m=u[xe],m!=null))switch(xe){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ur(s,o,xe,m,u,null)}return;case"dialog":yn("beforetoggle",s),yn("toggle",s),yn("cancel",s),yn("close",s);break;case"iframe":case"object":yn("load",s);break;case"video":case"audio":for(m=0;m<pf.length;m++)yn(pf[m],s);break;case"image":yn("error",s),yn("load",s);break;case"details":yn("toggle",s);break;case"embed":case"source":case"link":yn("error",s),yn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Pe in u)if(u.hasOwnProperty(Pe)&&(m=u[Pe],m!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ur(s,o,Pe,m,u,null)}return;default:if(Go(o)){for(He in u)u.hasOwnProperty(He)&&(m=u[He],m!==void 0&&gx(s,o,He,m,u,void 0));return}}for(K in u)u.hasOwnProperty(K)&&(m=u[K],m!=null&&ur(s,o,K,m,u,null))}function w6(s,o,u,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,N=null,M=null,K=null,xe=null,Pe=null,He=null;for(Oe in u){var Ye=u[Oe];if(u.hasOwnProperty(Oe)&&Ye!=null)switch(Oe){case"checked":break;case"value":break;case"defaultValue":xe=Ye;default:m.hasOwnProperty(Oe)||ur(s,o,Oe,null,m,Ye)}}for(var Me in m){var Oe=m[Me];if(Ye=u[Me],m.hasOwnProperty(Me)&&(Oe!=null||Ye!=null))switch(Me){case"type":N=Oe;break;case"name":y=Oe;break;case"checked":Pe=Oe;break;case"defaultChecked":He=Oe;break;case"value":M=Oe;break;case"defaultValue":K=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(r(137,o));break;default:Oe!==Ye&&ur(s,o,Me,Oe,m,Ye)}}fo(s,M,K,xe,Pe,He,N,y);return;case"select":Oe=M=K=Me=null;for(N in u)if(xe=u[N],u.hasOwnProperty(N)&&xe!=null)switch(N){case"value":break;case"multiple":Oe=xe;default:m.hasOwnProperty(N)||ur(s,o,N,null,m,xe)}for(y in m)if(N=m[y],xe=u[y],m.hasOwnProperty(y)&&(N!=null||xe!=null))switch(y){case"value":Me=N;break;case"defaultValue":K=N;break;case"multiple":M=N;default:N!==xe&&ur(s,o,y,N,m,xe)}o=K,u=M,m=Oe,Me!=null?ji(s,!!u,Me,!1):!!m!=!!u&&(o!=null?ji(s,!!u,o,!0):ji(s,!!u,u?[]:"",!1));return;case"textarea":Oe=Me=null;for(K in u)if(y=u[K],u.hasOwnProperty(K)&&y!=null&&!m.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:ur(s,o,K,null,m,y)}for(M in m)if(y=m[M],N=u[M],m.hasOwnProperty(M)&&(y!=null||N!=null))switch(M){case"value":Me=y;break;case"defaultValue":Oe=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==N&&ur(s,o,M,y,m,N)}kl(s,Me,Oe);return;case"option":for(var gt in u)if(Me=u[gt],u.hasOwnProperty(gt)&&Me!=null&&!m.hasOwnProperty(gt))switch(gt){case"selected":s.selected=!1;break;default:ur(s,o,gt,null,m,Me)}for(xe in m)if(Me=m[xe],Oe=u[xe],m.hasOwnProperty(xe)&&Me!==Oe&&(Me!=null||Oe!=null))switch(xe){case"selected":s.selected=Me&&typeof Me!="function"&&typeof Me!="symbol";break;default:ur(s,o,xe,Me,m,Oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $t in u)Me=u[$t],u.hasOwnProperty($t)&&Me!=null&&!m.hasOwnProperty($t)&&ur(s,o,$t,null,m,Me);for(Pe in m)if(Me=m[Pe],Oe=u[Pe],m.hasOwnProperty(Pe)&&Me!==Oe&&(Me!=null||Oe!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,o));break;default:ur(s,o,Pe,Me,m,Oe)}return;default:if(Go(o)){for(var dr in u)Me=u[dr],u.hasOwnProperty(dr)&&Me!==void 0&&!m.hasOwnProperty(dr)&&gx(s,o,dr,void 0,m,Me);for(He in m)Me=m[He],Oe=u[He],!m.hasOwnProperty(He)||Me===Oe||Me===void 0&&Oe===void 0||gx(s,o,He,Me,m,Oe);return}}for(var Se in u)Me=u[Se],u.hasOwnProperty(Se)&&Me!=null&&!m.hasOwnProperty(Se)&&ur(s,o,Se,null,m,Me);for(Ye in m)Me=m[Ye],Oe=u[Ye],!m.hasOwnProperty(Ye)||Me===Oe||Me==null&&Oe==null||ur(s,o,Ye,Me,m,Oe)}function Mb(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _6(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,u=performance.getEntriesByType("resource"),m=0;m<u.length;m++){var y=u[m],N=y.transferSize,M=y.initiatorType,K=y.duration;if(N&&K&&Mb(M)){for(M=0,K=y.responseEnd,m+=1;m<u.length;m++){var xe=u[m],Pe=xe.startTime;if(Pe>K)break;var He=xe.transferSize,Ye=xe.initiatorType;He&&Mb(Ye)&&(xe=xe.responseEnd,M+=He*(xe<K?1:(K-Pe)/(xe-Pe)))}if(--m,o+=8*(N+M)/(y.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var xx=null,vx=null;function lp(s){return s.nodeType===9?s:s.ownerDocument}function Ob(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fb(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function yx(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var bx=null;function N6(){var s=window.event;return s&&s.type==="popstate"?s===bx?!1:(bx=s,!0):(bx=null,!1)}var qb=typeof setTimeout=="function"?setTimeout:void 0,A6=typeof clearTimeout=="function"?clearTimeout:void 0,Vb=typeof Promise=="function"?Promise:void 0,S6=typeof queueMicrotask=="function"?queueMicrotask:typeof Vb<"u"?function(s){return Vb.resolve(null).then(s).catch(j6)}:qb;function j6(s){setTimeout(function(){throw s})}function Wc(s){return s==="head"}function Bb(s,o){var u=o,m=0;do{var y=u.nextSibling;if(s.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(m===0){s.removeChild(y),Qd(o);return}m--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")m++;else if(u==="html")xf(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,xf(u);for(var N=u.firstChild;N;){var M=N.nextSibling,K=N.nodeName;N[Bi]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&N.rel.toLowerCase()==="stylesheet"||u.removeChild(N),N=M}}else u==="body"&&xf(s.ownerDocument.body);u=y}while(u);Qd(o)}function Ub(s,o){var u=s;s=0;do{var m=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=m}while(u)}function wx(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":wx(u),ba(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function E6(s,o,u,m){for(;s.nodeType===1;){var y=u;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[Bi])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(N=s.getAttribute("rel"),N==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(N!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(N=s.getAttribute("src"),(N!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&N&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var N=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===N)return s}else return s;if(s=ro(s.nextSibling),s===null)break}return null}function T6(s,o,u){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=ro(s.nextSibling),s===null))return null;return s}function zb(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=ro(s.nextSibling),s===null))return null;return s}function _x(s){return s.data==="$?"||s.data==="$~"}function Nx(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function C6(s,o){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||u.readyState!=="loading")o();else{var m=function(){o(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function ro(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var Ax=null;function Hb(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(o===0)return ro(s.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}s=s.nextSibling}return null}function $b(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return s;o--}else u!=="/$"&&u!=="/&"||o++}s=s.previousSibling}return null}function Gb(s,o,u){switch(o=lp(u),s){case"html":if(s=o.documentElement,!s)throw Error(r(452));return s;case"head":if(s=o.head,!s)throw Error(r(453));return s;case"body":if(s=o.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function xf(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);ba(s)}var io=new Map,Wb=new Set;function cp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var nc=ae.d;ae.d={f:I6,r:L6,D:R6,C:k6,L:P6,m:D6,X:O6,S:M6,M:F6};function I6(){var s=nc.f(),o=ep();return s||o}function L6(s){var o=Si(s);o!==null&&o.tag===5&&o.type==="form"?u2(o):nc.r(s)}var Wd=typeof document>"u"?null:document;function Yb(s,o,u){var m=Wd;if(m&&typeof o=="string"&&o){var y=Cr(o);y='link[rel="'+s+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),Wb.has(y)||(Wb.add(y),s={rel:s,crossOrigin:u,href:o},m.querySelector(y)===null&&(o=m.createElement("link"),fs(o,"link",s),wr(o),m.head.appendChild(o)))}}function R6(s){nc.D(s),Yb("dns-prefetch",s,null)}function k6(s,o){nc.C(s,o),Yb("preconnect",s,o)}function P6(s,o,u){nc.L(s,o,u);var m=Wd;if(m&&s&&o){var y='link[rel="preload"][as="'+Cr(o)+'"]';o==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+Cr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+Cr(u.imageSizes)+'"]')):y+='[href="'+Cr(s)+'"]';var N=y;switch(o){case"style":N=Yd(s);break;case"script":N=Kd(s)}io.has(N)||(s=v({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:s,as:o},u),io.set(N,s),m.querySelector(y)!==null||o==="style"&&m.querySelector(vf(N))||o==="script"&&m.querySelector(yf(N))||(o=m.createElement("link"),fs(o,"link",s),wr(o),m.head.appendChild(o)))}}function D6(s,o){nc.m(s,o);var u=Wd;if(u&&s){var m=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+Cr(m)+'"][href="'+Cr(s)+'"]',N=y;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=Kd(s)}if(!io.has(N)&&(s=v({rel:"modulepreload",href:s},o),io.set(N,s),u.querySelector(y)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(yf(N)))return}m=u.createElement("link"),fs(m,"link",s),wr(m),u.head.appendChild(m)}}}function M6(s,o,u){nc.S(s,o,u);var m=Wd;if(m&&s){var y=bs(m).hoistableStyles,N=Yd(s);o=o||"default";var M=y.get(N);if(!M){var K={loading:0,preload:null};if(M=m.querySelector(vf(N)))K.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":o},u),(u=io.get(N))&&Sx(s,u);var xe=M=m.createElement("link");wr(xe),fs(xe,"link",s),xe._p=new Promise(function(Pe,He){xe.onload=Pe,xe.onerror=He}),xe.addEventListener("load",function(){K.loading|=1}),xe.addEventListener("error",function(){K.loading|=2}),K.loading|=4,up(M,o,m)}M={type:"stylesheet",instance:M,count:1,state:K},y.set(N,M)}}}function O6(s,o){nc.X(s,o);var u=Wd;if(u&&s){var m=bs(u).hoistableScripts,y=Kd(s),N=m.get(y);N||(N=u.querySelector(yf(y)),N||(s=v({src:s,async:!0},o),(o=io.get(y))&&jx(s,o),N=u.createElement("script"),wr(N),fs(N,"link",s),u.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},m.set(y,N))}}function F6(s,o){nc.M(s,o);var u=Wd;if(u&&s){var m=bs(u).hoistableScripts,y=Kd(s),N=m.get(y);N||(N=u.querySelector(yf(y)),N||(s=v({src:s,async:!0,type:"module"},o),(o=io.get(y))&&jx(s,o),N=u.createElement("script"),wr(N),fs(N,"link",s),u.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},m.set(y,N))}}function Kb(s,o,u,m){var y=(y=ge.current)?cp(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Yd(u.href),u=bs(y).hoistableStyles,m=u.get(o),m||(m={type:"style",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Yd(u.href);var N=bs(y).hoistableStyles,M=N.get(s);if(M||(y=y.ownerDocument||y,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(s,M),(N=y.querySelector(vf(s)))&&!N._p&&(M.instance=N,M.state.loading=5),io.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},io.set(s,u),N||q6(y,s,u,M.state))),o&&m===null)throw Error(r(528,""));return M}if(o&&m!==null)throw Error(r(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Kd(u),u=bs(y).hoistableScripts,m=u.get(o),m||(m={type:"script",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Yd(s){return'href="'+Cr(s)+'"'}function vf(s){return'link[rel="stylesheet"]['+s+"]"}function Qb(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function q6(s,o,u,m){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=s.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),fs(o,"link",u),wr(o),s.head.appendChild(o))}function Kd(s){return'[src="'+Cr(s)+'"]'}function yf(s){return"script[async]"+s}function Xb(s,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var m=s.querySelector('style[data-href~="'+Cr(u.href)+'"]');if(m)return o.instance=m,wr(m),m;var y=v({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),wr(m),fs(m,"style",y),up(m,u.precedence,s),o.instance=m;case"stylesheet":y=Yd(u.href);var N=s.querySelector(vf(y));if(N)return o.state.loading|=4,o.instance=N,wr(N),N;m=Qb(u),(y=io.get(y))&&Sx(m,y),N=(s.ownerDocument||s).createElement("link"),wr(N);var M=N;return M._p=new Promise(function(K,xe){M.onload=K,M.onerror=xe}),fs(N,"link",m),o.state.loading|=4,up(N,u.precedence,s),o.instance=N;case"script":return N=Kd(u.src),(y=s.querySelector(yf(N)))?(o.instance=y,wr(y),y):(m=u,(y=io.get(N))&&(m=v({},u),jx(m,y)),s=s.ownerDocument||s,y=s.createElement("script"),wr(y),fs(y,"link",m),s.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,up(m,u.precedence,s));return o.instance}function up(s,o,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=m.length?m[m.length-1]:null,N=y,M=0;M<m.length;M++){var K=m[M];if(K.dataset.precedence===o)N=K;else if(N!==y)break}N?N.parentNode.insertBefore(s,N.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(s,o.firstChild))}function Sx(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function jx(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var dp=null;function Jb(s,o,u){if(dp===null){var m=new Map,y=dp=new Map;y.set(u,m)}else y=dp,m=y.get(u),m||(m=new Map,y.set(u,m));if(m.has(s))return m;for(m.set(s,null),u=u.getElementsByTagName(s),y=0;y<u.length;y++){var N=u[y];if(!(N[Bi]||N[Vn]||s==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var M=N.getAttribute(o)||"";M=s+M;var K=m.get(M);K?K.push(N):m.set(M,[N])}}return m}function Zb(s,o,u){s=s.ownerDocument||s,s.head.insertBefore(u,o==="title"?s.querySelector("head > title"):null)}function V6(s,o,u){if(u===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function e5(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function B6(s,o,u,m){if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=Yd(m.href),N=o.querySelector(vf(y));if(N){o=N._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=hp.bind(s),o.then(s,s)),u.state.loading|=4,u.instance=N,wr(N);return}N=o.ownerDocument||o,m=Qb(m),(y=io.get(y))&&Sx(m,y),N=N.createElement("link"),wr(N);var M=N;M._p=new Promise(function(K,xe){M.onload=K,M.onerror=xe}),fs(N,"link",m),u.instance=N}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=hp.bind(s),o.addEventListener("load",u),o.addEventListener("error",u))}}var Ex=0;function U6(s,o){return s.stylesheets&&s.count===0&&mp(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var m=setTimeout(function(){if(s.stylesheets&&mp(s,s.stylesheets),s.unsuspend){var N=s.unsuspend;s.unsuspend=null,N()}},6e4+o);0<s.imgBytes&&Ex===0&&(Ex=62500*_6());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&mp(s,s.stylesheets),s.unsuspend)){var N=s.unsuspend;s.unsuspend=null,N()}},(s.imgBytes>Ex?50:800)+o);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(m),clearTimeout(y)}}:null}function hp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var fp=null;function mp(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,fp=new Map,o.forEach(z6,s),fp=null,hp.call(s))}function z6(s,o){if(!(o.state.loading&4)){var u=fp.get(s);if(u)var m=u.get(null);else{u=new Map,fp.set(s,u);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<y.length;N++){var M=y[N];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(u.set(M.dataset.precedence,M),m=M)}m&&u.set(null,m)}y=o.instance,M=y.getAttribute("data-precedence"),N=u.get(M)||m,N===m&&u.set(null,y),u.set(M,y),this.count++,m=hp.bind(this),y.addEventListener("load",m),y.addEventListener("error",m),N?N.parentNode.insertBefore(y,N.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),o.state.loading|=4}}var bf={$$typeof:z,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function H6(s,o,u,m,y,N,M,K,xe){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ni(0),this.hiddenUpdates=ni(null),this.identifierPrefix=m,this.onUncaughtError=y,this.onCaughtError=N,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=xe,this.incompleteTransitions=new Map}function t5(s,o,u,m,y,N,M,K,xe,Pe,He,Ye){return s=new H6(s,o,u,M,xe,Pe,He,Ye,K),o=1,N===!0&&(o|=24),N=Wi(3,null,null,o),s.current=N,N.stateNode=s,o=Dc(),o.refCount++,s.pooledCache=o,o.refCount++,N.memoizedState={element:m,isDehydrated:u,cache:o},it(N),s}function n5(s){return s?(s=Ii,s):Ii}function r5(s,o,u,m,y,N){y=n5(y),m.context===null?m.context=y:m.pendingContext=y,m=Ht(o),m.payload={element:u},N=N===void 0?null:N,N!==null&&(m.callback=N),u=ln(s,m,o),u!==null&&(ma(u,s,o),Gn(u,s,o))}function i5(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function Tx(s,o){i5(s,o),(s=s.alternate)&&i5(s,o)}function s5(s){if(s.tag===13||s.tag===31){var o=So(s,67108864);o!==null&&ma(o,s,67108864),Tx(s,67108864)}}function a5(s){if(s.tag===13||s.tag===31){var o=Ra();o=Kn(o);var u=So(s,o);u!==null&&ma(u,s,o),Tx(s,o)}}var pp=!0;function $6(s,o,u,m){var y=Q.T;Q.T=null;var N=ae.p;try{ae.p=2,Cx(s,o,u,m)}finally{ae.p=N,Q.T=y}}function G6(s,o,u,m){var y=Q.T;Q.T=null;var N=ae.p;try{ae.p=8,Cx(s,o,u,m)}finally{ae.p=N,Q.T=y}}function Cx(s,o,u,m){if(pp){var y=Ix(m);if(y===null)px(s,o,m,gp,u),l5(s,m);else if(Y6(y,s,o,u,m))m.stopPropagation();else if(l5(s,m),o&4&&-1<W6.indexOf(s)){for(;y!==null;){var N=Si(y);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var M=Nt(N.pendingLanes);if(M!==0){var K=N;for(K.pendingLanes|=2,K.entangledLanes|=2;M;){var xe=1<<31-en(M);K.entanglements[1]|=xe,M&=~xe}ul(N),(Yn&6)===0&&(Jm=pt()+500,mf(0))}}break;case 31:case 13:K=So(N,2),K!==null&&ma(K,N,2),ep(),Tx(N,2)}if(N=Ix(m),N===null&&px(s,o,m,gp,u),N===y)break;y=N}y!==null&&m.stopPropagation()}else px(s,o,m,null,u)}}function Ix(s){return s=Hi(s),Lx(s)}var gp=null;function Lx(s){if(gp=null,s=ts(s),s!==null){var o=a(s);if(o===null)s=null;else{var u=o.tag;if(u===13){if(s=c(o),s!==null)return s;s=null}else if(u===31){if(s=d(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return gp=s,null}function o5(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gt()){case Mt:return 2;case cn:return 8;case nn:case bt:return 32;case Xt:return 268435456;default:return 32}default:return 32}}var Rx=!1,Yc=null,Kc=null,Qc=null,wf=new Map,_f=new Map,Xc=[],W6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function l5(s,o){switch(s){case"focusin":case"focusout":Yc=null;break;case"dragenter":case"dragleave":Kc=null;break;case"mouseover":case"mouseout":Qc=null;break;case"pointerover":case"pointerout":wf.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":_f.delete(o.pointerId)}}function Nf(s,o,u,m,y,N){return s===null||s.nativeEvent!==N?(s={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:N,targetContainers:[y]},o!==null&&(o=Si(o),o!==null&&s5(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),s)}function Y6(s,o,u,m,y){switch(o){case"focusin":return Yc=Nf(Yc,s,o,u,m,y),!0;case"dragenter":return Kc=Nf(Kc,s,o,u,m,y),!0;case"mouseover":return Qc=Nf(Qc,s,o,u,m,y),!0;case"pointerover":var N=y.pointerId;return wf.set(N,Nf(wf.get(N)||null,s,o,u,m,y)),!0;case"gotpointercapture":return N=y.pointerId,_f.set(N,Nf(_f.get(N)||null,s,o,u,m,y)),!0}return!1}function c5(s){var o=ts(s.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){s.blockedOn=o,Ai(s.priority,function(){a5(u)});return}}else if(o===31){if(o=d(u),o!==null){s.blockedOn=o,Ai(s.priority,function(){a5(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function xp(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Ix(s.nativeEvent);if(u===null){u=s.nativeEvent;var m=new u.constructor(u.type,u);Aa=m,u.target.dispatchEvent(m),Aa=null}else return o=Si(u),o!==null&&s5(o),s.blockedOn=u,!1;o.shift()}return!0}function u5(s,o,u){xp(s)&&u.delete(o)}function K6(){Rx=!1,Yc!==null&&xp(Yc)&&(Yc=null),Kc!==null&&xp(Kc)&&(Kc=null),Qc!==null&&xp(Qc)&&(Qc=null),wf.forEach(u5),_f.forEach(u5)}function vp(s,o){s.blockedOn===o&&(s.blockedOn=null,Rx||(Rx=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,K6)))}var yp=null;function d5(s){yp!==s&&(yp=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){yp===s&&(yp=null);for(var o=0;o<s.length;o+=3){var u=s[o],m=s[o+1],y=s[o+2];if(typeof m!="function"){if(Lx(m||u)===null)continue;break}var N=Si(u);N!==null&&(s.splice(o,3),o-=3,I0(N,{pending:!0,data:y,method:u.method,action:m},m,y))}}))}function Qd(s){function o(xe){return vp(xe,s)}Yc!==null&&vp(Yc,s),Kc!==null&&vp(Kc,s),Qc!==null&&vp(Qc,s),wf.forEach(o),_f.forEach(o);for(var u=0;u<Xc.length;u++){var m=Xc[u];m.blockedOn===s&&(m.blockedOn=null)}for(;0<Xc.length&&(u=Xc[0],u.blockedOn===null);)c5(u),u.blockedOn===null&&Xc.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var y=u[m],N=u[m+1],M=y[Xn]||null;if(typeof N=="function")M||d5(u);else if(M){var K=null;if(N&&N.hasAttribute("formAction")){if(y=N,M=N[Xn]||null)K=M.formAction;else if(Lx(y)!==null)continue}else K=M.action;typeof K=="function"?u[m+1]=K:(u.splice(m,3),m-=3),d5(u)}}}function h5(){function s(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(M){return y=M})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),m||setTimeout(u,20)}function u(){if(!m&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){m=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function kx(s){this._internalRoot=s}bp.prototype.render=kx.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(r(409));var u=o.current,m=Ra();r5(u,m,s,o,null,null)},bp.prototype.unmount=kx.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;r5(s.current,2,null,s,null,null),ep(),o[Gr]=null}};function bp(s){this._internalRoot=s}bp.prototype.unstable_scheduleHydration=function(s){if(s){var o=$r();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Xc.length&&o!==0&&o<Xc[u].priority;u++);Xc.splice(u,0,s),u===0&&c5(s)}};var f5=e.version;if(f5!=="19.2.1")throw Error(r(527,f5,"19.2.1"));ae.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(o),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var Q6={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wp.isDisabled&&wp.supportsFiber)try{rn=wp.inject(Q6),Lt=wp}catch{}}return Sf.createRoot=function(s,o){if(!i(s))throw Error(r(299));var u=!1,m="",y=b2,N=w2,M=_2;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(N=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),o=t5(s,1,!1,null,null,u,m,null,y,N,M,h5),s[Gr]=o.current,mx(s),new kx(o)},Sf.hydrateRoot=function(s,o,u){if(!i(s))throw Error(r(299));var m=!1,y="",N=b2,M=w2,K=_2,xe=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(N=u.onUncaughtError),u.onCaughtError!==void 0&&(M=u.onCaughtError),u.onRecoverableError!==void 0&&(K=u.onRecoverableError),u.formState!==void 0&&(xe=u.formState)),o=t5(s,1,!0,o,u??null,m,y,xe,N,M,K,h5),o.context=n5(null),u=o.current,m=Ra(),m=Kn(m),y=Ht(m),y.callback=null,ln(u,y,m),u=m,o.current.lanes=u,Ct(o,u),ul(o),s[Gr]=o.current,mx(s),new bp(o)},Sf.version="19.2.1",Sf}var N5;function oE(){if(N5)return Mx.exports;N5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mx.exports=aE(),Mx.exports}var lE=oE();let cE={data:""},uE=n=>{if(typeof window=="object"){let e=(n?n.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(n||document.head).appendChild(e),e.firstChild}return n||cE},dE=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,hE=/\/\*[^]*?\*\/|  +/g,A5=/\n+/g,ru=(n,e)=>{let t="",r="",i="";for(let a in n){let c=n[a];a[0]=="@"?a[1]=="i"?t=a+" "+c+";":r+=a[1]=="f"?ru(c,a):a+"{"+ru(c,a[1]=="k"?"":e)+"}":typeof c=="object"?r+=ru(c,e?e.replace(/([^,])+/g,d=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,d):d?d+" "+h:h)):a):c!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=ru.p?ru.p(a,c):a+":"+c+";")}return t+(e&&i?e+"{"+i+"}":i)+r},rc={},ZN=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+ZN(n[t]);return e}return n},fE=(n,e,t,r,i)=>{let a=ZN(n),c=rc[a]||(rc[a]=(h=>{let f=0,p=11;for(;f<h.length;)p=101*p+h.charCodeAt(f++)>>>0;return"go"+p})(a));if(!rc[c]){let h=a!==n?n:(f=>{let p,v,_=[{}];for(;p=dE.exec(f.replace(hE,""));)p[4]?_.shift():p[3]?(v=p[3].replace(A5," ").trim(),_.unshift(_[0][v]=_[0][v]||{})):_[0][p[1]]=p[2].replace(A5," ").trim();return _[0]})(n);rc[c]=ru(i?{["@keyframes "+c]:h}:h,t?"":"."+c)}let d=t&&rc.g?rc.g:null;return t&&(rc.g=rc[c]),((h,f,p,v)=>{v?f.data=f.data.replace(v,h):f.data.indexOf(h)===-1&&(f.data=p?h+f.data:f.data+h)})(rc[c],e,r,d),c},mE=(n,e,t)=>n.reduce((r,i,a)=>{let c=e[a];if(c&&c.call){let d=c(t),h=d&&d.props&&d.props.className||/^go/.test(d)&&d;c=h?"."+h:d&&typeof d=="object"?d.props?"":ru(d,""):d===!1?"":d}return r+i+(c??"")},"");function Bg(n){let e=this||{},t=n.call?n(e.p):n;return fE(t.unshift?t.raw?mE(t,[].slice.call(arguments,1),e.p):t.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):t,uE(e.target),e.g,e.o,e.k)}let e4,Lv,Rv;Bg.bind({g:1});let pc=Bg.bind({k:1});function pE(n,e,t,r){ru.p=e,e4=n,Lv=t,Rv=r}function Au(n,e){let t=this||{};return function(){let r=arguments;function i(a,c){let d=Object.assign({},a),h=d.className||i.className;t.p=Object.assign({theme:Lv&&Lv()},d),t.o=/ *go\d+/.test(h),d.className=Bg.apply(t,r)+(h?" "+h:"");let f=n;return n[0]&&(f=d.as||n,delete d.as),Rv&&f[0]&&Rv(d),e4(f,d)}return i}}var gE=n=>typeof n=="function",ag=(n,e)=>gE(n)?n(e):n,xE=(()=>{let n=0;return()=>(++n).toString()})(),t4=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),vE=20,C1="default",n4=(n,e)=>{let{toastLimit:t}=n.settings;switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,t)};case 1:return{...n,toasts:n.toasts.map(c=>c.id===e.toast.id?{...c,...e.toast}:c)};case 2:let{toast:r}=e;return n4(n,{type:n.toasts.find(c=>c.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...n,toasts:n.toasts.map(c=>c.id===i||i===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(c=>c.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let a=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+a}))}}},qp=[],r4={toasts:[],pausedAt:void 0,settings:{toastLimit:vE}},ml={},i4=(n,e=C1)=>{ml[e]=n4(ml[e]||r4,n),qp.forEach(([t,r])=>{t===e&&r(ml[e])})},s4=n=>Object.keys(ml).forEach(e=>i4(n,e)),yE=n=>Object.keys(ml).find(e=>ml[e].toasts.some(t=>t.id===n)),Ug=(n=C1)=>e=>{i4(e,n)},bE={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},wE=(n={},e=C1)=>{let[t,r]=he.useState(ml[e]||r4),i=he.useRef(ml[e]);he.useEffect(()=>(i.current!==ml[e]&&r(ml[e]),qp.push([e,r]),()=>{let c=qp.findIndex(([d])=>d===e);c>-1&&qp.splice(c,1)}),[e]);let a=t.toasts.map(c=>{var d,h,f;return{...n,...n[c.type],...c,removeDelay:c.removeDelay||((d=n[c.type])==null?void 0:d.removeDelay)||n?.removeDelay,duration:c.duration||((h=n[c.type])==null?void 0:h.duration)||n?.duration||bE[c.type],style:{...n.style,...(f=n[c.type])==null?void 0:f.style,...c.style}}});return{...t,toasts:a}},_E=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:t?.id||xE()}),um=n=>(e,t)=>{let r=_E(e,n,t);return Ug(r.toasterId||yE(r.id))({type:2,toast:r}),r.id},Mi=(n,e)=>um("blank")(n,e);Mi.error=um("error");Mi.success=um("success");Mi.loading=um("loading");Mi.custom=um("custom");Mi.dismiss=(n,e)=>{let t={type:3,toastId:n};e?Ug(e)(t):s4(t)};Mi.dismissAll=n=>Mi.dismiss(void 0,n);Mi.remove=(n,e)=>{let t={type:4,toastId:n};e?Ug(e)(t):s4(t)};Mi.removeAll=n=>Mi.remove(void 0,n);Mi.promise=(n,e,t)=>{let r=Mi.loading(e.loading,{...t,...t?.loading});return typeof n=="function"&&(n=n()),n.then(i=>{let a=e.success?ag(e.success,i):void 0;return a?Mi.success(a,{id:r,...t,...t?.success}):Mi.dismiss(r),i}).catch(i=>{let a=e.error?ag(e.error,i):void 0;a?Mi.error(a,{id:r,...t,...t?.error}):Mi.dismiss(r)}),n};var NE=1e3,AE=(n,e="default")=>{let{toasts:t,pausedAt:r}=wE(n,e),i=he.useRef(new Map).current,a=he.useCallback((v,_=NE)=>{if(i.has(v))return;let b=setTimeout(()=>{i.delete(v),c({type:4,toastId:v})},_);i.set(v,b)},[]);he.useEffect(()=>{if(r)return;let v=Date.now(),_=t.map(b=>{if(b.duration===1/0)return;let T=(b.duration||0)+b.pauseDuration-(v-b.createdAt);if(T<0){b.visible&&Mi.dismiss(b.id);return}return setTimeout(()=>Mi.dismiss(b.id,e),T)});return()=>{_.forEach(b=>b&&clearTimeout(b))}},[t,r,e]);let c=he.useCallback(Ug(e),[e]),d=he.useCallback(()=>{c({type:5,time:Date.now()})},[c]),h=he.useCallback((v,_)=>{c({type:1,toast:{id:v,height:_}})},[c]),f=he.useCallback(()=>{r&&c({type:6,time:Date.now()})},[r,c]),p=he.useCallback((v,_)=>{let{reverseOrder:b=!1,gutter:T=8,defaultPosition:I}=_||{},L=t.filter(z=>(z.position||I)===(v.position||I)&&z.height),j=L.findIndex(z=>z.id===v.id),U=L.filter((z,B)=>B<j&&z.visible).length;return L.filter(z=>z.visible).slice(...b?[U+1]:[0,U]).reduce((z,B)=>z+(B.height||0)+T,0)},[t]);return he.useEffect(()=>{t.forEach(v=>{if(v.dismissed)a(v.id,v.removeDelay);else{let _=i.get(v.id);_&&(clearTimeout(_),i.delete(v.id))}})},[t,a]),{toasts:t,handlers:{updateHeight:h,startPause:d,endPause:f,calculateOffset:p}}},SE=pc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,jE=pc`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,EE=pc`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,TE=Au("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${SE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${jE} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${EE} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,CE=pc`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,IE=Au("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${CE} 1s linear infinite;
`,LE=pc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,RE=pc`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,kE=Au("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${LE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${RE} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,PE=Au("div")`
  position: absolute;
`,DE=Au("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ME=pc`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,OE=Au("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ME} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,FE=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?he.createElement(OE,null,e):e:t==="blank"?null:he.createElement(DE,null,he.createElement(IE,{...r}),t!=="loading"&&he.createElement(PE,null,t==="error"?he.createElement(TE,{...r}):he.createElement(kE,{...r})))},qE=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,VE=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,BE="0%{opacity:0;} 100%{opacity:1;}",UE="0%{opacity:1;} 100%{opacity:0;}",zE=Au("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,HE=Au("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,$E=(n,e)=>{let t=n.includes("top")?1:-1,[r,i]=t4()?[BE,UE]:[qE(t),VE(t)];return{animation:e?`${pc(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${pc(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},GE=he.memo(({toast:n,position:e,style:t,children:r})=>{let i=n.height?$E(n.position||e||"top-center",n.visible):{opacity:0},a=he.createElement(FE,{toast:n}),c=he.createElement(HE,{...n.ariaProps},ag(n.message,n));return he.createElement(zE,{className:n.className,style:{...i,...t,...n.style}},typeof r=="function"?r({icon:a,message:c}):he.createElement(he.Fragment,null,a,c))});pE(he.createElement);var WE=({id:n,className:e,style:t,onHeightUpdate:r,children:i})=>{let a=he.useCallback(c=>{if(c){let d=()=>{let h=c.getBoundingClientRect().height;r(n,h)};d(),new MutationObserver(d).observe(c,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return he.createElement("div",{ref:a,className:e,style:t},i)},YE=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:t4()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...i}},KE=Bg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,_p=16,QE=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:i,toasterId:a,containerStyle:c,containerClassName:d})=>{let{toasts:h,handlers:f}=AE(t,a);return he.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:_p,left:_p,right:_p,bottom:_p,pointerEvents:"none",...c},className:d,onMouseEnter:f.startPause,onMouseLeave:f.endPause},h.map(p=>{let v=p.position||e,_=f.calculateOffset(p,{reverseOrder:n,gutter:r,defaultPosition:e}),b=YE(v,_);return he.createElement(WE,{id:p.id,key:p.id,onHeightUpdate:f.updateHeight,className:p.visible?KE:"",style:b},p.type==="custom"?ag(p.message,p):i?i(p):he.createElement(GE,{toast:p,position:v}))}))},Pt=Mi;var S5="popstate";function XE(n={}){function e(r,i){let{pathname:a,search:c,hash:d}=r.location;return kv("",{pathname:a,search:c,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Kf(i)}return ZE(e,t,null,n)}function Dr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function lo(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JE(){return Math.random().toString(36).substring(2,10)}function j5(n,e){return{usr:n.state,key:n.key,idx:e}}function kv(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ih(e):e,state:t,key:e&&e.key||r||JE()}}function Kf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ih(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function ZE(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,d="POP",h=null,f=p();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function p(){return(c.state||{idx:null}).idx}function v(){d="POP";let L=p(),j=L==null?null:L-f;f=L,h&&h({action:d,location:I.location,delta:j})}function _(L,j){d="PUSH";let U=kv(I.location,L,j);f=p()+1;let z=j5(U,f),B=I.createHref(U);try{c.pushState(z,"",B)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;i.location.assign(B)}a&&h&&h({action:d,location:I.location,delta:1})}function b(L,j){d="REPLACE";let U=kv(I.location,L,j);f=p();let z=j5(U,f),B=I.createHref(U);c.replaceState(z,"",B),a&&h&&h({action:d,location:I.location,delta:0})}function T(L){return eT(L)}let I={get action(){return d},get location(){return n(i,c)},listen(L){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(S5,v),h=L,()=>{i.removeEventListener(S5,v),h=null}},createHref(L){return e(i,L)},createURL:T,encodeLocation(L){let j=T(L);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:_,replace:b,go(L){return c.go(L)}};return I}function eT(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Dr(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Kf(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function a4(n,e,t="/"){return tT(n,e,t,!1)}function tT(n,e,t,r){let i=typeof e=="string"?Ih(e):e,a=gc(i.pathname||"/",t);if(a==null)return null;let c=o4(n);nT(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=fT(a);d=dT(c[h],f,r)}return d}function o4(n,e=[],t=[],r="",i=!1){let a=(c,d,h=i,f)=>{let p={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&h)return;Dr(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let v=fc([r,p.relativePath]),_=t.concat(p);c.children&&c.children.length>0&&(Dr(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),o4(c.children,e,_,v,h)),!(c.path==null&&!c.index)&&e.push({path:v,score:cT(v,c.index),routesMeta:_})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))a(c,d);else for(let h of l4(c.path))a(c,d,!0,h)}),e}function l4(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=l4(r.join("/")),d=[];return d.push(...c.map(h=>h===""?a:[a,h].join("/"))),i&&d.push(...c),d.map(h=>n.startsWith("/")&&h===""?"/":h)}function nT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:uT(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var rT=/^:[\w-]+$/,iT=3,sT=2,aT=1,oT=10,lT=-2,E5=n=>n==="*";function cT(n,e){let t=n.split("/"),r=t.length;return t.some(E5)&&(r+=lT),e&&(r+=sT),t.filter(i=>!E5(i)).reduce((i,a)=>i+(rT.test(a)?iT:a===""?aT:oT),r)}function uT(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function dT(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",c=[];for(let d=0;d<r.length;++d){let h=r[d],f=d===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",v=og({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),_=h.route;if(!v&&f&&t&&!r[r.length-1].route.index&&(v=og({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!v)return null;Object.assign(i,v.params),c.push({params:i,pathname:fc([a,v.pathname]),pathnameBase:vT(fc([a,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(a=fc([a,v.pathnameBase]))}return c}function og(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=hT(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:v},_)=>{if(p==="*"){let T=d[_]||"";c=a.slice(0,a.length-T.length).replace(/(.)\/+$/,"$1")}const b=d[_];return v&&!b?f[p]=void 0:f[p]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:n}}function hT(n,e=!1,t=!0){lo(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function fT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lo(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function gc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var mT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pT=n=>mT.test(n);function gT(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ih(n):n,a;if(t)if(pT(t))a=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),lo(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?a=T5(t.substring(1),"/"):a=T5(t,e)}else a=e;return{pathname:a,search:yT(r),hash:bT(i)}}function T5(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Vx(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function I1(n){let e=xT(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function L1(n,e,t,r=!1){let i;typeof n=="string"?i=Ih(n):(i={...n},Dr(!i.pathname||!i.pathname.includes("?"),Vx("?","pathname","search",i)),Dr(!i.pathname||!i.pathname.includes("#"),Vx("#","pathname","hash",i)),Dr(!i.search||!i.search.includes("#"),Vx("#","search","hash",i)));let a=n===""||i.pathname==="",c=a?"/":i.pathname,d;if(c==null)d=t;else{let v=e.length-1;if(!r&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),v-=1;i.pathname=_.join("/")}d=v>=0?e[v]:"/"}let h=gT(i,d),f=c&&c!=="/"&&c.endsWith("/"),p=(a||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var fc=n=>n.join("/").replace(/\/\/+/g,"/"),vT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),yT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,bT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function wT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function _T(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var c4=["POST","PUT","PATCH","DELETE"];new Set(c4);var NT=["GET",...c4];new Set(NT);var Lh=he.createContext(null);Lh.displayName="DataRouter";var zg=he.createContext(null);zg.displayName="DataRouterState";he.createContext(!1);var u4=he.createContext({isTransitioning:!1});u4.displayName="ViewTransition";var AT=he.createContext(new Map);AT.displayName="Fetchers";var ST=he.createContext(null);ST.displayName="Await";var uo=he.createContext(null);uo.displayName="Navigation";var dm=he.createContext(null);dm.displayName="Location";var Tl=he.createContext({outlet:null,matches:[],isDataRoute:!1});Tl.displayName="Route";var R1=he.createContext(null);R1.displayName="RouteError";function jT(n,{relative:e}={}){Dr(Rh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=he.useContext(uo),{hash:i,pathname:a,search:c}=hm(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:fc([t,a])),r.createHref({pathname:d,search:c,hash:i})}function Rh(){return he.useContext(dm)!=null}function Su(){return Dr(Rh(),"useLocation() may be used only in the context of a <Router> component."),he.useContext(dm).location}var d4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function h4(n){he.useContext(uo).static||he.useLayoutEffect(n)}function f4(){let{isDataRoute:n}=he.useContext(Tl);return n?qT():ET()}function ET(){Dr(Rh(),"useNavigate() may be used only in the context of a <Router> component.");let n=he.useContext(Lh),{basename:e,navigator:t}=he.useContext(uo),{matches:r}=he.useContext(Tl),{pathname:i}=Su(),a=JSON.stringify(I1(r)),c=he.useRef(!1);return h4(()=>{c.current=!0}),he.useCallback((h,f={})=>{if(lo(c.current,d4),!c.current)return;if(typeof h=="number"){t.go(h);return}let p=L1(h,JSON.parse(a),i,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:fc([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,a,i,n])}he.createContext(null);function hm(n,{relative:e}={}){let{matches:t}=he.useContext(Tl),{pathname:r}=Su(),i=JSON.stringify(I1(t));return he.useMemo(()=>L1(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function TT(n,e){return m4(n,e)}function m4(n,e,t,r,i){Dr(Rh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=he.useContext(uo),{matches:c}=he.useContext(Tl),d=c[c.length-1],h=d?d.params:{},f=d?d.pathname:"/",p=d?d.pathnameBase:"/",v=d&&d.route;{let U=v&&v.path||"";p4(f,!v||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let _=Su(),b;if(e){let U=typeof e=="string"?Ih(e):e;Dr(p==="/"||U.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${U.pathname}" was given in the \`location\` prop.`),b=U}else b=_;let T=b.pathname||"/",I=T;if(p!=="/"){let U=p.replace(/^\//,"").split("/");I="/"+T.replace(/^\//,"").split("/").slice(U.length).join("/")}let L=a4(n,{pathname:I});lo(v||L!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),lo(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=kT(L&&L.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:fc([p,a.encodeLocation?a.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?p:fc([p,a.encodeLocation?a.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),c,t,r,i);return e&&j?he.createElement(dm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},j):j}function CT(){let n=FT(),e=wT(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=he.createElement(he.Fragment,null,he.createElement("p",null," Hey developer "),he.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",he.createElement("code",{style:a},"ErrorBoundary")," or"," ",he.createElement("code",{style:a},"errorElement")," prop on your route.")),he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},e),t?he.createElement("pre",{style:i},t):null,c)}var IT=he.createElement(CT,null),LT=class extends he.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?he.createElement(Tl.Provider,{value:this.props.routeContext},he.createElement(R1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RT({routeContext:n,match:e,children:t}){let r=he.useContext(Lh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),he.createElement(Tl.Provider,{value:n},t)}function kT(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,c=t?.errors;if(c!=null){let p=a.findIndex(v=>v.route.id&&c?.[v.route.id]!==void 0);Dr(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let d=!1,h=-1;if(t)for(let p=0;p<a.length;p++){let v=a[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(h=p),v.route.id){let{loaderData:_,errors:b}=t,T=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!b||b[v.route.id]===void 0);if(v.route.lazy||T){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}let f=t&&r?(p,v)=>{r(p,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:_T(t.matches),errorInfo:v})}:void 0;return a.reduceRight((p,v,_)=>{let b,T=!1,I=null,L=null;t&&(b=c&&v.route.id?c[v.route.id]:void 0,I=v.route.errorElement||IT,d&&(h<0&&_===0?(p4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,L=null):h===_&&(T=!0,L=v.route.hydrateFallbackElement||null)));let j=e.concat(a.slice(0,_+1)),U=()=>{let z;return b?z=I:T?z=L:v.route.Component?z=he.createElement(v.route.Component,null):v.route.element?z=v.route.element:z=p,he.createElement(RT,{match:v,routeContext:{outlet:p,matches:j,isDataRoute:t!=null},children:z})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?he.createElement(LT,{location:t.location,revalidation:t.revalidation,component:I,error:b,children:U(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:f}):U()},null)}function k1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PT(n){let e=he.useContext(Lh);return Dr(e,k1(n)),e}function DT(n){let e=he.useContext(zg);return Dr(e,k1(n)),e}function MT(n){let e=he.useContext(Tl);return Dr(e,k1(n)),e}function P1(n){let e=MT(n),t=e.matches[e.matches.length-1];return Dr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function OT(){return P1("useRouteId")}function FT(){let n=he.useContext(R1),e=DT("useRouteError"),t=P1("useRouteError");return n!==void 0?n:e.errors?.[t]}function qT(){let{router:n}=PT("useNavigate"),e=P1("useNavigate"),t=he.useRef(!1);return h4(()=>{t.current=!0}),he.useCallback(async(i,a={})=>{lo(t.current,d4),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var C5={};function p4(n,e,t){!e&&!C5[n]&&(C5[n]=!0,lo(!1,t))}he.memo(VT);function VT({routes:n,future:e,state:t,unstable_onError:r}){return m4(n,void 0,t,r,e)}function BT({to:n,replace:e,state:t,relative:r}){Dr(Rh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=he.useContext(uo);lo(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=he.useContext(Tl),{pathname:c}=Su(),d=f4(),h=L1(n,I1(a),c,r==="path"),f=JSON.stringify(h);return he.useEffect(()=>{d(JSON.parse(f),{replace:e,state:t,relative:r})},[d,f,r,e,t]),null}function Hs(n){Dr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UT({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:c}){Dr(!Rh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),h=he.useMemo(()=>({basename:d,navigator:i,static:a,unstable_useTransitions:c,future:{}}),[d,i,a,c]);typeof t=="string"&&(t=Ih(t));let{pathname:f="/",search:p="",hash:v="",state:_=null,key:b="default"}=t,T=he.useMemo(()=>{let I=gc(f,d);return I==null?null:{location:{pathname:I,search:p,hash:v,state:_,key:b},navigationType:r}},[d,f,p,v,_,b,r]);return lo(T!=null,`<Router basename="${d}"> is not able to match the URL "${f}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:he.createElement(uo.Provider,{value:h},he.createElement(dm.Provider,{children:e,value:T}))}function zT({children:n,location:e}){return TT(Pv(n),e)}function Pv(n,e=[]){let t=[];return he.Children.forEach(n,(r,i)=>{if(!he.isValidElement(r))return;let a=[...e,i];if(r.type===he.Fragment){t.push.apply(t,Pv(r.props.children,a));return}Dr(r.type===Hs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Dr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Pv(r.props.children,a)),t.push(c)}),t}var Vp="get",Bp="application/x-www-form-urlencoded";function Hg(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function HT(n){return Hg(n)&&n.tagName.toLowerCase()==="button"}function $T(n){return Hg(n)&&n.tagName.toLowerCase()==="form"}function GT(n){return Hg(n)&&n.tagName.toLowerCase()==="input"}function WT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function YT(n,e){return n.button===0&&(!e||e==="_self")&&!WT(n)}var Np=null;function KT(){if(Np===null)try{new FormData(document.createElement("form"),0),Np=!1}catch{Np=!0}return Np}var QT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bx(n){return n!=null&&!QT.has(n)?(lo(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bp}"`),null):n}function XT(n,e){let t,r,i,a,c;if($T(n)){let d=n.getAttribute("action");r=d?gc(d,e):null,t=n.getAttribute("method")||Vp,i=Bx(n.getAttribute("enctype"))||Bp,a=new FormData(n)}else if(HT(n)||GT(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||d.getAttribute("action");if(r=h?gc(h,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Vp,i=Bx(n.getAttribute("formenctype"))||Bx(d.getAttribute("enctype"))||Bp,a=new FormData(d,n),!KT()){let{name:f,type:p,value:v}=n;if(p==="image"){let _=f?`${f}.`:"";a.append(`${_}x`,"0"),a.append(`${_}y`,"0")}else f&&a.append(f,v)}}else{if(Hg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Vp,r=null,i=Bp,c=n}return a&&i==="text/plain"&&(c=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function D1(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function JT(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&gc(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function ZT(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function eC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function tC(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let c=await ZT(a,t);return c.links?c.links():[]}return[]}));return sC(r.flat(1).filter(eC).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function I5(n,e,t,r,i,a){let c=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,d=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return a==="assets"?e.filter((h,f)=>c(h,f)||d(h,f)):a==="data"?e.filter((h,f)=>{let p=r.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(c(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function nC(n,e,{includeHydrateFallback:t}={}){return rC(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function rC(n){return[...new Set(n)]}function iC(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function sC(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(iC(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function g4(){let n=he.useContext(Lh);return D1(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function aC(){let n=he.useContext(zg);return D1(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var M1=he.createContext(void 0);M1.displayName="FrameworkContext";function x4(){let n=he.useContext(M1);return D1(n,"You must render this element inside a <HydratedRouter> element"),n}function oC(n,e){let t=he.useContext(M1),[r,i]=he.useState(!1),[a,c]=he.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:v}=e,_=he.useRef(null);he.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let I=j=>{j.forEach(U=>{c(U.isIntersecting)})},L=new IntersectionObserver(I,{threshold:.5});return _.current&&L.observe(_.current),()=>{L.disconnect()}}},[n]),he.useEffect(()=>{if(r){let I=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(I)}}},[r]);let b=()=>{i(!0)},T=()=>{i(!1),c(!1)};return t?n!=="intent"?[a,_,{}]:[a,_,{onFocus:jf(d,b),onBlur:jf(h,T),onMouseEnter:jf(f,b),onMouseLeave:jf(p,T),onTouchStart:jf(v,b)}]:[!1,_,{}]}function jf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function lC({page:n,...e}){let{router:t}=g4(),r=he.useMemo(()=>a4(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?he.createElement(uC,{page:n,matches:r,...e}):null}function cC(n){let{manifest:e,routeModules:t}=x4(),[r,i]=he.useState([]);return he.useEffect(()=>{let a=!1;return tC(n,e,t).then(c=>{a||i(c)}),()=>{a=!0}},[n,e,t]),r}function uC({page:n,matches:e,...t}){let r=Su(),{manifest:i,routeModules:a}=x4(),{basename:c}=g4(),{loaderData:d,matches:h}=aC(),f=he.useMemo(()=>I5(n,e,h,i,r,"data"),[n,e,h,i,r]),p=he.useMemo(()=>I5(n,e,h,i,r,"assets"),[n,e,h,i,r]),v=he.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let T=new Set,I=!1;if(e.forEach(j=>{let U=i.routes[j.route.id];!U||!U.hasLoader||(!f.some(z=>z.route.id===j.route.id)&&j.route.id in d&&a[j.route.id]?.shouldRevalidate||U.hasClientLoader?I=!0:T.add(j.route.id))}),T.size===0)return[];let L=JT(n,c,"data");return I&&T.size>0&&L.searchParams.set("_routes",e.filter(j=>T.has(j.route.id)).map(j=>j.route.id).join(",")),[L.pathname+L.search]},[c,d,r,i,f,e,n,a]),_=he.useMemo(()=>nC(p,i),[p,i]),b=cC(p);return he.createElement(he.Fragment,null,v.map(T=>he.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),_.map(T=>he.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),b.map(({key:T,link:I})=>he.createElement("link",{key:T,nonce:t.nonce,...I})))}function dC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var v4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{v4&&(window.__reactRouterVersion="7.10.1")}catch{}function hC({basename:n,children:e,unstable_useTransitions:t,window:r}){let i=he.useRef();i.current==null&&(i.current=XE({window:r,v5Compat:!0}));let a=i.current,[c,d]=he.useState({action:a.action,location:a.location}),h=he.useCallback(f=>{t===!1?d(f):he.startTransition(()=>d(f))},[t]);return he.useLayoutEffect(()=>a.listen(h),[a,h]),he.createElement(UT,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:a,unstable_useTransitions:t===!0})}var y4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b4=he.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:c,state:d,target:h,to:f,preventScrollReset:p,viewTransition:v,..._},b){let{basename:T,unstable_useTransitions:I}=he.useContext(uo),L=typeof f=="string"&&y4.test(f),j,U=!1;if(typeof f=="string"&&L&&(j=f,v4))try{let $=new URL(window.location.href),S=f.startsWith("//")?new URL($.protocol+f):new URL(f),R=gc(S.pathname,T);S.origin===$.origin&&R!=null?f=R+S.search+S.hash:U=!0}catch{lo(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=jT(f,{relative:i}),[B,re,ne]=oC(r,_),V=pC(f,{replace:c,state:d,target:h,preventScrollReset:p,relative:i,viewTransition:v,unstable_useTransitions:I});function D($){e&&e($),$.defaultPrevented||V($)}let k=he.createElement("a",{..._,...ne,href:j||z,onClick:U||a?e:D,ref:dC(b,re),target:h,"data-discover":!L&&t==="render"?"true":void 0});return B&&!L?he.createElement(he.Fragment,null,k,he.createElement(lC,{page:z})):k});b4.displayName="Link";var w4=he.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:c,viewTransition:d,children:h,...f},p){let v=hm(c,{relative:f.relative}),_=Su(),b=he.useContext(zg),{navigator:T,basename:I}=he.useContext(uo),L=b!=null&&bC(v)&&d===!0,j=T.encodeLocation?T.encodeLocation(v).pathname:v.pathname,U=_.pathname,z=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(U=U.toLowerCase(),z=z?z.toLowerCase():null,j=j.toLowerCase()),z&&I&&(z=gc(z,I)||z);const B=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let re=U===j||!i&&U.startsWith(j)&&U.charAt(B)==="/",ne=z!=null&&(z===j||!i&&z.startsWith(j)&&z.charAt(j.length)==="/"),V={isActive:re,isPending:ne,isTransitioning:L},D=re?e:void 0,k;typeof r=="function"?k=r(V):k=[r,re?"active":null,ne?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let $=typeof a=="function"?a(V):a;return he.createElement(b4,{...f,"aria-current":D,className:k,ref:p,style:$,to:c,viewTransition:d},typeof h=="function"?h(V):h)});w4.displayName="NavLink";var fC=he.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:c=Vp,action:d,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:v,..._},b)=>{let{unstable_useTransitions:T}=he.useContext(uo),I=vC(),L=yC(d,{relative:f}),j=c.toLowerCase()==="get"?"get":"post",U=typeof d=="string"&&y4.test(d),z=B=>{if(h&&h(B),B.defaultPrevented)return;B.preventDefault();let re=B.nativeEvent.submitter,ne=re?.getAttribute("formmethod")||c,V=()=>I(re||B.currentTarget,{fetcherKey:e,method:ne,navigate:t,replace:i,state:a,relative:f,preventScrollReset:p,viewTransition:v});T&&t!==!1?he.startTransition(()=>V()):V()};return he.createElement("form",{ref:b,method:j,action:L,onSubmit:r?h:z,..._,"data-discover":!U&&n==="render"?"true":void 0})});fC.displayName="Form";function mC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _4(n){let e=he.useContext(Lh);return Dr(e,mC(n)),e}function pC(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:c,unstable_useTransitions:d}={}){let h=f4(),f=Su(),p=hm(n,{relative:a});return he.useCallback(v=>{if(YT(v,e)){v.preventDefault();let _=t!==void 0?t:Kf(f)===Kf(p),b=()=>h(n,{replace:_,state:r,preventScrollReset:i,relative:a,viewTransition:c});d?he.startTransition(()=>b()):b()}},[f,h,p,t,r,e,n,i,a,c,d])}var gC=0,xC=()=>`__${String(++gC)}__`;function vC(){let{router:n}=_4("useSubmit"),{basename:e}=he.useContext(uo),t=OT(),r=n.fetch,i=n.navigate;return he.useCallback(async(a,c={})=>{let{action:d,method:h,encType:f,formData:p,body:v}=XT(a,e);if(c.navigate===!1){let _=c.fetcherKey||xC();await r(_,t,c.action||d,{preventScrollReset:c.preventScrollReset,formData:p,body:v,formMethod:c.method||h,formEncType:c.encType||f,flushSync:c.flushSync})}else await i(c.action||d,{preventScrollReset:c.preventScrollReset,formData:p,body:v,formMethod:c.method||h,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,i,e,t])}function yC(n,{relative:e}={}){let{basename:t}=he.useContext(uo),r=he.useContext(Tl);Dr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...hm(n||".",{relative:e})},c=Su();if(n==null){a.search=c.search;let d=new URLSearchParams(a.search),h=d.getAll("index");if(h.some(p=>p==="")){d.delete("index"),h.filter(v=>v).forEach(v=>d.append("index",v));let p=d.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:fc([t,a.pathname])),Kf(a)}function bC(n,{relative:e}={}){let t=he.useContext(u4);Dr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=_4("useViewTransitionState"),i=hm(n,{relative:e});if(!t.isTransitioning)return!1;let a=gc(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=gc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return og(i.pathname,c)!=null||og(i.pathname,a)!=null}const wC=()=>{};var L5={};const N4=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},_C=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],c=n[t++],d=n[t++],h=((i&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},A4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],c=i+1<n.length,d=c?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,p=a>>2,v=(a&3)<<4|d>>4;let _=(d&15)<<2|f>>6,b=f&63;h||(b=64,c||(_=64)),r.push(t[p],t[v],t[_],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(N4(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):_C(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const v=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||d==null||f==null||v==null)throw new NC;const _=a<<2|d>>4;if(r.push(_),f!==64){const b=d<<4&240|f>>2;if(r.push(b),v!==64){const T=f<<6&192|v;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class NC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AC=function(n){const e=N4(n);return A4.encodeByteArray(e,!0)},lg=function(n){return AC(n).replace(/\./g,"")},S4=function(n){try{return A4.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function SC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const jC=()=>SC().__FIREBASE_DEFAULTS__,EC=()=>{if(typeof process>"u"||typeof L5>"u")return;const n=L5.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},TC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&S4(n[1]);return e&&JSON.parse(e)},$g=()=>{try{return wC()||jC()||EC()||TC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},j4=n=>$g()?.emulatorHosts?.[n],CC=n=>{const e=j4(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},E4=()=>$g()?.config,T4=n=>$g()?.[`_${n}`];class IC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function kh(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function C4(n){return(await fetch(n,{credentials:"include"})).ok}function LC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[lg(JSON.stringify(t)),lg(JSON.stringify(c)),""].join(".")}const Ff={};function RC(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ff))Ff[e]?n.emulator.push(e):n.prod.push(e);return n}function kC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let R5=!1;function I4(n,e){if(typeof window>"u"||typeof document>"u"||!kh(window.location.host)||Ff[n]===e||Ff[n]||R5)return;Ff[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=RC().prod.length>0;function c(){const _=document.getElementById(r);_&&_.remove()}function d(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,b){_.setAttribute("width","24"),_.setAttribute("id",b),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{R5=!0,c()},_}function p(_,b){_.setAttribute("id",b),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=kC(r),b=t("text"),T=document.getElementById(b)||document.createElement("span"),I=t("learnmore"),L=document.getElementById(I)||document.createElement("a"),j=t("preprendIcon"),U=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const z=_.element;d(z),p(L,I);const B=f();h(U,j),z.append(U,T,L,B),document.body.appendChild(z)}a?(T.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function ks(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ks())}function DC(){const n=$g()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function L4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function OC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FC(){const n=ks();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qC(){return!DC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R4(){try{return typeof indexedDB=="object"}catch{return!1}}function k4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}function VC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const BC="FirebaseError";class Vo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=BC,Object.setPrototypeOf(this,Vo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ud.prototype.create)}}class ud{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?UC(a,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new Vo(i,d,r)}}function UC(n,e){return n.replace(zC,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const zC=/\{\$([^}]+)}/g;function HC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function pu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],c=e[i];if(k5(a)&&k5(c)){if(!pu(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function k5(n){return n!==null&&typeof n=="object"}function fm(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Rf(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function kf(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function $C(n,e){const t=new GC(n,e);return t.subscribe.bind(t)}class GC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");WC(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ux),i.error===void 0&&(i.error=Ux),i.complete===void 0&&(i.complete=Ux);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ux(){}const YC=1e3,KC=2,QC=14400*1e3,XC=.5;function P5(n,e=YC,t=KC){const r=e*Math.pow(t,n),i=Math.round(XC*r*(Math.random()-.5)*2);return Math.min(QC,r+i)}function Er(n){return n&&n._delegate?n._delegate:n}class Mo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Wu="[DEFAULT]";class JC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new IC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eI(e))try{this.getOrInitializeService({instanceIdentifier:Wu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Wu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wu){return this.instances.has(e)}getOptions(e=Wu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wu){return this.component?this.component.multipleInstances?e:Wu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZC(n){return n===Wu?void 0:n}function eI(n){return n.instantiationMode==="EAGER"}class tI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new JC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Nn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Nn||(Nn={}));const nI={debug:Nn.DEBUG,verbose:Nn.VERBOSE,info:Nn.INFO,warn:Nn.WARN,error:Nn.ERROR,silent:Nn.SILENT},rI=Nn.INFO,iI={[Nn.DEBUG]:"log",[Nn.VERBOSE]:"log",[Nn.INFO]:"info",[Nn.WARN]:"warn",[Nn.ERROR]:"error"},sI=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=iI[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gg{constructor(e){this.name=e,this._logLevel=rI,this._logHandler=sI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Nn.DEBUG,...e),this._logHandler(this,Nn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Nn.VERBOSE,...e),this._logHandler(this,Nn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Nn.INFO,...e),this._logHandler(this,Nn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Nn.WARN,...e),this._logHandler(this,Nn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Nn.ERROR,...e),this._logHandler(this,Nn.ERROR,...e)}}const aI=(n,e)=>e.some(t=>n instanceof t);let D5,M5;function oI(){return D5||(D5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lI(){return M5||(M5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P4=new WeakMap,Dv=new WeakMap,D4=new WeakMap,zx=new WeakMap,O1=new WeakMap;function cI(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(uu(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&P4.set(t,n)}).catch(()=>{}),O1.set(e,n),e}function uI(n){if(Dv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});Dv.set(n,e)}let Mv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Dv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||D4.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return uu(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function dI(n){Mv=n(Mv)}function hI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Hx(this),e,...t);return D4.set(r,e.sort?e.sort():[e]),uu(r)}:lI().includes(n)?function(...e){return n.apply(Hx(this),e),uu(P4.get(this))}:function(...e){return uu(n.apply(Hx(this),e))}}function fI(n){return typeof n=="function"?hI(n):(n instanceof IDBTransaction&&uI(n),aI(n,oI())?new Proxy(n,Mv):n)}function uu(n){if(n instanceof IDBRequest)return cI(n);if(zx.has(n))return zx.get(n);const e=fI(n);return e!==n&&(zx.set(n,e),O1.set(e,n)),e}const Hx=n=>O1.get(n);function M4(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),d=uu(c);return r&&c.addEventListener("upgradeneeded",h=>{r(uu(c.result),h.oldVersion,h.newVersion,uu(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),d.then(h=>{a&&h.addEventListener("close",()=>a()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const mI=["get","getKey","getAll","getAllKeys","count"],pI=["put","add","delete","clear"],$x=new Map;function O5(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($x.get(e))return $x.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=pI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mI.includes(t)))return;const a=async function(c,...d){const h=this.transaction(c,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(d.shift())),(await Promise.all([f[t](...d),i&&h.done]))[0]};return $x.set(e,a),a}dI(n=>({...n,get:(e,t,r)=>O5(e,t)||n.get(e,t,r),has:(e,t)=>!!O5(e,t)||n.has(e,t)}));class gI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function xI(n){return n.getComponent()?.type==="VERSION"}const Ov="@firebase/app",F5="0.14.6";const xc=new Gg("@firebase/app"),vI="@firebase/app-compat",yI="@firebase/analytics-compat",bI="@firebase/analytics",wI="@firebase/app-check-compat",_I="@firebase/app-check",NI="@firebase/auth",AI="@firebase/auth-compat",SI="@firebase/database",jI="@firebase/data-connect",EI="@firebase/database-compat",TI="@firebase/functions",CI="@firebase/functions-compat",II="@firebase/installations",LI="@firebase/installations-compat",RI="@firebase/messaging",kI="@firebase/messaging-compat",PI="@firebase/performance",DI="@firebase/performance-compat",MI="@firebase/remote-config",OI="@firebase/remote-config-compat",FI="@firebase/storage",qI="@firebase/storage-compat",VI="@firebase/firestore",BI="@firebase/ai",UI="@firebase/firestore-compat",zI="firebase",HI="12.6.0";const Fv="[DEFAULT]",$I={[Ov]:"fire-core",[vI]:"fire-core-compat",[bI]:"fire-analytics",[yI]:"fire-analytics-compat",[_I]:"fire-app-check",[wI]:"fire-app-check-compat",[NI]:"fire-auth",[AI]:"fire-auth-compat",[SI]:"fire-rtdb",[jI]:"fire-data-connect",[EI]:"fire-rtdb-compat",[TI]:"fire-fn",[CI]:"fire-fn-compat",[II]:"fire-iid",[LI]:"fire-iid-compat",[RI]:"fire-fcm",[kI]:"fire-fcm-compat",[PI]:"fire-perf",[DI]:"fire-perf-compat",[MI]:"fire-rc",[OI]:"fire-rc-compat",[FI]:"fire-gcs",[qI]:"fire-gcs-compat",[VI]:"fire-fst",[UI]:"fire-fst-compat",[BI]:"fire-vertex","fire-js":"fire-js",[zI]:"fire-js-all"};const cg=new Map,GI=new Map,qv=new Map;function q5(n,e){try{n.container.addComponent(e)}catch(t){xc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Al(n){const e=n.name;if(qv.has(e))return xc.debug(`There were multiple attempts to register component ${e}.`),!1;qv.set(e,n);for(const t of cg.values())q5(t,n);for(const t of GI.values())q5(t,n);return!0}function dd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ao(n){return n==null?!1:n.settings!==void 0}const WI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},du=new ud("app","Firebase",WI);class YI{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw du.create("app-deleted",{appName:this._name})}}const Ph=HI;function F1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Fv,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw du.create("bad-app-name",{appName:String(i)});if(t||(t=E4()),!t)throw du.create("no-options");const a=cg.get(i);if(a){if(pu(t,a.options)&&pu(r,a.config))return a;throw du.create("duplicate-app",{appName:i})}const c=new tI(i);for(const h of qv.values())c.addComponent(h);const d=new YI(t,r,c);return cg.set(i,d),d}function q1(n=Fv){const e=cg.get(n);if(!e&&n===Fv&&E4())return F1();if(!e)throw du.create("no-app",{appName:n});return e}function oo(n,e,t){let r=$I[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xc.warn(c.join(" "));return}Al(new Mo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const KI="firebase-heartbeat-database",QI=1,Qf="firebase-heartbeat-store";let Gx=null;function O4(){return Gx||(Gx=M4(KI,QI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Qf)}catch(t){console.warn(t)}}}}).catch(n=>{throw du.create("idb-open",{originalErrorMessage:n.message})})),Gx}async function XI(n){try{const t=(await O4()).transaction(Qf),r=await t.objectStore(Qf).get(F4(n));return await t.done,r}catch(e){if(e instanceof Vo)xc.warn(e.message);else{const t=du.create("idb-get",{originalErrorMessage:e?.message});xc.warn(t.message)}}}async function V5(n,e){try{const r=(await O4()).transaction(Qf,"readwrite");await r.objectStore(Qf).put(e,F4(n)),await r.done}catch(t){if(t instanceof Vo)xc.warn(t.message);else{const r=du.create("idb-set",{originalErrorMessage:t?.message});xc.warn(r.message)}}}function F4(n){return`${n.name}!${n.options.appId}`}const JI=1024,ZI=30;class eL{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nL(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=B5();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>ZI){const i=rL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xc.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=B5(),{heartbeatsToSend:t,unsentEntries:r}=tL(this._heartbeatsCache.heartbeats),i=lg(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return xc.warn(e),""}}}function B5(){return new Date().toISOString().substring(0,10)}function tL(n,e=JI){const t=[];let r=n.slice();for(const i of n){const a=t.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),U5(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),U5(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class nL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return R4()?k4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await XI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return V5(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return V5(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function U5(n){return lg(JSON.stringify({version:2,heartbeats:n})).length}function rL(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function iL(n){Al(new Mo("platform-logger",e=>new gI(e),"PRIVATE")),Al(new Mo("heartbeat",e=>new eL(e),"PRIVATE")),oo(Ov,F5,n),oo(Ov,F5,"esm2020"),oo("fire-js","")}iL("");function q4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sL=q4,V4=new ud("auth","Firebase",q4());const ug=new Gg("@firebase/auth");function aL(n,...e){ug.logLevel<=Nn.WARN&&ug.warn(`Auth (${Ph}): ${n}`,...e)}function Up(n,...e){ug.logLevel<=Nn.ERROR&&ug.error(`Auth (${Ph}): ${n}`,...e)}function Oo(n,...e){throw V1(n,...e)}function gl(n,...e){return V1(n,...e)}function B4(n,e,t){const r={...sL(),[e]:t};return new ud("auth","Firebase",r).create(e,{appName:n.name})}function mc(n){return B4(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function V1(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return V4.create(n,...e)}function Yt(n,e,...t){if(!n)throw V1(e,...t)}function cc(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Up(e),new Error(e)}function vc(n,e){n||cc(e)}function Vv(){return typeof self<"u"&&self.location?.href||""}function oL(){return z5()==="http:"||z5()==="https:"}function z5(){return typeof self<"u"&&self.location?.protocol||null}function lL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oL()||L4()||"connection"in navigator)?navigator.onLine:!0}function cL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class mm{constructor(e,t){this.shortDelay=e,this.longDelay=t,vc(t>e,"Short delay should be less than long delay!"),this.isMobile=PC()||OC()}get(){return lL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function B1(n,e){vc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class U4{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const uL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const dL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hL=new mm(3e4,6e4);function ju(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function _c(n,e,t,r,i={}){return z4(n,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const d=fm({key:n.config.apiKey,...c}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...a};return MC()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&kh(n.emulatorConfig.host)&&(f.credentials="include"),U4.fetch()(await H4(n,n.config.apiHost,t,d),f)})}async function z4(n,e,t){n._canInitEmulator=!1;const r={...uL,...e};try{const i=new mL(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Ap(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[h,f]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ap(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Ap(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw Ap(n,"user-disabled",c);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw B4(n,p,f);Oo(n,p)}}catch(i){if(i instanceof Vo)throw i;Oo(n,"network-request-failed",{message:String(i)})}}async function pm(n,e,t,r,i={}){const a=await _c(n,e,t,r,i);return"mfaPendingCredential"in a&&Oo(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function H4(n,e,t,r){const i=`${e}${t}?${r}`,a=n,c=a.config.emulator?B1(n.config,i):`${n.config.apiScheme}://${i}`;return dL.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function fL(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(gl(this.auth,"network-request-failed")),hL.get())})}}function Ap(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=gl(n,e,r);return i.customData._tokenResponse=t,i}function H5(n){return n!==void 0&&n.enterprise!==void 0}class pL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return fL(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gL(n,e){return _c(n,"GET","/v2/recaptchaConfig",ju(n,e))}async function xL(n,e){return _c(n,"POST","/v1/accounts:delete",e)}async function dg(n,e){return _c(n,"POST","/v1/accounts:lookup",e)}function qf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vL(n,e=!1){const t=Er(n),r=await t.getIdToken(e),i=U1(r);Yt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a?.sign_in_provider;return{claims:i,token:r,authTime:qf(Wx(i.auth_time)),issuedAtTime:qf(Wx(i.iat)),expirationTime:qf(Wx(i.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Wx(n){return Number(n)*1e3}function U1(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Up("JWT malformed, contained fewer than 3 sections"),null;try{const i=S4(t);return i?JSON.parse(i):(Up("Failed to decode base64 JWT payload"),null)}catch(i){return Up("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $5(n){const e=U1(n);return Yt(e,"internal-error"),Yt(typeof e.exp<"u","internal-error"),Yt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function bh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Vo&&yL(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function yL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class bL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Bv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qf(this.lastLoginAt),this.creationTime=qf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hg(n){const e=n.auth,t=await n.getIdToken(),r=await bh(n,dg(e,{idToken:t}));Yt(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?$4(i.providerUserInfo):[],c=_L(n.providerData,a),d=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!c?.length,f=d?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Bv(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function wL(n){const e=Er(n);await hg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _L(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $4(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function NL(n,e){const t=await z4(n,{},async()=>{const r=fm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,c=await H4(n,i,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:r};return n.emulatorConfig&&kh(n.emulatorConfig.host)&&(h.credentials="include"),U4.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function AL(n,e){return _c(n,"POST","/v2/accounts:revokeToken",ju(n,e))}class uh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Yt(e.idToken,"internal-error"),Yt(typeof e.idToken<"u","internal-error"),Yt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Yt(e.length!==0,"internal-error");const t=$5(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Yt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await NL(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,c=new uh;return r&&(Yt(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Yt(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&(Yt(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uh,this.toJSON())}_performRefresh(){return cc("not implemented")}}function Zc(n,e){Yt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Do{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new bL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Bv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await bh(this,this.stsTokenManager.getToken(this.auth,e));return Yt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vL(this,e)}reload(){return wL(this)}_assign(e){this!==e&&(Yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Do({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await hg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ao(this.auth.app))return Promise.reject(mc(this.auth));const e=await this.getIdToken();return await bh(this,xL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:b,providerData:T,stsTokenManager:I}=t;Yt(v&&I,e,"internal-error");const L=uh.fromJSON(this.name,I);Yt(typeof v=="string",e,"internal-error"),Zc(r,e.name),Zc(i,e.name),Yt(typeof _=="boolean",e,"internal-error"),Yt(typeof b=="boolean",e,"internal-error"),Zc(a,e.name),Zc(c,e.name),Zc(d,e.name),Zc(h,e.name),Zc(f,e.name),Zc(p,e.name);const j=new Do({uid:v,auth:e,email:i,emailVerified:_,displayName:r,isAnonymous:b,photoURL:c,phoneNumber:a,tenantId:d,stsTokenManager:L,createdAt:f,lastLoginAt:p});return T&&Array.isArray(T)&&(j.providerData=T.map(U=>({...U}))),h&&(j._redirectEventId=h),j}static async _fromIdTokenResponse(e,t,r=!1){const i=new uh;i.updateFromServerResponse(t);const a=new Do({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await hg(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Yt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?$4(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!a?.length,d=new uh;d.updateFromIdToken(r);const h=new Do({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Bv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(h,f),h}}const G5=new Map;function uc(n){vc(n instanceof Function,"Expected a class definition");let e=G5.get(n);return e?(vc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,G5.set(n,e),e)}class G4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}G4.type="NONE";const W5=G4;function zp(n,e,t){return`firebase:${n}:${e}:${t}`}class dh{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=zp(this.userKey,i.apiKey,a),this.fullPersistenceKey=zp("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await dg(this.auth,{idToken:e}).catch(()=>{});return t?Do._fromGetAccountInfoResponse(this.auth,t,e):null}return Do._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new dh(uc(W5),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||uc(W5);const c=zp(r,e.config.apiKey,e.name);let d=null;for(const f of t)try{const p=await f._get(c);if(p){let v;if(typeof p=="string"){const _=await dg(e,{idToken:p}).catch(()=>{});if(!_)break;v=await Do._fromGetAccountInfoResponse(e,_,p)}else v=Do._fromJSON(e,p);f!==a&&(d=v),a=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new dh(a,e,r):(a=h[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(c)}catch{}})),new dh(a,e,r))}}function Y5(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(W4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(J4(e))return"Blackberry";if(Z4(e))return"Webos";if(Y4(e))return"Safari";if((e.includes("chrome/")||K4(e))&&!e.includes("edge/"))return"Chrome";if(X4(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function W4(n=ks()){return/firefox\//i.test(n)}function Y4(n=ks()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K4(n=ks()){return/crios\//i.test(n)}function Q4(n=ks()){return/iemobile/i.test(n)}function X4(n=ks()){return/android/i.test(n)}function J4(n=ks()){return/blackberry/i.test(n)}function Z4(n=ks()){return/webos/i.test(n)}function z1(n=ks()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function SL(n=ks()){return z1(n)&&!!window.navigator?.standalone}function jL(){return FC()&&document.documentMode===10}function eA(n=ks()){return z1(n)||X4(n)||Z4(n)||J4(n)||/windows phone/i.test(n)||Q4(n)}function tA(n,e=[]){let t;switch(n){case"Browser":t=Y5(ks());break;case"Worker":t=`${Y5(ks())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ph}/${r}`}class EL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,d)=>{try{const h=e(a);c(h)}catch(h){d(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function TL(n,e={}){return _c(n,"GET","/v2/passwordPolicy",ju(n,e))}const CL=6;class IL{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??CL,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class LL{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K5(this),this.idTokenSubscription=new K5(this),this.beforeStateQueue=new EL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=uc(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await dh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await dg(this,{idToken:e}),r=await Do._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ao(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===c)&&d?.user&&(r=d.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ao(this.app))return Promise.reject(mc(this));const t=e?Er(e):null;return t&&Yt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Yt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ao(this.app)?Promise.reject(mc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ao(this.app)?Promise.reject(mc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(uc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await TL(this),t=new IL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ud("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await AL(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&uc(e)||this._popupRedirectResolver;Yt(t,this,"argument-error"),this.redirectPersistenceManager=await dh.create(this,[uc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yt(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ao(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aL(`Error while retrieving App Check token: ${e.error}`),e?.token}}function hd(n){return Er(n)}class K5{constructor(e){this.auth=e,this.observer=null,this.addObserver=$C(t=>this.observer=t)}get next(){return Yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Wg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RL(n){Wg=n}function nA(n){return Wg.loadJS(n)}function kL(){return Wg.recaptchaEnterpriseScript}function PL(){return Wg.gapiScript}function DL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class ML{constructor(){this.enterprise=new OL}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class OL{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const FL="recaptcha-enterprise",rA="NO_RECAPTCHA";class qL{constructor(e){this.type=FL,this.auth=hd(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{gL(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new pL(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,c(f.siteKey)}}).catch(h=>{d(h)})})}function i(a,c,d){const h=window.grecaptcha;H5(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{c(f)}).catch(()=>{c(rA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ML().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(d=>{if(!t&&H5(window.grecaptcha))i(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=kL();h.length!==0&&(h+=d),nA(h).then(()=>{i(d,a,c)}).catch(f=>{c(f)})}}).catch(d=>{c(d)})})}}async function Q5(n,e,t,r=!1,i=!1){const a=new qL(n);let c;if(i)c=rA;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Uv(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Q5(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Q5(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)})}function VL(n,e){const t=dd(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(pu(a,e??{}))return i;Oo(i,"already-initialized")}return t.initialize({options:e})}function BL(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(uc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function UL(n,e,t){const r=hd(n);Yt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=iA(e),{host:c,port:d}=zL(e),h=d===null?"":`:${d}`,f={url:`${a}//${c}${h}/`},p=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Yt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Yt(pu(f,r.config.emulator)&&pu(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,kh(c)?(C4(`${a}//${c}${h}`),I4("Auth",!0)):HL()}function iA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zL(n){const e=iA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:X5(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:X5(c)}}}function X5(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function HL(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class H1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cc("not implemented")}_getIdTokenResponse(e){return cc("not implemented")}_linkToIdToken(e,t){return cc("not implemented")}_getReauthenticationResolver(e){return cc("not implemented")}}async function $L(n,e){return _c(n,"POST","/v1/accounts:signUp",e)}async function GL(n,e){return pm(n,"POST","/v1/accounts:signInWithPassword",ju(n,e))}async function WL(n,e){return pm(n,"POST","/v1/accounts:signInWithEmailLink",ju(n,e))}async function YL(n,e){return pm(n,"POST","/v1/accounts:signInWithEmailLink",ju(n,e))}class Xf extends H1{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Xf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Xf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uv(e,t,"signInWithPassword",GL);case"emailLink":return WL(e,{email:this._email,oobCode:this._password});default:Oo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uv(e,r,"signUpPassword",$L);case"emailLink":return YL(e,{idToken:t,email:this._email,oobCode:this._password});default:Oo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function hh(n,e){return pm(n,"POST","/v1/accounts:signInWithIdp",ju(n,e))}const KL="http://localhost";class td extends H1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new td(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Oo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const c=new td(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return hh(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,hh(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hh(e,t)}buildRequest(){const e={requestUri:KL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fm(t)}return e}}function QL(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XL(n){const e=Rf(kf(n)).link,t=e?Rf(kf(e)).deep_link_id:null,r=Rf(kf(n)).deep_link_id;return(r?Rf(kf(r)).link:null)||r||t||e||n}class $1{constructor(e){const t=Rf(kf(e)),r=t.apiKey??null,i=t.oobCode??null,a=QL(t.mode??null);Yt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=XL(e);try{return new $1(t)}catch{return null}}}class Dh{constructor(){this.providerId=Dh.PROVIDER_ID}static credential(e,t){return Xf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=$1.parseLink(t);return Yt(r,"argument-error"),Xf._fromEmailAndCode(e,r.code,r.tenantId)}}Dh.PROVIDER_ID="password";Dh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class sA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class gm extends sA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class iu extends gm{constructor(){super("facebook.com")}static credential(e){return td._fromParams({providerId:iu.PROVIDER_ID,signInMethod:iu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return iu.credentialFromTaggedObject(e)}static credentialFromError(e){return iu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return iu.credential(e.oauthAccessToken)}catch{return null}}}iu.FACEBOOK_SIGN_IN_METHOD="facebook.com";iu.PROVIDER_ID="facebook.com";class su extends gm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return td._fromParams({providerId:su.PROVIDER_ID,signInMethod:su.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return su.credentialFromTaggedObject(e)}static credentialFromError(e){return su.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return su.credential(t,r)}catch{return null}}}su.GOOGLE_SIGN_IN_METHOD="google.com";su.PROVIDER_ID="google.com";class au extends gm{constructor(){super("github.com")}static credential(e){return td._fromParams({providerId:au.PROVIDER_ID,signInMethod:au.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return au.credentialFromTaggedObject(e)}static credentialFromError(e){return au.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return au.credential(e.oauthAccessToken)}catch{return null}}}au.GITHUB_SIGN_IN_METHOD="github.com";au.PROVIDER_ID="github.com";class ou extends gm{constructor(){super("twitter.com")}static credential(e,t){return td._fromParams({providerId:ou.PROVIDER_ID,signInMethod:ou.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ou.credentialFromTaggedObject(e)}static credentialFromError(e){return ou.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ou.credential(t,r)}catch{return null}}}ou.TWITTER_SIGN_IN_METHOD="twitter.com";ou.PROVIDER_ID="twitter.com";async function JL(n,e){return pm(n,"POST","/v1/accounts:signUp",ju(n,e))}class nd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Do._fromIdTokenResponse(e,r,i),c=J5(r);return new nd({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=J5(r);return new nd({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function J5(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class fg extends Vo{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,fg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new fg(e,t,r,i)}}function aA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?fg._fromErrorAndOperation(n,a,e,r):a})}async function ZL(n,e,t=!1){const r=await bh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return nd._forOperation(n,"link",r)}async function eR(n,e,t=!1){const{auth:r}=n;if(ao(r.app))return Promise.reject(mc(r));const i="reauthenticate";try{const a=await bh(n,aA(r,i,e,n),t);Yt(a.idToken,r,"internal-error");const c=U1(a.idToken);Yt(c,r,"internal-error");const{sub:d}=c;return Yt(n.uid===d,r,"user-mismatch"),nd._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Oo(r,"user-mismatch"),a}}async function oA(n,e,t=!1){if(ao(n.app))return Promise.reject(mc(n));const r="signIn",i=await aA(n,r,e),a=await nd._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function tR(n,e){return oA(hd(n),e)}async function lA(n){const e=hd(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nR(n,e,t){if(ao(n.app))return Promise.reject(mc(n));const r=hd(n),c=await Uv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JL).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&lA(n),h}),d=await nd._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function rR(n,e,t){return ao(n.app)?Promise.reject(mc(n)):tR(Er(n),Dh.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lA(n),r})}async function iR(n,e){return _c(n,"POST","/v1/accounts:update",e)}async function sR(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Er(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await bh(r,iR(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function aR(n,e,t,r){return Er(n).onIdTokenChanged(e,t,r)}function oR(n,e,t){return Er(n).beforeAuthStateChanged(e,t)}function lR(n,e,t,r){return Er(n).onAuthStateChanged(e,t,r)}function cR(n){return Er(n).signOut()}const mg="__sak";class cA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mg,"1"),this.storage.removeItem(mg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const uR=1e3,dR=10;class uA extends cA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);jL()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,dR):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},uR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}uA.type="LOCAL";const hR=uA;class dA extends cA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}dA.type="SESSION";const hA=dA;function fR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Yg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Yg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,c=this.handlersMap[i];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async f=>f(t.origin,a)),h=await fR(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yg.receivers=[];function G1(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class mR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((d,h)=>{const f=G1("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(v){const _=v;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(_.data.response);break;default:clearTimeout(p),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function xl(){return window}function pR(n){xl().location.href=n}function fA(){return typeof xl().WorkerGlobalScope<"u"&&typeof xl().importScripts=="function"}async function gR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xR(){return navigator?.serviceWorker?.controller||null}function vR(){return fA()?self:null}const mA="firebaseLocalStorageDb",yR=1,pg="firebaseLocalStorage",pA="fbase_key";class xm{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kg(n,e){return n.transaction([pg],e?"readwrite":"readonly").objectStore(pg)}function bR(){const n=indexedDB.deleteDatabase(mA);return new xm(n).toPromise()}function zv(){const n=indexedDB.open(mA,yR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(pg,{keyPath:pA})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(pg)?e(r):(r.close(),await bR(),e(await zv()))})})}async function Z5(n,e,t){const r=Kg(n,!0).put({[pA]:e,value:t});return new xm(r).toPromise()}async function wR(n,e){const t=Kg(n,!1).get(e),r=await new xm(t).toPromise();return r===void 0?null:r.value}function ew(n,e){const t=Kg(n,!0).delete(e);return new xm(t).toPromise()}const _R=800,NR=3;class gA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>NR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yg._getInstance(vR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await gR(),!this.activeServiceWorker)return;this.sender=new mR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zv();return await Z5(e,mg,"1"),await ew(e,mg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Z5(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>wR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ew(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Kg(i,!1).getAll();return new xm(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_R)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gA.type="LOCAL";const AR=gA;new mm(3e4,6e4);function SR(n,e){return e?uc(e):(Yt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class W1 extends H1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hh(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jR(n){return oA(n.auth,new W1(n),n.bypassAuthState)}function ER(n){const{auth:e,user:t}=n;return Yt(t,e,"internal-error"),eR(t,new W1(n),n.bypassAuthState)}async function TR(n){const{auth:e,user:t}=n;return Yt(t,e,"internal-error"),ZL(t,new W1(n),n.bypassAuthState)}class xA{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jR;case"linkViaPopup":case"linkViaRedirect":return TR;case"reauthViaPopup":case"reauthViaRedirect":return ER;default:Oo(this.auth,"internal-error")}}resolve(e){vc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const CR=new mm(2e3,1e4);class oh extends xA{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,oh.currentPopupAction&&oh.currentPopupAction.cancel(),oh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Yt(e,this.auth,"internal-error"),e}async onExecution(){vc(this.filter.length===1,"Popup operations only handle one event");const e=G1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(gl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oh.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CR.get())};e()}}oh.currentPopupAction=null;const IR="pendingRedirect",Hp=new Map;class LR extends xA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Hp.get(this.auth._key());if(!e){try{const r=await RR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Hp.set(this.auth._key(),e)}return this.bypassAuthState||Hp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RR(n,e){const t=DR(e),r=PR(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function kR(n,e){Hp.set(n._key(),e)}function PR(n){return uc(n._redirectPersistence)}function DR(n){return zp(IR,n.config.apiKey,n.name)}async function MR(n,e,t=!1){if(ao(n.app))return Promise.reject(mc(n));const r=hd(n),i=SR(r,e),c=await new LR(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const OR=600*1e3;class FR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!vA(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(gl(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OR&&this.cachedEventUids.clear(),this.cachedEventUids.has(tw(e))}saveEventToCache(e){this.cachedEventUids.add(tw(e)),this.lastProcessedEventTime=Date.now()}}function tw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function vA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function qR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vA(n);default:return!1}}async function VR(n,e={}){return _c(n,"GET","/v1/projects",e)}const BR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UR=/^https?/;async function zR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await VR(n);for(const t of e)try{if(HR(t))return}catch{}Oo(n,"unauthorized-domain")}function HR(n){const e=Vv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!UR.test(t))return!1;if(BR.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const $R=new mm(3e4,6e4);function nw(){const n=xl().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function GR(n){return new Promise((e,t)=>{function r(){nw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nw(),t(gl(n,"network-request-failed"))},timeout:$R.get()})}if(xl().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(xl().gapi?.load)r();else{const i=DL("iframefcb");return xl()[i]=()=>{gapi.load?r():t(gl(n,"network-request-failed"))},nA(`${PL()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw $p=null,e})}let $p=null;function WR(n){return $p=$p||GR(n),$p}const YR=new mm(5e3,15e3),KR="__/auth/iframe",QR="emulator/auth/iframe",XR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZR(n){const e=n.config;Yt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?B1(e,QR):`https://${n.config.authDomain}/${KR}`,r={apiKey:e.apiKey,appName:n.name,v:Ph},i=JR.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${fm(r).slice(1)}`}async function e8(n){const e=await WR(n),t=xl().gapi;return Yt(t,n,"internal-error"),e.open({where:document.body,url:ZR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XR,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=gl(n,"network-request-failed"),d=xl().setTimeout(()=>{a(c)},YR.get());function h(){xl().clearTimeout(d),i(r)}r.ping(h).then(h,()=>{a(c)})}))}const t8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},n8=500,r8=600,i8="_blank",s8="http://localhost";class rw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function a8(n,e,t,r=n8,i=r8){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const h={...t8,width:r.toString(),height:i.toString(),top:a,left:c},f=ks().toLowerCase();t&&(d=K4(f)?i8:t),W4(f)&&(e=e||s8,h.scrollbars="yes");const p=Object.entries(h).reduce((_,[b,T])=>`${_}${b}=${T},`,"");if(SL(f)&&d!=="_self")return o8(e||"",d),new rw(null);const v=window.open(e||"",d,p);Yt(v,n,"popup-blocked");try{v.focus()}catch{}return new rw(v)}function o8(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const l8="__/auth/handler",c8="emulator/auth/handler",u8=encodeURIComponent("fac");async function iw(n,e,t,r,i,a){Yt(n.config.authDomain,n,"auth-domain-config-required"),Yt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ph,eventId:i};if(e instanceof sA){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",HC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))c[p]=v}if(e instanceof gm){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(c.scopes=p.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const p of Object.keys(d))d[p]===void 0&&delete d[p];const h=await n._getAppCheckToken(),f=h?`#${u8}=${encodeURIComponent(h)}`:"";return`${d8(n)}?${fm(d).slice(1)}${f}`}function d8({config:n}){return n.emulator?B1(n,c8):`https://${n.authDomain}/${l8}`}const Yx="webStorageSupport";class h8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hA,this._completeRedirectFn=MR,this._overrideRedirectResult=kR}async _openPopup(e,t,r,i){vc(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await iw(e,t,r,Vv(),i);return a8(e,a,G1())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await iw(e,t,r,Vv(),i);return pR(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(vc(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await e8(e),r=new FR(e);return t.register("authEvent",i=>(Yt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yx,{type:Yx},i=>{const a=i?.[0]?.[Yx];a!==void 0&&t(!!a),Oo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eA()||Y4()||z1()}}const f8=h8;var sw="@firebase/auth",aw="1.11.1";class m8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function p8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function g8(n){Al(new Mo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Yt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tA(n)},f=new LL(r,i,a,h);return BL(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Al(new Mo("auth-internal",e=>{const t=hd(e.getProvider("auth").getImmediate());return(r=>new m8(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),oo(sw,aw,p8(n)),oo(sw,aw,"esm2020")}const x8=300,v8=T4("authIdTokenMaxAge")||x8;let ow=null;const y8=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>v8)return;const i=t?.token;ow!==i&&(ow=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function yA(n=q1()){const e=dd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=VL(n,{popupRedirectResolver:f8,persistence:[AR,hR,hA]}),r=T4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=y8(a.toString());oR(t,c,()=>c(t.currentUser)),aR(t,d=>c(d))}}const i=j4("auth");return i&&UL(t,`http://${i}`),t}function b8(){return document.getElementsByTagName("head")?.[0]??document}RL({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=gl("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",b8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});g8("Browser");var lw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var hu,bA;(function(){var n;function e(V,D){function k(){}k.prototype=D.prototype,V.F=D.prototype,V.prototype=new k,V.prototype.constructor=V,V.D=function($,S,R){for(var F=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)F[oe-2]=arguments[oe];return D.prototype[S].apply($,F)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(V,D,k){k||(k=0);const $=Array(16);if(typeof D=="string")for(var S=0;S<16;++S)$[S]=D.charCodeAt(k++)|D.charCodeAt(k++)<<8|D.charCodeAt(k++)<<16|D.charCodeAt(k++)<<24;else for(S=0;S<16;++S)$[S]=D[k++]|D[k++]<<8|D[k++]<<16|D[k++]<<24;D=V.g[0],k=V.g[1],S=V.g[2];let R=V.g[3],F;F=D+(R^k&(S^R))+$[0]+3614090360&4294967295,D=k+(F<<7&4294967295|F>>>25),F=R+(S^D&(k^S))+$[1]+3905402710&4294967295,R=D+(F<<12&4294967295|F>>>20),F=S+(k^R&(D^k))+$[2]+606105819&4294967295,S=R+(F<<17&4294967295|F>>>15),F=k+(D^S&(R^D))+$[3]+3250441966&4294967295,k=S+(F<<22&4294967295|F>>>10),F=D+(R^k&(S^R))+$[4]+4118548399&4294967295,D=k+(F<<7&4294967295|F>>>25),F=R+(S^D&(k^S))+$[5]+1200080426&4294967295,R=D+(F<<12&4294967295|F>>>20),F=S+(k^R&(D^k))+$[6]+2821735955&4294967295,S=R+(F<<17&4294967295|F>>>15),F=k+(D^S&(R^D))+$[7]+4249261313&4294967295,k=S+(F<<22&4294967295|F>>>10),F=D+(R^k&(S^R))+$[8]+1770035416&4294967295,D=k+(F<<7&4294967295|F>>>25),F=R+(S^D&(k^S))+$[9]+2336552879&4294967295,R=D+(F<<12&4294967295|F>>>20),F=S+(k^R&(D^k))+$[10]+4294925233&4294967295,S=R+(F<<17&4294967295|F>>>15),F=k+(D^S&(R^D))+$[11]+2304563134&4294967295,k=S+(F<<22&4294967295|F>>>10),F=D+(R^k&(S^R))+$[12]+1804603682&4294967295,D=k+(F<<7&4294967295|F>>>25),F=R+(S^D&(k^S))+$[13]+4254626195&4294967295,R=D+(F<<12&4294967295|F>>>20),F=S+(k^R&(D^k))+$[14]+2792965006&4294967295,S=R+(F<<17&4294967295|F>>>15),F=k+(D^S&(R^D))+$[15]+1236535329&4294967295,k=S+(F<<22&4294967295|F>>>10),F=D+(S^R&(k^S))+$[1]+4129170786&4294967295,D=k+(F<<5&4294967295|F>>>27),F=R+(k^S&(D^k))+$[6]+3225465664&4294967295,R=D+(F<<9&4294967295|F>>>23),F=S+(D^k&(R^D))+$[11]+643717713&4294967295,S=R+(F<<14&4294967295|F>>>18),F=k+(R^D&(S^R))+$[0]+3921069994&4294967295,k=S+(F<<20&4294967295|F>>>12),F=D+(S^R&(k^S))+$[5]+3593408605&4294967295,D=k+(F<<5&4294967295|F>>>27),F=R+(k^S&(D^k))+$[10]+38016083&4294967295,R=D+(F<<9&4294967295|F>>>23),F=S+(D^k&(R^D))+$[15]+3634488961&4294967295,S=R+(F<<14&4294967295|F>>>18),F=k+(R^D&(S^R))+$[4]+3889429448&4294967295,k=S+(F<<20&4294967295|F>>>12),F=D+(S^R&(k^S))+$[9]+568446438&4294967295,D=k+(F<<5&4294967295|F>>>27),F=R+(k^S&(D^k))+$[14]+3275163606&4294967295,R=D+(F<<9&4294967295|F>>>23),F=S+(D^k&(R^D))+$[3]+4107603335&4294967295,S=R+(F<<14&4294967295|F>>>18),F=k+(R^D&(S^R))+$[8]+1163531501&4294967295,k=S+(F<<20&4294967295|F>>>12),F=D+(S^R&(k^S))+$[13]+2850285829&4294967295,D=k+(F<<5&4294967295|F>>>27),F=R+(k^S&(D^k))+$[2]+4243563512&4294967295,R=D+(F<<9&4294967295|F>>>23),F=S+(D^k&(R^D))+$[7]+1735328473&4294967295,S=R+(F<<14&4294967295|F>>>18),F=k+(R^D&(S^R))+$[12]+2368359562&4294967295,k=S+(F<<20&4294967295|F>>>12),F=D+(k^S^R)+$[5]+4294588738&4294967295,D=k+(F<<4&4294967295|F>>>28),F=R+(D^k^S)+$[8]+2272392833&4294967295,R=D+(F<<11&4294967295|F>>>21),F=S+(R^D^k)+$[11]+1839030562&4294967295,S=R+(F<<16&4294967295|F>>>16),F=k+(S^R^D)+$[14]+4259657740&4294967295,k=S+(F<<23&4294967295|F>>>9),F=D+(k^S^R)+$[1]+2763975236&4294967295,D=k+(F<<4&4294967295|F>>>28),F=R+(D^k^S)+$[4]+1272893353&4294967295,R=D+(F<<11&4294967295|F>>>21),F=S+(R^D^k)+$[7]+4139469664&4294967295,S=R+(F<<16&4294967295|F>>>16),F=k+(S^R^D)+$[10]+3200236656&4294967295,k=S+(F<<23&4294967295|F>>>9),F=D+(k^S^R)+$[13]+681279174&4294967295,D=k+(F<<4&4294967295|F>>>28),F=R+(D^k^S)+$[0]+3936430074&4294967295,R=D+(F<<11&4294967295|F>>>21),F=S+(R^D^k)+$[3]+3572445317&4294967295,S=R+(F<<16&4294967295|F>>>16),F=k+(S^R^D)+$[6]+76029189&4294967295,k=S+(F<<23&4294967295|F>>>9),F=D+(k^S^R)+$[9]+3654602809&4294967295,D=k+(F<<4&4294967295|F>>>28),F=R+(D^k^S)+$[12]+3873151461&4294967295,R=D+(F<<11&4294967295|F>>>21),F=S+(R^D^k)+$[15]+530742520&4294967295,S=R+(F<<16&4294967295|F>>>16),F=k+(S^R^D)+$[2]+3299628645&4294967295,k=S+(F<<23&4294967295|F>>>9),F=D+(S^(k|~R))+$[0]+4096336452&4294967295,D=k+(F<<6&4294967295|F>>>26),F=R+(k^(D|~S))+$[7]+1126891415&4294967295,R=D+(F<<10&4294967295|F>>>22),F=S+(D^(R|~k))+$[14]+2878612391&4294967295,S=R+(F<<15&4294967295|F>>>17),F=k+(R^(S|~D))+$[5]+4237533241&4294967295,k=S+(F<<21&4294967295|F>>>11),F=D+(S^(k|~R))+$[12]+1700485571&4294967295,D=k+(F<<6&4294967295|F>>>26),F=R+(k^(D|~S))+$[3]+2399980690&4294967295,R=D+(F<<10&4294967295|F>>>22),F=S+(D^(R|~k))+$[10]+4293915773&4294967295,S=R+(F<<15&4294967295|F>>>17),F=k+(R^(S|~D))+$[1]+2240044497&4294967295,k=S+(F<<21&4294967295|F>>>11),F=D+(S^(k|~R))+$[8]+1873313359&4294967295,D=k+(F<<6&4294967295|F>>>26),F=R+(k^(D|~S))+$[15]+4264355552&4294967295,R=D+(F<<10&4294967295|F>>>22),F=S+(D^(R|~k))+$[6]+2734768916&4294967295,S=R+(F<<15&4294967295|F>>>17),F=k+(R^(S|~D))+$[13]+1309151649&4294967295,k=S+(F<<21&4294967295|F>>>11),F=D+(S^(k|~R))+$[4]+4149444226&4294967295,D=k+(F<<6&4294967295|F>>>26),F=R+(k^(D|~S))+$[11]+3174756917&4294967295,R=D+(F<<10&4294967295|F>>>22),F=S+(D^(R|~k))+$[2]+718787259&4294967295,S=R+(F<<15&4294967295|F>>>17),F=k+(R^(S|~D))+$[9]+3951481745&4294967295,V.g[0]=V.g[0]+D&4294967295,V.g[1]=V.g[1]+(S+(F<<21&4294967295|F>>>11))&4294967295,V.g[2]=V.g[2]+S&4294967295,V.g[3]=V.g[3]+R&4294967295}r.prototype.v=function(V,D){D===void 0&&(D=V.length);const k=D-this.blockSize,$=this.C;let S=this.h,R=0;for(;R<D;){if(S==0)for(;R<=k;)i(this,V,R),R+=this.blockSize;if(typeof V=="string"){for(;R<D;)if($[S++]=V.charCodeAt(R++),S==this.blockSize){i(this,$),S=0;break}}else for(;R<D;)if($[S++]=V[R++],S==this.blockSize){i(this,$),S=0;break}}this.h=S,this.o+=D},r.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var D=1;D<V.length-8;++D)V[D]=0;D=this.o*8;for(var k=V.length-8;k<V.length;++k)V[k]=D&255,D/=256;for(this.v(V),V=Array(16),D=0,k=0;k<4;++k)for(let $=0;$<32;$+=8)V[D++]=this.g[k]>>>$&255;return V};function a(V,D){var k=d;return Object.prototype.hasOwnProperty.call(k,V)?k[V]:k[V]=D(V)}function c(V,D){this.h=D;const k=[];let $=!0;for(let S=V.length-1;S>=0;S--){const R=V[S]|0;$&&R==D||(k[S]=R,$=!1)}this.g=k}var d={};function h(V){return-128<=V&&V<128?a(V,function(D){return new c([D|0],D<0?-1:0)}):new c([V|0],V<0?-1:0)}function f(V){if(isNaN(V)||!isFinite(V))return v;if(V<0)return L(f(-V));const D=[];let k=1;for(let $=0;V>=k;$++)D[$]=V/k|0,k*=4294967296;return new c(D,0)}function p(V,D){if(V.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(V.charAt(0)=="-")return L(p(V.substring(1),D));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=f(Math.pow(D,8));let $=v;for(let R=0;R<V.length;R+=8){var S=Math.min(8,V.length-R);const F=parseInt(V.substring(R,R+S),D);S<8?(S=f(Math.pow(D,S)),$=$.j(S).add(f(F))):($=$.j(k),$=$.add(f(F)))}return $}var v=h(0),_=h(1),b=h(16777216);n=c.prototype,n.m=function(){if(I(this))return-L(this).m();let V=0,D=1;for(let k=0;k<this.g.length;k++){const $=this.i(k);V+=($>=0?$:4294967296+$)*D,D*=4294967296}return V},n.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(T(this))return"0";if(I(this))return"-"+L(this).toString(V);const D=f(Math.pow(V,6));var k=this;let $="";for(;;){const S=B(k,D).g;k=j(k,S.j(D));let R=((k.g.length>0?k.g[0]:k.h)>>>0).toString(V);if(k=S,T(k))return R+$;for(;R.length<6;)R="0"+R;$=R+$}},n.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function T(V){if(V.h!=0)return!1;for(let D=0;D<V.g.length;D++)if(V.g[D]!=0)return!1;return!0}function I(V){return V.h==-1}n.l=function(V){return V=j(this,V),I(V)?-1:T(V)?0:1};function L(V){const D=V.g.length,k=[];for(let $=0;$<D;$++)k[$]=~V.g[$];return new c(k,~V.h).add(_)}n.abs=function(){return I(this)?L(this):this},n.add=function(V){const D=Math.max(this.g.length,V.g.length),k=[];let $=0;for(let S=0;S<=D;S++){let R=$+(this.i(S)&65535)+(V.i(S)&65535),F=(R>>>16)+(this.i(S)>>>16)+(V.i(S)>>>16);$=F>>>16,R&=65535,F&=65535,k[S]=F<<16|R}return new c(k,k[k.length-1]&-2147483648?-1:0)};function j(V,D){return V.add(L(D))}n.j=function(V){if(T(this)||T(V))return v;if(I(this))return I(V)?L(this).j(L(V)):L(L(this).j(V));if(I(V))return L(this.j(L(V)));if(this.l(b)<0&&V.l(b)<0)return f(this.m()*V.m());const D=this.g.length+V.g.length,k=[];for(var $=0;$<2*D;$++)k[$]=0;for($=0;$<this.g.length;$++)for(let S=0;S<V.g.length;S++){const R=this.i($)>>>16,F=this.i($)&65535,oe=V.i(S)>>>16,be=V.i(S)&65535;k[2*$+2*S]+=F*be,U(k,2*$+2*S),k[2*$+2*S+1]+=R*be,U(k,2*$+2*S+1),k[2*$+2*S+1]+=F*oe,U(k,2*$+2*S+1),k[2*$+2*S+2]+=R*oe,U(k,2*$+2*S+2)}for(V=0;V<D;V++)k[V]=k[2*V+1]<<16|k[2*V];for(V=D;V<2*D;V++)k[V]=0;return new c(k,0)};function U(V,D){for(;(V[D]&65535)!=V[D];)V[D+1]+=V[D]>>>16,V[D]&=65535,D++}function z(V,D){this.g=V,this.h=D}function B(V,D){if(T(D))throw Error("division by zero");if(T(V))return new z(v,v);if(I(V))return D=B(L(V),D),new z(L(D.g),L(D.h));if(I(D))return D=B(V,L(D)),new z(L(D.g),D.h);if(V.g.length>30){if(I(V)||I(D))throw Error("slowDivide_ only works with positive integers.");for(var k=_,$=D;$.l(V)<=0;)k=re(k),$=re($);var S=ne(k,1),R=ne($,1);for($=ne($,2),k=ne(k,2);!T($);){var F=R.add($);F.l(V)<=0&&(S=S.add(k),R=F),$=ne($,1),k=ne(k,1)}return D=j(V,S.j(D)),new z(S,D)}for(S=v;V.l(D)>=0;){for(k=Math.max(1,Math.floor(V.m()/D.m())),$=Math.ceil(Math.log(k)/Math.LN2),$=$<=48?1:Math.pow(2,$-48),R=f(k),F=R.j(D);I(F)||F.l(V)>0;)k-=$,R=f(k),F=R.j(D);T(R)&&(R=_),S=S.add(R),V=j(V,F)}return new z(S,V)}n.B=function(V){return B(this,V).h},n.and=function(V){const D=Math.max(this.g.length,V.g.length),k=[];for(let $=0;$<D;$++)k[$]=this.i($)&V.i($);return new c(k,this.h&V.h)},n.or=function(V){const D=Math.max(this.g.length,V.g.length),k=[];for(let $=0;$<D;$++)k[$]=this.i($)|V.i($);return new c(k,this.h|V.h)},n.xor=function(V){const D=Math.max(this.g.length,V.g.length),k=[];for(let $=0;$<D;$++)k[$]=this.i($)^V.i($);return new c(k,this.h^V.h)};function re(V){const D=V.g.length+1,k=[];for(let $=0;$<D;$++)k[$]=V.i($)<<1|V.i($-1)>>>31;return new c(k,V.h)}function ne(V,D){const k=D>>5;D%=32;const $=V.g.length-k,S=[];for(let R=0;R<$;R++)S[R]=D>0?V.i(R+k)>>>D|V.i(R+k+1)<<32-D:V.i(R+k);return new c(S,V.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,bA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=p,hu=c}).apply(typeof lw<"u"?lw:typeof self<"u"?self:typeof window<"u"?window:{});var Sp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wA,Pf,_A,Gp,Hv,NA,AA,SA;(function(){var n,e=Object.defineProperty;function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sp=="object"&&Sp];for(var C=0;C<x.length;++C){var O=x[C];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=t(this);function i(x,C){if(C)e:{var O=r;x=x.split(".");for(var ee=0;ee<x.length-1;ee++){var Ee=x[ee];if(!(Ee in O))break e;O=O[Ee]}x=x[x.length-1],ee=O[x],C=C(ee),C!=ee&&C!=null&&e(O,x,{configurable:!0,writable:!0,value:C})}}i("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(x){return x||function(C){var O=[],ee;for(ee in C)Object.prototype.hasOwnProperty.call(C,ee)&&O.push([ee,C[ee]]);return O}});var a=a||{},c=this||self;function d(x){var C=typeof x;return C=="object"&&x!=null||C=="function"}function h(x,C,O){return x.call.apply(x.bind,arguments)}function f(x,C,O){return f=h,f.apply(null,arguments)}function p(x,C){var O=Array.prototype.slice.call(arguments,1);return function(){var ee=O.slice();return ee.push.apply(ee,arguments),x.apply(this,ee)}}function v(x,C){function O(){}O.prototype=C.prototype,x.Z=C.prototype,x.prototype=new O,x.prototype.constructor=x,x.Ob=function(ee,Ee,De){for(var tt=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)tt[Qt-2]=arguments[Qt];return C.prototype[Ee].apply(ee,tt)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function b(x){const C=x.length;if(C>0){const O=Array(C);for(let ee=0;ee<C;ee++)O[ee]=x[ee];return O}return[]}function T(x,C){for(let ee=1;ee<arguments.length;ee++){const Ee=arguments[ee];var O=typeof Ee;if(O=O!="object"?O:Ee?Array.isArray(Ee)?"array":O:"null",O=="array"||O=="object"&&typeof Ee.length=="number"){O=x.length||0;const De=Ee.length||0;x.length=O+De;for(let tt=0;tt<De;tt++)x[O+tt]=Ee[tt]}else x.push(Ee)}}class I{constructor(C,O){this.i=C,this.j=O,this.h=0,this.g=null}get(){let C;return this.h>0?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function L(x){c.setTimeout(()=>{throw x},0)}function j(){var x=V;let C=null;return x.g&&(C=x.g,x.g=x.g.next,x.g||(x.h=null),C.next=null),C}class U{constructor(){this.h=this.g=null}add(C,O){const ee=z.get();ee.set(C,O),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var z=new I(()=>new B,x=>x.reset());class B{constructor(){this.next=this.g=this.h=null}set(C,O){this.h=C,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ne=!1,V=new U,D=()=>{const x=Promise.resolve(void 0);re=()=>{x.then(k)}};function k(){for(var x;x=j();){try{x.h.call(x.g)}catch(O){L(O)}var C=z;C.j(x),C.h<100&&(C.h++,x.next=C.g,C.g=x)}ne=!1}function $(){this.u=this.u,this.C=this.C}$.prototype.u=!1,$.prototype.dispose=function(){this.u||(this.u=!0,this.N())},$.prototype[Symbol.dispose]=function(){this.dispose()},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(x,C){this.type=x,this.g=this.target=C,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var x=!1,C=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const O=()=>{};c.addEventListener("test",O,C),c.removeEventListener("test",O,C)}catch{}return x})();function F(x){return/^[\s\xa0]*$/.test(x)}function oe(x,C){S.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,C)}v(oe,S),oe.prototype.init=function(x,C){const O=this.type=x.type,ee=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=C,C=x.relatedTarget,C||(O=="mouseover"?C=x.fromElement:O=="mouseout"&&(C=x.toElement)),this.relatedTarget=C,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),Q=0;function ae(x,C,O,ee,Ee){this.listener=x,this.proxy=null,this.src=C,this.type=O,this.capture=!!ee,this.ha=Ee,this.key=++Q,this.da=this.fa=!1}function me(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function je(x,C,O){for(const ee in x)C.call(O,x[ee],ee,x)}function Fe(x,C){for(const O in x)C.call(void 0,x[O],O,x)}function J(x){const C={};for(const O in x)C[O]=x[O];return C}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(x,C){let O,ee;for(let Ee=1;Ee<arguments.length;Ee++){ee=arguments[Ee];for(O in ee)x[O]=ee[O];for(let De=0;De<q.length;De++)O=q[De],Object.prototype.hasOwnProperty.call(ee,O)&&(x[O]=ee[O])}}function ie(x){this.src=x,this.g={},this.h=0}ie.prototype.add=function(x,C,O,ee,Ee){const De=x.toString();x=this.g[De],x||(x=this.g[De]=[],this.h++);const tt=ge(x,C,ee,Ee);return tt>-1?(C=x[tt],O||(C.fa=!1)):(C=new ae(C,this.src,De,!!ee,Ee),C.fa=O,x.push(C)),C};function fe(x,C){const O=C.type;if(O in x.g){var ee=x.g[O],Ee=Array.prototype.indexOf.call(ee,C,void 0),De;(De=Ee>=0)&&Array.prototype.splice.call(ee,Ee,1),De&&(me(C),x.g[O].length==0&&(delete x.g[O],x.h--))}}function ge(x,C,O,ee){for(let Ee=0;Ee<x.length;++Ee){const De=x[Ee];if(!De.da&&De.listener==C&&De.capture==!!O&&De.ha==ee)return Ee}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),Le={};function ke(x,C,O,ee,Ee){if(Array.isArray(C)){for(let De=0;De<C.length;De++)ke(x,C[De],O,ee,Ee);return null}return O=St(O),x&&x[be]?x.J(C,O,d(ee)?!!ee.capture:!1,Ee):Be(x,C,O,!1,ee,Ee)}function Be(x,C,O,ee,Ee,De){if(!C)throw Error("Invalid event type");const tt=d(Ee)?!!Ee.capture:!!Ee;let Qt=rt(x);if(Qt||(x[_e]=Qt=new ie(x)),O=Qt.add(C,O,ee,tt,De),O.proxy)return O;if(ee=Ze(),O.proxy=ee,ee.src=x,ee.listener=O,x.addEventListener)R||(Ee=tt),Ee===void 0&&(Ee=!1),x.addEventListener(C.toString(),ee,Ee);else if(x.attachEvent)x.attachEvent(dt(C.toString()),ee);else if(x.addListener&&x.removeListener)x.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Ze(){function x(O){return C.call(x.src,x.listener,O)}const C=se;return x}function ot(x,C,O,ee,Ee){if(Array.isArray(C))for(var De=0;De<C.length;De++)ot(x,C[De],O,ee,Ee);else ee=d(ee)?!!ee.capture:!!ee,O=St(O),x&&x[be]?(x=x.i,De=String(C).toString(),De in x.g&&(C=x.g[De],O=ge(C,O,ee,Ee),O>-1&&(me(C[O]),Array.prototype.splice.call(C,O,1),C.length==0&&(delete x.g[De],x.h--)))):x&&(x=rt(x))&&(C=x.g[C.toString()],x=-1,C&&(x=ge(C,O,ee,Ee)),(O=x>-1?C[x]:null)&&st(O))}function st(x){if(typeof x!="number"&&x&&!x.da){var C=x.src;if(C&&C[be])fe(C.i,x);else{var O=x.type,ee=x.proxy;C.removeEventListener?C.removeEventListener(O,ee,x.capture):C.detachEvent?C.detachEvent(dt(O),ee):C.addListener&&C.removeListener&&C.removeListener(ee),(O=rt(C))?(fe(O,x),O.h==0&&(O.src=null,C[_e]=null)):me(x)}}}function dt(x){return x in Le?Le[x]:Le[x]="on"+x}function se(x,C){if(x.da)x=!0;else{C=new oe(C,this);const O=x.listener,ee=x.ha||x.src;x.fa&&st(x),x=O.call(ee,C)}return x}function rt(x){return x=x[_e],x instanceof ie?x:null}var Kt="__closure_events_fn_"+(Math.random()*1e9>>>0);function St(x){return typeof x=="function"?x:(x[Kt]||(x[Kt]=function(C){return x.handleEvent(C)}),x[Kt])}function pe(){$.call(this),this.i=new ie(this),this.M=this,this.G=null}v(pe,$),pe.prototype[be]=!0,pe.prototype.removeEventListener=function(x,C,O,ee){ot(this,x,C,O,ee)};function Ue(x,C){var O,ee=x.G;if(ee)for(O=[];ee;ee=ee.G)O.push(ee);if(x=x.M,ee=C.type||C,typeof C=="string")C=new S(C,x);else if(C instanceof S)C.target=C.target||x;else{var Ee=C;C=new S(ee,x),X(C,Ee)}Ee=!0;let De,tt;if(O)for(tt=O.length-1;tt>=0;tt--)De=C.g=O[tt],Ee=Qe(De,ee,!0,C)&&Ee;if(De=C.g=x,Ee=Qe(De,ee,!0,C)&&Ee,Ee=Qe(De,ee,!1,C)&&Ee,O)for(tt=0;tt<O.length;tt++)De=C.g=O[tt],Ee=Qe(De,ee,!1,C)&&Ee}pe.prototype.N=function(){if(pe.Z.N.call(this),this.i){var x=this.i;for(const C in x.g){const O=x.g[C];for(let ee=0;ee<O.length;ee++)me(O[ee]);delete x.g[C],x.h--}}this.G=null},pe.prototype.J=function(x,C,O,ee){return this.i.add(String(x),C,!1,O,ee)},pe.prototype.K=function(x,C,O,ee){return this.i.add(String(x),C,!0,O,ee)};function Qe(x,C,O,ee){if(C=x.i.g[String(C)],!C)return!0;C=C.concat();let Ee=!0;for(let De=0;De<C.length;++De){const tt=C[De];if(tt&&!tt.da&&tt.capture==O){const Qt=tt.listener,ar=tt.ha||tt.src;tt.fa&&fe(x.i,tt),Ee=Qt.call(ar,ee)!==!1&&Ee}}return Ee&&!ee.defaultPrevented}function at(x,C){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=f(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(C)>2147483647?-1:c.setTimeout(x,C||0)}function nt(x){x.g=at(()=>{x.g=null,x.i&&(x.i=!1,nt(x))},x.l);const C=x.h;x.h=null,x.m.apply(null,C)}class pt extends ${constructor(C,O){super(),this.m=C,this.l=O,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:nt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gt(x){$.call(this),this.h=x,this.g={}}v(Gt,$);var Mt=[];function cn(x){je(x.g,function(C,O){this.g.hasOwnProperty(O)&&st(C)},x),x.g={}}Gt.prototype.N=function(){Gt.Z.N.call(this),cn(this)},Gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nn=c.JSON.stringify,bt=c.JSON.parse,Xt=class{stringify(x){return c.JSON.stringify(x,void 0)}parse(x){return c.JSON.parse(x,void 0)}};function _t(){}function br(){}var rn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Lt(){S.call(this,"d")}v(Lt,S);function zt(){S.call(this,"c")}v(zt,S);var en={},Tt=null;function Dn(){return Tt=Tt||new pe}en.Ia="serverreachability";function Vt(x){S.call(this,en.Ia,x)}v(Vt,S);function Bt(x){const C=Dn();Ue(C,new Vt(C))}en.STAT_EVENT="statevent";function qn(x,C){S.call(this,en.STAT_EVENT,x),this.stat=C}v(qn,S);function jt(x){const C=Dn();Ue(C,new qn(C,x))}en.Ja="timingevent";function Nt(x,C){S.call(this,en.Ja,x),this.size=C}v(Nt,S);function un(x,C){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){x()},C)}function Ni(){this.g=!0}Ni.prototype.ua=function(){this.g=!1};function hi(x,C,O,ee,Ee,De){x.info(function(){if(x.g)if(De){var tt="",Qt=De.split("&");for(let hn=0;hn<Qt.length;hn++){var ar=Qt[hn].split("=");if(ar.length>1){const Un=ar[0];ar=ar[1];const gi=Un.split("_");tt=gi.length>=2&&gi[1]=="type"?tt+(Un+"="+ar+"&"):tt+(Un+"=redacted&")}}}else tt=null;else tt=De;return"XMLHTTP REQ ("+ee+") [attempt "+Ee+"]: "+C+`
`+O+`
`+tt})}function Ys(x,C,O,ee,Ee,De,tt){x.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+Ee+"]: "+C+`
`+O+`
`+De+" "+tt})}function ni(x,C,O,ee){x.info(function(){return"XMLHTTP TEXT ("+C+"): "+ya(x,O)+(ee?" "+ee:"")})}function Ct(x,C){x.info(function(){return"TIMEOUT: "+C})}Ni.prototype.info=function(){};function ya(x,C){if(!x.g)return C;if(!C)return null;try{const De=JSON.parse(C);if(De){for(x=0;x<De.length;x++)if(Array.isArray(De[x])){var O=De[x];if(!(O.length<2)){var ee=O[1];if(Array.isArray(ee)&&!(ee.length<1)){var Ee=ee[0];if(Ee!="noop"&&Ee!="stop"&&Ee!="close")for(let tt=1;tt<ee.length;tt++)ee[tt]=""}}}}return nn(De)}catch{return C}}var es={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qi;function Kn(){}v(Kn,_t),Kn.prototype.g=function(){return new XMLHttpRequest},qi=new Kn;function ir(x){return encodeURIComponent(String(x))}function $r(x){var C=1;x=x.split(":");const O=[];for(;C>0&&x.length;)O.push(x.shift()),C--;return x.length&&O.push(x.join(":")),O}function Ai(x,C,O,ee){this.j=x,this.i=C,this.l=O,this.S=ee||1,this.V=new Gt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fi}function fi(){this.i=null,this.g="",this.h=!1}var Vn={},Xn={};function Gr(x,C,O){x.M=1,x.A=Ba(Tr(C)),x.u=O,x.R=!0,Vi(x,null)}function Vi(x,C){x.F=Date.now(),Bi(x),x.B=Tr(x.A);var O=x.B,ee=x.S;Array.isArray(ee)||(ee=[String(ee)]),Go(O.i,"t",ee),x.C=0,O=x.j.L,x.h=new fi,x.g=ht(x.j,O?C:null,!x.u),x.P>0&&(x.O=new pt(f(x.Y,x,x.g),x.P)),C=x.V,O=x.g,ee=x.ba;var Ee="readystatechange";Array.isArray(Ee)||(Ee&&(Mt[0]=Ee.toString()),Ee=Mt);for(let De=0;De<Ee.length;De++){const tt=ke(O,Ee[De],ee||C.handleEvent,!1,C.h||C);if(!tt)break;C.g[tt.key]=tt}C=x.J?J(x.J):{},x.u?(x.v||(x.v="POST"),C["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,C)):(x.v="GET",x.g.ea(x.B,x.v,null,C)),Bt(),hi(x.i,x.v,x.B,x.l,x.S,x.u)}Ai.prototype.ba=function(x){x=x.target;const C=this.O;C&&as(x)==3?C.j():this.Y(x)},Ai.prototype.Y=function(x){try{if(x==this.g)e:{const Qt=as(this.g),ar=this.g.ya(),hn=this.g.ca();if(!(Qt<3)&&(Qt!=3||this.g&&(this.h.h||this.g.la()||Or(this.g)))){this.K||Qt!=4||ar==7||(ar==8||hn<=0?Bt(3):Bt(2)),ts(this);var C=this.g.ca();this.X=C;var O=ys(this);if(this.o=C==200,Ys(this.i,this.v,this.B,this.l,this.S,Qt,C),this.o){if(this.U&&!this.L){t:{if(this.g){var ee,Ee=this.g;if((ee=Ee.g?Ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(ee)){var De=ee;break t}}De=null}if(x=De)ni(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bs(this,x);else{this.o=!1,this.m=3,jt(12),ns(this),Si(this);break e}}if(this.R){x=!0;let Un;for(;!this.K&&this.C<O.length;)if(Un=Ps(this,O),Un==Xn){Qt==4&&(this.m=4,jt(14),x=!1),ni(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==Vn){this.m=4,jt(15),ni(this.i,this.l,O,"[Invalid Chunk]"),x=!1;break}else ni(this.i,this.l,Un,null),bs(this,Un);if(Va(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||O.length!=0||this.h.h||(this.m=1,jt(16),x=!1),this.o=this.o&&x,!x)ni(this.i,this.l,O,"[Invalid Chunked Response]"),ns(this),Si(this);else if(O.length>0&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.aa&&!tt.P&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Qo(tt),tt.P=!0,jt(11))}}else ni(this.i,this.l,O,null),bs(this,O);Qt==4&&ns(this),this.o&&!this.K&&(Qt==4?ce(this.j,this):(this.o=!1,Bi(this)))}else Ks(this.g),C==400&&O.indexOf("Unknown SID")>0?(this.m=3,jt(12)):(this.m=0,jt(13)),ns(this),Si(this)}}}catch{}finally{}};function ys(x){if(!Va(x))return x.g.la();const C=Or(x.g);if(C==="")return"";let O="";const ee=C.length,Ee=as(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return ns(x),Si(x),"";x.h.i=new c.TextDecoder}for(let De=0;De<ee;De++)x.h.h=!0,O+=x.h.i.decode(C[De],{stream:!(Ee&&De==ee-1)});return C.length=0,x.h.g+=O,x.C=0,x.h.g}function Va(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function Ps(x,C){var O=x.C,ee=C.indexOf(`
`,O);return ee==-1?Xn:(O=Number(C.substring(O,ee)),isNaN(O)?Vn:(ee+=1,ee+O>C.length?Xn:(C=C.slice(ee,ee+O),x.C=ee+O,C)))}Ai.prototype.cancel=function(){this.K=!0,ns(this)};function Bi(x){x.T=Date.now()+x.H,ba(x,x.H)}function ba(x,C){if(x.D!=null)throw Error("WatchDog timer not null");x.D=un(f(x.aa,x),C)}function ts(x){x.D&&(c.clearTimeout(x.D),x.D=null)}Ai.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(Ct(this.i,this.B),this.M!=2&&(Bt(),jt(17)),ns(this),this.m=2,Si(this)):ba(this,this.T-x)};function Si(x){x.j.I==0||x.K||ce(x.j,x)}function ns(x){ts(x);var C=x.O;C&&typeof C.dispose=="function"&&C.dispose(),x.O=null,cn(x.V),x.g&&(C=x.g,x.g=null,C.abort(),C.dispose())}function bs(x,C){try{var O=x.j;if(O.I!=0&&(O.g==x||Ds(O.h,x))){if(!x.L&&Ds(O.h,x)&&O.I==3){try{var ee=O.Ba.g.parse(C)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var Ee=ee;if(Ee[0]==0){e:if(!O.v){if(O.g)if(O.g.F+3e3<x.F)H(O),Xs(O);else break e;Fs(O),jt(18)}}else O.xa=Ee[1],0<O.xa-O.K&&Ee[2]<37500&&O.F&&O.A==0&&!O.C&&(O.C=un(f(O.Va,O),6e3));ws(O.h)<=1&&O.ta&&(O.ta=void 0)}else Ae(O,11)}else if((x.L||O.g==x)&&H(O),!F(C))for(Ee=O.Ba.g.parse(C),C=0;C<Ee.length;C++){let hn=Ee[C];const Un=hn[0];if(!(Un<=O.K))if(O.K=Un,hn=hn[1],O.I==2)if(hn[0]=="c"){O.M=hn[1],O.ba=hn[2];const gi=hn[3];gi!=null&&(O.ka=gi,O.j.info("VER="+O.ka));const Ei=hn[4];Ei!=null&&(O.za=Ei,O.j.info("SVER="+O.za));const Jn=hn[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(ee=1.5*Jn,O.O=ee,O.j.info("backChannelRequestTimeoutMs_="+ee)),ee=O;const Ti=x.g;if(Ti){const qs=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qs){var De=ee.h;De.g||qs.indexOf("spdy")==-1&&qs.indexOf("quic")==-1&&qs.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(ho(De,De.h),De.h=null))}if(ee.G){const Ga=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;Ga&&(ee.wa=Ga,bn(ee.J,ee.G,Ga))}}O.I=3,O.l&&O.l.ra(),O.aa&&(O.T=Date.now()-x.F,O.j.info("Handshake RTT: "+O.T+"ms")),ee=O;var tt=x;if(ee.na=Xe(ee,ee.L?ee.ba:null,ee.W),tt.L){Ho(ee.h,tt);var Qt=tt,ar=ee.O;ar&&(Qt.H=ar),Qt.D&&(ts(Qt),Bi(Qt)),ee.g=tt}else Ol(ee);O.i.length>0&&Ns(O)}else hn[0]!="stop"&&hn[0]!="close"||Ae(O,7);else O.I==3&&(hn[0]=="stop"||hn[0]=="close"?hn[0]=="stop"?Ae(O,7):$a(O):hn[0]!="noop"&&O.l&&O.l.qa(hn),O.A=0)}}Bt(4)}catch{}}var wr=class{constructor(x,C){this.g=x,this.map=C}};function zo(x){this.l=x||10,c.PerformanceNavigationTiming?(x=c.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ui(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function ws(x){return x.h?1:x.g?x.g.size:0}function Ds(x,C){return x.h?x.h==C:x.g?x.g.has(C):!1}function ho(x,C){x.g?x.g.add(C):x.h=C}function Ho(x,C){x.h&&x.h==C?x.h=null:x.g&&x.g.has(C)&&x.g.delete(C)}zo.prototype.cancel=function(){if(this.i=$o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function $o(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let C=x.i;for(const O of x.g.values())C=C.concat(O.G);return C}return b(x.i)}var Ll=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rs(x,C){if(x){x=x.split("&");for(let O=0;O<x.length;O++){const ee=x[O].indexOf("=");let Ee,De=null;ee>=0?(Ee=x[O].substring(0,ee),De=x[O].substring(ee+1)):Ee=x[O],C(Ee,De?decodeURIComponent(De.replace(/\+/g," ")):"")}}}function mi(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let C;x instanceof mi?(this.l=x.l,mn(this,x.j),this.o=x.o,this.g=x.g,wa(this,x.u),this.h=x.h,_s(this,Wo(x.i)),this.m=x.m):x&&(C=String(x).match(Ll))?(this.l=!1,mn(this,C[1]||"",!0),this.o=Mr(C[2]||""),this.g=Mr(C[3]||"",!0),wa(this,C[4]),this.h=Mr(C[5]||"",!0),_s(this,C[6]||"",!0),this.m=Mr(C[7]||"")):(this.l=!1,this.i=new _a(null,this.l))}mi.prototype.toString=function(){const x=[];var C=this.j;C&&x.push(pr(C,fo,!0),":");var O=this.g;return(O||C=="file")&&(x.push("//"),(C=this.o)&&x.push(pr(C,fo,!0),"@"),x.push(ir(O).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.u,O!=null&&x.push(":",String(O))),(O=this.h)&&(this.g&&O.charAt(0)!="/"&&x.push("/"),x.push(pr(O,O.charAt(0)=="/"?Rl:Ac,!0))),(O=this.i.toString())&&x.push("?",O),(O=this.m)&&x.push("#",pr(O,kl)),x.join("")},mi.prototype.resolve=function(x){const C=Tr(this);let O=!!x.j;O?mn(C,x.j):O=!!x.o,O?C.o=x.o:O=!!x.g,O?C.g=x.g:O=x.u!=null;var ee=x.h;if(O)wa(C,x.u);else if(O=!!x.h){if(ee.charAt(0)!="/")if(this.g&&!this.h)ee="/"+ee;else{var Ee=C.h.lastIndexOf("/");Ee!=-1&&(ee=C.h.slice(0,Ee+1)+ee)}if(Ee=ee,Ee==".."||Ee==".")ee="";else if(Ee.indexOf("./")!=-1||Ee.indexOf("/.")!=-1){ee=Ee.lastIndexOf("/",0)==0,Ee=Ee.split("/");const De=[];for(let tt=0;tt<Ee.length;){const Qt=Ee[tt++];Qt=="."?ee&&tt==Ee.length&&De.push(""):Qt==".."?((De.length>1||De.length==1&&De[0]!="")&&De.pop(),ee&&tt==Ee.length&&De.push("")):(De.push(Qt),ee=!0)}ee=De.join("/")}else ee=Ee}return O?C.h=ee:O=x.i.toString()!=="",O?_s(C,Wo(x.i)):O=!!x.m,O&&(C.m=x.m),C};function Tr(x){return new mi(x)}function mn(x,C,O){x.j=O?Mr(C,!0):C,x.j&&(x.j=x.j.replace(/:$/,""))}function wa(x,C){if(C){if(C=Number(C),isNaN(C)||C<0)throw Error("Bad port number "+C);x.u=C}else x.u=null}function _s(x,C,O){C instanceof _a?(x.i=C,zi(x.i,x.l)):(O||(C=pr(C,ji)),x.i=new _a(C,x.l))}function bn(x,C,O){x.i.set(C,O)}function Ba(x){return bn(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function Mr(x,C){return x?C?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function pr(x,C,O){return typeof x=="string"?(x=encodeURI(x).replace(C,Cr),O&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Cr(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var fo=/[#\/\?@]/g,Ac=/[#\?:]/g,Rl=/[#\?]/g,ji=/[#\?@]/g,kl=/#/g;function _a(x,C){this.h=this.g=null,this.i=x||null,this.j=!!C}function ri(x){x.g||(x.g=new Map,x.h=0,x.i&&rs(x.i,function(C,O){x.add(decodeURIComponent(C.replace(/\+/g," ")),O)}))}n=_a.prototype,n.add=function(x,C){ri(this),this.i=null,x=Na(this,x);let O=this.g.get(x);return O||this.g.set(x,O=[]),O.push(C),this.h+=1,this};function Ua(x,C){ri(x),C=Na(x,C),x.g.has(C)&&(x.i=null,x.h-=x.g.get(C).length,x.g.delete(C))}function Pl(x,C){return ri(x),C=Na(x,C),x.g.has(C)}n.forEach=function(x,C){ri(this),this.g.forEach(function(O,ee){O.forEach(function(Ee){x.call(C,Ee,ee,this)},this)},this)};function Dl(x,C){ri(x);let O=[];if(typeof C=="string")Pl(x,C)&&(O=O.concat(x.g.get(Na(x,C))));else for(x=Array.from(x.g.values()),C=0;C<x.length;C++)O=O.concat(x[C]);return O}n.set=function(x,C){return ri(this),this.i=null,x=Na(this,x),Pl(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[C]),this.h+=1,this},n.get=function(x,C){return x?(x=Dl(this,x),x.length>0?String(x[0]):C):C};function Go(x,C,O){Ua(x,C),O.length>0&&(x.i=null,x.g.set(Na(x,C),b(O)),x.h+=O.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],C=Array.from(this.g.keys());for(let ee=0;ee<C.length;ee++){var O=C[ee];const Ee=ir(O);O=Dl(this,O);for(let De=0;De<O.length;De++){let tt=Ee;O[De]!==""&&(tt+="="+ir(O[De])),x.push(tt)}}return this.i=x.join("&")};function Wo(x){const C=new _a;return C.i=x.i,x.g&&(C.g=new Map(x.g),C.h=x.h),C}function Na(x,C){return C=String(C),x.j&&(C=C.toLowerCase()),C}function zi(x,C){C&&!x.j&&(ri(x),x.i=null,x.g.forEach(function(O,ee){const Ee=ee.toLowerCase();ee!=Ee&&(Ua(this,ee),Go(this,Ee,O))},x)),x.j=C}function Ms(x,C){const O=new Ni;if(c.Image){const ee=new Image;ee.onload=p(Hi,O,"TestLoadImage: loaded",!0,C,ee),ee.onerror=p(Hi,O,"TestLoadImage: error",!1,C,ee),ee.onabort=p(Hi,O,"TestLoadImage: abort",!1,C,ee),ee.ontimeout=p(Hi,O,"TestLoadImage: timeout",!1,C,ee),c.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=x}else C(!1)}function Aa(x,C){const O=new Ni,ee=new AbortController,Ee=setTimeout(()=>{ee.abort(),Hi(O,"TestPingServer: timeout",!1,C)},1e4);fetch(x,{signal:ee.signal}).then(De=>{clearTimeout(Ee),De.ok?Hi(O,"TestPingServer: ok",!0,C):Hi(O,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(Ee),Hi(O,"TestPingServer: error",!1,C)})}function Hi(x,C,O,ee,Ee){try{Ee&&(Ee.onload=null,Ee.onerror=null,Ee.onabort=null,Ee.ontimeout=null),ee(O)}catch{}}function za(){this.g=new Xt}function Rt(x){this.i=x.Sb||null,this.h=x.ab||!1}v(Rt,_t),Rt.prototype.g=function(){return new mo(this.i,this.h)};function mo(x,C){pe.call(this),this.H=x,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(mo,pe),n=mo.prototype,n.open=function(x,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=C,this.readyState=1,ii(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const C={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(C.body=x),(this.H||c).fetch(new Request(this.D,C)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ha(this)),this.readyState=0},n.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yo(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yo(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}n.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var C=x.value?x.value:new Uint8Array(0);(C=this.B.decode(C,{stream:!x.done}))&&(this.response=this.responseText+=C)}x.done?Ha(this):ii(this),this.readyState==3&&Yo(this)}},n.Oa=function(x){this.g&&(this.response=this.responseText=x,Ha(this))},n.Na=function(x){this.g&&(this.response=x,Ha(this))},n.ga=function(){this.g&&Ha(this)};function Ha(x){x.readyState=4,x.l=null,x.j=null,x.B=null,ii(x)}n.setRequestHeader=function(x,C){this.A.append(x,C)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],C=this.h.entries();for(var O=C.next();!O.done;)O=O.value,x.push(O[0]+": "+O[1]),O=C.next();return x.join(`\r
`)};function ii(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(mo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function Wr(x){let C="";return je(x,function(O,ee){C+=ee,C+=":",C+=O,C+=`\r
`}),C}function po(x,C,O){e:{for(ee in O){var ee=!1;break e}ee=!0}ee||(O=Wr(O),typeof x=="string"?O!=null&&ir(O):bn(x,C,O))}function Bn(x){pe.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Bn,pe);var is=/^https?$/i,go=["POST","PUT"];n=Bn.prototype,n.Fa=function(x){this.H=x},n.ea=function(x,C,O,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);C=C?C.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qi.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(C,String(x),!0),this.B=!1}catch(De){Os(this,De);return}if(x=O||"",O=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var Ee in ee)O.set(Ee,ee[Ee]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const De of ee.keys())O.set(De,ee.get(De));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(O.keys()).find(De=>De.toLowerCase()=="content-type"),Ee=c.FormData&&x instanceof c.FormData,!(Array.prototype.indexOf.call(go,C,void 0)>=0)||ee||Ee||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,tt]of O)this.g.setRequestHeader(De,tt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(De){Os(this,De)}};function Os(x,C){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=C,x.o=5,Ml(x),Sa(x)}function Ml(x){x.A||(x.A=!0,Ue(x,"complete"),Ue(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,Ue(this,"complete"),Ue(this,"abort"),Sa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sa(this,!0)),Bn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ss(this):this.Xa())},n.Xa=function(){ss(this)};function ss(x){if(x.h&&typeof a<"u"){if(x.v&&as(x)==4)setTimeout(x.Ca.bind(x),0);else if(Ue(x,"readystatechange"),as(x)==4){x.h=!1;try{const De=x.ca();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var O;if(!(O=C)){var ee;if(ee=De===0){let tt=String(x.D).match(Ll)[1]||null;!tt&&c.self&&c.self.location&&(tt=c.self.location.protocol.slice(0,-1)),ee=!is.test(tt?tt.toLowerCase():"")}O=ee}if(O)Ue(x,"complete"),Ue(x,"success");else{x.o=6;try{var Ee=as(x)>2?x.g.statusText:""}catch{Ee=""}x.l=Ee+" ["+x.ca()+"]",Ml(x)}}finally{Sa(x)}}}}function Sa(x,C){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const O=x.g;x.g=null,C||Ue(x,"ready");try{O.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function as(x){return x.g?x.g.readyState:0}n.ca=function(){try{return as(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(x){if(this.g){var C=this.g.responseText;return x&&C.indexOf(x)==0&&(C=C.substring(x.length)),bt(C)}};function Or(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Ks(x){const C={};x=(x.g&&as(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<x.length;ee++){if(F(x[ee]))continue;var O=$r(x[ee]);const Ee=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const De=C[Ee]||[];C[Ee]=De,De.push(O)}Fe(C,function(ee){return ee.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(x,C,O){return O&&O.internalChannelParams&&O.internalChannelParams[x]||C}function Qs(x){this.za=0,this.i=[],this.j=new Ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,x),this.Za=pi("retryDelaySeedMs",1e4,x),this.Ta=pi("forwardChannelMaxRetries",2,x),this.va=pi("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new zo(x&&x.concurrentRequestLimit),this.Ba=new za,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Qs.prototype,n.ka=8,n.I=1,n.connect=function(x,C,O,ee){jt(0),this.W=x,this.H=C||{},O&&ee!==void 0&&(this.H.OSID=O,this.H.OAID=ee),this.F=this.X,this.J=Xe(this,null,this.W),Ns(this)};function $a(x){if(Js(x),x.I==3){var C=x.V++,O=Tr(x.J);if(bn(O,"SID",x.M),bn(O,"RID",C),bn(O,"TYPE","terminate"),os(x,O),C=new Ai(x,x.j,C),C.M=2,C.A=Ba(Tr(O)),O=!1,c.navigator&&c.navigator.sendBeacon)try{O=c.navigator.sendBeacon(C.A.toString(),"")}catch{}!O&&c.Image&&(new Image().src=C.A,O=!0),O||(C.g=ht(C.j,null),C.g.ea(C.A)),C.F=Date.now(),Bi(C)}ze(x)}function Xs(x){x.g&&(Qo(x),x.g.cancel(),x.g=null)}function Js(x){Xs(x),x.v&&(c.clearTimeout(x.v),x.v=null),H(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&c.clearTimeout(x.m),x.m=null)}function Ns(x){if(!Ui(x.h)&&!x.m){x.m=!0;var C=x.Ea;re||D(),ne||(re(),ne=!0),V.add(C,x),x.D=0}}function xo(x,C){return ws(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=C.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=un(f(x.Ea,x,C),ve(x,x.D)),x.D++,!0)}n.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const Ee=new Ai(this,this.j,x);let De=this.o;if(this.U&&(De?(De=J(De),X(De,this.U)):De=this.U),this.u!==null||this.R||(Ee.J=De,De=null),this.S)e:{for(var C=0,O=0;O<this.i.length;O++){t:{var ee=this.i[O];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(C+=ee,C>4096){C=O;break e}if(C===4096||O===this.i.length-1){C=O+1;break e}}C=1e3}else C=1e3;C=Zs(this,Ee,C),O=Tr(this.J),bn(O,"RID",x),bn(O,"CVER",22),this.G&&bn(O,"X-HTTP-Session-Id",this.G),os(this,O),De&&(this.R?C="headers="+ir(Wr(De))+"&"+C:this.u&&po(O,this.u,De)),ho(this.h,Ee),this.Ra&&bn(O,"TYPE","init"),this.S?(bn(O,"$req",C),bn(O,"SID","null"),Ee.U=!0,Gr(Ee,O,null)):Gr(Ee,O,C),this.I=2}}else this.I==3&&(x?Ko(this,x):this.i.length==0||Ui(this.h)||Ko(this))};function Ko(x,C){var O;C?O=C.l:O=x.V++;const ee=Tr(x.J);bn(ee,"SID",x.M),bn(ee,"RID",O),bn(ee,"AID",x.K),os(x,ee),x.u&&x.o&&po(ee,x.u,x.o),O=new Ai(x,x.j,O,x.D+1),x.u===null&&(O.J=x.o),C&&(x.i=C.G.concat(x.i)),C=Zs(x,O,1e3),O.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),ho(x.h,O),Gr(O,ee,C)}function os(x,C){x.H&&je(x.H,function(O,ee){bn(C,ee,O)}),x.l&&je({},function(O,ee){bn(C,ee,O)})}function Zs(x,C,O){O=Math.min(x.i.length,O);const ee=x.l?f(x.l.Ka,x.l,x):null;e:{var Ee=x.i;let Qt=-1;for(;;){const ar=["count="+O];Qt==-1?O>0?(Qt=Ee[0].g,ar.push("ofs="+Qt)):Qt=0:ar.push("ofs="+Qt);let hn=!0;for(let Un=0;Un<O;Un++){var De=Ee[Un].g;const gi=Ee[Un].map;if(De-=Qt,De<0)Qt=Math.max(0,Ee[Un].g-100),hn=!1;else try{De="req"+De+"_"||"";try{var tt=gi instanceof Map?gi:Object.entries(gi);for(const[Ei,Jn]of tt){let Ti=Jn;d(Jn)&&(Ti=nn(Jn)),ar.push(De+Ei+"="+encodeURIComponent(Ti))}}catch(Ei){throw ar.push(De+"type="+encodeURIComponent("_badmap")),Ei}}catch{ee&&ee(gi)}}if(hn){tt=ar.join("&");break e}}tt=void 0}return x=x.i.splice(0,O),C.G=x,tt}function Ol(x){if(!x.g&&!x.v){x.Y=1;var C=x.Da;re||D(),ne||(re(),ne=!0),V.add(C,x),x.A=0}}function Fs(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=un(f(x.Da,x),ve(x,x.A)),x.A++,!0)}n.Da=function(){if(this.v=null,A(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=un(f(this.Wa,this),x)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,jt(10),Xs(this),A(this))};function Qo(x){x.B!=null&&(c.clearTimeout(x.B),x.B=null)}function A(x){x.g=new Ai(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var C=Tr(x.na);bn(C,"RID","rpc"),bn(C,"SID",x.M),bn(C,"AID",x.K),bn(C,"CI",x.F?"0":"1"),!x.F&&x.ia&&bn(C,"TO",x.ia),bn(C,"TYPE","xmlhttp"),os(x,C),x.u&&x.o&&po(C,x.u,x.o),x.O&&(x.g.H=x.O);var O=x.g;x=x.ba,O.M=1,O.A=Ba(Tr(C)),O.u=null,O.R=!0,Vi(O,x)}n.Va=function(){this.C!=null&&(this.C=null,Xs(this),Fs(this),jt(19))};function H(x){x.C!=null&&(c.clearTimeout(x.C),x.C=null)}function ce(x,C){var O=null;if(x.g==C){H(x),Qo(x),x.g=null;var ee=2}else if(Ds(x.h,C))O=C.G,Ho(x.h,C),ee=1;else return;if(x.I!=0){if(C.o)if(ee==1){O=C.u?C.u.length:0,C=Date.now()-C.F;var Ee=x.D;ee=Dn(),Ue(ee,new Nt(ee,O)),Ns(x)}else Ol(x);else if(Ee=C.m,Ee==3||Ee==0&&C.X>0||!(ee==1&&xo(x,C)||ee==2&&Fs(x)))switch(O&&O.length>0&&(C=x.h,C.i=C.i.concat(O)),Ee){case 1:Ae(x,5);break;case 4:Ae(x,10);break;case 3:Ae(x,6);break;default:Ae(x,2)}}}function ve(x,C){let O=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(O*=2),O*C}function Ae(x,C){if(x.j.info("Error code "+C),C==2){var O=f(x.bb,x),ee=x.Ua;const Ee=!ee;ee=new mi(ee||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||mn(ee,"https"),Ba(ee),Ee?Ms(ee.toString(),O):Aa(ee.toString(),O)}else jt(2);x.I=0,x.l&&x.l.pa(C),ze(x),Js(x)}n.bb=function(x){x?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function ze(x){if(x.I=0,x.ja=[],x.l){const C=$o(x.h);(C.length!=0||x.i.length!=0)&&(T(x.ja,C),T(x.ja,x.i),x.h.i.length=0,b(x.i),x.i.length=0),x.l.oa()}}function Xe(x,C,O){var ee=O instanceof mi?Tr(O):new mi(O);if(ee.g!="")C&&(ee.g=C+"."+ee.g),wa(ee,ee.u);else{var Ee=c.location;ee=Ee.protocol,C=C?C+"."+Ee.hostname:Ee.hostname,Ee=+Ee.port;const De=new mi(null);ee&&mn(De,ee),C&&(De.g=C),Ee&&wa(De,Ee),O&&(De.h=O),ee=De}return O=x.G,C=x.wa,O&&C&&bn(ee,O,C),bn(ee,"VER",x.ka),os(x,ee),ee}function ht(x,C,O){if(C&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return C=x.Aa&&!x.ma?new Bn(new Rt({ab:O})):new Bn(x.ma),C.Fa(x.L),C}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xt(){}n=xt.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ot(){}Ot.prototype.g=function(x,C){return new It(x,C)};function It(x,C){pe.call(this),this.g=new Qs(C),this.l=x,this.h=C&&C.messageUrlParams||null,x=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(x?x["X-WebChannel-Content-Type"]=C.messageContentType:x={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.sa&&(x?x["X-WebChannel-Client-Profile"]=C.sa:x={"X-WebChannel-Client-Profile":C.sa}),this.g.U=x,(x=C&&C.Qb)&&!F(x)&&(this.g.u=x),this.A=C&&C.supportsCrossDomainXhr||!1,this.v=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!F(C)&&(this.g.G=C,x=this.h,x!==null&&C in x&&(x=this.h,C in x&&delete x[C])),this.j=new Qn(this)}v(It,pe),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){$a(this.g)},It.prototype.o=function(x){var C=this.g;if(typeof x=="string"){var O={};O.__data__=x,x=O}else this.v&&(O={},O.__data__=nn(x),x=O);C.i.push(new wr(C.Ya++,x)),C.I==3&&Ns(C)},It.prototype.N=function(){this.g.l=null,delete this.j,$a(this.g),delete this.g,It.Z.N.call(this)};function pn(x){Lt.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var C=x.__sm__;if(C){e:{for(const O in C){x=O;break e}x=void 0}(this.i=x)&&(x=this.i,C=C!==null&&x in C?C[x]:void 0),this.data=C}else this.data=x}v(pn,Lt);function sr(){zt.call(this),this.status=1}v(sr,zt);function Qn(x){this.g=x}v(Qn,xt),Qn.prototype.ra=function(){Ue(this.g,"a")},Qn.prototype.qa=function(x){Ue(this.g,new pn(x))},Qn.prototype.pa=function(x){Ue(this.g,new sr)},Qn.prototype.oa=function(){Ue(this.g,"b")},Ot.prototype.createWebChannel=Ot.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,SA=function(){return new Ot},AA=function(){return Dn()},NA=en,Hv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,Gp=es,Fi.COMPLETE="complete",_A=Fi,br.EventType=rn,rn.OPEN="a",rn.CLOSE="b",rn.ERROR="c",rn.MESSAGE="d",pe.prototype.listen=pe.prototype.J,Pf=br,Bn.prototype.listenOnce=Bn.prototype.K,Bn.prototype.getLastError=Bn.prototype.Ha,Bn.prototype.getLastErrorCode=Bn.prototype.ya,Bn.prototype.getStatus=Bn.prototype.ca,Bn.prototype.getResponseJson=Bn.prototype.La,Bn.prototype.getResponseText=Bn.prototype.la,Bn.prototype.send=Bn.prototype.ea,Bn.prototype.setWithCredentials=Bn.prototype.Fa,wA=Bn}).apply(typeof Sp<"u"?Sp:typeof self<"u"?self:typeof window<"u"?window:{});const cw="@firebase/firestore",uw="4.9.2";let Rs=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Rs.UNAUTHENTICATED=new Rs(null),Rs.GOOGLE_CREDENTIALS=new Rs("google-credentials-uid"),Rs.FIRST_PARTY=new Rs("first-party-uid"),Rs.MOCK_USER=new Rs("mock-user");let Mh="12.3.0";const rd=new Gg("@firebase/firestore");function th(){return rd.logLevel}function ft(n,...e){if(rd.logLevel<=Nn.DEBUG){const t=e.map(Y1);rd.debug(`Firestore (${Mh}): ${n}`,...t)}}function yc(n,...e){if(rd.logLevel<=Nn.ERROR){const t=e.map(Y1);rd.error(`Firestore (${Mh}): ${n}`,...t)}}function wh(n,...e){if(rd.logLevel<=Nn.WARN){const t=e.map(Y1);rd.warn(`Firestore (${Mh}): ${n}`,...t)}}function Y1(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ut(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,jA(n,r,t)}function jA(n,e,t){let r=`FIRESTORE (${Mh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw yc(r),new Error(r)}function Pn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||jA(e,i,r)}function tn(n,e){return n}const Ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends Vo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class EA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Rs.UNAUTHENTICATED)))}shutdown(){}}class _8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class N8{constructor(e){this.t=e,this.currentUser=Rs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pn(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let a=new vl;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new vl,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},d=h=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new vl)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pn(typeof r.accessToken=="string",31837,{l:r}),new EA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pn(e===null||typeof e=="string",2055,{h:e}),new Rs(e)}}class A8{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Rs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class S8{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new A8(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Rs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j8{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ao(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pn(this.o===void 0,3512);const r=a=>{a.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,ft("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new dw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Pn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new dw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function E8(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class K1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=E8(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function An(n,e){return n<e?-1:n>e?1:0}function $v(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Kx(i)===Kx(a)?An(i,a):Kx(i)?1:-1}return An(n.length,e.length)}const T8=55296,C8=57343;function Kx(n){const e=n.charCodeAt(0);return e>=T8&&e<=C8}function _h(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}const hw="__name__";class fl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ut(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ut(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return fl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fl?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=fl.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return An(e.length,t.length)}static compareSegments(e,t){const r=fl.isNumericId(e),i=fl.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?fl.extractNumericId(e).compare(fl.extractNumericId(t)):$v(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hu.fromString(e.substring(4,e.length-2))}}class fr extends fl{construct(e,t,r){return new fr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new lt(Ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new fr(t)}static emptyPath(){return new fr([])}}const I8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ps extends fl{construct(e,t,r){return new ps(e,t,r)}static isValidIdentifier(e){return I8.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ps.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hw}static keyField(){return new ps([hw])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new lt(Ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new lt(Ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new lt(Ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(a(),i++)}if(a(),c)throw new lt(Ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ps(t)}static emptyPath(){return new ps([])}}class Dt{constructor(e){this.path=e}static fromPath(e){return new Dt(fr.fromString(e))}static fromName(e){return new Dt(fr.fromString(e).popFirst(5))}static empty(){return new Dt(fr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return fr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Dt(new fr(e.slice()))}}function TA(n,e,t){if(!t)throw new lt(Ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function L8(n,e,t,r){if(e===!0&&r===!0)throw new lt(Ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fw(n){if(!Dt.isDocumentKey(n))throw new lt(Ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mw(n){if(Dt.isDocumentKey(n))throw new lt(Ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Qg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ut(12329,{type:typeof n})}function Gs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new lt(Ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qg(n);throw new lt(Ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _i(n,e){const t={typeString:n};return e&&(t.value=e),t}function vm(n,e){if(!CA(n))throw new lt(Ge.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new lt(Ge.INVALID_ARGUMENT,t);return!0}const pw=-62135596800,gw=1e6;class rr{static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*gw);return new rr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new lt(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new lt(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pw)throw new lt(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new lt(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gw}_compareTo(e){return this.seconds===e.seconds?An(this.nanoseconds,e.nanoseconds):An(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vm(e,rr._jsonSchema))return new rr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rr._jsonSchemaVersion="firestore/timestamp/1.0",rr._jsonSchema={type:_i("string",rr._jsonSchemaVersion),seconds:_i("number"),nanoseconds:_i("number")};class Wt{static fromTimestamp(e){return new Wt(e)}static min(){return new Wt(new rr(0,0))}static max(){return new Wt(new rr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Jf=-1;function R8(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Wt.fromTimestamp(r===1e9?new rr(t+1,0):new rr(t,r));return new gu(i,Dt.empty(),e)}function k8(n){return new gu(n.readTime,n.key,Jf)}class gu{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new gu(Wt.min(),Dt.empty(),Jf)}static max(){return new gu(Wt.max(),Dt.empty(),Jf)}}function P8(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Dt.comparator(n.documentKey,e.documentKey),t!==0?t:An(n.largestBatchId,e.largestBatchId))}const D8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Oh(n){if(n.code!==Ge.FAILED_PRECONDITION||n.message!==D8)throw n;ft("LocalStore","Unexpectedly lost primary lease")}class Je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ut(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Je(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Je?t:Je.resolve(t)}catch(t){return Je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Je.reject(t)}static resolve(e){return new Je(((t,r)=>{t(e)}))}static reject(e){return new Je(((t,r)=>{r(e)}))}static waitFor(e){return new Je(((t,r)=>{let i=0,a=0,c=!1;e.forEach((d=>{++i,d.next((()=>{++a,c&&a===i&&t()}),(h=>r(h)))})),c=!0,a===i&&t()}))}static or(e){let t=Je.resolve(!1);for(const r of e)t=t.next((i=>i?Je.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new Je(((r,i)=>{const a=e.length,c=new Array(a);let d=0;for(let h=0;h<a;h++){const f=h;t(e[f]).next((p=>{c[f]=p,++d,d===a&&r(c)}),(p=>i(p)))}}))}static doWhile(e,t){return new Je(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function O8(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fh(n){return n.name==="IndexedDbTransactionError"}class Xg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Xg.ce=-1;const Q1=-1;function ym(n){return n==null}function gg(n){return n===0&&1/n==-1/0}function F8(n){return typeof n=="number"&&Number.isInteger(n)&&!gg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const IA="";function q8(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xw(e)),e=V8(n.get(t),e);return xw(e)}function V8(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case IA:t+="";break;default:t+=a}}return t}function xw(n){return n+IA+""}function vw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Eu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function LA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Hr{constructor(e,t){this.comparator=e,this.root=t||ms.EMPTY}insert(e,t){return new Hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ms.BLACK,null,null))}remove(e){return new Hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ms.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jp(this.root,e,this.comparator,!1)}getReverseIterator(){return new jp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jp(this.root,e,this.comparator,!0)}}class jp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ms{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ms.RED,this.left=i??ms.EMPTY,this.right=a??ms.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ms(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ms.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ms.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ms.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ms.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ut(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ut(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ut(27949);return e+(this.isRed()?0:1)}}ms.EMPTY=null,ms.RED=!0,ms.BLACK=!1;ms.EMPTY=new class{constructor(){this.size=0}get key(){throw Ut(57766)}get value(){throw Ut(16141)}get color(){throw Ut(16727)}get left(){throw Ut(29726)}get right(){throw Ut(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new ms(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Oi{constructor(e){this.comparator=e,this.data=new Hr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yw(this.data.getIterator())}getIteratorFrom(e){return new yw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Oi)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Oi(this.comparator);return t.data=e,t}}class yw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ma{constructor(e){this.fields=e,e.sort(ps.comparator)}static empty(){return new Ma([])}unionWith(e){let t=new Oi(ps.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ma(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _h(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class RA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new RA("Invalid base64 string: "+a):a}})(e);return new vs(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a})(e);return new vs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return An(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vs.EMPTY_BYTE_STRING=new vs("");const B8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xu(n){if(Pn(!!n,39018),typeof n=="string"){let e=0;const t=B8.exec(n);if(Pn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:oi(n.seconds),nanos:oi(n.nanos)}}function oi(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function vu(n){return typeof n=="string"?vs.fromBase64String(n):vs.fromUint8Array(n)}const kA="server_timestamp",PA="__type__",DA="__previous_value__",MA="__local_write_time__";function X1(n){return(n?.mapValue?.fields||{})[PA]?.stringValue===kA}function Jg(n){const e=n.mapValue.fields[DA];return X1(e)?Jg(e):e}function Zf(n){const e=xu(n.mapValue.fields[MA].timestampValue);return new rr(e.seconds,e.nanos)}class U8{constructor(e,t,r,i,a,c,d,h,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p}}const xg="(default)";class em{constructor(e,t){this.projectId=e,this.database=t||xg}static empty(){return new em("","")}get isDefaultDatabase(){return this.database===xg}isEqual(e){return e instanceof em&&e.projectId===this.projectId&&e.database===this.database}}const OA="__type__",z8="__max__",Ep={mapValue:{}},FA="__vector__",vg="value";function yu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?X1(n)?4:$8(n)?9007199254740991:H8(n)?10:11:Ut(28295,{value:n})}function Sl(n,e){if(n===e)return!0;const t=yu(n);if(t!==yu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zf(n).isEqual(Zf(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=xu(i.timestampValue),d=xu(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return vu(i.bytesValue).isEqual(vu(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return oi(i.geoPointValue.latitude)===oi(a.geoPointValue.latitude)&&oi(i.geoPointValue.longitude)===oi(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return oi(i.integerValue)===oi(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=oi(i.doubleValue),d=oi(a.doubleValue);return c===d?gg(c)===gg(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return _h(n.arrayValue.values||[],e.arrayValue.values||[],Sl);case 10:case 11:return(function(i,a){const c=i.mapValue.fields||{},d=a.mapValue.fields||{};if(vw(c)!==vw(d))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(d[h]===void 0||!Sl(c[h],d[h])))return!1;return!0})(n,e);default:return Ut(52216,{left:n})}}function tm(n,e){return(n.values||[]).find((t=>Sl(t,e)))!==void 0}function Nh(n,e){if(n===e)return 0;const t=yu(n),r=yu(e);if(t!==r)return An(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return An(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const d=oi(a.integerValue||a.doubleValue),h=oi(c.integerValue||c.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(n,e);case 3:return bw(n.timestampValue,e.timestampValue);case 4:return bw(Zf(n),Zf(e));case 5:return $v(n.stringValue,e.stringValue);case 6:return(function(a,c){const d=vu(a),h=vu(c);return d.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const d=a.split("/"),h=c.split("/");for(let f=0;f<d.length&&f<h.length;f++){const p=An(d[f],h[f]);if(p!==0)return p}return An(d.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const d=An(oi(a.latitude),oi(c.latitude));return d!==0?d:An(oi(a.longitude),oi(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ww(n.arrayValue,e.arrayValue);case 10:return(function(a,c){const d=a.fields||{},h=c.fields||{},f=d[vg]?.arrayValue,p=h[vg]?.arrayValue,v=An(f?.values?.length||0,p?.values?.length||0);return v!==0?v:ww(f,p)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===Ep.mapValue&&c===Ep.mapValue)return 0;if(a===Ep.mapValue)return 1;if(c===Ep.mapValue)return-1;const d=a.fields||{},h=Object.keys(d),f=c.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let v=0;v<h.length&&v<p.length;++v){const _=$v(h[v],p[v]);if(_!==0)return _;const b=Nh(d[h[v]],f[p[v]]);if(b!==0)return b}return An(h.length,p.length)})(n.mapValue,e.mapValue);default:throw Ut(23264,{he:t})}}function bw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return An(n,e);const t=xu(n),r=xu(e),i=An(t.seconds,r.seconds);return i!==0?i:An(t.nanos,r.nanos)}function ww(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Nh(t[i],r[i]);if(a)return a}return An(t.length,r.length)}function Ah(n){return Gv(n)}function Gv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=xu(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return vu(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Dt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Gv(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${Gv(t.fields[c])}`;return i+"}"})(n.mapValue):Ut(61005,{value:n})}function Wp(n){switch(yu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jg(n);return e?16+Wp(e):16;case 5:return 2*n.stringValue.length;case 6:return vu(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Wp(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Eu(r.fields,((a,c)=>{i+=a.length+Wp(c)})),i})(n.mapValue);default:throw Ut(13486,{value:n})}}function _w(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wv(n){return!!n&&"integerValue"in n}function J1(n){return!!n&&"arrayValue"in n}function Nw(n){return!!n&&"nullValue"in n}function Aw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yp(n){return!!n&&"mapValue"in n}function H8(n){return(n?.mapValue?.fields||{})[OA]?.stringValue===FA}function Vf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Eu(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Vf(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vf(n.arrayValue.values[t]);return e}return{...n}}function $8(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===z8}class $s{constructor(e){this.value=e}static empty(){return new $s({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Yp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vf(t)}setAll(e){let t=ps.emptyPath(),r={},i=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=d.popLast()}c?r[d.lastSegment()]=Vf(c):i.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Yp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Yp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Eu(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new $s(Vf(this.value))}}function qA(n){const e=[];return Eu(n.fields,((t,r)=>{const i=new ps([t]);if(Yp(r)){const a=qA(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)})),new Ma(e)}class Zi{constructor(e,t,r,i,a,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Zi(e,0,Wt.min(),Wt.min(),Wt.min(),$s.empty(),0)}static newFoundDocument(e,t,r,i){return new Zi(e,1,t,Wt.min(),r,i,0)}static newNoDocument(e,t){return new Zi(e,2,t,Wt.min(),Wt.min(),$s.empty(),0)}static newUnknownDocument(e,t){return new Zi(e,3,t,Wt.min(),Wt.min(),$s.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$s.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$s.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yg{constructor(e,t){this.position=e,this.inclusive=t}}function Sw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(a.field.isKeyField()?r=Dt.comparator(Dt.fromName(c.referenceValue),t.key):r=Nh(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function jw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sl(n.position[t],e.position[t]))return!1;return!0}class nm{constructor(e,t="asc"){this.field=e,this.dir=t}}function G8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class VA{}class wi extends VA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Y8(e,t,r):t==="array-contains"?new X8(e,r):t==="in"?new J8(e,r):t==="not-in"?new Z8(e,r):t==="array-contains-any"?new ek(e,r):new wi(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new K8(e,r):new Q8(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Nh(t,this.value)):t!==null&&yu(this.value)===yu(t)&&this.matchesComparison(Nh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ut(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fo extends VA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Fo(e,t)}matches(e){return BA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function BA(n){return n.op==="and"}function UA(n){return W8(n)&&BA(n)}function W8(n){for(const e of n.filters)if(e instanceof Fo)return!1;return!0}function Yv(n){if(n instanceof wi)return n.field.canonicalString()+n.op.toString()+Ah(n.value);if(UA(n))return n.filters.map((e=>Yv(e))).join(",");{const e=n.filters.map((t=>Yv(t))).join(",");return`${n.op}(${e})`}}function zA(n,e){return n instanceof wi?(function(r,i){return i instanceof wi&&r.op===i.op&&r.field.isEqual(i.field)&&Sl(r.value,i.value)})(n,e):n instanceof Fo?(function(r,i){return i instanceof Fo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,c,d)=>a&&zA(c,i.filters[d])),!0):!1})(n,e):void Ut(19439)}function HA(n){return n instanceof wi?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ah(t.value)}`})(n):n instanceof Fo?(function(t){return t.op.toString()+" {"+t.getFilters().map(HA).join(" ,")+"}"})(n):"Filter"}class Y8 extends wi{constructor(e,t,r){super(e,t,r),this.key=Dt.fromName(r.referenceValue)}matches(e){const t=Dt.comparator(e.key,this.key);return this.matchesComparison(t)}}class K8 extends wi{constructor(e,t){super(e,"in",t),this.keys=$A("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Q8 extends wi{constructor(e,t){super(e,"not-in",t),this.keys=$A("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function $A(n,e){return(e.arrayValue?.values||[]).map((t=>Dt.fromName(t.referenceValue)))}class X8 extends wi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return J1(t)&&tm(t.arrayValue,this.value)}}class J8 extends wi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tm(this.value.arrayValue,t)}}class Z8 extends wi{constructor(e,t){super(e,"not-in",t)}matches(e){if(tm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tm(this.value.arrayValue,t)}}class ek extends wi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!J1(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>tm(this.value.arrayValue,r)))}}class tk{constructor(e,t=null,r=[],i=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=d,this.Te=null}}function Ew(n,e=null,t=[],r=[],i=null,a=null,c=null){return new tk(n,e,t,r,i,a,c)}function Z1(n){const e=tn(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Yv(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),ym(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ah(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ah(r))).join(",")),e.Te=t}return e.Te}function ey(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!G8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jw(n.startAt,e.startAt)&&jw(n.endAt,e.endAt)}function Kv(n){return Dt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class qh{constructor(e,t=null,r=[],i=[],a=null,c="F",d=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nk(n,e,t,r,i,a,c,d){return new qh(n,e,t,r,i,a,c,d)}function Zg(n){return new qh(n)}function Tw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function GA(n){return n.collectionGroup!==null}function Bf(n){const e=tn(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Oi(ps.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(d=d.add(f.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new nm(a,r))})),t.has(ps.keyField().canonicalString())||e.Ie.push(new nm(ps.keyField(),r))}return e.Ie}function yl(n){const e=tn(n);return e.Ee||(e.Ee=rk(e,Bf(n))),e.Ee}function rk(n,e){if(n.limitType==="F")return Ew(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new nm(i.field,a)}));const t=n.endAt?new yg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new yg(n.startAt.position,n.startAt.inclusive):null;return Ew(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Qv(n,e){const t=n.filters.concat([e]);return new qh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xv(n,e,t){return new qh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function e0(n,e){return ey(yl(n),yl(e))&&n.limitType===e.limitType}function WA(n){return`${Z1(yl(n))}|lt:${n.limitType}`}function nh(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>HA(i))).join(", ")}]`),ym(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Ah(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Ah(i))).join(",")),`Target(${r})`})(yl(n))}; limitType=${n.limitType})`}function t0(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Dt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of Bf(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(c,d,h){const f=Sw(c,d,h);return c.inclusive?f<=0:f<0})(r.startAt,Bf(r),i)||r.endAt&&!(function(c,d,h){const f=Sw(c,d,h);return c.inclusive?f>=0:f>0})(r.endAt,Bf(r),i))})(n,e)}function ik(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function YA(n){return(e,t)=>{let r=!1;for(const i of Bf(n)){const a=sk(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function sk(n,e,t){const r=n.field.isKeyField()?Dt.comparator(e.key,t.key):(function(a,c,d){const h=c.data.field(a),f=d.data.field(a);return h!==null&&f!==null?Nh(h,f):Ut(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ut(19790,{direction:n.dir})}}class fd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Eu(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return LA(this.inner)}size(){return this.innerSize}}const ak=new Hr(Dt.comparator);function bc(){return ak}const KA=new Hr(Dt.comparator);function Df(...n){let e=KA;for(const t of n)e=e.insert(t.key,t);return e}function QA(n){let e=KA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Qu(){return Uf()}function XA(){return Uf()}function Uf(){return new fd((n=>n.toString()),((n,e)=>n.isEqual(e)))}const ok=new Hr(Dt.comparator),lk=new Oi(Dt.comparator);function Sn(...n){let e=lk;for(const t of n)e=e.add(t);return e}const ck=new Oi(An);function uk(){return ck}function ty(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gg(e)?"-0":e}}function JA(n){return{integerValue:""+n}}function dk(n,e){return F8(e)?JA(e):ty(n,e)}class n0{constructor(){this._=void 0}}function hk(n,e,t){return n instanceof bg?(function(i,a){const c={fields:{[PA]:{stringValue:kA},[MA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&X1(a)&&(a=Jg(a)),a&&(c.fields[DA]=a),{mapValue:c}})(t,e):n instanceof rm?eS(n,e):n instanceof im?tS(n,e):(function(i,a){const c=ZA(i,a),d=Cw(c)+Cw(i.Ae);return Wv(c)&&Wv(i.Ae)?JA(d):ty(i.serializer,d)})(n,e)}function fk(n,e,t){return n instanceof rm?eS(n,e):n instanceof im?tS(n,e):t}function ZA(n,e){return n instanceof wg?(function(r){return Wv(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class bg extends n0{}class rm extends n0{constructor(e){super(),this.elements=e}}function eS(n,e){const t=nS(e);for(const r of n.elements)t.some((i=>Sl(i,r)))||t.push(r);return{arrayValue:{values:t}}}class im extends n0{constructor(e){super(),this.elements=e}}function tS(n,e){let t=nS(e);for(const r of n.elements)t=t.filter((i=>!Sl(i,r)));return{arrayValue:{values:t}}}class wg extends n0{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Cw(n){return oi(n.integerValue||n.doubleValue)}function nS(n){return J1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function mk(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof rm&&i instanceof rm||r instanceof im&&i instanceof im?_h(r.elements,i.elements,Sl):r instanceof wg&&i instanceof wg?Sl(r.Ae,i.Ae):r instanceof bg&&i instanceof bg})(n.transform,e.transform)}class pk{constructor(e,t){this.version=e,this.transformResults=t}}class gs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gs}static exists(e){return new gs(void 0,e)}static updateTime(e){return new gs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class r0{}function rS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new i0(n.key,gs.none()):new bm(n.key,n.data,gs.none());{const t=n.data,r=$s.empty();let i=new Oi(ps.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new Tu(n.key,r,new Ma(i.toArray()),gs.none())}}function gk(n,e,t){n instanceof bm?(function(i,a,c){const d=i.value.clone(),h=Lw(i.fieldTransforms,a,c.transformResults);d.setAll(h),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Tu?(function(i,a,c){if(!Kp(i.precondition,a))return void a.convertToUnknownDocument(c.version);const d=Lw(i.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(iS(i)),h.setAll(d),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):(function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function zf(n,e,t,r){return n instanceof bm?(function(a,c,d,h){if(!Kp(a.precondition,c))return d;const f=a.value.clone(),p=Rw(a.fieldTransforms,h,c);return f.setAll(p),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Tu?(function(a,c,d,h){if(!Kp(a.precondition,c))return d;const f=Rw(a.fieldTransforms,h,c),p=c.data;return p.setAll(iS(a)),p.setAll(f),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(a,c,d){return Kp(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function xk(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=ZA(r.transform,i||null);a!=null&&(t===null&&(t=$s.empty()),t.set(r.field,a))}return t||null}function Iw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_h(r,i,((a,c)=>mk(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class bm extends r0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Tu extends r0{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function iS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Lw(n,e,t){const r=new Map;Pn(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,d=e.data.field(a.field);r.set(a.field,fk(c,d,t[i]))}return r}function Rw(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,hk(a,c,e))}return r}class i0 extends r0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sS extends r0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vk{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&gk(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XA();return this.mutations.forEach((i=>{const a=e.get(i.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(i.key)?null:d;const h=rS(c,d);h!==null&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(Wt.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Sn())}isEqual(e){return this.batchId===e.batchId&&_h(this.mutations,e.mutations,((t,r)=>Iw(t,r)))&&_h(this.baseMutations,e.baseMutations,((t,r)=>Iw(t,r)))}}class ny{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return ok})();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new ny(e,t,r,i)}}class yk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class bk{constructor(e,t){this.count=e,this.unchangedNames=t}}var bi,kn;function aS(n){switch(n){case Ge.OK:return Ut(64938);case Ge.CANCELLED:case Ge.UNKNOWN:case Ge.DEADLINE_EXCEEDED:case Ge.RESOURCE_EXHAUSTED:case Ge.INTERNAL:case Ge.UNAVAILABLE:case Ge.UNAUTHENTICATED:return!1;case Ge.INVALID_ARGUMENT:case Ge.NOT_FOUND:case Ge.ALREADY_EXISTS:case Ge.PERMISSION_DENIED:case Ge.FAILED_PRECONDITION:case Ge.ABORTED:case Ge.OUT_OF_RANGE:case Ge.UNIMPLEMENTED:case Ge.DATA_LOSS:return!0;default:return Ut(15467,{code:n})}}function oS(n){if(n===void 0)return yc("GRPC error has no .code"),Ge.UNKNOWN;switch(n){case bi.OK:return Ge.OK;case bi.CANCELLED:return Ge.CANCELLED;case bi.UNKNOWN:return Ge.UNKNOWN;case bi.DEADLINE_EXCEEDED:return Ge.DEADLINE_EXCEEDED;case bi.RESOURCE_EXHAUSTED:return Ge.RESOURCE_EXHAUSTED;case bi.INTERNAL:return Ge.INTERNAL;case bi.UNAVAILABLE:return Ge.UNAVAILABLE;case bi.UNAUTHENTICATED:return Ge.UNAUTHENTICATED;case bi.INVALID_ARGUMENT:return Ge.INVALID_ARGUMENT;case bi.NOT_FOUND:return Ge.NOT_FOUND;case bi.ALREADY_EXISTS:return Ge.ALREADY_EXISTS;case bi.PERMISSION_DENIED:return Ge.PERMISSION_DENIED;case bi.FAILED_PRECONDITION:return Ge.FAILED_PRECONDITION;case bi.ABORTED:return Ge.ABORTED;case bi.OUT_OF_RANGE:return Ge.OUT_OF_RANGE;case bi.UNIMPLEMENTED:return Ge.UNIMPLEMENTED;case bi.DATA_LOSS:return Ge.DATA_LOSS;default:return Ut(39323,{code:n})}}(kn=bi||(bi={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";function wk(){return new TextEncoder}const _k=new hu([4294967295,4294967295],0);function kw(n){const e=wk().encode(n),t=new bA;return t.update(e),new Uint8Array(t.digest())}function Pw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new hu([t,r],0),new hu([i,a],0)]}class ry{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Mf(`Invalid padding: ${t}`);if(r<0)throw new Mf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mf(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Mf(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=hu.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(hu.fromNumber(r)));return i.compare(_k)===1&&(i=new hu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=kw(e),[r,i]=Pw(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new ry(a,i,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=kw(e),[r,i]=Pw(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Mf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class s0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,wm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new s0(Wt.min(),i,new Hr(An),bc(),Sn())}}class wm{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wm(r,t,Sn(),Sn(),Sn())}}class Qp{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class lS{constructor(e,t){this.targetId=e,this.Ce=t}}class cS{constructor(e,t,r=vs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Dw{constructor(){this.ve=0,this.Fe=Mw(),this.Me=vs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Sn(),t=Sn(),r=Sn();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ut(38017,{changeType:a})}})),new wm(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Mw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Nk{constructor(e){this.Ge=e,this.ze=new Map,this.je=bc(),this.Je=Tp(),this.He=Tp(),this.Ye=new Hr(An)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ut(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Kv(a))if(r===0){const c=new Dt(a.path);this.et(t,c,Zi.newNoDocument(c,Wt.min()))}else Pn(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),h=d?this.ct(d,e,c):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let c,d;try{c=vu(r).toUint8Array()}catch(h){if(h instanceof RA)return wh("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new ry(c,i,a)}catch(h){return wh(h instanceof Mf?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const d=this.ot(c);if(d){if(a.current&&Kv(d.target)){const h=new Dt(d.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,Zi.newNoDocument(h,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let r=Sn();this.He.forEach(((a,c)=>{let d=!0;c.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const i=new s0(e,t,this.Ye,this.je,r);return this.je=bc(),this.Je=Tp(),this.He=Tp(),this.Ye=new Hr(An),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Dw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Oi(An),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Oi(An),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ft("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Tp(){return new Hr(Dt.comparator)}function Mw(){return new Hr(Dt.comparator)}const Ak={asc:"ASCENDING",desc:"DESCENDING"},Sk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jk={and:"AND",or:"OR"};class Ek{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jv(n,e){return n.useProto3Json||ym(e)?e:{value:e}}function _g(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Tk(n,e){return _g(n,e.toTimestamp())}function Fa(n){return Pn(!!n,49232),Wt.fromTimestamp((function(t){const r=xu(t);return new rr(r.seconds,r.nanos)})(n))}function iy(n,e){return Zv(n,e).canonicalString()}function Zv(n,e){const t=(function(i){return new fr(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function dS(n){const e=fr.fromString(n);return Pn(xS(e),10190,{key:e.toString()}),e}function Ng(n,e){return iy(n.databaseId,e.path)}function Hf(n,e){const t=dS(e);if(t.get(1)!==n.databaseId.projectId)throw new lt(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new lt(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Dt(fS(t))}function hS(n,e){return iy(n.databaseId,e)}function Ck(n){const e=dS(n);return e.length===4?fr.emptyPath():fS(e)}function e1(n){return new fr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fS(n){return Pn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Ow(n,e,t){return{name:Ng(n,e),fields:t.value.mapValue.fields}}function Ik(n,e){return"found"in e?(function(r,i){Pn(!!i.found,43571),i.found.name,i.found.updateTime;const a=Hf(r,i.found.name),c=Fa(i.found.updateTime),d=i.found.createTime?Fa(i.found.createTime):Wt.min(),h=new $s({mapValue:{fields:i.found.fields}});return Zi.newFoundDocument(a,c,d,h)})(n,e):"missing"in e?(function(r,i){Pn(!!i.missing,3894),Pn(!!i.readTime,22933);const a=Hf(r,i.missing),c=Fa(i.readTime);return Zi.newNoDocument(a,c)})(n,e):Ut(7234,{result:e})}function Lk(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ut(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(f,p){return f.useProto3Json?(Pn(p===void 0||typeof p=="string",58123),vs.fromBase64String(p||"")):(Pn(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),vs.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(f){const p=f.code===void 0?Ge.UNKNOWN:oS(f.code);return new lt(p,f.message||"")})(c);t=new cS(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hf(n,r.document.name),a=Fa(r.document.updateTime),c=r.document.createTime?Fa(r.document.createTime):Wt.min(),d=new $s({mapValue:{fields:r.document.fields}}),h=Zi.newFoundDocument(i,a,c,d),f=r.targetIds||[],p=r.removedTargetIds||[];t=new Qp(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Hf(n,r.document),a=r.readTime?Fa(r.readTime):Wt.min(),c=Zi.newNoDocument(i,a),d=r.removedTargetIds||[];t=new Qp([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Hf(n,r.document),a=r.removedTargetIds||[];t=new Qp([],a,i,null)}else{if(!("filter"in e))return Ut(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new bk(i,a),d=r.targetId;t=new lS(d,c)}}return t}function mS(n,e){let t;if(e instanceof bm)t={update:Ow(n,e.key,e.value)};else if(e instanceof i0)t={delete:Ng(n,e.key)};else if(e instanceof Tu)t={update:Ow(n,e.key,e.data),updateMask:Vk(e.fieldMask)};else{if(!(e instanceof sS))return Ut(16599,{Vt:e.type});t={verify:Ng(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,c){const d=c.transform;if(d instanceof bg)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof rm)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof im)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof wg)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ut(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Tk(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ut(27497)})(n,e.precondition)),t}function Rk(n,e){return n&&n.length>0?(Pn(e!==void 0,14353),n.map((t=>(function(i,a){let c=i.updateTime?Fa(i.updateTime):Fa(a);return c.isEqual(Wt.min())&&(c=Fa(a)),new pk(c,i.transformResults||[])})(t,e)))):[]}function kk(n,e){return{documents:[hS(n,e.path)]}}function Pk(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hS(n,i);const a=(function(f){if(f.length!==0)return gS(Fo.create(f,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(f){if(f.length!==0)return f.map((p=>(function(_){return{field:rh(_.field),direction:Ok(_.dir)}})(p)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Jv(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:i}}function Dk(n){let e=Ck(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pn(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=(function(v){const _=pS(v);return _ instanceof Fo&&UA(_)?_.getFilters():[_]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((_=>(function(T){return new nm(ih(T.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(_)))})(t.orderBy));let d=null;t.limit&&(d=(function(v){let _;return _=typeof v=="object"?v.value:v,ym(_)?null:_})(t.limit));let h=null;t.startAt&&(h=(function(v){const _=!!v.before,b=v.values||[];return new yg(b,_)})(t.startAt));let f=null;return t.endAt&&(f=(function(v){const _=!v.before,b=v.values||[];return new yg(b,_)})(t.endAt)),nk(e,i,c,a,d,"F",h,f)}function Mk(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ut(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ih(t.unaryFilter.field);return wi.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ih(t.unaryFilter.field);return wi.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ih(t.unaryFilter.field);return wi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ih(t.unaryFilter.field);return wi.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ut(61313);default:return Ut(60726)}})(n):n.fieldFilter!==void 0?(function(t){return wi.create(ih(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ut(58110);default:return Ut(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Fo.create(t.compositeFilter.filters.map((r=>pS(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ut(1026)}})(t.compositeFilter.op))})(n):Ut(30097,{filter:n})}function Ok(n){return Ak[n]}function Fk(n){return Sk[n]}function qk(n){return jk[n]}function rh(n){return{fieldPath:n.canonicalString()}}function ih(n){return ps.fromServerFormat(n.fieldPath)}function gS(n){return n instanceof wi?(function(t){if(t.op==="=="){if(Aw(t.value))return{unaryFilter:{field:rh(t.field),op:"IS_NAN"}};if(Nw(t.value))return{unaryFilter:{field:rh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Aw(t.value))return{unaryFilter:{field:rh(t.field),op:"IS_NOT_NAN"}};if(Nw(t.value))return{unaryFilter:{field:rh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rh(t.field),op:Fk(t.op),value:t.value}}})(n):n instanceof Fo?(function(t){const r=t.getFilters().map((i=>gS(i)));return r.length===1?r[0]:{compositeFilter:{op:qk(t.op),filters:r}}})(n):Ut(54877,{filter:n})}function Vk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class lu{constructor(e,t,r,i,a=Wt.min(),c=Wt.min(),d=vs.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new lu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Bk{constructor(e){this.yt=e}}function Uk(n){const e=Dk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xv(e,e.limit,"L"):e}class zk{constructor(){this.Cn=new Hk}addToCollectionParentIndex(e,t){return this.Cn.add(t),Je.resolve()}getCollectionParents(e,t){return Je.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Je.resolve()}deleteFieldIndex(e,t){return Je.resolve()}deleteAllFieldIndexes(e){return Je.resolve()}createTargetIndexes(e,t){return Je.resolve()}getDocumentsMatchingTarget(e,t){return Je.resolve(null)}getIndexType(e,t){return Je.resolve(0)}getFieldIndexes(e,t){return Je.resolve([])}getNextCollectionGroupToUpdate(e){return Je.resolve(null)}getMinOffset(e,t){return Je.resolve(gu.min())}getMinOffsetFromCollectionGroup(e,t){return Je.resolve(gu.min())}updateCollectionGroup(e,t,r){return Je.resolve()}updateIndexEntries(e,t){return Je.resolve()}}class Hk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Oi(fr.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Oi(fr.comparator)).toArray()}}const Fw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vS=41943040;class pa{static withCacheSize(e){return new pa(e,pa.DEFAULT_COLLECTION_PERCENTILE,pa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}pa.DEFAULT_COLLECTION_PERCENTILE=10,pa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pa.DEFAULT=new pa(vS,pa.DEFAULT_COLLECTION_PERCENTILE,pa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pa.DISABLED=new pa(-1,0,0);class Sh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Sh(0)}static cr(){return new Sh(-1)}}const qw="LruGarbageCollector",$k=1048576;function Vw([n,e],[t,r]){const i=An(n,t);return i===0?An(e,r):i}class Gk{constructor(e){this.Ir=e,this.buffer=new Oi(Vw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Vw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Wk{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ft(qw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fh(t)?ft(qw,"Ignoring IndexedDB error during garbage collection: ",t):await Oh(t)}await this.Vr(3e5)}))}}class Yk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Je.resolve(Xg.ce);const r=new Gk(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),Je.resolve(Fw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,c,d,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,c=Date.now(),this.nthSequenceNumber(e,i)))).next((v=>(r=v,d=Date.now(),this.removeTargets(e,r,t)))).next((v=>(a=v,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(f=Date.now(),th()<=Nn.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${i} in `+(d-c)+`ms
	Removed ${a} targets in `+(h-d)+`ms
	Removed ${v} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),Je.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:v}))))}}function Kk(n,e){return new Yk(n,e)}class Qk{constructor(){this.changes=new fd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Je.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Xk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Jk{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&zf(r.mutation,i,Ma.empty(),rr.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Sn()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Sn()){const i=Qu();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let c=Df();return a.forEach(((d,h)=>{c=c.insert(d,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Qu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Sn())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,i){let a=bc();const c=Uf(),d=(function(){return Uf()})();return t.forEach(((h,f)=>{const p=r.get(f.key);i.has(f.key)&&(p===void 0||p.mutation instanceof Tu)?a=a.insert(f.key,f):p!==void 0?(c.set(f.key,p.mutation.getFieldMask()),zf(p.mutation,f,p.mutation.getFieldMask(),rr.now())):c.set(f.key,Ma.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((f,p)=>c.set(f,p))),t.forEach(((f,p)=>d.set(f,new Xk(p,c.get(f)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Uf();let i=new Hr(((c,d)=>c-d)),a=Sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let p=r.get(h)||Ma.empty();p=d.applyToLocalView(f,p),r.set(h,p);const v=(i.get(d.batchId)||Sn()).add(h);i=i.insert(d.batchId,v)}))})).next((()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),f=h.key,p=h.value,v=XA();p.forEach((_=>{if(!a.has(_)){const b=rS(t.get(_),r.get(_));b!==null&&v.set(_,b),a=a.add(_)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,v))}return Je.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(c){return Dt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):GA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):Je.resolve(Qu());let d=Jf,h=a;return c.next((f=>Je.forEach(f,((p,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),a.get(p)?Je.resolve():this.remoteDocumentCache.getEntry(e,p).next((_=>{h=h.insert(p,_)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,h,f,Sn()))).next((p=>({batchId:d,changes:QA(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Dt(t)).next((r=>{let i=Df();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let c=Df();return this.indexManager.getCollectionParents(e,a).next((d=>Je.forEach(d,(h=>{const f=(function(v,_){return new qh(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((p=>{p.forEach(((v,_)=>{c=c.insert(v,_)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((c=>{a.forEach(((h,f)=>{const p=f.getKey();c.get(p)===null&&(c=c.insert(p,Zi.newInvalidDocument(p)))}));let d=Df();return c.forEach(((h,f)=>{const p=a.get(h);p!==void 0&&zf(p.mutation,f,Ma.empty(),rr.now()),t0(t,f)&&(d=d.insert(h,f))})),d}))}}class Zk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Je.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Fa(i.createTime)}})(t)),Je.resolve()}getNamedQuery(e,t){return Je.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:Uk(i.bundledQuery),readTime:Fa(i.readTime)}})(t)),Je.resolve()}}class e7{constructor(){this.overlays=new Hr(Dt.comparator),this.qr=new Map}getOverlay(e,t){return Je.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qu();return Je.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),Je.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),Je.resolve()}getOverlaysForCollection(e,t,r){const i=Qu(),a=t.length+1,c=new Dt(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const h=d.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>r&&i.set(h.getKey(),h)}return Je.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Hr(((f,p)=>f-p));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let p=a.get(f.largestBatchId);p===null&&(p=Qu(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const d=Qu(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,p)=>d.set(f,p))),!(d.size()>=i)););return Je.resolve(d)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new yk(t,r));let a=this.qr.get(t);a===void 0&&(a=Sn(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class t7{constructor(){this.sessionToken=vs.EMPTY_BYTE_STRING}getSessionToken(e){return Je.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Je.resolve()}}class sy{constructor(){this.Qr=new Oi(Xi.$r),this.Ur=new Oi(Xi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Xi(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Xi(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Dt(new fr([])),r=new Xi(t,e),i=new Xi(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Dt(new fr([])),r=new Xi(t,e),i=new Xi(t,e+1);let a=Sn();return this.Ur.forEachInRange([r,i],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new Xi(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Xi{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Dt.comparator(e.key,t.key)||An(e.Yr,t.Yr)}static Kr(e,t){return An(e.Yr,t.Yr)||Dt.comparator(e.key,t.key)}}class n7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Oi(Xi.$r)}checkEmpty(e){return Je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new vk(a,t,r,i);this.mutationQueue.push(c);for(const d of i)this.Zr=this.Zr.add(new Xi(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Je.resolve(c)}lookupMutationBatch(e,t){return Je.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return Je.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Je.resolve(this.mutationQueue.length===0?Q1:this.tr-1)}getAllMutationBatches(e){return Je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Xi(t,0),i=new Xi(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(c=>{const d=this.Xr(c.Yr);a.push(d)})),Je.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Oi(An);return t.forEach((i=>{const a=new Xi(i,0),c=new Xi(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(d=>{r=r.add(d.Yr)}))})),Je.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Dt.isDocumentKey(a)||(a=a.child(""));const c=new Xi(new Dt(a),0);let d=new Oi(An);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(d=d.add(h.Yr)),!0)}),c),Je.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Pn(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Je.forEach(t.mutations,(i=>{const a=new Xi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Xi(t,0),i=this.Zr.firstAfterOrEqual(r);return Je.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Je.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class r7{constructor(e){this.ri=e,this.docs=(function(){return new Hr(Dt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Je.resolve(r?r.document.mutableCopy():Zi.newInvalidDocument(t))}getEntries(e,t){let r=bc();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Zi.newInvalidDocument(i))})),Je.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=bc();const c=t.path,d=new Dt(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||P8(k8(p),r)<=0||(i.has(p.key)||t0(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return Je.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Ut(9500)}ii(e,t){return Je.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new i7(this)}getSize(e){return Je.resolve(this.size)}}class i7 extends Qk{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),Je.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class s7{constructor(e){this.persistence=e,this.si=new fd((t=>Z1(t)),ey),this.lastRemoteSnapshotVersion=Wt.min(),this.highestTargetId=0,this.oi=0,this._i=new sy,this.targetCount=0,this.ai=Sh.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),Je.resolve()}getLastRemoteSnapshotVersion(e){return Je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Je.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Je.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Sh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Je.resolve()}updateTargetData(e,t){return this.Pr(t),Je.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Je.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),Je.waitFor(a).next((()=>i))}getTargetCount(e){return Je.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return Je.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Je.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((c=>{a.push(i.markPotentiallyOrphaned(e,c))})),Je.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Je.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return Je.resolve(r)}containsKey(e,t){return Je.resolve(this._i.containsKey(t))}}class yS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Xg(0),this.li=!1,this.li=!0,this.hi=new t7,this.referenceDelegate=e(this),this.Pi=new s7(this),this.indexManager=new zk,this.remoteDocumentCache=(function(i){return new r7(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Bk(t),this.Ii=new Zk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new e7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new n7(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ft("MemoryPersistence","Starting transaction:",e);const i=new a7(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return Je.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class a7 extends M8{constructor(e){super(),this.currentSequenceNumber=e}}class ay{constructor(e){this.persistence=e,this.Ri=new sy,this.Vi=null}static mi(e){return new ay(e)}get fi(){if(this.Vi)return this.Vi;throw Ut(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Je.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Je.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Je.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Je.forEach(this.fi,(r=>{const i=Dt.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,Wt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Je.or([()=>Je.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ag{constructor(e,t){this.persistence=e,this.pi=new fd((r=>q8(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=Kk(this,t)}static mi(e,t){return new Ag(e,t)}Ei(){}di(e){return Je.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return Je.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?Je.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(c=>this.br(e,c,t).next((d=>{d||(r++,a.removeEntry(c,Wt.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Je.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Je.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Je.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Je.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wp(e.data.value)),t}br(e,t,r){return Je.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return Je.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class oy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Sn(),i=Sn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new oy(e,t.fromCache,r,i)}}class o7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class l7{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return qC()?8:O8(ks())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new o7;return this.Ss(e,t,c).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(th()<=Nn.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",nh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Je.resolve()):(th()<=Nn.DEBUG&&ft("QueryEngine","Query:",nh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(th()<=Nn.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",nh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yl(t))):Je.resolve())}ys(e,t){if(Tw(t))return Je.resolve(null);let r=yl(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Xv(t,null,"F"),r=yl(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const c=Sn(...a);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.Ds(t,d);return this.Cs(t,f,c,h.readTime)?this.ys(e,Xv(t,null,"F")):this.vs(e,f,t,h)}))))})))))}ws(e,t,r,i){return Tw(t)||i.isEqual(Wt.min())?Je.resolve(null):this.ps.getDocuments(e,r).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,r,i)?Je.resolve(null):(th()<=Nn.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nh(t)),this.vs(e,c,t,R8(i,Jf)).next((d=>d)))}))}Ds(e,t){let r=new Oi(YA(e));return t.forEach(((i,a)=>{t0(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return th()<=Nn.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",nh(t)),this.ps.getDocumentsMatchingQuery(e,t,gu.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}const ly="LocalStore",c7=3e8;class u7{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Hr(An),this.xs=new fd((a=>Z1(a)),ey),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function d7(n,e,t,r){return new u7(n,e,t,r)}async function bS(n,e){const t=tn(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const c=[],d=[];let h=Sn();for(const f of i){c.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of a){d.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:d})))}))}))}function h7(n,e){const t=tn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,h,f,p){const v=f.batch,_=v.keys();let b=Je.resolve();return _.forEach((T=>{b=b.next((()=>p.getEntry(h,T))).next((I=>{const L=f.docVersions.get(T);Pn(L!==null,48541),I.version.compareTo(L)<0&&(v.applyToRemoteDocument(I,f),I.isValidDocument()&&(I.setReadTime(f.commitVersion),p.addEntry(I)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(h,v)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let h=Sn();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(h=h.add(d.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function wS(n){const e=tn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function f7(n,e){const t=tn(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const d=[];e.targetChanges.forEach(((p,v)=>{const _=i.get(v);if(!_)return;d.push(t.Pi.removeMatchingKeys(a,p.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(a,p.addedDocuments,v))));let b=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(vs.EMPTY_BYTE_STRING,Wt.min()).withLastLimboFreeSnapshotVersion(Wt.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),i=i.insert(v,b),(function(I,L,j){return I.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=c7?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(_,b,p)&&d.push(t.Pi.updateTargetData(a,b))}));let h=bc(),f=Sn();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))})),d.push(m7(a,c,e.documentUpdates).next((p=>{h=p.ks,f=p.qs}))),!r.isEqual(Wt.min())){const p=t.Pi.getLastRemoteSnapshotVersion(a).next((v=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(p)}return Je.waitFor(d).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,h,f))).next((()=>h))})).then((a=>(t.Ms=i,a)))}function m7(n,e,t){let r=Sn(),i=Sn();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let c=bc();return t.forEach(((d,h)=>{const f=a.get(d);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(d)),h.isNoDocument()&&h.version.isEqual(Wt.min())?(e.removeEntry(d,h.readTime),c=c.insert(d,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(d,h)):ft(ly,"Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",h.version)})),{ks:c,qs:i}}))}function p7(n,e){const t=tn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Q1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function g7(n,e){const t=tn(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,Je.resolve(i)):t.Pi.allocateTargetId(r).next((c=>(i=new lu(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function t1(n,e,t){const r=tn(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Fh(c))throw c;ft(ly,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Bw(n,e,t){const r=tn(n);let i=Wt.min(),a=Sn();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,f,p){const v=tn(h),_=v.xs.get(p);return _!==void 0?Je.resolve(v.Ms.get(_)):v.Pi.getTargetData(f,p)})(r,c,yl(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((h=>{a=h}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:Wt.min(),t?a:Sn()))).next((d=>(x7(r,ik(e),d),{documents:d,Qs:a})))))}function x7(n,e,t){let r=n.Os.get(e)||Wt.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class Uw{constructor(){this.activeTargetIds=uk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class v7{constructor(){this.Mo=new Uw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Uw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class y7{Oo(e){}shutdown(){}}const zw="ConnectivityMonitor";class Hw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ft(zw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ft(zw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Cp=null;function n1(){return Cp===null?Cp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cp++,"0x"+Cp.toString(16)}const Qx="RestConnection",b7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class w7{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===xg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const c=n1(),d=this.zo(e,t.toUriEncodedString());ft(Qx,`Sending RPC '${e}' ${c}:`,d,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,a);const{host:f}=new URL(d),p=kh(f);return this.Jo(e,d,h,r,p).then((v=>(ft(Qx,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw wh(Qx,`RPC '${e}' ${c} failed with error: `,v,"url: ",d,"request:",r),v}))}Ho(e,t,r,i,a,c){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=b7[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class _7{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Es="WebChannelConnection";class N7 extends w7{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const c=n1();return new Promise(((d,h)=>{const f=new wA;f.setWithCredentials(!0),f.listenOnce(_A.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Gp.NO_ERROR:const v=f.getResponseJson();ft(Es,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),d(v);break;case Gp.TIMEOUT:ft(Es,`RPC '${e}' ${c} timed out`),h(new lt(Ge.DEADLINE_EXCEEDED,"Request time out"));break;case Gp.HTTP_ERROR:const _=f.getStatus();if(ft(Es,`RPC '${e}' ${c} failed with status:`,_,"response text:",f.getResponseText()),_>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const T=b?.error;if(T&&T.status&&T.message){const I=(function(j){const U=j.toLowerCase().replace(/_/g,"-");return Object.values(Ge).indexOf(U)>=0?U:Ge.UNKNOWN})(T.status);h(new lt(I,T.message))}else h(new lt(Ge.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new lt(Ge.UNAVAILABLE,"Connection failed."));break;default:Ut(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ft(Es,`RPC '${e}' ${c} completed.`)}}));const p=JSON.stringify(i);ft(Es,`RPC '${e}' ${c} sending request:`,i),f.send(t,"POST",p,r,15)}))}T_(e,t,r){const i=n1(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=SA(),d=AA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const p=a.join("");ft(Es,`Creating RPC '${e}' stream ${i}: ${p}`,h);const v=c.createWebChannel(p,h);this.I_(v);let _=!1,b=!1;const T=new _7({Yo:L=>{b?ft(Es,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(_||(ft(Es,`Opening RPC '${e}' stream ${i} transport.`),v.open(),_=!0),ft(Es,`RPC '${e}' stream ${i} sending:`,L),v.send(L))},Zo:()=>v.close()}),I=(L,j,U)=>{L.listen(j,(z=>{try{U(z)}catch(B){setTimeout((()=>{throw B}),0)}}))};return I(v,Pf.EventType.OPEN,(()=>{b||(ft(Es,`RPC '${e}' stream ${i} transport opened.`),T.o_())})),I(v,Pf.EventType.CLOSE,(()=>{b||(b=!0,ft(Es,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(v))})),I(v,Pf.EventType.ERROR,(L=>{b||(b=!0,wh(Es,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),T.a_(new lt(Ge.UNAVAILABLE,"The operation could not be completed")))})),I(v,Pf.EventType.MESSAGE,(L=>{if(!b){const j=L.data[0];Pn(!!j,16349);const U=j,z=U?.error||U[0]?.error;if(z){ft(Es,`RPC '${e}' stream ${i} received error:`,z);const B=z.status;let re=(function(D){const k=bi[D];if(k!==void 0)return oS(k)})(B),ne=z.message;re===void 0&&(re=Ge.INTERNAL,ne="Unknown error status: "+B+" with message "+z.message),b=!0,T.a_(new lt(re,ne)),v.close()}else ft(Es,`RPC '${e}' stream ${i} received:`,j),T.u_(j)}})),I(d,NA.STAT_EVENT,(L=>{L.stat===Hv.PROXY?ft(Es,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===Hv.NOPROXY&&ft(Es,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{T.__()}),0),T}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Xx(){return typeof document<"u"?document:null}function a0(n){return new Ek(n,!0)}class cy{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ft("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const $w="PersistentStream";class _S{constructor(e,t,r,i,a,c,d,h){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cy(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ge.RESOURCE_EXHAUSTED?(yc(t.toString()),yc("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new lt(Ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ft($w,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ft($w,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class A7 extends _S{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Lk(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Wt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Wt.min():c.readTime?Fa(c.readTime):Wt.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=e1(this.serializer),t.addTarget=(function(a,c){let d;const h=c.target;if(d=Kv(h)?{documents:kk(a,h)}:{query:Pk(a,h).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=uS(a,c.resumeToken);const f=Jv(a,c.expectedCount);f!==null&&(d.expectedCount=f)}else if(c.snapshotVersion.compareTo(Wt.min())>0){d.readTime=_g(a,c.snapshotVersion.toTimestamp());const f=Jv(a,c.expectedCount);f!==null&&(d.expectedCount=f)}return d})(this.serializer,e);const r=Mk(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=e1(this.serializer),t.removeTarget=e,this.q_(t)}}class S7 extends _S{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Pn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Rk(e.writeResults,e.commitTime),r=Fa(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=e1(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>mS(this.serializer,r)))};this.q_(t)}}class j7{}class E7 extends j7{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new lt(Ge.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,Zv(t,r),i,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new lt(Ge.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Zv(t,r),i,c,d,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new lt(Ge.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class T7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yc(t),this.aa=!1):ft("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const id="RemoteStore";class C7{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{md(this)&&(ft(id,"Restarting streams for network reachability change."),await(async function(h){const f=tn(h);f.Ea.add(4),await _m(f),f.Ra.set("Unknown"),f.Ea.delete(4),await o0(f)})(this))}))})),this.Ra=new T7(r,i)}}async function o0(n){if(md(n))for(const e of n.da)await e(!0)}async function _m(n){for(const e of n.da)await e(!1)}function NS(n,e){const t=tn(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),fy(t)?hy(t):Vh(t).O_()&&dy(t,e))}function uy(n,e){const t=tn(n),r=Vh(t);t.Ia.delete(e),r.O_()&&AS(t,e),t.Ia.size===0&&(r.O_()?r.L_():md(t)&&t.Ra.set("Unknown"))}function dy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Wt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vh(n).Y_(e)}function AS(n,e){n.Va.Ue(e),Vh(n).Z_(e)}function hy(n){n.Va=new Nk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Vh(n).start(),n.Ra.ua()}function fy(n){return md(n)&&!Vh(n).x_()&&n.Ia.size>0}function md(n){return tn(n).Ea.size===0}function SS(n){n.Va=void 0}async function I7(n){n.Ra.set("Online")}async function L7(n){n.Ia.forEach(((e,t)=>{dy(n,e)}))}async function R7(n,e){SS(n),fy(n)?(n.Ra.ha(e),hy(n)):n.Ra.set("Unknown")}async function k7(n,e,t){if(n.Ra.set("Online"),e instanceof cS&&e.state===2&&e.cause)try{await(async function(i,a){const c=a.cause;for(const d of a.targetIds)i.Ia.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.Ia.delete(d),i.Va.removeTarget(d))})(n,e)}catch(r){ft(id,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sg(n,r)}else if(e instanceof Qp?n.Va.Ze(e):e instanceof lS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Wt.min()))try{const r=await wS(n.localStore);t.compareTo(r)>=0&&await(function(a,c){const d=a.Va.Tt(c);return d.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=a.Ia.get(f);p&&a.Ia.set(f,p.withResumeToken(h.resumeToken,c))}})),d.targetMismatches.forEach(((h,f)=>{const p=a.Ia.get(h);if(!p)return;a.Ia.set(h,p.withResumeToken(vs.EMPTY_BYTE_STRING,p.snapshotVersion)),AS(a,h);const v=new lu(p.target,h,f,p.sequenceNumber);dy(a,v)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){ft(id,"Failed to raise snapshot:",r),await Sg(n,r)}}async function Sg(n,e,t){if(!Fh(e))throw e;n.Ea.add(1),await _m(n),n.Ra.set("Offline"),t||(t=()=>wS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ft(id,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await o0(n)}))}function jS(n,e){return e().catch((t=>Sg(n,t,e)))}async function l0(n){const e=tn(n),t=bu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Q1;for(;P7(e);)try{const i=await p7(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,D7(e,i)}catch(i){await Sg(e,i)}ES(e)&&TS(e)}function P7(n){return md(n)&&n.Ta.length<10}function D7(n,e){n.Ta.push(e);const t=bu(n);t.O_()&&t.X_&&t.ea(e.mutations)}function ES(n){return md(n)&&!bu(n).x_()&&n.Ta.length>0}function TS(n){bu(n).start()}async function M7(n){bu(n).ra()}async function O7(n){const e=bu(n);for(const t of n.Ta)e.ea(t.mutations)}async function F7(n,e,t){const r=n.Ta.shift(),i=ny.from(r,e,t);await jS(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await l0(n)}async function q7(n,e){e&&bu(n).X_&&await(async function(r,i){if((function(c){return aS(c)&&c!==Ge.ABORTED})(i.code)){const a=r.Ta.shift();bu(r).B_(),await jS(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await l0(r)}})(n,e),ES(n)&&TS(n)}async function Gw(n,e){const t=tn(n);t.asyncQueue.verifyOperationInProgress(),ft(id,"RemoteStore received new credentials");const r=md(t);t.Ea.add(3),await _m(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await o0(t)}async function V7(n,e){const t=tn(n);e?(t.Ea.delete(2),await o0(t)):e||(t.Ea.add(2),await _m(t),t.Ra.set("Unknown"))}function Vh(n){return n.ma||(n.ma=(function(t,r,i){const a=tn(t);return a.sa(),new A7(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:I7.bind(null,n),t_:L7.bind(null,n),r_:R7.bind(null,n),H_:k7.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),fy(n)?hy(n):n.Ra.set("Unknown")):(await n.ma.stop(),SS(n))}))),n.ma}function bu(n){return n.fa||(n.fa=(function(t,r,i){const a=tn(t);return a.sa(),new S7(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:M7.bind(null,n),r_:q7.bind(null,n),ta:O7.bind(null,n),na:F7.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await l0(n)):(await n.fa.stop(),n.Ta.length>0&&(ft(id,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class my{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new vl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,d=new my(e,t,c,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(Ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function py(n,e){if(yc("AsyncQueue",`${e}: ${n}`),Fh(n))return new lt(Ge.UNAVAILABLE,`${e}: ${n}`);throw n}class fh{static emptySet(e){return new fh(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Dt.comparator(t.key,r.key):(t,r)=>Dt.comparator(t.key,r.key),this.keyedMap=Df(),this.sortedSet=new Hr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new fh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Ww{constructor(){this.ga=new Hr(Dt.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ut(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class jh{constructor(e,t,r,i,a,c,d,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new jh(e,t,fh.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&e0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class B7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class U7{constructor(){this.queries=Yw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=tn(t),a=i.queries;i.queries=Yw(),a.forEach(((c,d)=>{for(const h of d.Sa)h.onError(r)}))})(this,new lt(Ge.ABORTED,"Firestore shutting down"))}}function Yw(){return new fd((n=>WA(n)),e0)}async function gy(n,e){const t=tn(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new B7,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const d=py(c,`Initialization of query '${nh(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&vy(t)}async function xy(n,e){const t=tn(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function z7(n,e){const t=tn(n);let r=!1;for(const i of e){const a=i.query,c=t.queries.get(a);if(c){for(const d of c.Sa)d.Fa(i)&&(r=!0);c.wa=i}}r&&vy(t)}function H7(n,e,t){const r=tn(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function vy(n){n.Ca.forEach((e=>{e.next()}))}var r1,Kw;(Kw=r1||(r1={})).Ma="default",Kw.Cache="cache";class yy{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new jh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=jh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==r1.Cache}}class CS{constructor(e){this.key=e}}class IS{constructor(e){this.key=e}}class $7{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Sn(),this.mutatedKeys=Sn(),this.eu=YA(e),this.tu=new fh(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Ww,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,v)=>{const _=i.get(p),b=t0(this.query,v)?v:null,T=!!_&&this.mutatedKeys.has(_.key),I=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let L=!1;_&&b?_.data.isEqual(b.data)?T!==I&&(r.track({type:3,doc:b}),L=!0):this.su(_,b)||(r.track({type:2,doc:b}),L=!0,(h&&this.eu(b,h)>0||f&&this.eu(b,f)<0)&&(d=!0)):!_&&b?(r.track({type:0,doc:b}),L=!0):_&&!b&&(r.track({type:1,doc:_}),L=!0,(h||f)&&(d=!0)),L&&(b?(c=c.add(b),a=I?a.add(p):a.delete(p)):(c=c.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{tu:c,iu:r,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((p,v)=>(function(b,T){const I=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ut(20277,{Rt:L})}};return I(b)-I(T)})(p.type,v.type)||this.eu(p.doc,v.doc))),this.ou(r),i=i??!1;const d=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,f=h!==this.Za;return this.Za=h,c.length!==0||f?{snapshot:new jh(this.query,e.tu,a,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ww,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Sn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new IS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new CS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Sn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return jh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const by="SyncEngine";class G7{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class W7{constructor(e){this.key=e,this.hu=!1}}class Y7{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new fd((d=>WA(d)),e0),this.Iu=new Map,this.Eu=new Set,this.du=new Hr(Dt.comparator),this.Au=new Map,this.Ru=new sy,this.Vu={},this.mu=new Map,this.fu=Sh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function K7(n,e,t=!0){const r=MS(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await LS(r,e,t,!0),i}async function Q7(n,e){const t=MS(n);await LS(t,e,!0,!1)}async function LS(n,e,t,r){const i=await g7(n.localStore,yl(e)),a=i.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await X7(n,e,a,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&NS(n.remoteStore,i),d}async function X7(n,e,t,r,i){n.pu=(v,_,b)=>(async function(I,L,j,U){let z=L.view.ru(j);z.Cs&&(z=await Bw(I.localStore,L.query,!1).then((({documents:V})=>L.view.ru(V,z))));const B=U&&U.targetChanges.get(L.targetId),re=U&&U.targetMismatches.get(L.targetId)!=null,ne=L.view.applyChanges(z,I.isPrimaryClient,B,re);return Xw(I,L.targetId,ne.au),ne.snapshot})(n,v,_,b);const a=await Bw(n.localStore,e,!0),c=new $7(e,a.Qs),d=c.ru(a.documents),h=wm.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=c.applyChanges(d,n.isPrimaryClient,h);Xw(n,t,f.au);const p=new G7(e,t,c);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function J7(n,e,t){const r=tn(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((c=>!e0(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await t1(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&uy(r.remoteStore,i.targetId),i1(r,i.targetId)})).catch(Oh)):(i1(r,i.targetId),await t1(r.localStore,i.targetId,!0))}async function Z7(n,e){const t=tn(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),uy(t.remoteStore,r.targetId))}async function eP(n,e,t){const r=oP(n);try{const i=await(function(c,d){const h=tn(c),f=rr.now(),p=d.reduce(((b,T)=>b.add(T.key)),Sn());let v,_;return h.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let T=bc(),I=Sn();return h.Ns.getEntries(b,p).next((L=>{T=L,T.forEach(((j,U)=>{U.isValidDocument()||(I=I.add(j))}))})).next((()=>h.localDocuments.getOverlayedDocuments(b,T))).next((L=>{v=L;const j=[];for(const U of d){const z=xk(U,v.get(U.key).overlayedDocument);z!=null&&j.push(new Tu(U.key,z,qA(z.value.mapValue),gs.exists(!0)))}return h.mutationQueue.addMutationBatch(b,f,j,d)})).next((L=>{_=L;const j=L.applyToLocalDocumentSet(v,I);return h.documentOverlayCache.saveOverlays(b,L.batchId,j)}))})).then((()=>({batchId:_.batchId,changes:QA(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,d,h){let f=c.Vu[c.currentUser.toKey()];f||(f=new Hr(An)),f=f.insert(d,h),c.Vu[c.currentUser.toKey()]=f})(r,i.batchId,t),await Nm(r,i.changes),await l0(r.remoteStore)}catch(i){const a=py(i,"Failed to persist write");t.reject(a)}}async function RS(n,e){const t=tn(n);try{const r=await f7(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const c=t.Au.get(a);c&&(Pn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?Pn(c.hu,14607):i.removedDocuments.size>0&&(Pn(c.hu,42227),c.hu=!1))})),await Nm(t,r,e)}catch(r){await Oh(r)}}function Qw(n,e,t){const r=tn(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,c)=>{const d=c.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(c,d){const h=tn(c);h.onlineState=d;let f=!1;h.queries.forEach(((p,v)=>{for(const _ of v.Sa)_.va(d)&&(f=!0)})),f&&vy(h)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tP(n,e,t){const r=tn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let c=new Hr(Dt.comparator);c=c.insert(a,Zi.newNoDocument(a,Wt.min()));const d=Sn().add(a),h=new s0(Wt.min(),new Map,new Hr(An),c,d);await RS(r,h),r.du=r.du.remove(a),r.Au.delete(e),wy(r)}else await t1(r.localStore,e,!1).then((()=>i1(r,e,t))).catch(Oh)}async function nP(n,e){const t=tn(n),r=e.batch.batchId;try{const i=await h7(t.localStore,e);PS(t,r,null),kS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Nm(t,i)}catch(i){await Oh(i)}}async function rP(n,e,t){const r=tn(n);try{const i=await(function(c,d){const h=tn(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return h.mutationQueue.lookupMutationBatch(f,d).next((v=>(Pn(v!==null,37113),p=v.keys(),h.mutationQueue.removeMutationBatch(f,v)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>h.localDocuments.getDocuments(f,p)))}))})(r.localStore,e);PS(r,e,t),kS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Nm(r,i)}catch(i){await Oh(i)}}function kS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function PS(n,e,t){const r=tn(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function i1(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||DS(n,r)}))}function DS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(uy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),wy(n))}function Xw(n,e,t){for(const r of t)r instanceof CS?(n.Ru.addReference(r.key,e),iP(n,r)):r instanceof IS?(ft(by,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||DS(n,r.key)):Ut(19791,{wu:r})}function iP(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ft(by,"New document in limbo: "+t),n.Eu.add(r),wy(n))}function wy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Dt(fr.fromString(e)),r=n.fu.next();n.Au.set(r,new W7(t)),n.du=n.du.insert(t,r),NS(n.remoteStore,new lu(yl(Zg(t.path)),r,"TargetPurposeLimboResolution",Xg.ce))}}async function Nm(n,e,t){const r=tn(n),i=[],a=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,h)=>{c.push(r.pu(h,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const p=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,p?"current":"not-current")}if(f){i.push(f);const p=oy.As(h.targetId,f);a.push(p)}})))})),await Promise.all(c),r.Pu.H_(i),await(async function(h,f){const p=tn(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>Je.forEach(f,(_=>Je.forEach(_.Es,(b=>p.persistence.referenceDelegate.addReference(v,_.targetId,b))).next((()=>Je.forEach(_.ds,(b=>p.persistence.referenceDelegate.removeReference(v,_.targetId,b)))))))))}catch(v){if(!Fh(v))throw v;ft(ly,"Failed to update sequence numbers: "+v)}for(const v of f){const _=v.targetId;if(!v.fromCache){const b=p.Ms.get(_),T=b.snapshotVersion,I=b.withLastLimboFreeSnapshotVersion(T);p.Ms=p.Ms.insert(_,I)}}})(r.localStore,a))}async function sP(n,e){const t=tn(n);if(!t.currentUser.isEqual(e)){ft(by,"User change. New user:",e.toKey());const r=await bS(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((d=>{d.forEach((h=>{h.reject(new lt(Ge.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nm(t,r.Ls)}}function aP(n,e){const t=tn(n),r=t.Au.get(e);if(r&&r.hu)return Sn().add(r.key);{let i=Sn();const a=t.Iu.get(e);if(!a)return i;for(const c of a){const d=t.Tu.get(c);i=i.unionWith(d.view.nu)}return i}}function MS(n){const e=tn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tP.bind(null,e),e.Pu.H_=z7.bind(null,e.eventManager),e.Pu.yu=H7.bind(null,e.eventManager),e}function oP(n){const e=tn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rP.bind(null,e),e}class jg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=a0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return d7(this.persistence,new l7,e.initialUser,this.serializer)}Cu(e){return new yS(ay.mi,this.serializer)}Du(e){return new v7}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jg.provider={build:()=>new jg};class lP extends jg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Pn(this.persistence.referenceDelegate instanceof Ag,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Wk(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?pa.withCacheSize(this.cacheSizeBytes):pa.DEFAULT;return new yS((r=>Ag.mi(r,t)),this.serializer)}}class s1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sP.bind(null,this.syncEngine),await V7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new U7})()}createDatastore(e){const t=a0(e.databaseInfo.databaseId),r=(function(a){return new N7(a)})(e.databaseInfo);return(function(a,c,d,h){return new E7(a,c,d,h)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,c,d){return new C7(r,i,a,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Qw(this.syncEngine,t,0)),(function(){return Hw.v()?new Hw:new y7})())}createSyncEngine(e,t){return(function(i,a,c,d,h,f,p){const v=new Y7(i,a,c,d,h,f);return p&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=tn(t);ft(id,"RemoteStore shutting down."),r.Ea.add(5),await _m(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}s1.provider={build:()=>new s1};class _y{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yc("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class cP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new lt(Ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,a){const c=tn(i),d={documents:a.map((v=>Ng(c.serializer,v)))},h=await c.Ho("BatchGetDocuments",c.serializer.databaseId,fr.emptyPath(),d,a.length),f=new Map;h.forEach((v=>{const _=Ik(c.serializer,v);f.set(_.key.toString(),_)}));const p=[];return a.forEach((v=>{const _=f.get(v.toString());Pn(!!_,55234,{key:v}),p.push(_)})),p})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new i0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Dt.fromPath(r);this.mutations.push(new sS(i,this.precondition(i)))})),await(async function(r,i){const a=tn(r),c={writes:i.map((d=>mS(a.serializer,d)))};await a.Go("Commit",a.serializer.databaseId,fr.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ut(50498,{Gu:e.constructor.name});t=Wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new lt(Ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Wt.min())?gs.exists(!1):gs.updateTime(t):gs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Wt.min()))throw new lt(Ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gs.updateTime(t)}return gs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uP{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new cy(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new cP(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!ym(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!aS(t)}return!1}}const wu="FirestoreClient";class dP{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Rs.UNAUTHENTICATED,this.clientId=K1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async c=>{ft(wu,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ft(wu,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=py(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Jx(n,e){n.asyncQueue.verifyOperationInProgress(),ft(wu,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await bS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Jw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await hP(n);ft(wu,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Gw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Gw(e.remoteStore,i))),n._onlineComponents=e}async function hP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ft(wu,"Using user provided OfflineComponentProvider");try{await Jx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ge.FAILED_PRECONDITION||i.code===Ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;wh("Error using user provided cache. Falling back to memory cache: "+t),await Jx(n,new jg)}}else ft(wu,"Using default OfflineComponentProvider"),await Jx(n,new lP(void 0));return n._offlineComponents}async function Ny(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ft(wu,"Using user provided OnlineComponentProvider"),await Jw(n,n._uninitializedComponentsProvider._online)):(ft(wu,"Using default OnlineComponentProvider"),await Jw(n,new s1))),n._onlineComponents}function fP(n){return Ny(n).then((e=>e.syncEngine))}function mP(n){return Ny(n).then((e=>e.datastore))}async function Eg(n){const e=await Ny(n),t=e.eventManager;return t.onListen=K7.bind(null,e.syncEngine),t.onUnlisten=J7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Q7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Z7.bind(null,e.syncEngine),t}function pP(n,e,t={}){const r=new vl;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,h,f){const p=new _y({next:_=>{p.Nu(),c.enqueueAndForget((()=>xy(a,v)));const b=_.docs.has(d);!b&&_.fromCache?f.reject(new lt(Ge.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&_.fromCache&&h&&h.source==="server"?f.reject(new lt(Ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new yy(Zg(d.path),p,{includeMetadataChanges:!0,qa:!0});return gy(a,v)})(await Eg(n),n.asyncQueue,e,t,r))),r.promise}function gP(n,e,t={}){const r=new vl;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,h,f){const p=new _y({next:_=>{p.Nu(),c.enqueueAndForget((()=>xy(a,v))),_.fromCache&&h.source==="server"?f.reject(new lt(Ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new yy(d,p,{includeMetadataChanges:!0,qa:!0});return gy(a,v)})(await Eg(n),n.asyncQueue,e,t,r))),r.promise}function OS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Zw=new Map;const FS="firestore.googleapis.com",e_=!0;class t_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new lt(Ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FS,this.ssl=e_}else this.host=e.host,this.ssl=e.ssl??e_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$k)throw new lt(Ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new lt(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new lt(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new lt(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class c0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(Ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new lt(Ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new w8;switch(r.type){case"firstParty":return new S8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new lt(Ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Zw.get(t);r&&(ft("ComponentProvider","Removing Datastore"),Zw.delete(t),r.terminate())})(this),Promise.resolve()}}function xP(n,e,t,r={}){n=Gs(n,c0);const i=kh(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;i&&(C4(`https://${d}`),I4("Firestore",!0)),a.host!==FS&&a.host!==d&&wh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...a,host:d,ssl:i,emulatorOptions:r};if(!pu(h,c)&&(n._setSettings(h),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Rs.MOCK_USER;else{f=LC(r.mockUserToken,n._app?.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new lt(Ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Rs(v)}n._authCredentials=new _8(new EA(f,p))}}class Cu{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cu(this.firestore,e,this._query)}}class Ur{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ur(this.firestore,e,this._key)}toJSON(){return{type:Ur._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(vm(t,Ur._jsonSchema))return new Ur(e,r||null,new Dt(fr.fromString(t.referencePath)))}}Ur._jsonSchemaVersion="firestore/documentReference/1.0",Ur._jsonSchema={type:_i("string",Ur._jsonSchemaVersion),referencePath:_i("string")};class fu extends Cu{constructor(e,t,r){super(e,t,Zg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ur(this.firestore,null,new Dt(e))}withConverter(e){return new fu(this.firestore,e,this._path)}}function $n(n,e,...t){if(n=Er(n),TA("collection","path",e),n instanceof c0){const r=fr.fromString(e,...t);return mw(r),new fu(n,null,r)}{if(!(n instanceof Ur||n instanceof fu))throw new lt(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fr.fromString(e,...t));return mw(r),new fu(n.firestore,null,r)}}function Tn(n,e,...t){if(n=Er(n),arguments.length===1&&(e=K1.newId()),TA("doc","path",e),n instanceof c0){const r=fr.fromString(e,...t);return fw(r),new Ur(n,null,new Dt(r))}{if(!(n instanceof Ur||n instanceof fu))throw new lt(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fr.fromString(e,...t));return fw(r),new Ur(n.firestore,n instanceof fu?n.converter:null,new Dt(r))}}const n_="AsyncQueue";class r_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cy(this,"async_queue_retry"),this._c=()=>{const r=Xx();r&&ft(n_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Xx();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Xx();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new vl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fh(e))throw e;ft(n_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,yc("INTERNAL UNHANDLED ERROR: ",i_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=my.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Ut(47125,{Pc:i_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function i_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function s_(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class jl extends c0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new r_,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r_(e),this._firestoreClient=void 0,await e}}}function vP(n,e){const t=typeof n=="object"?n:q1(),r=typeof n=="string"?n:xg,i=dd(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=CC("firestore");a&&xP(i,...a)}return i}function Am(n){if(n._terminated)throw new lt(Ge.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yP(n),n._firestoreClient}function yP(n){const e=n._freezeSettings(),t=(function(i,a,c,d){return new U8(i,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,OS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new dP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}class Da{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Da(vs.fromBase64String(e))}catch(t){throw new lt(Ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Da(vs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Da._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vm(e,Da._jsonSchema))return Da.fromBase64String(e.bytes)}}Da._jsonSchemaVersion="firestore/bytes/1.0",Da._jsonSchema={type:_i("string",Da._jsonSchemaVersion),bytes:_i("string")};class Sm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new lt(Ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ps(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ay{constructor(e){this._methodName=e}}class bl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new lt(Ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new lt(Ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return An(this._lat,e._lat)||An(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bl._jsonSchemaVersion}}static fromJSON(e){if(vm(e,bl._jsonSchema))return new bl(e.latitude,e.longitude)}}bl._jsonSchemaVersion="firestore/geoPoint/1.0",bl._jsonSchema={type:_i("string",bl._jsonSchemaVersion),latitude:_i("number"),longitude:_i("number")};class wl{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vm(e,wl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new wl(e.vectorValues);throw new lt(Ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wl._jsonSchemaVersion="firestore/vectorValue/1.0",wl._jsonSchema={type:_i("string",wl._jsonSchemaVersion),vectorValues:_i("object")};const bP=/^__.*__$/;class wP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Tu(e,this.data,this.fieldMask,t,this.fieldTransforms):new bm(e,this.data,t,this.fieldTransforms)}}class qS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Tu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ut(40011,{Ac:n})}}class Sy{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(VS(this.Ac)&&bP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _P{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||a0(e)}Cc(e,t,r,i=!1){return new Sy({Ac:e,methodName:t,Dc:r,path:ps.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jm(n){const e=n._freezeSettings(),t=a0(n._databaseId);return new _P(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jy(n,e,t,r,i,a={}){const c=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);Ey("Data must be an object, but it was:",c,r);const d=zS(r,c);let h,f;if(a.merge)h=new Ma(c.fieldMask),f=c.fieldTransforms;else if(a.mergeFields){const p=[];for(const v of a.mergeFields){const _=a1(e,v,t);if(!c.contains(_))throw new lt(Ge.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);$S(p,_)||p.push(_)}h=new Ma(p),f=c.fieldTransforms.filter((v=>h.covers(v.field)))}else h=null,f=c.fieldTransforms;return new wP(new $s(d),h,f)}class u0 extends Ay{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof u0}}function BS(n,e,t,r){const i=n.Cc(1,e,t);Ey("Data must be an object, but it was:",i,r);const a=[],c=$s.empty();Eu(r,((h,f)=>{const p=Ty(e,h,t);f=Er(f);const v=i.yc(p);if(f instanceof u0)a.push(p);else{const _=Em(f,v);_!=null&&(a.push(p),c.set(p,_))}}));const d=new Ma(a);return new qS(c,d,i.fieldTransforms)}function US(n,e,t,r,i,a){const c=n.Cc(1,e,t),d=[a1(e,r,t)],h=[i];if(a.length%2!=0)throw new lt(Ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)d.push(a1(e,a[_])),h.push(a[_+1]);const f=[],p=$s.empty();for(let _=d.length-1;_>=0;--_)if(!$S(f,d[_])){const b=d[_];let T=h[_];T=Er(T);const I=c.yc(b);if(T instanceof u0)f.push(b);else{const L=Em(T,I);L!=null&&(f.push(b),p.set(b,L))}}const v=new Ma(f);return new qS(p,v,c.fieldTransforms)}function NP(n,e,t,r=!1){return Em(t,n.Cc(r?4:3,e))}function Em(n,e){if(HS(n=Er(n)))return Ey("Unsupported field value:",e,n),zS(n,e);if(n instanceof Ay)return(function(r,i){if(!VS(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let c=0;for(const d of r){let h=Em(d,i.wc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=Er(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=rr.fromDate(r);return{timestampValue:_g(i.serializer,a)}}if(r instanceof rr){const a=new rr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_g(i.serializer,a)}}if(r instanceof bl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Da)return{bytesValue:uS(i.serializer,r._byteString)};if(r instanceof Ur){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:iy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wl)return(function(c,d){return{mapValue:{fields:{[OA]:{stringValue:FA},[vg]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw d.Sc("VectorValues must only contain numeric values.");return ty(d.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Qg(r)}`)})(n,e)}function zS(n,e){const t={};return LA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eu(n,((r,i)=>{const a=Em(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function HS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rr||n instanceof bl||n instanceof Da||n instanceof Ur||n instanceof Ay||n instanceof wl)}function Ey(n,e,t){if(!HS(t)||!CA(t)){const r=Qg(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function a1(n,e,t){if((e=Er(e))instanceof Sm)return e._internalPath;if(typeof e=="string")return Ty(n,e);throw Tg("Field path arguments must be of type string or ",n,!1,void 0,t)}const AP=new RegExp("[~\\*/\\[\\]]");function Ty(n,e,t){if(e.search(AP)>=0)throw Tg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sm(...e.split("."))._internalPath}catch{throw Tg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tg(n,e,t,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new lt(Ge.INVALID_ARGUMENT,d+n+h)}function $S(n,e){return n.some((t=>t.isEqual(e)))}class Cg{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ur(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(d0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class SP extends Cg{data(){return super.data()}}function d0(n,e){return typeof e=="string"?Ty(n,e):e instanceof Sm?e._internalPath:e._delegate._internalPath}function GS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new lt(Ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cy{}class WS extends Cy{}function xs(n,e,...t){let r=[];e instanceof Cy&&r.push(e),r=r.concat(t),(function(a){const c=a.filter((h=>h instanceof Iy)).length,d=a.filter((h=>h instanceof h0)).length;if(c>1||c>0&&d>0)throw new lt(Ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class h0 extends WS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new h0(e,t,r)}_apply(e){const t=this._parse(e);return YS(e._query,t),new Cu(e.firestore,e.converter,Qv(e._query,t))}_parse(e){const t=jm(e.firestore);return(function(a,c,d,h,f,p,v){let _;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new lt(Ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){o_(v,p);const T=[];for(const I of v)T.push(a_(h,a,I));_={arrayValue:{values:T}}}else _=a_(h,a,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||o_(v,p),_=NP(d,c,v,p==="in"||p==="not-in");return wi.create(f,p,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Fn(n,e,t){const r=e,i=d0("where",n);return h0._create(i,r,t)}class Iy extends Cy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Iy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Fo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let c=i;const d=a.getFlattenedFilters();for(const h of d)YS(c,h),c=Qv(c,h)})(e._query,t),new Cu(e.firestore,e.converter,Qv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ly extends WS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ly(e,t)}_apply(e){const t=(function(i,a,c){if(i.startAt!==null)throw new lt(Ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new lt(Ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nm(a,c)})(e._query,this._field,this._direction);return new Cu(e.firestore,e.converter,(function(i,a){const c=i.explicitOrderBy.concat([a]);return new qh(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function Eh(n,e="asc"){const t=e,r=d0("orderBy",n);return Ly._create(r,t)}function a_(n,e,t){if(typeof(t=Er(t))=="string"){if(t==="")throw new lt(Ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GA(e)&&t.indexOf("/")!==-1)throw new lt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fr.fromString(t));if(!Dt.isDocumentKey(r))throw new lt(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _w(n,new Dt(r))}if(t instanceof Ur)return _w(n,t._key);throw new lt(Ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qg(t)}.`)}function o_(n,e){if(!Array.isArray(n)||n.length===0)throw new lt(Ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YS(n,e){const t=(function(i,a){for(const c of i)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new lt(Ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new lt(Ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class KS{convertValue(e,t="none"){switch(yu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return oi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ut(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Eu(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[vg].arrayValue?.values?.map((r=>oi(r.doubleValue)));return new wl(t)}convertGeoPoint(e){return new bl(oi(e.latitude),oi(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zf(e));default:return null}}convertTimestamp(e){const t=xu(e);return new rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fr.fromString(e);Pn(xS(r),9688,{name:e});const i=new em(r.get(1),r.get(3)),a=new Dt(r.popFirst(5));return i.isEqual(t)||yc(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Ry(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class jP extends KS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Da(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ur(this.firestore,null,t)}}class lh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mu extends Cg{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(d0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(Ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=mu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}mu._jsonSchemaVersion="firestore/documentSnapshot/1.0",mu._jsonSchema={type:_i("string",mu._jsonSchemaVersion),bundleSource:_i("string","DocumentSnapshot"),bundleName:_i("string"),bundle:_i("string")};class Xp extends mu{data(e={}){return super.data(e)}}class Ju{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Xp(this._firestore,this._userDataWriter,r.key,r,new lh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new lt(Ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((d=>{const h=new Xp(i._firestore,i._userDataWriter,d.doc.key,d.doc,new lh(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const h=new Xp(i._firestore,i._userDataWriter,d.doc.key,d.doc,new lh(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,p=-1;return d.type!==0&&(f=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),p=c.indexOf(d.doc.key)),{type:EP(d.type),doc:h,oldIndex:f,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new lt(Ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ju._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=K1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ut(61501,{type:n})}}function dc(n){n=Gs(n,Ur);const e=Gs(n.firestore,jl);return pP(Am(e),n._key).then((t=>XS(e,n,t)))}Ju._jsonSchemaVersion="firestore/querySnapshot/1.0",Ju._jsonSchema={type:_i("string",Ju._jsonSchemaVersion),bundleSource:_i("string","QuerySnapshot"),bundleName:_i("string"),bundle:_i("string")};class f0 extends KS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Da(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ur(this.firestore,null,t)}}function ga(n){n=Gs(n,Cu);const e=Gs(n.firestore,jl),t=Am(e),r=new f0(e);return GS(n._query),gP(t,n._query).then((i=>new Ju(e,r,n,i)))}function xa(n,e,t){n=Gs(n,Ur);const r=Gs(n.firestore,jl),i=Ry(n.converter,e,t);return p0(r,[jy(jm(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,gs.none())])}function nu(n,e,t,...r){n=Gs(n,Ur);const i=Gs(n.firestore,jl),a=jm(i);let c;return c=typeof(e=Er(e))=="string"||e instanceof Sm?US(a,"updateDoc",n._key,e,t,r):BS(a,"updateDoc",n._key,e),p0(i,[c.toMutation(n._key,gs.exists(!0))])}function m0(n){return p0(Gs(n.firestore,jl),[new i0(n._key,gs.none())])}function QS(n,e){const t=Gs(n.firestore,jl),r=Tn(n),i=Ry(n.converter,e);return p0(t,[jy(jm(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,gs.exists(!1))]).then((()=>r))}function Zx(n,...e){n=Er(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||s_(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(s_(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let a,c,d;if(n instanceof Ur)c=Gs(n.firestore,jl),d=Zg(n._key.path),a={next:h=>{e[r]&&e[r](XS(c,n,h))},error:e[r+1],complete:e[r+2]};else{const h=Gs(n,Cu);c=Gs(h.firestore,jl),d=h._query;const f=new f0(c);a={next:p=>{e[r]&&e[r](new Ju(c,f,h,p))},error:e[r+1],complete:e[r+2]},GS(n._query)}return(function(f,p,v,_){const b=new _y(_),T=new yy(p,b,v);return f.asyncQueue.enqueueAndForget((async()=>gy(await Eg(f),T))),()=>{b.Nu(),f.asyncQueue.enqueueAndForget((async()=>xy(await Eg(f),T)))}})(Am(c),d,i,a)}function p0(n,e){return(function(r,i){const a=new vl;return r.asyncQueue.enqueueAndForget((async()=>eP(await fP(r),i,a))),a.promise})(Am(n),e)}function XS(n,e,t){const r=t.docs.get(e._key),i=new f0(n);return new mu(n,i,e._key,r,new lh(t.hasPendingWrites,t.fromCache),e.converter)}const TP={maxAttempts:5};function Of(n,e){if((n=Er(n)).firestore!==e)throw new lt(Ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class CP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jm(e)}get(e){const t=Of(e,this._firestore),r=new jP(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return Ut(24041);const a=i[0];if(a.isFoundDocument())return new Cg(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Cg(this._firestore,r,t._key,null,t.converter);throw Ut(18433,{doc:a})}))}set(e,t,r){const i=Of(e,this._firestore),a=Ry(i.converter,t,r),c=jy(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Of(e,this._firestore);let c;return c=typeof(t=Er(t))=="string"||t instanceof Sm?US(this._dataReader,"Transaction.update",a._key,t,r,i):BS(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Of(e,this._firestore);return this._transaction.delete(t._key),this}}class IP extends CP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Of(e,this._firestore),r=new f0(this._firestore);return super.get(e).then((i=>new mu(this._firestore,r,t._key,i._document,new lh(!1,!1),t.converter)))}}function LP(n,e,t){n=Gs(n,jl);const r={...TP,...t};return(function(a){if(a.maxAttempts<1)throw new lt(Ge.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,c,d){const h=new vl;return a.asyncQueue.enqueueAndForget((async()=>{const f=await mP(a);new uP(a.asyncQueue,f,d,c,h).ju()})),h.promise})(Am(n),(i=>e(new IP(n,i))),r)}(function(e,t=!0){(function(i){Mh=i})(Ph),Al(new Mo("firestore",((r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),d=new jl(new N8(r.getProvider("auth-internal")),new j8(c,r.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new lt(Ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new em(f.options.projectId,p)})(c,i),c);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),oo(cw,uw,e),oo(cw,uw,"esm2020")})();var RP="firebase",kP="12.6.0";oo(RP,kP,"app");const JS="@firebase/installations",ky="0.6.19";const ZS=1e4,e3=`w:${ky}`,t3="FIS_v2",PP="https://firebaseinstallations.googleapis.com/v1",DP=3600*1e3,MP="installations",OP="Installations";const FP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},sd=new ud(MP,OP,FP);function n3(n){return n instanceof Vo&&n.code.includes("request-failed")}function r3({projectId:n}){return`${PP}/projects/${n}/installations`}function i3(n){return{token:n.token,requestStatus:2,expiresIn:VP(n.expiresIn),creationTime:Date.now()}}async function s3(n,e){const r=(await e.json()).error;return sd.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function a3({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function qP(n,{refreshToken:e}){const t=a3(n);return t.append("Authorization",BP(e)),t}async function o3(n){const e=await n();return e.status>=500&&e.status<600?n():e}function VP(n){return Number(n.replace("s","000"))}function BP(n){return`${t3} ${n}`}async function UP({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=r3(n),i=a3(n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const c={fid:t,authVersion:t3,appId:n.appId,sdkVersion:e3},d={method:"POST",headers:i,body:JSON.stringify(c)},h=await o3(()=>fetch(r,d));if(h.ok){const f=await h.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:i3(f.authToken)}}else throw await s3("Create Installation",h)}function l3(n){return new Promise(e=>{setTimeout(e,n)})}function zP(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const HP=/^[cdef][\w-]{21}$/,o1="";function $P(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=GP(n);return HP.test(t)?t:o1}catch{return o1}}function GP(n){return zP(n).substr(0,22)}function g0(n){return`${n.appName}!${n.appId}`}const c3=new Map;function u3(n,e){const t=g0(n);d3(t,e),WP(t,e)}function d3(n,e){const t=c3.get(n);if(t)for(const r of t)r(e)}function WP(n,e){const t=YP();t&&t.postMessage({key:n,fid:e}),KP()}let Xu=null;function YP(){return!Xu&&"BroadcastChannel"in self&&(Xu=new BroadcastChannel("[Firebase] FID Change"),Xu.onmessage=n=>{d3(n.data.key,n.data.fid)}),Xu}function KP(){c3.size===0&&Xu&&(Xu.close(),Xu=null)}const QP="firebase-installations-database",XP=1,ad="firebase-installations-store";let ev=null;function Py(){return ev||(ev=M4(QP,XP,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ad)}}})),ev}async function Ig(n,e){const t=g0(n),i=(await Py()).transaction(ad,"readwrite"),a=i.objectStore(ad),c=await a.get(t);return await a.put(e,t),await i.done,(!c||c.fid!==e.fid)&&u3(n,e.fid),e}async function h3(n){const e=g0(n),r=(await Py()).transaction(ad,"readwrite");await r.objectStore(ad).delete(e),await r.done}async function x0(n,e){const t=g0(n),i=(await Py()).transaction(ad,"readwrite"),a=i.objectStore(ad),c=await a.get(t),d=e(c);return d===void 0?await a.delete(t):await a.put(d,t),await i.done,d&&(!c||c.fid!==d.fid)&&u3(n,d.fid),d}async function Dy(n){let e;const t=await x0(n.appConfig,r=>{const i=JP(r),a=ZP(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===o1?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function JP(n){const e=n||{fid:$P(),registrationStatus:0};return f3(e)}function ZP(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(sd.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=eD(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:tD(n)}:{installationEntry:e}}async function eD(n,e){try{const t=await UP(n,e);return Ig(n.appConfig,t)}catch(t){throw n3(t)&&t.customData.serverCode===409?await h3(n.appConfig):await Ig(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function tD(n){let e=await l_(n.appConfig);for(;e.registrationStatus===1;)await l3(100),e=await l_(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Dy(n);return r||t}return e}function l_(n){return x0(n,e=>{if(!e)throw sd.create("installation-not-found");return f3(e)})}function f3(n){return nD(n)?{fid:n.fid,registrationStatus:0}:n}function nD(n){return n.registrationStatus===1&&n.registrationTime+ZS<Date.now()}async function rD({appConfig:n,heartbeatServiceProvider:e},t){const r=iD(n,t),i=qP(n,t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const c={installation:{sdkVersion:e3,appId:n.appId}},d={method:"POST",headers:i,body:JSON.stringify(c)},h=await o3(()=>fetch(r,d));if(h.ok){const f=await h.json();return i3(f)}else throw await s3("Generate Auth Token",h)}function iD(n,{fid:e}){return`${r3(n)}/${e}/authTokens:generate`}async function My(n,e=!1){let t;const r=await x0(n.appConfig,a=>{if(!m3(a))throw sd.create("not-registered");const c=a.authToken;if(!e&&oD(c))return a;if(c.requestStatus===1)return t=sD(n,e),a;{if(!navigator.onLine)throw sd.create("app-offline");const d=cD(a);return t=aD(n,d),d}});return t?await t:r.authToken}async function sD(n,e){let t=await c_(n.appConfig);for(;t.authToken.requestStatus===1;)await l3(100),t=await c_(n.appConfig);const r=t.authToken;return r.requestStatus===0?My(n,e):r}function c_(n){return x0(n,e=>{if(!m3(e))throw sd.create("not-registered");const t=e.authToken;return uD(t)?{...e,authToken:{requestStatus:0}}:e})}async function aD(n,e){try{const t=await rD(n,e),r={...e,authToken:t};return await Ig(n.appConfig,r),t}catch(t){if(n3(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await h3(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Ig(n.appConfig,r)}throw t}}function m3(n){return n!==void 0&&n.registrationStatus===2}function oD(n){return n.requestStatus===2&&!lD(n)}function lD(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+DP}function cD(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function uD(n){return n.requestStatus===1&&n.requestTime+ZS<Date.now()}async function dD(n){const e=n,{installationEntry:t,registrationPromise:r}=await Dy(e);return r?r.catch(console.error):My(e).catch(console.error),t.fid}async function hD(n,e=!1){const t=n;return await fD(t),(await My(t,e)).token}async function fD(n){const{registrationPromise:e}=await Dy(n);e&&await e}function mD(n){if(!n||!n.options)throw tv("App Configuration");if(!n.name)throw tv("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw tv(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function tv(n){return sd.create("missing-app-config-values",{valueName:n})}const p3="installations",pD="installations-internal",gD=n=>{const e=n.getProvider("app").getImmediate(),t=mD(e),r=dd(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},xD=n=>{const e=n.getProvider("app").getImmediate(),t=dd(e,p3).getImmediate();return{getId:()=>dD(t),getToken:i=>hD(t,i)}};function vD(){Al(new Mo(p3,gD,"PUBLIC")),Al(new Mo(pD,xD,"PRIVATE"))}vD();oo(JS,ky);oo(JS,ky,"esm2020");const Lg="analytics",yD="firebase_id",bD="origin",wD=60*1e3,_D="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Oy="https://www.googletagmanager.com/gtag/js";const Ws=new Gg("@firebase/analytics");const ND={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},qa=new ud("analytics","Analytics",ND);function AD(n){if(!n.startsWith(Oy)){const e=qa.create("invalid-gtag-resource",{gtagURL:n});return Ws.warn(e.message),""}return n}function g3(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function SD(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function jD(n,e){const t=SD("firebase-js-sdk-policy",{createScriptURL:AD}),r=document.createElement("script"),i=`${Oy}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function ED(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function TD(n,e,t,r,i,a){const c=r[i];try{if(c)await e[c];else{const h=(await g3(t)).find(f=>f.measurementId===i);h&&await e[h.appId]}}catch(d){Ws.error(d)}n("config",i,a)}async function CD(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let c=i.send_to;Array.isArray(c)||(c=[c]);const d=await g3(t);for(const h of c){const f=d.find(v=>v.measurementId===h),p=f&&e[f.appId];if(p)a.push(p);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){Ws.error(a)}}function ID(n,e,t,r){async function i(a,...c){try{if(a==="event"){const[d,h]=c;await CD(n,e,t,d,h)}else if(a==="config"){const[d,h]=c;await TD(n,e,t,r,d,h)}else if(a==="consent"){const[d,h]=c;n("consent",d,h)}else if(a==="get"){const[d,h,f]=c;n("get",d,h,f)}else if(a==="set"){const[d]=c;n("set",d)}else n(a,...c)}catch(d){Ws.error(d)}}return i}function LD(n,e,t,r,i){let a=function(...c){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=ID(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function RD(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Oy)&&t.src.includes(n))return t;return null}const kD=30,PD=1e3;class DD{constructor(e={},t=PD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const x3=new DD;function MD(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function OD(n){const{appId:e,apiKey:t}=n,r={method:"GET",headers:MD(t)},i=_D.replace("{app-id}",e),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let c="";try{const d=await a.json();d.error?.message&&(c=d.error.message)}catch{}throw qa.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function FD(n,e=x3,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw qa.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw qa.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new BD;return setTimeout(async()=>{d.abort()},wD),v3({appId:r,apiKey:i,measurementId:a},c,d,e)}async function v3(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=x3){const{appId:a,measurementId:c}=n;try{await qD(r,e)}catch(d){if(c)return Ws.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:a,measurementId:c};throw d}try{const d=await OD(n);return i.deleteThrottleMetadata(a),d}catch(d){const h=d;if(!VD(h)){if(i.deleteThrottleMetadata(a),c)return Ws.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:a,measurementId:c};throw d}const f=Number(h?.customData?.httpStatus)===503?P5(t,i.intervalMillis,kD):P5(t,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:t+1};return i.setThrottleMetadata(a,p),Ws.debug(`Calling attemptFetch again in ${f} millis`),v3(n,p,r,i)}}function qD(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(qa.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function VD(n){if(!(n instanceof Vo)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class BD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function UD(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,c={...r,send_to:a};n("event",t,c)}}async function zD(n,e,t,r){if(r&&r.global){const i={};for(const a of Object.keys(t))i[`user_properties.${a}`]=t[a];return n("set",i),Promise.resolve()}else{const i=await e;n("config",i,{update:!0,user_properties:t})}}async function HD(){if(R4())try{await k4()}catch(n){return Ws.warn(qa.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Ws.warn(qa.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function $D(n,e,t,r,i,a,c){const d=FD(n);d.then(_=>{t[_.measurementId]=_.appId,n.options.measurementId&&_.measurementId!==n.options.measurementId&&Ws.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>Ws.error(_)),e.push(d);const h=HD().then(_=>{if(_)return r.getId()}),[f,p]=await Promise.all([d,h]);RD(a)||jD(a,f.measurementId),i("js",new Date);const v=c?.config??{};return v[bD]="firebase",v.update=!0,p!=null&&(v[yD]=p),i("config",f.measurementId,v),f.measurementId}class GD{constructor(e){this.app=e}_delete(){return delete mh[this.app.options.appId],Promise.resolve()}}let mh={},u_=[];const d_={};let nv="dataLayer",WD="gtag",h_,Fy,f_=!1;function YD(){const n=[];if(L4()&&n.push("This is a browser extension environment."),VC()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=qa.create("invalid-analytics-context",{errorInfo:e});Ws.warn(t.message)}}function KD(n,e,t){YD();const r=n.options.appId;if(!r)throw qa.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ws.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw qa.create("no-api-key");if(mh[r]!=null)throw qa.create("already-exists",{id:r});if(!f_){ED(nv);const{wrappedGtag:a,gtagCore:c}=LD(mh,u_,d_,nv,WD);Fy=a,h_=c,f_=!0}return mh[r]=$D(n,u_,d_,e,h_,nv,t),new GD(n)}function QD(n=q1()){n=Er(n);const e=dd(n,Lg);return e.isInitialized()?e.getImmediate():XD(n)}function XD(n,e={}){const t=dd(n,Lg);if(t.isInitialized()){const i=t.getImmediate();if(pu(e,t.getOptions()))return i;throw qa.create("already-initialized")}return t.initialize({options:e})}function JD(n,e,t){n=Er(n),zD(Fy,mh[n.app.options.appId],e,t).catch(r=>Ws.error(r))}function ZD(n,e,t,r){n=Er(n),UD(Fy,mh[n.app.options.appId],e,t,r).catch(i=>Ws.error(i))}const m_="@firebase/analytics",p_="0.10.19";function eM(){Al(new Mo(Lg,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return KD(r,i,t)},"PUBLIC")),Al(new Mo("analytics-internal",n,"PRIVATE")),oo(m_,p_),oo(m_,p_,"esm2020");function n(e){try{const t=e.getProvider(Lg).getImmediate();return{logEvent:(r,i,a)=>ZD(t,r,i,a),setUserProperties:(r,i)=>JD(t,r,i)}}catch(t){throw qa.create("interop-component-reg-failed",{reason:t})}}}eM();const tM={apiKey:"AIzaSyBwaC_ySezVpfv9y9xHNromiTW77qJQlmA",authDomain:"boulangerie-da431.firebaseapp.com",projectId:"boulangerie-da431",storageBucket:"boulangerie-da431.firebasestorage.app",messagingSenderId:"324942492234",appId:"1:324942492234:web:afbc851e38b557a87f2cb3",measurementId:"G-3E7K2Y6N31"},qy=F1(tM),l1=yA(qy),wt=vP(qy);QD(qy);const g_=n=>{let e;const t=new Set,r=(f,p)=>{const v=typeof f=="function"?f(e):f;if(!Object.is(v,e)){const _=e;e=p??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(b=>b(e,_))}},i=()=>e,d={setState:r,getState:i,getInitialState:()=>h,subscribe:f=>(t.add(f),()=>t.delete(f))},h=e=n(r,i,d);return d},nM=(n=>n?g_(n):g_),rM=n=>n;function iM(n,e=rM){const t=lc.useSyncExternalStore(n.subscribe,lc.useCallback(()=>e(n.getState()),[n,e]),lc.useCallback(()=>e(n.getInitialState()),[n,e]));return lc.useDebugValue(t),t}const x_=n=>{const e=nM(n),t=r=>iM(e,r);return Object.assign(t,e),t},Nc=(n=>n?x_(n):x_),Tm=Nc(n=>({user:null,isLoading:!0,isAuthenticated:!1,login:async(e,t)=>{n({isLoading:!0});try{await rR(l1,e,t),n({isLoading:!1})}catch(r){throw n({isLoading:!1}),r}},logout:async()=>{try{await cR(l1),n({user:null,isAuthenticated:!1})}catch(e){console.error("Logout error:",e)}},setUser:e=>{n({user:e,isAuthenticated:e!==null})},setLoading:e=>{n({isLoading:e})}})),Po={clients:$n(wt,"clients"),produits:$n(wt,"produits"),livreurs:$n(wt,"livreurs"),users:$n(wt,"users"),productionPrograms:$n(wt,"productionPrograms"),clientOrders:$n(wt,"clientOrders"),shopStock:$n(wt,"shopStock"),shopShifts:$n(wt,"shopShifts"),shopSales:$n(wt,"shopSales"),clientReturns:$n(wt,"clientReturns"),dailyReports:$n(wt,"dailyReports"),factures:$n(wt,"factures"),parametres:$n(wt,"parametres"),matieres:$n(wt,"matieres"),mouvements:$n(wt,"mouvements"),fournisseurs:$n(wt,"fournisseurs")},ti=n=>rr.fromDate(n),hr=n=>n.toDate(),Cn={async create(n,e){const t=Po[n];return await QS(t,e)},async getById(n,e){const t=Tn(Po[n],e),r=await dc(t);return r.exists()?{id:r.id,...r.data()}:null},async getAll(n){return(await ga(Po[n])).docs.map(t=>({id:t.id,...t.data()}))},async getByQuery(n,e){const t=xs(Po[n],...e);return(await ga(t)).docs.map(i=>({id:i.id,...i.data()}))},async update(n,e,t){const r=Tn(Po[n],e);return await nu(r,t)},async delete(n,e){const t=Tn(Po[n],e);return await m0(t)}},sM={async getProgrammeByDate(n){const e=new Date(n);e.setHours(0,0,0,0);const t=new Date(n);return t.setHours(23,59,59,999),await Cn.getByQuery("productionPrograms",[Fn("dateProduction",">=",ti(e)),Fn("dateProduction","<=",ti(t))])},async getLivraisonsByDate(n){const e=new Date(n);e.setHours(0,0,0,0);const t=new Date(n);return t.setHours(23,59,59,999),await Cn.getByQuery("clientReturns",[Fn("dateLivraison",">=",ti(e)),Fn("dateLivraison","<=",ti(t))])},async getStockBoutiqueByDate(n){const e=new Date(n);e.setHours(0,0,0,0);const t=new Date(n);return t.setHours(23,59,59,999),await Cn.getByQuery("shopStock",[Fn("date",">=",ti(e)),Fn("date","<=",ti(t))])},async getRapportByDate(n){const e=new Date(n);e.setHours(0,0,0,0);const t=new Date(n);return t.setHours(23,59,59,999),await Cn.getByQuery("dailyReports",[Fn("date",">=",ti(e)),Fn("date","<=",ti(t))])},async getClientsActifs(){return await Cn.getByQuery("clients",[Fn("active","==",!0),Eh("nom")])},async getProduitsActifs(){return await Cn.getByQuery("produits",[Fn("active","==",!0),Eh("nom")])}},y3={subscribeToProgram(n,e){const t=new Date(n);t.setHours(0,0,0,0);const r=new Date(n);r.setHours(23,59,59,999);const i=xs(Po.productionPrograms,Fn("dateProduction",">=",ti(t)),Fn("dateProduction","<=",ti(r)));return Zx(i,a=>{const c=a.docs.map(d=>({id:d.id,...d.data()}));e(c)},a=>{console.error(" Erreur listener programme:",a)})},subscribeToFactures(n,e,t){let r;return e&&t?r=xs(Po.factures,Fn("dateLivraison",">=",ti(e)),Fn("dateLivraison","<=",ti(t)),Eh("dateLivraison","desc")):r=xs(Po.factures,Eh("dateFacture","desc")),Zx(r,i=>{const a=i.docs.map(c=>{const d=c.data();return{id:c.id,...d,dateLivraison:hr(d.dateLivraison),dateFacture:hr(d.dateFacture),createdAt:hr(d.createdAt),updatedAt:hr(d.updatedAt),validatedAt:d.validatedAt?hr(d.validatedAt):void 0,paidAt:d.paidAt?hr(d.paidAt):void 0}});n(a)},i=>{console.error(" Erreur listener factures:",i)})},subscribeToCollection(n,e,t=[]){const r=t.length>0?xs(Po[n],...t):Po[n];return Zx(r,i=>{const a=i.docs.map(c=>({id:c.id,...c.data()}));e(a)},i=>{console.error(` Erreur listener ${n}:`,i)})}},El=Nc((n,e)=>({matieres:[],mouvements:[],fournisseurs:[],isLoading:!1,error:null,chargerDonnees:async()=>{n({isLoading:!0,error:null});try{const[t,r,i]=await Promise.all([Cn.getAll("matieres"),Cn.getAll("mouvements"),Cn.getAll("fournisseurs")]),a=c=>({...c,createdAt:c.createdAt instanceof rr?c.createdAt.toDate():new Date(c.createdAt),updatedAt:c.updatedAt instanceof rr?c.updatedAt.toDate():new Date(c.updatedAt||c.createdAt),...c.date?{date:c.date instanceof rr?c.date.toDate():new Date(c.date)}:{}});n({matieres:t.map(a),mouvements:r.map(a).sort((c,d)=>d.date.getTime()-c.date.getTime()),fournisseurs:i.map(a),isLoading:!1})}catch(t){console.error("Erreur chargement stock:",t),n({isLoading:!1,error:t.message})}},addMatiere:async t=>{n({isLoading:!0});try{const r={...t,createdAt:new Date,updatedAt:new Date},a={id:(await Cn.create("matieres",r)).id,...r};n(c=>({matieres:[...c.matieres,a],isLoading:!1}))}catch(r){console.error("Erreur ajout matire:",r),n({isLoading:!1,error:r.message})}},updateMatiere:async(t,r)=>{try{await Cn.update("matieres",t,{...r,updatedAt:new Date}),n(i=>({matieres:i.matieres.map(a=>a.id===t?{...a,...r,updatedAt:new Date}:a)}))}catch(i){console.error("Erreur modif matire:",i)}},deleteMatiere:async t=>{try{await Cn.delete("matieres",t),n(r=>({matieres:r.matieres.filter(i=>i.id!==t)}))}catch(r){console.error("Erreur suppression matire:",r)}},addMouvement:async t=>{n({isLoading:!0});try{await LP(wt,async r=>{const i=Tn(wt,"matieres",t.matiereId),a=await r.get(i);if(!a.exists())throw new Error("Matire premire introuvable !");const c=a.data();let d=c.stockActuel,h=c.prixMoyenPondere,f=c.valeurTotale;if(t.type==="achat"){const b=t.quantite,T=t.prixTotal||0;d+b>0&&(h=(f+T)/(d+b)),d+=b,f+=T}else{let b=Math.abs(t.quantite);["consommation","perte","retour_fournisseur"].includes(t.type)&&(b=-b),t.type==="correction"&&(b=t.quantite),d+=b,f=d*h}const p=Tn($n(wt,"mouvements"));let v=t.prixTotal;t.type!=="achat"&&!v&&(v=Math.abs(t.quantite)*h);const _={id:p.id,...t,prixTotal:v,createdAt:new Date,date:t.date||new Date};Object.keys(_).forEach(b=>{_[b]===void 0&&delete _[b]}),r.set(p,_),r.update(i,{stockActuel:d,prixMoyenPondere:h,valeurTotale:f,updatedAt:new Date})}),e().chargerDonnees()}catch(r){console.error("Erreur transaction stock:",r),n({isLoading:!1,error:r.message})}},addFournisseur:async t=>{n({isLoading:!0});try{const r={...t,createdAt:new Date,updatedAt:new Date},a={id:(await Cn.create("fournisseurs",r)).id,...r};n(c=>({fournisseurs:[...c.fournisseurs,a],isLoading:!1}))}catch(r){console.error("Erreur ajout fournisseur:",r),n({isLoading:!1,error:r.message})}},updateFournisseur:async(t,r)=>{try{await Cn.update("fournisseurs",t,{...r,updatedAt:new Date}),n(i=>({fournisseurs:i.fournisseurs.map(a=>a.id===t?{...a,...r,updatedAt:new Date}:a)}))}catch(i){console.error("Erreur modif fournisseur:",i)}},deleteFournisseur:async t=>{try{await Cn.delete("fournisseurs",t),n(r=>({fournisseurs:r.fournisseurs.filter(i=>i.id!==t)}))}catch(r){console.error("Erreur suppression fournisseur:",r)}},getMatiere:t=>e().matieres.find(r=>r.id===t),getMouvementsByMatiere:t=>e().mouvements.filter(r=>r.matiereId===t),getDepensesPeriode:(t,r)=>e().mouvements.filter(i=>{const a=new Date(i.date);return i.type==="achat"&&a>=t&&a<=r}).reduce((i,a)=>i+(a.prixTotal||0),0),getValeurConsommationPeriode:(t,r)=>{const{mouvements:i,matieres:a}=e();return i.filter(c=>{const d=new Date(c.date);return["consommation","perte"].includes(c.type)&&d>=t&&d<=r}).reduce((c,d)=>{if(d.prixTotal)return c+d.prixTotal;const f=a.find(p=>p.id===d.matiereId)?.prixMoyenPondere||0;return c+Math.abs(d.quantite)*f},0)}})),_l=Nc((n,e)=>({programmeActuel:null,commandesClients:[],quantitesBoutique:[],produits:[],clients:[],isLoading:!1,programListener:null,showCommandeForm:!1,showQuantiteBoutiqueForm:!1,commandeEnEdition:null,quantiteBoutiqueEnEdition:null,formulaireCommande:{selectedClientId:"",dateLivraison:new Date().toISOString().split("T")[0],produitsCommandes:[],utiliserPrixClient:!0},creerNouveauProgramme:t=>{const r=new Date(t),i={id:`prog_${Date.now()}`,dateProduction:r,dateCreation:new Date,statut:"brouillon",commandesClients:[],quantitesBoutique:[],totauxParProduit:[],createdAt:new Date,updatedAt:new Date};n({programmeActuel:i,commandesClients:[],quantitesBoutique:[]}),e().calculerTotauxParProduit(),console.log(" Nouveau programme cr pour",t.toLocaleDateString("fr-FR"))},chargerProgramme:async t=>{console.log(" Chargement programme pour date:",t),n({isLoading:!0});try{const r=await sM.getProgrammeByDate(t);if(console.log(" Programmes trouvs dans Firebase:",r.length),r.length>0){console.log(" Programme existant trouv, chargement...");const i=r[0],a={...i,dateProduction:i.dateProduction instanceof Date?i.dateProduction:hr(i.dateProduction),dateCreation:i.dateCreation instanceof Date?i.dateCreation:hr(i.dateCreation),createdAt:i.createdAt instanceof Date?i.createdAt:hr(i.createdAt),updatedAt:i.updatedAt instanceof Date?i.updatedAt:hr(i.updatedAt),commandesClients:(i.commandesClients||[]).map(c=>({...c,dateCommande:c.dateCommande instanceof Date?c.dateCommande:hr(c.dateCommande),dateLivraison:c.dateLivraison instanceof Date?c.dateLivraison:hr(c.dateLivraison),createdAt:c.createdAt instanceof Date?c.createdAt:hr(c.createdAt),updatedAt:c.updatedAt instanceof Date?c.updatedAt:hr(c.updatedAt)}))};n({programmeActuel:a,commandesClients:a.commandesClients||[],quantitesBoutique:a.quantitesBoutique||[],isLoading:!1}),console.log(" Programme charg avec",a.commandesClients?.length||0,"commandes")}else{console.log(" Aucun programme trouv, cration automatique...");const i=new Date(t),a={id:`prog_${Date.now()}`,dateProduction:i,dateCreation:new Date,statut:"brouillon",commandesClients:[],quantitesBoutique:[],totauxParProduit:[],createdAt:new Date,updatedAt:new Date};n({programmeActuel:a,commandesClients:[],quantitesBoutique:[],isLoading:!1}),console.log(" Nouveau programme cr automatiquement pour",t.toLocaleDateString("fr-FR"))}}catch(r){throw console.error("Erreur lors du chargement du programme:",r),n({isLoading:!1}),r}},chargerProgrammeAvecListener:t=>{console.log(" Configuration listener temps rel pour:",t);const{programListener:r}=e();r&&r(),n({isLoading:!0});const i=y3.subscribeToProgram(t,a=>{if(console.log(" Mise  jour temps rel - programmes reus:",a.length),a.length>0){console.log(" Programme existant trouv via listener, chargement...");const c=a[0],d={...c,dateProduction:c.dateProduction instanceof Date?c.dateProduction:hr(c.dateProduction),dateCreation:c.dateCreation instanceof Date?c.dateCreation:hr(c.dateCreation),createdAt:c.createdAt instanceof Date?c.createdAt:hr(c.createdAt),updatedAt:c.updatedAt instanceof Date?c.updatedAt:hr(c.updatedAt),commandesClients:(c.commandesClients||[]).map(h=>({...h,dateCommande:h.dateCommande instanceof Date?h.dateCommande:hr(h.dateCommande),dateLivraison:h.dateLivraison instanceof Date?h.dateLivraison:hr(h.dateLivraison),createdAt:h.createdAt instanceof Date?h.createdAt:hr(h.createdAt),updatedAt:h.updatedAt instanceof Date?h.updatedAt:hr(h.updatedAt)}))};n({programmeActuel:d,commandesClients:d.commandesClients||[],quantitesBoutique:d.quantitesBoutique||[],isLoading:!1}),console.log(" Programme synchronis avec",d.commandesClients?.length||0,"commandes")}else{console.log(" Aucun programme trouv via listener, cration automatique...");const c=new Date(t),d={id:`prog_${Date.now()}`,dateProduction:c,dateCreation:new Date,statut:"brouillon",commandesClients:[],quantitesBoutique:[],totauxParProduit:[],createdAt:new Date,updatedAt:new Date};n({programmeActuel:d,commandesClients:[],quantitesBoutique:[],isLoading:!1}),console.log(" Nouveau programme cr automatiquement via listener pour",t.toLocaleDateString("fr-FR"))}});n({programListener:i})},nettoyerListeners:()=>{const{programListener:t}=e();t&&(t(),n({programListener:null}),console.log(" Listeners nettoys"))},sauvegarderProgramme:async()=>{const{programmeActuel:t,commandesClients:r,quantitesBoutique:i}=e();if(t){n({isLoading:!0});try{const a={...t,commandesClients:r,quantitesBoutique:i,dateProduction:ti(t.dateProduction),dateCreation:ti(t.dateCreation),createdAt:ti(t.createdAt),updatedAt:ti(new Date)};if(t.id.startsWith("prog_")){const{id:c,...d}=a,h=await Cn.create("productionPrograms",d);n(f=>({programmeActuel:f.programmeActuel?{...f.programmeActuel,id:h.id}:null,isLoading:!1}))}else{const{id:c,...d}=a;await Cn.update("productionPrograms",c,d),n({isLoading:!1})}}catch(a){throw console.error("Erreur lors de la sauvegarde:",a),n({isLoading:!1}),a}}},sauvegarderEtRecharger:async()=>{const{programmeActuel:t}=e();if(t)try{await e().sauvegarderProgramme(),await e().chargerProgramme(t.dateProduction),console.log(" Programme sauvegard et recharg pour viter les conflits")}catch(r){throw console.error("Erreur lors de sauvegarde+rechargement:",r),r}},validerProduction:async()=>{const{programmeActuel:t,produits:r}=e();if(t){n({isLoading:!0});try{console.log(" Validation de la production et dduction des stocks...");const i=[];let a=[];t.totauxParProduit&&t.totauxParProduit.forEach(h=>{const f=r.find(p=>p.id===h.produitId);f?.recette&&f.recette.length>0&&(a.push(`Produit: ${f.nom} (Total: ${h.totalGlobal})`),f.recette.forEach(p=>{const v=Number((p.quantite*h.totalGlobal).toFixed(3));v>0&&(i.push({matiereId:p.matiereId,quantite:v,type:"consommation",motif:`Production: ${f.nom} (${h.totalGlobal} p.)`,auteur:"Systme",responsable:"Systme (Auto)",referenceDocument:`PROD-${new Date(t.dateProduction).toLocaleDateString()}`}),a.push(`  - Ingrdient ${p.matiereId}: ${v}`))}))}),console.log(" Mouvements  gnrer:",i.length),console.log(a.join(`
`));const c=El.getState();for(const h of i)await c.addMouvement({...h,date:new Date,userId:"system"});const d={...t,statut:"produit",updatedAt:new Date};await Cn.update("productionPrograms",t.id,{statut:"produit",updatedAt:new Date}),n({programmeActuel:d,isLoading:!1}),console.log(" Production valide et stocks dduits !")}catch(i){throw console.error("Erreur validation production:",i),n({isLoading:!1}),i}}},marquerCommeModifie:()=>{const{programmeActuel:t}=e();t&&t.statut==="envoye"&&n({programmeActuel:{...t,statut:"modifie",updatedAt:new Date}})},envoyerAuBoulanger:async()=>{const{programmeActuel:t}=e();if(t)try{const r={...t,statut:"envoye",updatedAt:new Date};n({programmeActuel:r}),await e().sauvegarderProgramme()}catch(r){throw console.error("Erreur lors de l'envoi:",r),r}},ajouterCommandeClient:t=>{const r={...t,id:`cmd_${Date.now()}`,createdAt:new Date,updatedAt:new Date};n(i=>({commandesClients:[...i.commandesClients,r]})),setTimeout(()=>{e().marquerCommeModifie(),e().calculerTotauxParProduit(),e().sauvegarderEtRecharger().catch(i=>{console.warn("Auto-sauvegarde choue:",i)})},100)},modifierCommandeClient:(t,r)=>{n(i=>({commandesClients:i.commandesClients.map(a=>a.id===t?{...a,...r,updatedAt:new Date}:a)})),setTimeout(()=>{e().marquerCommeModifie(),e().calculerTotauxParProduit(),e().sauvegarderEtRecharger().catch(console.warn)},100)},supprimerCommandeClient:t=>{n(r=>({commandesClients:r.commandesClients.filter(i=>i.id!==t)})),setTimeout(()=>{e().marquerCommeModifie(),e().calculerTotauxParProduit(),e().sauvegarderEtRecharger().catch(console.warn)},0)},supprimerCommandesLivreur:t=>{const{clients:r}=e(),i=r.filter(c=>c.livreurId===t),a=i.map(c=>c.id);console.log(` Suppression des commandes pour le livreur ${t}:`,i.map(c=>c.nom)),n(c=>{const d=c.commandesClients.length,h=c.commandesClients.filter(p=>!a.includes(p.clientId)),f=h.length;return console.log(` ${d-f} commandes supprimes (${d} -> ${f})`),{commandesClients:h}}),setTimeout(()=>{e().calculerTotauxParProduit(),e().programmeActuel?.statut==="brouillon"&&e().sauvegarderEtRecharger().catch(console.warn)},0)},annulerCommandeClient:t=>{n(r=>({commandesClients:r.commandesClients.map(i=>i.id===t?{...i,statut:"annulee",updatedAt:new Date}:i)})),setTimeout(()=>e().calculerTotauxParProduit(),0)},supprimerProduitDeCommande:(t,r)=>{n(i=>({commandesClients:i.commandesClients.map(a=>{if(a.id===t){const c=[...a.produits];return c.splice(r,1),c.length===0?null:{...a,produits:c,updatedAt:new Date}}return a}).filter(a=>a!==null)})),setTimeout(()=>{e().calculerTotauxParProduit(),e().programmeActuel?.statut==="brouillon"&&e().sauvegarderEtRecharger().catch(console.warn)},100)},sauvegarderCommandeType:async(t,r)=>{try{await Cn.update("clients",t,{commandeType:r,updatedAt:new Date}),n(i=>({clients:i.clients.map(a=>a.id===t?{...a,commandeType:r,updatedAt:new Date}:a)})),console.log(" Commande type sauvegarde pour client",t)}catch(i){throw console.error("Erreur sauvegarde commande type:",i),i}},ajouterQuantiteBoutique:t=>{n(r=>{const i=r.quantitesBoutique.findIndex(a=>a.produitId===t.produitId);if(i>=0){const a=[...r.quantitesBoutique];return a[i]=t,{quantitesBoutique:a}}else return{quantitesBoutique:[...r.quantitesBoutique,t]}}),e().marquerCommeModifie(),e().calculerTotauxParProduit(),setTimeout(()=>e().sauvegarderEtRecharger().catch(console.error),0)},modifierQuantiteBoutique:(t,r)=>{n(i=>({quantitesBoutique:i.quantitesBoutique.map(a=>a.produitId===t?{...a,quantite:r}:a)})),e().marquerCommeModifie(),e().calculerTotauxParProduit(),setTimeout(()=>e().sauvegarderEtRecharger().catch(console.error),0)},supprimerQuantiteBoutique:t=>{n(r=>({quantitesBoutique:r.quantitesBoutique.filter(i=>i.produitId!==t)})),e().marquerCommeModifie(),e().calculerTotauxParProduit(),setTimeout(()=>e().sauvegarderEtRecharger().catch(console.error),0)},calculerTotauxParProduit:()=>{const{commandesClients:t,quantitesBoutique:r,produits:i}=e(),a=new Map;t.filter(d=>d.statut!=="annulee").forEach(d=>{d.produits.forEach(h=>{const f=a.get(h.produitId)||{totalClient:0,totalBoutique:0,repartitionCar1Matin:0,repartitionCar2Matin:0,repartitionCarSoir:0},p=h.quantiteCommandee||(Number(h.repartitionCars?.car1_matin)||0)+(Number(h.repartitionCars?.car2_matin)||0)+(Number(h.repartitionCars?.car_soir)||0),v=Number(h.repartitionCars?.car1_matin)||0,_=Number(h.repartitionCars?.car2_matin)||0,b=Number(h.repartitionCars?.car_soir)||0;a.set(h.produitId,{totalClient:f.totalClient+p,totalBoutique:f.totalBoutique,repartitionCar1Matin:f.repartitionCar1Matin+v,repartitionCar2Matin:f.repartitionCar2Matin+_,repartitionCarSoir:f.repartitionCarSoir+b})})}),r.forEach(d=>{const h=a.get(d.produitId)||{totalClient:0,repartitionCar1Matin:0,repartitionCar2Matin:0,repartitionCarSoir:0};let f,p,v;d.repartitionCars?(f=d.repartitionCars.car1_matin,p=d.repartitionCars.car2_matin,v=d.repartitionCars.car_soir):(f=Math.ceil(d.quantite*.35),p=Math.ceil(d.quantite*.35),v=d.quantite-f-p),a.set(d.produitId,{totalClient:h.totalClient,totalBoutique:d.quantite,repartitionCar1Matin:h.repartitionCar1Matin+f,repartitionCar2Matin:h.repartitionCar2Matin+p,repartitionCarSoir:h.repartitionCarSoir+v})});const c=Array.from(a.entries()).map(([d,h])=>{const f=i.find(v=>v.id===d),p=h.totalClient+h.totalBoutique;return{produitId:d,produit:f,totalClient:h.totalClient,totalBoutique:h.totalBoutique,totalGlobal:p,repartitionCar1Matin:h.repartitionCar1Matin,repartitionCar2Matin:h.repartitionCar2Matin,repartitionCarSoir:h.repartitionCarSoir}});n(d=>({programmeActuel:d.programmeActuel?{...d.programmeActuel,totauxParProduit:c}:null}))},modifierRepartitionProduit:(t,r,i,a)=>{},chargerProduits:async()=>{try{const r=(await Cn.getAll("produits")).map(i=>({...i,createdAt:i.createdAt instanceof Date?i.createdAt:hr(i.createdAt),updatedAt:i.updatedAt instanceof Date?i.updatedAt:hr(i.updatedAt)}));n({produits:r.filter(i=>i.active)})}catch(t){throw console.error("Erreur lors du chargement des produits:",t),t}},chargerClients:async()=>{try{const r=(await Cn.getAll("clients")).map(i=>({...i,createdAt:i.createdAt instanceof Date?i.createdAt:hr(i.createdAt),updatedAt:i.updatedAt instanceof Date?i.updatedAt:hr(i.updatedAt)}));n({clients:r.filter(i=>i.active)})}catch(t){throw console.error("Erreur lors du chargement des clients:",t),t}},rafraichirDonnees:async()=>{try{await Promise.all([e().chargerProduits(),e().chargerClients()])}catch(t){throw console.error("Erreur lors du rafrachissement:",t),t}},setShowCommandeForm:t=>{n({showCommandeForm:t})},setShowQuantiteBoutiqueForm:t=>{n({showQuantiteBoutiqueForm:t})},setCommandeEnEdition:t=>{n({commandeEnEdition:t})},setQuantiteBoutiqueEnEdition:t=>{n({quantiteBoutiqueEnEdition:t})},updateFormulaireCommande:t=>{n(r=>({formulaireCommande:{...r.formulaireCommande,...t}}))},resetFormulaireCommande:()=>{n({formulaireCommande:{selectedClientId:"",dateLivraison:new Date().toISOString().split("T")[0],produitsCommandes:[],utiliserPrixClient:!0}})},setLoading:t=>{n({isLoading:t})},nettoyerProgrammesEnDouble:async()=>{try{console.log(" Nettoyage des programmes en double...");const t=await Cn.getAll("productionPrograms");console.log(` ${t.length} programmes trouvs`);const r=new Map;t.forEach(a=>{const c=a.dateProduction?.toDate?a.dateProduction.toDate().toDateString():new Date(a.dateProduction).toDateString();r.has(c)||r.set(c,[]),r.get(c).push(a)});let i=0;for(const[a,c]of r)if(c.length>1){console.log(` ${c.length} programmes trouvs pour ${a}`),c.sort((d,h)=>{const f=d.updatedAt?.toDate?d.updatedAt.toDate():new Date(d.updatedAt);return(h.updatedAt?.toDate?h.updatedAt.toDate():new Date(h.updatedAt)).getTime()-f.getTime()});for(let d=1;d<c.length;d++)await Cn.delete("productionPrograms",c[d].id),i++,console.log(` Programme ${c[d].id} supprim`)}console.log(` Nettoyage termin - ${i} programmes supprims`)}catch(t){throw console.error("Erreur lors du nettoyage:",t),t}},debugTotaux:()=>{const{commandesClients:t,quantitesBoutique:r,programmeActuel:i}=e();if(console.log("=== DEBUG TOTAUX ==="),console.log(" Commandes clients:",t.length),t.forEach((a,c)=>{console.log(`  Commande ${c+1}:`,a.produits.map(d=>({produit:d.produit?.nom,quantite:d.quantiteCommandee,repartition:d.repartitionCars})))}),console.log(" Quantits boutique:",r.length),r.forEach((a,c)=>{console.log(`  Boutique ${c+1}:`,{produit:a.produit?.nom,quantite:a.quantite,repartition:a.repartitionCars})}),console.log(" Totaux calculs:",i?.totauxParProduit),i?.totauxParProduit){const a=i.totauxParProduit.reduce((h,f)=>h+(f.repartitionCar1Matin||0),0),c=i.totauxParProduit.reduce((h,f)=>h+(f.repartitionCar2Matin||0),0),d=i.totauxParProduit.reduce((h,f)=>h+(f.repartitionCarSoir||0),0);console.log(" Totaux par car:"),console.log(`  Car 1 Matin: ${a}`),console.log(`  Car 2 Matin: ${c}`),console.log(`  Car Soir: ${d}`),console.log(`  TOTAL: ${a+c+d}`)}}})),sm=Nc((n,e)=>({livraisonsJour:[],invendusClients:[],clients:[],produits:[],isLoading:!1,chargerLivraisonsDuJour:async t=>{n({isLoading:!0});try{console.log("Charger livraisons du jour:",t),n({isLoading:!1})}catch(r){throw n({isLoading:!1}),r}},chargerInvendusDuJour:async t=>{n({isLoading:!0});try{const r=t.toISOString().split("T")[0];console.log(` Chargement des invendus pour ${r}...`);const i=new Date(r+"T00:00:00.000Z"),a=new Date(r+"T23:59:59.999Z"),c=xs($n(wt,"clientReturns"),Fn("dateLivraison",">=",i),Fn("dateLivraison","<=",a)),d=await ga(c);if(d.empty)console.log(" Aucun retour client trouv pour cette date"),n({invendusClients:[]});else{const h=d.docs.map(f=>{const p=f.data();return{...p,dateLivraison:p.dateLivraison.toDate(),createdAt:p.createdAt.toDate(),updatedAt:p.updatedAt.toDate()}});n({invendusClients:h}),console.log(` ${h.length} retours clients chargs depuis Firebase`)}n({isLoading:!1})}catch(r){n({isLoading:!1}),console.error(" Erreur lors du chargement des invendus:",r)}},commencerLivraison:t=>{n(r=>({livraisonsJour:r.livraisonsJour.map(i=>i.clientId===t?{...i,statut:"en_cours"}:i)}))},terminerLivraison:t=>{n(r=>({livraisonsJour:r.livraisonsJour.map(i=>i.clientId===t?{...i,statut:"termine"}:i)}))},saisirInvendusClient:(t,r,i)=>{const{livraisonsJour:a}=e(),c=a.find(f=>f.clientId===t);if(!c)return;const d=c.produits.find(f=>f.produitId===r);if(!d)return;const h=d.quantiteLivree-i;n(f=>({livraisonsJour:f.livraisonsJour.map(p=>p.clientId===t?{...p,produits:p.produits.map(v=>v.produitId===r?{...v,invendus:i,vendu:h}:v)}:p)})),n(f=>{if(f.invendusClients.find(v=>v.clientId===t))return{invendusClients:f.invendusClients.map(v=>v.clientId===t?{...v,produits:v.produits.map(_=>_.produitId===r?{..._,invendus:i,vendu:h,quantiteLivree:d.quantiteLivree}:_)}:v)};{const v={id:`inv_${t}_${Date.now()}`,clientId:t,client:c.client,dateLivraison:c.dateLivraison,produits:[{produitId:r,produit:d.produit,quantiteLivree:d.quantiteLivree,invendus:i,vendu:h}],createdAt:new Date,updatedAt:new Date};return{invendusClients:[...f.invendusClients,v]}}})},calculerVenduClient:(t,r)=>{const{livraisonsJour:i}=e(),a=i.find(d=>d.clientId===t);if(!a)return 0;const c=a.produits.find(d=>d.produitId===r);return c?c.quantiteLivree-c.invendus:0},sauvegarderInvendus:async()=>{const{invendusClients:t}=e();n({isLoading:!0});try{console.log(" Sauvegarde des invendus clients:",t);for(const r of t){const i=r.dateLivraison.toISOString().split("T")[0],a=`retours_${r.clientId}_${i}`,c={...r,dateLivraison:r.dateLivraison,createdAt:r.createdAt,updatedAt:new Date};console.log(` Sauvegarde retours client vers document ID: ${a}`);const d=Tn(wt,"clientReturns",a);await xa(d,c,{merge:!0})}console.log(" Tous les retours clients sauvegards avec succs"),n({isLoading:!1})}catch(r){throw n({isLoading:!1}),console.error(" Erreur lors de la sauvegarde des invendus:",r),r}},marquerAucunRetourClient:async(t,r)=>{n({isLoading:!0});try{console.log(' Marquage "aucun retour" pour client:',t,"date:",r.toISOString().split("T")[0]);const i=r.toISOString().split("T")[0],a=`retours_${t}_${i}`,c={clientId:t,dateLivraison:r,produits:[],retoursCompletes:!0,createdAt:new Date,updatedAt:new Date},d=Tn(wt,"clientReturns",a);await xa(d,c,{merge:!0}),n(h=>({invendusClients:[...h.invendusClients.filter(p=>!(p.clientId===t&&p.dateLivraison.toDateString()===r.toDateString())),c],isLoading:!1})),console.log(' "Aucun retour" marqu avec succs')}catch(i){throw n({isLoading:!1}),console.error(' Erreur lors du marquage "aucun retour":',i),i}},sauvegarderRetoursClient:async(t,r,i)=>{n({isLoading:!0});try{console.log(" Sauvegarde des retours pour client:",t,"date:",r.toISOString().split("T")[0]);const a=r.toISOString().split("T")[0],c=`retours_${t}_${a}`,d={clientId:t,dateLivraison:r,produits:i,retoursCompletes:!0,createdAt:new Date,updatedAt:new Date},h=Tn(wt,"clientReturns",c);await xa(h,d,{merge:!0}),n(f=>({invendusClients:[...f.invendusClients.filter(v=>!(v.clientId===t&&v.dateLivraison.toDateString()===r.toDateString())),d],isLoading:!1})),console.log(" Retours client sauvegards et finaliss avec succs")}catch(a){throw n({isLoading:!1}),console.error(" Erreur lors de la sauvegarde des retours client:",a),a}},getLivraisonByClientId:t=>{const{livraisonsJour:r}=e();return r.find(i=>i.clientId===t)},getInvendusByClientId:t=>{const{invendusClients:r}=e();return r.find(i=>i.clientId===t)},setLoading:t=>{n({isLoading:t})}}));let Xd=null;const Rg=Nc((n,e)=>({stockJour:null,equipeMatin:null,equipeSoir:null,ventesJour:null,produits:[],isLoading:!1,creerStockJour:(t,r)=>{const i={id:`stock_${t.getTime()}`,date:t,produits:r.map(a=>({produitId:a.produitId,stockDebut:a.stockDebut})),createdAt:new Date,updatedAt:new Date};n({stockJour:i})},chargerStockJour:async t=>{n({isLoading:!0});try{const r=new Date(t);r.setHours(0,0,0,0);const i=new Date(t);i.setHours(23,59,59,999),console.log("Recherche stock pour date (local):",r.toLocaleString());const a=xs($n(wt,"shopStock"),Fn("date",">=",ti(r)),Fn("date","<=",ti(i))),c=await ga(a);if(console.log("Nombre de stocks trouvs:",c.docs.length),c.empty)console.log("Aucun stock existant trouv"),n({stockJour:null});else{const d=c.docs[0].data();console.log("Donnes stock brutes:",d);const h={...d,date:d.date.toDate(),createdAt:d.createdAt.toDate(),updatedAt:d.updatedAt.toDate()};n({stockJour:h}),console.log("Stock boutique charg:",h)}n({isLoading:!1})}catch(r){throw n({isLoading:!1}),console.error("Erreur lors du chargement du stock:",r),r}},creerStockDepuisProduction:async(t,r=!1)=>{n({isLoading:!0});try{const i=new Date(t);i.setHours(0,0,0,0);const a=new Date(t);a.setHours(23,59,59,999),console.log("Plage de recherche production:",i.toLocaleString(),"",a.toLocaleString());const c=xs($n(wt,"productionPrograms"),Fn("dateProduction",">=",ti(i)),Fn("dateProduction","<=",ti(a))),d=await ga(c);if(console.log("Programmes trouvs:",d.docs.length),d.empty){console.log("Aucun programme de production trouv pour cette date");const T=xs($n(wt,"productionPrograms")),I=await ga(T);console.log("Total programmes en base:",I.docs.length),I.docs.forEach(L=>{const j=L.data();console.log("Programme trouv:",L.id,j.date)}),n({isLoading:!1,stockJour:null});return}const h=d.docs[0].data(),f=h.quantitesBoutique||[];if(console.log("Programme trouv:",h),console.log("Quantits boutique:",f),f.length===0){console.log("Aucune quantit boutique dfinie dans le programme"),n({isLoading:!1,stockJour:null});return}const p=await ga($n(wt,"produits")),v=new Map;p.docs.forEach(T=>{const I=T.data();v.set(T.id,I)}),console.log("Produits chargs:",Array.from(v.keys()));const _=f.map(T=>{console.log("Traitement quantit:",T);const I=v.get(T.produitId);return console.log("Produit trouv:",I),{produitId:T.produitId,stockDebut:T.quantite,produit:I||{nom:"Produit inconnu"},repartitionCars:T.repartitionCars||null}}).filter(T=>T.stockDebut>0);if(console.log("Stock produits final:",_),_.length===0){console.log("Aucun produit avec quantit > 0 pour la boutique"),n({isLoading:!1,stockJour:null});return}const{stockJour:b}=e();if(r||!b){const T={id:`stock_${t.getTime()}`,date:t,produits:_,createdAt:new Date,updatedAt:new Date};if(b&&r){console.log("Suppression de l'ancien stock pour mise  jour");const I=xs($n(wt,"shopStock"),Fn("date",">=",ti(i)),Fn("date","<=",ti(a))),L=await ga(I);for(const j of L.docs)await m0(j.ref)}await QS($n(wt,"shopStock"),{...T,date:t,createdAt:new Date,updatedAt:new Date}),n({stockJour:T,isLoading:!1}),console.log("Stock boutique cr/mis  jour depuis les quantits dfinies:",T)}else n({isLoading:!1}),console.log("Stock existant conserv")}catch(i){n({isLoading:!1,stockJour:null}),console.error("Erreur lors de la cration du stock depuis production:",i)}},mettreAJourStockBoutique:async t=>{await e().creerStockDepuisProduction(t,!0)},commencerEquipeMatin:(t,r)=>{const{stockJour:i}=e();if(!i)return;const a={id:`equipe_matin_${r.getTime()}`,date:r,periode:"matin",vendeuse:t,produits:i.produits.map(c=>({produitId:c.produitId,stockDebut:c.stockDebut,vendu:0,reste:c.stockDebut,produit:c.produit})),statut:"en_cours",createdAt:new Date,updatedAt:new Date};n({equipeMatin:a})},commencerEquipeSoir:(t,r)=>{const{equipeMatin:i}=e();if(!i)return;const a={id:`equipe_soir_${r.getTime()}`,date:r,periode:"soir",vendeuse:t,produits:i.produits.map(c=>({produitId:c.produitId,stockDebut:c.reste,vendu:0,reste:c.reste,produit:c.produit})),statut:"en_cours",createdAt:new Date,updatedAt:new Date};n({equipeSoir:a})},saisirVenteMatin:(t,r)=>{n(i=>i.equipeMatin?{equipeMatin:{...i.equipeMatin,produits:i.equipeMatin.produits.map(a=>a.produitId===t?{...a,vendu:r,reste:a.stockDebut-r}:a),updatedAt:new Date}}:i),Xd&&clearTimeout(Xd),Xd=setTimeout(async()=>{try{console.log(" Sauvegarde automatique quipe matin..."),await e().sauvegarderEquipe("matin")}catch(i){console.error(" Erreur sauvegarde automatique matin:",i)}},2e3)},saisirVenteSoir:(t,r)=>{n(i=>i.equipeSoir?{equipeSoir:{...i.equipeSoir,produits:i.equipeSoir.produits.map(a=>a.produitId===t?{...a,vendu:r,reste:a.stockDebut-r}:a),updatedAt:new Date}}:i),Xd&&clearTimeout(Xd),Xd=setTimeout(async()=>{try{console.log(" Sauvegarde automatique quipe soir..."),await e().sauvegarderEquipe("soir")}catch(i){console.error(" Erreur sauvegarde automatique soir:",i)}},2e3)},terminerEquipeMatin:()=>{n(t=>({equipeMatin:t.equipeMatin?{...t.equipeMatin,statut:"termine",updatedAt:new Date}:null}))},terminerEquipeSoir:()=>{n(t=>({equipeSoir:t.equipeSoir?{...t.equipeSoir,statut:"termine",updatedAt:new Date}:null})),e().calculerVentesBoutique()},calculerVentesBoutique:()=>{const{stockJour:t,equipeMatin:r,equipeSoir:i}=e();if(!t||!r||!i)return;const a={id:`ventes_${t.date.getTime()}`,date:t.date,produits:t.produits.map(c=>{const d=r.produits.find(b=>b.produitId===c.produitId),h=i.produits.find(b=>b.produitId===c.produitId),f=d?.vendu||0,p=d?.reste||0,v=h?.vendu||0,_=h?.reste||0;return{produitId:c.produitId,produit:c.produit,stockDebut:c.stockDebut,venduMatin:f,resteMidi:p,venduSoir:v,invenduBoutique:_,venduTotal:f+v}}),createdAt:new Date,updatedAt:new Date};n({ventesJour:a})},calculerResteMidi:t=>{const{equipeMatin:r}=e();if(!r)return 0;const i=r.produits.find(a=>a.produitId===t);return i?i.stockDebut-i.vendu:0},calculerInvenduBoutique:t=>{const{equipeSoir:r}=e();if(!r)return 0;const i=r.produits.find(a=>a.produitId===t);return i?i.reste:0},sauvegarderEquipe:async t=>{const{equipeMatin:r,equipeSoir:i}=e(),a=t==="matin"?r:i;if(a){n({isLoading:!0});try{console.log(` Dbut sauvegarde quipe ${t}:`,a);const d=`${a.date.toISOString().split("T")[0]}_${t}`,h={...a,date:a.date,createdAt:a.createdAt,updatedAt:new Date};console.log(` Sauvegarde vers document ID: ${d}`);const f=Tn(wt,"shopShifts",d);await xa(f,h,{merge:!0}),console.log(` quipe ${t} sauvegarde avec succs - ID: ${d}`),n({isLoading:!1})}catch(c){throw n({isLoading:!1}),console.error(` Erreur lors de la sauvegarde de l'quipe ${t}:`,c),c}}},sauvegarderVentes:async()=>{const{ventesJour:t}=e();if(t){n({isLoading:!0});try{console.log(" Dbut sauvegarde ventes boutique:",t);const i=`ventes_${t.date.toISOString().split("T")[0]}`,a={...t,date:t.date,createdAt:t.createdAt,updatedAt:new Date};console.log(` Sauvegarde ventes vers document ID: ${i}`);const c=Tn(wt,"shopSales",i);await xa(c,a,{merge:!0}),console.log(` Ventes boutique sauvegardes avec succs - ID: ${i}`),n({isLoading:!1})}catch(r){throw n({isLoading:!1}),console.error(" Erreur lors de la sauvegarde des ventes:",r),r}}},chargerEquipe:async(t,r)=>{try{const i=t.toISOString().split("T")[0],a=`${i}_${r}`;console.log(` Chargement quipe ${r} pour ${i}...`);const c=Tn(wt,"shopShifts",a),d=await dc(c);if(d.exists()){const h=d.data(),f={...h,date:h.date.toDate(),createdAt:h.createdAt.toDate(),updatedAt:h.updatedAt.toDate()};n(r==="matin"?{equipeMatin:f}:{equipeSoir:f}),console.log(` quipe ${r} charge depuis Firebase`)}else console.log(` Aucune quipe ${r} trouve pour cette date`),n(r==="matin"?{equipeMatin:null}:{equipeSoir:null})}catch(i){console.error(` Erreur lors du chargement de l'quipe ${r}:`,i)}},chargerVentes:async t=>{try{const r=t.toISOString().split("T")[0],i=`ventes_${r}`;console.log(` Chargement ventes pour ${r}...`);const a=Tn(wt,"shopSales",i),c=await dc(a);if(c.exists()){const d=c.data(),h={...d,date:d.date.toDate(),createdAt:d.createdAt.toDate(),updatedAt:d.updatedAt.toDate()};n({ventesJour:h}),console.log(" Ventes charges depuis Firebase")}else console.log(" Aucunes ventes trouves pour cette date"),n({ventesJour:null})}catch(r){console.error(" Erreur lors du chargement des ventes:",r)}},setLoading:t=>{n({isLoading:t})}})),_u=Nc((n,e)=>({produits:[],produitEnEdition:null,isLoadingProduits:!1,clients:[],clientEnEdition:null,isLoadingClients:!1,chargerProduits:async()=>{n({isLoadingProduits:!0});try{const t=await Cn.getAll("produits");n({produits:t,isLoadingProduits:!1})}catch(t){throw console.error("Erreur lors du chargement des produits:",t),n({isLoadingProduits:!1}),t}},ajouterProduit:async t=>{n({isLoadingProduits:!0});try{const r=new Date,i={...t,createdAt:r,updatedAt:r},c={id:(await Cn.create("produits",i)).id,...i};n(d=>({produits:[...d.produits,c],isLoadingProduits:!1}))}catch(r){throw console.error("Erreur lors de l'ajout du produit:",r),n({isLoadingProduits:!1}),r}},modifierProduit:async(t,r)=>{n({isLoadingProduits:!0});try{const i={...r,updatedAt:new Date};await Cn.update("produits",t,i),n(a=>({produits:a.produits.map(c=>c.id===t?{...c,...i}:c),isLoadingProduits:!1,produitEnEdition:null}))}catch(i){throw console.error("Erreur lors de la modification du produit:",i),n({isLoadingProduits:!1}),i}},supprimerProduit:async t=>{n({isLoadingProduits:!0});try{await Cn.delete("produits",t),n(r=>({produits:r.produits.filter(i=>i.id!==t),isLoadingProduits:!1}))}catch(r){throw console.error("Erreur lors de la suppression du produit:",r),n({isLoadingProduits:!1}),r}},setProduitEnEdition:t=>{n({produitEnEdition:t})},chargerClients:async()=>{n({isLoadingClients:!0});try{const t=await Cn.getAll("clients");n({clients:t,isLoadingClients:!1})}catch(t){throw console.error("Erreur lors du chargement des clients:",t),n({isLoadingClients:!1}),t}},ajouterClient:async t=>{n({isLoadingClients:!0});try{const r=new Date,i={...t,createdAt:r,updatedAt:r},c={id:(await Cn.create("clients",i)).id,...i};n(d=>({clients:[...d.clients,c],isLoadingClients:!1}))}catch(r){throw console.error("Erreur lors de l'ajout du client:",r),n({isLoadingClients:!1}),r}},modifierClient:async(t,r)=>{n({isLoadingClients:!0});try{const i={...r,updatedAt:new Date};await Cn.update("clients",t,i),n(a=>({clients:a.clients.map(c=>c.id===t?{...c,...i}:c),isLoadingClients:!1,clientEnEdition:null}))}catch(i){throw console.error("Erreur lors de la modification du client:",i),n({isLoadingClients:!1}),i}},supprimerClient:async t=>{n({isLoadingClients:!0});try{await Cn.delete("clients",t),n(r=>({clients:r.clients.filter(i=>i.id!==t),isLoadingClients:!1}))}catch(r){throw console.error("Erreur lors de la suppression du client:",r),n({isLoadingClients:!1}),r}},setClientEnEdition:t=>{n({clientEnEdition:t})},getProduitById:t=>{const{produits:r}=e();return r.find(i=>i.id===t)},getClientById:t=>{const{clients:r}=e();return r.find(i=>i.id===t)},getProduitsActifs:()=>{const{produits:t}=e();return t.filter(r=>r.active)},getClientsActifs:()=>{const{clients:t}=e();return t.filter(r=>r.active)},initialiserProduitsParDefaut:async()=>{console.log(" Initialisation automatique dsactive - charger manuellement les produits"),await e().chargerProduits()},initialiserClientsParDefaut:async()=>{console.log(" Initialisation automatique dsactive - charger manuellement les clients"),await e().chargerClients()}})),aM=Nc((n,e)=>({rapportJour:null,historiqueRapports:[],indicateurs:null,isLoading:!1,genererRapportJour:async t=>{n({isLoading:!0});try{console.log(" Gnration rapport pour:",t.toISOString().split("T")[0]);const r=_l.getState(),i=Rg.getState(),a=sm.getState(),c=_u.getState();console.log(" Chargement des donnes depuis les stores...");try{console.log(" Test direct Firebase...");const B=xs($n(wt,"productionPrograms"),Fn("date",">=",new Date(t.toISOString().split("T")[0]+"T00:00:00.000Z")),Fn("date","<=",new Date(t.toISOString().split("T")[0]+"T23:59:59.999Z"))),re=await ga(B);console.log(" Documents trouvs dans productionPrograms:",re.docs.length),re.docs.forEach((ne,V)=>{console.log(` Document ${V+1}:`,ne.id,ne.data())})}catch(B){console.error(" Erreur test Firebase:",B)}console.log(" Chargement programme production..."),console.log(" Date recherche:",t,t.toISOString().split("T")[0]),await r.chargerProgramme(t),console.log(" Programme production charg");const d=_l.getState().programmeActuel;console.log(" Programme aprs chargement:",d),console.log(" Chargement ventes boutique..."),await i.chargerVentes(t),console.log(" Ventes boutique charges"),console.log(" Chargement retours clients..."),await a.chargerInvendusDuJour(t),console.log(" Retours clients chargs"),console.log(" Chargement donnes de rfrence..."),c.produits.length===0&&await c.chargerProduits(),console.log(" Donnes de rfrence charges");const h=_l.getState(),f=Rg.getState(),p=sm.getState(),v=_u.getState(),_=h.programmeActuel,b=f.ventesJour,T=p.invendusClients,I=_?.commandesClients||h.commandesClients,L=v.produits;if(console.log(" Debug - Donnes rcupres:",{programme:_,ventesJour:b,invendusClients:T,commandesClients:I,produits:L,productionState:h}),_&&console.log(" Structure dtaille du programme:",{"programme.id":_.id,"programme.dateProduction":_.dateProduction,"programme keys":Object.keys(_),"programme complet":JSON.stringify(_,null,2)}),!_||!_.totauxParProduit||_.totauxParProduit.length===0){console.warn(" Aucun programme de production trouv pour cette date. Gnration d'un rapport vide...");const B={id:`rapport_${t.getTime()}`,date:t,produits:[],totaux:{quantitePrevue:0,quantiteProduite:0,quantiteVendueTotal:0,invendusTotal:0,tauxVenteGlobal:0,pertesTotales:0},statut:"genere",createdAt:new Date,updatedAt:new Date};n({rapportJour:B,isLoading:!1}),console.log(" Rapport vide gnr:",B);try{const ne=`rapport_${t.toISOString().split("T")[0]}`,V=Tn(wt,"dailyReports",ne);await xa(V,B,{merge:!0}),console.log(" Rapport vide sauvegard en Firebase")}catch(re){console.error(" Erreur lors de la sauvegarde du rapport vide:",re)}return}console.log(" Donnes charges:",{programme:!!_,"programme.totauxParProduit":_?.totauxParProduit,ventesJour:!!b,invendusClients:T.length,commandesClients:I.length,"commandesClients dtail":I});const j=_.totauxParProduit.map(B=>{const re=L.find(J=>J.id===B.produitId),ne=B.totalGlobal,V=B.totalBoutique||0,D=I.flatMap(J=>J.produits).filter(J=>J.produitId===B.produitId).reduce((J,q)=>{const X=Object.values(q.repartitionCars||{}).reduce((ie,fe)=>ie+(Number(fe)||0),0);return J+X},0),k=b?.produits.find(J=>J.produitId===B.produitId),$=k?.venduTotal||0,S=k?.invenduBoutique||0,R=T.flatMap(J=>J.produits).filter(J=>J.produitId===B.produitId).reduce((J,q)=>J+q.invendus,0),F=D-R,oe=D+V,be=F+$,Q=R+S,ae=(J,q)=>q>0?Math.round(J/q*1e4)/100:0,me=ae(F,D),je=ae($,V),Fe=ae(be,oe);return{produitId:B.produitId,produit:re,quantitePrevue:ne,quantiteProduite:oe,quantiteVendueClients:F,quantiteVendueBoutique:$,quantiteVendueTotal:be,invendusClients:R,invendusBoutique:S,invendusTotal:Q,tauxVenteClients:me,tauxVenteBoutique:je,tauxVenteGlobal:Fe,ecartPrevuProduit:oe-ne,ecartProduitVendu:oe-be}}),U=j.reduce((B,re)=>({quantitePrevue:B.quantitePrevue+re.quantitePrevue,quantiteProduite:B.quantiteProduite+re.quantiteProduite,quantiteVendueTotal:B.quantiteVendueTotal+re.quantiteVendueTotal,invendusTotal:B.invendusTotal+re.invendusTotal,tauxVenteGlobal:0,pertesTotales:B.pertesTotales+re.invendusTotal}),{quantitePrevue:0,quantiteProduite:0,quantiteVendueTotal:0,invendusTotal:0,tauxVenteGlobal:0,pertesTotales:0});U.tauxVenteGlobal=U.quantiteProduite>0?Math.round(U.quantiteVendueTotal/U.quantiteProduite*1e4)/100:0;const z={id:`rapport_${t.getTime()}`,date:t,produits:j,totaux:U,statut:"genere",createdAt:new Date,updatedAt:new Date};n({rapportJour:z,isLoading:!1}),e().calculerIndicateursPerformance(t),console.log(" Rapport gnr avec succs:",z),console.log(" Sauvegarde automatique du rapport en Firebase...");try{const re=`rapport_${t.toISOString().split("T")[0]}`,ne=Tn(wt,"dailyReports",re);await xa(ne,z,{merge:!0}),console.log(" Rapport sauvegard automatiquement en Firebase")}catch(B){console.error(" Erreur lors de la sauvegarde automatique:",B)}}catch(r){throw n({isLoading:!1}),console.error(" Erreur lors de la gnration du rapport:",r),r}},chargerRapport:async t=>{n({isLoading:!0});try{const r=t.toISOString().split("T")[0];console.log(` Chargement rapport pour ${r}...`);const i=`rapport_${r}`,a=Tn(wt,"dailyReports",i),c=await dc(a);if(c.exists()){const d=c.data(),h={...d,date:d.date.toDate(),createdAt:d.createdAt.toDate(),updatedAt:d.updatedAt.toDate()};n({rapportJour:h}),console.log(" Rapport charg depuis Firebase"),e().calculerIndicateursPerformance(t)}else console.log(" Aucun rapport trouv pour cette date"),n({rapportJour:null,indicateurs:null});n({isLoading:!1})}catch(r){n({isLoading:!1}),console.error(" Erreur lors du chargement du rapport:",r)}},validerRapport:async()=>{const{rapportJour:t}=e();if(t)try{const r={...t,statut:"valide",updatedAt:new Date},a=`rapport_${r.date.toISOString().split("T")[0]}`;console.log(` Sauvegarde du rapport valid vers document ID: ${a}`);const c=Tn(wt,"dailyReports",a);await xa(c,r,{merge:!0}),n({rapportJour:r}),console.log(" Rapport valid et sauvegard avec succs")}catch(r){throw console.error(" Erreur lors de la validation du rapport:",r),r}},chargerHistorique:async(t,r)=>{n({isLoading:!0});try{console.log(` Chargement de l'historique du ${t.toISOString().split("T")[0]} au ${r.toISOString().split("T")[0]}`);const i=xs($n(wt,"dailyReports"),Fn("date",">=",t),Fn("date","<=",r)),a=await ga(i);if(a.empty)console.log(" Aucun rapport trouv pour cette priode"),n({historiqueRapports:[],isLoading:!1});else{const c=a.docs.map(d=>{const h=d.data();return{...h,date:h.date.toDate(),createdAt:h.createdAt.toDate(),updatedAt:h.updatedAt.toDate()}});c.sort((d,h)=>h.date.getTime()-d.date.getTime()),n({historiqueRapports:c,isLoading:!1}),console.log(` ${c.length} rapport(s) charg(s) depuis Firebase`)}}catch(i){throw n({isLoading:!1}),console.error(" Erreur lors du chargement de l'historique:",i),i}},calculerIndicateursPerformance:t=>{const{rapportJour:r}=e();if(!r)return;const i=r.produits.reduce((d,h)=>({vendu:d.vendu+h.quantiteVendueClients,invendus:d.invendus+h.invendusClients}),{vendu:0,invendus:0}),a=r.produits.reduce((d,h)=>({vendu:d.vendu+h.quantiteVendueBoutique,invendus:d.invendus+h.invendusBoutique}),{vendu:0,invendus:0}),c={date:t,tauxVenteClients:e().calculerTauxVente(i.vendu,i.vendu+i.invendus),tauxVenteBoutique:e().calculerTauxVente(a.vendu,a.vendu+a.invendus),tauxVenteGlobal:r.totaux.tauxVenteGlobal,pertesClients:i.invendus,pertesBoutique:a.invendus,pertesTotales:r.totaux.pertesTotales};n({indicateurs:c})},calculerTauxVente:(t,r)=>r===0?0:Math.round(t/r*100*100)/100,calculerEcart:(t,r)=>t-r,setLoading:t=>{n({isLoading:t})}})),am=Nc((n,e)=>({factures:[],factureActive:null,parametres:null,isLoading:!1,facturesListener:null,genererFacturesDepuisLivraisons:async(t,r,i)=>{n({isLoading:!0});try{const{parametres:a}=e();if(!a)throw new Error("Paramtres de facturation non configurs");if(!r||r.length===0){n({isLoading:!1});return}const c=[],{factures:d}=e(),h=t.toISOString().split("T")[0],f=d.filter(v=>v.dateLivraison.toISOString().split("T")[0]===h);if(f.length>0){for(const v of f)e().verifierRetoursCompletes(v.clientId,t,i)&&v.statut==="en_attente_retours"&&(await nu(Tn(wt,"factures",v.id),{statut:"validee",retoursCompletes:!0,validatedAt:new Date,updatedAt:new Date}),n(b=>({factures:b.factures.map(T=>T.id===v.id?{...T,statut:"validee",retoursCompletes:!0,validatedAt:new Date,updatedAt:new Date}:T)})));n({isLoading:!1});return}const p=new Map;r.forEach(v=>{const _=v.clientId;p.has(_)||p.set(_,[]),p.get(_).push(v)});for(const[v,_]of p){let b=_[0]?.client;if(!b)try{const j=await dc(Tn(wt,"clients",v));j.exists()&&(b={id:j.id,...j.data()})}catch(j){console.warn(" Impossible de rcuprer les infos client:",j)}const T=i.find(j=>j.clientId===v),I=e().verifierRetoursCompletes(v,t,i),L=[];for(const j of _)for(const U of j.produits){if(!U.produit&&U.produitId)try{const B=await dc(Tn(wt,"produits",U.produitId));B.exists()?U.produit={id:B.id,...B.data(),createdAt:B.data().createdAt?.toDate(),updatedAt:B.data().updatedAt?.toDate()}:console.warn(` Produit ${U.produitId} non trouv dans Firebase`)}catch(B){console.error(` Erreur rcupration produit ${U.produitId}:`,B)}const z=Object.values(U.repartitionCars||{}).reduce((B,re)=>B+(Number(re)||0),0);if(z>0){const B=T?.produits.find(k=>k.produitId===U.produitId),re=B?.invendus||0,ne=z-re;console.log(` Calcul facture pour ${U.produit?.nom||U.produitId}:`,{clientId:v,clientNom:b?.nom,produitId:U.produitId,quantiteLivree:z,quantiteRetournee:re,quantiteFacturee:ne,retoursClientTrouve:!!T,produitRetourTrouve:!!B,produitsRetours:T?.produits.map(k=>({id:k.produitId,invendus:k.invendus}))});const V=b?.typeClient==="client"||j.client?.typeClient==="client"?U.produit?.prixClient||U.produit?.prixUnitaire||0:U.produit?.prixBoutique||U.produit?.prixUnitaire||0,D=ne*V;L.push({produitId:U.produitId,produit:U.produit,quantiteLivree:z,quantiteRetournee:re,quantiteFacturee:ne,prixUnitaire:V,montantLigne:D})}}if(L.length>0){const j=e().calculerTotauxFacture(L,a.tauxTVADefaut),U={id:`facture_${v}_${Date.now()}`,numeroFacture:e().genererNumeroFacture(t),clientId:v,client:b,dateLivraison:t,dateFacture:new Date,lignes:L,...j,tauxTVA:a.tauxTVADefaut,statut:I?"validee":"en_attente_retours",retoursCompletes:I,conditionsPaiement:b?.conditionsPaiement||a.conditionsPaiementDefaut,createdAt:new Date,updatedAt:new Date};c.push(U);const z=U.lignes.map(ne=>{const V={produitId:ne.produitId,quantiteLivree:ne.quantiteLivree,quantiteRetournee:ne.quantiteRetournee,quantiteFacturee:ne.quantiteFacturee,prixUnitaire:ne.prixUnitaire,montantLigne:ne.montantLigne};return ne.produit&&(V.produit={id:ne.produit.id,nom:ne.produit.nom,description:ne.produit.description||"",unite:ne.produit.unite,prixClient:ne.produit.prixClient||0,prixBoutique:ne.produit.prixBoutique||0,prixUnitaire:ne.produit.prixUnitaire||0,active:ne.produit.active!==!1}),V}),B={id:U.id,numeroFacture:U.numeroFacture,clientId:U.clientId,dateLivraison:U.dateLivraison,dateFacture:U.dateFacture,lignes:z,totalHT:U.totalHT,tauxTVA:U.tauxTVA,montantTVA:U.montantTVA,totalTTC:U.totalTTC,statut:U.statut,retoursCompletes:U.retoursCompletes,conditionsPaiement:U.conditionsPaiement,createdAt:U.createdAt,updatedAt:U.updatedAt};if(U.client){const ne={id:U.client.id,nom:U.client.nom,adresse:U.client.adresse||"",telephone:U.client.telephone||"",email:U.client.email||"",typeClient:U.client.typeClient,active:U.client.active};B.client=ne}const re=Tn(wt,"factures",U.id);await xa(re,B,{merge:!0})}}n(v=>({factures:[...v.factures,...c],isLoading:!1}))}catch(a){throw n({isLoading:!1}),console.error(" Erreur lors de la gnration des factures:",a),a}},chargerFactures:async(t,r)=>{n({isLoading:!0});try{let i=$n(wt,"factures");t&&r?i=xs($n(wt,"factures"),Fn("dateLivraison",">=",t),Fn("dateLivraison","<=",r),Eh("dateFacture","desc")):i=xs($n(wt,"factures"),Eh("dateFacture","desc"));const a=await ga(i);if(a.empty)n({factures:[]});else{const c=a.docs.map(d=>{const h=d.data();return{...h,dateLivraison:h.dateLivraison.toDate(),dateFacture:h.dateFacture.toDate(),createdAt:h.createdAt.toDate(),updatedAt:h.updatedAt.toDate(),validatedAt:h.validatedAt?h.validatedAt.toDate():void 0,paidAt:h.paidAt?h.paidAt.toDate():void 0}});n({factures:c})}n({isLoading:!1})}catch(i){throw n({isLoading:!1}),console.error(" Erreur lors du chargement des factures:",i),i}},chargerFacturesAvecListener:(t,r)=>{console.log(" Configuration listener temps rel pour factures");const{facturesListener:i}=e();i&&i(),n({isLoading:!0});const a=y3.subscribeToFactures(c=>{console.log(" Mise  jour temps rel - factures reues:",c.length),n({factures:c,isLoading:!1})},t,r);n({facturesListener:a})},chargerFacture:async t=>{n({isLoading:!0});try{const r=Tn(wt,"factures",t),i=await dc(r);if(i.exists()){const a=i.data(),c={...a,dateLivraison:a.dateLivraison.toDate(),dateFacture:a.dateFacture.toDate(),createdAt:a.createdAt.toDate(),updatedAt:a.updatedAt.toDate(),validatedAt:a.validatedAt?a.validatedAt.toDate():void 0,paidAt:a.paidAt?a.paidAt.toDate():void 0};n({factureActive:c})}else throw new Error("Facture non trouve");n({isLoading:!1})}catch(r){throw n({isLoading:!1}),console.error(" Erreur lors du chargement de la facture:",r),r}},validerFacture:async t=>{try{const r=Tn(wt,"factures",t),i={statut:"validee",validatedAt:new Date,updatedAt:new Date};await nu(r,i),n(a=>({factures:a.factures.map(c=>c.id===t?{...c,...i}:c),factureActive:a.factureActive?.id===t?{...a.factureActive,...i}:a.factureActive}))}catch(r){throw console.error(" Erreur lors de la validation:",r),r}},envoyerFacture:async t=>{try{const r={statut:"envoyee",updatedAt:new Date};await nu(Tn(wt,"factures",t),r),n(i=>({factures:i.factures.map(a=>a.id===t?{...a,...r}:a),factureActive:i.factureActive?.id===t?{...i.factureActive,...r}:i.factureActive}))}catch(r){throw console.error(" Erreur lors de l'envoi:",r),r}},marquerPayee:async(t,r=new Date)=>{try{const i={statut:"payee",paidAt:r,updatedAt:new Date};await nu(Tn(wt,"factures",t),i),n(a=>({factures:a.factures.map(c=>c.id===t?{...c,...i}:c),factureActive:a.factureActive?.id===t?{...a.factureActive,...i}:a.factureActive}))}catch(i){throw console.error(" Erreur lors du marquage du paiement:",i),i}},annulerFacture:async(t,r)=>{try{const i={statut:"annulee",notes:r||"Facture annule",updatedAt:new Date};await nu(Tn(wt,"factures",t),i),n(a=>({factures:a.factures.map(c=>c.id===t?{...c,...i}:c)}))}catch(i){throw console.error(" Erreur lors de l'annulation:",i),i}},supprimerFacture:async t=>{try{await m0(Tn(wt,"factures",t)),n(r=>({factures:r.factures.filter(i=>i.id!==t),factureActive:r.factureActive?.id===t?null:r.factureActive}))}catch(r){throw console.error(" Erreur lors de la suppression:",r),r}},chargerParametres:async()=>{try{const t=Tn(wt,"parametres","facturation"),r=await dc(t);if(r.exists()){const i=r.data();i.tauxTVADefaut===18&&(i.tauxTVADefaut=0,await xa(t,i)),n({parametres:i})}else{const i={id:"facturation",tauxTVADefaut:0,conditionsPaiementDefaut:"Payable  30 jours",mentionsLegales:"Boulangerie Chez MINA - Dakar, Sngal - RC: XXXXX - NINEA: XXXXX",numeroFactureProchain:1,prefixeFacture:"FACT"};await xa(t,i),n({parametres:i})}}catch(t){throw console.error(" Erreur lors du chargement des paramtres:",t),t}},sauvegarderParametres:async t=>{try{const{parametres:r}=e();if(!r)return;const i={...r,...t},a=Tn(wt,"parametres","facturation");await xa(a,i,{merge:!0}),n({parametres:i})}catch(r){throw console.error(" Erreur lors de la sauvegarde des paramtres:",r),r}},calculerTotauxFacture:(t,r)=>{const i=t.reduce((d,h)=>d+h.montantLigne,0),a=Math.round(i*(r/100)*100)/100,c=Math.round((i+a)*100)/100;return{totalHT:Math.round(i*100)/100,montantTVA:a,totalTTC:c}},genererNumeroFacture:t=>{const{parametres:r}=e();if(!r)return"FACT-001";const i=t.getFullYear(),a=(t.getMonth()+1).toString().padStart(2,"0"),c=t.getDate().toString().padStart(2,"0"),d=r.numeroFactureProchain.toString().padStart(3,"0");return`${r.prefixeFacture}-${i}${a}${c}-${d}`},verifierRetoursCompletes:(t,r,i)=>i.some(a=>a.clientId===t&&a.dateLivraison.toDateString()===r.toDateString()&&a.retoursCompletes===!0),setLoading:t=>{n({isLoading:t})},setFactureActive:t=>{n({factureActive:t})},actualiserStatutsFactures:async()=>{try{const{factures:t}=e(),r=t.filter(i=>i.statut==="en_attente_retours");if(r.length===0)return;for(const i of r){const a=new Date(i.dateLivraison);a.setHours(0,0,0,0);const c=new Date(i.dateLivraison);c.setHours(23,59,59,999),(await ga(xs($n(wt,"clientReturns"),Fn("clientId","==",i.clientId),Fn("dateLivraison",">=",a),Fn("dateLivraison","<=",c)))).docs.map(p=>({id:p.id,...p.data(),dateLivraison:p.data().dateLivraison.toDate(),createdAt:p.data().createdAt.toDate(),updatedAt:p.data().updatedAt.toDate()})).some(p=>p.retoursCompletes===!0)&&(await nu(Tn(wt,"factures",i.id),{statut:"validee",retoursCompletes:!0,validatedAt:new Date,updatedAt:new Date}),n(p=>({factures:p.factures.map(v=>v.id===i.id?{...v,statut:"validee",retoursCompletes:!0,validatedAt:new Date,updatedAt:new Date}:v)})))}}catch(t){console.error(" Erreur lors de l'actualisation des statuts:",t)}},modifierTauxTVA:async(t,r)=>{try{const i=e().factures.find(d=>d.id===t);if(!i)throw new Error("Facture non trouve");const a=e().calculerTotauxFacture(i.lignes,r),c={tauxTVA:r,montantTVA:a.montantTVA,totalTTC:a.totalTTC,updatedAt:new Date};await nu(Tn(wt,"factures",t),c),n(d=>({factures:d.factures.map(h=>h.id===t?{...h,...c}:h),factureActive:d.factureActive?.id===t?{...d.factureActive,...c}:d.factureActive}))}catch(i){throw console.error(" Erreur lors de la modification du taux TVA:",i),i}},nettoyerListeners:()=>{const{facturesListener:t}=e();t&&(t(),n({facturesListener:null}),console.log(" Listeners factures nettoys"))}})),oM=()=>{const{user:n,logout:e}=Tm();return l.jsx("header",{className:"bg-white border-b border-gray-200",children:l.jsx("div",{className:"px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Dashboard"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grez votre boulangerie efficacement"})]}),l.jsx("div",{className:"flex items-center space-x-4",children:n&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center border border-orange-200",children:l.jsxs("span",{className:"text-sm font-bold text-orange-700",children:[(n.nom||n.email||"U").charAt(0).toUpperCase(),(n.prenom||"").charAt(0).toUpperCase()]})}),l.jsxs("div",{className:"text-sm hidden md:block",children:[l.jsx("div",{className:"font-medium text-gray-900",children:n.nom?`${n.nom} ${n.prenom}`:n.email}),l.jsx("div",{className:"text-gray-500 text-xs capitalize bg-gray-100 px-2 py-0.5 rounded-full inline-block mt-0.5",children:n.role})]})]}),l.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Dconnexion",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})})]})})})};function lM(n,e){const t=n.icons,r=n.aliases||Object.create(null),i=Object.create(null);function a(c){if(t[c])return i[c]=[];if(!(c in i)){i[c]=null;const d=r[c]&&r[c].parent,h=d&&a(d);h&&(i[c]=[d].concat(h))}return i[c]}return Object.keys(t).concat(Object.keys(r)).forEach(a),i}const b3=Object.freeze({left:0,top:0,width:16,height:16}),kg=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Vy=Object.freeze({...b3,...kg}),c1=Object.freeze({...Vy,body:"",hidden:!1});function cM(n,e){const t={};!n.hFlip!=!e.hFlip&&(t.hFlip=!0),!n.vFlip!=!e.vFlip&&(t.vFlip=!0);const r=((n.rotate||0)+(e.rotate||0))%4;return r&&(t.rotate=r),t}function v_(n,e){const t=cM(n,e);for(const r in c1)r in kg?r in n&&!(r in t)&&(t[r]=kg[r]):r in e?t[r]=e[r]:r in n&&(t[r]=n[r]);return t}function uM(n,e,t){const r=n.icons,i=n.aliases||Object.create(null);let a={};function c(d){a=v_(r[d]||i[d],a)}return c(e),t.forEach(c),v_(n,a)}function w3(n,e){const t=[];if(typeof n!="object"||typeof n.icons!="object")return t;n.not_found instanceof Array&&n.not_found.forEach(i=>{e(i,null),t.push(i)});const r=lM(n);for(const i in r){const a=r[i];a&&(e(i,uM(n,i,a)),t.push(i))}return t}const dM={provider:"",aliases:{},not_found:{},...b3};function rv(n,e){for(const t in e)if(t in n&&typeof n[t]!=typeof e[t])return!1;return!0}function _3(n){if(typeof n!="object"||n===null)return null;const e=n;if(typeof e.prefix!="string"||!n.icons||typeof n.icons!="object"||!rv(n,dM))return null;const t=e.icons;for(const i in t){const a=t[i];if(!i||typeof a.body!="string"||!rv(a,c1))return null}const r=e.aliases||Object.create(null);for(const i in r){const a=r[i],c=a.parent;if(!i||typeof c!="string"||!t[c]&&!r[c]||!rv(a,c1))return null}return e}const y_=Object.create(null);function hM(n,e){return{provider:n,prefix:e,icons:Object.create(null),missing:new Set}}function Th(n,e){const t=y_[n]||(y_[n]=Object.create(null));return t[e]||(t[e]=hM(n,e))}function N3(n,e){return _3(e)?w3(e,(t,r)=>{r?n.icons[t]=r:n.missing.add(t)}):[]}function fM(n,e,t){try{if(typeof t.body=="string")return n.icons[e]={...t},!0}catch{}return!1}const A3=/^[a-z0-9]+(-[a-z0-9]+)*$/,v0=(n,e,t,r="")=>{const i=n.split(":");if(n.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const d=i.pop(),h=i.pop(),f={provider:i.length>0?i[0]:r,prefix:h,name:d};return e&&!Jp(f)?null:f}const a=i[0],c=a.split("-");if(c.length>1){const d={provider:r,prefix:c.shift(),name:c.join("-")};return e&&!Jp(d)?null:d}if(t&&r===""){const d={provider:r,prefix:"",name:a};return e&&!Jp(d,t)?null:d}return null},Jp=(n,e)=>n?!!((e&&n.prefix===""||n.prefix)&&n.name):!1;let om=!1;function S3(n){return typeof n=="boolean"&&(om=n),om}function b_(n){const e=typeof n=="string"?v0(n,!0,om):n;if(e){const t=Th(e.provider,e.prefix),r=e.name;return t.icons[r]||(t.missing.has(r)?null:void 0)}}function mM(n,e){const t=v0(n,!0,om);if(!t)return!1;const r=Th(t.provider,t.prefix);return e?fM(r,t.name,e):(r.missing.add(t.name),!0)}function pM(n,e){if(typeof n!="object")return!1;if(typeof e!="string"&&(e=n.provider||""),om&&!e&&!n.prefix){let i=!1;return _3(n)&&(n.prefix="",w3(n,(a,c)=>{mM(a,c)&&(i=!0)})),i}const t=n.prefix;if(!Jp({prefix:t,name:"a"}))return!1;const r=Th(e,t);return!!N3(r,n)}const j3=Object.freeze({width:null,height:null}),E3=Object.freeze({...j3,...kg}),gM=/(-?[0-9.]*[0-9]+[0-9.]*)/g,xM=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function w_(n,e,t){if(e===1)return n;if(t=t||100,typeof n=="number")return Math.ceil(n*e*t)/t;if(typeof n!="string")return n;const r=n.split(gM);if(r===null||!r.length)return n;const i=[];let a=r.shift(),c=xM.test(a);for(;;){if(c){const d=parseFloat(a);isNaN(d)?i.push(a):i.push(Math.ceil(d*e*t)/t)}else i.push(a);if(a=r.shift(),a===void 0)return i.join("");c=!c}}function vM(n,e="defs"){let t="";const r=n.indexOf("<"+e);for(;r>=0;){const i=n.indexOf(">",r),a=n.indexOf("</"+e);if(i===-1||a===-1)break;const c=n.indexOf(">",a);if(c===-1)break;t+=n.slice(i+1,a).trim(),n=n.slice(0,r).trim()+n.slice(c+1)}return{defs:t,content:n}}function yM(n,e){return n?"<defs>"+n+"</defs>"+e:e}function bM(n,e,t){const r=vM(n);return yM(r.defs,e+r.content+t)}const wM=n=>n==="unset"||n==="undefined"||n==="none";function _M(n,e){const t={...Vy,...n},r={...E3,...e},i={left:t.left,top:t.top,width:t.width,height:t.height};let a=t.body;[t,r].forEach(I=>{const L=[],j=I.hFlip,U=I.vFlip;let z=I.rotate;j?U?z+=2:(L.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),L.push("scale(-1 1)"),i.top=i.left=0):U&&(L.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),L.push("scale(1 -1)"),i.top=i.left=0);let B;switch(z<0&&(z-=Math.floor(z/4)*4),z=z%4,z){case 1:B=i.height/2+i.top,L.unshift("rotate(90 "+B.toString()+" "+B.toString()+")");break;case 2:L.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:B=i.width/2+i.left,L.unshift("rotate(-90 "+B.toString()+" "+B.toString()+")");break}z%2===1&&(i.left!==i.top&&(B=i.left,i.left=i.top,i.top=B),i.width!==i.height&&(B=i.width,i.width=i.height,i.height=B)),L.length&&(a=bM(a,'<g transform="'+L.join(" ")+'">',"</g>"))});const c=r.width,d=r.height,h=i.width,f=i.height;let p,v;c===null?(v=d===null?"1em":d==="auto"?f:d,p=w_(v,h/f)):(p=c==="auto"?h:c,v=d===null?w_(p,f/h):d==="auto"?f:d);const _={},b=(I,L)=>{wM(L)||(_[I]=L.toString())};b("width",p),b("height",v);const T=[i.left,i.top,h,f];return _.viewBox=T.join(" "),{attributes:_,viewBox:T,body:a}}const NM=/\sid="(\S+)"/g,AM="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let SM=0;function jM(n,e=AM){const t=[];let r;for(;r=NM.exec(n);)t.push(r[1]);if(!t.length)return n;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(a=>{const c=typeof e=="function"?e(a):e+(SM++).toString(),d=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n=n.replace(new RegExp('([#;"])('+d+')([")]|\\.[a-z])',"g"),"$1"+c+i+"$3")}),n=n.replace(new RegExp(i,"g"),""),n}const u1=Object.create(null);function EM(n,e){u1[n]=e}function d1(n){return u1[n]||u1[""]}function By(n){let e;if(typeof n.resources=="string")e=[n.resources];else if(e=n.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:n.path||"/",maxURL:n.maxURL||500,rotate:n.rotate||750,timeout:n.timeout||5e3,random:n.random===!0,index:n.index||0,dataAfterTimeout:n.dataAfterTimeout!==!1}}const Uy=Object.create(null),Ef=["https://api.simplesvg.com","https://api.unisvg.com"],Zp=[];for(;Ef.length>0;)Ef.length===1||Math.random()>.5?Zp.push(Ef.shift()):Zp.push(Ef.pop());Uy[""]=By({resources:["https://api.iconify.design"].concat(Zp)});function TM(n,e){const t=By(e);return t===null?!1:(Uy[n]=t,!0)}function zy(n){return Uy[n]}const CM=()=>{let n;try{if(n=fetch,typeof n=="function")return n}catch{}};let __=CM();function IM(n,e){const t=zy(n);if(!t)return 0;let r;if(!t.maxURL)r=0;else{let i=0;t.resources.forEach(c=>{i=Math.max(i,c.length)});const a=e+".json?icons=";r=t.maxURL-i-t.path.length-a.length}return r}function LM(n){return n===404}const RM=(n,e,t)=>{const r=[],i=IM(n,e),a="icons";let c={type:a,provider:n,prefix:e,icons:[]},d=0;return t.forEach((h,f)=>{d+=h.length+1,d>=i&&f>0&&(r.push(c),c={type:a,provider:n,prefix:e,icons:[]},d=h.length),c.icons.push(h)}),r.push(c),r};function kM(n){if(typeof n=="string"){const e=zy(n);if(e)return e.path}return"/"}const PM=(n,e,t)=>{if(!__){t("abort",424);return}let r=kM(e.provider);switch(e.type){case"icons":{const a=e.prefix,d=e.icons.join(","),h=new URLSearchParams({icons:d});r+=a+".json?"+h.toString();break}case"custom":{const a=e.uri;r+=a.slice(0,1)==="/"?a.slice(1):a;break}default:t("abort",400);return}let i=503;__(n+r).then(a=>{const c=a.status;if(c!==200){setTimeout(()=>{t(LM(c)?"abort":"next",c)});return}return i=501,a.json()}).then(a=>{if(typeof a!="object"||a===null){setTimeout(()=>{a===404?t("abort",a):t("next",i)});return}setTimeout(()=>{t("success",a)})}).catch(()=>{t("next",i)})},DM={prepare:RM,send:PM};function T3(n,e){n.forEach(t=>{const r=t.loaderCallbacks;r&&(t.loaderCallbacks=r.filter(i=>i.id!==e))})}function MM(n){n.pendingCallbacksFlag||(n.pendingCallbacksFlag=!0,setTimeout(()=>{n.pendingCallbacksFlag=!1;const e=n.loaderCallbacks?n.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const r=n.provider,i=n.prefix;e.forEach(a=>{const c=a.icons,d=c.pending.length;c.pending=c.pending.filter(h=>{if(h.prefix!==i)return!0;const f=h.name;if(n.icons[f])c.loaded.push({provider:r,prefix:i,name:f});else if(n.missing.has(f))c.missing.push({provider:r,prefix:i,name:f});else return t=!0,!0;return!1}),c.pending.length!==d&&(t||T3([n],a.id),a.callback(c.loaded.slice(0),c.missing.slice(0),c.pending.slice(0),a.abort))})}))}let OM=0;function FM(n,e,t){const r=OM++,i=T3.bind(null,t,r);if(!e.pending.length)return i;const a={id:r,icons:e,callback:n,abort:i};return t.forEach(c=>{(c.loaderCallbacks||(c.loaderCallbacks=[])).push(a)}),i}function qM(n){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);n.sort((i,a)=>i.provider!==a.provider?i.provider.localeCompare(a.provider):i.prefix!==a.prefix?i.prefix.localeCompare(a.prefix):i.name.localeCompare(a.name));let r={provider:"",prefix:"",name:""};return n.forEach(i=>{if(r.name===i.name&&r.prefix===i.prefix&&r.provider===i.provider)return;r=i;const a=i.provider,c=i.prefix,d=i.name,h=t[a]||(t[a]=Object.create(null)),f=h[c]||(h[c]=Th(a,c));let p;d in f.icons?p=e.loaded:c===""||f.missing.has(d)?p=e.missing:p=e.pending;const v={provider:a,prefix:c,name:d};p.push(v)}),e}function VM(n,e=!0,t=!1){const r=[];return n.forEach(i=>{const a=typeof i=="string"?v0(i,e,t):i;a&&r.push(a)}),r}const BM={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function UM(n,e,t,r){const i=n.resources.length,a=n.random?Math.floor(Math.random()*i):n.index;let c;if(n.random){let ne=n.resources.slice(0);for(c=[];ne.length>1;){const V=Math.floor(Math.random()*ne.length);c.push(ne[V]),ne=ne.slice(0,V).concat(ne.slice(V+1))}c=c.concat(ne)}else c=n.resources.slice(a).concat(n.resources.slice(0,a));const d=Date.now();let h="pending",f=0,p,v=null,_=[],b=[];typeof r=="function"&&b.push(r);function T(){v&&(clearTimeout(v),v=null)}function I(){h==="pending"&&(h="aborted"),T(),_.forEach(ne=>{ne.status==="pending"&&(ne.status="aborted")}),_=[]}function L(ne,V){V&&(b=[]),typeof ne=="function"&&b.push(ne)}function j(){return{startTime:d,payload:e,status:h,queriesSent:f,queriesPending:_.length,subscribe:L,abort:I}}function U(){h="failed",b.forEach(ne=>{ne(void 0,p)})}function z(){_.forEach(ne=>{ne.status==="pending"&&(ne.status="aborted")}),_=[]}function B(ne,V,D){const k=V!=="success";switch(_=_.filter($=>$!==ne),h){case"pending":break;case"failed":if(k||!n.dataAfterTimeout)return;break;default:return}if(V==="abort"){p=D,U();return}if(k){p=D,_.length||(c.length?re():U());return}if(T(),z(),!n.random){const $=n.resources.indexOf(ne.resource);$!==-1&&$!==n.index&&(n.index=$)}h="completed",b.forEach($=>{$(D)})}function re(){if(h!=="pending")return;T();const ne=c.shift();if(ne===void 0){if(_.length){v=setTimeout(()=>{T(),h==="pending"&&(z(),U())},n.timeout);return}U();return}const V={status:"pending",resource:ne,callback:(D,k)=>{B(V,D,k)}};_.push(V),f++,v=setTimeout(re,n.rotate),t(ne,e,V.callback)}return setTimeout(re),j}function C3(n){const e={...BM,...n};let t=[];function r(){t=t.filter(d=>d().status==="pending")}function i(d,h,f){const p=UM(e,d,h,(v,_)=>{r(),f&&f(v,_)});return t.push(p),p}function a(d){return t.find(h=>d(h))||null}return{query:i,find:a,setIndex:d=>{e.index=d},getIndex:()=>e.index,cleanup:r}}function N_(){}const iv=Object.create(null);function zM(n){if(!iv[n]){const e=zy(n);if(!e)return;const t=C3(e),r={config:e,redundancy:t};iv[n]=r}return iv[n]}function HM(n,e,t){let r,i;if(typeof n=="string"){const a=d1(n);if(!a)return t(void 0,424),N_;i=a.send;const c=zM(n);c&&(r=c.redundancy)}else{const a=By(n);if(a){r=C3(a);const c=n.resources?n.resources[0]:"",d=d1(c);d&&(i=d.send)}}return!r||!i?(t(void 0,424),N_):r.query(e,i,t)().abort}function A_(){}function $M(n){n.iconsLoaderFlag||(n.iconsLoaderFlag=!0,setTimeout(()=>{n.iconsLoaderFlag=!1,MM(n)}))}function GM(n){const e=[],t=[];return n.forEach(r=>{(r.match(A3)?e:t).push(r)}),{valid:e,invalid:t}}function Tf(n,e,t){function r(){const i=n.pendingIcons;e.forEach(a=>{i&&i.delete(a),n.icons[a]||n.missing.add(a)})}if(t&&typeof t=="object")try{if(!N3(n,t).length){r();return}}catch(i){console.error(i)}r(),$M(n)}function S_(n,e){n instanceof Promise?n.then(t=>{e(t)}).catch(()=>{e(null)}):e(n)}function WM(n,e){n.iconsToLoad?n.iconsToLoad=n.iconsToLoad.concat(e).sort():n.iconsToLoad=e,n.iconsQueueFlag||(n.iconsQueueFlag=!0,setTimeout(()=>{n.iconsQueueFlag=!1;const{provider:t,prefix:r}=n,i=n.iconsToLoad;if(delete n.iconsToLoad,!i||!i.length)return;const a=n.loadIcon;if(n.loadIcons&&(i.length>1||!a)){S_(n.loadIcons(i,r,t),p=>{Tf(n,i,p)});return}if(a){i.forEach(p=>{const v=a(p,r,t);S_(v,_=>{const b=_?{prefix:r,icons:{[p]:_}}:null;Tf(n,[p],b)})});return}const{valid:c,invalid:d}=GM(i);if(d.length&&Tf(n,d,null),!c.length)return;const h=r.match(A3)?d1(t):null;if(!h){Tf(n,c,null);return}h.prepare(t,r,c).forEach(p=>{HM(t,p,v=>{Tf(n,p.icons,v)})})}))}const YM=(n,e)=>{const t=VM(n,!0,S3()),r=qM(t);if(!r.pending.length){let h=!0;return e&&setTimeout(()=>{h&&e(r.loaded,r.missing,r.pending,A_)}),()=>{h=!1}}const i=Object.create(null),a=[];let c,d;return r.pending.forEach(h=>{const{provider:f,prefix:p}=h;if(p===d&&f===c)return;c=f,d=p,a.push(Th(f,p));const v=i[f]||(i[f]=Object.create(null));v[p]||(v[p]=[])}),r.pending.forEach(h=>{const{provider:f,prefix:p,name:v}=h,_=Th(f,p),b=_.pendingIcons||(_.pendingIcons=new Set);b.has(v)||(b.add(v),i[f][p].push(v))}),a.forEach(h=>{const f=i[h.provider][h.prefix];f.length&&WM(h,f)}),e?FM(e,r,a):A_};function KM(n,e){const t={...n};for(const r in e){const i=e[r],a=typeof i;r in j3?(i===null||i&&(a==="string"||a==="number"))&&(t[r]=i):a===typeof t[r]&&(t[r]=r==="rotate"?i%4:i)}return t}const QM=/[\s,]+/;function XM(n,e){e.split(QM).forEach(t=>{switch(t.trim()){case"horizontal":n.hFlip=!0;break;case"vertical":n.vFlip=!0;break}})}function JM(n,e=0){const t=n.replace(/^-?[0-9.]*/,"");function r(i){for(;i<0;)i+=4;return i%4}if(t===""){const i=parseInt(n);return isNaN(i)?0:r(i)}else if(t!==n){let i=0;switch(t){case"%":i=25;break;case"deg":i=90}if(i){let a=parseFloat(n.slice(0,n.length-t.length));return isNaN(a)?0:(a=a/i,a%1===0?r(a):0)}}return e}function ZM(n,e){let t=n.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)t+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+n+"</svg>"}function eO(n){return n.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function tO(n){return"data:image/svg+xml,"+eO(n)}function nO(n){return'url("'+tO(n)+'")'}let $f;function rO(){try{$f=window.trustedTypes.createPolicy("iconify",{createHTML:n=>n})}catch{$f=null}}function iO(n){return $f===void 0&&rO(),$f?$f.createHTML(n):n}const I3={...E3,inline:!1},sO={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},aO={display:"inline-block"},h1={backgroundColor:"currentColor"},L3={backgroundColor:"transparent"},j_={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},E_={WebkitMask:h1,mask:h1,background:L3};for(const n in E_){const e=E_[n];for(const t in j_)e[n+t]=j_[t]}const oO={...I3,inline:!0};function T_(n){return n+(n.match(/^[-0-9.]+$/)?"px":"")}const lO=(n,e,t)=>{const r=e.inline?oO:I3,i=KM(r,e),a=e.mode||"svg",c={},d=e.style||{},h={...a==="svg"?sO:{}};if(t){const L=v0(t,!1,!0);if(L){const j=["iconify"],U=["provider","prefix"];for(const z of U)L[z]&&j.push("iconify--"+L[z]);h.className=j.join(" ")}}for(let L in e){const j=e[L];if(j!==void 0)switch(L){case"icon":case"style":case"children":case"onLoad":case"mode":case"ssr":case"fallback":break;case"_ref":h.ref=j;break;case"className":h[L]=(h[L]?h[L]+" ":"")+j;break;case"inline":case"hFlip":case"vFlip":i[L]=j===!0||j==="true"||j===1;break;case"flip":typeof j=="string"&&XM(i,j);break;case"color":c.color=j;break;case"rotate":typeof j=="string"?i[L]=JM(j):typeof j=="number"&&(i[L]=j);break;case"ariaHidden":case"aria-hidden":j!==!0&&j!=="true"&&delete h["aria-hidden"];break;default:r[L]===void 0&&(h[L]=j)}}const f=_M(n,i),p=f.attributes;if(i.inline&&(c.verticalAlign="-0.125em"),a==="svg"){h.style={...c,...d},Object.assign(h,p);let L=0,j=e.id;return typeof j=="string"&&(j=j.replace(/-/g,"_")),h.dangerouslySetInnerHTML={__html:iO(jM(f.body,j?()=>j+"ID"+L++:"iconifyReact"))},he.createElement("svg",h)}const{body:v,width:_,height:b}=n,T=a==="mask"||(a==="bg"?!1:v.indexOf("currentColor")!==-1),I=ZM(v,{...p,width:_+"",height:b+""});return h.style={...c,"--svg":nO(I),width:T_(p.width),height:T_(p.height),...aO,...T?h1:L3,...d},he.createElement("span",h)};S3(!0);EM("",DM);if(typeof document<"u"&&typeof window<"u"){const n=window;if(n.IconifyPreload!==void 0){const e=n.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!pM(r))&&console.error(t)}catch{console.error(t)}})}if(n.IconifyProviders!==void 0){const e=n.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const r="IconifyProviders["+t+"] is invalid.";try{const i=e[t];if(typeof i!="object"||!i||i.resources===void 0)continue;TM(t,i)||console.error(r)}catch{console.error(r)}}}}function R3(n){const[e,t]=he.useState(!!n.ssr),[r,i]=he.useState({});function a(b){if(b){const T=n.icon;if(typeof T=="object")return{name:"",data:T};const I=b_(T);if(I)return{name:T,data:I}}return{name:""}}const[c,d]=he.useState(a(!!n.ssr));function h(){const b=r.callback;b&&(b(),i({}))}function f(b){if(JSON.stringify(c)!==JSON.stringify(b))return h(),d(b),!0}function p(){var b;const T=n.icon;if(typeof T=="object"){f({name:"",data:T});return}const I=b_(T);if(f({name:T,data:I}))if(I===void 0){const L=YM([T],p);i({callback:L})}else I&&((b=n.onLoad)===null||b===void 0||b.call(n,T))}he.useEffect(()=>(t(!0),h),[]),he.useEffect(()=>{e&&p()},[n.icon,e]);const{name:v,data:_}=c;return _?lO({...Vy,..._},n,v):n.children?n.children:n.fallback?n.fallback:he.createElement("span",{})}const de=he.forwardRef((n,e)=>R3({...n,_ref:e}));he.forwardRef((n,e)=>R3({inline:!0,...n,_ref:e}));const Zu="/assets/logo-DFYokJ1h.png",cO=[{name:"Programme Production",href:"/production",roles:["admin","gestionnaire"]},{name:"Vue Boulanger",href:"/boulanger",roles:["admin","boulanger"]},{name:"Livraisons",href:"/livraison",roles:["admin","livreur"]},{name:"Retours Clients",href:"/retours",roles:["admin","livreur"]},{name:"Boutique",href:"/boutique",roles:["admin","vendeuse"]},{name:"Facturation",href:"/facturation",roles:["admin","gestionnaire"]},{name:"Stocks",href:"/stocks",roles:["admin","gestionnaire"]},{name:"Rapport Journalier",href:"/rapport",roles:["admin","gestionnaire"]},{name:"Gestion Produits",href:"/admin/produits",roles:["admin"]},{name:"Gestion Clients",href:"/admin/clients",roles:["admin"]},{name:"Gestion Livreurs",href:"/admin/livreurs",roles:["admin"]},{name:"Gestion Utilisateurs",href:"/admin/users",roles:["admin"]}],uO={"Programme Production":"mdi:clipboard-text","Vue Boulanger":"ph:chef-hat-bold",Livraisons:"lucide:truck","Retours Clients":"mdi:keyboard-return",Boutique:"mdi:store",Facturation:"mdi:file-document",Stocks:"mdi:warehouse","Rapport Journalier":"mdi:chart-bar","Gestion Produits":"mdi:bread-slice","Gestion Clients":"mdi:account-group","Gestion Livreurs":"mdi:motorbike","Gestion Utilisateurs":"mdi:account-key"},dO=()=>{const{user:n}=Tm(),e=cO.filter(t=>!n||t.roles.includes(n.role));return l.jsxs("div",{className:"fixed inset-y-0 left-0 w-64 bg-white border-r border-gray-200 z-30",children:[l.jsx("div",{className:"flex justify-center h-28 px-6 border-b border-gray-100 py-4",children:l.jsx("div",{className:"w-40 h-24  rounded-lg flex items-center justify-center text-white text-lg font-bold overflow-hidden",children:l.jsx("img",{src:Zu,alt:"Logo Boulangerie",className:"w-full h-full object-contain"})})}),l.jsx("nav",{className:"mt-6 px-3",children:l.jsx("div",{className:"space-y-1",children:e.map(t=>l.jsxs(w4,{to:t.href,className:({isActive:r})=>`group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-150 ${r?"bg-orange-50 text-orange-700 border-l-4 border-orange-500":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[l.jsx(de,{icon:uO[t.name],className:"mr-3 text-lg"}),t.name]},t.name))})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-100",children:l.jsx("div",{className:"text-xs text-gray-500 text-center",children:l.jsx("p",{children:"Version 1.0.0"})})})]})},hO=({children:n})=>l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(dO,{}),l.jsxs("div",{className:"ml-64",children:[l.jsx(oM,{}),l.jsx("main",{className:"p-6",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:n})})]})]}),k3=()=>{const[n,e]=he.useState(""),[t,r]=he.useState(""),[i,a]=he.useState(!1),{login:c,isLoading:d}=Tm(),h=async f=>{f.preventDefault();try{await c(n,t)}catch(p){console.error("Erreur de connexion:",p)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-linear-to-br from-orange-50 via-amber-50 to-yellow-50 py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto w-50 h-50 flex items-center justify-center transform hover:scale-105 transition-transform -mb-8",children:l.jsx("img",{src:Zu,alt:"Logo Boulangerie",className:"w-full h-full object-contain"})}),l.jsx("div",{className:"w-32 h-1 bg-linear-to-r from-amber-600 to-orange-600 mx-auto rounded-full"})]}),l.jsxs("div",{className:"bg-white shadow-2xl rounded-3xl p-8 border border-gray-100 backdrop-blur-sm",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center gap-3 justify-center mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-linear-to-r from-amber-600 to-orange-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-circle",className:"text-white text-lg"})}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Connexion"})]}),l.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Accdez  votre espace de gestion"})]}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse email"}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(de,{icon:"mdi:email",className:"h-5 w-5 text-gray-400"})}),l.jsx("input",{type:"email",value:n,onChange:f=>e(f.target.value),required:!0,autoComplete:"email",placeholder:"votre@email.com",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all bg-gray-50 focus:bg-white"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(de,{icon:"mdi:lock",className:"h-5 w-5 text-gray-400"})}),l.jsx("input",{type:i?"text":"password",value:t,onChange:f=>r(f.target.value),required:!0,autoComplete:"current-password",placeholder:"",className:"w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all bg-gray-50 focus:bg-white"}),l.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer text-gray-400 hover:text-gray-600",children:l.jsx(de,{icon:i?"mdi:eye-off":"mdi:eye",className:"h-5 w-5"})})]})]}),l.jsx("button",{type:"submit",disabled:d,className:"w-full bg-linear-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transform transition-all hover:scale-105 focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:l.jsx("div",{className:"flex items-center justify-center gap-2",children:d?l.jsxs(l.Fragment,{children:[l.jsx(de,{icon:"mdi:loading",className:"text-lg animate-spin"}),l.jsx("span",{children:"Connexion..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(de,{icon:"mdi:login",className:"text-lg"}),l.jsx("span",{children:"Se connecter"})]})})})]})]})]})})};const fO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mO=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),C_=n=>{const e=mO(n);return e.charAt(0).toUpperCase()+e.slice(1)},P3=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),pO=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var gO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const xO=he.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:c,...d},h)=>he.createElement("svg",{ref:h,...gO,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:P3("lucide",i),...!a&&!pO(d)&&{"aria-hidden":"true"},...d},[...c.map(([f,p])=>he.createElement(f,p)),...Array.isArray(a)?a:[a]]));const di=(n,e)=>{const t=he.forwardRef(({className:r,...i},a)=>he.createElement(xO,{ref:a,iconNode:e,className:P3(`lucide-${fO(C_(n))}`,`lucide-${n}`,r),...i}));return t.displayName=C_(n),t};const vO=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],yO=di("arrow-down-left",vO);const bO=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],wO=di("arrow-right-left",bO);const _O=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],NO=di("arrow-up-right",_O);const AO=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],SO=di("ban",AO);const jO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],EO=di("circle-alert",jO);const TO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],CO=di("file-text",TO);const IO=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],LO=di("history",IO);const RO=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],kO=di("map-pin",RO);const PO=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],D3=di("package",PO);const DO=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],M3=di("pen",DO);const MO=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],OO=di("phone",MO);const FO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hy=di("plus",FO);const qO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],VO=di("search",qO);const BO=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],UO=di("tag",BO);const zO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],$y=di("trash-2",zO);const HO=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],$O=di("trending-down",HO);const GO=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],WO=di("trending-up",GO);const YO=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],KO=di("triangle-alert",YO);const QO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],I_=di("user",QO);const XO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],JO=di("users",XO);const ZO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],e9=di("x",ZO),Nl=({isOpen:n,onClose:e,title:t,children:r,size:i="md",inline:a=!1,position:c="center"})=>{if(he.useEffect(()=>{const h=f=>{f.key==="Escape"&&e()};return n&&document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h),document.body.style.overflow="unset"}},[n,e]),!n)return null;const d={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return c==="relative"?l.jsxs("div",{className:"absolute top-full right-0 mt-3 w-96 bg-gradient-to-br from-white to-gray-50 rounded-xl border border-gray-200 shadow-xl hover:shadow-2xl transition-all duration-300 z-50 animate-in slide-in-from-top-2 fade-in",children:[l.jsx("div",{className:"absolute -top-2 right-6 w-4 h-4 bg-white border-l border-t border-gray-200 transform rotate-45"}),l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white rounded-t-xl",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full"}),t]}),l.jsx("button",{onClick:e,className:"rounded-lg p-2 hover:bg-gray-100 hover:scale-105 transition-all duration-200 group",title:"Fermer",children:l.jsx(de,{icon:"mdi:close",className:"text-gray-500 group-hover:text-gray-700 text-xl transition-colors"})})]}),l.jsx("div",{className:"px-6 py-5",children:r})]}):a?l.jsxs("div",{className:"w-full bg-white rounded-xl border border-gray-200 shadow-lg mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),l.jsx("button",{onClick:e,className:"rounded-md p-1 hover:bg-gray-100 transition-colors",children:l.jsx(de,{icon:"mdi:close",className:"text-gray-500 text-xl"})})]}),l.jsx("div",{className:"px-6 py-4",children:r})]}):l.jsxs("div",{className:"fixed inset-0 z-40 flex items-center justify-center",children:[l.jsx("div",{className:"fixed inset-0 bg-transparent"}),l.jsxs("div",{className:`relative w-full ${d[i]} mx-4 bg-gray-100 rounded-xl shadow-2xl max-h-[80vh] overflow-y-auto border border-gray-200 animate-in zoom-in-95 fade-in duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white rounded-t-xl",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full"}),t]}),l.jsx("button",{onClick:e,className:"rounded-lg p-2 hover:bg-gray-100 hover:scale-105 transition-all duration-200 group",children:l.jsx(de,{icon:"mdi:close",className:"text-gray-500 group-hover:text-gray-700 text-xl transition-colors"})})]}),l.jsx("div",{className:"px-6 py-5",children:r})]})]})},Cl=({isOpen:n,onClose:e,onConfirm:t,title:r,message:i,confirmText:a="Confirmer",cancelText:c="Annuler",type:d="info",inline:h=!1,position:f="center"})=>{const p=()=>{t(),e()},_=(()=>{switch(d){case"warning":return{icon:"mdi:alert-circle",iconColor:"text-amber-600",confirmBg:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700"};case"danger":return{icon:"mdi:alert-circle",iconColor:"text-red-600",confirmBg:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700"};case"success":return{icon:"mdi:check-circle",iconColor:"text-green-600",confirmBg:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"};default:return{icon:"mdi:help-circle",iconColor:"text-purple-600",confirmBg:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700"}}})();return l.jsx(Nl,{isOpen:n,onClose:e,title:r,size:"sm",inline:h,position:f,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(de,{icon:_.icon,className:`text-3xl ${_.iconColor}`})}),l.jsx("div",{className:"flex-1",children:l.jsx("div",{className:"text-gray-700",children:i})})]}),l.jsxs("div",{className:"flex gap-3 pt-6",children:[l.jsx("button",{onClick:e,className:"flex-1 px-5 py-3 text-sm font-semibold text-gray-700 bg-white hover:bg-gray-50 border border-gray-300 rounded-lg hover:shadow-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:c}),l.jsx("button",{onClick:p,className:`flex-1 px-5 py-3 text-sm font-bold text-white ${_.confirmBg} border border-transparent rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2`,children:a})]})]})})},f1=({children:n,onConfirm:e,title:t,message:r,confirmText:i="Confirmer",cancelText:a="Annuler",type:c="info",className:d="",disabled:h=!1,...f})=>{const[p,v]=he.useState(!1),_=()=>{v(!0)},b=async()=>{await e(),v(!1)},T=()=>{v(!1)};return l.jsxs("div",{className:"relative",children:[l.jsx("button",{...f,className:d,onClick:_,disabled:h,children:n}),l.jsx(Cl,{isOpen:p,onClose:T,onConfirm:b,title:t,message:r,confirmText:i,cancelText:a,type:c,position:"relative"})]})},t9=({size:n="md",message:e="Chargement...",fullScreen:t=!1,className:r=""})=>{const i={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"},a={sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"},c=()=>l.jsxs("div",{className:`flex flex-col items-center justify-center gap-3 ${r}`,children:[l.jsx("div",{className:"animate-spin",children:l.jsx(de,{icon:"mdi:loading",className:`${i[n]} text-orange-600`})}),e&&l.jsx("p",{className:`${a[n]} text-gray-600 font-medium`,children:e})]});return t?l.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-80 backdrop-blur-sm z-50 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 shadow-lg border",children:l.jsx(c,{})})}):l.jsx(c,{})},n9=()=>l.jsx(de,{icon:"mdi:loading",className:"animate-spin h-4 w-4"}),Gy=({message:n="Chargement des donnes..."})=>l.jsx("div",{className:"text-center py-12",children:l.jsx(t9,{size:"md",message:n})}),zr=({children:n,variant:e="primary",size:t="md",isLoading:r=!1,className:i="",disabled:a,...c})=>{const d="inline-flex items-center justify-center font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",h={primary:"bg-orange-500 hover:bg-orange-600 text-white focus:ring-orange-500 shadow-sm",secondary:"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-500 shadow-sm",danger:"bg-red-500 hover:bg-red-600 text-white focus:ring-red-500 shadow-sm",outline:"border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-orange-500"},f={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},p=`${d} ${h[e]} ${f[t]} ${i}`;return l.jsxs("button",{className:p,disabled:a||r,...c,children:[r&&l.jsx("span",{className:"-ml-1 mr-3",children:l.jsx(n9,{})}),n]})},mr=({label:n,error:e,helperText:t,className:r="",id:i,type:a="text",...c})=>{const d=i||`input-${Math.random().toString(36).substr(2,9)}`,[h,f]=he.useState(!1),p=a==="password",v=p?h?"text":"password":a;return l.jsxs("div",{className:"w-full",children:[n&&l.jsx("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{id:d,type:v,className:`
            block w-full rounded-lg border border-gray-300 px-3 py-2
            focus:border-orange-500 focus:ring-orange-500 focus:ring-1 sm:text-sm
            transition-colors
            ${e?"border-red-300 focus:border-red-500 focus:ring-red-500":""}
            ${r}
            ${p?"pr-10":""}
          `,...c}),p&&l.jsx("button",{type:"button",onClick:()=>f(!h),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none",tabIndex:-1,children:l.jsx(de,{icon:h?"mdi:eye-off":"mdi:eye",className:"h-5 w-5"})})]}),e&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:e}),t&&!e&&l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t})]})},Ch=({label:n,error:e,helperText:t,options:r,className:i="",id:a,...c})=>{const d=a||`select-${Math.random().toString(36).substr(2,9)}`;return l.jsxs("div",{className:"w-full",children:[n&&l.jsx("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),l.jsx("select",{id:d,className:`
          block w-full rounded-lg border border-gray-300 px-3 py-2
          focus:border-orange-500 focus:ring-orange-500 focus:ring-1 sm:text-sm
          transition-colors bg-white
          ${e?"border-red-300 focus:border-red-500 focus:ring-red-500":""}
          ${i}
        `,...c,children:r.map(h=>l.jsx("option",{value:h.value,disabled:h.disabled,children:h.label},h.value))}),e&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:e}),t&&!e&&l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t})]})},r9=({produits:n,clients:e,commande:t,mode:r="create",onSave:i,onCancel:a,isLoading:c=!1,formulaireState:d,onUpdateFormulaire:h})=>{const[f,p]=he.useState(d?.selectedClientId||""),[v,_]=he.useState(d?.dateLivraison||new Date().toISOString().split("T")[0]),[b,T]=he.useState(d?.produitsCommandes||[]),[I,L]=he.useState(d?.utiliserPrixClient??!0);he.useEffect(()=>{h&&h({selectedClientId:f,dateLivraison:v,produitsCommandes:b,utiliserPrixClient:I})},[f,v,b,I,h]),he.useEffect(()=>{if(t){p(t.clientId);try{const S=t.dateLivraison instanceof Date?t.dateLivraison:new Date(t.dateLivraison);isNaN(S.getTime())?_(new Date().toISOString().split("T")[0]):_(S.toISOString().split("T")[0])}catch(S){console.error("Erreur de conversion de date:",S),_(new Date().toISOString().split("T")[0])}T(r==="edit"||r==="editSpecific"?t.produits.map(S=>({produitId:S.produitId,quantiteCommandee:S.quantiteCommandee,prixUnitaire:S.prixUnitaire,repartitionCars:S.repartitionCars||{car1_matin:"",car2_matin:"",car_soir:""}})):[])}else p(""),_(d?.dateLivraison||new Date().toISOString().split("T")[0]),T([])},[t]);const{sauvegarderCommandeType:j}=_l();he.useEffect(()=>{if(f&&r==="create"&&b.length===0){const S=e.find(R=>R.id===f);S?.commandeType&&S.commandeType.length>0&&(T(S.commandeType.map(R=>{let F=R.prixUnitaire;if(!F){const be=n.find(Q=>Q.id===R.produitId);F=S.typeClient==="boutique"?be?.prixBoutique:be?.prixClient}let oe=R.repartitionCars;return!oe&&R.quantiteCommandee>0&&(oe={car1_matin:R.quantiteCommandee,car2_matin:"",car_soir:""}),{...R,prixUnitaire:F||0,repartitionCars:oe||{car1_matin:"",car2_matin:"",car_soir:""}}})),Pt.success(" Commande type charge !"))}},[f]);const U=async()=>{if(!(!f||b.length===0))try{const S=b.map(R=>({produitId:R.produitId,quantiteCommandee:R.quantiteCommandee,repartitionCars:{car1_matin:Number(R.repartitionCars?.car1_matin)||0,car2_matin:Number(R.repartitionCars?.car2_matin)||0,car_soir:Number(R.repartitionCars?.car_soir)||0}}));await j(f,S),Pt.success(" Commande type sauvegarde pour ce client !")}catch{Pt.error("Erreur lors de la sauvegarde de la commande type")}};he.useEffect(()=>{const S=b.map(R=>{const F=n.find(oe=>oe.id===R.produitId);if(F){const oe=I?F.prixClient:F.prixBoutique;return{...R,prixUnitaire:oe}}return R});T(S)},[I,n]);const z=[{value:"",label:"Slectionnez un client"},...e.map(S=>({value:S.id,label:S.nom}))],B=[{value:"",label:"Slectionnez un produit"},...n.filter(S=>S.active).map(S=>{const R=I?S.prixClient:S.prixBoutique;return{value:S.id,label:`${S.nom} (${R?.toLocaleString("fr-FR")} FCFA)`}})],re=()=>{T([...b,{produitId:"",quantiteCommandee:0,repartitionCars:{car1_matin:"",car2_matin:"",car_soir:""}}])},ne=S=>{T(b.filter((R,F)=>F!==S))},V=(S,R,F)=>{const oe=[...b];if(oe[S]={...oe[S],[R]:F},R==="produitId"){const be=n.find(Q=>Q.id===F);if(be){const Q=I?be.prixClient:be.prixBoutique;oe[S].prixUnitaire=Q}}if(R==="repartitionCars"){const be=F,Q=(Number(be?.car1_matin)||0)+(Number(be?.car2_matin)||0)+(Number(be?.car_soir)||0);oe[S].quantiteCommandee=Q}T(oe)},D=(S,R,F)=>{const oe=[...b],Q={...oe[S].repartitionCars||{car1_matin:"",car2_matin:"",car_soir:""},[R]:F},ae=(Number(Q.car1_matin)||0)+(Number(Q.car2_matin)||0)+(Number(Q.car_soir)||0);oe[S]={...oe[S],repartitionCars:Q,quantiteCommandee:ae},T(oe)},k=S=>{if(S.preventDefault(),!f||b.length===0){alert("Veuillez slectionner un client et au moins un produit");return}const R=b.filter(be=>{const Q=(Number(be.repartitionCars?.car1_matin)||0)+(Number(be.repartitionCars?.car2_matin)||0)+(Number(be.repartitionCars?.car_soir)||0);return be.produitId&&Q>0});if(R.length===0){alert("Veuillez saisir des quantits valides");return}const F=R.map(be=>{let Q=be.prixUnitaire;if(!Q){const ae=n.find(je=>je.id===be.produitId);Q=e.find(je=>je.id===f)?.typeClient==="boutique"?ae?.prixBoutique:ae?.prixClient}return{...be,prixUnitaire:Q||0,repartitionCars:{car1_matin:Number(be.repartitionCars?.car1_matin)||0,car2_matin:Number(be.repartitionCars?.car2_matin)||0,car_soir:Number(be.repartitionCars?.car_soir)||0}}}),oe={clientId:f,dateLivraison:new Date(v),dateCommande:new Date,statut:"prevue",produits:F};i(oe),p(""),_(new Date().toISOString().split("T")[0]),T([])},$=()=>b.reduce((S,R)=>{const F=R.prixUnitaire||n.find(oe=>oe.id===R.produitId)?.prixUnitaire||0;return S+F*(R.quantiteCommandee||0)},0);return l.jsxs("div",{children:[l.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:l.jsx("p",{className:"text-gray-700 text-sm",children:r==="addProducts"?"Ajoutez des produits  la commande existante. Les quantits seront fusionnes avec les produits dj commands.":r==="edit"?"Modifiez les dtails de la commande. Cette action remplacera tous les produits actuels.":r==="editSpecific"?"Modifiez les dtails de ce produit spcifique dans la commande.":"Crez une nouvelle commande pour le client slectionn."})}),r==="addProducts"&&t&&l.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[l.jsxs("h4",{className:"text-sm font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:information"}),"Produits actuellement commands"]}),l.jsx("div",{className:"grid gap-2",children:t.produits.map((S,R)=>{const F=n.find(oe=>oe.id===S.produitId);return l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-blue-700",children:F?.nom||"Produit inconnu"}),l.jsxs("span",{className:"font-medium text-blue-800",children:["x",S.quantiteCommandee]})]},R)})})]}),r==="editSpecific"&&t&&l.jsxs("div",{className:"mb-6 p-4 bg-amber-50 rounded-lg border border-amber-200",children:[l.jsxs("h4",{className:"text-sm font-semibold text-amber-800 mb-2 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:pencil-outline"}),"Mode dition produit spcifique"]}),l.jsx("p",{className:"text-sm text-amber-700",children:"Vous modifiez uniquement le produit slectionn. Les autres produits de la commande ne seront pas affects."})]}),l.jsxs("form",{onSubmit:k,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Ch,{label:"Client *",value:f,onChange:S=>p(S.target.value),options:z,required:!0,disabled:r==="addProducts"||r==="editSpecific"}),l.jsx(mr,{label:"Date de livraison *",type:"date",value:v,onChange:S=>_(S.target.value),required:!0,disabled:r==="addProducts"||r==="editSpecific"})]}),l.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[l.jsxs("label",{className:"flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:I,onChange:S=>L(S.target.checked),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),l.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Utiliser les prix client"})]}),l.jsx("span",{className:"text-sm text-gray-600",children:I?"(Prix rduits pour les clients)":"(Prix boutique standard)"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900",children:r==="addProducts"?"Nouveaux produits  ajouter":r==="editSpecific"?"Produit  modifier":"Produits commands"}),r==="edit"&&l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Vous pouvez modifier les quantits ou ajouter de nouveaux produits"}),r==="create"&&l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Une seule commande par client et par date - Les produits ultrieurs s'ajouteront  cette commande"})]}),l.jsx(zr,{type:"button",variant:"outline",onClick:re,className:"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-300",children:"+ Ajouter un produit"})]}),b.length===0?l.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-gray-500",children:"Aucun produit ajout"}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Cliquez sur "Ajouter un produit" pour commencer'})]}):l.jsxs("div",{className:"space-y-4",children:[b.map((S,R)=>{const F=n.find(be=>be.id===S.produitId),oe=(Number(S.repartitionCars?.car1_matin)||0)+(Number(S.repartitionCars?.car2_matin)||0)+(Number(S.repartitionCars?.car_soir)||0);return l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Produit"}),l.jsx(Ch,{options:B,value:S.produitId,onChange:be=>V(R,"produitId",be.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantit totale"}),l.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-sm font-bold text-gray-900",children:[oe||0," pice(s)"]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Calcul automatiquement"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Prix unitaire"}),l.jsx(mr,{type:"number",step:"1",placeholder:"Prix",value:S.prixUnitaire||F?.prixUnitaire||"",onChange:be=>V(R,"prixUnitaire",parseFloat(be.target.value)||0),className:"bg-gray-50"})]})]}),l.jsx("button",{type:"button",onClick:()=>ne(R),className:"ml-3 text-red-500 hover:text-red-700 text-sm",title:"Supprimer ce produit",children:""})]}),l.jsxs("div",{className:"border-t pt-3",children:[l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Rpartition par car de livraison"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Saisissez les quantits pour chaque car"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded p-2",children:[l.jsxs("label",{className:"block text-xs font-medium text-orange-700 mb-1 flex items-center gap-1",children:[l.jsx(de,{icon:"lucide:truck",className:"text-xs"}),"Car 1 - Matin"]}),l.jsx(mr,{type:"number",min:"0",value:S.repartitionCars?.car1_matin||"",onChange:be=>{D(R,"car1_matin",be.target.value)},className:"text-center font-bold text-orange-700"})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:[l.jsxs("label",{className:"block text-xs font-medium text-blue-700 mb-1 flex items-center gap-1",children:[l.jsx(de,{icon:"lucide:truck",className:"text-xs"}),"Car 2 - Matin"]}),l.jsx(mr,{type:"number",min:"0",value:S.repartitionCars?.car2_matin||"",onChange:be=>{D(R,"car2_matin",be.target.value)},className:"text-center font-bold text-blue-700"})]}),l.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded p-2",children:[l.jsxs("label",{className:"block text-xs font-medium text-indigo-700 mb-1 flex items-center gap-1",children:[l.jsx(de,{icon:"lucide:truck",className:"text-xs"}),"Car 1 - Soir"]}),l.jsx(mr,{type:"number",min:"0",value:S.repartitionCars?.car_soir||"",onChange:be=>{D(R,"car_soir",be.target.value)},className:"text-center font-bold text-indigo-700"})]})]})]}),l.jsx("div",{className:"flex justify-end mt-3 pt-2 border-t",children:l.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["Total: ",oe&&(S.prixUnitaire||F?.prixUnitaire)?`${(oe*(S.prixUnitaire||F?.prixUnitaire||0)).toLocaleString("fr-FR")} FCFA`:"0 FCFA"]})})]},R)}),l.jsx("div",{className:"flex justify-center py-3",children:l.jsxs(zr,{type:"button",variant:"outline",onClick:re,className:"bg-green-50 hover:bg-green-100 text-green-700 border-green-300 border-dashed",children:[l.jsx(de,{icon:"mdi:plus",className:"mr-2"}),"Ajouter un autre produit"]})}),l.jsx("div",{className:"pt-4 border-t border-gray-200",children:l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["Total: ",$().toLocaleString("fr-FR")," FCFA"]})})})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[l.jsx(zr,{type:"button",variant:"outline",onClick:a,children:"Annuler"}),l.jsx(zr,{type:"submit",isLoading:c,disabled:!f||b.length===0,children:r==="addProducts"?"Ajouter les produits":r==="edit"?"Modifier la commande":r==="editSpecific"?"Modifier le produit":"Crer la commande"})]}),r!=="editSpecific"&&b.length>0&&f&&l.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-blue-900",children:"Commande Type"}),l.jsx("p",{className:"text-xs text-blue-700",children:"Sauvegarder cette configuration pour ce client ?"})]}),l.jsxs("button",{type:"button",onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all shadow-sm hover:shadow-md text-sm font-medium",children:[l.jsx(de,{icon:"mdi:content-save-settings",className:"text-lg"}),"Dfinir comme commande type"]})]})})]})]})},od=({children:n,className:e="",title:t,subtitle:r})=>l.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow ${e}`,children:[(t||r)&&l.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t&&l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:t}),r&&l.jsx("div",{className:"mt-1 text-sm text-gray-600",children:r})]}),l.jsx("div",{className:"px-6 py-4",children:n})]}),i9=({commande:n,produitIndex:e,onSave:t,onCancel:r,isLoading:i=!1})=>{const a=n.produits[e],[c,d]=he.useState(a.prixUnitaire||0),[h,f]=he.useState({car1_matin:a.repartitionCars?.car1_matin||"",car2_matin:a.repartitionCars?.car2_matin||"",car_soir:a.repartitionCars?.car_soir||""}),p=(Number(h.car1_matin)||0)+(Number(h.car2_matin)||0)+(Number(h.car_soir)||0),v=p>0&&c>=0,_=T=>{if(T.preventDefault(),!v)return;const I={produitId:a.produitId,quantiteCommandee:p,prixUnitaire:c,repartitionCars:{car1_matin:Number(h.car1_matin)||0,car2_matin:Number(h.car2_matin)||0,car_soir:Number(h.car_soir)||0}};t(I)},b=(T,I)=>{f(L=>({...L,[T]:I}))};return l.jsx("div",{className:"space-y-6",children:l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantit totale (Calcule)"}),l.jsx("div",{className:"px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-500 font-medium select-none",children:p})]}),l.jsx(mr,{label:"Prix unitaire (F CFA) *",type:"number",min:"0",value:c,onChange:T=>d(Number(T.target.value)),required:!0})]}),l.jsxs(od,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-lg text-gray-600"}),l.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Rpartition par car de livraison"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsx(mr,{label:"Car 1 - Matin",type:"number",min:"0",value:h.car1_matin,onChange:T=>b("car1_matin",T.target.value)}),l.jsx(mr,{label:"Car 2 - Matin",type:"number",min:"0",value:h.car2_matin,onChange:T=>b("car2_matin",T.target.value)}),l.jsx(mr,{label:"Car - Soir",type:"number",min:"0",value:h.car_soir,onChange:T=>b("car_soir",T.target.value)})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total distribu:"}),l.jsx("span",{className:"text-sm font-bold text-green-600",children:p})]}),l.jsx("div",{className:"text-xs text-gray-500",children:"La quantit totale est mise  jour automatiquement."})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["Total: ",(p*c).toLocaleString("fr-FR")," F CFA"]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs(zr,{type:"button",variant:"outline",onClick:r,disabled:i,children:[l.jsx(de,{icon:"mdi:close",className:"text-lg mr-2"}),"Annuler"]}),l.jsxs(zr,{type:"submit",disabled:!v||i,isLoading:i,children:[l.jsx(de,{icon:"mdi:content-save",className:"text-lg mr-2"}),"Modifier le produit"]})]})]})]})})},s9=({produits:n,quantitesActuelles:e,quantiteEnEdition:t,onSave:r,onCancel:i})=>{const[a,c]=he.useState(""),[d,h]=he.useState(0),[f,p]=he.useState(0),[v,_]=he.useState(0);he.useEffect(()=>{if(t){c(t.produitId);const U=e.find(z=>z.produitId===t.produitId)||t;if(U.repartitionCars)h(U.repartitionCars.car1_matin||0),p(U.repartitionCars.car2_matin||0),_(U.repartitionCars.car_soir||0);else{const z=U.quantite;h(Math.ceil(z*.35)),p(Math.ceil(z*.35)),_(z-Math.ceil(z*.35)-Math.ceil(z*.35))}console.log(" Mise  jour des champs avec donnes:",U)}else c(""),h(0),p(0),_(0)},[t,e]);const b=n.filter(j=>!e.some(U=>U.produitId===j.id)||t&&j.id===t.produitId),T=[{value:"",label:"Slectionnez un produit"},...b.map(j=>({value:j.id,label:j.nom}))],I=d+f+v,L=j=>{if(j.preventDefault(),!a){alert("Veuillez slectionner un produit");return}const U=n.find(z=>z.id===a);if(U){const z={produitId:a,produit:U,quantite:I,repartitionCars:{car1_matin:d,car2_matin:f,car_soir:v}};console.log(" Sauvegarde quantit boutique:",z),r(z),c(""),h(0),p(0),_(0)}};return b.length===0?l.jsx(od,{title:"Ajouter quantit boutique",children:l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-gray-500",children:"Tous les produits ont dj t ajouts"}),l.jsx(zr,{variant:"outline",onClick:i,className:"mt-4",children:"Fermer"})]})}):l.jsx(od,{title:"Ajouter quantit boutique",subtitle:"Dfinissez les quantits  envoyer en boutique",children:l.jsxs("form",{onSubmit:L,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Ch,{label:"Produit *",value:a,onChange:j=>c(j.target.value),options:T,required:!0}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quantit Totale (Calcule)"}),l.jsx("div",{className:"px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl font-bold text-green-600",children:I}),l.jsx("span",{className:"text-sm text-gray-500",children:"pices"}),I===0&&l.jsx("span",{className:"text-xs text-gray-400 ml-2",children:" Saisissez les rpartitions ci-dessous"})]})})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Rpartition par Cars"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Dfinissez comment rpartir les quantits boutique entre les cars de livraison"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(de,{icon:"mdi:truck",className:"text-orange-600"}),l.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Car 1 - Matin"})]}),l.jsx(mr,{type:"number",min:"0",value:d||"",onChange:j=>h(parseInt(j.target.value)||0),placeholder:"Quantit Car 1",className:"text-center"})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(de,{icon:"mdi:truck-outline",className:"text-blue-600"}),l.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Car 2 - Matin"})]}),l.jsx(mr,{type:"number",min:"0",value:f||"",onChange:j=>p(parseInt(j.target.value)||0),placeholder:"Quantit Car 2",className:"text-center"})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(de,{icon:"mdi:truck-fast",className:"text-purple-600"}),l.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Car - Soir"})]}),l.jsx(mr,{type:"number",min:"0",value:v||"",onChange:j=>_(parseInt(j.target.value)||0),placeholder:"Quantit Car Soir",className:"text-center"})]})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[l.jsx(zr,{type:"button",variant:"outline",onClick:i,children:"Annuler"}),l.jsx(zr,{type:"submit",disabled:!a,children:"Ajouter"})]})]})})},Wy=()=>{const[n,e]=he.useState({isOpen:!1,title:"",message:""}),t=he.useCallback(a=>new Promise(c=>{e({...a,isOpen:!0,resolve:c})}),[]),r=he.useCallback(()=>{n.resolve&&n.resolve(!0),e(a=>({...a,isOpen:!1,resolve:void 0}))},[n.resolve]),i=he.useCallback(()=>{n.resolve&&n.resolve(!1),e(a=>({...a,isOpen:!1,resolve:void 0}))},[n.resolve]);return{isOpen:n.isOpen,title:n.title,message:n.message,confirmText:n.confirmText,cancelText:n.cancelText,type:n.type,confirm:t,handleConfirm:r,handleCancel:i}},oc={car1_matin:"Car 1 - Matin",car2_matin:"Car 2 - Matin",car_soir:"Car - Soir"};class a9{getLogoUrl(){return console.log(" URL du logo importe:",Zu),Zu.length>0?(console.log(" URL du logo valide, utilisation directe"),Zu):(console.log(" URL du logo invalide, utilisation du SVG de fallback"),"data:image/svg+xml;base64,"+btoa(`
        <svg width="100" height="60" viewBox="0 0 100 60" xmlns="http://www.w3.org/2000/svg">
          <rect width="100" height="60" fill="#f59e0b" stroke="#d97706" stroke-width="2"/>
          <text x="50" y="25" text-anchor="middle" fill="white" font-size="14" font-family="Arial" font-weight="bold">
             BOULANGERIE
          </text>
          <text x="50" y="45" text-anchor="middle" fill="white" font-size="12" font-family="Arial" font-weight="bold">
            CHEZ MINA
          </text>
        </svg>
      `))}formatDate(e){return new Date(e).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}formatDateWithCorrection(e,t){if(e.toDateString()===t.toDateString()){const i=new Date(t);return i.setDate(i.getDate()+1),i.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}else return t.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}getCarColor(e){switch(e){case"car1_matin":return"#374151";case"car2_matin":return"#4b5563";case"car_soir":return"#1f2937";default:return"#4b5563"}}getSigleProduit(e){const t=e.toLowerCase().trim(),r={"pain au lait":"PAL","pain de mie":"PDM","pain complet":"PC","pain blanc":"PB","pain de campagne":"PDC",baguette:"BAG","baguette tradition":"BAG-T",croissant:"CRO","pain au chocolat":"PAC",chocolatine:"CHO",brioche:"BRI",viennoiserie:"VIE",tarte:"TAR",gteau:"GAT",sandwich:"SAN"};if(r[t])return r[t];const i=t.split(/\s+/);return i.length===1?t.substring(0,3).toUpperCase():i.map(a=>a[0]).join("").toUpperCase()}generateStyles(){return`
      <style>
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
          font-size: 16px;
          line-height: 1.5;
          color: #1f2937;
          background: white;
          padding: 12px;
        }
        
        .container {
          max-width: 100%;
          margin: 0 auto;
        }
        
        .header {
          text-align: center;
          margin-bottom: 8px;
          padding-bottom: 6px;
          border-bottom: 1px solid #e5e7eb;
        }
        
        .header h1 {
          font-size: 24px;
          font-weight: 700;
          color: #111827;
          margin-bottom: 2px;
        }
        
        .header .date {
          font-size: 14px;
          color: #6b7280;
          font-weight: 500;
        }
        
        .livreur-section {
          margin-bottom: 12px;
          page-break-inside: avoid;
        }
        
        .livreur-header {
          background: #f9fafb;
          padding: 6px 8px;
          border-left: 3px solid #4b5563;
          margin-bottom: 8px;
        }
        
        .livreur-header h2 {
          font-size: 16px;
          font-weight: 600;
          color: #111827;
          margin-bottom: 2px;
        }
        
        .livreur-header .info {
          font-size: 12px;
          color: #6b7280;
        }
        
        .car-section {
          margin-bottom: 10px;
          border: 1px solid #d1d5db;
          border-radius: 4px;
          overflow: hidden;
          page-break-inside: avoid;
        }
        
        .car-header {
          color: white;
          padding: 6px 10px;
          font-weight: 600;
          font-size: 14px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        
        .car-body {
          background: white;
        }
        
        table {
          width: 100%;
          border-collapse: collapse;
        }
        
        th {
          background: #f3f4f6;
          padding: 6px 8px;
          text-align: left;
          font-weight: 600;
          font-size: 12px;
          color: #374151;
          border-bottom: 1px solid #d1d5db;
        }
        
        td {
          padding: 6px 8px;
          border-bottom: 1px solid #e5e7eb;
          font-size: 12px;
          vertical-align: top;
        }
        
        tr:last-child td {
          border-bottom: none;
        }
        
        tr:hover {
          background: #f9fafb;
        }
        
        .summary {
          background: #374151;
          color: white;
          padding: 6px 8px;
          margin-top: 0;
          border-top: 1px solid #d1d5db;
        }
        
        .summary h4 {
          font-size: 13px;
          font-weight: 600;
          margin-bottom: 4px;
        }
        
        .summary-items {
          display: flex;
          flex-wrap: wrap;
          gap: 4px;
        }
        
        .summary-item {
          background: white;
          color: #111827;
          padding: 4px 8px;
          border-radius: 3px;
          font-size: 11px;
          font-weight: 500;
          display: inline-flex;
          align-items: center;
          gap: 4px;
        }
        
        .summary-item .count {
          background: #f3f4f6;
          padding: 1px 5px;
          border-radius: 8px;
          font-weight: 700;
        }
        
        .retours-column {
          width: 80px;
          min-height: 20px;
          border: 1px solid #d1d5db;
          border-radius: 3px;
          background: #fafafa;
        }
        
        .stats {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 8px;
          margin-bottom: 10px;
        }
        
        .stat-card {
          background: #f9fafb;
          padding: 6px 8px;
          border-radius: 4px;
          border-left: 3px solid #4b5563;
        }
        
        .stat-card .label {
          font-size: 8px;
          color: #6b7280;
          font-weight: 500;
          text-transform: uppercase;
          letter-spacing: 0.3px;
        }
        
        .stat-card .value {
          font-size: 18px;
          font-weight: 700;
          color: #111827;
          margin-top: 2px;
        }
        
        @media print {
          body {
            padding: 0;
            font-size: 9px;
          }
          
          .no-print {
            display: none !important;
          }
          
          .livreur-section {
            page-break-after: always;
          }
          
          .car-section {
            page-break-inside: avoid;
          }
          
          th {
            font-size: 8px;
            padding: 3px 5px;
          }
          
          td {
            font-size: 8px;
            padding: 3px 5px;
          }
          
          @page {
            margin: 8mm;
            size: A4;
          }
        }
      </style>
    `}generateDeliveryReportHTML(e,t){const r=e.livreur?.nom||"Clients non assigns",i=this.getLogoUrl();let a=`
      <!DOCTYPE html>
      <html lang="fr">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Programme de Livraison - ${r}</title>
        ${this.generateStyles()}
      </head>
      <body>
        <div class="container">
          <div class="header">
            <div class="logo">
              <img src="${i}" alt="Boulangerie Chez Mina" style="height: 60px; margin: 0 auto 8px auto; display: block;" />
            </div>
            <h1> Programme de Livraison</h1>
            <div class="date">${this.formatDate(t)}</div>
          </div>
          
          <div class="livreur-section">
            <div class="livreur-header">
              <h2>${r}</h2>
              ${e.livreur?.telephone?`<div class="info"> ${e.livreur.telephone}</div>`:""}
              ${e.livreur?.vehicule?`<div class="info"> ${e.livreur.vehicule}</div>`:""}
            </div>
    `;const c=["car1_matin","car2_matin","car_soir"];Array.from(e.commandesParCar.entries()).sort(([p],[v])=>c.indexOf(p)-c.indexOf(v)).forEach(([p,v])=>{const _=this.getCarColor(p),b=new Map;v.forEach(L=>{const j=L.client?.id||"inconnu";b.has(j)||b.set(j,{client:L.client,produits:new Map});const U=b.get(j),z=L.produit?.nom||"Produit inconnu",B=U.produits.get(z)||0,re=Number(L.quantite)||0;U.produits.set(z,B+re)});const T=Array.from(new Set(v.map(L=>L.produit?.nom||"Produit inconnu"))).sort();a+=`
            <div class="car-section">
              <div class="car-header" style="background-color: ${_};">
                <span> ${oc[p]}</span>
                <span>${b.size} client(s)</span>
              </div>
              
              <div class="car-body">
                <table>
                  <thead>
                    <tr>
                      <th style="width: 20%;">Client</th>
      `,T.forEach(L=>{const j=this.getSigleProduit(L);a+=`<th style="text-align: center; width: ${70/T.length}%;" title="${L}">${j}</th>`}),a+=`
                      <th style="width: 10%;">Retours</th>
                    </tr>
                  </thead>
                  <tbody>
      `,Array.from(b.values()).forEach(L=>{a+=`
                    <tr>
                      <td><strong>${L.client?.nom||"Client inconnu"}</strong></td>
        `,T.forEach(j=>{const U=L.produits.get(j)||0;U>0?a+=`<td style="text-align: center; font-weight: 700;">${U}</td>`:a+='<td style="text-align: center; color: #d1d5db;">-</td>'}),a+=`
                      <td><div class="retours-column"></div></td>
                    </tr>
        `});const I={};Array.from(b.values()).forEach(L=>{L.produits.forEach((j,U)=>{I[U]=(I[U]||0)+j})}),a+=`
                  </tbody>
                </table>
              </div>
              
              <div class="summary" style="background-color: ${_};">
                <h4> Rsum ${oc[p]}</h4>
                <div class="summary-items">
      `,Object.entries(I).forEach(([L,j])=>{const U=this.getSigleProduit(L);a+=`
                  <div class="summary-item">
                    <span><strong>${U}</strong> - ${L}</span>
                    <span class="count">${j}</span>
                  </div>
        `}),a+=`
                </div>
              </div>
            </div>
      `}),a+=`
          </div>
          
          <div class="no-print" style="text-align: center; margin-top: 30px; padding: 20px; background: #f3f4f6; border-radius: 8px;">
            <button onclick="window.print()" style="background: #4b5563; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer;">
               Imprimer ce document
            </button>
            <button onclick="window.close()" style="background: #9ca3af; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; margin-left: 12px;">
               Fermer
            </button>
          </div>
        </div>
      </body>
      </html>
    `;const f=window.open("","_blank");f&&(f.document.write(a),f.document.close())}generateGlobalReportHTML(e,t){const r=e.length,i=e.reduce((f,[,p])=>f+Array.from(p.commandesParCar.values()).reduce((v,_)=>v+_.length,0),0),a=Array.from(new Set(e.flatMap(([,f])=>Array.from(f.commandesParCar.values()).flat().map(p=>p.client?.id)))).length,c=this.getLogoUrl();let d=`
      <!DOCTYPE html>
      <html lang="fr">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Rapport Global de Livraison</title>
        ${this.generateStyles()}
      </head>
      <body>
        <div class="container">
          <div class="header">
            <div class="logo">
              <img src="${c}" alt="Boulangerie Chez Mina" style="height: 60px; margin: 0 auto 8px auto; display: block;" />
            </div>
            <h1> Rapport Global de Livraison</h1>
            <div class="date">${this.formatDate(t)}</div>
          </div>
          
          <div class="stats">
            <div class="stat-card">
              <div class="label">Livreurs Actifs</div>
              <div class="value">${r}</div>
            </div>
            <div class="stat-card">
              <div class="label">Total Livraisons</div>
              <div class="value">${i}</div>
            </div>
            <div class="stat-card">
              <div class="label">Clients  Livrer</div>
              <div class="value">${a}</div>
            </div>
          </div>
    `;e.forEach(([,f])=>{const p=f.livreur?.nom||"Clients non assigns";d+=`
          <div class="livreur-section">
            <div class="livreur-header">
              <h2>${p}</h2>
              ${f.livreur?.telephone?`<div class="info"> ${f.livreur.telephone}</div>`:""}
              ${f.livreur?.vehicule?`<div class="info"> ${f.livreur.vehicule}</div>`:""}
            </div>
      `;const v=["car1_matin","car2_matin","car_soir"];Array.from(f.commandesParCar.entries()).sort(([T],[I])=>v.indexOf(T)-v.indexOf(I)).forEach(([T,I])=>{const L=this.getCarColor(T),j=new Map;I.forEach(B=>{const re=B.client?.id||"inconnu";j.has(re)||j.set(re,{client:B.client,produits:new Map});const ne=j.get(re),V=B.produit?.nom||"Produit inconnu",D=ne.produits.get(V)||0,k=Number(B.quantite)||0;ne.produits.set(V,D+k)});const U=Array.from(new Set(I.map(B=>B.produit?.nom||"Produit inconnu"))).sort();d+=`
            <div class="car-section">
              <div class="car-header" style="background-color: ${L};">
                <span> ${oc[T]}</span>
                <span>${j.size} client(s)</span>
              </div>
              
              <div class="car-body">
                <table>
                  <thead>
                    <tr>
                      <th style="width: 20%;">Client</th>
        `,U.forEach(B=>{const re=this.getSigleProduit(B);d+=`<th style="text-align: center; width: ${70/U.length}%;" title="${B}">${re}</th>`}),d+=`
                      <th style="width: 10%;">Retours</th>
                    </tr>
                  </thead>
                  <tbody>
        `,Array.from(j.values()).forEach(B=>{d+=`
                    <tr>
                      <td><strong>${B.client?.nom||"Client inconnu"}</strong></td>
          `,U.forEach(re=>{const ne=B.produits.get(re)||0;ne>0?d+=`<td style="text-align: center; font-weight: 700;">${ne}</td>`:d+='<td style="text-align: center; color: #d1d5db;">-</td>'}),d+=`
                      <td><div class="retours-column"></div></td>
                    </tr>
          `});const z={};Array.from(j.values()).forEach(B=>{B.produits.forEach((re,ne)=>{z[ne]=(z[ne]||0)+re})}),d+=`
                  </tbody>
                </table>
              </div>
              
              <div class="summary" style="background-color: ${L};">
                <h4> Rsum ${oc[T]}</h4>
                <div class="summary-items">
        `,Object.entries(z).forEach(([B,re])=>{const ne=this.getSigleProduit(B);d+=`
                  <div class="summary-item">
                    <span><strong>${ne}</strong> - ${B}</span>
                    <span class="count">${re}</span>
                  </div>
          `}),d+=`
                </div>
              </div>
            </div>
        `}),d+=`
          </div>
      `}),d+=`
          <div class="no-print" style="text-align: center; margin-top: 30px; padding: 20px; background: #f3f4f6; border-radius: 8px;">
            <button onclick="window.print()" style="background: #4b5563; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer;">
               Imprimer ce document
            </button>
            <button onclick="window.close()" style="background: #9ca3af; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; margin-left: 12px;">
               Fermer
            </button>
          </div>
        </div>
      </body>
      </html>
    `;const h=window.open("","_blank");h&&(h.document.write(d),h.document.close())}generateProductionReportHTML(e,t){const i=(()=>{if(!e?.commandesClients)return new Map;const I=new Map;return e.commandesClients.filter(L=>L.statut!=="annulee").forEach(L=>{L.produits.forEach(j=>{const U=I.get(j.produitId)||{car1Matin:0,car2Matin:0,carSoir:0},z=Number(j.repartitionCars?.car1_matin)||0,B=Number(j.repartitionCars?.car2_matin)||0,re=Number(j.repartitionCars?.car_soir)||0;I.set(j.produitId,{car1Matin:U.car1Matin+z,car2Matin:U.car2Matin+B,carSoir:U.carSoir+re})})}),I})(),a=e.totauxParProduit?.reduce((I,L)=>I+(L.totalClient||0),0)||0,c=e.totauxParProduit?.reduce((I,L)=>I+(L.totalBoutique||0),0)||0,d=e.totauxParProduit?.reduce((I,L)=>I+L.totalGlobal,0)||0,h=Array.from(i.entries()).filter(([I,L])=>L.car1Matin+L.car2Matin>0).map(([I])=>{const L=t.find(U=>U.id===I),j=i.get(I);return{produitId:I,produit:L,car1Matin:j.car1Matin,car2Matin:j.car2Matin}}),f=Array.from(i.entries()).filter(([I,L])=>L.carSoir>0).map(([I])=>{const L=t.find(U=>U.id===I),j=i.get(I);return{produitId:I,produit:L,carSoir:j.carSoir}}),p=e.statut==="envoye"?" CONFIRM":e.statut==="modifie"?" MODIFI":e.statut==="produit"?" PRODUIT":" BROUILLON";let _=`
      <!DOCTYPE html>
      <html lang="fr">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Programme de Production</title>
        <style>
          * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
          }

          body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            font-size: 11px;
            line-height: 1.4;
            color: #1f2937;
            background: white;
            padding: 12px;
          }

          .container {
            max-width: 100%;
            margin: 0 auto;
          }

          .header {
            text-align: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid #374151;
          }

          .header .logo {
            margin-bottom: 8px;
          }

          .header .logo img {
            height: 60px;
            margin: 0 auto;
            display: block;
          }

          .header h1 {
            font-size: 20px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 4px;
          }

          .header .date {
            font-size: 13px;
            color: #6b7280;
            font-weight: 500;
            margin-bottom: 2px;
          }

          .header .status {
            font-size: 12px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
            background: #f3f4f6;
            color: #374151;
          }

          .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
            background: #374151;
            padding: 16px;
            border-radius: 8px;
            color: white;
          }

          .stat-card {
            text-align: center;
          }

          .stat-card .label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
            opacity: 0.8;
          }

          .stat-card .value {
            font-size: 24px;
            font-weight: 700;
          }

          .stat-card .unit {
            font-size: 11px;
            opacity: 0.8;
          }

          .section {
            margin-bottom: 24px;
            page-break-inside: avoid;
          }

          .section-header {
            background: #f9fafb;
            padding: 8px 12px;
            border-left: 4px solid #4b5563;
            margin-bottom: 12px;
            border-radius: 4px;
          }

          .section-header.matin {
            border-left-color: #f59e0b;
            background: #fffbeb;
          }

          .section-header.soir {
            border-left-color: #6366f1;
            background: #eef2ff;
          }

          .section-header.boutique {
            border-left-color: #059669;
            background: #ecfdf5;
          }

          .section-header h2 {
            font-size: 16px;
            font-weight: 600;
            color: #111827;
            display: flex;
            align-items: center;
            gap: 8px;
          }

          .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
          }

          .product-card {
            border: 1px solid #d1d5db;
            border-radius: 6px;
            overflow: hidden;
            page-break-inside: avoid;
          }

          .product-header {
            background: #374151;
            color: white;
            padding: 8px 12px;
            font-weight: 600;
            font-size: 12px;
          }

          .product-header.matin {
            background: #f59e0b;
          }

          .product-header.soir {
            background: #6366f1;
          }

          .product-header.boutique {
            background: #059669;
          }

          .product-body {
            padding: 12px;
            display: flex;
            flex-direction: column;
            height: calc(100% - 40px);
          }

          .product-content {
            flex: 1;
          }

          .car-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 0;
            border-bottom: 1px solid #f3f4f6;
          }

          .car-row:last-child {
            border-bottom: none;
          }

          .car-label {
            font-size: 10px;
            color: #6b7280;
            font-weight: 500;
          }

          .car-value {
            font-size: 14px;
            font-weight: 700;
            color: #111827;
          }

          .total-row {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 2px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
          }

          .total-label {
            font-size: 11px;
            font-weight: 600;
            color: #374151;
          }

          .total-value {
            font-size: 18px;
            font-weight: 700;
            color: #111827;
          }

          .soir-total {
            text-align: center;
            padding: 20px;
            background: #f8fafc;
            border-radius: 8px;
          }

          .soir-total .value {
            font-size: 32px;
            font-weight: 700;
            color: #111827;
            margin-bottom: 4px;
          }

          .soir-total .label {
            font-size: 12px;
            color: #6b7280;
          }

          .footer {
            margin-top: 40px;
            padding-top: 16px;
            border-top: 1px solid #d1d5db;
            text-align: center;
            font-size: 9px;
            color: #6b7280;
          }

          @media print {
            body {
              padding: 8px;
              font-size: 10px;
            }

            .no-print {
              display: none !important;
            }

            .section {
              page-break-inside: avoid;
            }

            .products-grid {
              grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
              gap: 8px;
            }

            @page {
              margin: 8mm;
              size: A4;
            }
          }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <div class="logo">
              <img src="${this.getLogoUrl()}" alt="Boulangerie Chez Mina" />
            </div>
            <h1> Programme de Production</h1>
            <div class="date">
              Production : ${this.formatDateWithCorrection(e.dateCreation,e.dateProduction)}
            </div>
            <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">
              Programme cr le ${e.dateCreation.toLocaleDateString("fr-FR")}  ${e.dateCreation.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}
            </div>
            <div class="status">${p}</div>
          </div>

          <div class="stats">
            <div class="stat-card">
              <div class="label">Production Clients</div>
              <div class="value">${a}</div>
              <div class="unit">pices</div>
            </div>
            <div class="stat-card">
              <div class="label">Production Boutique</div>
              <div class="value">${c}</div>
              <div class="unit">pices</div>
            </div>
            <div class="stat-card">
              <div class="label">Total Gnral</div>
              <div class="value">${d}</div>
              <div class="unit">pices</div>
            </div>
          </div>
    `;h.length>0&&(_+=`
          <div class="section">
            <div class="section-header matin">
              <h2> Production Clients - Matin</h2>
            </div>
            <div class="products-grid">
      `,h.forEach(I=>{const L=I.car1Matin,j=I.car2Matin,U=L+j;_+=`
              <div class="product-card">
                <div class="product-header matin">${I.produit?.nom||"Produit"}</div>
                <div class="product-body">
                  <div class="product-content">
        `,L>0&&(_+=`
                    <div class="car-row">
                      <span class="car-label">Car 1 Matin</span>
                      <span class="car-value">${L}</span>
                    </div>
          `),j>0&&(_+=`
                    <div class="car-row">
                      <span class="car-label">Car 2 Matin</span>
                      <span class="car-value">${j}</span>
                    </div>
          `),_+=`
                  </div>
                  <div class="total-row">
                    <span class="total-label">Total Matin Clients</span>
                    <span class="total-value">${U}</span>
                  </div>
                </div>
              </div>
        `}),_+=`
            </div>
          </div>
      `),f.length>0&&(_+=`
          <div class="section">
            <div class="section-header soir">
              <h2> Production Clients - Soir</h2>
            </div>
            <div class="products-grid">
      `,f.forEach(I=>{const L=I.carSoir;_+=`
              <div class="product-card">
                <div class="product-header soir">${I.produit?.nom||"Produit"}</div>
                <div class="product-body">
                  <div class="soir-total">
                    <div class="value">${L}</div>
                    <div class="label">pices clients</div>
                  </div>
                </div>
              </div>
        `}),_+=`
            </div>
          </div>
      `),e.quantitesBoutique&&e.quantitesBoutique.length>0&&(_+=`
          <div class="section">
            <div class="section-header boutique">
              <h2> Production Boutique</h2>
            </div>
            <div class="products-grid">
      `,e.quantitesBoutique.forEach(I=>{const L=t.find(U=>U.id===I.produitId),j=I.repartitionCars;_+=`
              <div class="product-card">
                <div class="product-header boutique">${L?.nom||"Produit"}</div>
                <div class="product-body">
                  <div class="total-row" style="margin-top: 0; padding-top: 0; border-top: none;">
                    <span class="total-label">Total Boutique</span>
                    <span class="total-value">${I.quantite}</span>
                  </div>
        `,j&&(_+=`
                  <div style="margin-top: 12px; padding-top: 8px; border-top: 1px solid #e5e7eb;">
                    <div style="font-size: 9px; color: #6b7280; margin-bottom: 6px; font-weight: 600;">RPARTITION:</div>
          `,j.car1_matin>0&&(_+=`
                    <div class="car-row">
                      <span class="car-label">Car 1 Matin</span>
                      <span class="car-value">${j.car1_matin}</span>
                    </div>
            `),j.car2_matin>0&&(_+=`
                    <div class="car-row">
                      <span class="car-label">Car 2 Matin</span>
                      <span class="car-value">${j.car2_matin}</span>
                    </div>
            `),j.car_soir>0&&(_+=`
                    <div class="car-row">
                      <span class="car-label">Car Soir</span>
                      <span class="car-value">${j.car_soir}</span>
                    </div>
            `),_+=`
                  </div>
          `),_+=`
                </div>
              </div>
        `}),_+=`
            </div>
          </div>
      `);const b=new Date;_+=`
          <div class="footer">
            Document gnr le ${b.toLocaleDateString("fr-FR")}  ${b.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}
            <br>
            Boulangerie Chez Mina - Programme de Production
          </div>

          <div class="no-print" style="text-align: center; margin-top: 30px; padding: 20px; background: #f3f4f6; border-radius: 8px;">
            <button onclick="window.print()" style="background: #4b5563; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer;">
               Imprimer ce document
            </button>
            <button onclick="window.close()" style="background: #9ca3af; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; margin-left: 12px;">
               Fermer
            </button>
          </div>
        </div>
      </body>
      </html>
    `;const T=window.open("","_blank");T&&(T.document.write(_),T.document.close())}generateDeliveryReceiptHTML(e,t,r){if(console.log(" Gnration bon de livraison - Donnes reues:",{commande:e?"OK":"MANQUANT",client:t?"OK":"MANQUANT",produits:r?`${r.length} produits`:"MANQUANT"}),!e){console.error(" Commande manquante pour gnrer le bon de livraison"),alert("Erreur: Impossible de gnrer le bon de livraison - commande manquante");return}if(!t){console.error(" Client manquant pour gnrer le bon de livraison"),alert("Erreur: Impossible de gnrer le bon de livraison - client manquant");return}const i=e.produits.reduce((f,p)=>f+p.quantiteCommandee*(p.prixUnitaire||0),0),a=new Date,c=new Date(e.dateLivraison),d=this.getLogoUrl(),h=`
      <!DOCTYPE html>
      <html lang="fr">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Bon de Livraison - ${t?.nom||"Client"}</title>
        <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"><\/script>
        ${this.generateStyles()}
        <style>
          .delivery-header {
            text-align: center;
            background: #6b7280;
            color: white;
            padding: 20px;
            border-radius: 10px 10px 0 0;
            margin-bottom: 20px;
          }

          .client-info, .order-info {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #374151;
          }

          .products-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
          }

          .products-table th {
            background: #f3f4f6;
            padding: 15px;
            text-align: left;
            border-bottom: 2px solid #d1d5db;
            font-weight: 600;
            font-size: 15px;
          }

          .products-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #d1d5db;
            font-size: 15px;
          }

          .total-section {
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            text-align: right;
            margin-top: 20px;
            border: 2px solid #374151;
          }

          .signature-section {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 40px;
          }

          .signature-box {
            flex: 1;
            border: 2px dashed #d1d5db;
            height: 80px;
            border-radius: 8px;
            text-align: center;
            padding: 10px;
            color: #6b7280;
          }

          .icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            vertical-align: middle;
            margin-right: 6px;
          }

          .section-title {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 600;
          }

          .section-title .icon {
            margin-right: 8px;
            color: #374151;
          }

          /* Styles pour les boutons d'impression */
          .print-buttons {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: #f3f4f6;
            border-radius: 8px;
            border-top: 1px solid #d1d5db;
          }

          .print-btn {
            background: #374151;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin: 0 6px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
          }

          .print-btn:hover {
            background: #4b5563;
          }

          .print-btn.secondary {
            background: #9ca3af;
          }

          .print-btn.secondary:hover {
            background: #6b7280;
          }

          /* Styles d'impression */
          @media print {
            @page {
              margin: 15mm;
              size: A4;
            }

            body {
              font-size: 12pt;
              line-height: 1.4;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }

            .delivery-header {
              background: #6b7280 !important;
              color: white !important;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }

            .client-info, .order-info {
              background: #f8fafc !important;
              border-left: 4px solid #374151 !important;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }

            .products-table th {
              background: #f3f4f6 !important;
              border-bottom: 2px solid #374151 !important;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }

            .products-table td {
              border-bottom: 1px solid #d1d5db !important;
            }

            .total-section {
              background: #f9fafb !important;
              border: 2px solid #374151 !important;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }

            .signature-box {
              border: 2px dashed #374151 !important;
              background: white !important;
            }

            /* Masquer les boutons d'impression lors de l'impression */
            .no-print, .print-buttons {
              display: none !important;
            }

            /* viter les coupures de page dans les sections */
            .client-info, .order-info, .total-section {
              page-break-inside: avoid;
            }

            /* Garder le tableau ensemble si possible */
            .products-table {
              page-break-inside: auto;
            }

            .products-table tr {
              page-break-inside: avoid;
              page-break-after: auto;
            }
          }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="delivery-header">
            <div class="logo">
              <img src="${d}" alt="Boulangerie Chez Mina" style="height: 50px; margin-bottom: 10px;" />
            </div>
            <h1><i data-lucide="clipboard-list" class="icon"></i>BON DE LIVRAISON</h1>
            <p>N ${e.id.slice(-8).toUpperCase()}</p>
          </div>

          <div class="client-info">
            <h3 class="section-title"><i data-lucide="user" class="icon"></i>INFORMATIONS CLIENT</h3>
            <p><strong>Nom :</strong> ${t?.nom||"Non spcifi"}</p>
            <p><strong>Tlphone :</strong> ${t?.telephone||"Non spcifi"}</p>
            <p><strong>Adresse :</strong> ${t?.adresse||"Non spcifie"}</p>
            <p><strong>Livreur :</strong> ${t?.livreur||"Non assign"}</p>
          </div>

          <div class="order-info">
            <h3 class="section-title"><i data-lucide="calendar" class="icon"></i>INFORMATIONS COMMANDE</h3>
            <p><strong>Date de livraison :</strong> ${c.toLocaleDateString("fr-FR")}</p>
            <p><strong>Date d'impression :</strong> ${a.toLocaleDateString("fr-FR")}  ${a.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}</p>
            <p><strong>Statut :</strong> <span style="color: #374151; font-weight: bold;"> LIVRER</span></p>
          </div>

          <table class="products-table">
            <thead>
              <tr>
                <th>Produit</th>
                <th style="text-align: center">Quantit</th>
                <th style="text-align: right">Prix unitaire</th>
                <th style="text-align: right">Total</th>
              </tr>
            </thead>
            <tbody>
              ${e.produits.map(f=>{const p=r.find(_=>_.id===f.produitId),v=f.quantiteCommandee*(f.prixUnitaire||0);return`
                  <tr>
                    <td><strong>${p?.nom||"Produit inconnu"}</strong></td>
                    <td style="text-align: center">${f.quantiteCommandee}</td>
                    <td style="text-align: right">${(f.prixUnitaire||0).toLocaleString("fr-FR")} FCFA</td>
                    <td style="text-align: right"><strong>${v.toLocaleString("fr-FR")} FCFA</strong></td>
                  </tr>
                `}).join("")}
            </tbody>
          </table>

          <div class="total-section">
            <h3><i data-lucide="banknote" class="icon"></i>TOTAL  PAYER : ${i.toLocaleString("fr-FR")} FCFA</h3>
          </div>

          <div class="signature-section">
            <div class="signature-box">
              <strong>Signature Livreur</strong>
              <br><small>Date et heure :</small>
            </div>
            <div class="signature-box">
              <strong>Signature Client</strong>
              <br><small>Nom et signature :</small>
            </div>
          </div>

          <div class="footer" style="text-align: left; margin-top: 30px;">
            <p style="font-size: 16px; font-weight: 600; color: #374151; margin-bottom: 8px;">
              Merci de votre confiance !
            </p>
            <p style="font-size: 0.8em; color: #6b7280;">
              Document gnr le ${a.toLocaleDateString("fr-FR")}  ${a.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}
              <br>
              Boulangerie Chez Mina - Bon de Livraison
            </p>
          </div>

          <div class="print-buttons">
            <button onclick="window.print()" class="print-btn">
              <i data-lucide="printer"></i>
              Imprimer ce document
            </button>
            <button onclick="window.close()" class="print-btn secondary">
              <i data-lucide="x"></i>
              Fermer
            </button>
          </div>
        </div>
        <script>
          lucide.createIcons();
        <\/script>
      </body>
      </html>
    `;console.log(" Tentative d'ouverture de la fentre d'impression...");try{const f=window.open("","_blank");f?(console.log(" Fentre ouverte avec succs, criture du contenu..."),f.document.write(h),f.document.close(),console.log(" Bon de livraison gnr et affich")):(console.error(" Impossible d'ouvrir la fentre d'impression"),alert(` Impossible d'ouvrir la fentre d'impression.
Vrifiez que les pop-ups ne sont pas bloqus dans votre navigateur.`))}catch(f){console.error(" Erreur lors de l'ouverture de la fentre:",f),alert("Erreur technique lors de l'ouverture de la fentre d'impression.")}}}const Pg=new a9,o9=()=>{const{programmeActuel:n,commandesClients:e,quantitesBoutique:t,produits:r,clients:i,showCommandeForm:a,showQuantiteBoutiqueForm:c,commandeEnEdition:d,quantiteBoutiqueEnEdition:h,formulaireCommande:f,creerNouveauProgramme:p,chargerProgrammeAvecListener:v,nettoyerListeners:_,sauvegarderProgramme:b,envoyerAuBoulanger:T,ajouterCommandeClient:I,modifierCommandeClient:L,supprimerCommandeClient:j,annulerCommandeClient:U,supprimerProduitDeCommande:z,ajouterQuantiteBoutique:B,supprimerQuantiteBoutique:re,chargerProduits:ne,chargerClients:V,rafraichirDonnees:D,setShowCommandeForm:k,setShowQuantiteBoutiqueForm:$,setCommandeEnEdition:S,setQuantiteBoutiqueEnEdition:R,updateFormulaireCommande:F,resetFormulaireCommande:oe,validerProduction:be,isLoading:Q}=_l(),ae=Wy(),[me,je]=he.useState(new Date().toISOString().split("T")[0]),[Fe,J]=he.useState("create"),[q,X]=he.useState(null),[ie,fe]=he.useState(!1),[ge,_e]=he.useState(""),Le=e.filter(pe=>{if(!ge.trim())return!0;const Qe=i.find(nt=>nt.id===pe.clientId)?.nom?.toLowerCase()||"",at=ge.toLowerCase().trim();return Qe.includes(at)});he.useEffect(()=>((async()=>{try{await ne(),await V();const Ue=new Date(me);v(Ue)}catch(Ue){console.error("Erreur lors de l'initialisation:",Ue);const Qe=new Date(me);p(Qe)}})(),()=>{_()}),[me,ne,V,v,p,_]),he.useEffect(()=>{const pe=()=>{document.hidden||D().catch(console.error)};return document.addEventListener("visibilitychange",pe),()=>document.removeEventListener("visibilitychange",pe)},[D]);const ke=pe=>{je(pe)},Be=pe=>{if(pe){const Ue=e.find(Qe=>Qe.clientId===pe&&new Date(Qe.dateLivraison).toDateString()===new Date(me).toDateString());Ue?(S(Ue),J("addProducts")):(S(null),J("create"),F({selectedClientId:pe,dateLivraison:me}))}else S(null),J("create"),F({dateLivraison:me});k(!0)},Ze=(pe,Ue)=>{const Qe=e.find(at=>at.id===pe);Qe&&(S(Qe),X(Ue),fe(!0))},ot=pe=>{if(d&&q!==null){const Ue=[...d.produits];Ue[q]=pe,L(d.id,{...d,produits:Ue}),fe(!1),S(null),X(null),Pt.success(" Produit modifi avec succs !")}},st=()=>{fe(!1),S(null),X(null)},dt=pe=>{if(Fe==="addProducts"&&d){const Ue=[...d.produits];pe.produits.forEach(Qe=>{const at=Ue.findIndex(nt=>nt.produitId===Qe.produitId);at>=0?Ue[at]=Qe:Ue.push(Qe)}),L(d.id,{...d,produits:Ue})}else if(Fe==="edit"&&d)L(d.id,pe);else{const Ue=e.find(Qe=>Qe.clientId===pe.clientId&&new Date(Qe.dateLivraison).toDateString()===new Date(pe.dateLivraison).toDateString());if(Ue){const Qe=[...Ue.produits];pe.produits.forEach(at=>{const nt=Qe.findIndex(pt=>pt.produitId===at.produitId);nt>=0?Qe[nt]=at:Qe.push(at)}),L(Ue.id,{...Ue,produits:Qe})}else I(pe)}k(!1),S(null),X(null),J("create"),oe(),Fe==="addProducts"?Pt.success(" Produits ajouts  la commande avec succs !"):Fe==="edit"?Pt.success(" Commande modifie avec succs !"):Pt.success(" Nouvelle commande cre avec succs !")},se=()=>{k(!1),S(null),X(null),J("create"),oe()},rt=async()=>{try{await b(),Pt.success(" Programme de production sauvegard avec succs")}catch(pe){console.log(pe),Pt.error(" Erreur lors de la sauvegarde du programme")}},Kt=async()=>{if(!n){Pt.error(" Aucun programme  envoyer");return}const pe=[];e.length===0&&pe.push(" Aucune commande client dfinie"),n.totauxParProduit.length===0&&pe.push(" Aucun produit dans le programme");const Ue=e.filter(Qe=>Qe.statut!=="annulee");Ue.length===0&&pe.push(" Toutes les commandes sont annules");for(const Qe of n.totauxParProduit)Qe.totalGlobal<=0&&pe.push(` Le produit "${Qe.produit?.nom}" a une quantit totale de 0`);if(pe.length>0){if(!await ae.confirm({title:"Validation du programme",message:` Des problmes ont t dtects :

${pe.join(`
`)}

Voulez-vous tout de mme envoyer le programme ?`,confirmText:"Envoyer malgr tout",cancelText:"Annuler",type:"warning"}))return}else if(!await ae.confirm({title:"Confirmer l'envoi",message:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-600",children:"tes-vous sr de vouloir envoyer ce programme au boulanger ?"}),l.jsxs("div",{className:"bg-blue-50/50 rounded-lg p-3 space-y-2 border border-blue-100",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[l.jsx(de,{icon:"mdi:script-text-outline",className:"text-blue-500"}),l.jsxs("span",{className:"font-medium text-sm",children:[Ue.length," commandes clients"]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[l.jsx(de,{icon:"mdi:bread",className:"text-orange-500"}),l.jsxs("span",{className:"font-medium text-sm",children:[n.totauxParProduit.length," types de produits"]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[l.jsx(de,{icon:"mdi:store",className:"text-purple-500"}),l.jsxs("span",{className:"font-medium text-sm",children:[t.length," produits boutique"]})]})]}),l.jsxs("p",{className:"text-xs text-gray-500 flex items-start gap-1.5 bg-gray-50 p-2 rounded",children:[l.jsx(de,{icon:"mdi:information-outline",className:"text-blue-500 mt-0.5"}),l.jsx("span",{children:"Vous pourrez toujours modifier le programme et le renvoyer si ncessaire."})]})]}),confirmText:"Envoyer au Boulanger",cancelText:"Annuler",type:"info"}))return;try{await T(),Pt.success(" Programme envoy au boulanger avec succs !")}catch{Pt.error(" Erreur lors de l'envoi du programme")}},St=async()=>{if(await ae.confirm({title:"Valider la production",message:` tes-vous sr de vouloir valider la production ?

Cela va :
1. Changer le statut en "Produit"
2.  Dduire AUTOMATIQUEMENT les matires premires du stock selon les recettes.

Assurez-vous que les quantits produites sont correctes.`,confirmText:"Valider et Dduire Stock",cancelText:"Annuler",type:"warning"}))try{await be(),Pt.success(" Production valide et stocks mis  jour !")}catch{Pt.error(" Erreur lors de la validation")}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-linear-to-r from-purple-600 to-blue-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:clipboard-text",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Programme de Production"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Gestion des commandes clients et quantits boutique"})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full border text-sm font-medium ${n?.statut==="brouillon"?"bg-gray-100 text-gray-600 border-gray-200":n?.statut==="modifie"?"bg-orange-50 text-orange-700 border-orange-200":n?.statut==="envoye"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200"}`,children:[l.jsx(de,{icon:n?.statut==="brouillon"?"mdi:file-document-edit":n?.statut==="modifie"?"mdi:file-document-alert":n?.statut==="envoye"?"mdi:send-check":"mdi:factory",className:"text-lg"}),l.jsxs("span",{children:[n?.statut==="brouillon"&&"Brouillon",n?.statut==="modifie"&&"Modifi",n?.statut==="envoye"&&"Envoy",n?.statut==="produit"&&"Termin"]})]}),l.jsx("div",{className:"h-8 w-px bg-gray-200 mx-2 hidden sm:block"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:rt,disabled:Q,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 shadow-sm",children:[l.jsx(de,{icon:"mdi:content-save",className:"text-lg"}),l.jsx("span",{className:"hidden sm:inline font-medium",children:"Sauvegarder"})]}),(n?.statut==="brouillon"||n?.statut==="modifie")&&l.jsxs("button",{onClick:Kt,disabled:!n||Q,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:[l.jsx(de,{icon:"mdi:send",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:n?.statut==="modifie"?"Renvoyer":"Envoyer"})]}),(n?.statut==="envoye"||n?.statut==="modifie")&&l.jsxs("button",{onClick:St,disabled:Q,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all disabled:opacity-50 shadow-md hover:shadow-lg",children:[l.jsx(de,{icon:"mdi:factory",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Valider"})]})]}),l.jsx(Cl,{isOpen:ae.isOpen,onClose:ae.handleCancel,onConfirm:ae.handleConfirm,title:ae.title,message:ae.message,confirmText:ae.confirmText,cancelText:ae.cancelText,type:ae.type})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:calendar",className:"text-lg text-blue-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Date de production"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("input",{type:"date",value:me,onChange:pe=>ke(pe.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 font-medium shadow-sm hover:border-gray-400 transition-all"})}),l.jsx("div",{className:"bg-gradient-to-l from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4 shadow-sm min-w-[320px]",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex-1 text-right",children:[l.jsxs("div",{className:"flex items-center justify-end gap-2 mb-1",children:[l.jsx("span",{className:"text-sm font-medium text-green-700",children:"Production programme"}),l.jsx(de,{icon:"mdi:calendar-check",className:"text-green-600"})]}),l.jsx("div",{className:"text-lg font-bold text-gray-900",children:new Date(me).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),n&&l.jsxs("div",{className:"flex items-center justify-end gap-1 mt-1 text-xs text-gray-600",children:[l.jsxs("span",{children:["Cr le ",n.dateCreation.toLocaleDateString("fr-FR"),"  ",n.dateCreation.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]}),l.jsx(de,{icon:"mdi:clock-outline",className:"text-gray-400"})]})]}),l.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-600 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:l.jsx(de,{icon:"mdi:factory",className:"text-2xl text-white"})})]})})]})]}),l.jsx(Nl,{isOpen:a,onClose:se,title:Fe==="addProducts"&&d?`Ajouter des Produits - ${i.find(pe=>pe.id===d.clientId)?.nom||"Client"}`:Fe==="edit"&&d?`Modifier la Commande - ${i.find(pe=>pe.id===d.clientId)?.nom||"Client"}`:"Nouvelle Commande Client",size:"xl",position:"center",children:l.jsx(r9,{produits:r,clients:i,commande:d,mode:Fe,onSave:dt,onCancel:se,isLoading:Q,formulaireState:f,onUpdateFormulaire:F})}),ie&&d&&q!==null&&l.jsx(Nl,{isOpen:ie,onClose:st,title:`Modifier le Produit - ${i.find(pe=>pe.id===d.clientId)?.nom||"Client"}`,size:"xl",position:"center",children:l.jsx(i9,{produits:r,commande:d,produitIndex:q,client:i.find(pe=>pe.id===d.clientId),onSave:ot,onCancel:st,isLoading:Q})}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-group",className:"text-lg text-green-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Commandes Clients"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Ajoutez les commandes des clients pour le jour slectionn"})]})]}),l.jsxs("button",{onClick:()=>Be(),disabled:a,className:"flex items-center gap-2 px-4 py-2 bg-linear-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouvelle commande"})]})]}),e.length>0&&l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"relative flex-1 max-w-md",children:[l.jsx(de,{icon:"mdi:magnify",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Rechercher un client...",value:ge,onChange:pe=>_e(pe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm"}),ge&&l.jsx("button",{onClick:()=>_e(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l.jsx(de,{icon:"mdi:close"})})]}),l.jsx("div",{className:"text-sm text-gray-500",children:Le.length===e.length?`${e.length} commande(s)`:`${Le.length} sur ${e.length} commande(s)`})]})]})}),l.jsx("div",{className:"p-6",children:Le.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:ge?"mdi:magnify":"mdi:clipboard-outline",className:"text-3xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:ge?`Aucun client trouv pour "${ge}"`:"Aucune commande client"}),l.jsx("p",{className:"text-gray-500 mb-6",children:ge?"Essayez avec d'autres termes de recherche ou ajoutez une nouvelle commande":"Commencez par ajouter une commande client pour ce jour de production"}),ge?l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsxs("button",{onClick:()=>_e(""),className:"inline-flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all",children:[l.jsx(de,{icon:"mdi:close",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Effacer la recherche"})]}),l.jsxs("button",{onClick:()=>Be(),className:"inline-flex items-center gap-2 px-4 py-2 bg-linear-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouvelle commande"})]})]}):l.jsxs("button",{onClick:()=>Be(),className:"inline-flex items-center gap-2 px-6 py-3 bg-linear-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter la premire commande"})]})]}):l.jsxs("div",{className:"space-y-4",children:[Le.map(pe=>{const Ue=i.find(nt=>nt.id===pe.clientId),Qe=pe.produits.reduce((nt,pt)=>nt+(pt.prixUnitaire||0)*pt.quantiteCommandee,0),at=nt=>{const pt=nt?.toLowerCase()||"";return pt.includes("baguette")?"mdi:baguette":pt.includes("pain")?"mdi:bread-slice":pt.includes("croissant")?"mdi:croissant":pt.includes("brioche")?"mdi:muffin":pt.includes("tarte")?"mdi:pie":pt.includes("gateau")||pt.includes("gteau")?"mdi:cake":pt.includes("sandwich")?"mdi:food":pt.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"relative bg-linear-to-br from-white to-gray-50 border border-gray-200 rounded-xl p-6 hover:border-green-300 hover:shadow-xl transition-all duration-300 group",children:[l.jsxs("div",{className:"flex items-start justify-between mb-6",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-gray-600 to-gray-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx(de,{icon:"mdi:account",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-1",children:Ue?.nom||"Client inconnu"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded-lg",children:[l.jsx(de,{icon:"mdi:calendar-clock",className:"text-gray-500"}),l.jsx("span",{children:new Date(pe.dateLivraison).toLocaleDateString("fr-FR")})]}),pe.statut==="annulee"&&l.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 text-xs font-semibold rounded-full",children:[l.jsx(de,{icon:"mdi:cancel",className:"text-red-600"}),"ANNULE"]})]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:Qe.toLocaleString("fr-FR")}),l.jsx("div",{className:"text-xs text-gray-400 font-medium",children:"FCFA"}),l.jsxs("div",{className:"flex items-center justify-end gap-1 text-sm text-gray-500 mt-1",children:[l.jsx(de,{icon:"mdi:package-variant-closed",className:"text-gray-400"}),pe.produits.length," article",pe.produits.length>1?"s":""]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-list",className:"text-gray-500"}),l.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Produits commands"}),l.jsxs("span",{className:"ml-auto text-sm font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:[pe.produits.length," item",pe.produits.length>1?"s":""]}),l.jsxs("div",{className:"flex gap-1 ml-2",children:[l.jsx("button",{onClick:()=>{Pg.generateDeliveryReceiptHTML(pe,Ue,r)},className:"p-1.5 text-blue-600 hover:text-blue-700 hover:bg-blue-100 rounded-md transition-colors",title:"Bon de livraison",children:l.jsx(CO,{size:16})}),l.jsx("button",{onClick:()=>Be(pe.clientId),className:"p-1.5 text-green-600 hover:text-green-700 hover:bg-green-100 rounded-md transition-colors",title:"Ajouter des produits",children:l.jsx(Hy,{size:16})}),l.jsx("button",{onClick:()=>{U(pe.id),Pt.success(`Commande de ${Ue?.nom||"le client"} annule`)},className:"p-1.5 text-amber-600 hover:text-amber-700 hover:bg-amber-100 rounded-md transition-colors",title:"Annuler la commande",children:l.jsx(SO,{size:16})}),l.jsx(f1,{onConfirm:()=>{j(pe.id),Pt.success(`Commande de ${Ue?.nom||"le client"} supprime`)},message:`tes-vous sr de vouloir supprimer dfinitivement la commande de "${Ue?.nom||"Client inconnu"}" ?

Cette action est irrversible.`,confirmText:"Supprimer dfinitivement",cancelText:"Annuler",type:"danger",className:"p-1.5 text-red-600 hover:text-red-700 hover:bg-red-100 rounded-md transition-colors",title:"Supprimer dfinitivement",children:l.jsx($y,{size:16})})]})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:pe.produits.map((nt,pt)=>{const Gt=r.find(Mt=>Mt.id===nt.produitId);return l.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-xl p-4 hover:border-gray-300 hover:shadow-md transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-600 to-gray-700 rounded-lg flex items-center justify-center shadow-md",children:l.jsx(de,{icon:at(Gt?.nom||""),className:"text-lg text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h5",{className:"font-semibold text-gray-900",children:Gt?.nom||"Produit inconnu"}),l.jsxs("div",{className:"flex items-center justify-between mt-1",children:[l.jsxs("span",{className:"text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded-lg font-medium",children:["x",nt.quantiteCommandee]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"text-lg font-bold text-gray-800",children:[((nt.prixUnitaire||0)*nt.quantiteCommandee).toLocaleString("fr-FR")," F"]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:Mt=>{Mt.stopPropagation(),Ze(pe.id,pt)},className:"p-1 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded",title:"Modifier ce produit",children:l.jsx(de,{icon:"mdi:pencil",className:"text-lg"})}),l.jsx(f1,{onConfirm:()=>{z(pe.id,pt),Pt.success(`Produit "${Gt?.nom||"Produit"}" supprim de la commande`)},message:`tes-vous sr de vouloir supprimer "${Gt?.nom||"ce produit"}" de cette commande ?

${pe?.produits.length===1?" Cette action supprimera compltement la commande car c'est le seul produit.":"Les autres produits de la commande seront conservs."}`,confirmText:"Supprimer le produit",cancelText:"Annuler",type:"warning",className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 rounded",onClick:Mt=>Mt.stopPropagation(),title:"Supprimer ce produit de la commande",children:l.jsx(de,{icon:"mdi:close",className:"text-lg"})})]})]})]})]})]}),nt.repartitionCars&&l.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[l.jsxs("div",{className:"text-xs font-medium text-gray-600 mb-2 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-gray-500"}),"Livraisons programmes"]}),l.jsxs("div",{className:"flex gap-2 flex-wrap",children:[nt.repartitionCars.car1_matin&&Number(nt.repartitionCars.car1_matin)>0&&l.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-linear-to-r from-orange-100 to-orange-200 text-orange-800 text-xs font-semibold rounded-full shadow-sm",children:[l.jsx(de,{icon:"mdi:truck",className:"text-sm"}),l.jsxs("span",{children:["Car 1M: ",nt.repartitionCars.car1_matin]})]}),nt.repartitionCars.car2_matin&&Number(nt.repartitionCars.car2_matin)>0&&l.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-linear-to-r from-blue-100 to-blue-200 text-blue-800 text-xs font-semibold rounded-full shadow-sm",children:[l.jsx(de,{icon:"mdi:truck-outline",className:"text-sm"}),l.jsxs("span",{children:["Car 2M: ",nt.repartitionCars.car2_matin]})]}),nt.repartitionCars.car_soir&&Number(nt.repartitionCars.car_soir)>0&&l.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-linear-to-r from-purple-100 to-purple-200 text-purple-800 text-xs font-semibold rounded-full shadow-sm",children:[l.jsx(de,{icon:"mdi:truck-fast",className:"text-sm"}),l.jsxs("span",{children:["Car S: ",nt.repartitionCars.car_soir]})]})]})]})]},pt)})})]})]},pe.id)}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mt-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.length}),l.jsx("div",{className:"text-sm text-gray-500",children:"Commandes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.reduce((pe,Ue)=>pe+Ue.produits.length,0)}),l.jsx("div",{className:"text-sm text-gray-500",children:"Articles"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[e.reduce((pe,Ue)=>pe+Ue.produits.reduce((Qe,at)=>Qe+(at.prixUnitaire||0)*at.quantiteCommandee,0),0).toLocaleString("fr-FR")," FCFA"]}),l.jsx("div",{className:"text-sm text-gray-500",children:"Total"})]})]})})]})})]}),l.jsx(Nl,{isOpen:c,onClose:()=>{$(!1),R(null)},title:h?"Modifier Produit Boutique":"Ajouter un Produit pour la Boutique",size:"xl",children:l.jsx(s9,{produits:r,quantitesActuelles:t,quantiteEnEdition:h,onSave:pe=>{console.log(" Sauvegarde quantit boutique avec rpartition:",pe),B(pe),$(!1),R(null)},onCancel:()=>{$(!1),R(null)}})}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:storefront",className:"text-lg text-amber-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Quantits Boutique"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Dfinissez les quantits  envoyer en boutique"})]})]}),l.jsxs("button",{onClick:()=>$(!0),disabled:c,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:border-gray-400 rounded-lg transition-all disabled:opacity-50 shadow-sm hover:shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter produit"})]})]})}),l.jsx("div",{className:"p-6",children:t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:storefront-outline",className:"text-3xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune quantit boutique"}),l.jsx("p",{className:"text-gray-500 mb-6",children:"Dfinissez les produits  envoyer directement en boutique"}),l.jsxs("button",{onClick:()=>$(!0),className:"inline-flex items-center gap-2 px-6 py-3 text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:border-gray-400 rounded-lg transition-all shadow-sm hover:shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter le premier produit"})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(pe=>{const Ue=r.find(Qe=>Qe.id===pe.produitId);return l.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-xl p-4 hover:border-gray-300 hover:shadow-md transition-all group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-600 to-gray-700 rounded-lg flex items-center justify-center shadow-md",children:l.jsx(de,{icon:"mdi:storefront",className:"text-lg text-white"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900",children:Ue?.nom||"Produit inconnu"}),l.jsx("div",{className:"flex items-center gap-2 mt-1",children:l.jsxs("span",{className:"text-sm text-gray-700 bg-gray-100 px-2 py-1 rounded-lg font-medium",children:[pe.quantite," pice",pe.quantite>1?"s":""]})})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>{R(pe),$(!0)},className:"p-2 text-orange-500 hover:text-orange-700 hover:bg-orange-100 rounded-lg transition-colors",title:"Modifier",children:l.jsx(de,{icon:"mdi:pencil-outline",className:"text-lg"})}),l.jsx("button",{onClick:()=>re(pe.produitId),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-100 rounded-lg transition-colors",title:"Supprimer",children:l.jsx(de,{icon:"mdi:delete-outline",className:"text-lg"})})]})]}),pe.repartitionCars&&l.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[l.jsxs("div",{className:"text-xs font-medium text-gray-600 mb-2 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-gray-500"}),"Rpartition par cars"]}),l.jsxs("div",{className:"space-y-2",children:[pe.repartitionCars.car1_matin>0&&l.jsxs("div",{className:"flex items-center justify-between p-2 bg-orange-50 border border-orange-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:truck",className:"text-orange-600 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-orange-800",children:"Car 1M"})]}),l.jsx("span",{className:"text-xs font-bold text-orange-800",children:pe.repartitionCars.car1_matin})]}),pe.repartitionCars.car2_matin>0&&l.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 border border-blue-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:truck-outline",className:"text-blue-600 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-blue-800",children:"Car 2M"})]}),l.jsx("span",{className:"text-xs font-bold text-blue-800",children:pe.repartitionCars.car2_matin})]}),pe.repartitionCars.car_soir>0&&l.jsxs("div",{className:"flex items-center justify-between p-2 bg-purple-50 border border-purple-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:truck-fast",className:"text-purple-600 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-purple-800",children:"Car S"})]}),l.jsx("span",{className:"text-xs font-bold text-purple-800",children:pe.repartitionCars.car_soir})]})]})]})]},pe.produitId)})}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mt-6",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.length}),l.jsx("div",{className:"text-sm text-gray-500",children:"Produits boutique"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-amber-600",children:t.reduce((pe,Ue)=>pe+Ue.quantite,0)}),l.jsx("div",{className:"text-sm text-gray-500",children:"Total pices"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-bold text-orange-600",children:t.reduce((pe,Ue)=>pe+(Ue.repartitionCars?.car1_matin||0),0)}),l.jsx("div",{className:"text-xs text-gray-500",children:"Car 1M"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-bold text-blue-600",children:t.reduce((pe,Ue)=>pe+(Ue.repartitionCars?.car2_matin||0),0)}),l.jsx("div",{className:"text-xs text-gray-500",children:"Car 2M"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-bold text-purple-600",children:t.reduce((pe,Ue)=>pe+(Ue.repartitionCars?.car_soir||0),0)}),l.jsx("div",{className:"text-xs text-gray-500",children:"Car S"})]})]})})]})})]}),n?.totauxParProduit&&n.totauxParProduit.length>0&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:chart-pie",className:"text-lg text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Programme de Production"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Rpartition des quantits par produit et par car de livraison"})]})]})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.totauxParProduit.reduce((pe,Ue)=>pe+(Ue.repartitionCar1Matin||0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Car 1 - Matin"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[l.jsx(de,{icon:"mdi:clock-time-eight",className:"text-sm"}),l.jsx("span",{className:"text-sm",children:"06:00 - 10:00"})]})]})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:truck-delivery-outline",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.totauxParProduit.reduce((pe,Ue)=>pe+(Ue.repartitionCar2Matin||0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Car 2 - Matin"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[l.jsx(de,{icon:"mdi:clock-time-nine",className:"text-sm"}),l.jsx("span",{className:"text-sm",children:"08:00 - 12:00"})]})]})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:truck-fast",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.totauxParProduit.reduce((pe,Ue)=>pe+(Ue.repartitionCarSoir||0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Car - Soir"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[l.jsx(de,{icon:"mdi:clock-time-five",className:"text-sm"}),l.jsx("span",{className:"text-sm",children:"15:00 - 19:00"})]})]})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.totauxParProduit.reduce((pe,Ue)=>pe+Ue.totalGlobal,0)}),l.jsx("div",{className:"text-gray-100 text-xs",children:"pices"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Total Gnral"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-200",children:[l.jsx(de,{icon:"mdi:sigma",className:"text-sm"}),l.jsx("span",{className:"text-sm",children:"Toutes livraisons"})]})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Dtail par produit"}),l.jsxs("span",{className:"ml-auto text-sm font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[n.totauxParProduit.length," produit",n.totauxParProduit.length>1?"s":""]})]}),l.jsx("div",{className:"grid gap-6 lg:grid-cols-2 xl:grid-cols-3",children:n.totauxParProduit.map(pe=>{const Ue=Qe=>{const at=Qe?.toLowerCase()||"";return at.includes("baguette")?"mdi:baguette":at.includes("pain")?"mdi:bread-slice":at.includes("croissant")?"mdi:croissant":at.includes("brioche")?"mdi:muffin":at.includes("tarte")?"mdi:pie":at.includes("gateau")||at.includes("gteau")?"mdi:cake":at.includes("sandwich")?"mdi:food":at.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"bg-linear-to-br from-white to-gray-50 border border-gray-200 rounded-2xl p-6 hover:border-purple-300 hover:shadow-2xl transition-all duration-300 group",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-slate-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx(de,{icon:Ue(pe.produit?.nom||""),className:"text-2xl text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-bold text-xl text-gray-900 mb-1",children:pe.produit?.nom||pe.produitId}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl font-bold text-gray-800",children:pe.totalGlobal}),l.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:"pices"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center border border-gray-200 group-hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-group",className:"text-white text-sm"})}),l.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Clients"})]}),l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:pe.totalClient})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center border border-gray-200 group-hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:storefront",className:"text-white text-sm"})}),l.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Boutique"})]}),l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:pe.totalBoutique})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-gray-500"}),l.jsx("h5",{className:"text-sm font-semibold text-gray-700",children:"Planning de livraison"})]}),l.jsxs("div",{className:"space-y-2",children:[(pe.repartitionCar1Matin||0)>0&&l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck",className:"text-white"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-800",children:"Car 1 - Matin"}),l.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:clock-time-eight",className:"text-xs"}),"06:00 - 10:00"]})]})]}),l.jsx("div",{className:"text-xl font-bold text-gray-800",children:pe.repartitionCar1Matin})]}),(pe.repartitionCar2Matin||0)>0&&l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-outline",className:"text-white"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-800",children:"Car 2 - Matin"}),l.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:clock-time-nine",className:"text-xs"}),"08:00 - 12:00"]})]})]}),l.jsx("div",{className:"text-xl font-bold text-gray-800",children:pe.repartitionCar2Matin})]}),(pe.repartitionCarSoir||0)>0&&l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-fast",className:"text-white"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-800",children:"Car - Soir"}),l.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:clock-time-five",className:"text-xs"}),"15:00 - 19:00"]})]})]}),l.jsx("div",{className:"text-xl font-bold text-gray-800",children:pe.repartitionCarSoir})]})]})]})]},pe.produitId)})})]})]})]})]}),l.jsx("button",{onClick:()=>$(!0),disabled:c,className:"fixed bottom-6 right-6 w-16 h-16 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 disabled:opacity-50 z-50 flex items-center justify-center group",title:"Ajouter un produit boutique",children:l.jsxs("div",{className:"relative",children:[l.jsx(de,{icon:"mdi:storefront-plus",className:"text-2xl transition-transform group-hover:scale-110"}),l.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]})})]})},l9=`
  @media print {
    @page {
      margin: 0.5in;
      size: A4;
    }

    body {
      font-size: 12pt;
      line-height: 1.4;
    }

    .print\\:break-inside-avoid {
      break-inside: avoid;
    }

    .print\\:break-before-page {
      break-before: page;
    }

    .print\\:bg-white {
      background-color: white !important;
    }

    .print\\:text-black {
      color: black !important;
    }

    .print\\:border-black {
      border-color: black !important;
    }

    .print\\:shadow-none {
      box-shadow: none !important;
    }

    .print\\:rounded-none {
      border-radius: 0 !important;
    }

    .print\\:hidden {
      display: none !important;
    }

    .print\\:block {
      display: block !important;
    }

    .print\\:grid-cols-3 {
      grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
    }

    .print\\:gap-4 {
      gap: 1rem !important;
    }

    .print\\:p-4 {
      padding: 1rem !important;
    }

    .print\\:max-w-none {
      max-width: none !important;
    }

    .print\\:space-y-6 > * + * {
      margin-top: 1.5rem !important;
    }

    .print\\:mb-4 {
      margin-bottom: 1rem !important;
    }

    .print\\:mt-8 {
      margin-top: 2rem !important;
    }

    .print\\:text-lg {
      font-size: 1.125rem !important;
    }

    .print\\:text-2xl {
      font-size: 1.5rem !important;
    }

    .print\\:text-sm {
      font-size: 0.875rem !important;
    }

    .print\\:border-2 {
      border-width: 2px !important;
    }

    .print\\:bg-gray-200 {
      background-color: #e5e7eb !important;
    }
  }
`,c9=()=>{const{programmeActuel:n,chargerProgramme:e,produits:t}=_l(),[r,i]=he.useState(new Date().toISOString().split("T")[0]),c=(()=>{const p=new Map;return n?.commandesClients&&n.commandesClients.filter(v=>v.statut!=="annulee").forEach(v=>{v.produits.forEach(_=>{const b=p.get(_.produitId)||{car1Matin:0,car2Matin:0,carSoir:0},T=Number(_.repartitionCars?.car1_matin)||0,I=Number(_.repartitionCars?.car2_matin)||0,L=Number(_.repartitionCars?.car_soir)||0;p.set(_.produitId,{car1Matin:b.car1Matin+T,car2Matin:b.car2Matin+I,carSoir:b.carSoir+L})})}),p})(),d=()=>{if(console.log(" Bouton impression cliqu"),console.log(" Programme actuel:",n),console.log(" Produits:",t?.length,"produits disponibles"),n&&t){console.log(" Gnration du rapport HTML...");try{Pg.generateProductionReportHTML(n,t),console.log(" Rapport gnr avec succs")}catch(p){console.error(" Erreur lors de la gnration:",p)}}else console.warn(" Donnes manquantes:"),console.warn("  - Programme actuel:",!!n),console.warn("  - Produits:",!!t,`(${t?.length||0} lments)`)};he.useEffect(()=>{const p=new Date(r);e(p)},[e,r]),he.useEffect(()=>{const p=document.createElement("style");return p.textContent=l9,document.head.appendChild(p),()=>{document.head.removeChild(p)}},[]);const h=n?.totauxParProduit||[],f=p=>{const v=p?.toLowerCase()||"";return v.includes("baguette")?"mdi:baguette":v.includes("pain")?"mdi:bread-slice":v.includes("croissant")?"mdi:croissant":v.includes("brioche")?"mdi:muffin":v.includes("tarte")?"mdi:pie":v.includes("gateau")||v.includes("gteau")?"mdi:cake":v.includes("sandwich")?"mdi:food":v.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"min-h-screen bg-gray-50 print:bg-white print:text-black",children:[l.jsx("div",{className:"hidden print:block print:mb-4",children:l.jsxs("div",{className:"text-center border-b-2 border-black pb-4 mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold mb-2",children:" PROGRAMME DE PRODUCTION"}),l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("span",{children:["Production: ",n?n.dateProduction.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):new Date().toLocaleDateString("fr-FR")]}),l.jsxs("span",{children:["Statut: ",n?.statut==="envoye"?" Confirm":" En attente"]}),l.jsxs("span",{children:["Imprim le: ",new Date().toLocaleDateString("fr-FR"),"  ",new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]}),n&&l.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Programme cr le ",n.dateCreation.toLocaleDateString("fr-FR"),"  ",n.dateCreation.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]})}),l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4 print:hidden",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:chef-hat",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Vue Boulanger"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Programme de production journalier"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 border border-gray-300 rounded-lg px-3 py-1.5 focus-within:ring-2 focus-within:ring-blue-500 transition-all",children:[l.jsx(de,{icon:"mdi:calendar",className:"text-gray-500"}),l.jsx("input",{type:"date",value:r,onChange:p=>i(p.target.value),className:"bg-transparent border-none text-sm text-gray-700 font-medium focus:ring-0 cursor-pointer outline-none"})]}),n&&l.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[l.jsx(de,{icon:"mdi:printer",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Imprimer le document"})]}),n&&l.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium border ${n.statut==="envoye"?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:[l.jsx(de,{icon:n.statut==="envoye"?"mdi:check-circle":"mdi:clock-outline",className:"text-sm"}),n.statut==="envoye"?"Confirm":"En attente"]})]})]})}),l.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4 print:hidden",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:calendar-clock",className:"text-lg text-blue-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Programme de Production"})]}),n&&l.jsx("div",{className:"bg-radient-to-l from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4 shadow-sm min-w-[320px]",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex-1 text-right",children:[l.jsxs("div",{className:"flex items-center justify-end gap-2 mb-1",children:[l.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Production programme"}),l.jsx(de,{icon:"mdi:calendar-check",className:"text-blue-600"})]}),l.jsx("div",{className:"text-lg font-bold text-gray-900",children:n.dateProduction.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),l.jsxs("div",{className:"flex items-center justify-end gap-1 mt-1 text-xs text-gray-600",children:[l.jsxs("span",{children:["Cr le ",n.dateCreation.toLocaleDateString("fr-FR"),"  ",n.dateCreation.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]}),l.jsx(de,{icon:"mdi:clock-outline",className:"text-gray-400"})]})]}),l.jsx("div",{className:"w-12 h-12 bg-radient-to-r from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shrink-0",children:l.jsx(de,{icon:"mdi:factory",className:"text-2xl text-white"})})]})})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto p-6 space-y-8 print:max-w-none print:p-4 print:space-y-6",children:!n||h.length===0?l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-12 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:bread-slice",className:"text-3xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Pas de production"}),l.jsx("p",{className:"text-gray-500",children:"Aucun programme n'a t dfini pour le moment."}),l.jsxs("button",{onClick:()=>{const p=new Date(r);e(p)},className:"mt-6 inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[l.jsx(de,{icon:"mdi:refresh",className:"text-lg"}),l.jsx("span",{children:"Actualiser"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"bg-gray-700 text-white rounded-xl p-6 shadow-sm print:bg-white print:text-black print:border-2 print:border-black print:shadow-none print:rounded-none",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-gray-600 rounded-lg print:bg-gray-200 print:text-black",children:l.jsx(de,{icon:"mdi:sigma",className:"text-2xl"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold print:text-lg",children:"TOTAL GNRAL"}),l.jsx("p",{className:"text-gray-400 text-sm print:text-black print:text-sm",children:"Production complte (Clients + Boutique)"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-4xl font-bold print:text-2xl",children:h.reduce((p,v)=>p+v.totalGlobal,0)}),l.jsx("div",{className:"text-gray-400 text-sm font-medium print:text-black",children:"pices au total"})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.reduce((p,v)=>p+(v.totalClient||0),0)>0&&l.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm print:border-black print:shadow-none print:rounded-none",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-group",className:"text-lg text-gray-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:"Production Clients"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Commandes clients uniquement"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:h.reduce((p,v)=>p+(v.totalClient||0),0)}),l.jsx("div",{className:"text-xs text-gray-500",children:"pices"})]})]})}),h.reduce((p,v)=>p+(v.totalBoutique||0),0)>0&&l.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm print:border-black print:shadow-none print:rounded-none",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:storefront",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:"Production Boutique"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Vente directe uniquement"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.reduce((p,v)=>p+(v.totalBoutique||0),0)}),l.jsx("div",{className:"text-xs text-gray-500",children:"pices"})]})]})})]})]}),Array.from(c.entries()).some(([p,v])=>v.car1Matin+v.car2Matin>0)&&l.jsxs("section",{"data-section":"production-matin",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunrise",className:"text-xl text-gray-500"})}),l.jsx("h2",{className:"text-2xl font-bold text-gray-700",children:"Production Clients - Matin"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 print:grid-cols-3 print:gap-4",children:Array.from(c.entries()).filter(([p,v])=>v.car1Matin+v.car2Matin>0).map(([p,v])=>{const _=h.find(L=>L.produitId===p)?.produit,b=v.car1Matin,T=v.car2Matin,I=b+T;return l.jsxs("div",{className:"relative bg-white border border-gray-200 border-t-4 border-t-gray-600 rounded-xl p-6 hover:border-gray-300 hover:shadow-md transition-all print:border-black print:shadow-none print:rounded-none print:p-4 print:break-inside-avoid flex flex-col h-full",children:[l.jsx("div",{className:"absolute top-3 right-4 text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Matin"}),l.jsxs("div",{className:"flex items-center gap-4 mb-6 pt-2",children:[l.jsx("div",{className:"w-14 h-14 bg-gray-600 rounded-xl flex items-center justify-center shadow-sm shrink-0",children:l.jsx(de,{icon:f(_?.nom||""),className:"text-2xl text-white"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:_?.nom||"Produit"})]}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"space-y-3 mb-4",children:[b>0&&l.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center border border-gray-100",children:[l.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Car 1 Matin"}),l.jsx("div",{className:"text-3xl font-bold text-gray-700",children:b}),l.jsx("div",{className:"text-xs text-gray-500",children:"pices"})]}),T>0&&l.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center border border-gray-100",children:[l.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Car 2 Matin"}),l.jsx("div",{className:"text-3xl font-bold text-gray-700",children:T}),l.jsx("div",{className:"text-xs text-gray-500",children:"pices"})]})]}),l.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100 mt-auto",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Total Matin Clients"}),l.jsxs("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:"text-2xl font-bold text-gray-800",children:I}),l.jsx("span",{className:"text-sm text-gray-500",children:"pc"})]})]})]})]},`matin-${p}`)})})]}),Array.from(c.entries()).some(([p,v])=>v.carSoir>0)&&l.jsxs("section",{className:"pt-8 border-t border-gray-200","data-section":"production-soir",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunset",className:"text-xl text-gray-600"})}),l.jsx("h2",{className:"text-2xl font-bold text-gray-600",children:"Production Clients - Soir"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 print:grid-cols-3 print:gap-4",children:Array.from(c.entries()).filter(([p,v])=>v.carSoir>0).map(([p,v])=>{const _=h.find(T=>T.produitId===p)?.produit,b=v.carSoir;return l.jsxs("div",{className:"relative bg-white border border-gray-200 border-t-4 border-t-gray-300 rounded-xl p-6 hover:border-gray-300 hover:shadow-md transition-all print:border-black print:shadow-none print:rounded-none print:p-4 print:break-inside-avoid",children:[l.jsx("div",{className:"absolute top-3 right-4 text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Soir"}),l.jsxs("div",{className:"flex items-center gap-4 mb-8 pt-2",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-400 rounded-xl flex items-center justify-center shadow-sm shrink-0",children:l.jsx(de,{icon:f(_?.nom||""),className:"text-3xl text-white"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:_?.nom||"Produit"})]}),l.jsxs("div",{className:"text-center mb-2",children:[l.jsx("div",{className:"text-7xl font-bold text-gray-800 tracking-tight leading-none",children:b}),l.jsx("div",{className:"text-lg text-gray-500 font-medium mt-1",children:"pices clients"})]})]},`soir-${p}`)})})]}),n?.quantitesBoutique&&n.quantitesBoutique.length>0&&l.jsxs("section",{className:"pt-8 border-t border-gray-200","data-section":"production-boutique",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:l.jsx(de,{icon:"mdi:storefront",className:"text-xl text-blue-600"})}),l.jsx("h2",{className:"text-2xl font-bold text-blue-700",children:"Production pour Boutique"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 print:grid-cols-3 print:gap-4",children:n.quantitesBoutique.map(p=>{const v=t?.find(b=>b.id===p.produitId),_=p.repartitionCars;return l.jsxs("div",{className:"relative bg-white border-2 border-blue-200 rounded-xl p-6 hover:shadow-lg transition-all print:border-black print:shadow-none print:rounded-none print:p-4 print:break-inside-avoid",children:[l.jsx("div",{className:"absolute top-3 right-4 text-xs font-bold text-blue-500 uppercase tracking-widest",children:"Boutique"}),l.jsxs("div",{className:"flex items-center gap-4 mb-6 pt-2",children:[l.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center shadow-sm shrink-0",children:l.jsx(de,{icon:f(v?.nom||""),className:"text-2xl text-white"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:v?.nom||"Produit"})]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4 text-center",children:[l.jsx("div",{className:"text-sm font-bold text-blue-600 uppercase mb-1",children:"Total Boutique"}),l.jsx("div",{className:"text-4xl font-bold text-blue-800",children:p.quantite}),l.jsx("div",{className:"text-sm text-blue-600",children:"pices"})]}),_&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-3",children:"Rpartition par cars:"}),_.car1_matin>0&&l.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded-lg",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Car 1 Matin"}),l.jsx("span",{className:"font-bold text-gray-800",children:_.car1_matin})]}),_.car2_matin>0&&l.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded-lg",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Car 2 Matin"}),l.jsx("span",{className:"font-bold text-gray-800",children:_.car2_matin})]}),_.car_soir>0&&l.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 rounded-lg",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Car Soir"}),l.jsx("span",{className:"font-bold text-gray-800",children:_.car_soir})]})]})]},`boutique-${p.produitId}`)})})]}),!Array.from(c.entries()).some(([p,v])=>v.car1Matin+v.car2Matin+v.carSoir>0)&&(!n?.quantitesBoutique||n.quantitesBoutique.length===0)&&l.jsx("div",{className:"text-center py-12 text-gray-500",children:l.jsx("p",{children:"Aucune quantit  produire trouve dans le programme."})}),l.jsx("div",{className:"hidden print:block print:break-before-page print:mt-8",children:l.jsxs("div",{className:"border-t-2 border-black pt-4",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:" RSUM DE PRODUCTION"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[l.jsxs("div",{className:"border border-black p-3",children:[l.jsx("div",{className:"font-bold mb-2",children:" PRODUCTION CLIENTS"}),l.jsxs("div",{children:["Matin: ",Array.from(c.entries()).reduce((p,[v,_])=>p+_.car1Matin+_.car2Matin,0)," pices"]}),l.jsxs("div",{children:["Soir: ",Array.from(c.entries()).reduce((p,[v,_])=>p+_.carSoir,0)," pices"]}),l.jsxs("div",{className:"font-bold",children:["Total: ",h.reduce((p,v)=>p+(v.totalClient||0),0)," pices"]})]}),l.jsxs("div",{className:"border border-black p-3",children:[l.jsx("div",{className:"font-bold mb-2",children:" PRODUCTION BOUTIQUE"}),l.jsxs("div",{children:["Total: ",h.reduce((p,v)=>p+v.totalBoutique,0)," pices"]}),l.jsxs("div",{children:["Produits: ",h.filter(p=>p.totalBoutique>0).length]})]}),l.jsxs("div",{className:"border border-black p-3",children:[l.jsx("div",{className:"font-bold mb-2",children:" TOTAL GNRAL"}),l.jsxs("div",{className:"text-xl font-bold",children:[h.reduce((p,v)=>p+v.totalGlobal,0)," pices"]})]})]}),l.jsxs("div",{className:"mt-4 text-xs text-center border-t border-gray-300 pt-2",children:["Document gnr automatiquement - Boulangerie App - ",new Date().toLocaleDateString("fr-FR")]})]})})]})}),n&&l.jsx("button",{onClick:()=>{const p=document.querySelector('[data-section="production-matin"]')||document.querySelector('[data-section="production-soir"]')||document.querySelector('[data-section="production-boutique"]');p&&p.scrollIntoView({behavior:"smooth",block:"start"})},className:"fixed bottom-6 right-6 z-10 bg-gray-800 text-white rounded-full p-4 shadow-lg hover:bg-gray-700 transition-all duration-300 hover:scale-105 print:hidden",title:"Aller  la section Production",children:l.jsx(de,{icon:"mdi:arrow-down-bold",className:"text-xl"})})]})},y0=Nc((n,e)=>({livreurs:[],livreurEnEdition:null,isLoadingLivreurs:!1,chargerLivreurs:async()=>{n({isLoadingLivreurs:!0});try{const r=(await Cn.getAll("livreurs")).map(i=>({...i,createdAt:i.createdAt instanceof Date?i.createdAt:hr(i.createdAt),updatedAt:i.updatedAt instanceof Date?i.updatedAt:hr(i.updatedAt)}));n({livreurs:r,isLoadingLivreurs:!1})}catch(t){throw console.error("Erreur lors du chargement des livreurs:",t),n({isLoadingLivreurs:!1}),t}},ajouterLivreur:async t=>{n({isLoadingLivreurs:!0});try{const r=new Date,i={...t,createdAt:r,updatedAt:r},c={id:(await Cn.create("livreurs",i)).id,...i};n(d=>({livreurs:[...d.livreurs,c],isLoadingLivreurs:!1}))}catch(r){throw console.error("Erreur lors de l'ajout du livreur:",r),n({isLoadingLivreurs:!1}),r}},modifierLivreur:async(t,r)=>{n({isLoadingLivreurs:!0});try{const i={...r,updatedAt:new Date};await Cn.update("livreurs",t,i),n(a=>({livreurs:a.livreurs.map(c=>c.id===t?{...c,...i}:c),isLoadingLivreurs:!1,livreurEnEdition:null}))}catch(i){throw console.error("Erreur lors de la modification du livreur:",i),n({isLoadingLivreurs:!1}),i}},supprimerLivreur:async t=>{n({isLoadingLivreurs:!0});try{await Cn.delete("livreurs",t),n(r=>({livreurs:r.livreurs.filter(i=>i.id!==t),isLoadingLivreurs:!1}))}catch(r){throw console.error("Erreur lors de la suppression du livreur:",r),n({isLoadingLivreurs:!1}),r}},setLivreurEnEdition:t=>{n({livreurEnEdition:t})},getLivreurById:t=>{const{livreurs:r}=e();return r.find(i=>i.id===t)},getLivreursActifs:()=>{const{livreurs:t}=e();return t.filter(r=>r.active)}})),u9=()=>{const{commandesClients:n,chargerProgramme:e,supprimerCommandesLivreur:t}=_l(),{livreurs:r,chargerLivreurs:i}=y0(),{clients:a,produits:c,chargerProduits:d,chargerClients:h}=_u(),[f,p]=he.useState(new Date().toISOString().split("T")[0]),[v,_]=he.useState("tous");he.useEffect(()=>{(async()=>{try{await Promise.all([d(),h(),i()]),await e(new Date(f))}catch(B){console.error("Erreur lors de l'initialisation:",B)}})()},[f,e,d,h,i]);const T=(()=>{const z=new Map;return console.log("Debug livraisons:"),console.log("Nombre de commandes clients:",n.length),console.log("Nombre de clients:",a.length),n.forEach(B=>{const re=a.find(D=>D.id===B.clientId);re||console.warn(" Client non trouv pour commande:",{commandeClientId:B.clientId,clientsDisponibles:a.map(D=>({id:D.id,nom:D.nom}))});const ne=re?.livreurId||"non-assigne";z.has(ne)||z.set(ne,{livreur:r.find(D=>D.id===ne),commandesParCar:new Map});const V=z.get(ne);B.produits.forEach(D=>{D.repartitionCars&&Object.entries(D.repartitionCars).forEach(([k,$])=>{if($&&$>0){const S=k;V.commandesParCar.has(S)||V.commandesParCar.set(S,[]),V.commandesParCar.get(S).push({commande:B,client:re,produit:c.find(R=>R.id===D.produitId),quantite:$})}})})}),Array.from(z.entries())})(),I=z=>{try{Pg.generateDeliveryReportHTML(z,f),Pt.success("Rapport ouvert dans une nouvelle fentre !")}catch(B){console.error("Erreur lors de la gnration du rapport:",B),Pt.error("Erreur lors de la gnration du rapport")}},L=()=>{try{Pg.generateGlobalReportHTML(T,f),Pt.success("Rapport global ouvert dans une nouvelle fentre !")}catch(z){console.error("Erreur lors de la gnration du rapport:",z),Pt.error("Erreur lors de la gnration du rapport")}},j=z=>{const B=z?.toLowerCase()||"";return B.includes("baguette")?"mdi:baguette":B.includes("pain")?"mdi:bread-slice":B.includes("croissant")?"mdi:croissant":B.includes("brioche")?"mdi:muffin":B.includes("tarte")?"mdi:pie":B.includes("gateau")||B.includes("gteau")?"mdi:cake":B.includes("sandwich")?"mdi:food":B.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"},U=()=>({headerBg:"bg-slate-600",bg:"bg-gray-50",summaryBg:"bg-slate-600",border:"border-gray-200",text:"text-gray-700",badgeBg:"bg-gray-100",badgeText:"text-gray-600",accent:"bg-slate-600"});return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Programme de Livraison"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Vue dtaille par livreur et par car de livraison"})]})]}),l.jsx("div",{className:"flex items-center gap-3",children:l.jsxs("button",{onClick:L,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200",disabled:T.length===0,children:[l.jsx(de,{icon:"mdi:printer",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Rapport Global Imprimable"})]})})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:filter",className:"text-lg text-blue-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filtres"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de livraison"}),l.jsx("input",{type:"date",value:f,onChange:z=>p(z.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 font-medium w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Car de livraison"}),l.jsxs("select",{value:v,onChange:z=>_(z.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 font-medium w-full",children:[l.jsx("option",{value:"tous",children:"Tous les cars"}),l.jsx("option",{value:"car1_matin",children:oc.car1_matin}),l.jsx("option",{value:"car2_matin",children:oc.car2_matin}),l.jsx("option",{value:"car_soir",children:oc.car_soir})]})]})]})]}),T.length===0?l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:package-variant-closed",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune livraison prvue"}),l.jsx("p",{className:"text-gray-500",children:"Aucune commande client pour cette date"})]})})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-blue-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:account-group",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:T.length}),l.jsx("div",{className:"text-blue-200 text-xs",children:"livreurs"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Livreurs Actifs"})]}),l.jsxs("div",{className:"bg-green-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.length}),l.jsx("div",{className:"text-green-200 text-xs",children:"commandes"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Commandes"})]}),l.jsxs("div",{className:"bg-orange-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:T.reduce((z,[,B])=>z+B.commandesParCar.size,0)}),l.jsx("div",{className:"text-orange-200 text-xs",children:"tournes"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Tournes Prvues"})]}),l.jsxs("div",{className:"bg-gray-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:map-marker",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:Array.from(new Set(T.flatMap(([,z])=>Array.from(z.commandesParCar.values()).flat().map(B=>B.client?.id)))).length}),l.jsx("div",{className:"text-gray-200 text-xs",children:"adresses"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Points de Livraison"})]})]}),T.map(([z,B])=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:B.livreur?"mdi:truck":"mdi:help-circle",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:B.livreur?`${B.livreur.nom} ${B.livreur.vehicule?`(${B.livreur.vehicule})`:""}`:"Clients non assigns"}),l.jsx("p",{className:"text-sm text-gray-500",children:B.livreur?.telephone?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:phone",className:"text-sm"}),B.livreur.telephone]}):"Clients sans livreur assign"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:()=>I(B),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all duration-200",title:"Gnrer le rapport imprimable pour ce livreur",children:[l.jsx(de,{icon:"mdi:printer",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Imprimer"})]}),B.livreur&&l.jsxs(f1,{onConfirm:()=>{t(z),Pt.success(` Toutes les commandes de "${B.livreur?.nom}" ont t supprimes dfinitivement.`)},title:"Supprimer le programme de livraison",message:`Supprimer dfinitivement toutes les commandes de "${B.livreur?.nom}" pour le ${f} ?`,confirmText:"Supprimer dfinitivement",cancelText:"Annuler",type:"danger",className:"inline-flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all duration-200",children:[l.jsx(de,{icon:"mdi:delete-forever",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Supprimer Programme"})]})]})]})}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"space-y-8",children:Array.from(B.commandesParCar.entries()).sort(([re],[ne])=>{const V=["car1_matin","car2_matin","car_soir"];return V.indexOf(re)-V.indexOf(ne)}).filter(([re])=>v==="tous"||v===re).map(([re,ne])=>{const V=U();return l.jsxs("div",{className:`relative bg-white border ${V.border} rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all duration-200`,children:[l.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${V.accent}`}),l.jsx("div",{className:`${V.headerBg} p-4 mb-4`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-xl text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:oc[re]}),l.jsxs("p",{className:"text-white/70 text-sm",children:[ne.length," livraison(s) programme(s)"]})]})]}),l.jsx("div",{className:"bg-white/10 px-3 py-1.5 rounded-md",children:l.jsxs("span",{className:"text-white text-sm font-medium",children:[ne.length," stop",ne.length>1?"s":""]})})]})}),l.jsxs("div",{className:"px-6 pb-6",children:[l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:(()=>{const D=new Map;return ne.forEach(k=>{const $=k.client?.id||"inconnu";D.has($)||D.set($,{client:k.client,produits:[]}),D.get($).produits.push({produit:k.produit,quantite:Number(k.quantite)||0})}),Array.from(D.values()).map((k,$)=>l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 hover:shadow-sm transition-all",children:[l.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[l.jsx("div",{className:`w-10 h-10 ${V.accent} rounded-lg flex items-center justify-center`,children:l.jsx(de,{icon:"mdi:account",className:"text-white text-lg"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:k.client?.nom||"Client inconnu"}),l.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:k.client?.adresse||"Adresse non dfinie"})]})]}),l.jsx("div",{className:"border-t border-gray-100 pt-3 space-y-2",children:k.produits.map((S,R)=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:j(S.produit?.nom||""),className:"text-gray-600 text-sm"})}),l.jsx("div",{className:"flex-1",children:l.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.produit?.nom||"Produit inconnu"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg font-bold text-gray-800",children:S.quantite}),l.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:"pcs"})]})]},R))})]},$))})()}),l.jsxs("div",{className:`mt-4 ${V.summaryBg} border-l-4 ${V.accent} rounded-lg p-4`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(de,{icon:"mdi:chart-box",className:"text-white"}),l.jsxs("h4",{className:"font-medium text-white",children:["Rsum ",oc[re]]})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{const D=ne.reduce((k,$)=>{const S=$.produit?.nom||"Inconnu",R=Number($.quantite)||0;return k[S]=(k[S]||0)+R,k},{});return Object.entries(D).map(([k,$])=>l.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg border border-gray-200 shadow-sm",children:[l.jsx(de,{icon:j(k),className:"text-gray-600 text-sm"}),l.jsx("span",{className:"text-sm font-medium text-gray-900",children:k}),l.jsx("span",{className:"text-sm font-bold text-gray-900 bg-gray-100 px-2 py-1 rounded-full",children:$})]},k))})()})]})]})]},re)})})})]},z))]})]})]})},d9=()=>{const{invendusClients:n,chargerInvendusDuJour:e,marquerAucunRetourClient:t,sauvegarderRetoursClient:r,isLoading:i}=sm(),{commandesClients:a,chargerProgramme:c}=_l(),{clients:d,produits:h,chargerClients:f,chargerProduits:p}=_u(),v=Wy(),[_,b]=he.useState(new Date().toISOString().split("T")[0]),[T,I]=he.useState({});he.useEffect(()=>{(async()=>{try{await Promise.all([f(),p(),c(new Date(_))]),await e(new Date(_))}catch(V){console.error("Erreur lors de l'initialisation:",V)}})()},[_,f,p,c,e]);const L=a.map(ne=>{const V=d.find(k=>k.id===ne.clientId);if(!V)return null;const D=ne.produits.map(k=>{const $=h.find(me=>me.id===k.produitId),R=Object.values(k.repartitionCars||{}).reduce((me,je)=>{const Fe=typeof je=="number"?je:parseInt(String(je))||0,J=isNaN(Fe)?0:Math.min(Fe,9999);return me+J},0),be=n.find(me=>me.clientId===ne.clientId)?.produits.find(me=>me.produitId===k.produitId)?.invendus||0,Q=T[ne.clientId]?.[k.produitId],ae=Q!==void 0?Q:be;return{produitId:k.produitId,produit:$,quantiteLivree:R,invendus:ae,vendu:R-ae}}).filter(k=>k.quantiteLivree>0);return{...V,commande:ne,produits:D}}).filter(ne=>ne!==null),j=(ne,V,D)=>{const k=parseInt(D)||0;I($=>({...$,[ne]:{...$[ne],[V]:k}}))},U=async ne=>{const V=d.find(D=>D.id===ne);try{await v.confirm({title:"Confirmer aucun retour",message:`Confirmer qu'il n'y a aucun retour pour le client "${V?.nom||"Inconnu"}" ?

Cela finalisera les retours pour la facturation.`,confirmText:"Confirmer",cancelText:"Annuler",type:"info"})&&(await t(ne,new Date(_)),await e(new Date(_)),Pt.success(` Aucun retour confirm pour ${V?.nom||"le client"}`))}catch(D){console.error('Erreur lors du marquage "aucun retour":',D),Pt.error(' Erreur lors du marquage "aucun retour"')}},z=ne=>n.some(V=>V.clientId===ne&&V.dateLivraison.toDateString()===new Date(_).toDateString()&&V.retoursCompletes),B=async ne=>{const V=d.find(k=>k.id===ne),D=L.find(k=>k.id===ne);if(!D){Pt.error("Client non trouv");return}try{if(await v.confirm({title:"Enregistrer les retours",message:`Confirmer l'enregistrement des retours pour le client "${V?.nom||"Inconnu"}" ?

Cela finalisera les retours pour la facturation.`,confirmText:"Enregistrer",cancelText:"Annuler",type:"info"})){const $=D.produits.map(S=>({produitId:S.produitId,produit:S.produit,quantiteLivree:S.quantiteLivree,invendus:S.invendus,vendu:S.vendu}));await r(ne,new Date(_),$),await e(new Date(_)),I(S=>{const R={...S};return delete R[ne],R}),Pt.success(` Retours enregistrs pour ${V?.nom||"le client"}`)}}catch(k){console.error("Erreur lors de l'enregistrement des retours:",k),Pt.error(" Erreur lors de l'enregistrement des retours")}},re=ne=>{const V=ne?.toLowerCase()||"";return V.includes("baguette")?"mdi:baguette":V.includes("pain")?"mdi:bread-slice":V.includes("croissant")?"mdi:croissant":V.includes("brioche")?"mdi:muffin":V.includes("tarte")?"mdi:pie":V.includes("gateau")||V.includes("gteau")?"mdi:cake":V.includes("sandwich")?"mdi:food":V.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-linear-to-r from-red-600 to-rose-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:keyboard-return",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Saisie des Retours Clients"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Enregistrez les invendus de chaque client pour la facturation"})]})]}),l.jsx("div",{className:"flex gap-3",children:l.jsxs("button",{onClick:async()=>{await Promise.all([f(),p(),c(new Date(_))]),await e(new Date(_)),Pt.success("Donnes recharges depuis la base !")},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all shadow-md",disabled:i,children:[l.jsx(de,{icon:"mdi:refresh",className:"text-lg"}),l.jsx("span",{children:"Recharger"})]})})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:calendar",className:"text-lg text-red-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Date de livraison"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("input",{type:"date",value:_,onChange:ne=>b(ne.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900 font-medium"}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Retours pour ",new Date(_).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),L.length===0?l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:package-variant-closed",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune livraison prvue"}),l.jsx("p",{className:"text-gray-500 mb-6",children:"Aucune commande client pour cette date"}),l.jsxs("button",{className:"inline-flex items-center gap-2 px-6 py-3 bg-linear-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Crer une commande"})]})]})})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:account-group",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:L.length}),l.jsx("div",{className:"text-gray-300 text-xs",children:"clients"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Clients Livrs"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:L.reduce((ne,V)=>ne+V.produits.reduce((D,k)=>D+k.quantiteLivree,0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Livr"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-down",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:L.reduce((ne,V)=>ne+V.produits.reduce((D,k)=>D+k.invendus,0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Invendus"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:chart-line",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:L.reduce((ne,V)=>ne+V.produits.reduce((D,k)=>D+k.vendu,0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Vendu"})]})]}),L.map(ne=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 ${z(ne.id)?"bg-green-100":"bg-orange-100"} rounded-lg flex items-center justify-center`,children:l.jsx(de,{icon:z(ne.id)?"mdi:check":"mdi:account",className:`text-lg ${z(ne.id)?"text-green-600":"text-orange-600"}`})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:ne.nom}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:map-marker",className:"text-sm"}),ne.adresse]}),ne.telephone&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:phone",className:"text-sm"}),ne.telephone]})]})]})]}),z(ne.id)?l.jsxs("div",{className:"flex items-center gap-2 bg-green-100 text-green-700 px-3 py-1 rounded-full",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-sm"}),l.jsx("span",{className:"text-sm font-medium",children:"Retours finaliss"})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>B(ne.id),disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-linear-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 shadow-md",children:[l.jsx(de,{icon:"mdi:content-save-check",className:"text-sm"}),l.jsx("span",{className:"text-sm font-medium",children:"Enregistrer les retours"})]}),l.jsxs("button",{onClick:()=>U(ne.id),disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-linear-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all disabled:opacity-50 shadow-md",children:[l.jsx(de,{icon:"mdi:check-bold",className:"text-sm"}),l.jsx("span",{className:"text-sm font-medium",children:"Aucun retour"})]})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Produits livrs"}),l.jsxs("span",{className:"ml-auto text-sm font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:[ne.produits.length," produit",ne.produits.length>1?"s":""]})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:ne.produits.map(V=>l.jsxs("div",{className:`bg-linear-to-br ${V.invendus>0?"from-red-50 to-rose-50 border-red-200":"from-green-50 to-emerald-50 border-green-200"} border rounded-xl p-4 hover:shadow-md transition-all`,children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:`w-12 h-12 bg-linear-to-br ${V.invendus>0?"from-red-500 to-rose-500":"from-green-500 to-emerald-500"} rounded-xl flex items-center justify-center shadow-md`,children:l.jsx(de,{icon:re(V.produit?.nom||""),className:"text-xl text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:V.produit?.nom||"Produit inconnu"}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Livr: ",l.jsxs("span",{className:"font-bold",children:[V.quantiteLivree," pices"]})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invendus retour:"}),l.jsx("input",{type:"number",min:"0",max:V.quantiteLivree,value:(()=>{const D=T[ne.id]?.[V.produitId]??V.invendus;return D===0?"":D})(),onChange:D=>j(ne.id,V.produitId,D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"0"})]}),l.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Vendu final:"}),l.jsxs("span",{className:`text-lg font-bold ${V.vendu>0?"text-green-600":"text-gray-600"}`,children:[V.vendu," pices"]})]}),V.invendus>0&&l.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:package-variant-closed",className:"text-red-500 text-sm"}),l.jsxs("span",{className:"text-xs text-red-600 font-medium",children:[V.invendus," invendu",V.invendus>1?"s":""]})]})]})]})]},V.produitId))}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mt-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(de,{icon:"mdi:chart-box",className:"text-gray-600"}),l.jsx("h4",{className:"font-semibold text-gray-800",children:"Rsum client"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ne.produits.reduce((V,D)=>V+D.quantiteLivree,0)}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total livr"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:ne.produits.reduce((V,D)=>V+D.invendus,0)}),l.jsx("div",{className:"text-sm text-gray-600",children:"Invendus"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:ne.produits.reduce((V,D)=>V+D.vendu,0)}),l.jsx("div",{className:"text-sm text-gray-600",children:"Vendu"})]})]})]})]})})]},ne.id))]})]}),l.jsx(Cl,{isOpen:v.isOpen,onClose:v.handleCancel,onConfirm:v.handleConfirm,title:v.title,message:v.message,confirmText:v.confirmText,cancelText:v.cancelText,type:v.type})]})},h9=()=>{const{stockJour:n,equipeMatin:e,equipeSoir:t,ventesJour:r,isLoading:i,chargerStockJour:a,creerStockDepuisProduction:c,mettreAJourStockBoutique:d,commencerEquipeMatin:h,commencerEquipeSoir:f,saisirVenteMatin:p,saisirVenteSoir:v,terminerEquipeMatin:_,terminerEquipeSoir:b,sauvegarderEquipe:T,calculerVentesBoutique:I,sauvegarderVentes:L,chargerEquipe:j,chargerVentes:U}=Rg(),[z,B]=he.useState(""),[re,ne]=he.useState(""),[V,D]=he.useState(new Date().toISOString().split("T")[0]),k=new Date(V);lc.useEffect(()=>{(async()=>{try{console.log(" Chargement des donnes pour",k.toISOString().split("T")[0]),await a(k),await new Promise(F=>setTimeout(F,100));const R=Rg.getState();!R.stockJour&&!R.isLoading&&await c(k),await j(k,"matin"),await j(k,"soir"),await U(k),console.log(" Toutes les donnes charges")}catch(R){console.error(" Erreur lors du chargement automatique:",R)}})()},[V]);const $=S=>{const R=S?.toLowerCase()||"";return R.includes("baguette")?"mdi:baguette":R.includes("pain")?"mdi:bread-slice":R.includes("croissant")?"mdi:croissant":R.includes("brioche")?"mdi:muffin":R.includes("tarte")?"mdi:pie":R.includes("gateau")||R.includes("gteau")?"mdi:cake":R.includes("sandwich")?"mdi:food":R.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-amber-600 to-orange-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:store",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion Boutique"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Suivi des ventes matin et soir"})]})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:calendar",className:"text-lg text-amber-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Date de service"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("input",{type:"date",value:V,onChange:S=>D(S.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent text-gray-900 font-medium"}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Service boutique pour ",new Date(V).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),!n&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Stock de dpart"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Chargement automatique des produits destins  la boutique"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"text-center py-12",children:i?l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),l.jsx("p",{className:"text-gray-600 font-medium",children:"Chargement du stock de production..."})]}):l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:calendar-clock",className:"text-4xl text-gray-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Stock non disponible"}),l.jsxs("p",{className:"text-gray-500 mb-6",children:["Aucune quantit boutique dfinie pour le ",new Date(V).toLocaleDateString("fr-FR")]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-sm text-gray-700 space-y-1",children:[l.jsx("p",{className:"font-semibold text-blue-800 mb-2",children:"Pour activer la boutique :"}),l.jsx("p",{children:"1. Crez un programme de production"}),l.jsx("p",{children:"2. Ajoutez des quantits  envoyer en boutique"}),l.jsx("p",{children:"3. Le stock apparatra automatiquement ici"})]})]})]})})})]}),n&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:package-check",className:"text-lg text-green-600"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Stock de dpart - ",new Date(n.date).toLocaleDateString("fr-FR")]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[n.produits.length," produit(s) reu(s) de la production"]})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"text-sm text-gray-600",children:["Stock cr le ",n.createdAt.toLocaleString("fr-FR"),n.updatedAt.getTime()!==n.createdAt.getTime()&&l.jsxs("span",{className:"text-blue-600",children:["  Mis  jour le "," ",n.updatedAt.toLocaleString("fr-FR")]})]}),l.jsxs("button",{onClick:()=>d(k),disabled:i,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:[!i&&l.jsx(de,{icon:"mdi:refresh",className:"text-sm"}),i?"Mise  jour...":"Actualiser stock"]})]}),l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0",children:l.jsx(de,{icon:"mdi:information",className:"text-white"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-blue-800 font-semibold mb-1",children:"Actualisation du stock :"}),l.jsx("p",{className:"text-blue-700 text-sm",children:'Si vous avez ajout de nouveaux produits dans le programme de production aprs avoir cr ce stock, cliquez sur "Actualiser stock" pour rcuprer les nouveaux produits.'})]})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200",children:[l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Produit"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Quantit"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Car 1M"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Car 2M"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Car S"})]})}),l.jsx("tbody",{children:n.produits.map(S=>l.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(de,{icon:$(S.produit?.nom||""),className:"text-gray-600"}),l.jsx("span",{className:"font-medium text-gray-900",children:S.produit?.nom||S.produitId})]})}),l.jsx("td",{className:"text-center py-3 px-4",children:l.jsx("span",{className:"font-bold text-gray-900",children:S.stockDebut})}),l.jsx("td",{className:"text-center py-3 px-4 text-gray-600",children:S.repartitionCars?.car1_matin||""}),l.jsx("td",{className:"text-center py-3 px-4 text-gray-600",children:S.repartitionCars?.car2_matin||""}),l.jsx("td",{className:"text-center py-3 px-4 text-gray-600",children:S.repartitionCars?.car_soir||""})]},S.produitId))})]})})]})})]}),n&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:timeline",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Flux Journalier Boutique"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Suivi des quipes matin et soir avec passage de relais"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(de,{icon:"wi:sunrise",className:"text-gray-600"}),l.jsx("span",{children:"quipe Matin:"}),l.jsx("span",{className:e?e.statut==="en_cours"?"text-blue-600":"text-green-600":"text-gray-500",children:e?e.statut==="en_cours"?"En cours":"Termine":"Non commence"})]}),l.jsx("div",{className:"w-px h-6 bg-gray-300"}),l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(de,{icon:"wi:sunset",className:"text-gray-600"}),l.jsx("span",{children:"quipe Soir:"}),l.jsx("span",{className:t?t.statut==="en_cours"?"text-blue-600":"text-green-600":"text-gray-500",children:t?t.statut==="en_cours"?"En cours":"Termine":"Non commence"})]})]}),r&&l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Total vendu"}),l.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[r.produits.reduce((S,R)=>S+R.venduTotal,0)," pices"]})]})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunrise",className:"text-lg text-orange-600"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["quipe Matin - Vendeuse #",e?e.vendeuse:" dfinir"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Service du matin (jusqu' 14h) - Stock initial de la production"})]})]})}),l.jsx("div",{className:"p-6",children:e?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-medium",children:["Vendeuse: ",e.vendeuse]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Statut: ",e.statut==="termine"?l.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-sm"}),"Termin"]}):l.jsxs("span",{className:"flex items-center gap-1 text-orange-600",children:[l.jsx(de,{icon:"mdi:clock-outline",className:"text-sm"}),"En cours"]})]})]}),e.statut==="en_cours"&&l.jsxs("button",{onClick:async()=>{try{_(),await T("matin")}catch(S){console.error("Erreur lors de la sauvegarde matin:",S)}},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Terminer l'quipe matin"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Saisie des ventes matinales"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.produits.map(S=>l.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border border-orange-200 rounded-xl p-4 hover:border-orange-300 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-center shadow-md",children:l.jsx(de,{icon:$(S.produit?.nom||""),className:"text-xl text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:S.produit?.nom||S.produitId}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Stock: ",S.stockDebut," pices"]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Vendu matin:"}),l.jsx("input",{type:"number",min:"0",max:S.stockDebut,value:S.vendu,onChange:R=>p(S.produitId,parseInt(R.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:e.statut==="termine"})]}),l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Reste midi: "}),l.jsxs("span",{className:"font-bold text-blue-600",children:[S.reste," pices"]})]})]})]},S.produitId))})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"text",placeholder:"Entrez le nom de la vendeuse du matin",value:z,onChange:S=>B(S.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),l.jsxs("button",{onClick:()=>{z.trim()&&h(z,k)},disabled:!z.trim(),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx(de,{icon:"mdi:play-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Commencer l'quipe matin"})]})]})})]}),e?.statut==="termine"&&!t&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:handshake",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Passage de Relais Matin  Soir"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Transmission du stock restant du matin  l'quipe soir"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-switch",className:"text-white"})}),l.jsxs("h3",{className:"font-semibold text-blue-800 text-lg",children:["Stock transmis par ",e.vendeuse]})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e.produits.map(S=>l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-blue-200 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:$(S.produit?.nom||""),className:"text-white text-sm"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium text-sm text-gray-900",children:S.produit?.nom||S.produitId}),l.jsx("p",{className:"text-xs text-gray-500",children:"Stock pour le soir"})]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-lg font-bold text-blue-600",children:S.reste}),l.jsx("p",{className:"text-xs text-gray-500",children:"pices"})]})]},S.produitId))})]})})]}),e?.statut==="termine"&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunset",className:"text-lg text-indigo-600"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["quipe Soir - Vendeuse #",t?t.vendeuse:" dfinir"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Service du soir (aprs 14h) - Stock = Reste du matin"})]})]})}),l.jsx("div",{className:"p-6",children:t?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-medium",children:["Vendeuse: ",t.vendeuse]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Statut: ",t.statut==="termine"?l.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-sm"}),"Termin"]}):l.jsxs("span",{className:"flex items-center gap-1 text-orange-600",children:[l.jsx(de,{icon:"mdi:clock-outline",className:"text-sm"}),"En cours"]})]})]}),t.statut==="en_cours"&&l.jsxs("button",{onClick:async()=>{try{b(),I(),await T("soir"),await new Promise(S=>setTimeout(S,100)),await L()}catch(S){console.error("Erreur lors de la finalisation:",S)}},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Terminer l'quipe soir"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Saisie des ventes du soir"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.produits.map(S=>l.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-4 hover:border-indigo-300 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-xl flex items-center justify-center shadow-md",children:l.jsx(de,{icon:$(S.produit?.nom||""),className:"text-xl text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:S.produit?.nom||S.produitId}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Stock dbut: ",S.stockDebut," pices"]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Vendu soir:"}),l.jsx("input",{type:"number",min:"0",max:S.stockDebut,value:S.vendu,onChange:R=>v(S.produitId,parseInt(R.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",disabled:t.statut==="termine"})]}),l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Invendu: "}),l.jsxs("span",{className:"font-bold text-red-600",children:[S.reste," pices"]})]})]})]},S.produitId))})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"text",placeholder:"Entrez le nom de la vendeuse du soir",value:re,onChange:S=>ne(S.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),l.jsxs("button",{onClick:()=>{re.trim()&&f(re,k)},disabled:!re.trim(),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx(de,{icon:"mdi:play-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Commencer l'quipe soir"})]})]})})]}),r&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:chart-timeline",className:"text-lg text-green-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Bilan Journalier - Performance des 2 Vendeuses"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Rcapitulatif complet des ventes matin et soir"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:r.produits.reduce((S,R)=>S+R.stockDebut,0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Stock Initial"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:chart-line",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:r.produits.reduce((S,R)=>S+R.venduTotal,0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Vendu"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-down",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:r.produits.reduce((S,R)=>S+R.invenduBoutique,0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Invendus"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:percent",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-3xl font-bold",children:[Math.round(r.produits.reduce((S,R)=>S+R.venduTotal,0)/r.produits.reduce((S,R)=>S+R.stockDebut,0)*100),"%"]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"taux"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Taux de Vente"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6",children:[l.jsxs("h4",{className:"flex items-center gap-3 font-semibold text-orange-800 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunrise",className:"text-white"})}),e?.vendeuse," - quipe Matin"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Ventes totales :"}),l.jsxs("span",{className:"font-bold text-orange-700",children:[r.produits.reduce((S,R)=>S+R.venduMatin,0)," pcs"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Transmis au soir :"}),l.jsxs("span",{className:"font-medium text-blue-600",children:[r.produits.reduce((S,R)=>S+R.resteMidi,0)," pcs"]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6",children:[l.jsxs("h4",{className:"flex items-center gap-3 font-semibold text-indigo-800 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunset",className:"text-white"})}),t?.vendeuse," - quipe Soir"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Ventes totales :"}),l.jsxs("span",{className:"font-bold text-indigo-700",children:[r.produits.reduce((S,R)=>S+R.venduSoir,0)," pcs"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Invendus finaux :"}),l.jsxs("span",{className:"font-medium text-red-600",children:[r.produits.reduce((S,R)=>S+R.invenduBoutique,0)," pcs"]})]})]})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-4 border-b border-gray-200 mb-6",children:[l.jsx(de,{icon:"mdi:table-large",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dtail par produit"})]}),l.jsx("div",{className:"grid gap-4",children:r.produits.map(S=>l.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200 hover:shadow-md transition-all",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-7 gap-4 items-center",children:[l.jsx("div",{className:"md:col-span-1",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-gray-500 to-gray-700 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:$(S.produit?.nom||""),className:"text-white text-sm"})}),l.jsx("span",{className:"font-medium text-gray-900 text-sm",children:S.produit?.nom||S.produitId})]})}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-gray-800",children:S.stockDebut}),l.jsx("div",{className:"text-xs text-gray-500",children:"Stock initial"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-orange-600",children:S.venduMatin}),l.jsx("div",{className:"text-xs text-gray-500",children:"Vendu matin"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-blue-600",children:S.resteMidi}),l.jsx("div",{className:"text-xs text-gray-500",children:"Transmis soir"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-indigo-600",children:S.venduSoir}),l.jsx("div",{className:"text-xs text-gray-500",children:"Vendu soir"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-red-600",children:S.invenduBoutique}),l.jsx("div",{className:"text-xs text-gray-500",children:"Invendu final"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-bold text-green-600",children:S.venduTotal}),l.jsx("div",{className:"text-xs text-gray-500",children:"Total vendu"})]})]})},S.produitId))})]})]})})]})]})]})]})},f9=()=>{const{rapportJour:n,indicateurs:e,historiqueRapports:t,genererRapportJour:r,validerRapport:i,chargerRapport:a,chargerHistorique:c,isLoading:d}=aM(),[h,f]=he.useState(new Date().toISOString().split("T")[0]),[p,v]=he.useState("jour"),_=async()=>{try{console.log(" Dbut gnration rapport pour:",h),await r(new Date(h)),console.log(" Rapport gnr avec succs")}catch(I){console.error(" Erreur lors de la gnration du rapport:",I),alert("Erreur lors de la gnration du rapport: "+I)}},b=()=>{const I=new Date,L=new Date;L.setDate(I.getDate()-7),c(L,I)};he.useEffect(()=>{a(new Date(h))},[h,a]);const T=I=>I>=90?"bg-green-100 text-green-800":I>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:chart-bar",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Rapport Journalier"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Bilan complet des activits de la journe"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:()=>v(p==="jour"?"historique":"jour"),className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx(de,{icon:p==="jour"?"mdi:history":"mdi:calendar-today",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:p==="jour"?"Historique":"Rapport du jour"})]}),p==="jour"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:_,disabled:d,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:cogs",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Gnrer le rapport"})]}),n&&n.statut==="genere"&&l.jsxs("button",{onClick:()=>i(),className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Valider le rapport"})]})]}),p==="historique"&&l.jsxs("button",{onClick:b,disabled:d,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:download",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Charger les 7 derniers jours"})]})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[p==="jour"&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:calendar",className:"text-lg text-purple-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Date du rapport"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("input",{type:"date",value:h,onChange:I=>f(I.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 font-medium"}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Rapport pour ",new Date(h).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),p==="jour"&&e&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:chart-line",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-3xl font-bold",children:[e.tauxVenteGlobal.toFixed(1),"%"]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"global"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Taux de Vente Global"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:account-group",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-3xl font-bold",children:[e.tauxVenteClients.toFixed(1),"%"]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"clients"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Taux Vente Clients"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:storefront",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-3xl font-bold",children:[e.tauxVenteBoutique.toFixed(1),"%"]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"boutique"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Taux Vente Boutique"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-down",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:e.pertesTotales}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Pertes Totales"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:account-cancel",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:e.pertesClients}),l.jsx("div",{className:"text-gray-300 text-xs",children:"clients"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Invendus Clients"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:storefront-outline",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:e.pertesBoutique}),l.jsx("div",{className:"text-gray-300 text-xs",children:"boutique"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Invendus Boutique"})]})]})]}),p==="historique"&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:history",className:"text-lg text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Historique des Rapports"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Rapports des derniers jours"})]})]})}),l.jsx("div",{className:"p-6",children:t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:file-document-outline",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun rapport trouv"}),l.jsx("p",{className:"text-gray-500 mb-6",children:`Cliquez sur "Charger les 7 derniers jours" pour voir l'historique`})]}):l.jsx("div",{className:"grid gap-4",children:t.map(I=>l.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-xl p-6 hover:border-purple-300 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:file-document",className:"text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:new Date(I.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I.statut==="valide"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:I.statut})})]})]}),l.jsx("div",{className:"text-right",children:l.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${T(I.totaux.tauxVenteGlobal)}`,children:[I.totaux.tauxVenteGlobal.toFixed(1),"%"]})})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-gray-800",children:I.totaux.quantiteProduite}),l.jsx("div",{className:"text-xs text-gray-600",children:"Produite"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-green-600",children:I.totaux.quantiteVendueTotal}),l.jsx("div",{className:"text-xs text-gray-600",children:"Vendue"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-red-600",children:I.totaux.pertesTotales}),l.jsx("div",{className:"text-xs text-gray-600",children:"Pertes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[I.totaux.tauxVenteGlobal.toFixed(1),"%"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Taux vente"})]})]})]},I.id))})})]}),p==="jour"&&n?l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:clipboard-list",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Rapport Dtaill par Produit"}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Rapport du ",new Date(n.date).toLocaleDateString("fr-FR")," - Statut: ",n.statut]})]})]})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(de,{icon:"mdi:chart-box",className:"text-gray-600"}),l.jsx("h3",{className:"font-semibold text-gray-800",children:"Totaux de la journe"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:n.totaux.quantitePrevue}),l.jsx("div",{className:"text-sm text-gray-600",children:"Prvu"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.totaux.quantiteProduite}),l.jsx("div",{className:"text-sm text-gray-600",children:"Produite"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.totaux.quantiteVendueTotal}),l.jsx("div",{className:"text-sm text-gray-600",children:"Vendue"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.totaux.invendusTotal}),l.jsx("div",{className:"text-sm text-gray-600",children:"Invendus"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Dtail par produit"}),l.jsxs("span",{className:"ml-auto text-sm font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:[n.produits.length," produit",n.produits.length>1?"s":""]})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.produits.map(I=>l.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:food-variant",className:"text-white"})}),l.jsx("div",{children:l.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:I.produit?.nom||I.produitId})})]}),l.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T(I.tauxVenteGlobal)}`,children:[I.tauxVenteGlobal.toFixed(1),"%"]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-gray-800",children:I.quantitePrevue}),l.jsx("div",{className:"text-xs text-gray-600",children:"Prvu"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-blue-600",children:I.quantiteProduite}),l.jsx("div",{className:"text-xs text-gray-600",children:"Produite"})]})]}),l.jsx("div",{className:"border-t border-gray-200 pt-3",children:l.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-bold text-green-600",children:I.quantiteVendueTotal}),l.jsx("div",{className:"text-xs text-gray-600",children:"Total vendu"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-bold text-green-500",children:I.quantiteVendueClients}),l.jsx("div",{className:"text-xs text-gray-600",children:"Clients"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-bold text-green-400",children:I.quantiteVendueBoutique}),l.jsx("div",{className:"text-xs text-gray-600",children:"Boutique"})]})]})}),l.jsxs("div",{className:"bg-red-50 rounded-lg p-3 text-center",children:[l.jsx("div",{className:"text-lg font-bold text-red-600",children:I.invendusTotal}),l.jsx("div",{className:"text-xs text-gray-600",children:"Invendus total"})]})]})]},I.produitId))})]})]})]}):p==="jour"&&l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:chart-bar",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun rapport gnr"}),l.jsx("p",{className:"text-gray-500 mb-6",children:'Cliquez sur "Gnrer le rapport" pour crer le rapport de la journe'}),l.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:cogs",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Gnrer le rapport"})]})]})})})]})]})},m9=({produit:n,onSave:e,onCancel:t,isLoading:r=!1})=>{const{matieres:i,chargerDonnees:a}=El(),[c,d]=he.useState({nom:"",prixClient:0,prixBoutique:0,active:!0,recette:[]});he.useEffect(()=>{a()},[]);const[h,f]=he.useState({matiereId:"",quantite:""});he.useEffect(()=>{n&&d({nom:n.nom,prixClient:n.prixClient||0,prixBoutique:n.prixBoutique||0,active:n.active,recette:n.recette||[]})},[n]);const p=()=>{const b=parseFloat(h.quantite);if(h.matiereId&&h.quantite&&!isNaN(b)&&b>0){const T=c.recette.findIndex(L=>L.matiereId===h.matiereId);let I=[...c.recette];T>=0?I[T].quantite=b:I.push({matiereId:h.matiereId,quantite:b}),d({...c,recette:I}),f({matiereId:"",quantite:""})}},v=b=>{const T=[...c.recette];T.splice(b,1),d({...c,recette:T})},_=async b=>{b.preventDefault();try{const T={nom:c.nom,prixClient:c.prixClient,prixBoutique:c.prixBoutique,active:c.active,recette:c.recette,description:"",unite:"piece",prixUnitaire:c.prixBoutique};await e(T),n||d({nom:"",prixClient:0,prixBoutique:0,active:!0,recette:[]})}catch(T){console.error("Erreur lors de la sauvegarde:",T)}};return l.jsx(od,{title:n?"Modifier le produit":"Ajouter un produit",subtitle:"Remplissez les informations du produit",children:l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-medium text-gray-900 border-b pb-2",children:"Informations Gnrales"}),l.jsx(mr,{label:"Nom du produit *",value:c.nom,onChange:b=>d({...c,nom:b.target.value}),placeholder:"ex: Pain de campagne",required:!0}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(mr,{label:"Prix client (FCFA) *",type:"number",step:"1",min:"0",value:c.prixClient,onChange:b=>d({...c,prixClient:parseFloat(b.target.value)||0}),placeholder:"0",required:!0}),l.jsx(mr,{label:"Prix boutique (FCFA) *",type:"number",step:"1",min:"0",value:c.prixBoutique,onChange:b=>d({...c,prixBoutique:parseFloat(b.target.value)||0}),placeholder:"0",required:!0})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"active",type:"checkbox",checked:c.active,onChange:b=>d({...c,active:b.target.checked}),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Produit actif (visible pour la production)"})]})]}),l.jsxs("div",{className:"space-y-4 pt-2",children:[l.jsxs("h4",{className:"font-medium text-gray-900 border-b pb-2 flex items-center justify-between",children:[l.jsx("span",{children:"Recette Technique (Ingrdients)"}),l.jsx("span",{className:"text-xs text-gray-500 font-normal",children:"Optionnel"})]}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3 items-end",children:[l.jsxs("div",{className:"md:col-span-1",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Matire Premire"}),l.jsxs("select",{value:h.matiereId,onChange:b=>f({...h,matiereId:b.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-orange-500 outline-none",children:[l.jsx("option",{value:"",children:"Choisir un ingrdient..."}),i.map(b=>l.jsxs("option",{value:b.id,children:[b.nom," (",b.unite,")"]},b.id))]})]}),l.jsxs("div",{className:"md:col-span-1",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantit par unit"}),l.jsx("input",{type:"number",step:"0.001",min:"0",placeholder:"Ex: 0.250, 1.5, 50",value:h.quantite,onChange:b=>f({...h,quantite:b.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-orange-500 outline-none"})]}),l.jsx("div",{className:"md:col-span-1",children:l.jsxs("button",{type:"button",onClick:p,disabled:!h.matiereId||!h.quantite||isNaN(parseFloat(h.quantite))||parseFloat(h.quantite)<=0,className:"w-full py-2 px-3 bg-gray-800 text-white text-sm rounded-md hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[l.jsx(de,{icon:"mdi:plus-circle"}),"Ajouter"]})})]}),c.recette.length>0?l.jsx("div",{className:"space-y-2 mt-4 max-h-40 overflow-y-auto",children:c.recette.map((b,T)=>{const I=i.find(L=>L.id===b.matiereId);return l.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border border-gray-200 shadow-sm",children:[l.jsx("span",{className:"text-sm font-medium text-gray-800",children:I?I.nom:"Matire inconnue"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-sm text-gray-600 font-mono bg-gray-100 px-2 py-0.5 rounded",children:[b.quantite," ",I?.unite]}),l.jsx("button",{type:"button",onClick:()=>v(T),className:"text-red-500 hover:text-red-700 p-1",children:l.jsx(de,{icon:"mdi:close",className:"text-lg"})})]})]},T)})}):l.jsx("div",{className:"text-center py-4 text-gray-400 text-sm italic",children:"Aucun ingrdient dfini pour cette recette."})]}),l.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(de,{icon:"mdi:information",className:"text-blue-600 text-lg mt-0.5"}),l.jsxs("div",{className:"text-sm text-blue-800",children:[l.jsx("p",{className:"font-medium mb-1",children:"Comment utiliser :"}),l.jsxs("ul",{className:"space-y-1 text-xs",children:[l.jsxs("li",{children:[" ",l.jsx("b",{children:"Quantit par unit"})," = quantit ncessaire pour ",l.jsx("b",{children:"1 pice"})]}),l.jsxs("li",{children:[" Exemples: 50g de farine  ",l.jsx("code",{children:"0.050"}),", 2 ufs  ",l.jsx("code",{children:"2"}),", 1,5L de lait  ",l.jsx("code",{children:"1.5"})]}),l.jsx("li",{children:" Le systme calcule automatiquement cot et marge"})]})]})]})})]}),c.recette.length>0&&l.jsxs("div",{className:"space-y-4 pt-2 border-t border-gray-100",children:[l.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:calculator",className:"text-green-600"}),"Calcul Automatique des Cots & Rentabilit",l.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-normal",children:"Temps rel"})]}),l.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-xs space-y-4",children:(()=>{const b=c.recette.reduce((U,z)=>{const B=i.find(re=>re.id===z.matiereId);return U+z.quantite*(B?.prixMoyenPondere||0)},0),T=c.prixBoutique-b,I=c.prixBoutique>0?T/c.prixBoutique*100:0,L=c.prixClient-b,j=c.prixClient>0?L/c.prixClient*100:0;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[l.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Cot de Revient Matires"}),l.jsxs("span",{className:"font-bold text-gray-900",children:[Math.round(b).toLocaleString()," FCFA"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-3 border rounded-md border-gray-100",children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Marge Boutique"}),l.jsxs("div",{className:"flex items-end justify-between",children:[l.jsxs("span",{className:`text-xl font-bold ${T>=0?"text-green-600":"text-red-600"}`,children:[Math.round(T).toLocaleString()," FCFA"]}),l.jsxs("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${I>=50?"bg-green-100 text-green-700":I>=30?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:[I.toFixed(1),"%"]})]})]}),l.jsxs("div",{className:"p-3 border rounded-md border-gray-100",children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Marge Client"}),l.jsxs("div",{className:"flex items-end justify-between",children:[l.jsxs("span",{className:`text-xl font-bold ${L>=0?"text-blue-600":"text-red-600"}`,children:[Math.round(L).toLocaleString()," FCFA"]}),l.jsxs("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${j>=50?"bg-blue-100 text-blue-700":j>=30?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:[j.toFixed(1),"%"]})]})]})]})]})})()})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-100",children:[l.jsx(zr,{type:"button",variant:"outline",onClick:t,children:"Annuler"}),l.jsx(zr,{type:"submit",isLoading:r,disabled:!c.nom.trim()||c.prixClient<=0||c.prixBoutique<=0,children:n?"Enregistrer les modifications":"Crer le produit"})]})]})})},p9=()=>{const{produits:n,produitEnEdition:e,isLoadingProduits:t,chargerProduits:r,ajouterProduit:i,modifierProduit:a,supprimerProduit:c,setProduitEnEdition:d}=_u(),[h,f]=he.useState(!1),[p,v]=he.useState({isOpen:!1,produitId:"",produitNom:""}),{chargerDonnees:_}=El();he.useEffect(()=>{r(),_()},[r,_]);const b=async B=>{await i(B),f(!1)},T=async B=>{e&&(await a(e.id,B),d(null),f(!1))},I=B=>{v({isOpen:!0,produitId:B.id,produitNom:B.nom})},L=async()=>{await c(p.produitId),v({isOpen:!1,produitId:"",produitNom:""})},j=()=>{d(null),f(!1)},U=B=>{d(B),f(!0)},z=B=>{const re=B?.toLowerCase()||"";return re.includes("baguette")?"mdi:baguette":re.includes("pain")?"mdi:bread-slice":re.includes("croissant")?"mdi:croissant":re.includes("brioche")?"mdi:muffin":re.includes("tarte")?"mdi:pie":re.includes("gateau")||re.includes("gteau")?"mdi:cake":re.includes("sandwich")?"mdi:food":re.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-600 to-red-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:bread-slice",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Produits"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grez votre catalogue de produits de boulangerie"})]})]}),l.jsxs("button",{onClick:()=>f(!0),disabled:h,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouveau produit"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[h&&l.jsx(Nl,{isOpen:h,onClose:j,title:e?"Modifier le produit":"Nouveau produit",position:"center",size:"lg",children:l.jsx(m9,{produit:e,onSave:e?T:b,onCancel:j,isLoading:t})}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:format-list-bulleted",className:"text-lg text-orange-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Catalogue produits"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," produit(s) enregistr(s)"]})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium",children:n.filter(B=>B.active).length})," actifs",l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium",children:n.filter(B=>!B.active).length})," inactifs"]})})]})}),l.jsx("div",{className:"p-6",children:t?l.jsx(Gy,{message:"Chargement des produits..."}):n.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(de,{icon:"mdi:bread-slice-outline",className:"text-4xl text-orange-500"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Aucun produit enregistr"}),l.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Commencez par ajouter vos premiers produits de boulangerie pour constituer votre catalogue"}),l.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter le premier produit"})]})]}):l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:n.map(B=>l.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-2xl p-6 hover:border-orange-300 hover:shadow-2xl transition-all duration-300 group",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx(de,{icon:z(B.nom),className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-1",children:B.nom}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full ${B.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.jsx(de,{icon:B.active?"mdi:check-circle":"mdi:pause-circle",className:"text-xs"}),B.active?"Actif":"Inactif"]})})]})]})}),l.jsx("div",{className:"space-y-3 mb-6",children:l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(de,{icon:"mdi:account-group",className:"text-blue-500 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Prix Client"})]}),l.jsx("div",{className:"text-xl font-bold text-blue-800",children:B.prixClient?`${B.prixClient.toLocaleString("fr-FR")} F`:"Non dfini"})]}),l.jsxs("div",{className:"bg-purple-50 rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(de,{icon:"mdi:storefront",className:"text-purple-500 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-purple-700",children:"Prix Boutique"})]}),l.jsx("div",{className:"text-xl font-bold text-purple-800",children:B.prixBoutique?`${B.prixBoutique.toLocaleString("fr-FR")} F`:"Non dfini"})]})]})}),(()=>{const{matieres:re}=El.getState();if(!B.recette||B.recette.length===0)return null;const ne=B.recette.reduce((k,$)=>{const S=re.find(R=>R.id===$.matiereId);return k+$.quantite*(S?.prixMoyenPondere||0)},0),V=B.prixBoutique?B.prixBoutique-ne:0,D=B.prixBoutique?V/B.prixBoutique*100:0;return l.jsxs("div",{className:"mb-4 bg-gray-50 rounded-lg p-2 flex items-center justify-between border border-gray-100",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(de,{icon:"mdi:finance",className:"text-orange-500 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Marge Est."})]}),l.jsxs("div",{className:`text-sm font-bold ${D>=50?"text-green-600":D>=30?"text-orange-600":"text-red-600"}`,children:[Math.round(V).toLocaleString()," F ",l.jsxs("span",{className:"text-xs font-normal opacity-80",children:["(",D.toFixed(0),"%)"]})]})]})})(),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>U(B),disabled:h,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-orange-600 hover:text-orange-700 bg-orange-50 hover:bg-orange-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:pencil",className:"text-lg"}),l.jsx("span",{children:"Modifier"})]}),l.jsx("button",{onClick:()=>I(B),disabled:t,className:"flex items-center justify-center gap-2 px-4 py-2 text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50",children:l.jsx(de,{icon:"mdi:delete-outline",className:"text-lg"})})]})]},B.id))})})]})]}),l.jsx(Cl,{isOpen:p.isOpen,onClose:()=>v({isOpen:!1,produitId:"",produitNom:""}),onConfirm:L,title:"Confirmer la suppression",message:`tes-vous sr de vouloir supprimer le produit "${p.produitNom}" ?

Cette action supprimera galement toutes les donnes lies (recettes, historique, etc.).`,confirmText:"Supprimer",cancelText:"Annuler",type:"danger",position:"center"})]})},g9=({client:n,onSave:e,onCancel:t,isLoading:r=!1})=>{const{chargerLivreurs:i,getLivreursActifs:a}=y0(),[c,d]=he.useState({nom:"",adresse:"",telephone:"",email:"",typeClient:"client",livreurId:"",conditionsPaiement:"",eligibleRistourne:!1,active:!0});he.useEffect(()=>{i().catch(console.error)},[i]),he.useEffect(()=>{n&&d({nom:n.nom,adresse:n.adresse,telephone:n.telephone||"",email:n.email||"",typeClient:n.typeClient,livreurId:n.livreurId||"",conditionsPaiement:n.conditionsPaiement||"",eligibleRistourne:n.eligibleRistourne||!1,active:n.active})},[n]);const h=async f=>{f.preventDefault();try{await e(c),n||d({nom:"",adresse:"",telephone:"",email:"",typeClient:"client",livreurId:"",conditionsPaiement:"",eligibleRistourne:!1,active:!0})}catch(p){console.error("Erreur lors de la sauvegarde:",p)}};return l.jsx(od,{title:n?"Modifier le client":"Ajouter un client",subtitle:"Remplissez les informations du client",children:l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsx(mr,{label:"Nom du client *",value:c.nom,onChange:f=>d({...c,nom:f.target.value}),placeholder:"ex: Restaurant Central",required:!0}),l.jsx(mr,{label:"Adresse *",value:c.adresse,onChange:f=>d({...c,adresse:f.target.value}),placeholder:"Adresse complte",required:!0}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(mr,{label:"Tlphone",value:c.telephone,onChange:f=>d({...c,telephone:f.target.value}),placeholder:"ex: +221 33 123 45 67"}),l.jsx(mr,{label:"Email",type:"email",value:c.email,onChange:f=>d({...c,email:f.target.value}),placeholder:"ex: contact@restaurant.sn"})]}),l.jsx(mr,{label:"Conditions de paiement",value:c.conditionsPaiement,onChange:f=>d({...c,conditionsPaiement:f.target.value}),placeholder:"ex: Payable  15 jours, Comptant, Fin de mois"}),l.jsx("p",{className:"text-xs text-gray-500 -mt-3",children:"Conditions spcifiques  ce client. Si vide, les conditions par dfaut seront utilises."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de client *"}),l.jsxs("select",{value:c.typeClient,onChange:f=>d({...c,typeClient:f.target.value}),className:"block w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-orange-500 focus:ring-1 sm:text-sm transition-colors bg-white",required:!0,children:[l.jsx("option",{value:"client",children:"Client (prix rduit)"}),l.jsx("option",{value:"boutique",children:"Boutique (prix normal)"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dfinit le type de tarification"}),c.typeClient==="boutique"&&l.jsxs("div",{className:"mt-3 flex items-start",children:[l.jsx("div",{className:"flex items-center h-5",children:l.jsx("input",{id:"eligibleRistourne",type:"checkbox",checked:c.eligibleRistourne,onChange:f=>d({...c,eligibleRistourne:f.target.checked}),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"})}),l.jsxs("div",{className:"ml-3 text-sm",children:[l.jsx("label",{htmlFor:"eligibleRistourne",className:"font-medium text-gray-700",children:"ligible  la Ristourne (Cashback)"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Le client paie le prix boutique, mais cumule la diffrence avec le prix client."})]})]})]}),l.jsxs("div",{children:[l.jsx(Ch,{label:"Livreur assign",value:c.livreurId,onChange:f=>d({...c,livreurId:f.target.value}),options:[{value:"",label:"Aucun livreur ( assigner plus tard)"},...a().map(f=>({value:f.id,label:`${f.nom} ${f.vehicule?`(${f.vehicule})`:""}`}))]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Livreur responsable des livraisons de ce client"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"active",type:"checkbox",checked:c.active,onChange:f=>d({...c,active:f.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Client actif"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(zr,{type:"button",variant:"outline",onClick:t,children:"Annuler"}),l.jsx(zr,{type:"submit",isLoading:r,disabled:!c.nom.trim()||!c.adresse.trim(),children:n?"Modifier":"Ajouter"})]})]})})},x9=()=>{const{clients:n,clientEnEdition:e,isLoadingClients:t,chargerClients:r,ajouterClient:i,modifierClient:a,supprimerClient:c,setClientEnEdition:d}=_u(),{chargerLivreurs:h,getLivreurById:f}=y0(),[p,v]=he.useState(!1),[_,b]=he.useState({isOpen:!1,clientId:"",clientNom:""});he.useEffect(()=>{r(),h()},[r,h]);const T=async re=>{await i(re),v(!1)},I=async re=>{e&&(await a(e.id,re),d(null),v(!1))},L=re=>{b({isOpen:!0,clientId:re.id,clientNom:re.nom})},j=async()=>{await c(_.clientId),b({isOpen:!1,clientId:"",clientNom:""})},U=()=>{d(null),v(!1)},z=re=>{d(re),v(!0)},B=re=>re==="client"?"Client (prix rduit)":"Boutique (prix normal)";return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-group",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Clients"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grez votre base de clients et dfinissez les types de tarification"})]})]}),l.jsxs("button",{onClick:()=>v(!0),disabled:p,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouveau client"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[p&&l.jsx(Nl,{isOpen:p,onClose:U,title:e?"Modifier le client":"Nouveau client",position:"center",size:"lg",children:l.jsx(g9,{client:e,onSave:e?I:T,onCancel:U,isLoading:t})}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:format-list-bulleted",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Liste des clients"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," client(s) enregistr(s)"]})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium",children:n.filter(re=>re.active).length})," actifs",l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium",children:n.filter(re=>!re.active).length})," inactifs"]})})]})}),l.jsx("div",{className:"p-6",children:t?l.jsx(Gy,{message:"Chargement des clients..."}):n.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(de,{icon:"mdi:account-group-outline",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Aucun client enregistr"}),l.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Commencez par ajouter vos premiers clients pour grer votre base de donnes client"}),l.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter le premier client"})]})]}):l.jsx("div",{className:"grid gap-6 lg:grid-cols-2 xl:grid-cols-3",children:n.map(re=>{const ne=re.livreurId?f(re.livreurId):null;return l.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-2xl p-6 hover:border-blue-300 hover:shadow-2xl transition-all duration-300 group",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx(de,{icon:"mdi:account",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-1",children:re.nom}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 text-xs font-semibold rounded-full ${re.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.jsx(de,{icon:re.active?"mdi:check-circle":"mdi:pause-circle",className:"text-xs"}),re.active?"Actif":"Inactif"]})})]})]})}),l.jsxs("div",{className:"space-y-3 mb-6",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(de,{icon:"mdi:map-marker",className:"text-gray-400 mt-0.5"}),l.jsx("span",{className:"text-sm text-gray-700",children:re.adresse})]}),re.telephone&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:phone",className:"text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-700",children:re.telephone})]}),re.email&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:email",className:"text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-700",children:re.email})]})]}),l.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:l.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(de,{icon:"mdi:tag",className:"text-gray-500 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Type de client"})]}),l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-lg ${re.typeClient==="client"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:[l.jsx(de,{icon:re.typeClient==="client"?"mdi:account-heart":"mdi:storefront",className:"text-xs"}),B(re.typeClient)]})]})}),ne?l.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-3 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-green-600 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-green-700",children:"Livreur assign"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account",className:"text-white text-xs"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-green-800",children:ne.nom}),ne.vehicule&&l.jsx("div",{className:"text-xs text-green-600",children:ne.vehicule})]})]})]}):l.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-6",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:alert",className:"text-amber-600"}),l.jsx("span",{className:"text-sm text-amber-700 font-medium",children:"Aucun livreur assign"})]})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>z(re),disabled:p,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-blue-600 hover:text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:pencil",className:"text-lg"}),l.jsx("span",{children:"Modifier"})]}),l.jsx("button",{onClick:()=>L(re),disabled:t,className:"flex items-center justify-center gap-2 px-4 py-2 text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50",children:l.jsx(de,{icon:"mdi:delete-outline",className:"text-lg"})})]})]},re.id)})})})]})]}),l.jsx(Cl,{isOpen:_.isOpen,onClose:()=>b({isOpen:!1,clientId:"",clientNom:""}),onConfirm:j,title:"Confirmer la suppression",message:`tes-vous sr de vouloir supprimer le client "${_.clientNom}" ?

Cette action supprimera galement toutes les commandes associes  ce client.`,confirmText:"Supprimer",cancelText:"Annuler",type:"danger",position:"center"})]})},v9=({livreur:n,onSave:e,onCancel:t,isLoading:r=!1})=>{const[i,a]=he.useState({nom:"",telephone:"",vehicule:"",active:!0});he.useEffect(()=>{n&&a({nom:n.nom,telephone:n.telephone||"",vehicule:n.vehicule||"",active:n.active})},[n]);const c=async d=>{d.preventDefault();try{await e(i),n||a({nom:"",telephone:"",vehicule:"",active:!0})}catch(h){console.error("Erreur lors de la sauvegarde:",h)}};return l.jsx(od,{title:n?"Modifier le livreur":"Ajouter un livreur",subtitle:"Remplissez les informations du livreur",children:l.jsxs("form",{onSubmit:c,className:"space-y-4",children:[l.jsx(mr,{label:"Nom du livreur *",value:i.nom,onChange:d=>a({...i,nom:d.target.value}),placeholder:"ex: Jean Dupont",required:!0}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(mr,{label:"Tlphone",value:i.telephone,onChange:d=>a({...i,telephone:d.target.value}),placeholder:"ex: +226 70 12 34 56"}),l.jsx(mr,{label:"Vhicule / Plaque",value:i.vehicule,onChange:d=>a({...i,vehicule:d.target.value}),placeholder:"ex: Moto 125cc - AB123CD"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"active",type:"checkbox",checked:i.active,onChange:d=>a({...i,active:d.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Livreur actif"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(zr,{type:"button",variant:"outline",onClick:t,children:"Annuler"}),l.jsx(zr,{type:"submit",isLoading:r,disabled:!i.nom.trim(),children:n?"Modifier":"Ajouter"})]})]})})},y9=()=>{const{livreurs:n,livreurEnEdition:e,isLoadingLivreurs:t,chargerLivreurs:r,ajouterLivreur:i,modifierLivreur:a,supprimerLivreur:c,setLivreurEnEdition:d}=y0(),[h,f]=he.useState(!1),[p,v]=he.useState({isOpen:!1,livreurId:"",livreurNom:""});he.useEffect(()=>{r()},[r]);const _=async z=>{await i(z),f(!1)},b=async z=>{e&&(await a(e.id,z),d(null),f(!1))},T=z=>{v({isOpen:!0,livreurId:z.id,livreurNom:z.nom})},I=async()=>{await c(p.livreurId),v({isOpen:!1,livreurId:"",livreurNom:""})},L=()=>{d(null),f(!1)},j=z=>{d(z),f(!0)},U=()=>{d(null),f(!0)};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Livreurs"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grez les livreurs et leurs assignations clients"})]})]}),l.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouveau livreur"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[h&&l.jsx(Nl,{isOpen:h,onClose:L,title:e?"Modifier le livreur":"Nouveau livreur",position:"center",size:"lg",children:l.jsx(v9,{livreur:e,onSave:e?b:_,onCancel:L,isLoading:t})}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:format-list-bulleted",className:"text-lg text-green-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"quipe de livraison"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," livreur(s) enregistr(s)"]})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium",children:n.filter(z=>z.active).length})," actifs",l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium",children:n.filter(z=>!z.active).length})," inactifs"]})})]})}),l.jsx("div",{className:"p-6",children:n.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(de,{icon:"mdi:truck-delivery-outline",className:"text-4xl text-green-500"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Aucun livreur enregistr"}),l.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Commencez par ajouter vos livreurs pour organiser et grer les livraisons"}),l.jsxs("button",{onClick:U,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter le premier livreur"})]})]}):l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(z=>l.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-2xl p-6 hover:border-green-300 hover:shadow-2xl transition-all duration-300 group",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx("span",{className:"text-white font-bold text-xl",children:z.nom.charAt(0).toUpperCase()})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-1",children:z.nom}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 text-xs font-semibold rounded-full ${z.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.jsx(de,{icon:z.active?"mdi:check-circle":"mdi:pause-circle",className:"text-xs"}),z.active?"Actif":"Inactif"]})})]})]})}),l.jsxs("div",{className:"space-y-3 mb-6",children:[z.telephone&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:phone",className:"text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-700",children:z.telephone})]}),z.vehicule&&l.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:car",className:"text-green-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium text-green-700 mb-1",children:"Vhicule"}),l.jsx("div",{className:"font-semibold text-green-800",children:z.vehicule})]})]})})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>j(z),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-green-600 hover:text-green-700 bg-green-50 hover:bg-green-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md",children:[l.jsx(de,{icon:"mdi:pencil",className:"text-lg"}),l.jsx("span",{children:"Modifier"})]}),l.jsx("button",{onClick:()=>T(z),className:"flex items-center justify-center gap-2 px-4 py-2 text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md",children:l.jsx(de,{icon:"mdi:delete-outline",className:"text-lg"})})]})]},z.id))})})]})]}),l.jsx(Cl,{isOpen:p.isOpen,onClose:()=>v({isOpen:!1,livreurId:"",livreurNom:""}),onConfirm:I,title:"Confirmer la suppression",message:`tes-vous sr de vouloir supprimer le livreur "${p.livreurNom}" ?

Cette action est irrversible.`,confirmText:"Supprimer",cancelText:"Annuler",type:"danger",position:"center"})]})},b9={apiKey:"AIzaSyBwaC_ySezVpfv9y9xHNromiTW77qJQlmA",authDomain:"boulangerie-da431.firebaseapp.com",projectId:"boulangerie-da431",storageBucket:"boulangerie-da431.firebasestorage.app",messagingSenderId:"324942492234",appId:"1:324942492234:web:afbc851e38b557a87f2cb3",measurementId:"G-3E7K2Y6N31"},w9=()=>{const[n,e]=he.useState([]),[t,r]=he.useState(!1),[i,a]=he.useState({email:"",password:"",nom:"",prenom:"",role:"livreur"}),[c,d]=he.useState(!1),[h,f]=he.useState(null),[p,v]=he.useState({isOpen:!1,userId:"",userNom:""});he.useEffect(()=>{_()},[]);const _=async()=>{try{const j=xs($n(wt,"users")),z=(await ga(j)).docs.map(B=>({id:B.id,...B.data()}));e(z)}catch(j){console.error("Error fetching users:",j)}},b=j=>{j?(f(j),a({email:j.email,password:"",nom:j.nom,prenom:j.prenom,role:j.role})):(f(null),a({email:"",password:"",nom:"",prenom:"",role:"livreur"})),r(!0)},T=async()=>{d(!0);try{if(h){const j=Tn(wt,"users",h.id);await xa(j,{...h,nom:i.nom,prenom:i.prenom,role:i.role,updatedAt:new Date},{merge:!0}),Pt.success("Utilisateur modifi avec succs")}else{const j=F1(b9,"Secondary"),U=yA(j),B=(await nR(U,i.email,i.password)).user;await sR(B,{displayName:`${i.nom} ${i.prenom}`}),await xa(Tn(wt,"users",B.uid),{email:i.email,nom:i.nom,prenom:i.prenom,role:i.role,active:!0,createdAt:new Date,updatedAt:new Date}),Pt.success("Utilisateur cr avec succs")}r(!1),f(null),a({email:"",password:"",nom:"",prenom:"",role:"livreur"}),_()}catch(j){console.error("Error saving user:",j),Pt.error(`Erreur: ${j.message}`)}finally{d(!1)}},I=(j,U)=>{v({isOpen:!0,userId:j,userNom:U})},L=async()=>{try{await m0(Tn(wt,"users",p.userId)),Pt.success("Utilisateur supprim (Firestore uniquement)"),_(),v({isOpen:!1,userId:"",userNom:""})}catch{Pt.error("Erreur lors de la suppression")}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Utilisateurs"}),l.jsxs(zr,{onClick:()=>b(),children:[l.jsx(de,{icon:"mdi:account-plus",className:"mr-2"}),"Nouvel Utilisateur"]})]}),l.jsx(od,{children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Utilisateur"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rle"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(j=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[j.nom," ",j.prenom]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j.role==="admin"?"bg-purple-100 text-purple-800":j.role==="livreur"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:j.role})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[l.jsx("button",{onClick:()=>b(j),className:"text-blue-600 hover:text-blue-900 mr-3",title:"Modifier",children:l.jsx(de,{icon:"mdi:pencil",className:"text-xl"})}),l.jsx("button",{onClick:()=>I(j.id,`${j.nom} ${j.prenom}`),className:"text-red-600 hover:text-red-900",title:"Supprimer",children:l.jsx(de,{icon:"mdi:trash-can",className:"text-xl"})})]})]},j.id))})]})})}),l.jsx(Nl,{isOpen:t,onClose:()=>r(!1),title:h?"Modifier l'utilisateur":"Ajouter un utilisateur",position:"center",size:"lg",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(mr,{label:"Nom",value:i.nom,onChange:j=>a({...i,nom:j.target.value})}),l.jsx(mr,{label:"Prnom",value:i.prenom,onChange:j=>a({...i,prenom:j.target.value})})]}),l.jsx(mr,{label:"Email",type:"email",value:i.email,onChange:j=>a({...i,email:j.target.value}),disabled:!!h,className:h?"bg-gray-100":""}),!h&&l.jsx(mr,{label:"Mot de passe",type:"password",value:i.password,onChange:j=>a({...i,password:j.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rle"}),l.jsxs("select",{value:i.role,onChange:j=>a({...i,role:j.target.value}),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[l.jsx("option",{value:"admin",children:"Administrateur"}),l.jsx("option",{value:"livreur",children:"Livreur"}),l.jsx("option",{value:"boulanger",children:"Boulanger"}),l.jsx("option",{value:"vendeuse",children:"Vendeuse"}),l.jsx("option",{value:"gestionnaire",children:"Gestionnaire"})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx(zr,{onClick:T,isLoading:c,children:h?"Enregistrer les modifications":"Crer l'utilisateur"})})]})}),l.jsx(Cl,{isOpen:p.isOpen,onClose:()=>v({isOpen:!1,userId:"",userNom:""}),onConfirm:L,title:"Confirmer la suppression",message:`tes-vous sr de vouloir supprimer l'utilisateur "${p.userNom}" ?

Cette action supprimera uniquement les donnes Firestore. Le compte Auth Firebase restera actif.`,confirmText:"Supprimer",cancelText:"Annuler",type:"danger",position:"center"})]})},Pa=n=>`${Math.round(n).toLocaleString("fr-FR")} FCFA`,Cf=n=>`${Math.round(n)} FCFA`,_9="modulepreload",N9=function(n){return"/"+n},L_={},sv=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");i=h(t.map(f=>{if(f=N9(f),f in L_)return;L_[f]=!0;const p=f.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${v}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":_9,p||(_.as="script"),_.crossOrigin="",_.href=f,d&&_.setAttribute("nonce",d),document.head.appendChild(_),p)return new Promise((b,T)=>{_.addEventListener("load",b),_.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};function nr(n){"@babel/helpers - typeof";return nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(n)}var qo=Uint8Array,Oa=Uint16Array,Yy=Int32Array,Ky=new qo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Qy=new qo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),R_=new qo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O3=function(n,e){for(var t=new Oa(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Yy(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return{b:t,r:i}},F3=O3(Ky,2),A9=F3.b,m1=F3.r;A9[28]=258,m1[258]=28;var S9=O3(Qy,0),k_=S9.r,p1=new Oa(32768);for(var jr=0;jr<32768;++jr){var eu=(jr&43690)>>1|(jr&21845)<<1;eu=(eu&52428)>>2|(eu&13107)<<2,eu=(eu&61680)>>4|(eu&3855)<<4,p1[jr]=((eu&65280)>>8|(eu&255)<<8)>>1}var Gf=(function(n,e,t){for(var r=n.length,i=0,a=new Oa(e);i<r;++i)n[i]&&++a[n[i]-1];var c=new Oa(e);for(i=1;i<e;++i)c[i]=c[i-1]+a[i-1]<<1;var d;if(t){d=new Oa(1<<e);var h=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],p=e-n[i],v=c[n[i]-1]++<<p,_=v|(1<<p)-1;v<=_;++v)d[p1[v]>>h]=f}else for(d=new Oa(r),i=0;i<r;++i)n[i]&&(d[i]=p1[c[n[i]-1]++]>>15-n[i]);return d}),ld=new qo(288);for(var jr=0;jr<144;++jr)ld[jr]=8;for(var jr=144;jr<256;++jr)ld[jr]=9;for(var jr=256;jr<280;++jr)ld[jr]=7;for(var jr=280;jr<288;++jr)ld[jr]=8;var Dg=new qo(32);for(var jr=0;jr<32;++jr)Dg[jr]=5;var j9=Gf(ld,9,0),E9=Gf(Dg,5,0),q3=function(n){return(n+7)/8|0},T9=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new qo(n.subarray(e,t))},ic=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},If=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},av=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,a=t.slice();if(!i)return{t:B3,l:0};if(i==1){var c=new qo(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(re,ne){return re.f-ne.f}),t.push({s:-1,f:25001});var d=t[0],h=t[1],f=0,p=1,v=2;for(t[0]={s:-1,f:d.f+h.f,l:d,r:h};p!=i-1;)d=t[t[f].f<t[v].f?f++:v++],h=t[f!=p&&t[f].f<t[v].f?f++:v++],t[p++]={s:-1,f:d.f+h.f,l:d,r:h};for(var _=a[0].s,r=1;r<i;++r)a[r].s>_&&(_=a[r].s);var b=new Oa(_+1),T=g1(t[p-1],b,0);if(T>e){var r=0,I=0,L=T-e,j=1<<L;for(a.sort(function(ne,V){return b[V.s]-b[ne.s]||ne.f-V.f});r<i;++r){var U=a[r].s;if(b[U]>e)I+=j-(1<<T-b[U]),b[U]=e;else break}for(I>>=L;I>0;){var z=a[r].s;b[z]<e?I-=1<<e-b[z]++-1:++r}for(;r>=0&&I;--r){var B=a[r].s;b[B]==e&&(--b[B],++I)}T=e}return{t:new qo(b),l:T}},g1=function(n,e,t){return n.s==-1?Math.max(g1(n.l,e,t+1),g1(n.r,e,t+1)):e[n.s]=t},P_=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Oa(++e),r=0,i=n[0],a=1,c=function(h){t[r++]=h},d=1;d<=e;++d)if(n[d]==i&&d!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)c(32754);a>2&&(c(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(c(i),--a;a>6;a-=6)c(8304);a>2&&(c(a-3<<5|8208),a=0)}for(;a--;)c(i);a=1,i=n[d]}return{c:t.subarray(0,r),n:e}},Lf=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},V3=function(n,e,t){var r=t.length,i=q3(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var a=0;a<r;++a)n[i+a+4]=t[a];return(i+4+r)*8},D_=function(n,e,t,r,i,a,c,d,h,f,p){ic(e,p++,t),++i[256];for(var v=av(i,15),_=v.t,b=v.l,T=av(a,15),I=T.t,L=T.l,j=P_(_),U=j.c,z=j.n,B=P_(I),re=B.c,ne=B.n,V=new Oa(19),D=0;D<U.length;++D)++V[U[D]&31];for(var D=0;D<re.length;++D)++V[re[D]&31];for(var k=av(V,7),$=k.t,S=k.l,R=19;R>4&&!$[R_[R-1]];--R);var F=f+5<<3,oe=Lf(i,ld)+Lf(a,Dg)+c,be=Lf(i,_)+Lf(a,I)+c+14+3*R+Lf(V,$)+2*V[16]+3*V[17]+7*V[18];if(h>=0&&F<=oe&&F<=be)return V3(e,p,n.subarray(h,h+f));var Q,ae,me,je;if(ic(e,p,1+(be<oe)),p+=2,be<oe){Q=Gf(_,b,0),ae=_,me=Gf(I,L,0),je=I;var Fe=Gf($,S,0);ic(e,p,z-257),ic(e,p+5,ne-1),ic(e,p+10,R-4),p+=14;for(var D=0;D<R;++D)ic(e,p+3*D,$[R_[D]]);p+=3*R;for(var J=[U,re],q=0;q<2;++q)for(var X=J[q],D=0;D<X.length;++D){var ie=X[D]&31;ic(e,p,Fe[ie]),p+=$[ie],ie>15&&(ic(e,p,X[D]>>5&127),p+=X[D]>>12)}}else Q=j9,ae=ld,me=E9,je=Dg;for(var D=0;D<d;++D){var fe=r[D];if(fe>255){var ie=fe>>18&31;If(e,p,Q[ie+257]),p+=ae[ie+257],ie>7&&(ic(e,p,fe>>23&31),p+=Ky[ie]);var ge=fe&31;If(e,p,me[ge]),p+=je[ge],ge>3&&(If(e,p,fe>>5&8191),p+=Qy[ge])}else If(e,p,Q[fe]),p+=ae[fe]}return If(e,p,Q[256]),p+ae[256]},C9=new Yy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),B3=new qo(0),I9=function(n,e,t,r,i,a){var c=a.z||n.length,d=new qo(r+c+5*(1+Math.ceil(c/7e3))+i),h=d.subarray(r,d.length-i),f=a.l,p=(a.r||0)&7;if(e){p&&(h[0]=a.r>>3);for(var v=C9[e-1],_=v>>13,b=v&8191,T=(1<<t)-1,I=a.p||new Oa(32768),L=a.h||new Oa(T+1),j=Math.ceil(t/3),U=2*j,z=function(dt){return(n[dt]^n[dt+1]<<j^n[dt+2]<<U)&T},B=new Yy(25e3),re=new Oa(288),ne=new Oa(32),V=0,D=0,k=a.i||0,$=0,S=a.w||0,R=0;k+2<c;++k){var F=z(k),oe=k&32767,be=L[F];if(I[oe]=be,L[F]=oe,S<=k){var Q=c-k;if((V>7e3||$>24576)&&(Q>423||!f)){p=D_(n,h,0,B,re,ne,D,$,R,k-R,p),$=V=D=0,R=k;for(var ae=0;ae<286;++ae)re[ae]=0;for(var ae=0;ae<30;++ae)ne[ae]=0}var me=2,je=0,Fe=b,J=oe-be&32767;if(Q>2&&F==z(k-J))for(var q=Math.min(_,Q)-1,X=Math.min(32767,k),ie=Math.min(258,Q);J<=X&&--Fe&&oe!=be;){if(n[k+me]==n[k+me-J]){for(var fe=0;fe<ie&&n[k+fe]==n[k+fe-J];++fe);if(fe>me){if(me=fe,je=J,fe>q)break;for(var ge=Math.min(J,fe-2),_e=0,ae=0;ae<ge;++ae){var Le=k-J+ae&32767,ke=I[Le],Be=Le-ke&32767;Be>_e&&(_e=Be,be=Le)}}}oe=be,be=I[oe],J+=oe-be&32767}if(je){B[$++]=268435456|m1[me]<<18|k_[je];var Ze=m1[me]&31,ot=k_[je]&31;D+=Ky[Ze]+Qy[ot],++re[257+Ze],++ne[ot],S=k+me,++V}else B[$++]=n[k],++re[n[k]]}}for(k=Math.max(k,S);k<c;++k)B[$++]=n[k],++re[n[k]];p=D_(n,h,f,B,re,ne,D,$,R,k-R,p),f||(a.r=p&7|h[p/8|0]<<3,p-=7,a.h=L,a.p=I,a.i=k,a.w=S)}else{for(var k=a.w||0;k<c+f;k+=65535){var st=k+65535;st>=c&&(h[p/8|0]=f,st=c),p=V3(h,p+1,n.subarray(k,st))}a.i=c}return T9(d,0,r+q3(p)+i)},U3=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,a=t.length|0,c=0;c!=a;){for(var d=Math.min(c+2655,a);c<d;++c)i+=r+=t[c];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},L9=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),c=new qo(a.length+n.length);c.set(a),c.set(n,a.length),n=c,i.w=a.length}return I9(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},z3=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},R9=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=U3();i.p(e.dictionary),z3(n,2,i.d())}};function x1(n,e){e||(e={});var t=U3();t.p(n);var r=L9(n,e,e.dictionary?6:2,4);return R9(r,e),z3(r,r.length-4,t.d()),r}var k9=typeof TextDecoder<"u"&&new TextDecoder,P9=0;try{k9.decode(B3,{stream:!0}),P9=1}catch{}function D9(n){if(Array.isArray(n))return n}function M9(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,c,d=[],h=!0,f=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(h=(r=a.call(t)).done)&&(d.push(r.value),d.length!==e);h=!0);}catch(p){f=!0,i=p}finally{try{if(!h&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(f)throw i}}return d}}function M_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function O9(n,e){if(n){if(typeof n=="string")return M_(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M_(n,e):void 0}}function F9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O_(n,e){return D9(n)||M9(n,e)||O9(n,e)||F9()}function F_(n,e="utf8"){return new TextDecoder(e).decode(n)}const q9=new TextEncoder;function V9(n){return q9.encode(n)}const B9=1024*8,U9=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),ov={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Xy{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=B9,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,a=e.byteLength-i;let c=i;(ArrayBuffer.isView(e)||e instanceof Xy)&&(e.byteLength!==e.buffer.byteLength&&(c=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=ov[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+r);if(this.littleEndian===U9&&t!=="uint8"&&t!=="int8"){const d=new Uint8Array(this.buffer.slice(i,i+r));d.reverse();const h=new ov[t](d.buffer);return this.offset+=r,h.reverse(),h}const c=new ov[t](a);return this.offset+=r,c}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return F_(this.readBytes(e))}decodeText(e=1,t="utf8"){return F_(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(V9(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Bh(n){let e=n.length;for(;--e>=0;)n[e]=0}const z9=3,H9=258,H3=29,$9=256,G9=$9+1+H3,$3=30,W9=512,Y9=new Array((G9+2)*2);Bh(Y9);const K9=new Array($3*2);Bh(K9);const Q9=new Array(W9);Bh(Q9);const X9=new Array(H9-z9+1);Bh(X9);const J9=new Array(H3);Bh(J9);const Z9=new Array($3);Bh(Z9);const eF=(n,e,t,r)=>{let i=n&65535|0,a=n>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do i=i+e[r++]|0,a=a+i|0;while(--c);i%=65521,a%=65521}return i|a<<16|0};var v1=eF;const tF=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},nF=new Uint32Array(tF()),rF=(n,e,t,r)=>{const i=nF,a=r+t;n^=-1;for(let c=r;c<a;c++)n=n>>>8^i[(n^e[c])&255];return n^-1};var dl=rF,y1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},G3={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const iF=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var sF=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)iF(t,r)&&(n[r]=t[r])}}return n},aF=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,i=0,a=n.length;r<a;r++){let c=n[r];t.set(c,i),i+=c.length}return t},W3={assign:sF,flattenChunks:aF};let Y3=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Y3=!1}const lm=new Uint8Array(256);for(let n=0;n<256;n++)lm[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;lm[254]=lm[254]=1;var oF=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,a,c=n.length,d=0;for(i=0;i<c;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<c&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),a=0,i=0;a<d;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<c&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|t&63):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|t&63):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|t&63);return e};const lF=(n,e)=>{if(e<65534&&n.subarray&&Y3)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t};var cF=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i;const a=new Array(t*2);for(i=0,r=0;r<t;){let c=n[r++];if(c<128){a[i++]=c;continue}let d=lm[c];if(d>4){a[i++]=65533,r+=d-1;continue}for(c&=d===2?31:d===3?15:7;d>1&&r<t;)c=c<<6|n[r++]&63,d--;if(d>1){a[i++]=65533;continue}c<65536?a[i++]=c:(c-=65536,a[i++]=55296|c>>10&1023,a[i++]=56320|c&1023)}return lF(a,i)},uF=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+lm[n[t]]>e?t:e},b1={string2buf:oF,buf2string:cF,utf8border:uF};function dF(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var hF=dF;const Ip=16209,fF=16191;var mF=function(e,t){let r,i,a,c,d,h,f,p,v,_,b,T,I,L,j,U,z,B,re,ne,V,D,k,$;const S=e.state;r=e.next_in,k=e.input,i=r+(e.avail_in-5),a=e.next_out,$=e.output,c=a-(t-e.avail_out),d=a+(e.avail_out-257),h=S.dmax,f=S.wsize,p=S.whave,v=S.wnext,_=S.window,b=S.hold,T=S.bits,I=S.lencode,L=S.distcode,j=(1<<S.lenbits)-1,U=(1<<S.distbits)-1;e:do{T<15&&(b+=k[r++]<<T,T+=8,b+=k[r++]<<T,T+=8),z=I[b&j];t:for(;;){if(B=z>>>24,b>>>=B,T-=B,B=z>>>16&255,B===0)$[a++]=z&65535;else if(B&16){re=z&65535,B&=15,B&&(T<B&&(b+=k[r++]<<T,T+=8),re+=b&(1<<B)-1,b>>>=B,T-=B),T<15&&(b+=k[r++]<<T,T+=8,b+=k[r++]<<T,T+=8),z=L[b&U];n:for(;;){if(B=z>>>24,b>>>=B,T-=B,B=z>>>16&255,B&16){if(ne=z&65535,B&=15,T<B&&(b+=k[r++]<<T,T+=8,T<B&&(b+=k[r++]<<T,T+=8)),ne+=b&(1<<B)-1,ne>h){e.msg="invalid distance too far back",S.mode=Ip;break e}if(b>>>=B,T-=B,B=a-c,ne>B){if(B=ne-B,B>p&&S.sane){e.msg="invalid distance too far back",S.mode=Ip;break e}if(V=0,D=_,v===0){if(V+=f-B,B<re){re-=B;do $[a++]=_[V++];while(--B);V=a-ne,D=$}}else if(v<B){if(V+=f+v-B,B-=v,B<re){re-=B;do $[a++]=_[V++];while(--B);if(V=0,v<re){B=v,re-=B;do $[a++]=_[V++];while(--B);V=a-ne,D=$}}}else if(V+=v-B,B<re){re-=B;do $[a++]=_[V++];while(--B);V=a-ne,D=$}for(;re>2;)$[a++]=D[V++],$[a++]=D[V++],$[a++]=D[V++],re-=3;re&&($[a++]=D[V++],re>1&&($[a++]=D[V++]))}else{V=a-ne;do $[a++]=$[V++],$[a++]=$[V++],$[a++]=$[V++],re-=3;while(re>2);re&&($[a++]=$[V++],re>1&&($[a++]=$[V++]))}}else if((B&64)===0){z=L[(z&65535)+(b&(1<<B)-1)];continue n}else{e.msg="invalid distance code",S.mode=Ip;break e}break}}else if((B&64)===0){z=I[(z&65535)+(b&(1<<B)-1)];continue t}else if(B&32){S.mode=fF;break e}else{e.msg="invalid literal/length code",S.mode=Ip;break e}break}}while(r<i&&a<d);re=T>>3,r-=re,T-=re<<3,b&=(1<<T)-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=a<d?257+(d-a):257-(a-d),S.hold=b,S.bits=T};const Jd=15,q_=852,V_=592,B_=0,lv=1,U_=2,pF=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gF=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),xF=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),vF=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),yF=(n,e,t,r,i,a,c,d)=>{const h=d.bits;let f=0,p=0,v=0,_=0,b=0,T=0,I=0,L=0,j=0,U=0,z,B,re,ne,V,D=null,k;const $=new Uint16Array(Jd+1),S=new Uint16Array(Jd+1);let R=null,F,oe,be;for(f=0;f<=Jd;f++)$[f]=0;for(p=0;p<r;p++)$[e[t+p]]++;for(b=h,_=Jd;_>=1&&$[_]===0;_--);if(b>_&&(b=_),_===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,d.bits=1,0;for(v=1;v<_&&$[v]===0;v++);for(b<v&&(b=v),L=1,f=1;f<=Jd;f++)if(L<<=1,L-=$[f],L<0)return-1;if(L>0&&(n===B_||_!==1))return-1;for(S[1]=0,f=1;f<Jd;f++)S[f+1]=S[f]+$[f];for(p=0;p<r;p++)e[t+p]!==0&&(c[S[e[t+p]]++]=p);if(n===B_?(D=R=c,k=20):n===lv?(D=pF,R=gF,k=257):(D=xF,R=vF,k=0),U=0,p=0,f=v,V=a,T=b,I=0,re=-1,j=1<<b,ne=j-1,n===lv&&j>q_||n===U_&&j>V_)return 1;for(;;){F=f-I,c[p]+1<k?(oe=0,be=c[p]):c[p]>=k?(oe=R[c[p]-k],be=D[c[p]-k]):(oe=96,be=0),z=1<<f-I,B=1<<T,v=B;do B-=z,i[V+(U>>I)+B]=F<<24|oe<<16|be|0;while(B!==0);for(z=1<<f-1;U&z;)z>>=1;if(z!==0?(U&=z-1,U+=z):U=0,p++,--$[f]===0){if(f===_)break;f=e[t+c[p]]}if(f>b&&(U&ne)!==re){for(I===0&&(I=b),V+=v,T=f-I,L=1<<T;T+I<_&&(L-=$[T+I],!(L<=0));)T++,L<<=1;if(j+=1<<T,n===lv&&j>q_||n===U_&&j>V_)return 1;re=U&ne,i[re]=b<<24|T<<16|V-a|0}}return U!==0&&(i[V+U]=f-I<<24|64<<16|0),d.bits=b,0};var Wf=yF;const bF=0,K3=1,Q3=2,{Z_FINISH:z_,Z_BLOCK:wF,Z_TREES:Lp,Z_OK:cd,Z_STREAM_END:_F,Z_NEED_DICT:NF,Z_STREAM_ERROR:co,Z_DATA_ERROR:X3,Z_MEM_ERROR:J3,Z_BUF_ERROR:AF,Z_DEFLATED:H_}=G3,b0=16180,$_=16181,G_=16182,W_=16183,Y_=16184,K_=16185,Q_=16186,X_=16187,J_=16188,Z_=16189,Mg=16190,sc=16191,cv=16192,eN=16193,uv=16194,tN=16195,nN=16196,rN=16197,iN=16198,Rp=16199,kp=16200,sN=16201,aN=16202,oN=16203,lN=16204,cN=16205,dv=16206,uN=16207,dN=16208,Pr=16209,Z3=16210,ej=16211,SF=852,jF=592,EF=15,TF=EF,hN=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function CF(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const pd=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<b0||e.mode>ej?1:0},tj=n=>{if(pd(n))return co;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=b0,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(SF),e.distcode=e.distdyn=new Int32Array(jF),e.sane=1,e.back=-1,cd},nj=n=>{if(pd(n))return co;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,tj(n)},rj=(n,e)=>{let t;if(pd(n))return co;const r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?co:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,nj(n))},ij=(n,e)=>{if(!n)return co;const t=new CF;n.state=t,t.strm=n,t.window=null,t.mode=b0;const r=rj(n,e);return r!==cd&&(n.state=null),r},IF=n=>ij(n,TF);let fN=!0,hv,fv;const LF=n=>{if(fN){hv=new Int32Array(512),fv=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Wf(K3,n.lens,0,288,hv,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Wf(Q3,n.lens,0,32,fv,0,n.work,{bits:5}),fN=!1}n.lencode=hv,n.lenbits=9,n.distcode=fv,n.distbits=5},sj=(n,e,t,r)=>{let i;const a=n.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(e.subarray(t-r,t-r+i),a.wnext),r-=i,r?(a.window.set(e.subarray(t-r,t),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},RF=(n,e)=>{let t,r,i,a,c,d,h,f,p,v,_,b,T,I,L=0,j,U,z,B,re,ne,V,D;const k=new Uint8Array(4);let $,S;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(pd(n)||!n.output||!n.input&&n.avail_in!==0)return co;t=n.state,t.mode===sc&&(t.mode=cv),c=n.next_out,i=n.output,h=n.avail_out,a=n.next_in,r=n.input,d=n.avail_in,f=t.hold,p=t.bits,v=d,_=h,D=cd;e:for(;;)switch(t.mode){case b0:if(t.wrap===0){t.mode=cv;break}for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,k[0]=f&255,k[1]=f>>>8&255,t.check=dl(t.check,k,2,0),f=0,p=0,t.mode=$_;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){n.msg="incorrect header check",t.mode=Pr;break}if((f&15)!==H_){n.msg="unknown compression method",t.mode=Pr;break}if(f>>>=4,p-=4,V=(f&15)+8,t.wbits===0&&(t.wbits=V),V>15||V>t.wbits){n.msg="invalid window size",t.mode=Pr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=f&512?Z_:sc,f=0,p=0;break;case $_:for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.flags=f,(t.flags&255)!==H_){n.msg="unknown compression method",t.mode=Pr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Pr;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=dl(t.check,k,2,0)),f=0,p=0,t.mode=G_;case G_:for(;p<32;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,k[2]=f>>>16&255,k[3]=f>>>24&255,t.check=dl(t.check,k,4,0)),f=0,p=0,t.mode=W_;case W_:for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=dl(t.check,k,2,0)),f=0,p=0,t.mode=Y_;case Y_:if(t.flags&1024){for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=dl(t.check,k,2,0)),f=0,p=0}else t.head&&(t.head.extra=null);t.mode=K_;case K_:if(t.flags&1024&&(b=t.length,b>d&&(b=d),b&&(t.head&&(V=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(a,a+b),V)),t.flags&512&&t.wrap&4&&(t.check=dl(t.check,r,b,a)),d-=b,a+=b,t.length-=b),t.length))break e;t.length=0,t.mode=Q_;case Q_:if(t.flags&2048){if(d===0)break e;b=0;do V=r[a+b++],t.head&&V&&t.length<65536&&(t.head.name+=String.fromCharCode(V));while(V&&b<d);if(t.flags&512&&t.wrap&4&&(t.check=dl(t.check,r,b,a)),d-=b,a+=b,V)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=X_;case X_:if(t.flags&4096){if(d===0)break e;b=0;do V=r[a+b++],t.head&&V&&t.length<65536&&(t.head.comment+=String.fromCharCode(V));while(V&&b<d);if(t.flags&512&&t.wrap&4&&(t.check=dl(t.check,r,b,a)),d-=b,a+=b,V)break e}else t.head&&(t.head.comment=null);t.mode=J_;case J_:if(t.flags&512){for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.wrap&4&&f!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Pr;break}f=0,p=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=sc;break;case Z_:for(;p<32;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}n.adler=t.check=hN(f),f=0,p=0,t.mode=Mg;case Mg:if(t.havedict===0)return n.next_out=c,n.avail_out=h,n.next_in=a,n.avail_in=d,t.hold=f,t.bits=p,NF;n.adler=t.check=1,t.mode=sc;case sc:if(e===wF||e===Lp)break e;case cv:if(t.last){f>>>=p&7,p-=p&7,t.mode=dv;break}for(;p<3;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}switch(t.last=f&1,f>>>=1,p-=1,f&3){case 0:t.mode=eN;break;case 1:if(LF(t),t.mode=Rp,e===Lp){f>>>=2,p-=2;break e}break;case 2:t.mode=nN;break;case 3:n.msg="invalid block type",t.mode=Pr}f>>>=2,p-=2;break;case eN:for(f>>>=p&7,p-=p&7;p<32;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if((f&65535)!==(f>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Pr;break}if(t.length=f&65535,f=0,p=0,t.mode=uv,e===Lp)break e;case uv:t.mode=tN;case tN:if(b=t.length,b){if(b>d&&(b=d),b>h&&(b=h),b===0)break e;i.set(r.subarray(a,a+b),c),d-=b,a+=b,h-=b,c+=b,t.length-=b;break}t.mode=sc;break;case nN:for(;p<14;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.nlen=(f&31)+257,f>>>=5,p-=5,t.ndist=(f&31)+1,f>>>=5,p-=5,t.ncode=(f&15)+4,f>>>=4,p-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Pr;break}t.have=0,t.mode=rN;case rN:for(;t.have<t.ncode;){for(;p<3;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.lens[R[t.have++]]=f&7,f>>>=3,p-=3}for(;t.have<19;)t.lens[R[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,$={bits:t.lenbits},D=Wf(bF,t.lens,0,19,t.lencode,0,t.work,$),t.lenbits=$.bits,D){n.msg="invalid code lengths set",t.mode=Pr;break}t.have=0,t.mode=iN;case iN:for(;t.have<t.nlen+t.ndist;){for(;L=t.lencode[f&(1<<t.lenbits)-1],j=L>>>24,U=L>>>16&255,z=L&65535,!(j<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(z<16)f>>>=j,p-=j,t.lens[t.have++]=z;else{if(z===16){for(S=j+2;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(f>>>=j,p-=j,t.have===0){n.msg="invalid bit length repeat",t.mode=Pr;break}V=t.lens[t.have-1],b=3+(f&3),f>>>=2,p-=2}else if(z===17){for(S=j+3;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}f>>>=j,p-=j,V=0,b=3+(f&7),f>>>=3,p-=3}else{for(S=j+7;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}f>>>=j,p-=j,V=0,b=11+(f&127),f>>>=7,p-=7}if(t.have+b>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Pr;break}for(;b--;)t.lens[t.have++]=V}}if(t.mode===Pr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Pr;break}if(t.lenbits=9,$={bits:t.lenbits},D=Wf(K3,t.lens,0,t.nlen,t.lencode,0,t.work,$),t.lenbits=$.bits,D){n.msg="invalid literal/lengths set",t.mode=Pr;break}if(t.distbits=6,t.distcode=t.distdyn,$={bits:t.distbits},D=Wf(Q3,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,$),t.distbits=$.bits,D){n.msg="invalid distances set",t.mode=Pr;break}if(t.mode=Rp,e===Lp)break e;case Rp:t.mode=kp;case kp:if(d>=6&&h>=258){n.next_out=c,n.avail_out=h,n.next_in=a,n.avail_in=d,t.hold=f,t.bits=p,mF(n,_),c=n.next_out,i=n.output,h=n.avail_out,a=n.next_in,r=n.input,d=n.avail_in,f=t.hold,p=t.bits,t.mode===sc&&(t.back=-1);break}for(t.back=0;L=t.lencode[f&(1<<t.lenbits)-1],j=L>>>24,U=L>>>16&255,z=L&65535,!(j<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(U&&(U&240)===0){for(B=j,re=U,ne=z;L=t.lencode[ne+((f&(1<<B+re)-1)>>B)],j=L>>>24,U=L>>>16&255,z=L&65535,!(B+j<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}f>>>=B,p-=B,t.back+=B}if(f>>>=j,p-=j,t.back+=j,t.length=z,U===0){t.mode=cN;break}if(U&32){t.back=-1,t.mode=sc;break}if(U&64){n.msg="invalid literal/length code",t.mode=Pr;break}t.extra=U&15,t.mode=sN;case sN:if(t.extra){for(S=t.extra;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=aN;case aN:for(;L=t.distcode[f&(1<<t.distbits)-1],j=L>>>24,U=L>>>16&255,z=L&65535,!(j<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if((U&240)===0){for(B=j,re=U,ne=z;L=t.distcode[ne+((f&(1<<B+re)-1)>>B)],j=L>>>24,U=L>>>16&255,z=L&65535,!(B+j<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}f>>>=B,p-=B,t.back+=B}if(f>>>=j,p-=j,t.back+=j,U&64){n.msg="invalid distance code",t.mode=Pr;break}t.offset=z,t.extra=U&15,t.mode=oN;case oN:if(t.extra){for(S=t.extra;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Pr;break}t.mode=lN;case lN:if(h===0)break e;if(b=_-h,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Pr;break}b>t.wnext?(b-=t.wnext,T=t.wsize-b):T=t.wnext-b,b>t.length&&(b=t.length),I=t.window}else I=i,T=c-t.offset,b=t.length;b>h&&(b=h),h-=b,t.length-=b;do i[c++]=I[T++];while(--b);t.length===0&&(t.mode=kp);break;case cN:if(h===0)break e;i[c++]=t.length,h--,t.mode=kp;break;case dv:if(t.wrap){for(;p<32;){if(d===0)break e;d--,f|=r[a++]<<p,p+=8}if(_-=h,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?dl(t.check,i,_,c-_):v1(t.check,i,_,c-_)),_=h,t.wrap&4&&(t.flags?f:hN(f))!==t.check){n.msg="incorrect data check",t.mode=Pr;break}f=0,p=0}t.mode=uN;case uN:if(t.wrap&&t.flags){for(;p<32;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.wrap&4&&f!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Pr;break}f=0,p=0}t.mode=dN;case dN:D=_F;break e;case Pr:D=X3;break e;case Z3:return J3;case ej:default:return co}return n.next_out=c,n.avail_out=h,n.next_in=a,n.avail_in=d,t.hold=f,t.bits=p,(t.wsize||_!==n.avail_out&&t.mode<Pr&&(t.mode<dv||e!==z_))&&sj(n,n.output,n.next_out,_-n.avail_out),v-=n.avail_in,_-=n.avail_out,n.total_in+=v,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?dl(t.check,i,_,n.next_out-_):v1(t.check,i,_,n.next_out-_)),n.data_type=t.bits+(t.last?64:0)+(t.mode===sc?128:0)+(t.mode===Rp||t.mode===uv?256:0),(v===0&&_===0||e===z_)&&D===cd&&(D=AF),D},kF=n=>{if(pd(n))return co;let e=n.state;return e.window&&(e.window=null),n.state=null,cd},PF=(n,e)=>{if(pd(n))return co;const t=n.state;return(t.wrap&2)===0?co:(t.head=e,e.done=!1,cd)},DF=(n,e)=>{const t=e.length;let r,i,a;return pd(n)||(r=n.state,r.wrap!==0&&r.mode!==Mg)?co:r.mode===Mg&&(i=1,i=v1(i,e,t,0),i!==r.check)?X3:(a=sj(n,e,t,t),a?(r.mode=Z3,J3):(r.havedict=1,cd))};var MF=nj,OF=rj,FF=tj,qF=IF,VF=ij,BF=RF,UF=kF,zF=PF,HF=DF,$F="pako inflate (from Nodeca project)",ac={inflateReset:MF,inflateReset2:OF,inflateResetKeep:FF,inflateInit:qF,inflateInit2:VF,inflate:BF,inflateEnd:UF,inflateGetHeader:zF,inflateSetDictionary:HF,inflateInfo:$F};function GF(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var WF=GF;const aj=Object.prototype.toString,{Z_NO_FLUSH:YF,Z_FINISH:KF,Z_OK:cm,Z_STREAM_END:mv,Z_NEED_DICT:pv,Z_STREAM_ERROR:QF,Z_DATA_ERROR:mN,Z_MEM_ERROR:XF}=G3;function Cm(n){this.options=W3.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new hF,this.strm.avail_out=0;let t=ac.inflateInit2(this.strm,e.windowBits);if(t!==cm)throw new Error(y1[t]);if(this.header=new WF,ac.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=b1.string2buf(e.dictionary):aj.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=ac.inflateSetDictionary(this.strm,e.dictionary),t!==cm)))throw new Error(y1[t])}Cm.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,c,d;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?KF:YF,aj.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),a=ac.inflate(t,c),a===pv&&i&&(a=ac.inflateSetDictionary(t,i),a===cm?a=ac.inflate(t,c):a===mN&&(a=pv));t.avail_in>0&&a===mv&&t.state.wrap>0&&n[t.next_in]!==0;)ac.inflateReset(t),a=ac.inflate(t,c);switch(a){case QF:case mN:case pv:case XF:return this.onEnd(a),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||a===mv))if(this.options.to==="string"){let h=b1.utf8border(t.output,t.next_out),f=t.next_out-h,p=b1.buf2string(t.output,h);t.next_out=f,t.avail_out=r-f,f&&t.output.set(t.output.subarray(h,h+f),0),this.onData(p)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===cm&&d===0)){if(a===mv)return a=ac.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Cm.prototype.onData=function(n){this.chunks.push(n)};Cm.prototype.onEnd=function(n){n===cm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=W3.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function JF(n,e){const t=new Cm(e);if(t.push(n),t.err)throw t.msg||y1[t.err];return t.result}var ZF=Cm,eq=JF,tq={Inflate:ZF,inflate:eq};const{Inflate:nq,inflate:rq}=tq;var pN=nq,iq=rq;const oj=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;oj[n]=e}const gN=4294967295;function sq(n,e,t){let r=n;for(let i=0;i<t;i++)r=oj[(r^e[i])&255]^r>>>8;return r}function aq(n,e){return(sq(gN,n,e)^gN)>>>0}function xN(n,e,t){const r=n.readUint32(),i=aq(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function lj(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function cj(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function uj(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function dj(n,e,t,r,i){let a=0;if(t.length===0){for(;a<i;a++)e[a]=n[a];for(;a<r;a++)e[a]=n[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=n[a]+(t[a]>>1)&255;for(;a<r;a++)e[a]=n[a]+(e[a-i]+t[a]>>1)&255}}function hj(n,e,t,r,i){let a=0;if(t.length===0){for(;a<i;a++)e[a]=n[a];for(;a<r;a++)e[a]=n[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=n[a]+t[a]&255;for(;a<r;a++)e[a]=n[a]+oq(e[a-i],t[a],t[a-i])&255}}function oq(n,e,t){const r=n+e-t,i=Math.abs(r-n),a=Math.abs(r-e),c=Math.abs(r-t);return i<=a&&i<=c?n:a<=c?e:t}function lq(n,e,t,r,i,a){switch(n){case 0:lj(e,t,i);break;case 1:cj(e,t,i,a);break;case 2:uj(e,t,r,i);break;case 3:dj(e,t,r,i,a);break;case 4:hj(e,t,r,i,a);break;default:throw new Error(`Unsupported filter: ${n}`)}}const cq=new Uint16Array([255]),uq=new Uint8Array(cq.buffer),dq=uq[0]===255;function hq(n){const{data:e,width:t,height:r,channels:i,depth:a}=n,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(a/8)*i,h=new Uint8Array(r*t*d);let f=0;for(let p=0;p<7;p++){const v=c[p],_=Math.ceil((t-v.x)/v.xStep),b=Math.ceil((r-v.y)/v.yStep);if(_<=0||b<=0)continue;const T=_*d,I=new Uint8Array(T);for(let L=0;L<b;L++){const j=e[f++],U=e.subarray(f,f+T);f+=T;const z=new Uint8Array(T);lq(j,U,z,I,T,d),I.set(z);for(let B=0;B<_;B++){const re=v.x+B*v.xStep,ne=v.y+L*v.yStep;if(!(re>=t||ne>=r))for(let V=0;V<d;V++)h[(ne*t+re)*d+V]=z[B*d+V]}}}if(a===16){const p=new Uint16Array(h.buffer);if(dq)for(let v=0;v<p.length;v++)p[v]=fq(p[v]);return p}else return h}function fq(n){return(n&255)<<8|n>>8&255}const mq=new Uint16Array([255]),pq=new Uint8Array(mq.buffer),gq=pq[0]===255,xq=new Uint8Array(0);function vN(n){const{data:e,width:t,height:r,channels:i,depth:a}=n,c=Math.ceil(a/8)*i,d=Math.ceil(a/8*i*t),h=new Uint8Array(r*d);let f=xq,p=0,v,_;for(let b=0;b<r;b++){switch(v=e.subarray(p+1,p+1+d),_=h.subarray(b*d,(b+1)*d),e[p]){case 0:lj(v,_,d);break;case 1:cj(v,_,d,c);break;case 2:uj(v,_,f,d);break;case 3:dj(v,_,f,d,c);break;case 4:hj(v,_,f,d,c);break;default:throw new Error(`Unsupported filter: ${e[p]}`)}f=_,p+=d+1}if(a===16){const b=new Uint16Array(h.buffer);if(gq)for(let T=0;T<b.length;T++)b[T]=vq(b[T]);return b}else return h}function vq(n){return(n&255)<<8|n>>8&255}const eg=Uint8Array.of(137,80,78,71,13,10,26,10);function yN(n){if(!yq(n.readBytes(eg.length)))throw new Error("wrong PNG signature")}function yq(n){if(n.length<eg.length)return!1;for(let e=0;e<eg.length;e++)if(n[e]!==eg[e])return!1;return!0}const bq="tEXt",wq=0,fj=new TextDecoder("latin1");function _q(n){if(Aq(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const Nq=/^[\u0000-\u00FF]*$/;function Aq(n){if(!Nq.test(n))throw new Error("invalid latin1 text")}function Sq(n,e,t){const r=mj(e);n[r]=jq(e,t-r.length-1)}function mj(n){for(n.mark();n.readByte()!==wq;);const e=n.offset;n.reset();const t=fj.decode(n.readBytes(e-n.offset-1));return n.skip(1),_q(t),t}function jq(n,e){return fj.decode(n.readBytes(e))}const ka={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},gv={UNKNOWN:-1,DEFLATE:0},bN={UNKNOWN:-1,ADAPTIVE:0},xv={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Pp={NONE:0,BACKGROUND:1,PREVIOUS:2},vv={SOURCE:0,OVER:1};class Eq extends Xy{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new pN,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=gv.UNKNOWN,this._filterMethod=bN.UNKNOWN,this._interlaceMethod=xv.UNKNOWN,this._colorType=ka.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(yN(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(yN(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case bq:Sq(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?xN(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?xN(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Tq(this.readUint8());const t=this.readUint8();this._colorType=t;let r;switch(t){case ka.GREYSCALE:r=1;break;case ka.TRUECOLOUR:r=3;break;case ka.INDEXED_COLOUR:r=1;break;case ka.GREYSCALE_ALPHA:r=2;break;case ka.TRUECOLOUR_ALPHA:r=4;break;case ka.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==gv.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case ka.GREYSCALE:case ka.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case ka.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case ka.UNKNOWN:case ka.GREYSCALE_ALPHA:case ka.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=mj(this),r=this.readUint8();if(r!==gv.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:iq(i)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=vN({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case Pp.NONE:break;case Pp.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let a=0;a<this._png.width;a++){const c=(i*e.width+a)*this._png.channels;for(let d=0;d<this._png.channels;d++)r.data[c+d]=0}break;case Pp.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const r=1<<this._png.depth,i=(a,c)=>{const d=((a+t.yOffset)*this._png.width+t.xOffset+c)*this._png.channels,h=(a*t.width+c)*this._png.channels;return{index:d,frameIndex:h}};switch(t.blendOp){case vv.SOURCE:for(let a=0;a<t.height;a++)for(let c=0;c<t.width;c++){const{index:d,frameIndex:h}=i(a,c);for(let f=0;f<this._png.channels;f++)e.data[d+f]=t.data[h+f]}break;case vv.OVER:for(let a=0;a<t.height;a++)for(let c=0;c<t.width;c++){const{index:d,frameIndex:h}=i(a,c);for(let f=0;f<this._png.channels;f++){const p=t.data[h+this._png.channels-1]/r,v=f%(this._png.channels-1)===0?1:t.data[h+f],_=Math.floor(p*v+(1-p)*e.data[d+f]);e.data[d+f]+=_}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==bN.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===xv.NO_INTERLACE)this._png.data=vN({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===xv.ADAM7)this._png.data=hq({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Pp.NONE,blendOp:vv.SOURCE,data:e}),this._inflator=new pN,this._writingDataChunks=!1}}function Tq(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var wN;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(wN||(wN={}));function Cq(n,e){return new Eq(n,e).decode()}var Zt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function yv(){Zt.console&&typeof Zt.console.log=="function"&&Zt.console.log.apply(Zt.console,arguments)}var yr={log:yv,warn:function(n){Zt.console&&(typeof Zt.console.warn=="function"?Zt.console.warn.apply(Zt.console,arguments):yv.call(null,arguments))},error:function(n){Zt.console&&(typeof Zt.console.error=="function"?Zt.console.error.apply(Zt.console,arguments):yv(n))}};function bv(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Yu(r.response,e,t)},r.onerror=function(){yr.error("could not download file")},r.send()}function _N(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Dp(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Yu=Zt.saveAs||((typeof window>"u"?"undefined":nr(window))!=="object"||window!==Zt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Zt.URL||Zt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?_N(i.href)?bv(n,e,t):Dp(i,i.target="_blank"):Dp(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Dp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(_N(n))bv(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Dp(r)})}else navigator.msSaveOrOpenBlob((function(i,a){return a===void 0?a={autoBom:!1}:nr(a)!=="object"&&(yr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return bv(n,e,t);var i=n.type==="application/octet-stream",a=/constructor/i.test(Zt.HTMLElement)||Zt.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&a)&&(typeof FileReader>"u"?"undefined":nr(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var p=d.result;p=c?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},d.readAsDataURL(n)}else{var h=Zt.URL||Zt.webkitURL,f=h.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});function pj(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,a=t[r].process,c=i.exec(n);c&&(e=a(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+d+h+f}}var tg=Zt.atob.bind(Zt),NN=Zt.btoa.bind(Zt);function wv(n,e){var t=n[0],r=n[1],i=n[2],a=n[3];t=Ts(t,r,i,a,e[0],7,-680876936),a=Ts(a,t,r,i,e[1],12,-389564586),i=Ts(i,a,t,r,e[2],17,606105819),r=Ts(r,i,a,t,e[3],22,-1044525330),t=Ts(t,r,i,a,e[4],7,-176418897),a=Ts(a,t,r,i,e[5],12,1200080426),i=Ts(i,a,t,r,e[6],17,-1473231341),r=Ts(r,i,a,t,e[7],22,-45705983),t=Ts(t,r,i,a,e[8],7,1770035416),a=Ts(a,t,r,i,e[9],12,-1958414417),i=Ts(i,a,t,r,e[10],17,-42063),r=Ts(r,i,a,t,e[11],22,-1990404162),t=Ts(t,r,i,a,e[12],7,1804603682),a=Ts(a,t,r,i,e[13],12,-40341101),i=Ts(i,a,t,r,e[14],17,-1502002290),t=Cs(t,r=Ts(r,i,a,t,e[15],22,1236535329),i,a,e[1],5,-165796510),a=Cs(a,t,r,i,e[6],9,-1069501632),i=Cs(i,a,t,r,e[11],14,643717713),r=Cs(r,i,a,t,e[0],20,-373897302),t=Cs(t,r,i,a,e[5],5,-701558691),a=Cs(a,t,r,i,e[10],9,38016083),i=Cs(i,a,t,r,e[15],14,-660478335),r=Cs(r,i,a,t,e[4],20,-405537848),t=Cs(t,r,i,a,e[9],5,568446438),a=Cs(a,t,r,i,e[14],9,-1019803690),i=Cs(i,a,t,r,e[3],14,-187363961),r=Cs(r,i,a,t,e[8],20,1163531501),t=Cs(t,r,i,a,e[13],5,-1444681467),a=Cs(a,t,r,i,e[2],9,-51403784),i=Cs(i,a,t,r,e[7],14,1735328473),t=Is(t,r=Cs(r,i,a,t,e[12],20,-1926607734),i,a,e[5],4,-378558),a=Is(a,t,r,i,e[8],11,-2022574463),i=Is(i,a,t,r,e[11],16,1839030562),r=Is(r,i,a,t,e[14],23,-35309556),t=Is(t,r,i,a,e[1],4,-1530992060),a=Is(a,t,r,i,e[4],11,1272893353),i=Is(i,a,t,r,e[7],16,-155497632),r=Is(r,i,a,t,e[10],23,-1094730640),t=Is(t,r,i,a,e[13],4,681279174),a=Is(a,t,r,i,e[0],11,-358537222),i=Is(i,a,t,r,e[3],16,-722521979),r=Is(r,i,a,t,e[6],23,76029189),t=Is(t,r,i,a,e[9],4,-640364487),a=Is(a,t,r,i,e[12],11,-421815835),i=Is(i,a,t,r,e[15],16,530742520),t=Ls(t,r=Is(r,i,a,t,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Ls(a,t,r,i,e[7],10,1126891415),i=Ls(i,a,t,r,e[14],15,-1416354905),r=Ls(r,i,a,t,e[5],21,-57434055),t=Ls(t,r,i,a,e[12],6,1700485571),a=Ls(a,t,r,i,e[3],10,-1894986606),i=Ls(i,a,t,r,e[10],15,-1051523),r=Ls(r,i,a,t,e[1],21,-2054922799),t=Ls(t,r,i,a,e[8],6,1873313359),a=Ls(a,t,r,i,e[15],10,-30611744),i=Ls(i,a,t,r,e[6],15,-1560198380),r=Ls(r,i,a,t,e[13],21,1309151649),t=Ls(t,r,i,a,e[4],6,-145523070),a=Ls(a,t,r,i,e[11],10,-1120210379),i=Ls(i,a,t,r,e[2],15,718787259),r=Ls(r,i,a,t,e[9],21,-343485551),n[0]=cu(t,n[0]),n[1]=cu(r,n[1]),n[2]=cu(i,n[2]),n[3]=cu(a,n[3])}function w0(n,e,t,r,i,a){return e=cu(cu(e,n),cu(r,a)),cu(e<<i|e>>>32-i,t)}function Ts(n,e,t,r,i,a,c){return w0(e&t|~e&r,n,e,i,a,c)}function Cs(n,e,t,r,i,a,c){return w0(e&r|t&~r,n,e,i,a,c)}function Is(n,e,t,r,i,a,c){return w0(e^t^r,n,e,i,a,c)}function Ls(n,e,t,r,i,a,c){return w0(t^(e|~r),n,e,i,a,c)}function gj(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)wv(r,Iq(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(wv(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,wv(r,i),r}function Iq(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var AN="0123456789abcdef".split("");function Lq(n){for(var e="",t=0;t<4;t++)e+=AN[n>>8*t+4&15]+AN[n>>8*t&15];return e}function Rq(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function w1(n){return gj(n).map(Rq).join("")}var kq=(function(n){for(var e=0;e<n.length;e++)n[e]=Lq(n[e]);return n.join("")})(gj("hello"))!="5d41402abc4b2a76b9719d911017c592";function cu(n,e){if(kq){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function _1(n,e){var t,r,i,a;if(n!==t){for(var c=(i=n,a=1+(256/n.length|0),new Array(a+1).join(i)),d=[],h=0;h<256;h++)d[h]=h;var f=0;for(h=0;h<256;h++){var p=d[h];f=(f+p+c.charCodeAt(h))%256,d[h]=d[f],d[f]=p}t=n,r=d}else d=r;var v=e.length,_=0,b=0,T="";for(h=0;h<v;h++)b=(b+(p=d[_=(_+1)%256]))%256,d[_]=d[b],d[b]=p,c=d[(d[_]+d[b])%256],T+=String.fromCharCode(e.charCodeAt(h)^c);return T}var SN={print:4,modify:8,copy:16,"annot-forms":32};function sh(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(d){if(SN.perm!==void 0)throw new Error("Invalid permission: "+d);i+=SN[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,c),this.P=-(1+(255^i)),this.encryptionKey=w1(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=_1(this.encryptionKey,this.padding)}function ah(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function jN(n){if(nr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[r,!!i],a},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[t]){var c=e[t][a];try{c[0].apply(n,r)}catch(d){Zt.console&&yr.error("jsPDF PubSub Error",d.message,d)}c[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Og(n){if(!(this instanceof Og))return new Og(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function xj(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Ku(n,e,t,r,i){if(!(this instanceof Ku))return new Ku(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,xj.call(this,r,i)}function ch(n,e,t,r,i){if(!(this instanceof ch))return new ch(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,xj.call(this,r,i)}function Et(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],c=[],d=1,h=16,f="S",p=null;nr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,a=n.compress||n.compressPdf||a,(p=n.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),d=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(h=n.floatPrecision),f=n.defaultPathOperation||"S"),c=n.filters||(a===!0?["FlateEncode"]:c),r=r||"mm",t=(""+(t||"P")).toLowerCase();var v=n.putOnlyUsedFonts||!1,_={},b={internal:{},__private__:{}};b.__private__.PubSub=jN;var T="1.3",I=b.__private__.getPdfVersion=function(){return T};b.__private__.setPdfVersion=function(A){T=A};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return L};var j=b.__private__.getPageFormat=function(A){return L[A]};i=i||"a4";var U="compat",z="advanced",B=U;function re(){this.saveGraphicsState(),se(new Ct(Xt,0,0,-Xt,0,Fs()*Xt).toString()+" cm"),this.setFontSize(this.getFontSize()/Xt),f="n",B=z}function ne(){this.restoreGraphicsState(),f="S",B=U}var V=b.__private__.combineFontStyleAndFontWeight=function(A,H){if(A=="bold"&&H=="normal"||A=="bold"&&H==400||A=="normal"&&H=="italic"||A=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(A=H==400||H==="normal"?A==="italic"?"italic":"normal":H!=700&&H!=="bold"||A!=="normal"?(H==700?"bold":H)+""+A:"bold"),A};b.advancedAPI=function(A){var H=B===U;return H&&re.call(this),typeof A!="function"||(A(this),H&&ne.call(this)),this},b.compatAPI=function(A){var H=B===z;return H&&ne.call(this),typeof A!="function"||(A(this),H&&re.call(this)),this},b.isAdvancedAPI=function(){return B===z};var D,k=function(A){if(B!==z)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=b.roundToPrecision=b.__private__.roundToPrecision=function(A,H){var ce=e||H;if(isNaN(A)||isNaN(ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(ce).replace(/0+$/,"")};D=b.hpf=b.__private__.hpf=typeof h=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return $(A,h)}:h==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return $(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return $(A,16)};var S=b.f2=b.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return $(A,2)},R=b.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return $(A,3)},F=b.scale=b.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return B===U?A*Xt:B===z?A:void 0},oe=function(A){return F((function(H){return B===U?Fs()-H:B===z?H:void 0})(A))};b.__private__.setPrecision=b.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var be,Q="00000000000000000000000000000000",ae=b.__private__.getFileId=function(){return Q},me=b.__private__.setFileId=function(A){return Q=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(pr=new sh(p.userPermissions,p.userPassword,p.ownerPassword,Q)),Q};b.setFileId=function(A){return me(A),this},b.getFileId=function(){return ae()};var je=b.__private__.convertDateToPDFDate=function(A){var H=A.getTimezoneOffset(),ce=H<0?"+":"-",ve=Math.floor(Math.abs(H/60)),Ae=Math.abs(H%60),ze=[ce,ie(ve),"'",ie(Ae),"'"].join("");return["D:",A.getFullYear(),ie(A.getMonth()+1),ie(A.getDate()),ie(A.getHours()),ie(A.getMinutes()),ie(A.getSeconds()),ze].join("")},Fe=b.__private__.convertPDFDateToDate=function(A){var H=parseInt(A.substr(2,4),10),ce=parseInt(A.substr(6,2),10)-1,ve=parseInt(A.substr(8,2),10),Ae=parseInt(A.substr(10,2),10),ze=parseInt(A.substr(12,2),10),Xe=parseInt(A.substr(14,2),10);return new Date(H,ce,ve,Ae,ze,Xe,0)},J=b.__private__.setCreationDate=function(A){var H;if(A===void 0&&(A=new Date),A instanceof Date)H=je(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=A}return be=H},q=b.__private__.getCreationDate=function(A){var H=be;return A==="jsDate"&&(H=Fe(be)),H};b.setCreationDate=function(A){return J(A),this},b.getCreationDate=function(A){return q(A)};var X,ie=b.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},fe=b.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},ge=0,_e=[],Le=[],ke=0,Be=[],Ze=[],ot=!1,st=Le;b.__private__.setCustomOutputDestination=function(A){ot=!0,st=A};var dt=function(A){ot||(st=A)};b.__private__.resetCustomOutputDestination=function(){ot=!1,st=Le};var se=b.__private__.out=function(A){return A=A.toString(),ke+=A.length+1,st.push(A),st},rt=b.__private__.write=function(A){return se(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},Kt=b.__private__.getArrayBuffer=function(A){for(var H=A.length,ce=new ArrayBuffer(H),ve=new Uint8Array(ce);H--;)ve[H]=A.charCodeAt(H);return ce},St=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return St};var pe=n.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(A){return pe=B===z?A/Xt:A,this};var Ue,Qe=b.__private__.getFontSize=b.getFontSize=function(){return B===U?pe:pe*Xt},at=n.R2L||!1;b.__private__.setR2L=b.setR2L=function(A){return at=A,this},b.__private__.getR2L=b.getR2L=function(){return at};var nt,pt=b.__private__.setZoomMode=function(A){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))Ue=A;else if(isNaN(A)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');Ue=A}else Ue=parseInt(A,10)};b.__private__.getZoomMode=function(){return Ue};var Gt,Mt=b.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');nt=A};b.__private__.getPageMode=function(){return nt};var cn=b.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');Gt=A};b.__private__.getLayoutMode=function(){return Gt},b.__private__.setDisplayMode=b.setDisplayMode=function(A,H,ce){return pt(A),cn(H),Mt(ce),this};var nn={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(A){if(Object.keys(nn).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return nn[A]},b.__private__.getDocumentProperties=function(){return nn},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(A){for(var H in nn)nn.hasOwnProperty(H)&&A[H]&&(nn[H]=A[H]);return this},b.__private__.setDocumentProperty=function(A,H){if(Object.keys(nn).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return nn[A]=H};var bt,Xt,_t,br,rn,Lt={},zt={},en=[],Tt={},Dn={},Vt={},Bt={},qn=null,jt=0,Nt=[],un=new jN(b),Ni=n.hotfixes||[],hi={},Ys={},ni=[],Ct=function A(H,ce,ve,Ae,ze,Xe){if(!(this instanceof A))return new A(H,ce,ve,Ae,ze,Xe);isNaN(H)&&(H=1),isNaN(ce)&&(ce=0),isNaN(ve)&&(ve=0),isNaN(Ae)&&(Ae=1),isNaN(ze)&&(ze=0),isNaN(Xe)&&(Xe=0),this._matrix=[H,ce,ve,Ae,ze,Xe]};Object.defineProperty(Ct.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Ct.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Ct.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Ct.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Ct.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Ct.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Ct.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Ct.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Ct.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Ct.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Ct.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Ct.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Ct.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ct.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ct.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ct.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ct.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(A)},Ct.prototype.multiply=function(A){var H=A.sx*this.sx+A.shy*this.shx,ce=A.sx*this.shy+A.shy*this.sy,ve=A.shx*this.sx+A.sy*this.shx,Ae=A.shx*this.shy+A.sy*this.sy,ze=A.tx*this.sx+A.ty*this.shx+this.tx,Xe=A.tx*this.shy+A.ty*this.sy+this.ty;return new Ct(H,ce,ve,Ae,ze,Xe)},Ct.prototype.decompose=function(){var A=this.sx,H=this.shy,ce=this.shx,ve=this.sy,Ae=this.tx,ze=this.ty,Xe=Math.sqrt(A*A+H*H),ht=(A/=Xe)*ce+(H/=Xe)*ve;ce-=A*ht,ve-=H*ht;var xt=Math.sqrt(ce*ce+ve*ve);return ht/=xt,A*(ve/=xt)<H*(ce/=xt)&&(A=-A,H=-H,ht=-ht,Xe=-Xe),{scale:new Ct(Xe,0,0,xt,0,0),translate:new Ct(1,0,0,1,Ae,ze),rotate:new Ct(A,H,-H,A,0,0),skew:new Ct(1,0,ht,1,0,0)}},Ct.prototype.toString=function(A){return this.join(" ")},Ct.prototype.inversed=function(){var A=this.sx,H=this.shy,ce=this.shx,ve=this.sy,Ae=this.tx,ze=this.ty,Xe=1/(A*ve-H*ce),ht=ve*Xe,xt=-H*Xe,Ot=-ce*Xe,It=A*Xe;return new Ct(ht,xt,Ot,It,-ht*Ae-Ot*ze,-xt*Ae-It*ze)},Ct.prototype.applyToPoint=function(A){var H=A.x*this.sx+A.y*this.shx+this.tx,ce=A.x*this.shy+A.y*this.sy+this.ty;return new pi(H,ce)},Ct.prototype.applyToRectangle=function(A){var H=this.applyToPoint(A),ce=this.applyToPoint(new pi(A.x+A.w,A.y+A.h));return new Qs(H.x,H.y,ce.x-H.x,ce.y-H.y)},Ct.prototype.clone=function(){var A=this.sx,H=this.shy,ce=this.shx,ve=this.sy,Ae=this.tx,ze=this.ty;return new Ct(A,H,ce,ve,Ae,ze)},b.Matrix=Ct;var ya=b.matrixMult=function(A,H){return H.multiply(A)},es=new Ct(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=es;var Fi=function(A,H){if(!Dn[A]){var ce=(H instanceof Ku?"Sh":"P")+(Object.keys(Tt).length+1).toString(10);H.id=ce,Dn[A]=ce,Tt[ce]=H,un.publish("addPattern",H)}};b.ShadingPattern=Ku,b.TilingPattern=ch,b.addShadingPattern=function(A,H){return k("addShadingPattern()"),Fi(A,H),this},b.beginTilingPattern=function(A){k("beginTilingPattern()"),Xs(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},b.endTilingPattern=function(A,H){k("endTilingPattern()"),H.stream=Ze[X].join(`
`),Fi(A,H),un.publish("endTilingPattern",H),ni.pop().restore()};var qi,Kn=b.__private__.newObject=function(){var A=ir();return $r(A,!0),A},ir=b.__private__.newObjectDeferred=function(){return ge++,_e[ge]=function(){return ke},ge},$r=function(A,H){return H=typeof H=="boolean"&&H,_e[A]=ke,H&&se(A+" 0 obj"),A},Ai=b.__private__.newAdditionalObject=function(){var A={objId:ir(),content:""};return Be.push(A),A},fi=ir(),Vn=ir(),Xn=b.__private__.decodeColorString=function(A){var H=A.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var ce=parseFloat(H[0]);H=[ce,ce,ce,"r"]}for(var ve="#",Ae=0;Ae<3;Ae++)ve+=("0"+Math.floor(255*parseFloat(H[Ae])).toString(16)).slice(-2);return ve},Gr=b.__private__.encodeColorString=function(A){var H;typeof A=="string"&&(A={ch1:A});var ce=A.ch1,ve=A.ch2,Ae=A.ch3,ze=A.ch4,Xe=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ce=="string"&&ce.charAt(0)!=="#"){var ht=new pj(ce);if(ht.ok)ce=ht.toHex();else if(!/^\d*\.?\d*$/.test(ce))throw new Error('Invalid color "'+ce+'" passed to jsPDF.encodeColorString.')}if(typeof ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ce)&&(ce="#"+ce[1]+ce[1]+ce[2]+ce[2]+ce[3]+ce[3]),typeof ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ce)){var xt=parseInt(ce.substr(1),16);ce=xt>>16&255,ve=xt>>8&255,Ae=255&xt}if(ve===void 0||ze===void 0&&ce===ve&&ve===Ae)H=typeof ce=="string"?ce+" "+Xe[0]:A.precision===2?S(ce/255)+" "+Xe[0]:R(ce/255)+" "+Xe[0];else if(ze===void 0||nr(ze)==="object"){if(ze&&!isNaN(ze.a)&&ze.a===0)return["1.","1.","1.",Xe[1]].join(" ");H=typeof ce=="string"?[ce,ve,Ae,Xe[1]].join(" "):A.precision===2?[S(ce/255),S(ve/255),S(Ae/255),Xe[1]].join(" "):[R(ce/255),R(ve/255),R(Ae/255),Xe[1]].join(" ")}else H=typeof ce=="string"?[ce,ve,Ae,ze,Xe[2]].join(" "):A.precision===2?[S(ce),S(ve),S(Ae),S(ze),Xe[2]].join(" "):[R(ce),R(ve),R(Ae),R(ze),Xe[2]].join(" ");return H},Vi=b.__private__.getFilters=function(){return c},ys=b.__private__.putStream=function(A){var H=(A=A||{}).data||"",ce=A.filters||Vi(),ve=A.alreadyAppliedFilters||[],Ae=A.addLength1||!1,ze=H.length,Xe=A.objectId,ht=function(C){return C};if(p!==null&&Xe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(ht=pr.encryptor(Xe,0));var xt={};ce===!0&&(ce=["FlateEncode"]);var Ot=A.additionalKeyValues||[],It=(xt=Et.API.processDataByFilters!==void 0?Et.API.processDataByFilters(H,ce):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(ve)?ve.join(" "):ve.toString());if(xt.data.length!==0&&(Ot.push({key:"Length",value:xt.data.length}),Ae===!0&&Ot.push({key:"Length1",value:ze})),It.length!=0)if(It.split("/").length-1==1)Ot.push({key:"Filter",value:It});else{Ot.push({key:"Filter",value:"["+It+"]"});for(var pn=0;pn<Ot.length;pn+=1)if(Ot[pn].key==="DecodeParms"){for(var sr=[],Qn=0;Qn<xt.reverseChain.split("/").length-1;Qn+=1)sr.push("null");sr.push(Ot[pn].value),Ot[pn].value="["+sr.join(" ")+"]"}}se("<<");for(var x=0;x<Ot.length;x++)se("/"+Ot[x].key+" "+Ot[x].value);se(">>"),xt.data.length!==0&&(se("stream"),se(ht(xt.data)),se("endstream"))},Va=b.__private__.putPage=function(A){var H=A.number,ce=A.data,ve=A.objId,Ae=A.contentsObjId;$r(ve,!0),se("<</Type /Page"),se("/Parent "+A.rootDictionaryObjId+" 0 R"),se("/Resources "+A.resourceDictionaryObjId+" 0 R"),se("/MediaBox ["+parseFloat(D(A.mediaBox.bottomLeftX))+" "+parseFloat(D(A.mediaBox.bottomLeftY))+" "+D(A.mediaBox.topRightX)+" "+D(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&se("/CropBox ["+D(A.cropBox.bottomLeftX)+" "+D(A.cropBox.bottomLeftY)+" "+D(A.cropBox.topRightX)+" "+D(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&se("/BleedBox ["+D(A.bleedBox.bottomLeftX)+" "+D(A.bleedBox.bottomLeftY)+" "+D(A.bleedBox.topRightX)+" "+D(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&se("/TrimBox ["+D(A.trimBox.bottomLeftX)+" "+D(A.trimBox.bottomLeftY)+" "+D(A.trimBox.topRightX)+" "+D(A.trimBox.topRightY)+"]"),A.artBox!==null&&se("/ArtBox ["+D(A.artBox.bottomLeftX)+" "+D(A.artBox.bottomLeftY)+" "+D(A.artBox.topRightX)+" "+D(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&se("/UserUnit "+A.userUnit),un.publish("putPage",{objId:ve,pageContext:Nt[H],pageNumber:H,page:ce}),se("/Contents "+Ae+" 0 R"),se(">>"),se("endobj");var ze=ce.join(`
`);return B===z&&(ze+=`
Q`),$r(Ae,!0),ys({data:ze,filters:Vi(),objectId:Ae}),se("endobj"),ve},Ps=b.__private__.putPages=function(){var A,H,ce=[];for(A=1;A<=jt;A++)Nt[A].objId=ir(),Nt[A].contentsObjId=ir();for(A=1;A<=jt;A++)ce.push(Va({number:A,data:Ze[A],objId:Nt[A].objId,contentsObjId:Nt[A].contentsObjId,mediaBox:Nt[A].mediaBox,cropBox:Nt[A].cropBox,bleedBox:Nt[A].bleedBox,trimBox:Nt[A].trimBox,artBox:Nt[A].artBox,userUnit:Nt[A].userUnit,rootDictionaryObjId:fi,resourceDictionaryObjId:Vn}));$r(fi,!0),se("<</Type /Pages");var ve="/Kids [";for(H=0;H<jt;H++)ve+=ce[H]+" 0 R ";se(ve+"]"),se("/Count "+jt),se(">>"),se("endobj"),un.publish("postPutPages")},Bi=function(A){un.publish("putFont",{font:A,out:se,newObject:Kn,putStream:ys}),A.isAlreadyPutted!==!0&&(A.objectNumber=Kn(),se("<<"),se("/Type /Font"),se("/BaseFont /"+ah(A.postScriptName)),se("/Subtype /Type1"),typeof A.encoding=="string"&&se("/Encoding /"+A.encoding),se("/FirstChar 32"),se("/LastChar 255"),se(">>"),se("endobj"))},ba=function(A){A.objectNumber=Kn();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[D(A.x),D(A.y),D(A.x+A.width),D(A.y+A.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var ce=A.pages[1].join(`
`);ys({data:ce,additionalKeyValues:H,objectId:A.objectNumber}),se("endobj")},ts=function(A,H){H||(H=21);var ce=Kn(),ve=(function(Xe,ht){var xt,Ot=[],It=1/(ht-1);for(xt=0;xt<1;xt+=It)Ot.push(xt);if(Ot.push(1),Xe[0].offset!=0){var pn={offset:0,color:Xe[0].color};Xe.unshift(pn)}if(Xe[Xe.length-1].offset!=1){var sr={offset:1,color:Xe[Xe.length-1].color};Xe.push(sr)}for(var Qn="",x=0,C=0;C<Ot.length;C++){for(xt=Ot[C];xt>Xe[x+1].offset;)x++;var O=Xe[x].offset,ee=(xt-O)/(Xe[x+1].offset-O),Ee=Xe[x].color,De=Xe[x+1].color;Qn+=fe(Math.round((1-ee)*Ee[0]+ee*De[0]).toString(16))+fe(Math.round((1-ee)*Ee[1]+ee*De[1]).toString(16))+fe(Math.round((1-ee)*Ee[2]+ee*De[2]).toString(16))}return Qn.trim()})(A.colors,H),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+H+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ys({data:ve,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ce}),se("endobj"),A.objectNumber=Kn(),se("<< /ShadingType "+A.type),se("/ColorSpace /DeviceRGB");var ze="/Coords ["+D(parseFloat(A.coords[0]))+" "+D(parseFloat(A.coords[1]))+" ";A.type===2?ze+=D(parseFloat(A.coords[2]))+" "+D(parseFloat(A.coords[3])):ze+=D(parseFloat(A.coords[2]))+" "+D(parseFloat(A.coords[3]))+" "+D(parseFloat(A.coords[4]))+" "+D(parseFloat(A.coords[5])),se(ze+="]"),A.matrix&&se("/Matrix ["+A.matrix.toString()+"]"),se("/Function "+ce+" 0 R"),se("/Extend [true true]"),se(">>"),se("endobj")},Si=function(A,H){var ce=ir(),ve=Kn();H.push({resourcesOid:ce,objectOid:ve}),A.objectNumber=ve;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+A.boundingBox.map(D).join(" ")+"]"}),Ae.push({key:"XStep",value:D(A.xStep)}),Ae.push({key:"YStep",value:D(A.yStep)}),Ae.push({key:"Resources",value:ce+" 0 R"}),A.matrix&&Ae.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),ys({data:A.stream,additionalKeyValues:Ae,objectId:A.objectNumber}),se("endobj")},ns=function(A){for(var H in A.objectNumber=Kn(),se("<<"),A)switch(H){case"opacity":se("/ca "+S(A[H]));break;case"stroke-opacity":se("/CA "+S(A[H]))}se(">>"),se("endobj")},bs=function(A){$r(A.resourcesOid,!0),se("<<"),se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var H in se("/Font <<"),Lt)Lt.hasOwnProperty(H)&&(v===!1||v===!0&&_.hasOwnProperty(H))&&se("/"+H+" "+Lt[H].objectNumber+" 0 R");se(">>")})(),(function(){if(Object.keys(Tt).length>0){for(var H in se("/Shading <<"),Tt)Tt.hasOwnProperty(H)&&Tt[H]instanceof Ku&&Tt[H].objectNumber>=0&&se("/"+H+" "+Tt[H].objectNumber+" 0 R");un.publish("putShadingPatternDict"),se(">>")}})(),(function(H){if(Object.keys(Tt).length>0){for(var ce in se("/Pattern <<"),Tt)Tt.hasOwnProperty(ce)&&Tt[ce]instanceof b.TilingPattern&&Tt[ce].objectNumber>=0&&Tt[ce].objectNumber<H&&se("/"+ce+" "+Tt[ce].objectNumber+" 0 R");un.publish("putTilingPatternDict"),se(">>")}})(A.objectOid),(function(){if(Object.keys(Vt).length>0){var H;for(H in se("/ExtGState <<"),Vt)Vt.hasOwnProperty(H)&&Vt[H].objectNumber>=0&&se("/"+H+" "+Vt[H].objectNumber+" 0 R");un.publish("putGStateDict"),se(">>")}})(),(function(){for(var H in se("/XObject <<"),hi)hi.hasOwnProperty(H)&&hi[H].objectNumber>=0&&se("/"+H+" "+hi[H].objectNumber+" 0 R");un.publish("putXobjectDict"),se(">>")})(),se(">>"),se("endobj")},wr=function(A){zt[A.fontName]=zt[A.fontName]||{},zt[A.fontName][A.fontStyle]=A.id},zo=function(A,H,ce,ve,Ae){var ze={id:"F"+(Object.keys(Lt).length+1).toString(10),postScriptName:A,fontName:H,fontStyle:ce,encoding:ve,isStandardFont:Ae||!1,metadata:{}};return un.publish("addFont",{font:ze,instance:this}),Lt[ze.id]=ze,wr(ze),ze.id},Ui=b.__private__.pdfEscape=b.pdfEscape=function(A,H){return(function(ce,ve){var Ae,ze,Xe,ht,xt,Ot,It,pn,sr;if(Xe=(ve=ve||{}).sourceEncoding||"Unicode",xt=ve.outputEncoding,(ve.autoencode||xt)&&Lt[bt].metadata&&Lt[bt].metadata[Xe]&&Lt[bt].metadata[Xe].encoding&&(ht=Lt[bt].metadata[Xe].encoding,!xt&&Lt[bt].encoding&&(xt=Lt[bt].encoding),!xt&&ht.codePages&&(xt=ht.codePages[0]),typeof xt=="string"&&(xt=ht[xt]),xt)){for(It=!1,Ot=[],Ae=0,ze=ce.length;Ae<ze;Ae++)(pn=xt[ce.charCodeAt(Ae)])?Ot.push(String.fromCharCode(pn)):Ot.push(ce[Ae]),Ot[Ae].charCodeAt(0)>>8&&(It=!0);ce=Ot.join("")}for(Ae=ce.length;It===void 0&&Ae!==0;)ce.charCodeAt(Ae-1)>>8&&(It=!0),Ae--;if(!It)return ce;for(Ot=ve.noBOM?[]:[254,255],Ae=0,ze=ce.length;Ae<ze;Ae++){if((sr=(pn=ce.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ot.push(sr),Ot.push(pn-(sr<<8))}return String.fromCharCode.apply(void 0,Ot)})(A,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ws=b.__private__.beginPage=function(A){Ze[++jt]=[],Nt[jt]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},Ho(jt),dt(Ze[X])},Ds=function(A,H){var ce,ve,Ae;switch(t=H||t,typeof A=="string"&&(ce=j(A.toLowerCase()),Array.isArray(ce)&&(ve=ce[0],Ae=ce[1])),Array.isArray(A)&&(ve=A[0]*Xt,Ae=A[1]*Xt),isNaN(ve)&&(ve=i[0],Ae=i[1]),(ve>14400||Ae>14400)&&(yr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ve=Math.min(14400,ve),Ae=Math.min(14400,Ae)),i=[ve,Ae],t.substr(0,1)){case"l":Ae>ve&&(i=[Ae,ve]);break;case"p":ve>Ae&&(i=[Ae,ve])}ws(i),Rt(Hi),se(is),as!==0&&se(as+" J"),Or!==0&&se(Or+" j"),un.publish("addPage",{pageNumber:jt})},ho=function(A){A>0&&A<=jt&&(Ze.splice(A,1),Nt.splice(A,1),jt--,X>jt&&(X=jt),this.setPage(X))},Ho=function(A){A>0&&A<=jt&&(X=A)},$o=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Ze.length-1},Ll=function(A,H,ce){var ve,Ae=void 0;return ce=ce||{},A=A!==void 0?A:Lt[bt].fontName,H=H!==void 0?H:Lt[bt].fontStyle,ve=A.toLowerCase(),zt[ve]!==void 0&&zt[ve][H]!==void 0?Ae=zt[ve][H]:zt[A]!==void 0&&zt[A][H]!==void 0?Ae=zt[A][H]:ce.disableWarning===!1&&yr.warn("Unable to look up font label for font '"+A+"', '"+H+"'. Refer to getFontList() for available fonts."),Ae||ce.noFallback||(Ae=zt.times[H])==null&&(Ae=zt.times.normal),Ae},rs=b.__private__.putInfo=function(){var A=Kn(),H=function(ve){return ve};for(var ce in p!==null&&(H=pr.encryptor(A,0)),se("<<"),se("/Producer ("+Ui(H("jsPDF "+Et.version))+")"),nn)nn.hasOwnProperty(ce)&&nn[ce]&&se("/"+ce.substr(0,1).toUpperCase()+ce.substr(1)+" ("+Ui(H(nn[ce]))+")");se("/CreationDate ("+Ui(H(be))+")"),se(">>"),se("endobj")},mi=b.__private__.putCatalog=function(A){var H=(A=A||{}).rootDictionaryObjId||fi;switch(Kn(),se("<<"),se("/Type /Catalog"),se("/Pages "+H+" 0 R"),Ue||(Ue="fullwidth"),Ue){case"fullwidth":se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":se("/OpenAction [3 0 R /Fit]");break;case"original":se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ce=""+Ue;ce.substr(ce.length-1)==="%"&&(Ue=parseInt(Ue)/100),typeof Ue=="number"&&se("/OpenAction [3 0 R /XYZ null null "+S(Ue)+"]")}switch(Gt||(Gt="continuous"),Gt){case"continuous":se("/PageLayout /OneColumn");break;case"single":se("/PageLayout /SinglePage");break;case"two":case"twoleft":se("/PageLayout /TwoColumnLeft");break;case"tworight":se("/PageLayout /TwoColumnRight")}nt&&se("/PageMode /"+nt),un.publish("putCatalog"),se(">>"),se("endobj")},Tr=b.__private__.putTrailer=function(){se("trailer"),se("<<"),se("/Size "+(ge+1)),se("/Root "+ge+" 0 R"),se("/Info "+(ge-1)+" 0 R"),p!==null&&se("/Encrypt "+pr.oid+" 0 R"),se("/ID [ <"+Q+"> <"+Q+"> ]"),se(">>")},mn=b.__private__.putHeader=function(){se("%PDF-"+T),se("%")},wa=b.__private__.putXRef=function(){var A="0000000000";se("xref"),se("0 "+(ge+1)),se("0000000000 65535 f ");for(var H=1;H<=ge;H++)typeof _e[H]=="function"?se((A+_e[H]()).slice(-10)+" 00000 n "):_e[H]!==void 0?se((A+_e[H]).slice(-10)+" 00000 n "):se("0000000000 00000 n ")},_s=b.__private__.buildDocument=function(){var A;ge=0,ke=0,Le=[],_e=[],Be=[],fi=ir(),Vn=ir(),dt(Le),un.publish("buildDocument"),mn(),Ps(),(function(){un.publish("putAdditionalObjects");for(var ce=0;ce<Be.length;ce++){var ve=Be[ce];$r(ve.objId,!0),se(ve.content),se("endobj")}un.publish("postPutAdditionalObjects")})(),A=[],(function(){for(var ce in Lt)Lt.hasOwnProperty(ce)&&(v===!1||v===!0&&_.hasOwnProperty(ce))&&Bi(Lt[ce])})(),(function(){var ce;for(ce in Vt)Vt.hasOwnProperty(ce)&&ns(Vt[ce])})(),(function(){for(var ce in hi)hi.hasOwnProperty(ce)&&ba(hi[ce])})(),(function(ce){var ve;for(ve in Tt)Tt.hasOwnProperty(ve)&&(Tt[ve]instanceof Ku?ts(Tt[ve]):Tt[ve]instanceof ch&&Si(Tt[ve],ce))})(A),un.publish("putResources"),A.forEach(bs),bs({resourcesOid:Vn,objectOid:Number.MAX_SAFE_INTEGER}),un.publish("postPutResources"),p!==null&&(pr.oid=Kn(),se("<<"),se("/Filter /Standard"),se("/V "+pr.v),se("/R "+pr.r),se("/U <"+pr.toHexString(pr.U)+">"),se("/O <"+pr.toHexString(pr.O)+">"),se("/P "+pr.P),se(">>"),se("endobj")),rs(),mi();var H=ke;return wa(),Tr(),se("startxref"),se(""+H),se("%%EOF"),dt(Ze[X]),Le.join(`
`)},bn=b.__private__.getBlob=function(A){return new Blob([Kt(A)],{type:"application/pdf"})},Ba=b.output=b.__private__.output=(qi=function(A,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",A){case void 0:return _s();case"save":b.save(H.filename);break;case"arraybuffer":return Kt(_s());case"blob":return bn(_s());case"bloburi":case"bloburl":if(Zt.URL!==void 0&&typeof Zt.URL.createObjectURL=="function")return Zt.URL&&Zt.URL.createObjectURL(bn(_s()))||void 0;yr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ce="",ve=_s();try{ce=NN(ve)}catch{ce=NN(unescape(encodeURIComponent(ve)))}return"data:application/pdf;filename="+H.filename+";base64,"+ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Zt)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ze=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Ae=H.pdfObjectUrl,ze="");var Xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+ze+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",ht=Zt.open();return ht!==null&&ht.document.write(Xe),ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Zt)==="[object Window]"){var xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',Ot=Zt.open();if(Ot!==null){Ot.document.write(xt);var It=this;Ot.document.documentElement.querySelector("#pdfViewer").onload=function(){Ot.document.title=H.filename,Ot.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(It.output("bloburl"))}}return Ot}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Zt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',sr=Zt.open();if(sr!==null&&(sr.document.write(pn),sr.document.title=H.filename),sr||typeof safari>"u")return sr;break;case"datauri":case"dataurl":return Zt.document.location.href=this.output("datauristring",H);default:return null}},qi.foo=function(){try{return qi.apply(this,arguments)}catch(ce){var A=ce.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var H="Error in function "+A.split(`
`)[0].split("<")[0]+": "+ce.message;if(!Zt.console)throw new Error(H);Zt.console.error(H,ce),Zt.alert&&alert(H)}},qi.foo.bar=qi,qi.foo),Mr=function(A){return Array.isArray(Ni)===!0&&Ni.indexOf(A)>-1};switch(r){case"pt":Xt=1;break;case"mm":Xt=72/25.4;break;case"cm":Xt=72/2.54;break;case"in":Xt=72;break;case"px":Xt=Mr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xt=12;break;case"ex":Xt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Xt=r}var pr=null;J(),me();var Cr=b.__private__.getPageInfo=b.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[A].objId,pageNumber:A,pageContext:Nt[A]}},fo=b.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in Nt)if(Nt[H].objId===A)break;return Cr(H)},Ac=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:Nt[X].objId,pageNumber:X,pageContext:Nt[X]}};b.addPage=function(){return Ds.apply(this,arguments),this},b.setPage=function(){return Ho.apply(this,arguments),dt.call(this,Ze[X]),this},b.insertPage=function(A){return this.addPage(),this.movePage(X,A),this},b.movePage=function(A,H){var ce,ve;if(A>H){ce=Ze[A],ve=Nt[A];for(var Ae=A;Ae>H;Ae--)Ze[Ae]=Ze[Ae-1],Nt[Ae]=Nt[Ae-1];Ze[H]=ce,Nt[H]=ve,this.setPage(H)}else if(A<H){ce=Ze[A],ve=Nt[A];for(var ze=A;ze<H;ze++)Ze[ze]=Ze[ze+1],Nt[ze]=Nt[ze+1];Ze[H]=ce,Nt[H]=ve,this.setPage(H)}return this},b.deletePage=function(){return ho.apply(this,arguments),this},b.__private__.text=b.text=function(A,H,ce,ve,Ae){var ze,Xe,ht,xt,Ot,It,pn,sr,Qn,x=(ve=ve||{}).scope||this;if(typeof A=="number"&&typeof H=="number"&&(typeof ce=="string"||Array.isArray(ce))){var C=ce;ce=H,H=A,A=C}if(arguments[3]instanceof Ct==0?(ht=arguments[4],xt=arguments[5],nr(pn=arguments[3])==="object"&&pn!==null||(typeof ht=="string"&&(xt=ht,ht=null),typeof pn=="string"&&(xt=pn,pn=null),typeof pn=="number"&&(ht=pn,pn=null),ve={flags:pn,angle:ht,align:xt})):(k("The transform parameter of text() with a Matrix value"),Qn=Ae),isNaN(H)||isNaN(ce)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return x;var O,ee="",Ee=typeof ve.lineHeightFactor=="number"?ve.lineHeightFactor:Aa,De=x.internal.scaleFactor;function tt(Mn){return Mn=Mn.split("	").join(Array(ve.TabLen||9).join(" ")),Ui(Mn,pn)}function Qt(Mn){for(var jn,or=Mn.concat(),qr=[],Za=or.length;Za--;)typeof(jn=or.shift())=="string"?qr.push(jn):Array.isArray(Mn)&&(jn.length===1||jn[1]===void 0&&jn[2]===void 0)?qr.push(jn[0]):qr.push([jn[0],jn[1],jn[2]]);return qr}function ar(Mn,jn){var or;if(typeof Mn=="string")or=jn(Mn)[0];else if(Array.isArray(Mn)){for(var qr,Za,Ta=Mn.concat(),ql=[],Ru=Ta.length;Ru--;)typeof(qr=Ta.shift())=="string"?ql.push(jn(qr)[0]):Array.isArray(qr)&&typeof qr[0]=="string"&&(Za=jn(qr[0],qr[1],qr[2]),ql.push([Za[0],Za[1],Za[2]]));or=ql}return or}var hn=!1,Un=!0;if(typeof A=="string")hn=!0;else if(Array.isArray(A)){var gi=A.concat();Xe=[];for(var Ei,Jn=gi.length;Jn--;)(typeof(Ei=gi.shift())!="string"||Array.isArray(Ei)&&typeof Ei[0]!="string")&&(Un=!1);hn=Un}if(hn===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var Ti=pe/x.internal.scaleFactor,qs=Ti*(Ee-1);switch(ve.baseline){case"bottom":ce-=qs;break;case"top":ce+=Ti-qs;break;case"hanging":ce+=Ti-2*qs;break;case"middle":ce+=Ti/2-qs}if((It=ve.maxWidth||0)>0&&(typeof A=="string"?A=x.splitTextToSize(A,It):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(Mn,jn){return Mn.concat(x.splitTextToSize(jn,It))},[]))),ze={text:A,x:H,y:ce,options:ve,mutex:{pdfEscape:Ui,activeFontKey:bt,fonts:Lt,activeFontSize:pe}},un.publish("preProcessText",ze),A=ze.text,ht=(ve=ze.options).angle,Qn instanceof Ct==0&&ht&&typeof ht=="number"){ht*=Math.PI/180,ve.rotationDirection===0&&(ht=-ht),B===z&&(ht=-ht);var Ga=Math.cos(ht),Wa=Math.sin(ht);Qn=new Ct(Ga,Wa,-Wa,Ga,0,0)}else ht&&ht instanceof Ct&&(Qn=ht);B!==z||Qn||(Qn=es),(Ot=ve.charSpace||ss)!==void 0&&(ee+=D(F(Ot))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(sr=ve.horizontalScale)!==void 0&&(ee+=D(100*sr)+` Tz
`),ve.lang;var ls=-1,vo=ve.renderingMode!==void 0?ve.renderingMode:ve.stroke,Sc=x.internal.getCurrentPageInfo().pageContext;switch(vo){case 0:case!1:case"fill":ls=0;break;case 1:case!0:case"stroke":ls=1;break;case 2:case"fillThenStroke":ls=2;break;case 3:case"invisible":ls=3;break;case 4:case"fillAndAddForClipping":ls=4;break;case 5:case"strokeAndAddPathForClipping":ls=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ls=6;break;case 7:case"addToPathForClipping":ls=7}var Iu=Sc.usedRenderingMode!==void 0?Sc.usedRenderingMode:-1;ls!==-1?ee+=ls+` Tr
`:Iu!==-1&&(ee+=`0 Tr
`),ls!==-1&&(Sc.usedRenderingMode=ls),xt=ve.align||"left";var Vs,ja=pe*Ee,yo=x.internal.pageSize.getWidth(),Lu=Lt[bt];Ot=ve.charSpace||ss,It=ve.maxWidth||0,pn=Object.assign({autoencode:!0,noBOM:!0},ve.flags);var Ea=[],Xo=function(Mn){return x.getStringUnitWidth(Mn,{font:Lu,charSpace:Ot,fontSize:pe,doKerning:!1})*pe/De};if(Object.prototype.toString.call(A)==="[object Array]"){var As;Xe=Qt(A),xt!=="left"&&(Vs=Xe.map(Xo));var cs,Ya=0;if(xt==="right"){H-=Vs[0],A=[],Jn=Xe.length;for(var Ka=0;Ka<Jn;Ka++)Ka===0?(cs=ii(H),As=Wr(ce)):(cs=F(Ya-Vs[Ka]),As=-ja),A.push([Xe[Ka],cs,As]),Ya=Vs[Ka]}else if(xt==="center"){H-=Vs[0]/2,A=[],Jn=Xe.length;for(var bo=0;bo<Jn;bo++)bo===0?(cs=ii(H),As=Wr(ce)):(cs=F((Ya-Vs[bo])/2),As=-ja),A.push([Xe[bo],cs,As]),Ya=Vs[bo]}else if(xt==="left"){A=[],Jn=Xe.length;for(var jc=0;jc<Jn;jc++)A.push(Xe[jc])}else if(xt==="justify"&&Lu.encoding==="Identity-H"){A=[],Jn=Xe.length,It=It!==0?It:yo;for(var Ec=0,Fr=0;Fr<Jn;Fr++)if(As=Fr===0?Wr(ce):-ja,cs=Fr===0?ii(H):Ec,Fr<Jn-1){var xd=F((It-Vs[Fr])/(Xe[Fr].split(" ").length-1)),Qa=Xe[Fr].split(" ");A.push([Qa[0]+" ",cs,As]),Ec=0;for(var Xa=1;Xa<Qa.length;Xa++){var Ci=(Xo(Qa[Xa-1]+" "+Qa[Xa])-Xo(Qa[Xa]))*De+xd;Xa==Qa.length-1?A.push([Qa[Xa],Ci,0]):A.push([Qa[Xa]+" ",Ci,0]),Ec-=Ci}}else A.push([Xe[Fr],cs,As]);A.push(["",Ec,0])}else{if(xt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],Jn=Xe.length,It=It!==0?It:yo,Fr=0;Fr<Jn;Fr++){As=Fr===0?Wr(ce):-ja,cs=Fr===0?ii(H):0;var wo=Xe[Fr].split(" ").length-1,Tc=wo>0?(It-Vs[Fr])/wo:0;Fr<Jn-1?Ea.push(D(F(Tc))):Ea.push(0),A.push([Xe[Fr],cs,As])}}}(typeof ve.R2L=="boolean"?ve.R2L:at)===!0&&(A=ar(A,function(Mn,jn,or){return[Mn.split("").reverse().join(""),jn,or]})),ze={text:A,x:H,y:ce,options:ve,mutex:{pdfEscape:Ui,activeFontKey:bt,fonts:Lt,activeFontSize:pe}},un.publish("postProcessText",ze),A=ze.text,O=ze.mutex.isHex||!1;var Cc=Lt[bt].encoding;Cc!=="WinAnsiEncoding"&&Cc!=="StandardEncoding"||(A=ar(A,function(Mn,jn,or){return[tt(Mn),jn,or]})),Xe=Qt(A),A=[];for(var _o,No,Ja,Fl=Array.isArray(Xe[0])?1:0,Bs="",Ao=function(Mn,jn,or){var qr="";return or instanceof Ct?(or=typeof ve.angle=="number"?ya(or,new Ct(1,0,0,1,Mn,jn)):ya(new Ct(1,0,0,1,Mn,jn),or),B===z&&(or=ya(new Ct(1,0,0,-1,0,0),or)),qr=or.join(" ")+` Tm
`):qr=D(Mn)+" "+D(jn)+` Td
`,qr},$i=0;$i<Xe.length;$i++){switch(Bs="",Fl){case 1:Ja=(O?"<":"(")+Xe[$i][0]+(O?">":")"),_o=parseFloat(Xe[$i][1]),No=parseFloat(Xe[$i][2]);break;case 0:Ja=(O?"<":"(")+Xe[$i]+(O?">":")"),_o=ii(H),No=Wr(ce)}Ea!==void 0&&Ea[$i]!==void 0&&(Bs=Ea[$i]+` Tw
`),$i===0?A.push(Bs+Ao(_o,No,Qn)+Ja):Fl===0?A.push(Bs+Ja):Fl===1&&A.push(Bs+Ao(_o,No,Qn)+Ja)}A=Fl===0?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var ea=`BT
/`;return ea+=bt+" "+pe+` Tf
`,ea+=D(pe*Ee)+` TL
`,ea+=Os+`
`,ea+=ee,ea+=A,se(ea+="ET"),_[bt]=!0,x};var Rl=b.__private__.clip=b.clip=function(A){return se(A==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return Rl("evenodd")},b.__private__.discardPath=b.discardPath=function(){return se("n"),this};var ji=b.__private__.isValidStyle=function(A){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(H=!0),H};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(A){return ji(A)&&(f=A),this};var kl=b.__private__.getStyle=b.getStyle=function(A){var H=f;switch(A){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=A}return H},_a=b.close=function(){return se("h"),this};b.stroke=function(){return se("S"),this},b.fill=function(A){return ri("f",A),this},b.fillEvenOdd=function(A){return ri("f*",A),this},b.fillStroke=function(A){return ri("B",A),this},b.fillStrokeEvenOdd=function(A){return ri("B*",A),this};var ri=function(A,H){nr(H)==="object"?Dl(H,A):se(A)},Ua=function(A){A===null||B===z&&A===void 0||(A=kl(A),se(A))};function Pl(A,H,ce,ve,Ae){var ze=new ch(H||this.boundingBox,ce||this.xStep,ve||this.yStep,this.gState,Ae||this.matrix);ze.stream=this.stream;var Xe=A+"$$"+this.cloneIndex+++"$$";return Fi(Xe,ze),ze}var Dl=function(A,H){var ce=Dn[A.key],ve=Tt[ce];if(ve instanceof Ku)se("q"),se(Go(H)),ve.gState&&b.setGState(ve.gState),se(A.matrix.toString()+" cm"),se("/"+ce+" sh"),se("Q");else if(ve instanceof ch){var Ae=new Ct(1,0,0,-1,0,Fs());A.matrix&&(Ae=Ae.multiply(A.matrix||es),ce=Pl.call(ve,A.key,A.boundingBox,A.xStep,A.yStep,Ae).id),se("q"),se("/Pattern cs"),se("/"+ce+" scn"),ve.gState&&b.setGState(ve.gState),se(H),se("Q")}},Go=function(A){switch(A){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Wo=b.moveTo=function(A,H){return se(D(F(A))+" "+D(oe(H))+" m"),this},Na=b.lineTo=function(A,H){return se(D(F(A))+" "+D(oe(H))+" l"),this},zi=b.curveTo=function(A,H,ce,ve,Ae,ze){return se([D(F(A)),D(oe(H)),D(F(ce)),D(oe(ve)),D(F(Ae)),D(oe(ze)),"c"].join(" ")),this};b.__private__.line=b.line=function(A,H,ce,ve,Ae){if(isNaN(A)||isNaN(H)||isNaN(ce)||isNaN(ve)||!ji(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return B===U?this.lines([[ce-A,ve-H]],A,H,[1,1],Ae||"S"):this.lines([[ce-A,ve-H]],A,H,[1,1]).stroke()},b.__private__.lines=b.lines=function(A,H,ce,ve,Ae,ze){var Xe,ht,xt,Ot,It,pn,sr,Qn,x,C,O,ee;if(typeof A=="number"&&(ee=ce,ce=H,H=A,A=ee),ve=ve||[1,1],ze=ze||!1,isNaN(H)||isNaN(ce)||!Array.isArray(A)||!Array.isArray(ve)||!ji(Ae)||typeof ze!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Wo(H,ce),Xe=ve[0],ht=ve[1],Ot=A.length,C=H,O=ce,xt=0;xt<Ot;xt++)(It=A[xt]).length===2?(C=It[0]*Xe+C,O=It[1]*ht+O,Na(C,O)):(pn=It[0]*Xe+C,sr=It[1]*ht+O,Qn=It[2]*Xe+C,x=It[3]*ht+O,C=It[4]*Xe+C,O=It[5]*ht+O,zi(pn,sr,Qn,x,C,O));return ze&&_a(),Ua(Ae),this},b.path=function(A){for(var H=0;H<A.length;H++){var ce=A[H],ve=ce.c;switch(ce.op){case"m":Wo(ve[0],ve[1]);break;case"l":Na(ve[0],ve[1]);break;case"c":zi.apply(this,ve);break;case"h":_a()}}return this},b.__private__.rect=b.rect=function(A,H,ce,ve,Ae){if(isNaN(A)||isNaN(H)||isNaN(ce)||isNaN(ve)||!ji(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return B===U&&(ve=-ve),se([D(F(A)),D(oe(H)),D(F(ce)),D(F(ve)),"re"].join(" ")),Ua(Ae),this},b.__private__.triangle=b.triangle=function(A,H,ce,ve,Ae,ze,Xe){if(isNaN(A)||isNaN(H)||isNaN(ce)||isNaN(ve)||isNaN(Ae)||isNaN(ze)||!ji(Xe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ce-A,ve-H],[Ae-ce,ze-ve],[A-Ae,H-ze]],A,H,[1,1],Xe,!0),this},b.__private__.roundedRect=b.roundedRect=function(A,H,ce,ve,Ae,ze,Xe){if(isNaN(A)||isNaN(H)||isNaN(ce)||isNaN(ve)||isNaN(Ae)||isNaN(ze)||!ji(Xe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ht=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*ce),ze=Math.min(ze,.5*ve),this.lines([[ce-2*Ae,0],[Ae*ht,0,Ae,ze-ze*ht,Ae,ze],[0,ve-2*ze],[0,ze*ht,-Ae*ht,ze,-Ae,ze],[2*Ae-ce,0],[-Ae*ht,0,-Ae,-ze*ht,-Ae,-ze],[0,2*ze-ve],[0,-ze*ht,Ae*ht,-ze,Ae,-ze]],A+Ae,H,[1,1],Xe,!0),this},b.__private__.ellipse=b.ellipse=function(A,H,ce,ve,Ae){if(isNaN(A)||isNaN(H)||isNaN(ce)||isNaN(ve)||!ji(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ze=4/3*(Math.SQRT2-1)*ce,Xe=4/3*(Math.SQRT2-1)*ve;return Wo(A+ce,H),zi(A+ce,H-Xe,A+ze,H-ve,A,H-ve),zi(A-ze,H-ve,A-ce,H-Xe,A-ce,H),zi(A-ce,H+Xe,A-ze,H+ve,A,H+ve),zi(A+ze,H+ve,A+ce,H+Xe,A+ce,H),Ua(Ae),this},b.__private__.circle=b.circle=function(A,H,ce,ve){if(isNaN(A)||isNaN(H)||isNaN(ce)||!ji(ve))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,H,ce,ce,ve)},b.setFont=function(A,H,ce){return ce&&(H=V(H,ce)),bt=Ll(A,H,{disableWarning:!1}),this};var Ms=b.__private__.getFont=b.getFont=function(){return Lt[Ll.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var A,H,ce={};for(A in zt)if(zt.hasOwnProperty(A))for(H in ce[A]=[],zt[A])zt[A].hasOwnProperty(H)&&ce[A].push(H);return ce},b.addFont=function(A,H,ce,ve,Ae){var ze=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ze.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&ze.indexOf(arguments[3])==-1&&(ce=V(ce,ve)),zo.call(this,A,H,ce,Ae=Ae||"Identity-H")};var Aa,Hi=n.lineWidth||.200025,za=b.__private__.getLineWidth=b.getLineWidth=function(){return Hi},Rt=b.__private__.setLineWidth=b.setLineWidth=function(A){return Hi=A,se(D(F(A))+" w"),this};b.__private__.setLineDash=Et.API.setLineDash=Et.API.setLineDashPattern=function(A,H){if(A=A||[],H=H||0,isNaN(H)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(ce){return D(F(ce))}).join(" "),H=D(F(H)),se("["+A+"] "+H+" d"),this};var mo=b.__private__.getLineHeight=b.getLineHeight=function(){return pe*Aa};b.__private__.getLineHeight=b.getLineHeight=function(){return pe*Aa};var Yo=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(Aa=A),this},Ha=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Aa};Yo(n.lineHeight);var ii=b.__private__.getHorizontalCoordinate=function(A){return F(A)},Wr=b.__private__.getVerticalCoordinate=function(A){return B===z?A:Nt[X].mediaBox.topRightY-Nt[X].mediaBox.bottomLeftY-F(A)},po=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(A){return D(ii(A))},Bn=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(A){return D(Wr(A))},is=n.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return Xn(is)},b.__private__.setStrokeColor=b.setDrawColor=function(A,H,ce,ve){return is=Gr({ch1:A,ch2:H,ch3:ce,ch4:ve,pdfColorType:"draw",precision:2}),se(is),this};var go=n.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return Xn(go)},b.__private__.setFillColor=b.setFillColor=function(A,H,ce,ve){return go=Gr({ch1:A,ch2:H,ch3:ce,ch4:ve,pdfColorType:"fill",precision:2}),se(go),this};var Os=n.textColor||"0 g",Ml=b.__private__.getTextColor=b.getTextColor=function(){return Xn(Os)};b.__private__.setTextColor=b.setTextColor=function(A,H,ce,ve){return Os=Gr({ch1:A,ch2:H,ch3:ce,ch4:ve,pdfColorType:"text",precision:3}),this};var ss=n.charSpace,Sa=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(ss||0)};b.__private__.setCharSpace=b.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ss=A,this};var as=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(A){var H=b.CapJoinStyles[A];if(H===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return as=H,se(H+" J"),this};var Or=0;b.__private__.setLineJoin=b.setLineJoin=function(A){var H=b.CapJoinStyles[A];if(H===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Or=H,se(H+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return se(D(F(A))+" M"),this},b.GState=Og,b.setGState=function(A){(A=typeof A=="string"?Vt[Bt[A]]:Ks(null,A)).equals(qn)||(se("/"+A.id+" gs"),qn=A)};var Ks=function(A,H){if(!A||!Bt[A]){var ce=!1;for(var ve in Vt)if(Vt.hasOwnProperty(ve)&&Vt[ve].equals(H)){ce=!0;break}if(ce)H=Vt[ve];else{var Ae="GS"+(Object.keys(Vt).length+1).toString(10);Vt[Ae]=H,H.id=Ae}return A&&(Bt[A]=H.id),un.publish("addGState",H),H}};b.addGState=function(A,H){return Ks(A,H),this},b.saveGraphicsState=function(){return se("q"),en.push({key:bt,size:pe,color:Os}),this},b.restoreGraphicsState=function(){se("Q");var A=en.pop();return bt=A.key,pe=A.size,Os=A.color,qn=null,this},b.setCurrentTransformationMatrix=function(A){return se(A.toString()+" cm"),this},b.comment=function(A){return se("#"+A),this};var pi=function(A,H){var ce=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ce},set:function(ze){isNaN(ze)||(ce=parseFloat(ze))}});var ve=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ve},set:function(ze){isNaN(ze)||(ve=parseFloat(ze))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(ze){Ae=ze.toString()}}),this},Qs=function(A,H,ce,ve){pi.call(this,A,H),this.type="rect";var Ae=ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(Xe){isNaN(Xe)||(Ae=parseFloat(Xe))}});var ze=ve||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ze},set:function(Xe){isNaN(Xe)||(ze=parseFloat(Xe))}}),this},$a=function(){this.page=jt,this.currentPage=X,this.pages=Ze.slice(0),this.pagesContext=Nt.slice(0),this.x=_t,this.y=br,this.matrix=rn,this.width=Ns(X),this.height=Ko(X),this.outputDestination=st,this.id="",this.objectNumber=-1};$a.prototype.restore=function(){jt=this.page,X=this.currentPage,Nt=this.pagesContext,Ze=this.pages,_t=this.x,br=this.y,rn=this.matrix,xo(X,this.width),os(X,this.height),st=this.outputDestination};var Xs=function(A,H,ce,ve,Ae){ni.push(new $a),jt=X=0,Ze=[],_t=A,br=H,rn=Ae,ws([ce,ve])};for(var Js in b.beginFormObject=function(A,H,ce,ve,Ae){return Xs(A,H,ce,ve,Ae),this},b.endFormObject=function(A){return(function(H){if(Ys[H])ni.pop().restore();else{var ce=new $a,ve="Xo"+(Object.keys(hi).length+1).toString(10);ce.id=ve,Ys[H]=ve,hi[ve]=ce,un.publish("addFormObject",ce),ni.pop().restore()}})(A),this},b.doFormObject=function(A,H){var ce=hi[Ys[A]];return se("q"),se(H.toString()+" cm"),se("/"+ce.id+" Do"),se("Q"),this},b.getFormObject=function(A){var H=hi[Ys[A]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},b.save=function(A,H){return A=A||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(Yu(bn(_s()),A),typeof Yu.unload=="function"&&Zt.setTimeout&&setTimeout(Yu.unload,911),this):new Promise(function(ce,ve){try{var Ae=Yu(bn(_s()),A);typeof Yu.unload=="function"&&Zt.setTimeout&&setTimeout(Yu.unload,911),ce(Ae)}catch(ze){ve(ze.message)}})},Et.API)Et.API.hasOwnProperty(Js)&&(Js==="events"&&Et.API.events.length?(function(A,H){var ce,ve,Ae;for(Ae=H.length-1;Ae!==-1;Ae--)ce=H[Ae][0],ve=H[Ae][1],A.subscribe.apply(A,[ce].concat(typeof ve=="function"?[ve]:ve))})(un,Et.API.events):b[Js]=Et.API[Js]);function Ns(A){return Nt[A].mediaBox.topRightX-Nt[A].mediaBox.bottomLeftX}function xo(A,H){Nt[A].mediaBox.topRightX=H+Nt[A].mediaBox.bottomLeftX}function Ko(A){return Nt[A].mediaBox.topRightY-Nt[A].mediaBox.bottomLeftY}function os(A,H){Nt[A].mediaBox.topRightY=H+Nt[A].mediaBox.bottomLeftY}var Zs=b.getPageWidth=function(A){return Ns(A=A||X)/Xt},Ol=b.setPageWidth=function(A,H){xo(A,H*Xt)},Fs=b.getPageHeight=function(A){return Ko(A=A||X)/Xt},Qo=b.setPageHeight=function(A,H){os(A,H*Xt)};return b.internal={pdfEscape:Ui,getStyle:kl,getFont:Ms,getFontSize:Qe,getCharSpace:Sa,getTextColor:Ml,getLineHeight:mo,getLineHeightFactor:Ha,getLineWidth:za,write:rt,getHorizontalCoordinate:ii,getVerticalCoordinate:Wr,getCoordinateString:po,getVerticalCoordinateString:Bn,collections:{},newObject:Kn,newAdditionalObject:Ai,newObjectDeferred:ir,newObjectDeferredBegin:$r,getFilters:Vi,putStream:ys,events:un,scaleFactor:Xt,pageSize:{getWidth:function(){return Zs(X)},setWidth:function(A){Ol(X,A)},getHeight:function(){return Fs(X)},setHeight:function(A){Qo(X,A)}},encryptionOptions:p,encryption:pr,getEncryptor:function(A){return p!==null?pr.encryptor(A,0):function(H){return H}},output:Ba,getNumberOfPages:$o,get pages(){return Ze},out:se,f2:S,f3:R,getPageInfo:Cr,getPageInfoByObjId:fo,getCurrentPageInfo:Ac,getPDFVersion:I,Point:pi,Rectangle:Qs,Matrix:Ct,hasHotfix:Mr},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Zs(X)},set:function(A){Ol(X,A)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Fs(X)},set:function(A){Qo(X,A)},enumerable:!0,configurable:!0}),(function(A){for(var H=0,ce=St.length;H<ce;H++){var ve=zo.call(this,A[H][0],A[H][1],A[H][2],St[H][3],!0);v===!1&&(_[ve]=!0);var Ae=A[H][0].split("-");wr({id:ve,fontName:Ae[0],fontStyle:Ae[1]||""})}un.publish("addFonts",{fonts:Lt,dictionary:zt})}).call(b,St),bt="F1",Ds(i,t),un.publish("initialized"),b}sh.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},sh.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},sh.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},sh.prototype.processOwnerPassword=function(n,e){return _1(w1(e).substr(0,5),n)},sh.prototype.encryptor=function(n,e){var t=w1(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return _1(t,r)}},Og.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||nr(n)!==nr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Et.API={events:[]},Et.version="3.0.4";var ei=Et.API,Jy=1,gd=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zd=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},on=function(n){return n.toFixed(2)},tu=function(n){return n.toFixed(5)};ei.__acroform__={};var va=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},EN=function(n){return n*Jy},hl=function(n){var e=new yj,t=yt.internal.getHeight(n)||0,r=yt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(on(r)),Number(on(t))],e},Pq=ei.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},Dq=ei.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},Mq=ei.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},li=ei.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Mq(n,e-1)},ci=ei.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Pq(n,e-1)},ui=ei.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Dq(n,e-1)},Oq=ei.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],a=n[1],c=n[2],d=n[3],h={};return h.lowerLeft_X=t(i)||0,h.lowerLeft_Y=r(a+d)||0,h.upperRight_X=t(i+c)||0,h.upperRight_Y=r(a)||0,[Number(on(h.lowerLeft_X)),Number(on(h.lowerLeft_Y)),Number(on(h.upperRight_X)),Number(on(h.upperRight_Y))]},Fq=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=N1(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+on(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=hl(n);return a.scope=n.scope,a.stream=e.join(`
`),a}},N1=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(S){return S.split(`
`)}):i.map(function(S){return[S]});var a=t,c=yt.internal.getHeight(n)||0;c=c<0?-c:c;var d=yt.internal.getWidth(n)||0;d=d<0?-d:d;var h=function(S,R,F){if(S+1<i.length){var oe=R+" "+i[S+1][0];return Mp(oe,n,F).width<=d-4}return!1};a++;e:for(;a>0;){e="",a--;var f,p,v=Mp("3",n,a).height,_=n.multiline?c-a:(c-v)/2,b=_+=2,T=0,I=0,L=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Mp(e,n,a=12).width+", FieldWidth:"+d+`
`;break}for(var j="",U=0,z=0;z<i.length;z++)if(i.hasOwnProperty(z)){var B=!1;if(i[z].length!==1&&L!==i[z].length-1){if((v+2)*(U+2)+2>c)continue e;j+=i[z][L],B=!0,I=z,z--}else{j=(j+=i[z][L]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var re=parseInt(z),ne=h(re,j,a),V=z>=i.length-1;if(ne&&!V){j+=" ",L=0;continue}if(ne||V){if(V)I=re;else if(n.multiline&&(v+2)*(U+2)+2>c)continue e}else{if(!n.multiline||(v+2)*(U+2)+2>c)continue e;I=re}}for(var D="",k=T;k<=I;k++){var $=i[k];if(n.multiline){if(k===I){D+=$[L]+" ",L=(L+1)%$.length;continue}if(k===T){D+=$[$.length-1]+" ";continue}}D+=$[0]+" "}switch(D=D.substr(D.length-1)==" "?D.substr(0,D.length-1):D,p=Mp(D,n,a).width,n.textAlign){case"right":f=d-p-2;break;case"center":f=(d-p)/2;break;default:f=2}e+=on(f)+" "+on(b)+` Td
`,e+="("+gd(D)+`) Tj
`,e+=-on(f)+` 0 Td
`,b=-(a+2),p=0,T=B?I:I+1,U++,j=""}break}return r.text=e,r.fontSize=a,r},Mp=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},qq={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Vq=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Bq=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Bo.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(qq)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Jy=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new bj,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&Vq(a,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var a=!r;for(var c in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(c)){var d=r[c],h=[],f=d.Rect;if(d.Rect&&(d.Rect=Oq(d.Rect,i)),i.internal.newObjectDeferredBegin(d.objId,!0),d.DA=yt.createDefaultAppearanceStream(d),nr(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(h=d.getKeyValueListForStream()),d.Rect=f,d.hasAppearanceStream&&!d.appearanceStreamContent){var p=Fq(d);h.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(d.appearanceStreamContent){var v="";for(var _ in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(_)){var b=d.appearanceStreamContent[_];if(v+="/"+_+" ",v+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var c in b)if(b.hasOwnProperty(c)){var T=b[c];typeof T=="function"&&(T=T.call(i,d)),v+="/"+c+" "+T+" ",i.internal.acroformPlugin.xForms.indexOf(T)>=0||i.internal.acroformPlugin.xForms.push(T)}}else typeof(T=b)=="function"&&(T=T.call(i,d)),v+="/"+c+" "+T,i.internal.acroformPlugin.xForms.indexOf(T)>=0||i.internal.acroformPlugin.xForms.push(T);v+=">>"}h.push({key:"AP",value:`<<
`+v+">>"})}i.internal.putStream({additionalKeyValues:h,objectId:d.objId}),i.internal.out("endobj")}a&&(function(I,L){for(var j in I)if(I.hasOwnProperty(j)){var U=j,z=I[j];L.internal.newObjectDeferredBegin(z.objId,!0),nr(z)==="object"&&typeof z.putStream=="function"&&z.putStream(),delete I[U]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},vj=ei.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(c){return c};if(Array.isArray(n)){for(var i="[",a=0;a<n.length;a++)switch(a!==0&&(i+=" "),nr(n[a])){case"boolean":case"number":case"object":i+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+gd(r(n[a].toString()))+")"):i+=n[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},_v=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+gd(r(n))+")"},pl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};pl.prototype.toString=function(){return this.objId+" 0 R"},pl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},pl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:vj(i,this.objId,this.scope)}):i instanceof pl?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var yj=function(){pl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};va(yj,pl);var bj=function(){pl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+gd(t(n))+")"}},set:function(t){n=t}})};va(bj,pl);var Bo=function n(){pl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');e=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!li(e,3)},set:function(j){j?this.F=ci(e,3):this.F=ui(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');t=j}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(j){r=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(j){r[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(j){r[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(j){r[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(j){r[3]=j}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Fg)return;a="FieldObject"+n.FieldNum++}var j=function(U){return U};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+gd(j(a))+")"},set:function(j){a=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(j){a=j}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(j){c=j}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(j){d=j}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(j){h=j}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Jy:f},set:function(j){f=j}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(j){p=j}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof Fg||this instanceof ed))return _v(v,this.objId,this.scope)},set:function(j){j=j.toString(),v=j}});var _=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Ji==0?_v(_,this.objId,this.scope):_},set:function(j){j=j.toString(),_=this instanceof Ji==0?j.substr(0,1)==="("?Zd(j.substr(1,j.length-2)):Zd(j):j}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ji==1?Zd(_.substr(1,_.length-1)):_},set:function(j){j=j.toString(),_=this instanceof Ji==1?"/"+j:j}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Ji==0?_v(b,this.objId,this.scope):b},set:function(j){j=j.toString(),b=this instanceof Ji==0?j.substr(0,1)==="("?Zd(j.substr(1,j.length-2)):Zd(j):j}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ji==1?Zd(b.substr(1,b.length-1)):b},set:function(j){j=j.toString(),b=this instanceof Ji==1?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var T,I=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return I},set:function(j){j=!!j,I=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(T)return T},set:function(j){T=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,1)},set:function(j){j?this.Ff=ci(this.Ff,1):this.Ff=ui(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,2)},set:function(j){j?this.Ff=ci(this.Ff,2):this.Ff=ui(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,3)},set:function(j){j?this.Ff=ci(this.Ff,3):this.Ff=ui(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');L=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(L){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};va(Bo,pl);var ph=function(){Bo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vj(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(a,c,d){d||(d=1);for(var h,f=[];h=c.exec(a);)f.push(h[d]);return f})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,18)},set:function(t){t?this.Ff=ci(this.Ff,18):this.Ff=ui(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ci(this.Ff,19):this.Ff=ui(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,20)},set:function(t){t?(this.Ff=ci(this.Ff,20),e.sort()):this.Ff=ui(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,22)},set:function(t){t?this.Ff=ci(this.Ff,22):this.Ff=ui(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,23)},set:function(t){t?this.Ff=ci(this.Ff,23):this.Ff=ui(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,27)},set:function(t){t?this.Ff=ci(this.Ff,27):this.Ff=ui(this.Ff,27)}}),this.hasAppearanceStream=!1};va(ph,Bo);var gh=function(){ph.call(this),this.fontName="helvetica",this.combo=!1};va(gh,ph);var xh=function(){gh.call(this),this.combo=!0};va(xh,gh);var ng=function(){xh.call(this),this.edit=!0};va(ng,xh);var Ji=function(){Bo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,15)},set:function(t){t?this.Ff=ci(this.Ff,15):this.Ff=ui(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,16)},set:function(t){t?this.Ff=ci(this.Ff,16):this.Ff=ui(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,17)},set:function(t){t?this.Ff=ci(this.Ff,17):this.Ff=ui(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,26)},set:function(t){t?this.Ff=ci(this.Ff,26):this.Ff=ui(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+gd(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){nr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};va(Ji,Bo);var rg=function(){Ji.call(this),this.pushButton=!0};va(rg,Ji);var vh=function(){Ji.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};va(vh,Ji);var Fg=function(){var n,e;Bo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(d){return d};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,c=[];for(a in c.push("<<"),r)c.push("/"+a+" ("+gd(i(r[a]))+")");return c.push(">>"),c.join(`
`)},set:function(i){nr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};va(Fg,Bo),vh.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},vh.prototype.createOption=function(n){var e=new Fg;return e.Parent=this,e.optionName=n,this.Kids.push(e),Uq.call(this.scope,e),e};var ig=function(){Ji.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};va(ig,Ji);var ed=function(){Bo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,13)},set:function(e){e?this.Ff=ci(this.Ff,13):this.Ff=ui(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,21)},set:function(e){e?this.Ff=ci(this.Ff,21):this.Ff=ui(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,23)},set:function(e){e?this.Ff=ci(this.Ff,23):this.Ff=ui(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,24)},set:function(e){e?this.Ff=ci(this.Ff,24):this.Ff=ui(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,25)},set:function(e){e?this.Ff=ci(this.Ff,25):this.Ff=ui(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,26)},set:function(e){e?this.Ff=ci(this.Ff,26):this.Ff=ui(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};va(ed,Bo);var sg=function(){ed.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,14)},set:function(n){n?this.Ff=ci(this.Ff,14):this.Ff=ui(this.Ff,14)}}),this.password=!0};va(sg,ed);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=hl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),a=N1(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+on(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=hl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],a=yt.internal.getHeight(n),c=yt.internal.getWidth(n),d=N1(n,n.caption);return i.push("1 g"),i.push("0 0 "+on(c)+" "+on(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+on(c-1)+" "+on(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+on(d.fontSize)+" Tf "+r),i.push(d.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=hl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Circle.YesNormal,e.D[n]=yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=hl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=yt.internal.Bezier_C,a=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+tu(yt.internal.getWidth(n)/2)+" "+tu(yt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=hl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*yt.internal.Bezier_C).toFixed(5)),c=Number((r*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+tu(yt.internal.getWidth(n)/2)+" "+tu(yt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+tu(yt.internal.getWidth(n)/2)+" "+tu(yt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),t.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),t.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),t.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=hl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+tu(yt.internal.getWidth(n)/2)+" "+tu(yt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Cross.YesNormal,e.D[n]=yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=hl(n);e.scope=n.scope;var t=[],r=yt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+on(yt.internal.getWidth(n)-2)+" "+on(yt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(on(r.x1.x)+" "+on(r.x1.y)+" m"),t.push(on(r.x2.x)+" "+on(r.x2.y)+" l"),t.push(on(r.x4.x)+" "+on(r.x4.y)+" m"),t.push(on(r.x3.x)+" "+on(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=hl(n);e.scope=n.scope;var t=yt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+on(yt.internal.getWidth(n)-2)+" "+on(yt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(on(t.x1.x)+" "+on(t.x1.y)+" m"),r.push(on(t.x2.x)+" "+on(t.x2.y)+" l"),r.push(on(t.x4.x)+" "+on(t.x4.y)+" m"),r.push(on(t.x3.x)+" "+on(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=hl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};yt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=yt.internal.getWidth(n),t=yt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},yt.internal.getWidth=function(n){var e=0;return nr(n)==="object"&&(e=EN(n.Rect[2])),e},yt.internal.getHeight=function(n){var e=0;return nr(n)==="object"&&(e=EN(n.Rect[3])),e};var Uq=ei.addField=function(n){if(Bq(this,n),!(n instanceof Bo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};ei.AcroFormChoiceField=ph,ei.AcroFormListBox=gh,ei.AcroFormComboBox=xh,ei.AcroFormEditBox=ng,ei.AcroFormButton=Ji,ei.AcroFormPushButton=rg,ei.AcroFormRadioButton=vh,ei.AcroFormCheckBox=ig,ei.AcroFormTextField=ed,ei.AcroFormPasswordField=sg,ei.AcroFormAppearance=yt,ei.AcroForm={ChoiceField:ph,ListBox:gh,ComboBox:xh,EditBox:ng,Button:Ji,PushButton:rg,RadioButton:vh,CheckBox:ig,TextField:ed,PasswordField:sg,Appearance:yt},Et.AcroForm={ChoiceField:ph,ListBox:gh,ComboBox:xh,EditBox:ng,Button:Ji,PushButton:rg,RadioButton:vh,CheckBox:ig,TextField:ed,PasswordField:sg,Appearance:yt};Et.AcroForm;function wj(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(S,R){var F,oe,be,Q,ae,me=t;if((R=R||t)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(ne(S))for(ae in r)for(be=r[ae],F=0;F<be.length;F+=1){for(Q=!0,oe=0;oe<be[F].length;oe+=1)if(be[F][oe]!==void 0&&be[F][oe]!==S[oe]){Q=!1;break}if(Q===!0){me=ae;break}}else for(ae in r)for(be=r[ae],F=0;F<be.length;F+=1){for(Q=!0,oe=0;oe<be[F].length;oe+=1)if(be[F][oe]!==void 0&&be[F][oe]!==S.charCodeAt(oe)){Q=!1;break}if(Q===!0){me=ae;break}}return me===t&&R!==t&&(me=R),me},a=function S(R){for(var F=this.internal.write,oe=this.internal.putStream,be=(0,this.internal.getFilters)();be.indexOf("FlateEncode")!==-1;)be.splice(be.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:R.width}),Q.push({key:"Height",value:R.height}),R.colorSpace===j.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===j.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)&&R.transparency.length>0){for(var ae="",me=0,je=R.transparency.length;me<je;me++)ae+=R.transparency[me]+" "+R.transparency[me]+" ";Q.push({key:"Mask",value:"["+ae+"]"})}R.sMask!==void 0&&Q.push({key:"SMask",value:R.objectId+1+" 0 R"});var Fe=R.filter!==void 0?["/"+R.filter]:void 0;if(oe({data:R.data,additionalKeyValues:Q,alreadyAppliedFilters:Fe,objectId:R.objectId}),F("endobj"),"sMask"in R&&R.sMask!==void 0){var J,q=(J=R.sMaskBitsPerComponent)!==null&&J!==void 0?J:R.bitsPerComponent,X={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:q,data:R.sMask};"filter"in R&&(X.decodeParameters="/Predictor ".concat(R.predictor," /Colors 1 /BitsPerComponent ").concat(q," /Columns ").concat(R.width),X.filter=R.filter),S.call(this,X)}if(R.colorSpace===j.INDEXED){var ie=this.internal.newObject();oe({data:D(new Uint8Array(R.palette)),objectId:ie}),F("endobj")}},c=function(){var S=this.internal.collections[e+"images"];for(var R in S)a.call(this,S[R])},d=function(){var S,R=this.internal.collections[e+"images"],F=this.internal.write;for(var oe in R)F("/I"+(S=R[oe]).index,S.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",d))},f=function(){var S=this.internal.collections[e+"images"];return h.call(this),S},p=function(){return Object.keys(this.internal.collections[e+"images"]).length},v=function(S){return typeof n["process"+S.toUpperCase()]=="function"},_=function(S){return nr(S)==="object"&&S.nodeType===1},b=function(S,R){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var F=""+S.getAttribute("src");if(F.indexOf("data:image/")===0)return tg(unescape(F).split("base64,").pop());var oe=n.loadFile(F,!0);if(oe!==void 0)return oe}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var be;switch(R){case"PNG":be="image/png";break;case"WEBP":be="image/webp";break;default:be="image/jpeg"}return tg(S.toDataURL(be,1).split("base64,").pop())}},T=function(S){var R=this.internal.collections[e+"images"];if(R){for(var F in R)if(S===R[F].alias)return R[F]}},I=function(S,R,F){return S||R||(S=-96,R=-96),S<0&&(S=-1*F.width*72/S/this.internal.scaleFactor),R<0&&(R=-1*F.height*72/R/this.internal.scaleFactor),S===0&&(S=R*F.width/F.height),R===0&&(R=S*F.height/F.width),[S,R]},L=function(S,R,F,oe,be,Q){var ae=I.call(this,F,oe,be),me=this.internal.getCoordinateString,je=this.internal.getVerticalCoordinateString,Fe=f.call(this);if(F=ae[0],oe=ae[1],Fe[be.index]=be,Q){Q*=Math.PI/180;var J=Math.cos(Q),q=Math.sin(Q),X=function(fe){return fe.toFixed(4)},ie=[X(J),X(q),X(-1*q),X(J),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,me(S),je(R+oe),"cm"].join(" ")),this.internal.write(ie.join(" ")),this.internal.write([me(F),"0","0",me(oe),"0","0","cm"].join(" "))):this.internal.write([me(F),"0","0",me(oe),me(S),je(R+oe),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+be.index+" Do"),this.internal.write("Q")},j=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var U=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},z=n.__addimage__.sHashCode=function(S){var R,F,oe=0;if(typeof S=="string")for(F=S.length,R=0;R<F;R++)oe=(oe<<5)-oe+S.charCodeAt(R),oe|=0;else if(ne(S))for(F=S.byteLength/2,R=0;R<F;R++)oe=(oe<<5)-oe+S[R],oe|=0;return oe},B=n.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var R=!0;return S.length===0&&(R=!1),S.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(R=!1),R},re=n.__addimage__.extractImageFromDataUrl=function(S){if(S==null||!(S=S.trim()).startsWith("data:"))return null;var R=S.indexOf(",");return R<0?null:S.substring(0,R).trim().endsWith("base64")?S.substring(R+1):null};n.__addimage__.isArrayBuffer=function(S){return S instanceof ArrayBuffer};var ne=n.__addimage__.isArrayBufferView=function(S){return S instanceof Int8Array||S instanceof Uint8Array||S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array},V=n.__addimage__.binaryStringToUint8Array=function(S){for(var R=S.length,F=new Uint8Array(R),oe=0;oe<R;oe++)F[oe]=S.charCodeAt(oe);return F},D=n.__addimage__.arrayBufferToBinaryString=function(S){for(var R="",F=ne(S)?S:new Uint8Array(S),oe=0;oe<F.length;oe+=8192)R+=String.fromCharCode.apply(null,F.subarray(oe,oe+8192));return R};n.addImage=function(){var S,R,F,oe,be,Q,ae,me,je;if(typeof arguments[1]=="number"?(R=t,F=arguments[1],oe=arguments[2],be=arguments[3],Q=arguments[4],ae=arguments[5],me=arguments[6],je=arguments[7]):(R=arguments[1],F=arguments[2],oe=arguments[3],be=arguments[4],Q=arguments[5],ae=arguments[6],me=arguments[7],je=arguments[8]),nr(S=arguments[0])==="object"&&!_(S)&&"imageData"in S){var Fe=S;S=Fe.imageData,R=Fe.format||R||t,F=Fe.x||F||0,oe=Fe.y||oe||0,be=Fe.w||Fe.width||be,Q=Fe.h||Fe.height||Q,ae=Fe.alias||ae,me=Fe.compression||me,je=Fe.rotation||Fe.angle||je}var J=this.internal.getFilters();if(me===void 0&&J.indexOf("FlateEncode")!==-1&&(me="SLOW"),isNaN(F)||isNaN(oe))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var q=k.call(this,S,R,ae,me);return L.call(this,F,oe,be,Q,q,je),this};var k=function(S,R,F,oe){var be,Q,ae;if(typeof S=="string"&&i(S)===t){S=unescape(S);var me=$(S,!1);(me!==""||(me=n.loadFile(S,!0))!==void 0)&&(S=me)}if(_(S)&&(S=b(S,R)),R=i(S,R),!v(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((ae=F)==null||ae.length===0)&&(F=(function(je){return typeof je=="string"||ne(je)?z(je):ne(je.data)?z(je.data):null})(S)),(be=T.call(this,F))||(S instanceof Uint8Array||R==="RGBA"||(Q=S,S=V(S)),be=this["process"+R.toUpperCase()](S,p.call(this),F,(function(je){return je&&typeof je=="string"&&(je=je.toUpperCase()),je in n.image_compression?je:U.NONE})(oe),Q)),!be)throw new Error("An unknown error occurred whilst processing the image.");return be},$=n.__addimage__.convertBase64ToBinaryString=function(S,R){R=typeof R!="boolean"||R;var F,oe="";if(typeof S=="string"){var be;F=(be=re(S))!==null&&be!==void 0?be:S;try{oe=tg(F)}catch(Q){if(R)throw B(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return oe};n.getImageProperties=function(S){var R,F,oe="";if(_(S)&&(S=b(S)),typeof S=="string"&&i(S)===t&&((oe=$(S,!1))===""&&(oe=n.loadFile(S)||""),S=oe),F=i(S),!v(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(S instanceof Uint8Array||(S=V(S)),!(R=this["process"+F.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=F,R}})(Et.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Et.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,a,c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,p=!1,v=0;v<f.length&&!p;v++)switch((r=f[v]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var _=0;_<f.length;_++){r=f[_];var b=this.internal.pdfEscape,T=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var I=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(I.objId),U=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+c(r.bounds.x)+" "+d(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y)+"] ")+"/Contents ("+b(j(r.contents))+")",a+=" /Popup "+L.objId+" 0 R",a+=" /P "+h.objId+" 0 R",a+=" /T ("+b(j(U))+") >>",I.content=a;var z=I.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+c(r.bounds.x+30)+" "+d(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w+30)+" "+d(r.bounds.y)+"] ")+" /Parent "+z,r.open&&(a+=" /Open true"),a+=" >>",L.content=a,this.internal.write(I.objId,"0 R",L.objId,"0 R");break;case"freetext":i="/Rect ["+c(r.bounds.x)+" "+d(r.bounds.y)+" "+c(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y+r.bounds.h)+"] ";var B=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+b(T(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+B+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var re=this.annotations._nameMap[r.options.name];r.options.pageNumber=re.page,r.options.top=re.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+b(T(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var ne=d(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+ne+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,a,c){var d=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:h(t),y:f(r),w:h(t+i),h:f(r+a)},options:c,type:"link"})},n.textWithLink=function(t,r,i,a){var c,d,h=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){d=a.maxWidth;var p=this.splitTextToSize(t,d).length;c=Math.ceil(f*p)}else d=h,c=f;return this.text(t,r,i,a),i+=.2*f,a.align==="center"&&(r-=h/2),a.align==="right"&&(r-=h),this.link(r,i-f,d,c,a),h},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(Et.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(I){return e[I.charCodeAt(0)]!==void 0},c=n.__arabicParser__.isArabicLetter=function(I){return typeof I=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(I)},d=n.__arabicParser__.isArabicEndLetter=function(I){return c(I)&&a(I)&&e[I.charCodeAt(0)].length<=2},h=n.__arabicParser__.isArabicAlfLetter=function(I){return c(I)&&i.indexOf(I.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(I){return c(I)&&a(I)&&e[I.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(I){return c(I)&&a(I)&&e[I.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(I){return c(I)&&a(I)&&e[I.charCodeAt(0)].length>=3};var p=n.__arabicParser__.arabicLetterHasMedialForm=function(I){return c(I)&&a(I)&&e[I.charCodeAt(0)].length==4},v=n.__arabicParser__.resolveLigatures=function(I){var L=0,j=t,U="",z=0;for(L=0;L<I.length;L+=1)j[I.charCodeAt(L)]!==void 0?(z++,typeof(j=j[I.charCodeAt(L)])=="number"&&(U+=String.fromCharCode(j),j=t,z=0),L===I.length-1&&(j=t,U+=I.charAt(L-(z-1)),L-=z-1,z=0)):(j=t,U+=I.charAt(L-z),L-=z,z=0);return U};n.__arabicParser__.isArabicDiacritic=function(I){return I!==void 0&&r[I.charCodeAt(0)]!==void 0};var _=n.__arabicParser__.getCorrectForm=function(I,L,j){return c(I)?a(I)===!1?-1:!f(I)||!c(L)&&!c(j)||!c(j)&&d(L)||d(I)&&!c(L)||d(I)&&h(L)||d(I)&&d(L)?0:p(I)&&c(L)&&!d(L)&&c(j)&&f(j)?3:d(I)||!c(j)?1:2:-1},b=function(I){var L=0,j=0,U=0,z="",B="",re="",ne=(I=I||"").split("\\s+"),V=[];for(L=0;L<ne.length;L+=1){for(V.push(""),j=0;j<ne[L].length;j+=1)z=ne[L][j],B=ne[L][j-1],re=ne[L][j+1],c(z)?(U=_(z,B,re),V[L]+=U!==-1?String.fromCharCode(e[z.charCodeAt(0)][U]):z):V[L]+=z;V[L]=v(V[L])}return V.join(" ")},T=n.__arabicParser__.processArabic=n.processArabic=function(){var I,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(L)){var U=0;for(j=[],U=0;U<L.length;U+=1)Array.isArray(L[U])?j.push([b(L[U][0]),L[U][1],L[U][2]]):j.push([b(L[U])]);I=j}else I=b(L);return typeof arguments[0]=="string"?I:(arguments[0].text=I,arguments[0])};n.events.push(["preProcessText",T])})(Et.API),Et.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(d){r=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(d){i=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(d){a=d}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(d){c=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Et.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(I){h=I}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(I){f=I}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(I){p=I}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(I){v=I}});var _=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _},set:function(I){_=I}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(I){b=I}});var T=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return T},set:function(I){T=I}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(h){return r.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},n.getTextDimensions=function(h,f){r.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),v=f.font||this.getFont(),_=f.scaleFactor||this.internal.scaleFactor,b=0,T=0,I=0,L=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var j=f.maxWidth;j>0?typeof h=="string"?h=this.splitTextToSize(h,j):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(z,B){return z.concat(L.splitTextToSize(B,j))},[])):h=Array.isArray(h)?h:[h];for(var U=0;U<h.length;U++)b<(I=this.getStringUnitWidth(h[U],{font:v})*p)&&(b=I);return b!==0&&(T=h.length),{w:b/=_,h:Math.max((T*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/_,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=n.cell=function(){var h;h=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,v=this.internal.__cell__.margins||e,_=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=v.top,b&&_&&(this.printHeaderRow(h.lineNumber,!0),h.y+=_[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-p,h.y+p,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+p,{align:"center",baseline:"top",maxWidth:h.width-p-p}):this.text(h.text,h.x+p,h.y+p,{align:"left",baseline:"top",maxWidth:h.width-p-p})),this.internal.__cell__.lastCell=h,this};n.table=function(h,f,p,v,_){if(r.call(this),!p)throw new Error("No data for PDF table.");var b,T,I,L,j=[],U=[],z=[],B={},re={},ne=[],V=[],D=(_=_||{}).autoSize||!1,k=_.printHeaders!==!1,$=_.css&&_.css["font-size"]!==void 0?16*_.css["font-size"]:_.fontSize||12,S=_.margins||Object.assign({width:this.getPageWidth()},e),R=typeof _.padding=="number"?_.padding:3,F=_.headerBackgroundColor||"#c8c8c8",oe=_.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=$,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=oe,this.setFontSize($),v==null)U=j=Object.keys(p[0]),z=j.map(function(){return"left"});else if(Array.isArray(v)&&nr(v[0])==="object")for(j=v.map(function(Fe){return Fe.name}),U=v.map(function(Fe){return Fe.prompt||Fe.name||""}),z=v.map(function(Fe){return Fe.align||"left"}),b=0;b<v.length;b+=1)re[v[b].name]=.7499990551181103*v[b].width;else Array.isArray(v)&&typeof v[0]=="string"&&(U=j=v,z=j.map(function(){return"left"}));if(D||Array.isArray(v)&&typeof v[0]=="string")for(b=0;b<j.length;b+=1){for(B[L=j[b]]=p.map(function(Fe){return Fe[L]}),this.setFont(void 0,"bold"),ne.push(this.getTextDimensions(U[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),T=B[L],this.setFont(void 0,"normal"),I=0;I<T.length;I+=1)ne.push(this.getTextDimensions(T[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);re[L]=Math.max.apply(null,ne)+R+R,ne=[]}if(k){var be={};for(b=0;b<j.length;b+=1)be[j[b]]={},be[j[b]].text=U[b],be[j[b]].align=z[b];var Q=d.call(this,be,re);V=j.map(function(Fe){return new a(h,f,re[Fe],Q,be[Fe].text,void 0,be[Fe].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var ae=v.reduce(function(Fe,J){return Fe[J.name]=J.align,Fe},{});for(b=0;b<p.length;b+=1){"rowStart"in _&&_.rowStart instanceof Function&&_.rowStart({row:b,data:p[b]},this);var me=d.call(this,p[b],re);for(I=0;I<j.length;I+=1){var je=p[b][j[I]];"cellStart"in _&&_.cellStart instanceof Function&&_.cellStart({row:b,col:I,data:je},this),c.call(this,new a(h,f,re[j[I]],me,je,b+2,ae[j[I]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var d=function(h,f){var p=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,_=this.internal.scaleFactor;return Object.keys(h).map(function(b){var T=h[b];return this.splitTextToSize(T.hasOwnProperty("text")?T.text:T,f[b]-p-p)},this).map(function(b){return this.getLineHeightFactor()*b.length*v/_+p+p},this).reduce(function(b,T){return Math.max(b,T)},0)};n.setTableHeaderRow=function(h){r.call(this),this.internal.__cell__.tableHeaderRow=h},n.printHeaderRow=function(h,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var _=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){p=this.internal.__cell__.tableHeaderRow[b].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,_.push(p)),p.lineNumber=h;var T=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,p),this.setTextColor(T)}_.length>0&&this.setTableHeaderRow(_),this.setFont(void 0,"normal"),t=!1}})(Et.API);var _j={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Nj=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],A1=wj(Nj),Aj=[100,200,300,400,500,600,700,800,900],zq=wj(Aj);function Nv(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(a){return _j[a=a||"normal"]?a:"normal"})(n.style),r=(function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400})(n.weight),i=(function(a){return typeof A1[a=a||"normal"]=="number"?a:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function TN(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Hq={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},CN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function IN(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function LN(n){return n.trimLeft()}function $q(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Gq(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Op,RN,kN,eh,Fp,PN,DN,MN,Av=["times"];function ON(n,e,t,r,i){var a=4,c=qN;switch(i){case Et.API.image_compression.FAST:a=1,c=FN;break;case Et.API.image_compression.MEDIUM:a=6,c=VN;break;case Et.API.image_compression.SLOW:a=9,c=BN}n=(function(h,f,p,v){for(var _,b=h.length/f,T=new Uint8Array(h.length+b),I=[Wq,FN,qN,VN,BN],L=0;L<b;L+=1){var j=L*f,U=h.subarray(j,j+f);if(v)T.set(v(U,p,_),j+L);else{for(var z=I.length,B=[],re=0;re<z;re+=1)B[re]=I[re](U,p,_);var ne=Kq(B.concat());T.set(B[ne],j+L)}_=U}return T})(n,e,Math.ceil(t*r/8),c);var d=x1(n,{level:a});return Et.API.__addimage__.arrayBufferToBinaryString(d)}function Wq(n){var e=Array.apply([],n);return e.unshift(0),e}function FN(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var a=n[i-e]||0;r[i+1]=n[i]-a+256&255}return r}function qN(n,e,t){var r=n.length,i=[];i[0]=2;for(var a=0;a<r;a+=1){var c=t&&t[a]||0;i[a+1]=n[a]-c+256&255}return i}function VN(n,e,t){var r=n.length,i=[];i[0]=3;for(var a=0;a<r;a+=1){var c=n[a-e]||0,d=t&&t[a]||0;i[a+1]=n[a]+256-(c+d>>>1)&255}return i}function BN(n,e,t){var r=n.length,i=[];i[0]=4;for(var a=0;a<r;a+=1){var c=Yq(n[a-e]||0,t&&t[a]||0,t&&t[a-e]||0);i[a+1]=n[a]-c+256&255}return i}function Yq(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),a=Math.abs(n+e-t-t);return r<=i&&r<=a?n:i<=a?e:t}function Kq(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Sv(n,e,t){var r=e*t,i=Math.floor(r/8),a=16-(r-8*i+t),c=(1<<t)-1;return Sj(n,i)>>a&c}function UN(n,e,t,r){var i=t*r,a=Math.floor(i/8),c=16-(i-8*a+r),d=(1<<r)-1,h=(e&d)<<c;(function(f,p,v){if(p+1<f.byteLength)f.setUint16(p,v,!1);else{var _=v>>8&255;f.setUint8(p,_)}})(n,a,Sj(n,a)&~(d<<c)&65535|h)}function Sj(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function Qq(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],a=i>>7,c=1<<1+(7&i);n[e++],n[e++];var d=null,h=null;a&&(d=e,h=c,e+=3*c);var f=!0,p=[],v=0,_=null,b=0,T=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,T=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var I=n[e++];v=n[e++]|n[e++]<<8,_=n[e++],1&I||(_=null),b=I>>2&7,e++;break;case 254:for(;;){if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var L=n[e++]|n[e++]<<8,j=n[e++]|n[e++]<<8,U=n[e++]|n[e++]<<8,z=n[e++]|n[e++]<<8,B=n[e++],re=B>>6&1,ne=1<<1+(7&B),V=d,D=h,k=!1;B>>7&&(k=!0,V=e,D=ne,e+=3*ne);var $=e;for(e++;;){var S;if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}p.push({x:L,y:j,width:U,height:z,has_local_palette:k,palette_offset:V,palette_size:D,data_offset:$,data_length:e-$,transparent_index:_,interlaced:!!re,delay:v,disposal:b});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return T},this.frameInfo=function(R){if(R<0||R>=p.length)throw new Error("Frame index out of range.");return p[R]},this.decodeAndBlitFrameBGRA=function(R,F){var oe=this.frameInfo(R),be=oe.width*oe.height,Q=new Uint8Array(be);zN(n,oe.data_offset,Q,be);var ae=oe.palette_offset,me=oe.transparent_index;me===null&&(me=256);var je=oe.width,Fe=t-je,J=je,q=4*(oe.y*t+oe.x),X=4*((oe.y+oe.height)*t+oe.x),ie=q,fe=4*Fe;oe.interlaced===!0&&(fe+=4*t*7);for(var ge=8,_e=0,Le=Q.length;_e<Le;++_e){var ke=Q[_e];if(J===0&&(J=je,(ie+=fe)>=X&&(fe=4*Fe+4*t*(ge-1),ie=q+(je+Fe)*(ge<<1),ge>>=1)),ke===me)ie+=4;else{var Be=n[ae+3*ke],Ze=n[ae+3*ke+1],ot=n[ae+3*ke+2];F[ie++]=ot,F[ie++]=Ze,F[ie++]=Be,F[ie++]=255}--J}},this.decodeAndBlitFrameRGBA=function(R,F){var oe=this.frameInfo(R),be=oe.width*oe.height,Q=new Uint8Array(be);zN(n,oe.data_offset,Q,be);var ae=oe.palette_offset,me=oe.transparent_index;me===null&&(me=256);var je=oe.width,Fe=t-je,J=je,q=4*(oe.y*t+oe.x),X=4*((oe.y+oe.height)*t+oe.x),ie=q,fe=4*Fe;oe.interlaced===!0&&(fe+=4*t*7);for(var ge=8,_e=0,Le=Q.length;_e<Le;++_e){var ke=Q[_e];if(J===0&&(J=je,(ie+=fe)>=X&&(fe=4*Fe+4*t*(ge-1),ie=q+(je+Fe)*(ge<<1),ge>>=1)),ke===me)ie+=4;else{var Be=n[ae+3*ke],Ze=n[ae+3*ke+1],ot=n[ae+3*ke+2];F[ie++]=Be,F[ie++]=Ze,F[ie++]=ot,F[ie++]=255}--J}}}function zN(n,e,t,r){for(var i=n[e++],a=1<<i,c=a+1,d=c+1,h=i+1,f=(1<<h)-1,p=0,v=0,_=0,b=n[e++],T=new Int32Array(4096),I=null;;){for(;p<16&&b!==0;)v|=n[e++]<<p,p+=8,b===1?b=n[e++]:--b;if(p<h)break;var L=v&f;if(v>>=h,p-=h,L!==a){if(L===c)break;for(var j=L<d?L:I,U=0,z=j;z>a;)z=T[z]>>8,++U;var B=z;if(_+U+(j!==L?1:0)>r)return void yr.log("Warning, gif stream longer than expected.");t[_++]=B;var re=_+=U;for(j!==L&&(t[_++]=B),z=j;U--;)z=T[z],t[--re]=255&z,z>>=8;I!==null&&d<4096&&(T[d++]=I<<8|B,d>=f+1&&h<12&&(++h,f=f<<1|1)),I=L}else d=c+1,f=(1<<(h=i+1))-1,I=null}return _!==r&&yr.log("Warning, gif stream shorter than expected."),t}function jv(n){var e,t,r,i,a,c=Math.floor,d=new Array(64),h=new Array(64),f=new Array(64),p=new Array(64),v=new Array(65535),_=new Array(65535),b=new Array(64),T=new Array(64),I=[],L=0,j=7,U=new Array(64),z=new Array(64),B=new Array(64),re=new Array(256),ne=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],oe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],be=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(q,X){for(var ie=0,fe=0,ge=new Array,_e=1;_e<=16;_e++){for(var Le=1;Le<=q[_e];Le++)ge[X[fe]]=[],ge[X[fe]][0]=ie,ge[X[fe]][1]=_e,fe++,ie++;ie*=2}return ge}function ae(q){for(var X=q[0],ie=q[1]-1;ie>=0;)X&1<<ie&&(L|=1<<j),ie--,--j<0&&(L==255?(me(255),me(0)):me(L),j=7,L=0)}function me(q){I.push(q)}function je(q){me(q>>8&255),me(255&q)}function Fe(q,X,ie,fe,ge){for(var _e,Le=ge[0],ke=ge[240],Be=(function(pe,Ue){var Qe,at,nt,pt,Gt,Mt,cn,nn,bt,Xt,_t=0;for(bt=0;bt<8;++bt){Qe=pe[_t],at=pe[_t+1],nt=pe[_t+2],pt=pe[_t+3],Gt=pe[_t+4],Mt=pe[_t+5],cn=pe[_t+6];var br=Qe+(nn=pe[_t+7]),rn=Qe-nn,Lt=at+cn,zt=at-cn,en=nt+Mt,Tt=nt-Mt,Dn=pt+Gt,Vt=pt-Gt,Bt=br+Dn,qn=br-Dn,jt=Lt+en,Nt=Lt-en;pe[_t]=Bt+jt,pe[_t+4]=Bt-jt;var un=.707106781*(Nt+qn);pe[_t+2]=qn+un,pe[_t+6]=qn-un;var Ni=.382683433*((Bt=Vt+Tt)-(Nt=zt+rn)),hi=.5411961*Bt+Ni,Ys=1.306562965*Nt+Ni,ni=.707106781*(jt=Tt+zt),Ct=rn+ni,ya=rn-ni;pe[_t+5]=ya+hi,pe[_t+3]=ya-hi,pe[_t+1]=Ct+Ys,pe[_t+7]=Ct-Ys,_t+=8}for(_t=0,bt=0;bt<8;++bt){Qe=pe[_t],at=pe[_t+8],nt=pe[_t+16],pt=pe[_t+24],Gt=pe[_t+32],Mt=pe[_t+40],cn=pe[_t+48];var es=Qe+(nn=pe[_t+56]),Fi=Qe-nn,qi=at+cn,Kn=at-cn,ir=nt+Mt,$r=nt-Mt,Ai=pt+Gt,fi=pt-Gt,Vn=es+Ai,Xn=es-Ai,Gr=qi+ir,Vi=qi-ir;pe[_t]=Vn+Gr,pe[_t+32]=Vn-Gr;var ys=.707106781*(Vi+Xn);pe[_t+16]=Xn+ys,pe[_t+48]=Xn-ys;var Va=.382683433*((Vn=fi+$r)-(Vi=Kn+Fi)),Ps=.5411961*Vn+Va,Bi=1.306562965*Vi+Va,ba=.707106781*(Gr=$r+Kn),ts=Fi+ba,Si=Fi-ba;pe[_t+40]=Si+Ps,pe[_t+24]=Si-Ps,pe[_t+8]=ts+Bi,pe[_t+56]=ts-Bi,_t++}for(bt=0;bt<64;++bt)Xt=pe[bt]*Ue[bt],b[bt]=Xt>0?Xt+.5|0:Xt-.5|0;return b})(q,X),Ze=0;Ze<64;++Ze)T[V[Ze]]=Be[Ze];var ot=T[0]-ie;ie=T[0],ot==0?ae(fe[0]):(ae(fe[_[_e=32767+ot]]),ae(v[_e]));for(var st=63;st>0&&T[st]==0;)st--;if(st==0)return ae(Le),ie;for(var dt,se=1;se<=st;){for(var rt=se;T[se]==0&&se<=st;)++se;var Kt=se-rt;if(Kt>=16){dt=Kt>>4;for(var St=1;St<=dt;++St)ae(ke);Kt&=15}_e=32767+T[se],ae(ge[(Kt<<4)+_[_e]]),ae(v[_e]),se++}return st!=63&&ae(Le),ie}function J(q){q=Math.min(Math.max(q,1),100),a!=q&&((function(X){for(var ie=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],fe=0;fe<64;fe++){var ge=c((ie[fe]*X+50)/100);ge=Math.min(Math.max(ge,1),255),d[V[fe]]=ge}for(var _e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Le=0;Le<64;Le++){var ke=c((_e[Le]*X+50)/100);ke=Math.min(Math.max(ke,1),255),h[V[Le]]=ke}for(var Be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ze=0,ot=0;ot<8;ot++)for(var st=0;st<8;st++)f[Ze]=1/(d[V[Ze]]*Be[ot]*Be[st]*8),p[Ze]=1/(h[V[Ze]]*Be[ot]*Be[st]*8),Ze++})(q<50?Math.floor(5e3/q):Math.floor(200-2*q)),a=q)}this.encode=function(q,X){X&&J(X),I=new Array,L=0,j=7,je(65496),je(65504),je(16),me(74),me(70),me(73),me(70),me(0),me(1),me(1),me(0),je(1),je(1),me(0),me(0),(function(){je(65499),je(132),me(0);for(var at=0;at<64;at++)me(d[at]);me(1);for(var nt=0;nt<64;nt++)me(h[nt])})(),(function(at,nt){je(65472),je(17),me(8),je(nt),je(at),me(3),me(1),me(17),me(0),me(2),me(17),me(1),me(3),me(17),me(1)})(q.width,q.height),(function(){je(65476),je(418),me(0);for(var at=0;at<16;at++)me(D[at+1]);for(var nt=0;nt<=11;nt++)me(k[nt]);me(16);for(var pt=0;pt<16;pt++)me($[pt+1]);for(var Gt=0;Gt<=161;Gt++)me(S[Gt]);me(1);for(var Mt=0;Mt<16;Mt++)me(R[Mt+1]);for(var cn=0;cn<=11;cn++)me(F[cn]);me(17);for(var nn=0;nn<16;nn++)me(oe[nn+1]);for(var bt=0;bt<=161;bt++)me(be[bt])})(),je(65498),je(12),me(3),me(1),me(0),me(2),me(17),me(3),me(17),me(0),me(63),me(0);var ie=0,fe=0,ge=0;L=0,j=7,this.encode.displayName="_encode_";for(var _e,Le,ke,Be,Ze,ot,st,dt,se,rt=q.data,Kt=q.width,St=q.height,pe=4*Kt,Ue=0;Ue<St;){for(_e=0;_e<pe;){for(Ze=pe*Ue+_e,st=-1,dt=0,se=0;se<64;se++)ot=Ze+(dt=se>>3)*pe+(st=4*(7&se)),Ue+dt>=St&&(ot-=pe*(Ue+1+dt-St)),_e+st>=pe&&(ot-=_e+st-pe+4),Le=rt[ot++],ke=rt[ot++],Be=rt[ot++],U[se]=(ne[Le]+ne[ke+256|0]+ne[Be+512|0]>>16)-128,z[se]=(ne[Le+768|0]+ne[ke+1024|0]+ne[Be+1280|0]>>16)-128,B[se]=(ne[Le+1280|0]+ne[ke+1536|0]+ne[Be+1792|0]>>16)-128;ie=Fe(U,f,ie,e,r),fe=Fe(z,p,fe,t,i),ge=Fe(B,p,ge,t,i),_e+=32}Ue+=8}if(j>=0){var Qe=[];Qe[1]=j+1,Qe[0]=(1<<j+1)-1,ae(Qe)}return je(65497),new Uint8Array(I)},n=n||50,(function(){for(var q=String.fromCharCode,X=0;X<256;X++)re[X]=q(X)})(),e=Q(D,k),t=Q(R,F),r=Q($,S),i=Q(oe,be),(function(){for(var q=1,X=2,ie=1;ie<=15;ie++){for(var fe=q;fe<X;fe++)_[32767+fe]=ie,v[32767+fe]=[],v[32767+fe][1]=ie,v[32767+fe][0]=fe;for(var ge=-(X-1);ge<=-q;ge++)_[32767+ge]=ie,v[32767+ge]=[],v[32767+ge][1]=ie,v[32767+ge][0]=X-1+ge;q<<=1,X<<=1}})(),(function(){for(var q=0;q<256;q++)ne[q]=19595*q,ne[q+256|0]=38470*q,ne[q+512|0]=7471*q+32768,ne[q+768|0]=-11059*q,ne[q+1024|0]=-21709*q,ne[q+1280|0]=32768*q+8421375,ne[q+1536|0]=-27439*q,ne[q+1792|0]=-5329*q})(),J(n)}function ko(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function HN(n){function e(k){if(!k)throw Error("assert :P")}function t(k,$,S){for(var R=0;4>R;R++)if(k[$+R]!=S.charCodeAt(R))return!0;return!1}function r(k,$,S,R,F){for(var oe=0;oe<F;oe++)k[$+oe]=S[R+oe]}function i(k,$,S,R){for(var F=0;F<R;F++)k[$+F]=S}function a(k){return new Int32Array(k)}function c(k,$){for(var S=[],R=0;R<k;R++)S.push(new $);return S}function d(k,$){var S=[];return(function R(F,oe,be){for(var Q=be[oe],ae=0;ae<Q&&(F.push(be.length>oe+1?[]:new $),!(be.length<oe+1));ae++)R(F[ae],oe+1,be)})(S,0,k),S}var h=function(){var k=this;function $(g,w){for(var E=1<<w-1>>>0;g&E;)E>>>=1;return E?(g&E-1)+E:g}function S(g,w,E,P,G){e(!(P%E));do g[w+(P-=E)]=G;while(0<P)}function R(g,w,E,P,G){if(e(2328>=G),512>=G)var W=a(512);else if((W=a(G))==null)return 0;return(function(Y,Z,te,ue,ye,Ie){var le,Ne,Te=Z,Ve=1<<te,Ce=a(16),qe=a(16);for(e(ye!=0),e(ue!=null),e(Y!=null),e(0<te),Ne=0;Ne<ye;++Ne){if(15<ue[Ne])return 0;++Ce[ue[Ne]]}if(Ce[0]==ye)return 0;for(qe[1]=0,le=1;15>le;++le){if(Ce[le]>1<<le)return 0;qe[le+1]=qe[le]+Ce[le]}for(Ne=0;Ne<ye;++Ne)le=ue[Ne],0<ue[Ne]&&(Ie[qe[le]++]=Ne);if(qe[15]==1)return(ue=new F).g=0,ue.value=Ie[0],S(Y,Te,1,Ve,ue),Ve;var $e,et=-1,Ke=Ve-1,vt=0,ct=1,Jt=1,mt=1<<te;for(Ne=0,le=1,ye=2;le<=te;++le,ye<<=1){if(ct+=Jt<<=1,0>(Jt-=Ce[le]))return 0;for(;0<Ce[le];--Ce[le])(ue=new F).g=le,ue.value=Ie[Ne++],S(Y,Te+vt,ye,mt,ue),vt=$(vt,le)}for(le=te+1,ye=2;15>=le;++le,ye<<=1){if(ct+=Jt<<=1,0>(Jt-=Ce[le]))return 0;for(;0<Ce[le];--Ce[le]){if(ue=new F,(vt&Ke)!=et){for(Te+=mt,$e=1<<(et=le)-te;15>et&&!(0>=($e-=Ce[et]));)++et,$e<<=1;Ve+=mt=1<<($e=et-te),Y[Z+(et=vt&Ke)].g=$e+te,Y[Z+et].value=Te-Z-et}ue.g=le-te,ue.value=Ie[Ne++],S(Y,Te+(vt>>te),ye,mt,ue),vt=$(vt,le)}}return ct!=2*qe[15]-1?0:Ve})(g,w,E,P,G,W)}function F(){this.value=this.g=0}function oe(){this.value=this.g=0}function be(){this.G=c(5,F),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Xo,oe)}function Q(g,w,E,P){e(g!=null),e(w!=null),e(2147483648>P),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=w,g.pa=E,g.Jd=w,g.Yc=E+P,g.Zc=4<=P?E+P-4+1:E,Le(g)}function ae(g,w){for(var E=0;0<w--;)E|=Be(g,128)<<w;return E}function me(g,w){var E=ae(g,w);return ke(g)?-E:E}function je(g,w,E,P){var G,W=0;for(e(g!=null),e(w!=null),e(4294967288>P),g.Sb=P,g.Ra=0,g.u=0,g.h=0,4<P&&(P=4),G=0;G<P;++G)W+=w[E+G]<<8*G;g.Ra=W,g.bb=P,g.oa=w,g.pa=E}function Fe(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<Ya-8>>>0,++g.bb,g.u-=8;fe(g)&&(g.h=1,g.u=0)}function J(g,w){if(e(0<=w),!g.h&&w<=cs){var E=ie(g)&As[w];return g.u+=w,Fe(g),E}return g.h=1,g.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function X(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ie(g){return g.Ra>>>(g.u&Ya-1)>>>0}function fe(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>Ya}function ge(g,w){g.u=w,g.h=fe(g)}function _e(g){g.u>=Ka&&(e(g.u>=Ka),Fe(g))}function Le(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function ke(g){return ae(g,1)}function Be(g,w){var E=g.Ca;0>g.b&&Le(g);var P=g.b,G=E*w>>>8,W=(g.I>>>P>G)+0;for(W?(E-=G,g.I-=G+1<<P>>>0):E=G+1,P=E,G=0;256<=P;)G+=8,P>>=8;return P=7^G+bo[P],g.b-=P,g.Ca=(E<<P)-1,W}function Ze(g,w,E){g[w+0]=E>>24&255,g[w+1]=E>>16&255,g[w+2]=E>>8&255,g[w+3]=255&E}function ot(g,w){return g[w+0]|g[w+1]<<8}function st(g,w){return ot(g,w)|g[w+2]<<16}function dt(g,w){return ot(g,w)|ot(g,w+2)<<16}function se(g,w){var E=1<<w;return e(g!=null),e(0<w),g.X=a(E),g.X==null?0:(g.Mb=32-w,g.Xa=w,1)}function rt(g,w){e(g!=null),e(w!=null),e(g.Xa==w.Xa),r(w.X,0,g.X,0,1<<w.Xa)}function Kt(){this.X=[],this.Xa=this.Mb=0}function St(g,w,E,P){e(E!=null),e(P!=null);var G=E[0],W=P[0];return G==0&&(G=(g*W+w/2)/w),W==0&&(W=(w*G+g/2)/g),0>=G||0>=W?0:(E[0]=G,P[0]=W,1)}function pe(g,w){return g+(1<<w)-1>>>w}function Ue(g,w){return((4278255360&g)+(4278255360&w)>>>0&4278255360)+((16711935&g)+(16711935&w)>>>0&16711935)>>>0}function Qe(g,w){k[w]=function(E,P,G,W,Y,Z,te){var ue;for(ue=0;ue<Y;++ue){var ye=k[g](Z[te+ue-1],G,W+ue);Z[te+ue]=Ue(E[P+ue],ye)}}}function at(){this.ud=this.hd=this.jd=0}function nt(g,w){return((4278124286&(g^w))>>>1)+(g&w)>>>0}function pt(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Gt(g,w){return pt(g+(g-w+.5>>1))}function Mt(g,w,E){return Math.abs(w-E)-Math.abs(g-E)}function cn(g,w,E,P,G,W,Y){for(P=W[Y-1],E=0;E<G;++E)W[Y+E]=P=Ue(g[w+E],P)}function nn(g,w,E,P,G){var W;for(W=0;W<E;++W){var Y=g[w+W],Z=Y>>8&255,te=16711935&(te=(te=16711935&Y)+((Z<<16)+Z));P[G+W]=(4278255360&Y)+te>>>0}}function bt(g,w){w.jd=255&g,w.hd=g>>8&255,w.ud=g>>16&255}function Xt(g,w,E,P,G,W){var Y;for(Y=0;Y<P;++Y){var Z=w[E+Y],te=Z>>>8,ue=Z,ye=255&(ye=(ye=Z>>>16)+((g.jd<<24>>24)*(te<<24>>24)>>>5));ue=255&(ue=(ue+=(g.hd<<24>>24)*(te<<24>>24)>>>5)+((g.ud<<24>>24)*(ye<<24>>24)>>>5)),G[W+Y]=(4278255360&Z)+(ye<<16)+ue}}function _t(g,w,E,P,G){k[w]=function(W,Y,Z,te,ue,ye,Ie,le,Ne){for(te=Ie;te<le;++te)for(Ie=0;Ie<Ne;++Ie)ue[ye++]=G(Z[P(W[Y++])])},k[g]=function(W,Y,Z,te,ue,ye,Ie){var le=8>>W.b,Ne=W.Ea,Te=W.K[0],Ve=W.w;if(8>le)for(W=(1<<W.b)-1,Ve=(1<<le)-1;Y<Z;++Y){var Ce,qe=0;for(Ce=0;Ce<Ne;++Ce)Ce&W||(qe=P(te[ue++])),ye[Ie++]=G(Te[qe&Ve]),qe>>=le}else k["VP8LMapColor"+E](te,ue,Te,Ve,ye,Ie,Y,Z,Ne)}}function br(g,w,E,P,G){for(E=w+E;w<E;){var W=g[w++];P[G++]=W>>16&255,P[G++]=W>>8&255,P[G++]=255&W}}function rn(g,w,E,P,G){for(E=w+E;w<E;){var W=g[w++];P[G++]=W>>16&255,P[G++]=W>>8&255,P[G++]=255&W,P[G++]=W>>24&255}}function Lt(g,w,E,P,G){for(E=w+E;w<E;){var W=(Y=g[w++])>>16&240|Y>>12&15,Y=240&Y|Y>>28&15;P[G++]=W,P[G++]=Y}}function zt(g,w,E,P,G){for(E=w+E;w<E;){var W=(Y=g[w++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;P[G++]=W,P[G++]=Y}}function en(g,w,E,P,G){for(E=w+E;w<E;){var W=g[w++];P[G++]=255&W,P[G++]=W>>8&255,P[G++]=W>>16&255}}function Tt(g,w,E,P,G,W){if(W==0)for(E=w+E;w<E;)Ze(P,((W=g[w++])[0]>>24|W[1]>>8&65280|W[2]<<8&16711680|W[3]<<24)>>>0),G+=32;else r(P,G,g,w,E)}function Dn(g,w){k[w][0]=k[g+"0"],k[w][1]=k[g+"1"],k[w][2]=k[g+"2"],k[w][3]=k[g+"3"],k[w][4]=k[g+"4"],k[w][5]=k[g+"5"],k[w][6]=k[g+"6"],k[w][7]=k[g+"7"],k[w][8]=k[g+"8"],k[w][9]=k[g+"9"],k[w][10]=k[g+"10"],k[w][11]=k[g+"11"],k[w][12]=k[g+"12"],k[w][13]=k[g+"13"],k[w][14]=k[g+"0"],k[w][15]=k[g+"0"]}function Vt(g){return g==Fu||g==_d||g==Lc||g==Nd}function Bt(){this.eb=[],this.size=this.A=this.fb=0}function qn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function jt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Bt,this.f.kb=new qn,this.sd=null}function Nt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function un(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ni(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function hi(g,w){var E=g.T,P=w.ba.f.RGBA,G=P.eb,W=P.fb+g.ka*P.A,Y=Ri[w.ba.S],Z=g.y,te=g.O,ue=g.f,ye=g.N,Ie=g.ea,le=g.W,Ne=w.cc,Te=w.dc,Ve=w.Mc,Ce=w.Nc,qe=g.ka,$e=g.ka+g.T,et=g.U,Ke=et+1>>1;for(qe==0?Y(Z,te,null,null,ue,ye,Ie,le,ue,ye,Ie,le,G,W,null,null,et):(Y(w.ec,w.fc,Z,te,Ne,Te,Ve,Ce,ue,ye,Ie,le,G,W-P.A,G,W,et),++E);qe+2<$e;qe+=2)Ne=ue,Te=ye,Ve=Ie,Ce=le,ye+=g.Rc,le+=g.Rc,W+=2*P.A,Y(Z,(te+=2*g.fa)-g.fa,Z,te,Ne,Te,Ve,Ce,ue,ye,Ie,le,G,W-P.A,G,W,et);return te+=g.fa,g.j+$e<g.o?(r(w.ec,w.fc,Z,te,et),r(w.cc,w.dc,ue,ye,Ke),r(w.Mc,w.Nc,Ie,le,Ke),E--):1&$e||Y(Z,te,null,null,ue,ye,Ie,le,ue,ye,Ie,le,G,W+P.A,null,null,et),E}function Ys(g,w,E){var P=g.F,G=[g.J];if(P!=null){var W=g.U,Y=w.ba.S,Z=Y==Ou||Y==Lc;w=w.ba.f.RGBA;var te=[0],ue=g.ka;te[0]=g.T,g.Kb&&(ue==0?--te[0]:(--ue,G[0]-=g.width),g.j+g.ka+g.T==g.o&&(te[0]=g.o-g.j-ue));var ye=w.eb;ue=w.fb+ue*w.A,g=ku(P,G[0],g.width,W,te,ye,ue+(Z?0:3),w.A),e(E==te),g&&Vt(Y)&&Vl(ye,ue,Z,W,te,w.A)}return 0}function ni(g){var w=g.ma,E=w.ba.S,P=11>E,G=E==Wi||E==na||E==Ou||E==Ic||E==12||Vt(E);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!yo(w.Oa,g,G?11:12))return 0;if(G&&Vt(E)&&Qt(),g.da)alert("todo:use_scaling");else{if(P){if(w.Ib=Ni,g.Kb){if(E=g.U+1>>1,w.memory=a(g.U+2*E),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+g.U,w.Mc=w.cc,w.Nc=w.dc+E,w.Ib=hi,Qt()}}else alert("todo:EmitYUV");G&&(w.Jb=Ys,P&&De())}if(P&&!il){for(g=0;256>g;++g)ki[g]=89858*(g-128)+Pc>>la,N0[g]=-22014*(g-128)+Pc,Dm[g]=-45773*(g-128),Td[g]=113618*(g-128)+Pc>>la;for(g=Hl;g<rl;++g)w=76283*(g-16)+Pc>>la,A0[g-Hl]=rs(w,255),S0[g-Hl]=rs(w+8>>4,15);il=1}return 1}function Ct(g){var w=g.ma,E=g.U,P=g.T;return e(!(1&g.ka)),0>=E||0>=P?0:(E=w.Ib(g,w),w.Jb!=null&&w.Jb(g,w,E),w.Dc+=E,1)}function ya(g){g.ma.memory=null}function es(g,w,E,P){return J(g,8)!=47?0:(w[0]=J(g,14)+1,E[0]=J(g,14)+1,P[0]=J(g,1),J(g,3)!=0?0:!g.h)}function Fi(g,w){if(4>g)return g+1;var E=g-2>>1;return(2+(1&g)<<E)+J(w,E)+1}function qi(g,w){return 120<w?w-120:1<=(E=((E=ia[w-1])>>4)*g+(8-(15&E)))?E:1;var E}function Kn(g,w,E){var P=ie(E),G=g[w+=255&P].g-8;return 0<G&&(ge(E,E.u+8),P=ie(E),w+=g[w].value,w+=P&(1<<G)-1),ge(E,E.u+g[w].g),g[w].value}function ir(g,w,E){return E.g+=g.g,E.value+=g.value<<w>>>0,e(8>=E.g),g.g}function $r(g,w,E){var P=g.xc;return e((w=P==0?0:g.vc[g.md*(E>>P)+(w>>P)])<g.Wb),g.Ya[w]}function Ai(g,w,E,P){var G=g.ab,W=g.c*w,Y=g.C;w=Y+w;var Z=E,te=P;for(P=g.Ta,E=g.Ua;0<G--;){var ue=g.gc[G],ye=Y,Ie=w,le=Z,Ne=te,Te=(te=P,Z=E,ue.Ea);switch(e(ye<Ie),e(Ie<=ue.nc),ue.hc){case 2:Fr(le,Ne,(Ie-ye)*Te,te,Z);break;case 0:var Ve=ye,Ce=Ie,qe=te,$e=Z,et=(mt=ue).Ea;Ve==0&&(jc(le,Ne,null,null,1,qe,$e),cn(le,Ne+1,0,0,et-1,qe,$e+1),Ne+=et,$e+=et,++Ve);for(var Ke=1<<mt.b,vt=Ke-1,ct=pe(et,mt.b),Jt=mt.K,mt=mt.w+(Ve>>mt.b)*ct;Ve<Ce;){var gn=Jt,xr=mt,sn=1;for(Ec(le,Ne,qe,$e-et,1,qe,$e);sn<et;){var ut=(sn&~vt)+Ke;ut>et&&(ut=et),(0,wo[gn[xr++]>>8&15])(le,Ne+ +sn,qe,$e+sn-et,ut-sn,qe,$e+sn),sn=ut}Ne+=et,$e+=et,++Ve&vt||(mt+=ct)}Ie!=ue.nc&&r(te,Z-Te,te,Z+(Ie-ye-1)*Te,Te);break;case 1:for(Te=le,Ce=Ne,et=(le=ue.Ea)-($e=le&~(qe=(Ne=1<<ue.b)-1)),Ve=pe(le,ue.b),Ke=ue.K,ue=ue.w+(ye>>ue.b)*Ve;ye<Ie;){for(vt=Ke,ct=ue,Jt=new at,mt=Ce+$e,gn=Ce+le;Ce<mt;)bt(vt[ct++],Jt),Tc(Jt,Te,Ce,Ne,te,Z),Ce+=Ne,Z+=Ne;Ce<gn&&(bt(vt[ct++],Jt),Tc(Jt,Te,Ce,et,te,Z),Ce+=et,Z+=et),++ye&qe||(ue+=Ve)}break;case 3:if(le==te&&Ne==Z&&0<ue.b){for(Ce=te,le=Te=Z+(Ie-ye)*Te-($e=(Ie-ye)*pe(ue.Ea,ue.b)),Ne=te,qe=Z,Ve=[],$e=(et=$e)-1;0<=$e;--$e)Ve[$e]=Ne[qe+$e];for($e=et-1;0<=$e;--$e)Ce[le+$e]=Ve[$e];xd(ue,ye,Ie,te,Te,te,Z)}else xd(ue,ye,Ie,le,Ne,te,Z)}Z=P,te=E}te!=E&&r(P,E,Z,te,W)}function fi(g,w){var E=g.V,P=g.Ba+g.c*g.C,G=w-g.C;if(e(w<=g.l.o),e(16>=G),0<G){var W=g.l,Y=g.Ta,Z=g.Ua,te=W.width;if(Ai(g,G,E,P),G=Z=[Z],e((E=g.C)<(P=w)),e(W.v<W.va),P>W.o&&(P=W.o),E<W.j){var ue=W.j-E;E=W.j,G[0]+=ue*te}if(E>=P?E=0:(G[0]+=4*W.v,W.ka=E-W.j,W.U=W.va-W.v,W.T=P-E,E=1),E){if(Z=Z[0],11>(E=g.ca).S){var ye=E.f.RGBA,Ie=(P=E.S,G=W.U,W=W.T,ue=ye.eb,ye.A),le=W;for(ye=ye.fb+g.Ma*ye.A;0<le--;){var Ne=Y,Te=Z,Ve=G,Ce=ue,qe=ye;switch(P){case bd:Cc(Ne,Te,Ve,Ce,qe);break;case Wi:_o(Ne,Te,Ve,Ce,qe);break;case Fu:_o(Ne,Te,Ve,Ce,qe),Vl(Ce,qe,0,Ve,1,0);break;case wd:Fl(Ne,Te,Ve,Ce,qe);break;case na:Tt(Ne,Te,Ve,Ce,qe,1);break;case _d:Tt(Ne,Te,Ve,Ce,qe,1),Vl(Ce,qe,0,Ve,1,0);break;case Ou:Tt(Ne,Te,Ve,Ce,qe,0);break;case Lc:Tt(Ne,Te,Ve,Ce,qe,0),Vl(Ce,qe,1,Ve,1,0);break;case Ic:No(Ne,Te,Ve,Ce,qe);break;case Nd:No(Ne,Te,Ve,Ce,qe),ta(Ce,qe,Ve,1,0);break;case Jo:Ja(Ne,Te,Ve,Ce,qe);break;default:e(0)}Z+=te,ye+=Ie}g.Ma+=W}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=E.height)}}g.C=w,e(g.C<=g.i)}function Vn(g){var w;if(0<g.ua)return 0;for(w=0;w<g.Wb;++w){var E=g.Ya[w].G,P=g.Ya[w].H;if(0<E[1][P[1]+0].g||0<E[2][P[2]+0].g||0<E[3][P[3]+0].g)return 0}return 1}function Xn(g,w,E,P,G,W){if(g.Z!=0){var Y=g.qd,Z=g.rd;for(e(jo[g.Z]!=null);w<E;++w)jo[g.Z](Y,Z,P,G,P,G,W),Y=P,Z=G,G+=W;g.qd=Y,g.rd=Z}}function Gr(g,w){var E=g.l.ma,P=E.Z==0||E.Z==1?g.l.j:g.C;if(P=g.C<P?P:g.C,e(w<=g.l.o),w>P){var G=g.l.width,W=E.ca,Y=E.tb+G*P,Z=g.V,te=g.Ba+g.c*P,ue=g.gc;e(g.ab==1),e(ue[0].hc==3),Xa(ue[0],P,w,Z,te,W,Y),Xn(E,P,w,W,Y,G)}g.C=g.Ma=w}function Vi(g,w,E,P,G,W,Y){var Z=g.$/P,te=g.$%P,ue=g.m,ye=g.s,Ie=E+g.$,le=Ie;G=E+P*G;var Ne=E+P*W,Te=280+ye.ua,Ve=g.Pb?Z:16777216,Ce=0<ye.ua?ye.Wa:null,qe=ye.wc,$e=Ie<Ne?$r(ye,te,Z):null;e(g.C<W),e(Ne<=G);var et=!1;e:for(;;){for(;et||Ie<Ne;){var Ke=0;if(Z>=Ve){var vt=Ie-E;e((Ve=g).Pb),Ve.wd=Ve.m,Ve.xd=vt,0<Ve.s.ua&&rt(Ve.s.Wa,Ve.s.vb),Ve=Z+Zo}if(te&qe||($e=$r(ye,te,Z)),e($e!=null),$e.Qb&&(w[Ie]=$e.qb,et=!0),!et)if(_e(ue),$e.jc){Ke=ue,vt=w;var ct=Ie,Jt=$e.pd[ie(Ke)&Xo-1];e($e.jc),256>Jt.g?(ge(Ke,Ke.u+Jt.g),vt[ct]=Jt.value,Ke=0):(ge(Ke,Ke.u+Jt.g-256),e(256<=Jt.value),Ke=Jt.value),Ke==0&&(et=!0)}else Ke=Kn($e.G[0],$e.H[0],ue);if(ue.h)break;if(et||256>Ke){if(!et)if($e.nd)w[Ie]=($e.qb|Ke<<8)>>>0;else{if(_e(ue),et=Kn($e.G[1],$e.H[1],ue),_e(ue),vt=Kn($e.G[2],$e.H[2],ue),ct=Kn($e.G[3],$e.H[3],ue),ue.h)break;w[Ie]=(ct<<24|et<<16|Ke<<8|vt)>>>0}if(et=!1,++Ie,++te>=P&&(te=0,++Z,Y!=null&&Z<=W&&!(Z%16)&&Y(g,Z),Ce!=null))for(;le<Ie;)Ke=w[le++],Ce.X[(506832829*Ke&4294967295)>>>Ce.Mb]=Ke}else if(280>Ke){if(Ke=Fi(Ke-256,ue),vt=Kn($e.G[4],$e.H[4],ue),_e(ue),vt=qi(P,vt=Fi(vt,ue)),ue.h)break;if(Ie-E<vt||G-Ie<Ke)break e;for(ct=0;ct<Ke;++ct)w[Ie+ct]=w[Ie+ct-vt];for(Ie+=Ke,te+=Ke;te>=P;)te-=P,++Z,Y!=null&&Z<=W&&!(Z%16)&&Y(g,Z);if(e(Ie<=G),te&qe&&($e=$r(ye,te,Z)),Ce!=null)for(;le<Ie;)Ke=w[le++],Ce.X[(506832829*Ke&4294967295)>>>Ce.Mb]=Ke}else{if(!(Ke<Te))break e;for(et=Ke-280,e(Ce!=null);le<Ie;)Ke=w[le++],Ce.X[(506832829*Ke&4294967295)>>>Ce.Mb]=Ke;Ke=Ie,e(!(et>>>(vt=Ce).Xa)),w[Ke]=vt.X[et],et=!0}et||e(ue.h==fe(ue))}if(g.Pb&&ue.h&&Ie<G)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&rt(g.s.vb,g.s.Wa);else{if(ue.h)break e;Y?.(g,Z>W?W:Z),g.a=0,g.$=Ie-E}return 1}return g.a=3,0}function ys(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var w=g.Wa;w!=null&&(w.X=null),g.vb=null,e(g!=null)}function Va(){var g=new Ot;return g==null?null:(g.a=0,g.xb=Gh,Dn("Predictor","VP8LPredictors"),Dn("Predictor","VP8LPredictors_C"),Dn("PredictorAdd","VP8LPredictorsAdd"),Dn("PredictorAdd","VP8LPredictorsAdd_C"),Fr=nn,Tc=Xt,Cc=br,_o=rn,No=Lt,Ja=zt,Fl=en,k.VP8LMapColor32b=Qa,k.VP8LMapColor8b=Ci,g)}function Ps(g,w,E,P,G){var W=1,Y=[g],Z=[w],te=P.m,ue=P.s,ye=null,Ie=0;e:for(;;){if(E)for(;W&&J(te,1);){var le=Y,Ne=Z,Te=P,Ve=1,Ce=Te.m,qe=Te.gc[Te.ab],$e=J(Ce,2);if(Te.Oc&1<<$e)W=0;else{switch(Te.Oc|=1<<$e,qe.hc=$e,qe.Ea=le[0],qe.nc=Ne[0],qe.K=[null],++Te.ab,e(4>=Te.ab),$e){case 0:case 1:qe.b=J(Ce,3)+2,Ve=Ps(pe(qe.Ea,qe.b),pe(qe.nc,qe.b),0,Te,qe.K),qe.K=qe.K[0];break;case 3:var et,Ke=J(Ce,8)+1,vt=16<Ke?0:4<Ke?1:2<Ke?2:3;if(le[0]=pe(qe.Ea,vt),qe.b=vt,et=Ve=Ps(Ke,1,0,Te,qe.K)){var ct,Jt=Ke,mt=qe,gn=1<<(8>>mt.b),xr=a(gn);if(xr==null)et=0;else{var sn=mt.K[0],ut=mt.w;for(xr[0]=mt.K[0][0],ct=1;ct<1*Jt;++ct)xr[ct]=Ue(sn[ut+ct],xr[ct-1]);for(;ct<4*gn;++ct)xr[ct]=0;mt.K[0]=null,mt.K[0]=xr,et=1}}Ve=et;break;case 2:break;default:e(0)}W=Ve}}if(Y=Y[0],Z=Z[0],W&&J(te,1)&&!(W=1<=(Ie=J(te,4))&&11>=Ie)){P.a=3;break e}var it;if(it=W)t:{var _r,Ht,ln,Gn=P,si=Y,Pi=Z,lr=Ie,Yr=E,Yi=Gn.m,Kr=Gn.s,fn=[null],In=1,Nr=0,On=sa[lr];n:for(;;){if(Yr&&J(Yi,1)){var ai=J(Yi,3)+2,Ar=pe(si,ai),Ln=pe(Pi,ai),Br=Ar*Ln;if(!Ps(Ar,Ln,0,Gn,fn))break n;for(fn=fn[0],Kr.xc=ai,_r=0;_r<Br;++_r){var Wn=fn[_r]>>8&65535;fn[_r]=Wn,Wn>=In&&(In=Wn+1)}}if(Yi.h)break n;for(Ht=0;5>Ht;++Ht){var Qr=Ul[Ht];!Ht&&0<lr&&(Qr+=1<<lr),Nr<Qr&&(Nr=Qr)}var Xr=c(In*On,F),Zn=In,En=c(Zn,be);if(En==null)var Ki=null;else e(65536>=Zn),Ki=En;var Lr=a(Nr);if(Ki==null||Lr==null||Xr==null){Gn.a=1;break n}var kt=Xr;for(_r=ln=0;_r<In;++_r){var Ft=Ki[_r],Rn=Ft.G,Ss=Ft.H,ca=0,ds=1,Jr=0;for(Ht=0;5>Ht;++Ht){Qr=Ul[Ht],Rn[Ht]=kt,Ss[Ht]=ln,!Ht&&0<lr&&(Qr+=1<<lr);i:{var sl,al=Qr,Id=Gn,cr=Lr,Yh=kt,Kh=ln,Ld=0,Eo=Id.m,j0=J(Eo,1);if(i(cr,0,0,al),j0){var Qh=J(Eo,1)+1,Xh=J(Eo,1),Rd=J(Eo,Xh==0?1:8);cr[Rd]=1,Qh==2&&(cr[Rd=J(Eo,8)]=1);var xi=1}else{var Rr=a(19),Uu=J(Eo,4)+4;if(19<Uu){Id.a=3;var ol=0;break i}for(sl=0;sl<Uu;++sl)Rr[qu[sl]]=J(Eo,3);var Mc=void 0,$l=void 0,to=Id,kd=Rr,Oc=al,Pd=cr,Dd=0,To=to.m,Jh=8,Zh=c(128,F);r:for(;R(Zh,0,7,kd,19);){if(J(To,1)){var Mm=2+2*J(To,3);if((Mc=2+J(To,Mm))>Oc)break r}else Mc=Oc;for($l=0;$l<Oc&&Mc--;){_e(To);var ef=Zh[0+(127&ie(To))];ge(To,To.u+ef.g);var ll=ef.value;if(16>ll)Pd[$l++]=ll,ll!=0&&(Jh=ll);else{var Om=ll==16,Fm=ll-16,qm=Rc[Fm],tf=J(To,ra[Fm])+qm;if($l+tf>Oc)break r;for(var Vm=Om?Jh:0;0<tf--;)Pd[$l++]=Vm}}Dd=1;break r}Dd||(to.a=3),xi=Dd}(xi=xi&&!Eo.h)&&(Ld=R(Yh,Kh,8,cr,al)),xi&&Ld!=0?ol=Ld:(Id.a=3,ol=0)}if(ol==0)break n;if(ds&&Ad[Ht]==1&&(ds=kt[ln].g==0),ca+=kt[ln].g,ln+=ol,3>=Ht){var Gl,Md=Lr[0];for(Gl=1;Gl<Qr;++Gl)Lr[Gl]>Md&&(Md=Lr[Gl]);Jr+=Md}}if(Ft.nd=ds,Ft.Qb=0,ds&&(Ft.qb=(Rn[3][Ss[3]+0].value<<24|Rn[1][Ss[1]+0].value<<16|Rn[2][Ss[2]+0].value)>>>0,ca==0&&256>Rn[0][Ss[0]+0].value&&(Ft.Qb=1,Ft.qb+=Rn[0][Ss[0]+0].value<<8)),Ft.jc=!Ft.Qb&&6>Jr,Ft.jc){var zu,no=Ft;for(zu=0;zu<Xo;++zu){var Co=zu,Io=no.pd[Co],Od=no.G[0][no.H[0]+Co];256<=Od.value?(Io.g=Od.g+256,Io.value=Od.value):(Io.g=0,Io.value=0,Co>>=ir(Od,8,Io),Co>>=ir(no.G[1][no.H[1]+Co],16,Io),Co>>=ir(no.G[2][no.H[2]+Co],0,Io),ir(no.G[3][no.H[3]+Co],24,Io))}}}Kr.vc=fn,Kr.Wb=In,Kr.Ya=Ki,Kr.yc=Xr,it=1;break t}it=0}if(!(W=it)){P.a=3;break e}if(0<Ie){if(ue.ua=1<<Ie,!se(ue.Wa,Ie)){P.a=1,W=0;break e}}else ue.ua=0;var Fd=P,Wl=Y,Bm=Z,Fc=Fd.s,qc=Fc.xc;if(Fd.c=Wl,Fd.i=Bm,Fc.md=pe(Wl,qc),Fc.wc=qc==0?-1:(1<<qc)-1,E){P.xb=el;break e}if((ye=a(Y*Z))==null){P.a=1,W=0;break e}W=(W=Vi(P,ye,0,Y,Z,Z,null))&&!te.h;break e}return W?(G!=null?G[0]=ye:(e(ye==null),e(E)),P.$=0,E||ys(ue)):ys(ue),W}function Bi(g,w){var E=g.c*g.i,P=E+w+16*w;return e(g.c<=w),g.V=a(P),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+E+w,1)}function ba(g,w){var E=g.C,P=w-E,G=g.V,W=g.Ba+g.c*E;for(e(w<=g.l.o);0<P;){var Y=16<P?16:P,Z=g.l.ma,te=g.l.width,ue=te*Y,ye=Z.ca,Ie=Z.tb+te*E,le=g.Ta,Ne=g.Ua;Ai(g,Y,G,W),Us(le,Ne,ye,Ie,ue),Xn(Z,E,E+Y,ye,Ie,te),P-=Y,G+=Y*g.c,E+=Y}e(E==w),g.C=g.Ma=w}function ts(){this.ub=this.yd=this.td=this.Rb=0}function Si(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ns(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function bs(){this.Yb=(function(){var g=[];return(function w(E,P,G){for(var W=G[P],Y=0;Y<W&&(E.push(G.length>P+1?[]:0),!(G.length<P+1));Y++)w(E[Y],P+1,G)})(g,0,[3,11]),g})()}function wr(){this.jb=a(3),this.Wc=d([4,8],bs),this.Xc=d([4,17],bs)}function zo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Ui(){this.ld=this.La=this.dd=this.tc=0}function ws(){this.Na=this.la=0}function Ds(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ho(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ho(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ui),this.Y=0,this.ya=Array(new ho),this.aa=0,this.l=new mi}function $o(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Ll(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new ts,this.Kc=new Si,this.ed=new zo,this.Qa=new ns,this.Ic=this.$c=this.Aa=0,this.D=new Ho,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,q),this.ia=0,this.pb=c(4,Ds),this.Pa=new wr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new $o),this.Hd=0,this.rb=Array(new ws),this.sb=0,this.wa=Array(new Ui),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ho),this.L=this.aa=0,this.gd=d([4,2],Ui),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function rs(g,w){return 0>g?0:g>w?w:g}function mi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Tr(){var g=new Ll;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,zs||(zs=bn)),g}function mn(g,w,E){return g.a==0&&(g.a=w,g.sc=E,g.cb=0),0}function wa(g,w,E){return 3<=E&&g[w+0]==157&&g[w+1]==1&&g[w+2]==42}function _s(g,w){if(g==null)return 0;if(g.a=0,g.sc="OK",w==null)return mn(g,2,"null VP8Io passed to VP8GetHeaders()");var E=w.data,P=w.w,G=w.ha;if(4>G)return mn(g,7,"Truncated header.");var W=E[P+0]|E[P+1]<<8|E[P+2]<<16,Y=g.Od;if(Y.Rb=!(1&W),Y.td=W>>1&7,Y.yd=W>>4&1,Y.ub=W>>5,3<Y.td)return mn(g,3,"Incorrect keyframe parameters.");if(!Y.yd)return mn(g,4,"Frame not displayable.");P+=3,G-=3;var Z=g.Kc;if(Y.Rb){if(7>G)return mn(g,7,"cannot parse picture header");if(!wa(E,P,G))return mn(g,3,"Bad code word");Z.c=16383&(E[P+4]<<8|E[P+3]),Z.Td=E[P+4]>>6,Z.i=16383&(E[P+6]<<8|E[P+5]),Z.Ud=E[P+6]>>6,P+=7,G-=7,g.za=Z.c+15>>4,g.Ub=Z.i+15>>4,w.width=Z.c,w.height=Z.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,i((W=g.Pa).jb,0,255,W.jb.length),e((W=g.Qa)!=null),W.Cb=0,W.Bb=0,W.Fb=1,i(W.Zb,0,0,W.Zb.length),i(W.Lb,0,0,W.Lb)}if(Y.ub>G)return mn(g,7,"bad partition length");Q(W=g.m,E,P,Y.ub),P+=Y.ub,G-=Y.ub,Y.Rb&&(Z.Ld=ke(W),Z.Kd=ke(W)),Z=g.Qa;var te,ue=g.Pa;if(e(W!=null),e(Z!=null),Z.Cb=ke(W),Z.Cb){if(Z.Bb=ke(W),ke(W)){for(Z.Fb=ke(W),te=0;4>te;++te)Z.Zb[te]=ke(W)?me(W,7):0;for(te=0;4>te;++te)Z.Lb[te]=ke(W)?me(W,6):0}if(Z.Bb)for(te=0;3>te;++te)ue.jb[te]=ke(W)?ae(W,8):255}else Z.Bb=0;if(W.Ka)return mn(g,3,"cannot parse segment header");if((Z=g.ed).zd=ke(W),Z.Tb=ae(W,6),Z.wb=ae(W,3),Z.Pc=ke(W),Z.Pc&&ke(W)){for(ue=0;4>ue;++ue)ke(W)&&(Z.vd[ue]=me(W,6));for(ue=0;4>ue;++ue)ke(W)&&(Z.od[ue]=me(W,6))}if(g.L=Z.Tb==0?0:Z.zd?1:2,W.Ka)return mn(g,3,"cannot parse filter header");var ye=G;if(G=te=P,P=te+ye,Z=ye,g.Xb=(1<<ae(g.m,2))-1,ye<3*(ue=g.Xb))E=7;else{for(te+=3*ue,Z-=3*ue,ye=0;ye<ue;++ye){var Ie=E[G+0]|E[G+1]<<8|E[G+2]<<16;Ie>Z&&(Ie=Z),Q(g.Jc[+ye],E,te,Ie),te+=Ie,Z-=Ie,G+=3}Q(g.Jc[+ue],E,te,Z),E=te<P?0:5}if(E!=0)return mn(g,E,"cannot parse partitions");for(E=ae(te=g.m,7),G=ke(te)?me(te,4):0,P=ke(te)?me(te,4):0,Z=ke(te)?me(te,4):0,ue=ke(te)?me(te,4):0,te=ke(te)?me(te,4):0,ye=g.Qa,Ie=0;4>Ie;++Ie){if(ye.Cb){var le=ye.Zb[Ie];ye.Fb||(le+=E)}else{if(0<Ie){g.pb[Ie]=g.pb[0];continue}le=E}var Ne=g.pb[Ie];Ne.Sc[0]=aa[rs(le+G,127)],Ne.Sc[1]=oa[rs(le+0,127)],Ne.Eb[0]=2*aa[rs(le+P,127)],Ne.Eb[1]=101581*oa[rs(le+Z,127)]>>16,8>Ne.Eb[1]&&(Ne.Eb[1]=8),Ne.Qc[0]=aa[rs(le+ue,117)],Ne.Qc[1]=oa[rs(le+te,127)],Ne.lc=le+te}if(!Y.Rb)return mn(g,4,"Not a key frame.");for(ke(W),Y=g.Pa,E=0;4>E;++E){for(G=0;8>G;++G)for(P=0;3>P;++P)for(Z=0;11>Z;++Z)ue=Be(W,gr[E][G][P][Z])?ae(W,8):Pm[E][G][P][Z],Y.Wc[E][G].Yb[P][Z]=ue;for(G=0;17>G;++G)Y.Xc[E][G]=Y.Wc[E][xn[G]]}return g.kc=ke(W),g.kc&&(g.Bd=ae(W,8)),g.cb=1}function bn(g,w,E,P,G,W,Y){var Z=w[G].Yb[E];for(E=0;16>G;++G){if(!Be(g,Z[E+0]))return G;for(;!Be(g,Z[E+1]);)if(Z=w[++G].Yb[0],E=0,G==16)return 16;var te=w[G+1].Yb;if(Be(g,Z[E+2])){var ue=g,ye=0;if(Be(ue,(le=Z)[(Ie=E)+3]))if(Be(ue,le[Ie+6])){for(Z=0,Ie=2*(ye=Be(ue,le[Ie+8]))+(le=Be(ue,le[Ie+9+ye])),ye=0,le=km[Ie];le[Z];++Z)ye+=ye+Be(ue,le[Z]);ye+=3+(8<<Ie)}else Be(ue,le[Ie+7])?(ye=7+2*Be(ue,165),ye+=Be(ue,145)):ye=5+Be(ue,159);else ye=Be(ue,le[Ie+4])?3+Be(ue,le[Ie+5]):2;Z=te[2]}else ye=1,Z=te[1];te=Y+$h[G],0>(ue=g).b&&Le(ue);var Ie,le=ue.b,Ne=(Ie=ue.Ca>>1)-(ue.I>>le)>>31;--ue.b,ue.Ca+=Ne,ue.Ca|=1,ue.I-=(Ie+1&Ne)<<le,W[te]=((ye^Ne)-Ne)*P[(0<G)+0]}return 16}function Ba(g){var w=g.rb[g.sb-1];w.la=0,w.Na=0,i(g.zc,0,0,g.zc.length),g.ja=0}function Mr(g,w,E,P,G){G=g[w+E+32*P]+(G>>3),g[w+E+32*P]=-256&G?0>G?0:255:G}function pr(g,w,E,P,G,W){Mr(g,w,0,E,P+G),Mr(g,w,1,E,P+W),Mr(g,w,2,E,P-W),Mr(g,w,3,E,P-G)}function Cr(g){return(20091*g>>16)+g}function fo(g,w,E,P){var G,W=0,Y=a(16);for(G=0;4>G;++G){var Z=g[w+0]+g[w+8],te=g[w+0]-g[w+8],ue=(35468*g[w+4]>>16)-Cr(g[w+12]),ye=Cr(g[w+4])+(35468*g[w+12]>>16);Y[W+0]=Z+ye,Y[W+1]=te+ue,Y[W+2]=te-ue,Y[W+3]=Z-ye,W+=4,w++}for(G=W=0;4>G;++G)Z=(g=Y[W+0]+4)+Y[W+8],te=g-Y[W+8],ue=(35468*Y[W+4]>>16)-Cr(Y[W+12]),Mr(E,P,0,0,Z+(ye=Cr(Y[W+4])+(35468*Y[W+12]>>16))),Mr(E,P,1,0,te+ue),Mr(E,P,2,0,te-ue),Mr(E,P,3,0,Z-ye),W++,P+=32}function Ac(g,w,E,P){var G=g[w+0]+4,W=35468*g[w+4]>>16,Y=Cr(g[w+4]),Z=35468*g[w+1]>>16;pr(E,P,0,G+Y,g=Cr(g[w+1]),Z),pr(E,P,1,G+W,g,Z),pr(E,P,2,G-W,g,Z),pr(E,P,3,G-Y,g,Z)}function Rl(g,w,E,P,G){fo(g,w,E,P),G&&fo(g,w+16,E,P+4)}function ji(g,w,E,P){Ao(g,w+0,E,P,1),Ao(g,w+32,E,P+128,1)}function kl(g,w,E,P){var G;for(g=g[w+0]+4,G=0;4>G;++G)for(w=0;4>w;++w)Mr(E,P,w,G,g)}function _a(g,w,E,P){g[w+0]&&Mn(g,w+0,E,P),g[w+16]&&Mn(g,w+16,E,P+4),g[w+32]&&Mn(g,w+32,E,P+128),g[w+48]&&Mn(g,w+48,E,P+128+4)}function ri(g,w,E,P){var G,W=a(16);for(G=0;4>G;++G){var Y=g[w+0+G]+g[w+12+G],Z=g[w+4+G]+g[w+8+G],te=g[w+4+G]-g[w+8+G],ue=g[w+0+G]-g[w+12+G];W[0+G]=Y+Z,W[8+G]=Y-Z,W[4+G]=ue+te,W[12+G]=ue-te}for(G=0;4>G;++G)Y=(g=W[0+4*G]+3)+W[3+4*G],Z=W[1+4*G]+W[2+4*G],te=W[1+4*G]-W[2+4*G],ue=g-W[3+4*G],E[P+0]=Y+Z>>3,E[P+16]=ue+te>>3,E[P+32]=Y-Z>>3,E[P+48]=ue-te>>3,P+=64}function Ua(g,w,E){var P,G=w-32,W=Gi,Y=255-g[G-1];for(P=0;P<E;++P){var Z,te=W,ue=Y+g[w-1];for(Z=0;Z<E;++Z)g[w+Z]=te[ue+g[G+Z]];w+=32}}function Pl(g,w){Ua(g,w,4)}function Dl(g,w){Ua(g,w,8)}function Go(g,w){Ua(g,w,16)}function Wo(g,w){var E;for(E=0;16>E;++E)r(g,w+32*E,g,w-32,16)}function Na(g,w){var E;for(E=16;0<E;--E)i(g,w,g[w-1],16),w+=32}function zi(g,w,E){var P;for(P=0;16>P;++P)i(w,E+32*P,g,16)}function Ms(g,w){var E,P=16;for(E=0;16>E;++E)P+=g[w-1+32*E]+g[w+E-32];zi(P>>5,g,w)}function Aa(g,w){var E,P=8;for(E=0;16>E;++E)P+=g[w-1+32*E];zi(P>>4,g,w)}function Hi(g,w){var E,P=8;for(E=0;16>E;++E)P+=g[w+E-32];zi(P>>4,g,w)}function za(g,w){zi(128,g,w)}function Rt(g,w,E){return g+2*w+E+2>>2}function mo(g,w){var E,P=w-32;for(P=new Uint8Array([Rt(g[P-1],g[P+0],g[P+1]),Rt(g[P+0],g[P+1],g[P+2]),Rt(g[P+1],g[P+2],g[P+3]),Rt(g[P+2],g[P+3],g[P+4])]),E=0;4>E;++E)r(g,w+32*E,P,0,P.length)}function Yo(g,w){var E=g[w-1],P=g[w-1+32],G=g[w-1+64],W=g[w-1+96];Ze(g,w+0,16843009*Rt(g[w-1-32],E,P)),Ze(g,w+32,16843009*Rt(E,P,G)),Ze(g,w+64,16843009*Rt(P,G,W)),Ze(g,w+96,16843009*Rt(G,W,W))}function Ha(g,w){var E,P=4;for(E=0;4>E;++E)P+=g[w+E-32]+g[w-1+32*E];for(P>>=3,E=0;4>E;++E)i(g,w+32*E,P,4)}function ii(g,w){var E=g[w-1+0],P=g[w-1+32],G=g[w-1+64],W=g[w-1-32],Y=g[w+0-32],Z=g[w+1-32],te=g[w+2-32],ue=g[w+3-32];g[w+0+96]=Rt(P,G,g[w-1+96]),g[w+1+96]=g[w+0+64]=Rt(E,P,G),g[w+2+96]=g[w+1+64]=g[w+0+32]=Rt(W,E,P),g[w+3+96]=g[w+2+64]=g[w+1+32]=g[w+0+0]=Rt(Y,W,E),g[w+3+64]=g[w+2+32]=g[w+1+0]=Rt(Z,Y,W),g[w+3+32]=g[w+2+0]=Rt(te,Z,Y),g[w+3+0]=Rt(ue,te,Z)}function Wr(g,w){var E=g[w+1-32],P=g[w+2-32],G=g[w+3-32],W=g[w+4-32],Y=g[w+5-32],Z=g[w+6-32],te=g[w+7-32];g[w+0+0]=Rt(g[w+0-32],E,P),g[w+1+0]=g[w+0+32]=Rt(E,P,G),g[w+2+0]=g[w+1+32]=g[w+0+64]=Rt(P,G,W),g[w+3+0]=g[w+2+32]=g[w+1+64]=g[w+0+96]=Rt(G,W,Y),g[w+3+32]=g[w+2+64]=g[w+1+96]=Rt(W,Y,Z),g[w+3+64]=g[w+2+96]=Rt(Y,Z,te),g[w+3+96]=Rt(Z,te,te)}function po(g,w){var E=g[w-1+0],P=g[w-1+32],G=g[w-1+64],W=g[w-1-32],Y=g[w+0-32],Z=g[w+1-32],te=g[w+2-32],ue=g[w+3-32];g[w+0+0]=g[w+1+64]=W+Y+1>>1,g[w+1+0]=g[w+2+64]=Y+Z+1>>1,g[w+2+0]=g[w+3+64]=Z+te+1>>1,g[w+3+0]=te+ue+1>>1,g[w+0+96]=Rt(G,P,E),g[w+0+64]=Rt(P,E,W),g[w+0+32]=g[w+1+96]=Rt(E,W,Y),g[w+1+32]=g[w+2+96]=Rt(W,Y,Z),g[w+2+32]=g[w+3+96]=Rt(Y,Z,te),g[w+3+32]=Rt(Z,te,ue)}function Bn(g,w){var E=g[w+0-32],P=g[w+1-32],G=g[w+2-32],W=g[w+3-32],Y=g[w+4-32],Z=g[w+5-32],te=g[w+6-32],ue=g[w+7-32];g[w+0+0]=E+P+1>>1,g[w+1+0]=g[w+0+64]=P+G+1>>1,g[w+2+0]=g[w+1+64]=G+W+1>>1,g[w+3+0]=g[w+2+64]=W+Y+1>>1,g[w+0+32]=Rt(E,P,G),g[w+1+32]=g[w+0+96]=Rt(P,G,W),g[w+2+32]=g[w+1+96]=Rt(G,W,Y),g[w+3+32]=g[w+2+96]=Rt(W,Y,Z),g[w+3+64]=Rt(Y,Z,te),g[w+3+96]=Rt(Z,te,ue)}function is(g,w){var E=g[w-1+0],P=g[w-1+32],G=g[w-1+64],W=g[w-1+96];g[w+0+0]=E+P+1>>1,g[w+2+0]=g[w+0+32]=P+G+1>>1,g[w+2+32]=g[w+0+64]=G+W+1>>1,g[w+1+0]=Rt(E,P,G),g[w+3+0]=g[w+1+32]=Rt(P,G,W),g[w+3+32]=g[w+1+64]=Rt(G,W,W),g[w+3+64]=g[w+2+64]=g[w+0+96]=g[w+1+96]=g[w+2+96]=g[w+3+96]=W}function go(g,w){var E=g[w-1+0],P=g[w-1+32],G=g[w-1+64],W=g[w-1+96],Y=g[w-1-32],Z=g[w+0-32],te=g[w+1-32],ue=g[w+2-32];g[w+0+0]=g[w+2+32]=E+Y+1>>1,g[w+0+32]=g[w+2+64]=P+E+1>>1,g[w+0+64]=g[w+2+96]=G+P+1>>1,g[w+0+96]=W+G+1>>1,g[w+3+0]=Rt(Z,te,ue),g[w+2+0]=Rt(Y,Z,te),g[w+1+0]=g[w+3+32]=Rt(E,Y,Z),g[w+1+32]=g[w+3+64]=Rt(P,E,Y),g[w+1+64]=g[w+3+96]=Rt(G,P,E),g[w+1+96]=Rt(W,G,P)}function Os(g,w){var E;for(E=0;8>E;++E)r(g,w+32*E,g,w-32,8)}function Ml(g,w){var E;for(E=0;8>E;++E)i(g,w,g[w-1],8),w+=32}function ss(g,w,E){var P;for(P=0;8>P;++P)i(w,E+32*P,g,8)}function Sa(g,w){var E,P=8;for(E=0;8>E;++E)P+=g[w+E-32]+g[w-1+32*E];ss(P>>4,g,w)}function as(g,w){var E,P=4;for(E=0;8>E;++E)P+=g[w+E-32];ss(P>>3,g,w)}function Or(g,w){var E,P=4;for(E=0;8>E;++E)P+=g[w-1+32*E];ss(P>>3,g,w)}function Ks(g,w){ss(128,g,w)}function pi(g,w,E){var P=g[w-E],G=g[w+0],W=3*(G-P)+So[1020+g[w-2*E]-g[w+E]],Y=Mu[112+(W+4>>3)];g[w-E]=Gi[255+P+Mu[112+(W+3>>3)]],g[w+0]=Gi[255+G-Y]}function Qs(g,w,E,P){var G=g[w+0],W=g[w+E];return Ii[255+g[w-2*E]-g[w-E]]>P||Ii[255+W-G]>P}function $a(g,w,E,P){return 4*Ii[255+g[w-E]-g[w+0]]+Ii[255+g[w-2*E]-g[w+E]]<=P}function Xs(g,w,E,P,G){var W=g[w-3*E],Y=g[w-2*E],Z=g[w-E],te=g[w+0],ue=g[w+E],ye=g[w+2*E],Ie=g[w+3*E];return 4*Ii[255+Z-te]+Ii[255+Y-ue]>P?0:Ii[255+g[w-4*E]-W]<=G&&Ii[255+W-Y]<=G&&Ii[255+Y-Z]<=G&&Ii[255+Ie-ye]<=G&&Ii[255+ye-ue]<=G&&Ii[255+ue-te]<=G}function Js(g,w,E,P){var G=2*P+1;for(P=0;16>P;++P)$a(g,w+P,E,G)&&pi(g,w+P,E)}function Ns(g,w,E,P){var G=2*P+1;for(P=0;16>P;++P)$a(g,w+P*E,1,G)&&pi(g,w+P*E,1)}function xo(g,w,E,P){var G;for(G=3;0<G;--G)Js(g,w+=4*E,E,P)}function Ko(g,w,E,P){var G;for(G=3;0<G;--G)Ns(g,w+=4,E,P)}function os(g,w,E,P,G,W,Y,Z){for(W=2*W+1;0<G--;){if(Xs(g,w,E,W,Y))if(Qs(g,w,E,Z))pi(g,w,E);else{var te=g,ue=w,ye=E,Ie=te[ue-2*ye],le=te[ue-ye],Ne=te[ue+0],Te=te[ue+ye],Ve=te[ue+2*ye],Ce=27*($e=So[1020+3*(Ne-le)+So[1020+Ie-Te]])+63>>7,qe=18*$e+63>>7,$e=9*$e+63>>7;te[ue-3*ye]=Gi[255+te[ue-3*ye]+$e],te[ue-2*ye]=Gi[255+Ie+qe],te[ue-ye]=Gi[255+le+Ce],te[ue+0]=Gi[255+Ne-Ce],te[ue+ye]=Gi[255+Te-qe],te[ue+2*ye]=Gi[255+Ve-$e]}w+=P}}function Zs(g,w,E,P,G,W,Y,Z){for(W=2*W+1;0<G--;){if(Xs(g,w,E,W,Y))if(Qs(g,w,E,Z))pi(g,w,E);else{var te=g,ue=w,ye=E,Ie=te[ue-ye],le=te[ue+0],Ne=te[ue+ye],Te=Mu[112+(4+(Ve=3*(le-Ie))>>3)],Ve=Mu[112+(Ve+3>>3)],Ce=Te+1>>1;te[ue-2*ye]=Gi[255+te[ue-2*ye]+Ce],te[ue-ye]=Gi[255+Ie+Ve],te[ue+0]=Gi[255+le-Te],te[ue+ye]=Gi[255+Ne-Ce]}w+=P}}function Ol(g,w,E,P,G,W){os(g,w,E,1,16,P,G,W)}function Fs(g,w,E,P,G,W){os(g,w,1,E,16,P,G,W)}function Qo(g,w,E,P,G,W){var Y;for(Y=3;0<Y;--Y)Zs(g,w+=4*E,E,1,16,P,G,W)}function A(g,w,E,P,G,W){var Y;for(Y=3;0<Y;--Y)Zs(g,w+=4,1,E,16,P,G,W)}function H(g,w,E,P,G,W,Y,Z){os(g,w,G,1,8,W,Y,Z),os(E,P,G,1,8,W,Y,Z)}function ce(g,w,E,P,G,W,Y,Z){os(g,w,1,G,8,W,Y,Z),os(E,P,1,G,8,W,Y,Z)}function ve(g,w,E,P,G,W,Y,Z){Zs(g,w+4*G,G,1,8,W,Y,Z),Zs(E,P+4*G,G,1,8,W,Y,Z)}function Ae(g,w,E,P,G,W,Y,Z){Zs(g,w+4,1,G,8,W,Y,Z),Zs(E,P+4,1,G,8,W,Y,Z)}function ze(){this.ba=new jt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new un,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Xe(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ht(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xt(){this.ua=0,this.Wa=new Kt,this.vb=new Kt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new be,this.yc=new F}function Ot(){this.xb=this.a=0,this.l=new mi,this.ca=new jt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new X,this.Pb=0,this.wd=new X,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xt,this.ab=0,this.gc=c(4,ht),this.Oc=0}function It(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new mi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function pn(g,w,E,P,G,W,Y){for(g=g==null?0:g[w+0],w=0;w<Y;++w)G[W+w]=g+E[P+w]&255,g=G[W+w]}function sr(g,w,E,P,G,W,Y){var Z;if(g==null)pn(null,null,E,P,G,W,Y);else for(Z=0;Z<Y;++Z)G[W+Z]=g[w+Z]+E[P+Z]&255}function Qn(g,w,E,P,G,W,Y){if(g==null)pn(null,null,E,P,G,W,Y);else{var Z,te=g[w+0],ue=te,ye=te;for(Z=0;Z<Y;++Z)ue=ye+(te=g[w+Z])-ue,ye=E[P+Z]+(-256&ue?0>ue?0:255:ue)&255,ue=te,G[W+Z]=ye}}function x(g,w,E,P){var G=w.width,W=w.o;if(e(g!=null&&w!=null),0>E||0>=P||E+P>W)return null;if(!g.Cc){if(g.ga==null){var Y;if(g.ga=new It,(Y=g.ga==null)||(Y=w.width*w.o,e(g.Gb.length==0),g.Gb=a(Y),g.Uc=0,g.Gb==null?Y=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,Y=1),Y=!Y),!Y){Y=g.ga;var Z=g.Fa,te=g.P,ue=g.qc,ye=g.mb,Ie=g.nb,le=te+1,Ne=ue-1,Te=Y.l;if(e(Z!=null&&ye!=null&&w!=null),jo[0]=null,jo[1]=pn,jo[2]=sr,jo[3]=Qn,Y.ca=ye,Y.tb=Ie,Y.c=w.width,Y.i=w.height,e(0<Y.c&&0<Y.i),1>=ue)w=0;else if(Y.$a=3&Z[te+0],Y.Z=Z[te+0]>>2&3,Y.Lc=Z[te+0]>>4&3,te=Z[te+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||te)w=0;else if(Te.put=Ct,Te.ac=ni,Te.bc=ya,Te.ma=Y,Te.width=w.width,Te.height=w.height,Te.Da=w.Da,Te.v=w.v,Te.va=w.va,Te.j=w.j,Te.o=w.o,Y.$a)e:{e(Y.$a==1),w=Va();t:for(;;){if(w==null){w=0;break e}if(e(Y!=null),Y.mc=w,w.c=Y.c,w.i=Y.i,w.l=Y.l,w.l.ma=Y,w.l.width=Y.c,w.l.height=Y.i,w.a=0,je(w.m,Z,le,Ne),!Ps(Y.c,Y.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&Vn(w.s)?(Y.ic=1,Z=w.c*w.i,w.Ta=null,w.Ua=0,w.V=a(Z),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(Y.ic=0,w=Bi(w,Y.c)),!w))break t;w=1;break e}Y.mc=null,w=0}else w=Ne>=Y.c*Y.i;Y=!w}if(Y)return null;g.ga.Lc!=1?g.Ga=0:P=W-E}e(g.ga!=null),e(E+P<=W);e:{if(w=(Z=g.ga).c,W=Z.l.o,Z.$a==0){if(le=g.rc,Ne=g.Vc,Te=g.Fa,te=g.P+1+E*w,ue=g.mb,ye=g.nb+E*w,e(te<=g.P+g.qc),Z.Z!=0)for(e(jo[Z.Z]!=null),Y=0;Y<P;++Y)jo[Z.Z](le,Ne,Te,te,ue,ye,w),le=ue,Ne=ye,ye+=w,te+=w;else for(Y=0;Y<P;++Y)r(ue,ye,Te,te,w),le=ue,Ne=ye,ye+=w,te+=w;g.rc=le,g.Vc=Ne}else{if(e(Z.mc!=null),w=E+P,e((Y=Z.mc)!=null),e(w<=Y.i),Y.C>=w)w=1;else if(Z.ic||De(),Z.ic){Z=Y.V,le=Y.Ba,Ne=Y.c;var Ve=Y.i,Ce=(Te=1,te=Y.$/Ne,ue=Y.$%Ne,ye=Y.m,Ie=Y.s,Y.$),qe=Ne*Ve,$e=Ne*w,et=Ie.wc,Ke=Ce<$e?$r(Ie,ue,te):null;e(Ce<=qe),e(w<=Ve),e(Vn(Ie));t:for(;;){for(;!ye.h&&Ce<$e;){if(ue&et||(Ke=$r(Ie,ue,te)),e(Ke!=null),_e(ye),256>(Ve=Kn(Ke.G[0],Ke.H[0],ye)))Z[le+Ce]=Ve,++Ce,++ue>=Ne&&(ue=0,++te<=w&&!(te%16)&&Gr(Y,te));else{if(!(280>Ve)){Te=0;break t}Ve=Fi(Ve-256,ye);var vt,ct=Kn(Ke.G[4],Ke.H[4],ye);if(_e(ye),!(Ce>=(ct=qi(Ne,ct=Fi(ct,ye)))&&qe-Ce>=Ve)){Te=0;break t}for(vt=0;vt<Ve;++vt)Z[le+Ce+vt]=Z[le+Ce+vt-ct];for(Ce+=Ve,ue+=Ve;ue>=Ne;)ue-=Ne,++te<=w&&!(te%16)&&Gr(Y,te);Ce<$e&&ue&et&&(Ke=$r(Ie,ue,te))}e(ye.h==fe(ye))}Gr(Y,te>w?w:te);break t}!Te||ye.h&&Ce<qe?(Te=0,Y.a=ye.h?5:3):Y.$=Ce,w=Te}else w=Vi(Y,Y.V,Y.Ba,Y.c,Y.i,w,ba);if(!w){P=0;break e}}E+P>=W&&(g.Cc=1),P=1}if(!P)return null;if(g.Cc&&((P=g.ga)!=null&&(P.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+E*G}function C(g,w,E,P,G,W){for(;0<G--;){var Y,Z=g,te=w+(E?1:0),ue=g,ye=w+(E?0:3);for(Y=0;Y<P;++Y){var Ie=ue[ye+4*Y];Ie!=255&&(Ie*=32897,Z[te+4*Y+0]=Z[te+4*Y+0]*Ie>>23,Z[te+4*Y+1]=Z[te+4*Y+1]*Ie>>23,Z[te+4*Y+2]=Z[te+4*Y+2]*Ie>>23)}w+=W}}function O(g,w,E,P,G){for(;0<P--;){var W;for(W=0;W<E;++W){var Y=g[w+2*W+0],Z=15&(ue=g[w+2*W+1]),te=4369*Z,ue=(240&ue|ue>>4)*te>>16;g[w+2*W+0]=(240&Y|Y>>4)*te>>16&240|(15&Y|Y<<4)*te>>16>>4&15,g[w+2*W+1]=240&ue|Z}w+=G}}function ee(g,w,E,P,G,W,Y,Z){var te,ue,ye=255;for(ue=0;ue<G;++ue){for(te=0;te<P;++te){var Ie=g[w+te];W[Y+4*te]=Ie,ye&=Ie}w+=E,Y+=Z}return ye!=255}function Ee(g,w,E,P,G){var W;for(W=0;W<G;++W)E[P+W]=g[w+W]>>8}function De(){Vl=C,ta=O,ku=ee,Us=Ee}function tt(g,w,E){k[g]=function(P,G,W,Y,Z,te,ue,ye,Ie,le,Ne,Te,Ve,Ce,qe,$e,et){var Ke,vt=et-1>>1,ct=Z[te+0]|ue[ye+0]<<16,Jt=Ie[le+0]|Ne[Te+0]<<16;e(P!=null);var mt=3*ct+Jt+131074>>2;for(w(P[G+0],255&mt,mt>>16,Ve,Ce),W!=null&&(mt=3*Jt+ct+131074>>2,w(W[Y+0],255&mt,mt>>16,qe,$e)),Ke=1;Ke<=vt;++Ke){var gn=Z[te+Ke]|ue[ye+Ke]<<16,xr=Ie[le+Ke]|Ne[Te+Ke]<<16,sn=ct+gn+Jt+xr+524296,ut=sn+2*(gn+Jt)>>3;mt=ut+ct>>1,ct=(sn=sn+2*(ct+xr)>>3)+gn>>1,w(P[G+2*Ke-1],255&mt,mt>>16,Ve,Ce+(2*Ke-1)*E),w(P[G+2*Ke-0],255&ct,ct>>16,Ve,Ce+(2*Ke-0)*E),W!=null&&(mt=sn+Jt>>1,ct=ut+xr>>1,w(W[Y+2*Ke-1],255&mt,mt>>16,qe,$e+(2*Ke-1)*E),w(W[Y+2*Ke+0],255&ct,ct>>16,qe,$e+(2*Ke+0)*E)),ct=gn,Jt=xr}1&et||(mt=3*ct+Jt+131074>>2,w(P[G+et-1],255&mt,mt>>16,Ve,Ce+(et-1)*E),W!=null&&(mt=3*Jt+ct+131074>>2,w(W[Y+et-1],255&mt,mt>>16,qe,$e+(et-1)*E)))}}function Qt(){Ri[bd]=zl,Ri[Wi]=kc,Ri[wd]=Wh,Ri[na]=jd,Ri[Ou]=tl,Ri[Ic]=eo,Ri[Jo]=nl,Ri[Fu]=kc,Ri[_d]=jd,Ri[Lc]=tl,Ri[Nd]=eo}function ar(g){return g&-16384?0>g?0:255:g>>Ed}function hn(g,w){return ar((19077*g>>8)+(26149*w>>8)-14234)}function Un(g,w,E){return ar((19077*g>>8)-(6419*w>>8)-(13320*E>>8)+8708)}function gi(g,w){return ar((19077*g>>8)+(33050*w>>8)-17685)}function Ei(g,w,E,P,G){P[G+0]=hn(g,E),P[G+1]=Un(g,w,E),P[G+2]=gi(g,w)}function Jn(g,w,E,P,G){P[G+0]=gi(g,w),P[G+1]=Un(g,w,E),P[G+2]=hn(g,E)}function Ti(g,w,E,P,G){var W=Un(g,w,E);w=W<<3&224|gi(g,w)>>3,P[G+0]=248&hn(g,E)|W>>5,P[G+1]=w}function qs(g,w,E,P,G){var W=240&gi(g,w)|15;P[G+0]=240&hn(g,E)|Un(g,w,E)>>4,P[G+1]=W}function Ga(g,w,E,P,G){P[G+0]=255,Ei(g,w,E,P,G+1)}function Wa(g,w,E,P,G){Jn(g,w,E,P,G),P[G+3]=255}function ls(g,w,E,P,G){Ei(g,w,E,P,G),P[G+3]=255}function vo(g,w,E){k[g]=function(P,G,W,Y,Z,te,ue,ye,Ie){for(var le=ye+(-2&Ie)*E;ye!=le;)w(P[G+0],W[Y+0],Z[te+0],ue,ye),w(P[G+1],W[Y+0],Z[te+0],ue,ye+E),G+=2,++Y,++te,ye+=2*E;1&Ie&&w(P[G+0],W[Y+0],Z[te+0],ue,ye)}}function Sc(g,w,E){return E==0?g==0?w==0?6:5:w==0?4:0:E}function Iu(g,w,E,P,G){switch(g>>>30){case 3:Ao(w,E,P,G,0);break;case 2:$i(w,E,P,G);break;case 1:Mn(w,E,P,G)}}function Vs(g,w){var E,P,G=w.M,W=w.Nb,Y=g.oc,Z=g.pc+40,te=g.oc,ue=g.pc+584,ye=g.oc,Ie=g.pc+600;for(E=0;16>E;++E)Y[Z+32*E-1]=129;for(E=0;8>E;++E)te[ue+32*E-1]=129,ye[Ie+32*E-1]=129;for(0<G?Y[Z-1-32]=te[ue-1-32]=ye[Ie-1-32]=129:(i(Y,Z-32-1,127,21),i(te,ue-32-1,127,9),i(ye,Ie-32-1,127,9)),P=0;P<g.za;++P){var le=w.ya[w.aa+P];if(0<P){for(E=-1;16>E;++E)r(Y,Z+32*E-4,Y,Z+32*E+12,4);for(E=-1;8>E;++E)r(te,ue+32*E-4,te,ue+32*E+4,4),r(ye,Ie+32*E-4,ye,Ie+32*E+4,4)}var Ne=g.Gd,Te=g.Hd+P,Ve=le.ad,Ce=le.Hc;if(0<G&&(r(Y,Z-32,Ne[Te].y,0,16),r(te,ue-32,Ne[Te].f,0,8),r(ye,Ie-32,Ne[Te].ea,0,8)),le.Za){var qe=Y,$e=Z-32+16;for(0<G&&(P>=g.za-1?i(qe,$e,Ne[Te].y[15],4):r(qe,$e,Ne[Te+1].y,0,4)),E=0;4>E;E++)qe[$e+128+E]=qe[$e+256+E]=qe[$e+384+E]=qe[$e+0+E];for(E=0;16>E;++E,Ce<<=2)qe=Y,$e=Z+Vr[E],Ir[le.Ob[E]](qe,$e),Iu(Ce,Ve,16*+E,qe,$e)}else if(qe=Sc(P,G,le.Ob[0]),us[qe](Y,Z),Ce!=0)for(E=0;16>E;++E,Ce<<=2)Iu(Ce,Ve,16*+E,Y,Z+Vr[E]);for(E=le.Gc,qe=Sc(P,G,le.Dd),Ca[qe](te,ue),Ca[qe](ye,Ie),Ce=Ve,qe=te,$e=ue,255&(le=0|E)&&(170&le?ea(Ce,256,qe,$e):jn(Ce,256,qe,$e)),le=ye,Ce=Ie,255&(E>>=8)&&(170&E?ea(Ve,320,le,Ce):jn(Ve,320,le,Ce)),G<g.Ub-1&&(r(Ne[Te].y,0,Y,Z+480,16),r(Ne[Te].f,0,te,ue+224,8),r(Ne[Te].ea,0,ye,Ie+224,8)),E=8*W*g.B,Ne=g.sa,Te=g.ta+16*P+16*W*g.R,Ve=g.qa,le=g.ra+8*P+E,Ce=g.Ha,qe=g.Ia+8*P+E,E=0;16>E;++E)r(Ne,Te+E*g.R,Y,Z+32*E,16);for(E=0;8>E;++E)r(Ve,le+E*g.B,te,ue+32*E,8),r(Ce,qe+E*g.B,ye,Ie+32*E,8)}}function ja(g,w,E,P,G,W,Y,Z,te){var ue=[0],ye=[0],Ie=0,le=te!=null?te.kd:0,Ne=te??new Xe;if(g==null||12>E)return 7;Ne.data=g,Ne.w=w,Ne.ha=E,w=[w],E=[E],Ne.gb=[Ne.gb];e:{var Te=w,Ve=E,Ce=Ne.gb;if(e(g!=null),e(Ve!=null),e(Ce!=null),Ce[0]=0,12<=Ve[0]&&!t(g,Te[0],"RIFF")){if(t(g,Te[0]+8,"WEBP")){Ce=3;break e}var qe=dt(g,Te[0]+4);if(12>qe||4294967286<qe){Ce=3;break e}if(le&&qe>Ve[0]-8){Ce=7;break e}Ce[0]=qe,Te[0]+=12,Ve[0]-=12}Ce=0}if(Ce!=0)return Ce;for(qe=0<Ne.gb[0],E=E[0];;){e:{var $e=g;Ve=w,Ce=E;var et=ue,Ke=ye,vt=Te=[0];if((mt=Ie=[Ie])[0]=0,8>Ce[0])Ce=7;else{if(!t($e,Ve[0],"VP8X")){if(dt($e,Ve[0]+4)!=10){Ce=3;break e}if(18>Ce[0]){Ce=7;break e}var ct=dt($e,Ve[0]+8),Jt=1+st($e,Ve[0]+12);if(2147483648<=Jt*($e=1+st($e,Ve[0]+15))){Ce=3;break e}vt!=null&&(vt[0]=ct),et!=null&&(et[0]=Jt),Ke!=null&&(Ke[0]=$e),Ve[0]+=18,Ce[0]-=18,mt[0]=1}Ce=0}}if(Ie=Ie[0],Te=Te[0],Ce!=0)return Ce;if(Ve=!!(2&Te),!qe&&Ie)return 3;if(W!=null&&(W[0]=!!(16&Te)),Y!=null&&(Y[0]=Ve),Z!=null&&(Z[0]=0),Y=ue[0],Te=ye[0],Ie&&Ve&&te==null){Ce=0;break}if(4>E){Ce=7;break}if(qe&&Ie||!qe&&!Ie&&!t(g,w[0],"ALPH")){E=[E],Ne.na=[Ne.na],Ne.P=[Ne.P],Ne.Sa=[Ne.Sa];e:{ct=g,Ce=w,qe=E;var mt=Ne.gb;et=Ne.na,Ke=Ne.P,vt=Ne.Sa,Jt=22,e(ct!=null),e(qe!=null),$e=Ce[0];var gn=qe[0];for(e(et!=null),e(vt!=null),et[0]=null,Ke[0]=null,vt[0]=0;;){if(Ce[0]=$e,qe[0]=gn,8>gn){Ce=7;break e}var xr=dt(ct,$e+4);if(4294967286<xr){Ce=3;break e}var sn=8+xr+1&-2;if(Jt+=sn,0<mt&&Jt>mt){Ce=3;break e}if(!t(ct,$e,"VP8 ")||!t(ct,$e,"VP8L")){Ce=0;break e}if(gn[0]<sn){Ce=7;break e}t(ct,$e,"ALPH")||(et[0]=ct,Ke[0]=$e+8,vt[0]=xr),$e+=sn,gn-=sn}}if(E=E[0],Ne.na=Ne.na[0],Ne.P=Ne.P[0],Ne.Sa=Ne.Sa[0],Ce!=0)break}E=[E],Ne.Ja=[Ne.Ja],Ne.xa=[Ne.xa];e:if(mt=g,Ce=w,qe=E,et=Ne.gb[0],Ke=Ne.Ja,vt=Ne.xa,ct=Ce[0],$e=!t(mt,ct,"VP8 "),Jt=!t(mt,ct,"VP8L"),e(mt!=null),e(qe!=null),e(Ke!=null),e(vt!=null),8>qe[0])Ce=7;else{if($e||Jt){if(mt=dt(mt,ct+4),12<=et&&mt>et-12){Ce=3;break e}if(le&&mt>qe[0]-8){Ce=7;break e}Ke[0]=mt,Ce[0]+=8,qe[0]-=8,vt[0]=Jt}else vt[0]=5<=qe[0]&&mt[ct+0]==47&&!(mt[ct+4]>>5),Ke[0]=qe[0];Ce=0}if(E=E[0],Ne.Ja=Ne.Ja[0],Ne.xa=Ne.xa[0],w=w[0],Ce!=0)break;if(4294967286<Ne.Ja)return 3;if(Z==null||Ve||(Z[0]=Ne.xa?2:1),Y=[Y],Te=[Te],Ne.xa){if(5>E){Ce=7;break}Z=Y,le=Te,Ve=W,g==null||5>E?g=0:5<=E&&g[w+0]==47&&!(g[w+4]>>5)?(qe=[0],mt=[0],et=[0],je(Ke=new X,g,w,E),es(Ke,qe,mt,et)?(Z!=null&&(Z[0]=qe[0]),le!=null&&(le[0]=mt[0]),Ve!=null&&(Ve[0]=et[0]),g=1):g=0):g=0}else{if(10>E){Ce=7;break}Z=Te,g==null||10>E||!wa(g,w+3,E-3)?g=0:(le=g[w+0]|g[w+1]<<8|g[w+2]<<16,Ve=16383&(g[w+7]<<8|g[w+6]),g=16383&(g[w+9]<<8|g[w+8]),1&le||3<(le>>1&7)||!(le>>4&1)||le>>5>=Ne.Ja||!Ve||!g?g=0:(Y&&(Y[0]=Ve),Z&&(Z[0]=g),g=1))}if(!g||(Y=Y[0],Te=Te[0],Ie&&(ue[0]!=Y||ye[0]!=Te)))return 3;te!=null&&(te[0]=Ne,te.offset=w-te.w,e(4294967286>w-te.w),e(te.offset==te.ha-E));break}return Ce==0||Ce==7&&Ie&&te==null?(W!=null&&(W[0]|=Ne.na!=null&&0<Ne.na.length),P!=null&&(P[0]=Y),G!=null&&(G[0]=Te),0):Ce}function yo(g,w,E){var P=w.width,G=w.height,W=0,Y=0,Z=P,te=G;if(w.Da=g!=null&&0<g.Da,w.Da&&(Z=g.cd,te=g.bd,W=g.v,Y=g.j,11>E||(W&=-2,Y&=-2),0>W||0>Y||0>=Z||0>=te||W+Z>P||Y+te>G))return 0;if(w.v=W,w.j=Y,w.va=W+Z,w.o=Y+te,w.U=Z,w.T=te,w.da=g!=null&&0<g.da,w.da){if(!St(Z,te,E=[g.ib],W=[g.hb]))return 0;w.ib=E[0],w.hb=W[0]}return w.ob=g!=null&&g.ob,w.Kb=g==null||!g.Sd,w.da&&(w.ob=w.ib<3*P/4&&w.hb<3*G/4,w.Kb=0),1}function Lu(g){if(g==null)return 2;if(11>g.S){var w=g.f.RGBA;w.fb+=(g.height-1)*w.A,w.A=-w.A}else w=g.f.kb,g=g.height,w.O+=(g-1)*w.fa,w.fa=-w.fa,w.N+=(g-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(g-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(g-1)*w.lb,w.lb=-w.lb);return 0}function Ea(g,w,E,P){if(P==null||0>=g||0>=w)return 2;if(E!=null){if(E.Da){var G=E.cd,W=E.bd,Y=-2&E.v,Z=-2&E.j;if(0>Y||0>Z||0>=G||0>=W||Y+G>g||Z+W>w)return 2;g=G,w=W}if(E.da){if(!St(g,w,G=[E.ib],W=[E.hb]))return 2;g=G[0],w=W[0]}}P.width=g,P.height=w;e:{var te=P.width,ue=P.height;if(g=P.S,0>=te||0>=ue||!(g>=bd&&13>g))g=2;else{if(0>=P.Rd&&P.sd==null){Y=W=G=w=0;var ye=(Z=te*Cd[g])*ue;if(11>g||(W=(ue+1)/2*(w=(te+1)/2),g==12&&(Y=(G=te)*ue)),(ue=a(ye+2*W+Y))==null){g=1;break e}P.sd=ue,11>g?((te=P.f.RGBA).eb=ue,te.fb=0,te.A=Z,te.size=ye):((te=P.f.kb).y=ue,te.O=0,te.fa=Z,te.Fd=ye,te.f=ue,te.N=0+ye,te.Ab=w,te.Cd=W,te.ea=ue,te.W=0+ye+W,te.Db=w,te.Ed=W,g==12&&(te.F=ue,te.J=0+ye+2*W),te.Tc=Y,te.lb=G)}if(w=1,G=P.S,W=P.width,Y=P.height,G>=bd&&13>G)if(11>G)g=P.f.RGBA,w&=(Z=Math.abs(g.A))*(Y-1)+W<=g.size,w&=Z>=W*Cd[G],w&=g.eb!=null;else{g=P.f.kb,Z=(W+1)/2,ye=(Y+1)/2,te=Math.abs(g.fa),ue=Math.abs(g.Ab);var Ie=Math.abs(g.Db),le=Math.abs(g.lb),Ne=le*(Y-1)+W;w&=te*(Y-1)+W<=g.Fd,w&=ue*(ye-1)+Z<=g.Cd,w=(w&=Ie*(ye-1)+Z<=g.Ed)&te>=W&ue>=Z&Ie>=Z,w&=g.y!=null,w&=g.f!=null,w&=g.ea!=null,G==12&&(w&=le>=W,w&=Ne<=g.Tc,w&=g.F!=null)}else w=0;g=w?0:2}}return g!=0||E!=null&&E.fd&&(g=Lu(P)),g}var Xo=64,As=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cs=24,Ya=32,Ka=8,bo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Qe("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(g){return g},k.Predictor2=function(g,w,E){return w[E+0]},k.Predictor3=function(g,w,E){return w[E+1]},k.Predictor4=function(g,w,E){return w[E-1]},k.Predictor5=function(g,w,E){return nt(nt(g,w[E+1]),w[E+0])},k.Predictor6=function(g,w,E){return nt(g,w[E-1])},k.Predictor7=function(g,w,E){return nt(g,w[E+0])},k.Predictor8=function(g,w,E){return nt(w[E-1],w[E+0])},k.Predictor9=function(g,w,E){return nt(w[E+0],w[E+1])},k.Predictor10=function(g,w,E){return nt(nt(g,w[E-1]),nt(w[E+0],w[E+1]))},k.Predictor11=function(g,w,E){var P=w[E+0];return 0>=Mt(P>>24&255,g>>24&255,(w=w[E-1])>>24&255)+Mt(P>>16&255,g>>16&255,w>>16&255)+Mt(P>>8&255,g>>8&255,w>>8&255)+Mt(255&P,255&g,255&w)?P:g},k.Predictor12=function(g,w,E){var P=w[E+0];return(pt((g>>24&255)+(P>>24&255)-((w=w[E-1])>>24&255))<<24|pt((g>>16&255)+(P>>16&255)-(w>>16&255))<<16|pt((g>>8&255)+(P>>8&255)-(w>>8&255))<<8|pt((255&g)+(255&P)-(255&w)))>>>0},k.Predictor13=function(g,w,E){var P=w[E-1];return(Gt((g=nt(g,w[E+0]))>>24&255,P>>24&255)<<24|Gt(g>>16&255,P>>16&255)<<16|Gt(g>>8&255,P>>8&255)<<8|Gt(255&g,255&P))>>>0};var jc=k.PredictorAdd0;k.PredictorAdd1=cn,Qe("Predictor2","PredictorAdd2"),Qe("Predictor3","PredictorAdd3"),Qe("Predictor4","PredictorAdd4"),Qe("Predictor5","PredictorAdd5"),Qe("Predictor6","PredictorAdd6"),Qe("Predictor7","PredictorAdd7"),Qe("Predictor8","PredictorAdd8"),Qe("Predictor9","PredictorAdd9"),Qe("Predictor10","PredictorAdd10"),Qe("Predictor11","PredictorAdd11"),Qe("Predictor12","PredictorAdd12"),Qe("Predictor13","PredictorAdd13");var Ec=k.PredictorAdd2;_t("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),_t("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Fr,xd=k.ColorIndexInverseTransform,Qa=k.MapARGB,Xa=k.VP8LColorIndexInverseTransformAlpha,Ci=k.MapAlpha,wo=k.VP8LPredictorsAdd=[];wo.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var Tc,Cc,_o,No,Ja,Fl,Bs,Ao,$i,ea,Mn,jn,or,qr,Za,Ta,ql,Ru,Uh,Im,Lm,Rm,zh,Hh,Vl,ta,ku,Us,Bl=a(511),vd=a(2041),Pu=a(225),Du=a(767),yd=0,So=vd,Mu=Pu,Gi=Du,Ii=Bl,bd=0,Wi=1,wd=2,na=3,Ou=4,Ic=5,Jo=6,Fu=7,_d=8,Lc=9,Nd=10,ra=[2,3,7],Rc=[3,3,11],Ul=[280,256,256,256,40],Ad=[0,1,1,1,0],qu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ia=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],sa=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zo=8,aa=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],oa=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],zs=null,km=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],$h=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Sd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Pm=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Li=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],gr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],us=[],Ir=[],Ca=[],el=1,Gh=2,jo=[],Ri=[];tt("UpsampleRgbLinePair",Ei,3),tt("UpsampleBgrLinePair",Jn,3),tt("UpsampleRgbaLinePair",ls,4),tt("UpsampleBgraLinePair",Wa,4),tt("UpsampleArgbLinePair",Ga,4),tt("UpsampleRgba4444LinePair",qs,2),tt("UpsampleRgb565LinePair",Ti,2);var zl=k.UpsampleRgbLinePair,Wh=k.UpsampleBgrLinePair,kc=k.UpsampleRgbaLinePair,jd=k.UpsampleBgraLinePair,tl=k.UpsampleArgbLinePair,eo=k.UpsampleRgba4444LinePair,nl=k.UpsampleRgb565LinePair,la=16,Pc=1<<la-1,Hl=-227,rl=482,Ed=6,il=0,ki=a(256),Td=a(256),Dm=a(256),N0=a(256),A0=a(rl-Hl),S0=a(rl-Hl);vo("YuvToRgbRow",Ei,3),vo("YuvToBgrRow",Jn,3),vo("YuvToRgbaRow",ls,4),vo("YuvToBgraRow",Wa,4),vo("YuvToArgbRow",Ga,4),vo("YuvToRgba4444Row",qs,2),vo("YuvToRgb565Row",Ti,2);var Vr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Dc=[0,2,8],Vu=[8,7,6,4,4,2,2,2,1,1,1,1],Bu=1;this.WebPDecodeRGBA=function(g,w,E,P,G){var W=Wi,Y=new ze,Z=new jt;Y.ba=Z,Z.S=W,Z.width=[Z.width],Z.height=[Z.height];var te=Z.width,ue=Z.height,ye=new Nt;if(ye==null||g==null)var Ie=2;else e(ye!=null),Ie=ja(g,w,E,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(Ie!=0?te=0:(te!=null&&(te[0]=ye.width[0]),ue!=null&&(ue[0]=ye.height[0]),te=1),te){Z.width=Z.width[0],Z.height=Z.height[0],P!=null&&(P[0]=Z.width),G!=null&&(G[0]=Z.height);e:{if(P=new mi,(G=new Xe).data=g,G.w=w,G.ha=E,G.kd=1,w=[0],e(G!=null),((g=ja(G.data,G.w,G.ha,null,null,null,w,null,G))==0||g==7)&&w[0]&&(g=4),(w=g)==0){if(e(Y!=null),P.data=G.data,P.w=G.w+G.offset,P.ha=G.ha-G.offset,P.put=Ct,P.ac=ni,P.bc=ya,P.ma=Y,G.xa){if((g=Va())==null){Y=1;break e}if((function(le,Ne){var Te=[0],Ve=[0],Ce=[0];t:for(;;){if(le==null)return 0;if(Ne==null)return le.a=2,0;if(le.l=Ne,le.a=0,je(le.m,Ne.data,Ne.w,Ne.ha),!es(le.m,Te,Ve,Ce)){le.a=3;break t}if(le.xb=Gh,Ne.width=Te[0],Ne.height=Ve[0],!Ps(Te[0],Ve[0],1,le,null))break t;return 1}return e(le.a!=0),0})(g,P)){if(P=(w=Ea(P.width,P.height,Y.Oa,Y.ba))==0){t:{P=g;n:for(;;){if(P==null){P=0;break t}if(e(P.s.yc!=null),e(P.s.Ya!=null),e(0<P.s.Wb),e((E=P.l)!=null),e((G=E.ma)!=null),P.xb!=0){if(P.ca=G.ba,P.tb=G.tb,e(P.ca!=null),!yo(G.Oa,E,na)){P.a=2;break n}if(!Bi(P,E.width)||E.da)break n;if((E.da||Vt(P.ca.S))&&De(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&De()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!se(P.s.vb,P.s.Wa.Xa)){P.a=1;break n}P.xb=0}if(!Vi(P,P.V,P.Ba,P.c,P.i,E.o,fi))break n;G.Dc=P.Ma,P=1;break t}e(P.a!=0),P=0}P=!P}P&&(w=g.a)}else w=g.a}else{if((g=new Tr)==null){Y=1;break e}if(g.Fa=G.na,g.P=G.P,g.qc=G.Sa,_s(g,P)){if((w=Ea(P.width,P.height,Y.Oa,Y.ba))==0){if(g.Aa=0,E=Y.Oa,e((G=g)!=null),E!=null){if(0<(te=0>(te=E.Md)?0:100<te?255:255*te/100)){for(ue=ye=0;4>ue;++ue)12>(Ie=G.pb[ue]).lc&&(Ie.ia=te*Vu[0>Ie.lc?0:Ie.lc]>>3),ye|=Ie.ia;ye&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=E.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}(function(le,Ne){if(le==null)return 0;if(Ne==null)return mn(le,2,"NULL VP8Io parameter in VP8Decode().");if(!le.cb&&!_s(le,Ne))return 0;if(e(le.cb),Ne.ac==null||Ne.ac(Ne)){Ne.ob&&(le.L=0);var Te=Dc[le.L];if(le.L==2?(le.yb=0,le.zb=0):(le.yb=Ne.v-Te>>4,le.zb=Ne.j-Te>>4,0>le.yb&&(le.yb=0),0>le.zb&&(le.zb=0)),le.Va=Ne.o+15+Te>>4,le.Hb=Ne.va+15+Te>>4,le.Hb>le.za&&(le.Hb=le.za),le.Va>le.Ub&&(le.Va=le.Ub),0<le.L){var Ve=le.ed;for(Te=0;4>Te;++Te){var Ce;if(le.Qa.Cb){var qe=le.Qa.Lb[Te];le.Qa.Fb||(qe+=Ve.Tb)}else qe=Ve.Tb;for(Ce=0;1>=Ce;++Ce){var $e=le.gd[Te][Ce],et=qe;if(Ve.Pc&&(et+=Ve.vd[0],Ce&&(et+=Ve.od[0])),0<(et=0>et?0:63<et?63:et)){var Ke=et;0<Ve.wb&&(Ke=4<Ve.wb?Ke>>2:Ke>>1)>9-Ve.wb&&(Ke=9-Ve.wb),1>Ke&&(Ke=1),$e.dd=Ke,$e.tc=2*et+Ke,$e.ld=40<=et?2:15<=et?1:0}else $e.tc=0;$e.La=Ce}}}Te=0}else mn(le,6,"Frame setup failed"),Te=le.a;if(Te=Te==0){if(Te){le.$c=0,0<le.Aa||(le.Ic=Bu);t:{Te=le.Ic,Ve=4*(Ke=le.za);var vt=32*Ke,ct=Ke+1,Jt=0<le.L?Ke*(0<le.Aa?2:1):0,mt=(le.Aa==2?2:1)*Ke;if(($e=Ve+832+(Ce=3*(16*Te+Dc[le.L])/2*vt)+(qe=le.Fa!=null&&0<le.Fa.length?le.Kc.c*le.Kc.i:0))!=$e)Te=0;else{if($e>le.Vb){if(le.Vb=0,le.Ec=a($e),le.Fc=0,le.Ec==null){Te=mn(le,1,"no memory during frame initialization.");break t}le.Vb=$e}$e=le.Ec,et=le.Fc,le.Ac=$e,le.Bc=et,et+=Ve,le.Gd=c(vt,$o),le.Hd=0,le.rb=c(ct+1,ws),le.sb=1,le.wa=Jt?c(Jt,Ui):null,le.Y=0,le.D.Nb=0,le.D.wa=le.wa,le.D.Y=le.Y,0<le.Aa&&(le.D.Y+=Ke),e(!0),le.oc=$e,le.pc=et,et+=832,le.ya=c(mt,ho),le.aa=0,le.D.ya=le.ya,le.D.aa=le.aa,le.Aa==2&&(le.D.aa+=Ke),le.R=16*Ke,le.B=8*Ke,Ke=(vt=Dc[le.L])*le.R,vt=vt/2*le.B,le.sa=$e,le.ta=et+Ke,le.qa=le.sa,le.ra=le.ta+16*Te*le.R+vt,le.Ha=le.qa,le.Ia=le.ra+8*Te*le.B+vt,le.$c=0,et+=Ce,le.mb=qe?$e:null,le.nb=qe?et:null,e(et+qe<=le.Fc+le.Vb),Ba(le),i(le.Ac,le.Bc,0,Ve),Te=1}}if(Te){if(Ne.ka=0,Ne.y=le.sa,Ne.O=le.ta,Ne.f=le.qa,Ne.N=le.ra,Ne.ea=le.Ha,Ne.Vd=le.Ia,Ne.fa=le.R,Ne.Rc=le.B,Ne.F=null,Ne.J=0,!yd){for(Te=-255;255>=Te;++Te)Bl[255+Te]=0>Te?-Te:Te;for(Te=-1020;1020>=Te;++Te)vd[1020+Te]=-128>Te?-128:127<Te?127:Te;for(Te=-112;112>=Te;++Te)Pu[112+Te]=-16>Te?-16:15<Te?15:Te;for(Te=-255;510>=Te;++Te)Du[255+Te]=0>Te?0:255<Te?255:Te;yd=1}Bs=ri,Ao=Rl,ea=ji,Mn=kl,jn=_a,$i=Ac,or=Ol,qr=Fs,Za=H,Ta=ce,ql=Qo,Ru=A,Uh=ve,Im=Ae,Lm=Js,Rm=Ns,zh=xo,Hh=Ko,Ir[0]=Ha,Ir[1]=Pl,Ir[2]=mo,Ir[3]=Yo,Ir[4]=ii,Ir[5]=po,Ir[6]=Wr,Ir[7]=Bn,Ir[8]=go,Ir[9]=is,us[0]=Ms,us[1]=Go,us[2]=Wo,us[3]=Na,us[4]=Aa,us[5]=Hi,us[6]=za,Ca[0]=Sa,Ca[1]=Dl,Ca[2]=Os,Ca[3]=Ml,Ca[4]=Or,Ca[5]=as,Ca[6]=Ks,Te=1}else Te=0}Te&&(Te=(function(gn,xr){for(gn.M=0;gn.M<gn.Va;++gn.M){var sn,ut=gn.Jc[gn.M&gn.Xb],it=gn.m,_r=gn;for(sn=0;sn<_r.za;++sn){var Ht=it,ln=_r,Gn=ln.Ac,si=ln.Bc+4*sn,Pi=ln.zc,lr=ln.ya[ln.aa+sn];if(ln.Qa.Bb?lr.$b=Be(Ht,ln.Pa.jb[0])?2+Be(Ht,ln.Pa.jb[2]):Be(Ht,ln.Pa.jb[1]):lr.$b=0,ln.kc&&(lr.Ad=Be(Ht,ln.Bd)),lr.Za=!Be(Ht,145)+0,lr.Za){var Yr=lr.Ob,Yi=0;for(ln=0;4>ln;++ln){var Kr,fn=Pi[0+ln];for(Kr=0;4>Kr;++Kr){fn=Li[Gn[si+Kr]][fn];for(var In=Sd[Be(Ht,fn[0])];0<In;)In=Sd[2*In+Be(Ht,fn[In])];fn=-In,Gn[si+Kr]=fn}r(Yr,Yi,Gn,si,4),Yi+=4,Pi[0+ln]=fn}}else fn=Be(Ht,156)?Be(Ht,128)?1:3:Be(Ht,163)?2:0,lr.Ob[0]=fn,i(Gn,si,fn,4),i(Pi,0,fn,4);lr.Dd=Be(Ht,142)?Be(Ht,114)?Be(Ht,183)?1:3:2:0}if(_r.m.Ka)return mn(gn,7,"Premature end-of-partition0 encountered.");for(;gn.ja<gn.za;++gn.ja){if(_r=ut,Ht=(it=gn).rb[it.sb-1],Gn=it.rb[it.sb+it.ja],sn=it.ya[it.aa+it.ja],si=it.kc?sn.Ad:0)Ht.la=Gn.la=0,sn.Za||(Ht.Na=Gn.Na=0),sn.Hc=0,sn.Gc=0,sn.ia=0;else{var Nr,On;if(Ht=Gn,Gn=_r,si=it.Pa.Xc,Pi=it.ya[it.aa+it.ja],lr=it.pb[Pi.$b],ln=Pi.ad,Yr=0,Yi=it.rb[it.sb-1],fn=Kr=0,i(ln,Yr,0,384),Pi.Za)var ai=0,Ar=si[3];else{In=a(16);var Ln=Ht.Na+Yi.Na;if(Ln=zs(Gn,si[1],Ln,lr.Eb,0,In,0),Ht.Na=Yi.Na=(0<Ln)+0,1<Ln)Bs(In,0,ln,Yr);else{var Br=In[0]+3>>3;for(In=0;256>In;In+=16)ln[Yr+In]=Br}ai=1,Ar=si[0]}var Wn=15&Ht.la,Qr=15&Yi.la;for(In=0;4>In;++In){var Xr=1&Qr;for(Br=On=0;4>Br;++Br)Wn=Wn>>1|(Xr=(Ln=zs(Gn,Ar,Ln=Xr+(1&Wn),lr.Sc,ai,ln,Yr))>ai)<<7,On=On<<2|(3<Ln?3:1<Ln?2:ln[Yr+0]!=0),Yr+=16;Wn>>=4,Qr=Qr>>1|Xr<<7,Kr=(Kr<<8|On)>>>0}for(Ar=Wn,ai=Qr>>4,Nr=0;4>Nr;Nr+=2){for(On=0,Wn=Ht.la>>4+Nr,Qr=Yi.la>>4+Nr,In=0;2>In;++In){for(Xr=1&Qr,Br=0;2>Br;++Br)Ln=Xr+(1&Wn),Wn=Wn>>1|(Xr=0<(Ln=zs(Gn,si[2],Ln,lr.Qc,0,ln,Yr)))<<3,On=On<<2|(3<Ln?3:1<Ln?2:ln[Yr+0]!=0),Yr+=16;Wn>>=2,Qr=Qr>>1|Xr<<5}fn|=On<<4*Nr,Ar|=Wn<<4<<Nr,ai|=(240&Qr)<<Nr}Ht.la=Ar,Yi.la=ai,Pi.Hc=Kr,Pi.Gc=fn,Pi.ia=43690&fn?0:lr.ia,si=!(Kr|fn)}if(0<it.L&&(it.wa[it.Y+it.ja]=it.gd[sn.$b][sn.Za],it.wa[it.Y+it.ja].La|=!si),_r.Ka)return mn(gn,7,"Premature end-of-file encountered.")}if(Ba(gn),it=xr,_r=1,sn=(ut=gn).D,Ht=0<ut.L&&ut.M>=ut.zb&&ut.M<=ut.Va,ut.Aa==0)t:{if(sn.M=ut.M,sn.uc=Ht,Vs(ut,sn),_r=1,sn=(On=ut.D).Nb,Ht=(fn=Dc[ut.L])*ut.R,Gn=fn/2*ut.B,In=16*sn*ut.R,Br=8*sn*ut.B,si=ut.sa,Pi=ut.ta-Ht+In,lr=ut.qa,ln=ut.ra-Gn+Br,Yr=ut.Ha,Yi=ut.Ia-Gn+Br,Qr=(Wn=On.M)==0,Kr=Wn>=ut.Va-1,ut.Aa==2&&Vs(ut,On),On.uc)for(Xr=(Ln=ut).D.M,e(Ln.D.uc),On=Ln.yb;On<Ln.Hb;++On){ai=On,Ar=Xr;var Zn=(En=(Jr=Ln).D).Nb;Nr=Jr.R;var En=En.wa[En.Y+ai],Ki=Jr.sa,Lr=Jr.ta+16*Zn*Nr+16*ai,kt=En.dd,Ft=En.tc;if(Ft!=0)if(e(3<=Ft),Jr.L==1)0<ai&&Rm(Ki,Lr,Nr,Ft+4),En.La&&Hh(Ki,Lr,Nr,Ft),0<Ar&&Lm(Ki,Lr,Nr,Ft+4),En.La&&zh(Ki,Lr,Nr,Ft);else{var Rn=Jr.B,Ss=Jr.qa,ca=Jr.ra+8*Zn*Rn+8*ai,ds=Jr.Ha,Jr=Jr.Ia+8*Zn*Rn+8*ai;Zn=En.ld,0<ai&&(qr(Ki,Lr,Nr,Ft+4,kt,Zn),Ta(Ss,ca,ds,Jr,Rn,Ft+4,kt,Zn)),En.La&&(Ru(Ki,Lr,Nr,Ft,kt,Zn),Im(Ss,ca,ds,Jr,Rn,Ft,kt,Zn)),0<Ar&&(or(Ki,Lr,Nr,Ft+4,kt,Zn),Za(Ss,ca,ds,Jr,Rn,Ft+4,kt,Zn)),En.La&&(ql(Ki,Lr,Nr,Ft,kt,Zn),Uh(Ss,ca,ds,Jr,Rn,Ft,kt,Zn))}}if(ut.ia&&alert("todo:DitherRow"),it.put!=null){if(On=16*Wn,Wn=16*(Wn+1),Qr?(it.y=ut.sa,it.O=ut.ta+In,it.f=ut.qa,it.N=ut.ra+Br,it.ea=ut.Ha,it.W=ut.Ia+Br):(On-=fn,it.y=si,it.O=Pi,it.f=lr,it.N=ln,it.ea=Yr,it.W=Yi),Kr||(Wn-=fn),Wn>it.o&&(Wn=it.o),it.F=null,it.J=null,ut.Fa!=null&&0<ut.Fa.length&&On<Wn&&(it.J=x(ut,it,On,Wn-On),it.F=ut.mb,it.F==null&&it.F.length==0)){_r=mn(ut,3,"Could not decode alpha data.");break t}On<it.j&&(fn=it.j-On,On=it.j,e(!(1&fn)),it.O+=ut.R*fn,it.N+=ut.B*(fn>>1),it.W+=ut.B*(fn>>1),it.F!=null&&(it.J+=it.width*fn)),On<Wn&&(it.O+=it.v,it.N+=it.v>>1,it.W+=it.v>>1,it.F!=null&&(it.J+=it.v),it.ka=On-it.j,it.U=it.va-it.v,it.T=Wn-On,_r=it.put(it))}sn+1!=ut.Ic||Kr||(r(ut.sa,ut.ta-Ht,si,Pi+16*ut.R,Ht),r(ut.qa,ut.ra-Gn,lr,ln+8*ut.B,Gn),r(ut.Ha,ut.Ia-Gn,Yr,Yi+8*ut.B,Gn))}if(!_r)return mn(gn,6,"Output aborted.")}return 1})(le,Ne)),Ne.bc!=null&&Ne.bc(Ne),Te&=1}return Te?(le.cb=0,Te):0})(g,P)||(w=g.a)}}else w=g.a}w==0&&Y.Oa!=null&&Y.Oa.fd&&(w=Lu(Y.ba))}Y=w}W=Y!=0?null:11>W?Z.f.RGBA.eb:Z.f.kb.y}else W=null;return W};var Cd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(k,$){for(var S="",R=0;R<4;R++)S+=String.fromCharCode(k[$++]);return S}function p(k,$){return k[$+0]|k[$+1]<<8}function v(k,$){return(k[$+0]|k[$+1]<<8|k[$+2]<<16)>>>0}function _(k,$){return(k[$+0]|k[$+1]<<8|k[$+2]<<16|k[$+3]<<24)>>>0}new h;var b=[0],T=[0],I=[],L=new h,j=n,U=(function(k,$){var S={},R=0,F=!1,oe=0,be=0;if(S.frames=[],!(function(q,X){for(var ie=0;ie<4;ie++)if(q[X+ie]!="RIFF".charCodeAt(ie))return!0;return!1})(k,$)){for(_(k,$+=4),$+=8;$<k.length;){var Q=f(k,$),ae=_(k,$+=4);$+=4;var me=ae+(1&ae);switch(Q){case"VP8 ":case"VP8L":S.frames[R]===void 0&&(S.frames[R]={}),(J=S.frames[R]).src_off=F?be:$-8,J.src_size=oe+ae+8,R++,F&&(F=!1,oe=0,be=0);break;case"VP8X":(J=S.header={}).feature_flags=k[$];var je=$+4;J.canvas_width=1+v(k,je),je+=3,J.canvas_height=1+v(k,je),je+=3;break;case"ALPH":F=!0,oe=me+8,be=$-8;break;case"ANIM":(J=S.header).bgcolor=_(k,$),je=$+4,J.loop_count=p(k,je),je+=2;break;case"ANMF":var Fe,J;(J=S.frames[R]={}).offset_x=2*v(k,$),$+=3,J.offset_y=2*v(k,$),$+=3,J.width=1+v(k,$),$+=3,J.height=1+v(k,$),$+=3,J.duration=v(k,$),$+=3,Fe=k[$++],J.dispose=1&Fe,J.blend=Fe>>1&1}Q!="ANMF"&&($+=me)}return S}})(j,0);U.response=j,U.rgbaoutput=!0,U.dataurl=!1;var z=U.header?U.header:null,B=U.frames?U.frames:null;if(z){z.loop_counter=z.loop_count,b=[z.canvas_height],T=[z.canvas_width];for(var re=0;re<B.length&&B[re].blend!=0;re++);}var ne=B[0],V=L.WebPDecodeRGBA(j,ne.src_off,ne.src_size,T,b);ne.rgba=V,ne.imgwidth=T[0],ne.imgheight=b[0];for(var D=0;D<T[0]*b[0]*4;D++)I[D]=V[D];return this.width=T,this.height=b,this.data=I,this}(function(n){var e,t,r,i,a,c,d,h,f,p=function(q){return q=q||{},this.isStrokeTransparent=q.isStrokeTransparent||!1,this.strokeOpacity=q.strokeOpacity||1,this.strokeStyle=q.strokeStyle||"#000000",this.fillStyle=q.fillStyle||"#000000",this.isFillTransparent=q.isFillTransparent||!1,this.fillOpacity=q.fillOpacity||1,this.font=q.font||"10px sans-serif",this.textBaseline=q.textBaseline||"alphabetic",this.textAlign=q.textAlign||"left",this.lineWidth=q.lineWidth||1,this.lineJoin=q.lineJoin||"miter",this.lineCap=q.lineCap||"butt",this.path=q.path||[],this.transform=q.transform!==void 0?q.transform.clone():new h,this.globalCompositeOperation=q.globalCompositeOperation||"normal",this.globalAlpha=q.globalAlpha||1,this.clip_path=q.clip_path||[],this.currentPoint=q.currentPoint||new c,this.miterLimit=q.miterLimit||10,this.lastPoint=q.lastPoint||new c,this.lineDashOffset=q.lineDashOffset||0,this.lineDash=q.lineDash||[],this.margin=q.margin||[0,0,0,0],this.prevPageLastElemOffset=q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof q.ignoreClearRect!="boolean"||q.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new v(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,c=this.internal.Point,d=this.internal.Rectangle,h=this.internal.Matrix,f=new p}]);var v=function(q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var X=q;Object.defineProperty(this,"pdf",{get:function(){return X}});var ie=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ie},set:function(se){ie=!!se}});var fe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return fe},set:function(se){fe=!!se}});var ge=0;Object.defineProperty(this,"posX",{get:function(){return ge},set:function(se){isNaN(se)||(ge=se)}});var _e=0;Object.defineProperty(this,"posY",{get:function(){return _e},set:function(se){isNaN(se)||(_e=se)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(se){var rt;typeof se=="number"?rt=[se,se,se,se]:((rt=new Array(4))[0]=se[0],rt[1]=se.length>=2?se[1]:rt[0],rt[2]=se.length>=3?se[2]:rt[0],rt[3]=se.length>=4?se[3]:rt[1]),f.margin=rt}});var Le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Le},set:function(se){Le=se}});var ke=0;Object.defineProperty(this,"lastBreak",{get:function(){return ke},set:function(se){ke=se}});var Be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Be},set:function(se){Be=se}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(se){se instanceof p&&(f=se)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(se){f.path=se}});var Ze=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ze},set:function(se){Ze=se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(se){var rt;rt=_(se),this.ctx.fillStyle=rt.style,this.ctx.isFillTransparent=rt.a===0,this.ctx.fillOpacity=rt.a,this.pdf.setFillColor(rt.r,rt.g,rt.b,{a:rt.a}),this.pdf.setTextColor(rt.r,rt.g,rt.b,{a:rt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(se){var rt=_(se);this.ctx.strokeStyle=rt.style,this.ctx.isStrokeTransparent=rt.a===0,this.ctx.strokeOpacity=rt.a,rt.a===0?this.pdf.setDrawColor(255,255,255):(rt.a,this.pdf.setDrawColor(rt.r,rt.g,rt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(se){["butt","round","square"].indexOf(se)!==-1&&(this.ctx.lineCap=se,this.pdf.setLineCap(se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(se){isNaN(se)||(this.ctx.lineWidth=se,this.pdf.setLineWidth(se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(se){["bevel","round","miter"].indexOf(se)!==-1&&(this.ctx.lineJoin=se,this.pdf.setLineJoin(se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(se){isNaN(se)||(this.ctx.miterLimit=se,this.pdf.setMiterLimit(se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(se){this.ctx.textBaseline=se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(se){["right","end","center","left","start"].indexOf(se)!==-1&&(this.ctx.textAlign=se)}});var ot=null,st=null,dt=null;Object.defineProperty(this,"fontFaces",{get:function(){return dt},set:function(se){ot=null,st=null,dt=se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(se){var rt;if(this.ctx.font=se,(rt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(se))!==null){var Kt=rt[1];rt[2];var St=rt[3],pe=rt[4];rt[5];var Ue=rt[6],Qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(pe)[2];pe=Math.floor(Qe==="px"?parseFloat(pe)*this.pdf.internal.scaleFactor:Qe==="em"?parseFloat(pe)*this.pdf.getFontSize():parseFloat(pe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(pe);var at=(function(_t){var br,rn,Lt=[],zt=_t.trim();if(zt==="")return Av;if(zt in CN)return[CN[zt]];for(;zt!=="";){switch(rn=null,br=(zt=LN(zt)).charAt(0)){case'"':case"'":rn=$q(zt.substring(1),br);break;default:rn=Gq(zt)}if(rn===null||(Lt.push(rn[0]),(zt=LN(rn[1]))!==""&&zt.charAt(0)!==","))return Av;zt=zt.replace(/^,/,"")}return Lt})(Ue);if(this.fontFaces){var nt=(function(_t,br){var rn=_t.getFontList(),Lt=JSON.stringify(rn);if(ot===null||st!==Lt){var zt=(function(en){var Tt=[];return Object.keys(en).forEach(function(Dn){en[Dn].forEach(function(Vt){var Bt=null;switch(Vt){case"bold":Bt={family:Dn,weight:"bold"};break;case"italic":Bt={family:Dn,style:"italic"};break;case"bolditalic":Bt={family:Dn,weight:"bold",style:"italic"};break;case"":case"normal":Bt={family:Dn}}Bt!==null&&(Bt.ref={name:Dn,style:Vt},Tt.push(Bt))})}),Tt})(rn);ot=(function(en){for(var Tt={},Dn=0;Dn<en.length;++Dn){var Vt=Nv(en[Dn]),Bt=Vt.family,qn=Vt.stretch,jt=Vt.style,Nt=Vt.weight;Tt[Bt]=Tt[Bt]||{},Tt[Bt][qn]=Tt[Bt][qn]||{},Tt[Bt][qn][jt]=Tt[Bt][qn][jt]||{},Tt[Bt][qn][jt][Nt]=Vt}return Tt})(zt.concat(br)),st=Lt}return ot})(this.pdf,this.fontFaces),pt=at.map(function(_t){return{family:_t,stretch:"normal",weight:St,style:Kt}}),Gt=(function(_t,br,rn){for(var Lt=(rn=rn||{}).defaultFontFamily||"times",zt=Object.assign({},Hq,rn.genericFontFamilies||{}),en=null,Tt=null,Dn=0;Dn<br.length;++Dn)if(zt[(en=Nv(br[Dn])).family]&&(en.family=zt[en.family]),_t.hasOwnProperty(en.family)){Tt=_t[en.family];break}if(!(Tt=Tt||_t[Lt]))throw new Error("Could not find a font-family for the rule '"+IN(en)+"' and default family '"+Lt+"'.");if(Tt=(function(Vt,Bt){if(Bt[Vt])return Bt[Vt];var qn=A1[Vt],jt=qn<=A1.normal?-1:1,Nt=TN(Bt,Nj,qn,jt);if(!Nt)throw new Error("Could not find a matching font-stretch value for "+Vt);return Nt})(en.stretch,Tt),Tt=(function(Vt,Bt){if(Bt[Vt])return Bt[Vt];for(var qn=_j[Vt],jt=0;jt<qn.length;++jt)if(Bt[qn[jt]])return Bt[qn[jt]];throw new Error("Could not find a matching font-style for "+Vt)})(en.style,Tt),!(Tt=(function(Vt,Bt){if(Bt[Vt])return Bt[Vt];if(Vt===400&&Bt[500])return Bt[500];if(Vt===500&&Bt[400])return Bt[400];var qn=zq[Vt],jt=TN(Bt,Aj,qn,Vt<400?-1:1);if(!jt)throw new Error("Could not find a matching font-weight for value "+Vt);return jt})(en.weight,Tt)))throw new Error("Failed to resolve a font for the rule '"+IN(en)+"'.");return Tt})(nt,pt);this.pdf.setFont(Gt.ref.name,Gt.ref.style)}else{var Mt="";(St==="bold"||parseInt(St,10)>=700||Kt==="bold")&&(Mt="bold"),Kt==="italic"&&(Mt+="italic"),Mt.length===0&&(Mt="normal");for(var cn="",nn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},bt=0;bt<at.length;bt++){if(this.pdf.internal.getFont(at[bt],Mt,{noFallback:!0,disableWarning:!0})!==void 0){cn=at[bt];break}if(Mt==="bolditalic"&&this.pdf.internal.getFont(at[bt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)cn=at[bt],Mt="bold";else if(this.pdf.internal.getFont(at[bt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){cn=at[bt],Mt="normal";break}}if(cn===""){for(var Xt=0;Xt<at.length;Xt++)if(nn[at[Xt]]){cn=nn[at[Xt]];break}}cn=cn===""?"Times":cn,this.pdf.setFont(cn,Mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(se){this.ctx.globalCompositeOperation=se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(se){this.ctx.globalAlpha=se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(se){this.ctx.lineDashOffset=se,J.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(se){this.ctx.lineDash=se,J.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(se){this.ctx.ignoreClearRect=!!se}})};v.prototype.setLineDash=function(q){this.lineDash=q},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){B.call(this,"fill",!1)},v.prototype.stroke=function(){B.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(q,X){if(isNaN(q)||isNaN(X))throw yr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ie=this.ctx.transform.applyToPoint(new c(q,X));this.path.push({type:"mt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new c(q,X)},v.prototype.closePath=function(){var q=new c(0,0),X=0;for(X=this.path.length-1;X!==-1;X--)if(this.path[X].type==="begin"&&nr(this.path[X+1])==="object"&&typeof this.path[X+1].x=="number"){q=new c(this.path[X+1].x,this.path[X+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(q.x,q.y)},v.prototype.lineTo=function(q,X){if(isNaN(q)||isNaN(X))throw yr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ie=this.ctx.transform.applyToPoint(new c(q,X));this.path.push({type:"lt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new c(ie.x,ie.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),B.call(this,null,!0)},v.prototype.quadraticCurveTo=function(q,X,ie,fe){if(isNaN(ie)||isNaN(fe)||isNaN(q)||isNaN(X))throw yr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ge=this.ctx.transform.applyToPoint(new c(ie,fe)),_e=this.ctx.transform.applyToPoint(new c(q,X));this.path.push({type:"qct",x1:_e.x,y1:_e.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new c(ge.x,ge.y)},v.prototype.bezierCurveTo=function(q,X,ie,fe,ge,_e){if(isNaN(ge)||isNaN(_e)||isNaN(q)||isNaN(X)||isNaN(ie)||isNaN(fe))throw yr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Le=this.ctx.transform.applyToPoint(new c(ge,_e)),ke=this.ctx.transform.applyToPoint(new c(q,X)),Be=this.ctx.transform.applyToPoint(new c(ie,fe));this.path.push({type:"bct",x1:ke.x,y1:ke.y,x2:Be.x,y2:Be.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new c(Le.x,Le.y)},v.prototype.arc=function(q,X,ie,fe,ge,_e){if(isNaN(q)||isNaN(X)||isNaN(ie)||isNaN(fe)||isNaN(ge))throw yr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_e=!!_e,!this.ctx.transform.isIdentity){var Le=this.ctx.transform.applyToPoint(new c(q,X));q=Le.x,X=Le.y;var ke=this.ctx.transform.applyToPoint(new c(0,ie)),Be=this.ctx.transform.applyToPoint(new c(0,0));ie=Math.sqrt(Math.pow(ke.x-Be.x,2)+Math.pow(ke.y-Be.y,2))}Math.abs(ge-fe)>=2*Math.PI&&(fe=0,ge=2*Math.PI),this.path.push({type:"arc",x:q,y:X,radius:ie,startAngle:fe,endAngle:ge,counterclockwise:_e})},v.prototype.arcTo=function(q,X,ie,fe,ge){throw new Error("arcTo not implemented.")},v.prototype.rect=function(q,X,ie,fe){if(isNaN(q)||isNaN(X)||isNaN(ie)||isNaN(fe))throw yr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(q,X),this.lineTo(q+ie,X),this.lineTo(q+ie,X+fe),this.lineTo(q,X+fe),this.lineTo(q,X),this.lineTo(q+ie,X),this.lineTo(q,X)},v.prototype.fillRect=function(q,X,ie,fe){if(isNaN(q)||isNaN(X)||isNaN(ie)||isNaN(fe))throw yr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var ge={};this.lineCap!=="butt"&&(ge.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ge.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(q,X,ie,fe),this.fill(),ge.hasOwnProperty("lineCap")&&(this.lineCap=ge.lineCap),ge.hasOwnProperty("lineJoin")&&(this.lineJoin=ge.lineJoin)}},v.prototype.strokeRect=function(q,X,ie,fe){if(isNaN(q)||isNaN(X)||isNaN(ie)||isNaN(fe))throw yr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");T.call(this)||(this.beginPath(),this.rect(q,X,ie,fe),this.stroke())},v.prototype.clearRect=function(q,X,ie,fe){if(isNaN(q)||isNaN(X)||isNaN(ie)||isNaN(fe))throw yr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(q,X,ie,fe))},v.prototype.save=function(q){q=typeof q!="boolean"||q;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("q");if(this.pdf.setPage(X),q){this.ctx.fontSize=this.pdf.internal.getFontSize();var fe=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=fe}},v.prototype.restore=function(q){q=typeof q!="boolean"||q;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("Q");this.pdf.setPage(X),q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var _=function(q){var X,ie,fe,ge;if(q.isCanvasGradient===!0&&(q=q.getColor()),!q)return{r:0,g:0,b:0,a:0,style:q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(q))X=0,ie=0,fe=0,ge=0;else{var _e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(q);if(_e!==null)X=parseInt(_e[1]),ie=parseInt(_e[2]),fe=parseInt(_e[3]),ge=1;else if((_e=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(q))!==null)X=parseInt(_e[1]),ie=parseInt(_e[2]),fe=parseInt(_e[3]),ge=parseFloat(_e[4]);else{if(ge=1,typeof q=="string"&&q.charAt(0)!=="#"){var Le=new pj(q);q=Le.ok?Le.toHex():"#000000"}q.length===4?(X=q.substring(1,2),X+=X,ie=q.substring(2,3),ie+=ie,fe=q.substring(3,4),fe+=fe):(X=q.substring(1,3),ie=q.substring(3,5),fe=q.substring(5,7)),X=parseInt(X,16),ie=parseInt(ie,16),fe=parseInt(fe,16)}}return{r:X,g:ie,b:fe,a:ge,style:q}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},T=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(q,X,ie,fe){if(isNaN(X)||isNaN(ie)||typeof q!="string")throw yr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(fe=isNaN(fe)?void 0:fe,!b.call(this)){var ge=me(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;R.call(this,{text:q,x:X,y:ie,scale:_e,angle:ge,align:this.textAlign,maxWidth:fe})}},v.prototype.strokeText=function(q,X,ie,fe){if(isNaN(X)||isNaN(ie)||typeof q!="string")throw yr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!T.call(this)){fe=isNaN(fe)?void 0:fe;var ge=me(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;R.call(this,{text:q,x:X,y:ie,scale:_e,renderingMode:"stroke",angle:ge,align:this.textAlign,maxWidth:fe})}},v.prototype.measureText=function(q){if(typeof q!="string")throw yr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var X=this.pdf,ie=this.pdf.internal.scaleFactor,fe=X.internal.getFontSize(),ge=X.getStringUnitWidth(q)*fe/X.internal.scaleFactor;return new function(_e){var Le=(_e=_e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Le}}),this}({width:ge*=Math.round(96*ie/72*1e4)/1e4})},v.prototype.scale=function(q,X){if(isNaN(q)||isNaN(X))throw yr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ie=new h(q,0,0,X,0,0);this.ctx.transform=this.ctx.transform.multiply(ie)},v.prototype.rotate=function(q){if(isNaN(q))throw yr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var X=new h(Math.cos(q),Math.sin(q),-Math.sin(q),Math.cos(q),0,0);this.ctx.transform=this.ctx.transform.multiply(X)},v.prototype.translate=function(q,X){if(isNaN(q)||isNaN(X))throw yr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ie=new h(1,0,0,1,q,X);this.ctx.transform=this.ctx.transform.multiply(ie)},v.prototype.transform=function(q,X,ie,fe,ge,_e){if(isNaN(q)||isNaN(X)||isNaN(ie)||isNaN(fe)||isNaN(ge)||isNaN(_e))throw yr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Le=new h(q,X,ie,fe,ge,_e);this.ctx.transform=this.ctx.transform.multiply(Le)},v.prototype.setTransform=function(q,X,ie,fe,ge,_e){q=isNaN(q)?1:q,X=isNaN(X)?0:X,ie=isNaN(ie)?0:ie,fe=isNaN(fe)?1:fe,ge=isNaN(ge)?0:ge,_e=isNaN(_e)?0:_e,this.ctx.transform=new h(q,X,ie,fe,ge,_e)};var I=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(q,X,ie,fe,ge,_e,Le,ke,Be){var Ze=this.pdf.getImageProperties(q),ot=1,st=1,dt=1,se=1;fe!==void 0&&ke!==void 0&&(dt=ke/fe,se=Be/ge,ot=Ze.width/fe*ke/fe,st=Ze.height/ge*Be/ge),_e===void 0&&(_e=X,Le=ie,X=0,ie=0),fe!==void 0&&ke===void 0&&(ke=fe,Be=ge),fe===void 0&&ke===void 0&&(ke=Ze.width,Be=Ze.height);var rt=this.ctx.transform.decompose(),Kt=me(rt.rotate.shx),St=new h,pe=(St=(St=(St=St.multiply(rt.translate)).multiply(rt.skew)).multiply(rt.scale)).applyToRectangle(new d(_e-X*dt,Le-ie*se,fe*ot,ge*st));if(this.autoPaging){for(var Ue,Qe=L.call(this,pe),at=[],nt=0;nt<Qe.length;nt+=1)at.indexOf(Qe[nt])===-1&&at.push(Qe[nt]);z(at);for(var pt=at[0],Gt=at[at.length-1],Mt=pt;Mt<Gt+1;Mt++){this.pdf.setPage(Mt);var cn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nn=Mt===1?this.posY+this.margin[0]:this.margin[0],bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=Mt===1?0:bt+(Mt-2)*Xt;if(this.ctx.clip_path.length!==0){var br=this.path;Ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Ue,this.posX+this.margin[3],-_t+nn+this.ctx.prevPageLastElemOffset),re.call(this,"fill",!0),this.path=br}var rn=JSON.parse(JSON.stringify(pe));rn=U([rn],this.posX+this.margin[3],-_t+nn+this.ctx.prevPageLastElemOffset)[0];var Lt=(Mt>pt||Mt<Gt)&&I.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],cn,Xt,null).clip().discardPath()),this.pdf.addImage(q,"JPEG",rn.x,rn.y,rn.w,rn.h,null,null,Kt),Lt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(q,"JPEG",pe.x,pe.y,pe.w,pe.h,null,null,Kt)};var L=function(q,X,ie){var fe=[];X=X||this.pdf.internal.pageSize.width,ie=ie||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ge=this.posY+this.ctx.prevPageLastElemOffset;switch(q.type){default:case"mt":case"lt":fe.push(Math.floor((q.y+ge)/ie)+1);break;case"arc":fe.push(Math.floor((q.y+ge-q.radius)/ie)+1),fe.push(Math.floor((q.y+ge+q.radius)/ie)+1);break;case"qct":var _e=je(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x,q.y);fe.push(Math.floor((_e.y+ge)/ie)+1),fe.push(Math.floor((_e.y+_e.h+ge)/ie)+1);break;case"bct":var Le=Fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x2,q.y2,q.x,q.y);fe.push(Math.floor((Le.y+ge)/ie)+1),fe.push(Math.floor((Le.y+Le.h+ge)/ie)+1);break;case"rect":fe.push(Math.floor((q.y+ge)/ie)+1),fe.push(Math.floor((q.y+q.h+ge)/ie)+1)}for(var ke=0;ke<fe.length;ke+=1)for(;this.pdf.internal.getNumberOfPages()<fe[ke];)j.call(this);return fe},j=function(){var q=this.fillStyle,X=this.strokeStyle,ie=this.font,fe=this.lineCap,ge=this.lineWidth,_e=this.lineJoin;this.pdf.addPage(),this.fillStyle=q,this.strokeStyle=X,this.font=ie,this.lineCap=fe,this.lineWidth=ge,this.lineJoin=_e},U=function(q,X,ie){for(var fe=0;fe<q.length;fe++)switch(q[fe].type){case"bct":q[fe].x2+=X,q[fe].y2+=ie;case"qct":q[fe].x1+=X,q[fe].y1+=ie;default:q[fe].x+=X,q[fe].y+=ie}return q},z=function(q){return q.sort(function(X,ie){return X-ie})},B=function(q,X){var ie=this.fillStyle,fe=this.strokeStyle,ge=this.lineCap,_e=this.lineWidth,Le=Math.abs(_e*this.ctx.transform.scaleX),ke=this.lineJoin;if(this.autoPaging){for(var Be,Ze,ot=JSON.parse(JSON.stringify(this.path)),st=JSON.parse(JSON.stringify(this.path)),dt=[],se=0;se<st.length;se++)if(st[se].x!==void 0)for(var rt=L.call(this,st[se]),Kt=0;Kt<rt.length;Kt+=1)dt.indexOf(rt[Kt])===-1&&dt.push(rt[Kt]);for(var St=0;St<dt.length;St++)for(;this.pdf.internal.getNumberOfPages()<dt[St];)j.call(this);z(dt);for(var pe=dt[0],Ue=dt[dt.length-1],Qe=pe;Qe<Ue+1;Qe++){this.pdf.setPage(Qe),this.fillStyle=ie,this.strokeStyle=fe,this.lineCap=ge,this.lineWidth=Le,this.lineJoin=ke;var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nt=Qe===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Mt=Qe===1?0:pt+(Qe-2)*Gt;if(this.ctx.clip_path.length!==0){var cn=this.path;Be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Be,this.posX+this.margin[3],-Mt+nt+this.ctx.prevPageLastElemOffset),re.call(this,q,!0),this.path=cn}if(Ze=JSON.parse(JSON.stringify(ot)),this.path=U(Ze,this.posX+this.margin[3],-Mt+nt+this.ctx.prevPageLastElemOffset),X===!1||Qe===0){var nn=(Qe>pe||Qe<Ue)&&I.call(this);nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,Gt,null).clip().discardPath()),re.call(this,q,X),nn&&this.pdf.restoreGraphicsState()}this.lineWidth=_e}this.path=ot}else this.lineWidth=Le,re.call(this,q,X),this.lineWidth=_e},re=function(q,X){if((q!=="stroke"||X||!T.call(this))&&(q==="stroke"||X||!b.call(this))){for(var ie,fe,ge=[],_e=this.path,Le=0;Le<_e.length;Le++){var ke=_e[Le];switch(ke.type){case"begin":ge.push({begin:!0});break;case"close":ge.push({close:!0});break;case"mt":ge.push({start:ke,deltas:[],abs:[]});break;case"lt":var Be=ge.length;if(_e[Le-1]&&!isNaN(_e[Le-1].x)&&(ie=[ke.x-_e[Le-1].x,ke.y-_e[Le-1].y],Be>0)){for(;Be>=0;Be--)if(ge[Be-1].close!==!0&&ge[Be-1].begin!==!0){ge[Be-1].deltas.push(ie),ge[Be-1].abs.push(ke);break}}break;case"bct":ie=[ke.x1-_e[Le-1].x,ke.y1-_e[Le-1].y,ke.x2-_e[Le-1].x,ke.y2-_e[Le-1].y,ke.x-_e[Le-1].x,ke.y-_e[Le-1].y],ge[ge.length-1].deltas.push(ie);break;case"qct":var Ze=_e[Le-1].x+2/3*(ke.x1-_e[Le-1].x),ot=_e[Le-1].y+2/3*(ke.y1-_e[Le-1].y),st=ke.x+2/3*(ke.x1-ke.x),dt=ke.y+2/3*(ke.y1-ke.y),se=ke.x,rt=ke.y;ie=[Ze-_e[Le-1].x,ot-_e[Le-1].y,st-_e[Le-1].x,dt-_e[Le-1].y,se-_e[Le-1].x,rt-_e[Le-1].y],ge[ge.length-1].deltas.push(ie);break;case"arc":ge.push({deltas:[],abs:[],arc:!0}),Array.isArray(ge[ge.length-1].abs)&&ge[ge.length-1].abs.push(ke)}}fe=X?null:q==="stroke"?"stroke":"fill";for(var Kt=!1,St=0;St<ge.length;St++)if(ge[St].arc)for(var pe=ge[St].abs,Ue=0;Ue<pe.length;Ue++){var Qe=pe[Ue];Qe.type==="arc"?D.call(this,Qe.x,Qe.y,Qe.radius,Qe.startAngle,Qe.endAngle,Qe.counterclockwise,void 0,X,!Kt):F.call(this,Qe.x,Qe.y),Kt=!0}else if(ge[St].close===!0)this.pdf.internal.out("h"),Kt=!1;else if(ge[St].begin!==!0){var at=ge[St].start.x,nt=ge[St].start.y;oe.call(this,ge[St].deltas,at,nt),Kt=!0}fe&&k.call(this,fe),X&&$.call(this)}},ne=function(q){var X=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ie=X*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return q-ie;case"top":return q+X-ie;case"hanging":return q+X-2*ie;case"middle":return q+X/2-ie;default:return q}},V=function(q){return q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var q=function(){};return q.colorStops=[],q.addColorStop=function(X,ie){this.colorStops.push([X,ie])},q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},q.isCanvasGradient=!0,q},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var D=function(q,X,ie,fe,ge,_e,Le,ke,Be){for(var Ze=Q.call(this,ie,fe,ge,_e),ot=0;ot<Ze.length;ot++){var st=Ze[ot];ot===0&&(Be?S.call(this,st.x1+q,st.y1+X):F.call(this,st.x1+q,st.y1+X)),be.call(this,q,X,st.x2,st.y2,st.x3,st.y3,st.x4,st.y4)}ke?$.call(this):k.call(this,Le)},k=function(q){switch(q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},$=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(q,X){this.pdf.internal.out(t(q)+" "+r(X)+" m")},R=function(q){var X;switch(q.align){case"right":case"end":X="right";break;case"center":X="center";break;default:X="left"}var ie,fe,ge,_e=this.pdf.getTextDimensions(q.text),Le=ne.call(this,q.y),ke=V.call(this,Le)-_e.h,Be=this.ctx.transform.applyToPoint(new c(q.x,Le));if(this.autoPaging){var Ze=this.ctx.transform.decompose(),ot=new h;ot=(ot=(ot=ot.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale);for(var st=this.ctx.transform.applyToRectangle(new d(q.x,Le,_e.w,_e.h)),dt=ot.applyToRectangle(new d(q.x,ke,_e.w,_e.h)),se=L.call(this,dt),rt=[],Kt=0;Kt<se.length;Kt+=1)rt.indexOf(se[Kt])===-1&&rt.push(se[Kt]);z(rt);for(var St=rt[0],pe=rt[rt.length-1],Ue=St;Ue<pe+1;Ue++){this.pdf.setPage(Ue);var Qe=Ue===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[2],pt=nt-this.margin[0],Gt=this.pdf.internal.pageSize.width-this.margin[1],Mt=Gt-this.margin[3],cn=Ue===1?0:at+(Ue-2)*pt;if(this.ctx.clip_path.length!==0){var nn=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(ie,this.posX+this.margin[3],-1*cn+Qe),re.call(this,"fill",!0),this.path=nn}var bt=U([JSON.parse(JSON.stringify(dt))],this.posX+this.margin[3],-cn+Qe+this.ctx.prevPageLastElemOffset)[0];q.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*q.scale),ge=this.lineWidth,this.lineWidth=ge*q.scale);var Xt=this.autoPaging!=="text";if(Xt||bt.y+bt.h<=nt){if(Xt||bt.y>=Qe&&bt.x<=Gt){var _t=Xt?q.text:this.pdf.splitTextToSize(q.text,q.maxWidth||Gt-bt.x)[0],br=U([JSON.parse(JSON.stringify(st))],this.posX+this.margin[3],-cn+Qe+this.ctx.prevPageLastElemOffset)[0],rn=Xt&&(Ue>St||Ue<pe)&&I.call(this);rn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,pt,null).clip().discardPath()),this.pdf.text(_t,br.x,br.y,{angle:q.angle,align:X,renderingMode:q.renderingMode}),rn&&this.pdf.restoreGraphicsState()}}else bt.y<nt&&(this.ctx.prevPageLastElemOffset+=nt-bt.y);q.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=ge)}}else q.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*q.scale),ge=this.lineWidth,this.lineWidth=ge*q.scale),this.pdf.text(q.text,Be.x+this.posX,Be.y+this.posY,{angle:q.angle,align:X,renderingMode:q.renderingMode,maxWidth:q.maxWidth}),q.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=ge)},F=function(q,X,ie,fe){ie=ie||0,fe=fe||0,this.pdf.internal.out(t(q+ie)+" "+r(X+fe)+" l")},oe=function(q,X,ie){return this.pdf.lines(q,X,ie,null,null)},be=function(q,X,ie,fe,ge,_e,Le,ke){this.pdf.internal.out([e(i(ie+q)),e(a(fe+X)),e(i(ge+q)),e(a(_e+X)),e(i(Le+q)),e(a(ke+X)),"c"].join(" "))},Q=function(q,X,ie,fe){for(var ge=2*Math.PI,_e=Math.PI/2;X>ie;)X-=ge;var Le=Math.abs(ie-X);Le<ge&&fe&&(Le=ge-Le);for(var ke=[],Be=fe?-1:1,Ze=X;Le>1e-5;){var ot=Ze+Be*Math.min(Le,_e);ke.push(ae.call(this,q,Ze,ot)),Le-=Math.abs(ot-Ze),Ze=ot}return ke},ae=function(q,X,ie){var fe=(ie-X)/2,ge=q*Math.cos(fe),_e=q*Math.sin(fe),Le=ge,ke=-_e,Be=Le*Le+ke*ke,Ze=Be+Le*ge+ke*_e,ot=4/3*(Math.sqrt(2*Be*Ze)-Ze)/(Le*_e-ke*ge),st=Le-ot*ke,dt=ke+ot*Le,se=st,rt=-dt,Kt=fe+X,St=Math.cos(Kt),pe=Math.sin(Kt);return{x1:q*Math.cos(X),y1:q*Math.sin(X),x2:st*St-dt*pe,y2:st*pe+dt*St,x3:se*St-rt*pe,y3:se*pe+rt*St,x4:q*Math.cos(ie),y4:q*Math.sin(ie)}},me=function(q){return 180*q/Math.PI},je=function(q,X,ie,fe,ge,_e){var Le=q+.5*(ie-q),ke=X+.5*(fe-X),Be=ge+.5*(ie-ge),Ze=_e+.5*(fe-_e),ot=Math.min(q,ge,Le,Be),st=Math.max(q,ge,Le,Be),dt=Math.min(X,_e,ke,Ze),se=Math.max(X,_e,ke,Ze);return new d(ot,dt,st-ot,se-dt)},Fe=function(q,X,ie,fe,ge,_e,Le,ke){var Be,Ze,ot,st,dt,se,rt,Kt,St,pe,Ue,Qe,at,nt,pt=ie-q,Gt=fe-X,Mt=ge-ie,cn=_e-fe,nn=Le-ge,bt=ke-_e;for(Ze=0;Ze<41;Ze++)St=(rt=(ot=q+(Be=Ze/40)*pt)+Be*((dt=ie+Be*Mt)-ot))+Be*(dt+Be*(ge+Be*nn-dt)-rt),pe=(Kt=(st=X+Be*Gt)+Be*((se=fe+Be*cn)-st))+Be*(se+Be*(_e+Be*bt-se)-Kt),Ze==0?(Ue=St,Qe=pe,at=St,nt=pe):(Ue=Math.min(Ue,St),Qe=Math.min(Qe,pe),at=Math.max(at,St),nt=Math.max(nt,pe));return new d(Math.round(Ue),Math.round(Qe),Math.round(at-Ue),Math.round(nt-Qe))},J=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var q,X,ie=(q=this.ctx.lineDash,X=this.ctx.lineDashOffset,JSON.stringify({lineDash:q,lineDashOffset:X}));this.prevLineDash!==ie&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ie)}}})(Et.API),(function(n){var e=function(c){var d,h,f,p,v,_,b,T,I,L;for(h=[],f=0,p=(c+=d="\0\0\0\0".slice(c.length%4||4)).length;p>f;f+=4)(v=(c.charCodeAt(f)<<24)+(c.charCodeAt(f+1)<<16)+(c.charCodeAt(f+2)<<8)+c.charCodeAt(f+3))!==0?(_=(v=((v=((v=((v=(v-(L=v%85))/85)-(I=v%85))/85)-(T=v%85))/85)-(b=v%85))/85)%85,h.push(_+33,b+33,T+33,I+33,L+33)):h.push(122);return(function(j,U){for(var z=U;z>0;z--)j.pop()})(h,d.length),String.fromCharCode.apply(String,h)+"~>"},t=function(c){var d,h,f,p,v,_=String,b="length",T=255,I="charCodeAt",L="slice",j="replace";for(c[L](-2),c=c[L](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),f=[],p=0,v=(c+=d="uuuuu"[L](c[b]%5||5))[b];v>p;p+=5)h=52200625*(c[I](p)-33)+614125*(c[I](p+1)-33)+7225*(c[I](p+2)-33)+85*(c[I](p+3)-33)+(c[I](p+4)-33),f.push(T&h>>24,T&h>>16,T&h>>8,T&h);return(function(U,z){for(var B=z;B>0;B--)U.pop()})(f,d[b]),_.fromCharCode.apply(_,f)},r=function(c){return c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(c){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),d.test(c)===!1)return"";for(var h="",f=0;f<c.length;f+=2)h+=String.fromCharCode("0x"+(c[f]+c[f+1]));return h},a=function(c){for(var d=new Uint8Array(c.length),h=c.length;h--;)d[h]=c.charCodeAt(h);return(d=x1(d)).reduce(function(f,p){return f+String.fromCharCode(p)},"")};n.processDataByFilters=function(c,d){var h=0,f=c||"",p=[];for(typeof(d=d||[])=="string"&&(d=[d]),h=0;h<d.length;h+=1)switch(d[h]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=i(f),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=r(f),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=a(f),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[h]+'" is not implemented')}return{data:f,reverseChain:p.reverse().join(" ")}}})(Et.API),(function(n){n.loadFile=function(e,t,r){return(function(i,a,c){a=a!==!1,c=typeof c=="function"?c:function(){};var d=void 0;try{d=(function(h,f,p){var v=new XMLHttpRequest,_=0,b=function(T){var I=T.length,L=[],j=String.fromCharCode;for(_=0;_<I;_+=1)L.push(j(255&T.charCodeAt(_)));return L.join("")};if(v.open("GET",h,!f),v.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(v.onload=function(){v.status===200?p(b(this.responseText)):p(void 0)}),v.send(null),f&&v.status===200)return b(v.responseText)})(i,a,c)}catch{}return d})(e,t,r)},n.loadImageFile=n.loadFile})(Et.API),(function(n){function e(){return(Zt.html2canvas?Promise.resolve(Zt.html2canvas):sv(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function t(){return(Zt.DOMPurify?Promise.resolve(Zt.DOMPurify):sv(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var r=function(d){var h=nr(d);return h==="undefined"?"undefined":h==="string"||d instanceof String?"string":h==="number"||d instanceof Number?"number":h==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":h==="object"?"object":"unknown"},i=function(d,h){var f=document.createElement(d);for(var p in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[p]=h.style[p];return f},a=function d(h,f){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),v=h.firstChild;v;v=v.nextSibling)f!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(d(v,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p},c=function d(h){var f=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),p=d.convert(Promise.resolve(),f);return(p=p.setProgress(1,d,1,[d])).set(h)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(d,h){return d.__proto__=h||c.prototype,d},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(d,h){return this.then(function(){switch(h=h||(function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),h){case"string":return this.then(t).then(function(f){return this.set({src:i("div",{innerHTML:d,dompurify:f})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},c.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var f=this.opt.jsPDF,p=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=p,p)for(var b=0;b<p.length;++b){var T=p[b],I=T.src.find(function(L){return L.format==="truetype"});I&&f.addFont(I.url,T.ref.name,T.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,f.context2d.save(!0),h(this.prop.container,_)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(d,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(d,h):this.outputPdf(d,h)},c.prototype.outputPdf=function(d,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,h)})},c.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},c.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(d){if(r(d)!=="object")return this;var h=Object.keys(d||{}).map(function(f){if(f in c.template.prop)return function(){this.prop[f]=d[f]};switch(f){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[f]=d[f]}}},this);return this.then(function(){return this.thenList(h)})},c.prototype.get=function(d,h){return this.then(function(){var f=d in c.template.prop?this.prop[d]:this.opt[d];return h?h(f):f})},c.prototype.setMargin=function(d){return this.then(function(){switch(r(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},c.prototype.setPageSize=function(d){function h(f,p){return Math.floor(f*p/72*96)}return this.then(function(){(d=d||Et.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:h(d.inner.width,d.k),height:h(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},c.prototype.setProgress=function(d,h,f,p){return d!=null&&(this.progress.val=d),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(d,h,f,p){return this.setProgress(d?this.progress.val+d:null,h||null,f?this.progress.n+f:null,p?this.progress.stack.concat(p):null)},c.prototype.then=function(d,h){var f=this;return this.thenCore(d,h,function(p,v){return f.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(_){return f.updateProgress(null,p),_}).then(p,v).then(function(_){return f.updateProgress(1),_})})},c.prototype.thenCore=function(d,h,f){f=f||Promise.prototype.then;var p=this;d&&(d=d.bind(p)),h&&(h=h.bind(p));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:c.convert(Object.assign({},p),Promise.prototype),_=f.call(v,d,h);return c.convert(_,p.__proto__)},c.prototype.thenExternal=function(d,h){return Promise.prototype.then.call(this,d,h)},c.prototype.thenList=function(d){var h=this;return d.forEach(function(f){h=h.thenCore(f)}),h},c.prototype.catch=function(d){d&&(d=d.bind(this));var h=Promise.prototype.catch.call(this,d);return c.convert(h,this)},c.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},c.prototype.error=function(d){return this.then(function(){throw new Error(d)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,Et.getPageSize=function(d,h,f){if(nr(d)==="object"){var p=d;d=p.orientation,h=p.unit||h,f=p.format||f}h=h||"mm",f=f||"a4",d=(""+(d||"P")).toLowerCase();var v,_=(""+f).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+h}var T,I=0,L=0;if(b.hasOwnProperty(_))I=b[_][1]/v,L=b[_][0]/v;else try{I=f[1],L=f[0]}catch{throw new Error("Invalid format: "+f)}if(d==="p"||d==="portrait")d="p",L>I&&(T=L,L=I,I=T);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",I>L&&(T=L,L=I,I=T)}return{width:L,height:I,unit:h,k:v,orientation:d}},n.html=function(d,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Nv):null;var f=new c(h);return h.worker?f:f.from(d).doCallback()}})(Et.API),Et.API.addJS=function(n){return kN=n,this.internal.events.subscribe("postPutResources",function(){Op=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Op+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),RN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+kN+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Op!==void 0&&RN!==void 0&&this.internal.out("/Names <</JavaScript "+Op+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var c=i[a],d=r.exec(c);if(d!=null){var h=d[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(a=0;a<f;a++){var v=t.internal.newObject();p.push(v);var _=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+_.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<p.length;a++)t.internal.write("(page_"+(a+1)+")"+p[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,a){var c={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var c=r.children[a];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var d=this.count=this.count_r({count:0},c);if(d>0&&this.line("/Count "+d),c.options&&c.options.pageNumber){var h=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])})(Et.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,a,c,d){var h,f=this.decode.DCT_DECODE,p=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(v){for(var _,b=256*v.charCodeAt(4)+v.charCodeAt(5),T=v.length,I={width:0,height:0,numcomponents:1},L=4;L<T;L+=2){if(L+=b,e.indexOf(v.charCodeAt(L+1))!==-1){_=256*v.charCodeAt(L+5)+v.charCodeAt(L+6),I={width:256*v.charCodeAt(L+7)+v.charCodeAt(L+8),height:_,numcomponents:v.charCodeAt(L+9)};break}b=256*v.charCodeAt(L+2)+v.charCodeAt(L+3)}return I})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}p={data:t,width:h.width,height:h.height,colorSpace:d,bitsPerComponent:8,filter:f,index:r,alias:i}}return p}})(Et.API),Et.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,a=Cq(n,{checkCrc:!0}),c=a.width,d=a.height,h=a.channels,f=a.palette,p=a.depth;i=f&&h===1?(function(D){for(var k=D.width,$=D.height,S=D.data,R=D.palette,F=D.depth,oe=!1,be=[],Q=[],ae=void 0,me=!1,je=0,Fe=0;Fe<R.length;Fe++){var J=O_(R[Fe],4),q=J[0],X=J[1],ie=J[2],fe=J[3];be.push(q,X,ie),fe!=null&&(fe===0?(je++,Q.length<1&&Q.push(Fe)):fe<255&&(me=!0))}if(me||je>1){oe=!0,Q=void 0;var ge=k*$;ae=new Uint8Array(ge);for(var _e=new DataView(S.buffer),Le=0;Le<ge;Le++){var ke=Sv(_e,Le,F),Be=O_(R[ke],4)[3];ae[Le]=Be}}else je===0&&(Q=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:oe?8:void 0,colorBytes:S,alphaBytes:ae,needSMask:oe,palette:be,mask:Q}})(a):h===2||h===4?(function(D){for(var k=D.data,$=D.width,S=D.height,R=D.channels,F=D.depth,oe=R===2?"DeviceGray":"DeviceRGB",be=R-1,Q=$*S,ae=be,me=Q*ae,je=1*Q,Fe=Math.ceil(me*F/8),J=Math.ceil(je*F/8),q=new Uint8Array(Fe),X=new Uint8Array(J),ie=new DataView(k.buffer),fe=new DataView(q.buffer),ge=new DataView(X.buffer),_e=!1,Le=0;Le<Q;Le++){for(var ke=Le*R,Be=0;Be<ae;Be++)UN(fe,Sv(ie,ke+Be,F),Le*ae+Be,F);var Ze=Sv(ie,ke+ae,F);Ze<(1<<F)-1&&(_e=!0),UN(ge,Ze,1*Le,F)}return{colorSpace:oe,colorsPerPixel:be,sMaskBitsPerComponent:_e?F:void 0,colorBytes:q,alphaBytes:X,needSMask:_e}})(a):(function(D){var k=D.data,$=D.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:$,colorsPerPixel:$==="DeviceGray"?1:3,colorBytes:k instanceof Uint16Array?(function(S){for(var R=S.length,F=new Uint8Array(2*R),oe=new DataView(F.buffer,F.byteOffset,F.byteLength),be=0;be<R;be++)oe.setUint16(2*be,S[be],!1);return F})(k):k,needSMask:!1}})(a);var v,_,b,T=i,I=T.colorSpace,L=T.colorsPerPixel,j=T.sMaskBitsPerComponent,U=T.colorBytes,z=T.alphaBytes,B=T.needSMask,re=T.palette,ne=T.mask,V=null;return r!==Et.API.image_compression.NONE&&typeof x1=="function"?(V=(function(D){var k;switch(D){case Et.API.image_compression.FAST:k=11;break;case Et.API.image_compression.MEDIUM:k=13;break;case Et.API.image_compression.SLOW:k=14;break;default:k=12}return k})(r),v=this.decode.FLATE_DECODE,_="/Predictor ".concat(V," /Colors ").concat(L," /BitsPerComponent ").concat(p," /Columns ").concat(c),n=ON(U,Math.ceil(c*L*p/8),L,p,r),B&&(b=ON(z,Math.ceil(c*j/8),1,j,r))):(v=void 0,_=void 0,n=U,B&&(b=z)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:t,data:n,index:e,filter:v,decodeParameters:_,transparency:ne,palette:re,sMask:b,predictor:V,width:c,height:d,bitsPerComponent:p,sMaskBitsPerComponent:j,colorSpace:I}}},(function(n){n.processGIF89A=function(e,t,r,i){var a=new Qq(e),c=a.width,d=a.height,h=[];a.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:c,height:d},p=new jv(100).encode(f,100);return n.processJPEG.call(this,p,t,r,i)},n.processGIF87A=n.processGIF89A})(Et.API),ko.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ko.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){yr.log("bit decode error:"+t)}},ko.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+8*i*4,d=0;d<8&&8*i+d<this.width;d++){var h=this.palette[a>>7-d&1];this.data[c+4*d]=h.blue,this.data[c+4*d+1]=h.green,this.data[c+4*d+2]=h.red,this.data[c+4*d+3]=255}t!==0&&(this.pos+=4-t)}},ko.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var a=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+2*i*4,d=a>>4,h=15&a,f=this.palette[d];if(this.data[c]=f.blue,this.data[c+1]=f.green,this.data[c+2]=f.red,this.data[c+3]=255,2*i+1>=this.width)break;f=this.palette[h],this.data[c+4]=f.blue,this.data[c+4+1]=f.green,this.data[c+4+2]=f.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},ko.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;if(i<this.palette.length){var c=this.palette[i];this.data[a]=c.red,this.data[a+1]=c.green,this.data[a+2]=c.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},ko.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&e)/e*255|0,d=(a>>5&e)/e*255|0,h=(a>>10&e)/e*255|0,f=a>>15?255:0,p=r*this.width*4+4*i;this.data[p]=h,this.data[p+1]=d,this.data[p+2]=c,this.data[p+3]=f}this.pos+=n}},ko.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(c&e)/e*255|0,h=(c>>5&t)/t*255|0,f=(c>>11)/e*255|0,p=i*this.width*4+4*a;this.data[p]=f,this.data[p+1]=h,this.data[p+2]=d,this.data[p+3]=255}this.pos+=n}},ko.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=a,this.data[c+1]=i,this.data[c+2]=r,this.data[c+3]=255}this.pos+=this.width%4}},ko.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=a,this.data[d+1]=i,this.data[d+2]=r,this.data[d+3]=c}},ko.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var a=new ko(e,!1),c=a.width,d=a.height,h={data:a.getData(),width:c,height:d},f=new jv(100).encode(h,100);return n.processJPEG.call(this,f,t,r,i)}})(Et.API),HN.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var a=new HN(e),c=a.width,d=a.height,h={data:a.getData(),width:c,height:d},f=new jv(100).encode(h,100);return n.processJPEG.call(this,f,t,r,i)}})(Et.API),Et.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,a=new Uint8Array(i/4*3),c=new Uint8Array(i/4),d=0,h=0,f=0;f<i;f+=4){var p=r[f],v=r[f+1],_=r[f+2],b=r[f+3];a[d++]=p,a[d++]=v,a[d++]=_,c[h++]=b}var T=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:T,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Et.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},eh=Et.API,Fp=eh.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:i.metadata.Unicode.widths,h=d.fof?d.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,p=f.fof?f.fof:1,v=e.doKerning!==!1,_=0,b=n.length,T=0,I=d[0]||h,L=[];for(t=0;t<b;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?L.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+c*(1e3/a)||0)/1e3):(_=v&&nr(f[r])==="object"&&!isNaN(parseInt(f[r][T],10))?f[r][T]/p:0,L.push((d[r]||I)/h+_)),T=r;return L},PN=eh.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return eh.processArabic&&(n=eh.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Fp.apply(this,arguments).reduce(function(a,c){return a+c},0)},DN=function(n,e,t,r){for(var i=[],a=0,c=n.length,d=0;a!==c&&d+e[a]<t;)d+=e[a],a++;i.push(n.slice(0,a));var h=a;for(d=0;a!==c;)d+e[a]>r&&(i.push(n.slice(h,a)),d=0,h=a),d+=e[a],a++;return h!==a&&i.push(n.slice(h,a)),i},MN=function(n,e,t){t||(t={});var r,i,a,c,d,h,f,p=[],v=[p],_=t.textIndent||0,b=0,T=0,I=n.split(" "),L=Fp.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?I[0].length+2:t.lineIndent||0){var j=Array(h).join(" "),U=[];I.map(function(B){(B=B.split(/\s*\n/)).length>1?U=U.concat(B.map(function(re,ne){return(ne&&re.length?`
`:"")+re})):U.push(B[0])}),I=U,h=PN.apply(this,[j,t])}for(a=0,c=I.length;a<c;a++){var z=0;if(r=I[a],h&&r[0]==`
`&&(r=r.substr(1),z=1),_+b+(T=(i=Fp.apply(this,[r,t])).reduce(function(B,re){return B+re},0))>e||z){if(T>e){for(d=DN.apply(this,[r,i,e-(_+b),e]),p.push(d.shift()),p=[d.pop()];d.length;)v.push([d.shift()]);T=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(B,re){return B+re},0)}else p=[r];v.push(p),_=T+h,b=L}else p.push(r),_+=b+T,b=L}return f=h?function(B,re){return(re?j:"")+B.join(" ")}:function(B){return B.join(" ")},v.map(f)},eh.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var v=this.internal.getFont(p.fontName,p.fontStyle),_="Unicode";return v.metadata[_]?{widths:v.metadata[_].widths||{0:1},kerning:v.metadata[_].kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var d,h,f=[];for(d=0,h=r.length;d<h;d++)f=f.concat(MN.apply(this,[r[d],c,a]));return f},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},a=0;a<16;a++)r[t[a]]=e[a],i[e[a]]=t[a];var c=function(_){return"0x"+parseInt(_,10).toString(16)},d=n.__fontmetrics__.compress=function(_){var b,T,I,L,j=["{"];for(var U in _){if(b=_[U],isNaN(parseInt(U,10))?T="'"+U+"'":(U=parseInt(U,10),T=(T=c(U).slice(2)).slice(0,-1)+i[T.slice(-1)]),typeof b=="number")b<0?(I=c(b).slice(3),L="-"):(I=c(b).slice(2),L=""),I=L+I.slice(0,-1)+i[I.slice(-1)];else{if(nr(b)!=="object")throw new Error("Don't know what to do with value type "+nr(b)+".");I=d(b)}j.push(T+I)}return j.push("}"),j.join("")},h=n.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,T,I,L,j={},U=1,z=j,B=[],re="",ne="",V=_.length-1,D=1;D<V;D+=1)(L=_[D])=="'"?b?(I=b.join(""),b=void 0):b=[]:b?b.push(L):L=="{"?(B.push([z,I]),z={},I=void 0):L=="}"?((T=B.pop())[0][T[1]]=z,I=void 0,z=T[0]):L=="-"?U=-1:I===void 0?r.hasOwnProperty(L)?(re+=r[L],I=parseInt(re,16)*U,U=1,re=""):re+=L:r.hasOwnProperty(L)?(ne+=r[L],z[I]=parseInt(ne,16)*U,U=1,I=void 0,ne=""):ne+=L;return j},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},v={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(_){var b=_.font,T=v.Unicode[b.postScriptName];T&&(b.metadata.Unicode={},b.metadata.Unicode.widths=T.widths,b.metadata.Unicode.kerning=T.kerning);var I=p.Unicode[b.postScriptName];I&&(b.metadata.Unicode.encoding=I,b.encoding=I.codePages[0])}])})(Et.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=t.charCodeAt(a);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(c,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(tg(d)),c.metadata=n.API.TTFFont.open(d),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(i,r)}}])})(Et),Et.API.addSvgAsImage=function(n,e,t,r,i,a,c,d){if(isNaN(e)||isNaN(t))throw yr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw yr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=r,h.height=i;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return(Zt.canvg?Promise.resolve(Zt.canvg):sv(()=>import("./index.es-B0jw6ims.js"),[])).catch(function(_){return Promise.reject(new Error("Could not load canvg: "+_))}).then(function(_){return _.default?_.default:_}).then(function(_){return _.fromString(f,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(p)}).then(function(){v.addImage(h.toDataURL("image/jpeg",1),e,t,r,i,c,d)})},Et.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Et.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,a,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(c),h=[],f=0,p=0,v=0;function _(T,I){var L,j=!1;for(L=0;L<T.length;L+=1)T[L]===I&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var b=d.length;for(v=0;v<b;v+=1)t[d[v]].value=t[d[v]].defaultValue,t[d[v]].explicitSet=!1}if(nr(n)==="object"){for(i in n)if(a=n[i],_(d,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&_(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(f=0;f<a.length;f+=1)if(r=!0,a[f].length===1&&typeof a[f][0]=="number")h.push(String(a[f]-1));else if(a[f].length>1){for(p=0;p<a[f].length;p+=1)typeof a[f][p]!="number"&&(r=!1);r===!0&&h.push([a[f][0]-1,a[f][1]-1].join(" "))}t[i].value="["+h.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var T,I=[];for(T in t)t[T].explicitSet===!0&&(t[T].type==="name"?I.push("/"+T+" /"+t[T].value):I.push("/"+T+" "+t[T].value));I.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+I.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),f=a.length+c.length+d.length+i.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+a+c+d+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Et.API),(function(n){var e=n.API,t=e.pdfEscape16=function(a,c){for(var d,h=c.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],v=0,_=a.length;v<_;++v){if(d=c.metadata.characterToGlyph(a.charCodeAt(v)),c.metadata.glyIdsUsed.push(d),c.metadata.toUnicode[d]=a.charCodeAt(v),h.indexOf(d)==-1&&(h.push(d),h.push([parseInt(c.metadata.widthOfGlyph(d),10)])),d=="0")return p.join("");d=d.toString(16),p.push(f[4-d.length],d)}return p.join("")},r=function(a){var c,d,h,f,p,v,_;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],v=0,_=(d=Object.keys(a).sort(function(b,T){return b-T})).length;v<_;v++)c=d[v],h.length>=100&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),a[c]!==void 0&&a[c]!==null&&typeof a[c].toString=="function"&&(f=("0000"+a[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),h.push("<"+c+"><"+f+">"));return h.length&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(c){var d=c.font,h=c.out,f=c.newObject,p=c.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="Identity-H"){for(var v=d.metadata.Unicode.widths,_=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),b="",T=0;T<_.length;T++)b+=String.fromCharCode(_[T]);var I=f();p({data:b,addLength1:!0,objectId:I}),h("endobj");var L=f();p({data:r(d.metadata.toUnicode),addLength1:!0,objectId:L}),h("endobj");var j=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+ah(d.fontName)),h("/FontFile2 "+I+" 0 R"),h("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),h("/Flags "+d.metadata.flags),h("/StemV "+d.metadata.stemV),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h(">>"),h("endobj");var U=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+ah(d.fontName)),h("/FontDescriptor "+j+" 0 R"),h("/W "+n.API.PDFObject.convert(v)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+d.encoding+")"),h(">>"),h(">>"),h("endobj"),d.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+L+" 0 R"),h("/BaseFont /"+ah(d.fontName)),h("/Encoding /"+d.encoding),h("/DescendantFonts ["+U+" 0 R]"),h(">>"),h("endobj"),d.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(c){var d=c.font,h=c.out,f=c.newObject,p=c.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var v=d.metadata.rawData,_="",b=0;b<v.length;b++)_+=String.fromCharCode(v[b]);var T=f();p({data:_,addLength1:!0,objectId:T}),h("endobj");var I=f();p({data:r(d.metadata.toUnicode),addLength1:!0,objectId:I}),h("endobj");var L=f();h("<<"),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h("/StemV "+d.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+T+" 0 R"),h("/Flags 96"),h("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),h("/FontName /"+ah(d.fontName)),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h(">>"),h("endobj"),d.objectNumber=f();for(var j=0;j<d.metadata.hmtx.widths.length;j++)d.metadata.hmtx.widths[j]=parseInt(d.metadata.hmtx.widths[j]*(1e3/d.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+I+" 0 R/BaseFont/"+ah(d.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),h("endobj"),d.isAlreadyPutted=!0}})(a)}]);var i=function(a){var c,d=a.text||"",h=a.x,f=a.y,p=a.options||{},v=a.mutex||{},_=v.pdfEscape,b=v.activeFontKey,T=v.fonts,I=b,L="",j=0,U="",z=T[I].encoding;if(T[I].encoding!=="Identity-H")return{text:d,x:h,y:f,options:p,mutex:v};for(U=d,I=b,Array.isArray(d)&&(U=d[0]),j=0;j<U.length;j+=1)T[I].metadata.hasOwnProperty("cmap")&&(c=T[I].metadata.cmap.unicode.codeMap[U[j].charCodeAt(0)]),c||U[j].charCodeAt(0)<256&&T[I].metadata.hasOwnProperty("Unicode")?L+=U[j]:L+="";var B="";return parseInt(I.slice(1))<14||z==="WinAnsiEncoding"?B=_(L,I).split("").map(function(re){return re.charCodeAt(0).toString(16)}).join(""):z==="Identity-H"&&(B=t(L,T[I])),v.isHex=!0,{text:B,x:h,y:f,options:p,mutex:v}};e.events.push(["postProcessText",function(a){var c=a.text||"",d=[],h={text:c,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(c)){var f=0;for(f=0;f<c.length;f+=1)Array.isArray(c[f])&&c[f].length===3?d.push([i(Object.assign({},h,{text:c[f][0]})).text,c[f][1],c[f][2]]):d.push(i(Object.assign({},h,{text:c[f]})).text);a.text=d}else a.text=i(Object.assign({},h,{text:c})).text}])})(Et),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Et.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,a,c,d,h,f,p,v=e,_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],T={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},I={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),U=!1,z=0;this.__bidiEngine__={};var B=function(S){var R=S.charCodeAt(),F=R>>8,oe=I[F];return oe!==void 0?v[256*oe+(255&R)]:F===252||F===253?"AL":j.test(F)?"L":F===8?"R":"N"},re=function(S){for(var R,F=0;F<S.length;F++){if((R=B(S.charAt(F)))==="L")return!1;if(R==="R")return!0}return!1},ne=function(S,R,F,oe){var be,Q,ae,me,je=R[oe];switch(je){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":U=!1;break;case"N":case"AN":break;case"EN":U&&(je="AN");break;case"AL":U=!0,je="R";break;case"WS":case"BN":je="N";break;case"CS":oe<1||oe+1>=R.length||(be=F[oe-1])!=="EN"&&be!=="AN"||(Q=R[oe+1])!=="EN"&&Q!=="AN"?je="N":U&&(Q="AN"),je=Q===be?Q:"N";break;case"ES":je=(be=oe>0?F[oe-1]:"B")==="EN"&&oe+1<R.length&&R[oe+1]==="EN"?"EN":"N";break;case"ET":if(oe>0&&F[oe-1]==="EN"){je="EN";break}if(U){je="N";break}for(ae=oe+1,me=R.length;ae<me&&R[ae]==="ET";)ae++;je=ae<me&&R[ae]==="EN"?"EN":"N";break;case"NSM":if(c&&!d){for(me=R.length,ae=oe+1;ae<me&&R[ae]==="NSM";)ae++;if(ae<me){var Fe=S[oe],J=Fe>=1425&&Fe<=2303||Fe===64286;if(be=R[ae],J&&(be==="R"||be==="AL")){je="R";break}}}je=oe<1||(be=R[oe-1])==="B"?"N":F[oe-1];break;case"B":U=!1,i=!0,je=z;break;case"S":a=!0,je="N"}return je},V=function(S,R,F){var oe=S.split("");return F&&D(oe,F,{hiLevel:z}),oe.reverse(),R&&R.reverse(),oe.join("")},D=function(S,R,F){var oe,be,Q,ae,me,je=-1,Fe=S.length,J=0,q=[],X=z?b:_,ie=[];for(U=!1,i=!1,a=!1,be=0;be<Fe;be++)ie[be]=B(S[be]);for(Q=0;Q<Fe;Q++){if(me=J,q[Q]=ne(S,ie,q,Q),oe=240&(J=X[me][T[q[Q]]]),J&=15,R[Q]=ae=X[J][5],oe>0)if(oe===16){for(be=je;be<Q;be++)R[be]=1;je=-1}else je=-1;if(X[J][6])je===-1&&(je=Q);else if(je>-1){for(be=je;be<Q;be++)R[be]=ae;je=-1}ie[Q]==="B"&&(R[Q]=0),F.hiLevel|=ae}a&&(function(fe,ge,_e){for(var Le=0;Le<_e;Le++)if(fe[Le]==="S"){ge[Le]=z;for(var ke=Le-1;ke>=0&&fe[ke]==="WS";ke--)ge[ke]=z}})(ie,R,Fe)},k=function(S,R,F,oe,be){if(!(be.hiLevel<S)){if(S===1&&z===1&&!i)return R.reverse(),void(F&&F.reverse());for(var Q,ae,me,je,Fe=R.length,J=0;J<Fe;){if(oe[J]>=S){for(me=J+1;me<Fe&&oe[me]>=S;)me++;for(je=J,ae=me-1;je<ae;je++,ae--)Q=R[je],R[je]=R[ae],R[ae]=Q,F&&(Q=F[je],F[je]=F[ae],F[ae]=Q);J=me}J++}}},$=function(S,R,F){var oe=S.split(""),be={hiLevel:z};return F||(F=[]),D(oe,F,be),(function(Q,ae,me){if(me.hiLevel!==0&&p)for(var je,Fe=0;Fe<Q.length;Fe++)ae[Fe]===1&&(je=L.indexOf(Q[Fe]))>=0&&(Q[Fe]=L[je+1])})(oe,F,be),k(2,oe,R,F,be),k(1,oe,R,F,be),oe.join("")};return this.__bidiEngine__.doBidiReorder=function(S,R,F){if((function(be,Q){if(Q)for(var ae=0;ae<be.length;ae++)Q[ae]=ae;d===void 0&&(d=re(be)),f===void 0&&(f=re(be))})(S,R),c||!h||f)if(c&&h&&d^f)z=d?1:0,S=V(S,R,F);else if(!c&&h&&f)z=d?1:0,S=$(S,R,F),S=V(S,R);else if(!c||d||h||f){if(c&&!h&&d^f)S=V(S,R),d?(z=0,S=$(S,R,F)):(z=1,S=$(S,R,F),S=V(S,R));else if(c&&d&&!h&&f)z=1,S=$(S,R,F),S=V(S,R);else if(!c&&!h&&d^f){var oe=p;d?(z=1,S=$(S,R,F),z=0,p=!1,S=$(S,R,F),p=oe):(z=0,S=$(S,R,F),S=V(S,R),z=1,p=!1,S=$(S,R,F),p=oe,S=V(S,R))}}else z=0,S=$(S,R,F);else z=d?1:0,S=$(S,R,F);return S},this.__bidiEngine__.setOptions=function(S){S&&(c=S.isInputVisual,h=S.isOutputVisual,d=S.isInputRtl,f=S.isOutputRtl,p=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var c=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var d=0;for(c=[],d=0;d<i.length;d+=1)Object.prototype.toString.call(i[d])==="[object Array]"?c.push([t.doBidiReorder(i[d][0]),i[d][1],i[d][2]]):c.push([t.doBidiReorder(i[d])]);r.text=c}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(Et),Et.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Nu(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new dV(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new Xq(this.contents),this.head=new Zq(this),this.name=new iV(this),this.cmap=new jj(this),this.toUnicode={},this.hhea=new eV(this),this.maxp=new sV(this),this.hmtx=new aV(this),this.post=new nV(this),this.os2=new tV(this),this.loca=new uV(this),this.glyf=new oV(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,d,h,f;for(f=[],c=0,d=(h=this.bbox).length;c<d;c++)e=h[c],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,a,c,d;for(c=0,a=0,d=(e=""+e).length;0<=d?a<d:a>d;a=0<=d?++a:--a)i=e.charCodeAt(a),c+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return c*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var Uo,Nu=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,a,c,d,h;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),c=this.readByte(),d=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^c)+256*(255^d)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*a+65536*c+256*d+h},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)t=e[r],a.push(this.writeByte(t));return a},n})(),Xq=(function(){var n;function e(t){var r,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,a,c,d,h,f,p,v,_,b,T,I;for(I in b=Object.keys(t).length,h=Math.log(2),v=16*Math.floor(Math.log(b)/h),c=Math.floor(v/h),p=16*b-v,(i=new Nu).writeInt(this.scalarType),i.writeShort(b),i.writeShort(v),i.writeShort(c),i.writeShort(p),a=16*b,f=i.pos+a,d=null,T=[],t)for(_=t[I],i.writeString(I),i.writeInt(n(_)),i.writeInt(f),i.writeInt(_.length),T=T.concat(_),I==="head"&&(d=f),f+=_.length;f%4;)T.push(0),f++;return i.write(T),r=2981146554-n(i.data),i.pos=d+8,i.writeUInt32(r),i.data},n=function(t){var r,i,a,c;for(t=Ej.call(t);t.length%4;)t.push(0);for(a=new Nu(t),i=0,r=0,c=t.length;r<c;r=r+=4)i+=a.readUInt32();return 4294967295&i},e})(),Jq={}.hasOwnProperty,Il=function(n,e){for(var t in e)Jq.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Uo=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var Zq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Il(n,Uo),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new Nu).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),$N=(function(){function n(e,t){var r,i,a,c,d,h,f,p,v,_,b,T,I,L,j,U,z;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),v=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(b=e.readUInt16(),_=b/2,e.pos+=6,a=(function(){var B,re;for(re=[],h=B=0;0<=_?B<_:B>_;h=0<=_?++B:--B)re.push(e.readUInt16());return re})(),e.pos+=2,I=(function(){var B,re;for(re=[],h=B=0;0<=_?B<_:B>_;h=0<=_?++B:--B)re.push(e.readUInt16());return re})(),f=(function(){var B,re;for(re=[],h=B=0;0<=_?B<_:B>_;h=0<=_?++B:--B)re.push(e.readUInt16());return re})(),p=(function(){var B,re;for(re=[],h=B=0;0<=_?B<_:B>_;h=0<=_?++B:--B)re.push(e.readUInt16());return re})(),i=(this.length-e.pos+this.offset)/2,d=(function(){var B,re;for(re=[],h=B=0;0<=i?B<i:B>i;h=0<=i?++B:--B)re.push(e.readUInt16());return re})(),h=j=0,z=a.length;j<z;h=++j)for(L=a[h],r=U=T=I[h];T<=L?U<=L:U>=L;r=T<=L?++U:--U)p[h]===0?c=r+f[h]:(c=d[p[h]/2+(r-T)-(_-h)]||0)!==0&&(c+=f[h]),this.codeMap[r]=65535&c}e.pos=v}return n.encode=function(e,t){var r,i,a,c,d,h,f,p,v,_,b,T,I,L,j,U,z,B,re,ne,V,D,k,$,S,R,F,oe,be,Q,ae,me,je,Fe,J,q,X,ie,fe,ge,_e,Le,ke,Be,Ze,ot;switch(oe=new Nu,c=Object.keys(e).sort(function(st,dt){return st-dt}),t){case"macroman":for(I=0,L=(function(){var st=[];for(T=0;T<256;++T)st.push(0);return st})(),U={0:0},a={},be=0,je=c.length;be<je;be++)U[ke=e[i=c[be]]]==null&&(U[ke]=++I),a[i]={old:e[i],new:U[e[i]]},L[i]=U[e[i]];return oe.writeUInt16(1),oe.writeUInt16(0),oe.writeUInt32(12),oe.writeUInt16(0),oe.writeUInt16(262),oe.writeUInt16(0),oe.write(L),{charMap:a,subtable:oe.data,maxGlyphID:I+1};case"unicode":for(R=[],v=[],z=0,U={},r={},j=f=null,Q=0,Fe=c.length;Q<Fe;Q++)U[re=e[i=c[Q]]]==null&&(U[re]=++z),r[i]={old:re,new:U[re]},d=U[re]-i,j!=null&&d===f||(j&&v.push(j),R.push(i),f=d),j=i;for(j&&v.push(j),v.push(65535),R.push(65535),$=2*(k=R.length),D=2*Math.pow(Math.log(k)/Math.LN2,2),_=Math.log(D/2)/Math.LN2,V=2*k-D,h=[],ne=[],b=[],T=ae=0,J=R.length;ae<J;T=++ae){if(S=R[T],p=v[T],S===65535){h.push(0),ne.push(0);break}if(S-(F=r[S].new)>=32768)for(h.push(0),ne.push(2*(b.length+k-T)),i=me=S;S<=p?me<=p:me>=p;i=S<=p?++me:--me)b.push(r[i].new);else h.push(F-S),ne.push(0)}for(oe.writeUInt16(3),oe.writeUInt16(1),oe.writeUInt32(12),oe.writeUInt16(4),oe.writeUInt16(16+8*k+2*b.length),oe.writeUInt16(0),oe.writeUInt16($),oe.writeUInt16(D),oe.writeUInt16(_),oe.writeUInt16(V),_e=0,q=v.length;_e<q;_e++)i=v[_e],oe.writeUInt16(i);for(oe.writeUInt16(0),Le=0,X=R.length;Le<X;Le++)i=R[Le],oe.writeUInt16(i);for(Be=0,ie=h.length;Be<ie;Be++)d=h[Be],oe.writeUInt16(d);for(Ze=0,fe=ne.length;Ze<fe;Ze++)B=ne[Ze],oe.writeUInt16(B);for(ot=0,ge=b.length;ot<ge;ot++)I=b[ot],oe.writeUInt16(I);return{charMap:r,subtable:oe.data,maxGlyphID:z+1}}},n})(),jj=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Il(n,Uo),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new $N(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=$N.encode(e,t),(i=new Nu).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),eV=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Il(n,Uo),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),tV=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Il(n,Uo),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),nV=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Il(n,Uo),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var c,d,h;for(h=[],a=c=0,d=this.file.maxp.numGlyphs;0<=d?c<d:c>d;a=0<=d?++c:--c)h.push(e.readUInt32());return h}).call(this)}},n})(),rV=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},iV=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Il(n,Uo),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,a,c,d,h,f,p,v,_;for(e.pos=this.offset,e.readShort(),t=e.readShort(),d=e.readShort(),r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(h={},a=p=0,v=r.length;p<v;a=++p)i=r[a],e.pos=i.offset,f=e.readString(i.length),c=new rV(f,i),h[_=i.nameID]==null&&(h[_]=[]),h[i.nameID].push(c);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},n})(),sV=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Il(n,Uo),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),aV=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Il(n,Uo),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,a,c,d,h;for(e.pos=this.offset,this.metrics=[],t=0,d=this.file.hhea.numberOfMetrics;0<=d?t<d:t>d;t=0<=d?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,p;for(p=[],t=f=0;0<=i?f<i:f>i;t=0<=i?++f:--f)p.push(e.readInt16());return p})(),this.widths=(function(){var f,p,v,_;for(_=[],f=0,p=(v=this.metrics).length;f<p;f++)a=v[f],_.push(a.advance);return _}).call(this),r=this.widths[this.widths.length-1],h=[],t=c=0;0<=i?c<i:c>i;t=0<=i?++c:--c)h.push(this.widths.push(r));return h},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),Ej=[].slice,oV=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Il(n,Uo),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,a,c,d,h,f,p,v;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,r=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,c=(d=new Nu(t.read(i))).readShort(),f=d.readShort(),v=d.readShort(),h=d.readShort(),p=d.readShort(),this.cache[e]=c===-1?new cV(d,f,v,h,p):new lV(d,c,f,v,h,p),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,a,c,d,h;for(c=[],a=[],d=0,h=t.length;d<h;d++)i=e[t[d]],a.push(c.length),i&&(c=c.concat(i.encode(r)));return a.push(c.length),{table:c,offsets:a}},n})(),lV=(function(){function n(e,t,r,i,a,c){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=c,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),cV=(function(){function n(e,t,r,i,a){var c,d;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;d=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&d;)c.pos+=1&d?4:2,128&d?c.pos+=8:64&d?c.pos+=4:8&d&&(c.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Nu(Ej.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),uV=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Il(n,Uo),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=4)a.push(e.readUInt32());return a}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,a=0,c=0;c<r.length;++c)if(r[c]=i,a<t.length&&t[a]==c){++a,r[c]=i;var d=this.offsets[c],h=this.offsets[c+1]-d;h>0&&(i+=h)}for(var f=new Array(4*r.length),p=0;p<r.length;++p)f[4*p+3]=255&r[p],f[4*p+2]=(65280&r[p])>>8,f[4*p+1]=(16711680&r[p])>>16,f[4*p]=(4278190080&r[p])>>24;return f},n})(),dV=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,a;for(t in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,a,c,d,h;for(i={},c=0,d=e.length;c<d;c++)i[a=e[c]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(r=i[a])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in h=this.glyphsFor(t))r=h[a],i[a]=r;return i},n.prototype.encode=function(e,t){var r,i,a,c,d,h,f,p,v,_,b,T,I,L,j;for(i in r=jj.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),b={0:0},j=r.charMap)b[(h=j[i]).old]=h.new;for(T in _=r.maxGlyphID,c)T in b||(b[T]=_++);return p=(function(U){var z,B;for(z in B={},U)B[U[z]]=z;return B})(b),v=Object.keys(p).sort(function(U,z){return U-z}),I=(function(){var U,z,B;for(B=[],U=0,z=v.length;U<z;U++)d=v[U],B.push(p[d]);return B})(),a=this.font.glyf.encode(c,I,b),f=this.font.loca.encode(a.offsets,I),L={cmap:this.font.cmap.raw(),glyf:a.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},n})();Et.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,a,c;if(Array.isArray(t))return"["+(function(){var d,h,f;for(f=[],d=0,h=t.length;d<h;d++)r=t[d],f.push(e.convert(r));return f})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)c=t[i],a.push("/"+i+" "+e.convert(c));return a.push(">>"),a.join(`
`)}return""+t},e})();function Tj(n,e,t,r,i){r=r||{};var a=1.15,c=i.internal.scaleFactor,d=i.internal.getFontSize()/c,h=i.getLineHeightFactor?i.getLineHeightFactor():a,f=d*h,p=/\r\n|\r|\n/g,v="",_=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(v=typeof n=="string"?n.split(p):n,_=v.length||1),t+=d*(2-a),r.valign==="middle"?t-=_/2*f:r.valign==="bottom"&&(t-=_*f),r.halign==="center"||r.halign==="right"){var b=d;if(r.halign==="center"&&(b*=.5),v&&_>=1){for(var T=0;T<v.length;T++)i.text(v[T],e-i.getStringUnitWidth(v[T])*b,t),t+=f;return i}e-=i.getStringUnitWidth(n)*b}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var GN={},yh=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:GN=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,a;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var c=this.jsPDFDocument.internal.getFont(),d=c.fontStyle,h=c.fontName;if(e.font&&(h=e.font),e.fontStyle){d=e.fontStyle;var f=this.getFontList()[h];f&&f.indexOf(d)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(f[0]),d=f[0])}if(this.jsPDFDocument.setFont(h,d),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var p=n.unifyColor(e.fillColor);p&&(r=this.jsPDFDocument).setFillColor.apply(r,p),p=n.unifyColor(e.textColor),p&&(i=this.jsPDFDocument).setTextColor.apply(i,p),p=n.unifyColor(e.lineColor),p&&(a=this.jsPDFDocument).setDrawColor.apply(a,p),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,a){return this.jsPDFDocument.rect(e,t,r,i,a)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return GN||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),S1=function(n,e){return S1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},S1(n,e)};function Cj(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");S1(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ij=(function(n){Cj(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e})(Array);function hV(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function fV(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function qg(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(a){return t.getTextWidth(a)}).reduce(function(a,c){return Math.max(a,c)},0);return i}function Lj(n,e,t,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:a});var c=Rj(i,!1);c&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,c)}function Rj(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function _0(n,e){var t,r,i,a;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(a=n.bottom)!==null&&a!==void 0?a:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function kj(n,e){var t=_0(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function mV(n,e,t,r,i){var a={},c=1.3333333333333333,d=Ev(e,function(z){return i.getComputedStyle(z).backgroundColor});d!=null&&(a.fillColor=d);var h=Ev(e,function(z){return i.getComputedStyle(z).color});h!=null&&(a.textColor=h);var f=gV(r,t);f&&(a.cellPadding=f);var p="borderTopColor",v=c*t,_=r.borderTopWidth;if(r.borderBottomWidth===_&&r.borderRightWidth===_&&r.borderLeftWidth===_){var b=(parseFloat(_)||0)/v;b&&(a.lineWidth=b)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/v,right:(parseFloat(r.borderRightWidth)||0)/v,bottom:(parseFloat(r.borderBottomWidth)||0)/v,left:(parseFloat(r.borderLeftWidth)||0)/v},a.lineWidth.top||(a.lineWidth.right?p="borderRightColor":a.lineWidth.bottom?p="borderBottomColor":a.lineWidth.left&&(p="borderLeftColor"));var T=Ev(e,function(z){return i.getComputedStyle(z)[p]});T!=null&&(a.lineColor=T);var I=["left","right","center","justify"];I.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),I=["middle","bottom","top"],I.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var L=parseInt(r.fontSize||"");isNaN(L)||(a.fontSize=L/c);var j=pV(r);j&&(a.fontStyle=j);var U=(r.fontFamily||"").toLowerCase();return n.indexOf(U)!==-1&&(a.font=U),a}function pV(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function Ev(n,e){var t=Pj(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function Pj(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:Pj(n.parentElement,e):t}function gV(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,a=t.map(function(d){return parseInt(d||"0")/r}),c=_0(a,0);return i>c.top&&(c.top=i),i>c.bottom&&(c.bottom=i),c}function Dj(n,e,t,r,i){var a,c;r===void 0&&(r=!1),i===void 0&&(i=!1);var d;typeof e=="string"?d=t.document.querySelector(e):d=e;var h=Object.keys(n.getFontList()),f=n.scaleFactor(),p=[],v=[],_=[];if(!d)return console.error("Html table could not be found with input: ",e),{head:p,body:v,foot:_};for(var b=0;b<d.rows.length;b++){var T=d.rows[b],I=(c=(a=T?.parentElement)===null||a===void 0?void 0:a.tagName)===null||c===void 0?void 0:c.toLowerCase(),L=xV(h,f,t,T,r,i);L&&(I==="thead"?p.push(L):I==="tfoot"?_.push(L):v.push(L))}return{head:p,body:v,foot:_}}function xV(n,e,t,r,i,a){for(var c=new Ij(r),d=0;d<r.cells.length;d++){var h=r.cells[d],f=t.getComputedStyle(h);if(i||f.display!=="none"){var p=void 0;a&&(p=mV(n,h,e,f,t)),c.push({rowSpan:h.rowSpan,colSpan:h.colSpan,styles:p,_element:h,content:vV(h)})}}var v=t.getComputedStyle(r);if(c.length>0&&(i||v.display!=="none"))return c}function vV(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function yV(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function hc(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(n),c=1;c<arguments.length;c++){var d=arguments[c];if(d!=null)for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(a[h]=d[h])}return a}function Mj(n,e){var t=new yh(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();yV(i,r,e);var a=hc({},i,r,e),c;typeof window<"u"&&(c=window);var d=bV(i,r,e),h=wV(i,r,e),f=_V(t,a),p=AV(t,a,c);return{id:e.tableId,content:p,hooks:h,styles:d,settings:f}}function bV(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(h){if(h==="columnStyles"){var f=n[h],p=e[h],v=t[h];r.columnStyles=hc({},f,p,v)}else{var _=[n,e,t],b=_.map(function(T){return T[h]||{}});r[h]=hc({},b[0],b[1],b[2])}},a=0,c=Object.keys(r);a<c.length;a++){var d=c[a];i(d)}return r}function wV(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,c=r;a<c.length;a++){var d=c[a];d.didParseCell&&i.didParseCell.push(d.didParseCell),d.willDrawCell&&i.willDrawCell.push(d.willDrawCell),d.didDrawCell&&i.didDrawCell.push(d.didDrawCell),d.willDrawPage&&i.willDrawPage.push(d.willDrawPage),d.didDrawPage&&i.didDrawPage.push(d.didDrawPage)}return i}function _V(n,e){var t,r,i,a,c,d,h,f,p,v,_,b,T=_0(e.margin,40/n.scaleFactor()),I=(t=NV(n,e.startY))!==null&&t!==void 0?t:T.top,L;e.showFoot===!0?L="everyPage":e.showFoot===!1?L="never":L=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var j;e.showHead===!0?j="everyPage":e.showHead===!1?j="never":j=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var U=(a=e.useCss)!==null&&a!==void 0?a:!1,z=e.theme||(U?"plain":"striped"),B=!!e.horizontalPageBreak,re=(c=e.horizontalPageBreakRepeat)!==null&&c!==void 0?c:null;return{includeHiddenHtml:(d=e.includeHiddenHtml)!==null&&d!==void 0?d:!1,useCss:U,theme:z,startY:I,margin:T,pageBreak:(h=e.pageBreak)!==null&&h!==void 0?h:"auto",rowPageBreak:(f=e.rowPageBreak)!==null&&f!==void 0?f:"auto",tableWidth:(p=e.tableWidth)!==null&&p!==void 0?p:"auto",showHead:j,showFoot:L,tableLineWidth:(v=e.tableLineWidth)!==null&&v!==void 0?v:0,tableLineColor:(_=e.tableLineColor)!==null&&_!==void 0?_:200,horizontalPageBreak:B,horizontalPageBreakRepeat:re,horizontalPageBreakBehaviour:(b=e.horizontalPageBreakBehaviour)!==null&&b!==void 0?b:"afterAllRows"}}function NV(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),a=!1;if(t&&t.startPageNumber){var c=t.startPageNumber+t.pageNumber-1;a=c===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&t?.finalY!=null?t.finalY+20/r:null}function AV(n,e,t){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var c=e.includeHiddenHtml;if(t){var d=Dj(n,e.html,t,c,e.useCss)||{};r=d.head||r,i=d.body||r,a=d.foot||r}else console.error("Cannot parse html in non browser environment")}var h=e.columns||SV(r,i,a);return{columns:h,head:r,body:i,foot:a}}function SV(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var c=1,d;Array.isArray(r)?d=r[parseInt(a)]:d=r[a],typeof d=="object"&&!Array.isArray(d)&&(c=d?.colSpan||1);for(var h=0;h<c;h++){var f=void 0;Array.isArray(r)?f=i.length:f=a+(h>0?"_".concat(h):"");var p={dataKey:f};i.push(p)}}),i}var j1=(function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n})(),jV=(function(n){Cj(e,n);function e(t,r,i,a,c,d){var h=n.call(this,t,r,d)||this;return h.cell=i,h.row=a,h.column=c,h.section=a.section,h}return e})(j1),EV=(function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,a,c){for(var d=0,h=t;d<h.length;d++){var f=h[d],p=new jV(e,this,r,i,a,c),v=f(p)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],v)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new j1(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new j1(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n})(),Oj=(function(){function n(e,t,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof Ij&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=a}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=t.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,a){var c=r.cells[a.index];if(!c)return 0;var d=t.getLineHeight(c.styles.fontSize),h=c.padding("vertical"),f=h+d;return f>i?f:i},0)},n})(),Fj=(function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var c=a!=null?""+a:"",d=/\r\n|\r|\n/g;this.text=c.split(d)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=_0(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n})(),TV=(function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],c=a.cells[this.index];c&&typeof c.styles.cellWidth=="number"&&(t=Math.max(t,c.styles.cellWidth))}return t},n})();function CV(n,e){IV(n,e);var t=[],r=0;e.columns.forEach(function(a){var c=a.getMaxCustomCellWidth(e);c?a.width=c:(a.width=a.wrappedWidth,t.push(a)),r+=a.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=E1(t,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=E1(t,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),RV(e),kV(e,n),LV(e)}function IV(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=kj(n,e);e.allRows().forEach(function(a){for(var c=0,d=e.columns;c<d.length;c++){var h=d[c],f=a.cells[h.index];if(f){var p=e.hooks.didParseCell;e.callCellHooks(n,p,f,a,h,null);var v=f.padding("horizontal");f.contentWidth=qg(f.text,f.styles,n)+v;var _=qg(f.text.join(" ").split(/[^\S\u00A0]+/),f.styles,n);if(f.minReadableWidth=_+f.padding("horizontal"),typeof f.styles.cellWidth=="number")f.minWidth=f.styles.cellWidth,f.wrappedWidth=f.styles.cellWidth;else if(f.styles.cellWidth==="wrap"||r===!0)f.contentWidth>i?(f.minWidth=i,f.wrappedWidth=i):(f.minWidth=f.contentWidth,f.wrappedWidth=f.contentWidth);else{var b=10/t;f.minWidth=f.styles.minCellWidth||b,f.wrappedWidth=f.contentWidth,f.minWidth>f.wrappedWidth&&(f.wrappedWidth=f.minWidth)}}}}),e.allRows().forEach(function(a){for(var c=0,d=e.columns;c<d.length;c++){var h=d[c],f=a.cells[h.index];if(f&&f.colSpan===1)h.wrappedWidth=Math.max(h.wrappedWidth,f.wrappedWidth),h.minWidth=Math.max(h.minWidth,f.minWidth),h.minReadableWidth=Math.max(h.minReadableWidth,f.minReadableWidth);else{var p=e.styles.columnStyles[h.dataKey]||e.styles.columnStyles[h.index]||{},v=p.cellWidth||p.minCellWidth;v&&typeof v=="number"&&(h.minWidth=v,h.wrappedWidth=v)}f&&(f.colSpan>1&&!h.minWidth&&(h.minWidth=f.minWidth),f.colSpan>1&&!h.wrappedWidth&&(h.wrappedWidth=f.minWidth))}})}function E1(n,e,t){for(var r=e,i=n.reduce(function(b,T){return b+T.wrappedWidth},0),a=0;a<n.length;a++){var c=n[a],d=c.wrappedWidth/i,h=r*d,f=c.width+h,p=t(c),v=f<p?p:f;e-=v-c.width,c.width=v}if(e=Math.round(e*1e10)/1e10,e){var _=n.filter(function(b){return e<0?b.width>t(b):!0});_.length&&(e=E1(_,e,t))}return e}function LV(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var a=r[i],c=0,d=n.columns;c<d.length;c++){var h=d[c],f=e[h.index];if(t>1)t--,delete a.cells[h.index];else if(f)f.cell.height+=a.height,t=f.cell.colSpan,delete a.cells[h.index],f.left--,f.left<=1&&delete e[h.index];else{var p=a.cells[h.index];if(!p)continue;if(p.height=a.height,p.rowSpan>1){var v=r.length-i,_=p.rowSpan>v?v:p.rowSpan;e[h.index]={cell:p,left:_,row:a}}}}}function RV(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,a=0,c=0,d=0;d<n.columns.length;d++){var h=n.columns[d];if(c-=1,c>1&&n.columns[d+1])a+=h.width,delete r.cells[h.index];else if(i){var f=i;delete r.cells[h.index],i=null,f.width=h.width+a}else{var f=r.cells[h.index];if(!f)continue;if(c=f.colSpan,a=0,f.colSpan>1){i=f,a+=h.width;continue}f.width=h.width+a}}}function kV(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var a=i[r],c=0,d=n.columns;c<d.length;c++){var h=d[c],f=a.cells[h.index];if(f){e.applyStyles(f.styles,!0);var p=f.width-f.padding("horizontal");if(f.styles.overflow==="linebreak")f.text=e.splitTextToSize(f.text,p+1/e.scaleFactor(),{fontSize:f.styles.fontSize});else if(f.styles.overflow==="ellipsize")f.text=WN(f.text,p,f.styles,e,"...");else if(f.styles.overflow==="hidden")f.text=WN(f.text,p,f.styles,e,"");else if(typeof f.styles.overflow=="function"){var v=f.styles.overflow(f.text,p);typeof v=="string"?f.text=[v]:f.text=v}f.contentHeight=f.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var _=f.contentHeight/f.rowSpan;f.rowSpan>1&&t.count*t.height<_*f.rowSpan?t={height:_,count:f.rowSpan}:t&&t.count>0&&t.height>_&&(_=t.height),_>a.height&&(a.height=_)}}t.count--}}function WN(n,e,t,r,i){return n.map(function(a){return PV(a,e,t,r,i)})}function PV(n,e,t,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=qg(n,t,r))return n;for(;e<qg(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function qj(n,e){var t=new yh(n),r=DV(e,t.scaleFactor()),i=new EV(e,r);return CV(t,i),t.applyStyles(t.userStyles),i}function DV(n,e){var t=n.content,r=OV(t.columns);if(t.head.length===0){var i=YN(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=YN(r,"foot");i&&t.foot.push(i)}var a=n.settings.theme,c=n.styles;return{columns:r,head:Tv("head",t.head,r,c,a,e),body:Tv("body",t.body,r,c,a,e),foot:Tv("foot",t.foot,r,c,a,e)}}function Tv(n,e,t,r,i,a){var c={},d=e.map(function(h,f){for(var p=0,v={},_=0,b=0,T=0,I=t;T<I.length;T++){var L=I[T];if(c[L.index]==null||c[L.index].left===0)if(b===0){var j=void 0;Array.isArray(h)?j=h[L.index-_-p]:j=h[L.dataKey];var U={};typeof j=="object"&&!Array.isArray(j)&&(U=j?.styles||{});var z=FV(n,L,f,i,r,a,U),B=new Fj(j,z,n);v[L.dataKey]=B,v[L.index]=B,b=B.colSpan-1,c[L.index]={left:B.rowSpan-1,times:b}}else b--,_++;else c[L.index].left--,b=c[L.index].times,p++}return new Oj(h,f,n,v)});return d}function YN(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=MV(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function MV(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function OV(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new TV(i,e,t)})}function FV(n,e,t,r,i,a,c){var d=fV(r),h;n==="head"?h=i.headStyles:n==="body"?h=i.bodyStyles:n==="foot"&&(h=i.footStyles);var f=hc({},d.table,d[n],i.styles,h),p=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},v=n==="body"?p:{},_=n==="body"&&t%2===0?hc({},d.alternateRow,i.alternateRowStyles):{},b=hV(a),T=hc({},b,f,_,v);return hc(T,c)}function qV(n,e,t){var r;t===void 0&&(t={});var i=kj(n,e),a=new Map,c=[],d=[],h=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?h=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(h=[e.settings.horizontalPageBreakRepeat]),h.forEach(function(_){var b=e.columns.find(function(T){return T.dataKey===_||T.index===_});b&&!a.has(b.index)&&(a.set(b.index,!0),c.push(b.index),d.push(e.columns[b.index]),i-=b.wrappedWidth)});for(var f=!0,p=(r=t?.start)!==null&&r!==void 0?r:0;p<e.columns.length;){if(a.has(p)){p++;continue}var v=e.columns[p].wrappedWidth;if(f||i>=v)f=!1,c.push(p),d.push(e.columns[p]),i-=v;else break;p++}return{colIndexes:c,columns:d,lastIndex:p-1}}function VV(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=qV(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function Vj(n,e){var t=e.settings,r=t.startY,i=t.margin,a={x:i.left,y:r},c=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),d=r+i.bottom+c;if(t.pageBreak==="avoid"){var h=e.body,f=h.reduce(function(_,b){return _+b.height},0);d+=f}var p=new yh(n);(t.pageBreak==="always"||t.startY!=null&&d>p.pageSize().height)&&(Uj(p),a.y=i.top),e.callWillDrawPageHooks(p,a);var v=hc({},a);e.startPageNumber=p.pageNumber(),t.horizontalPageBreak?BV(p,e,v,a):(p.applyStyles(p.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(_){return wc(p,e,_,a,e.columns)}),p.applyStyles(p.userStyles),e.body.forEach(function(_,b){var T=b===e.body.length-1;Vg(p,e,_,T,v,a,e.columns)}),p.applyStyles(p.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(_){return wc(p,e,_,a,e.columns)})),Lj(p,e,v,a),e.callEndPageHooks(p,a),e.finalY=a.y,n.lastAutoTable=e,p.applyStyles(p.userStyles)}function BV(n,e,t,r){var i=VV(n,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(f,p){n.applyStyles(n.userStyles),p>0?Yf(n,e,t,r,f.columns,!0):KN(n,e,r,f.columns),UV(n,e,t,r,f.columns),Cv(n,e,r,f.columns)});else for(var c=-1,d=i[0],h=function(){var f=c;if(d){n.applyStyles(n.userStyles);var p=d.columns;c>=0?Yf(n,e,t,r,p,!0):KN(n,e,r,p),f=QN(n,e,c+1,r,p),Cv(n,e,r,p)}var v=f-c;i.slice(1).forEach(function(_){n.applyStyles(n.userStyles),Yf(n,e,t,r,_.columns,!0),QN(n,e,c+1,r,_.columns,v),Cv(n,e,r,_.columns)}),c=f};c<e.body.length-1;)h()}function KN(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return wc(n,e,a,t,r)})}function UV(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(a,c){var d=c===e.body.length-1;Vg(n,e,a,d,t,r,i)})}function QN(n,e,t,r,i,a){n.applyStyles(n.userStyles),a=a??e.body.length;var c=Math.min(t+a,e.body.length),d=-1;return e.body.slice(t,c).forEach(function(h,f){var p=t+f===e.body.length-1,v=Bj(n,e,p,r);h.canEntireRowFit(v,i)&&(wc(n,e,h,r,i),d=t+f)}),d}function Cv(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return wc(n,e,a,t,r)})}function zV(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function HV(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var a=0,c=0,d=t.columns;c<d.length;c++){var h=d[c],f=n.cells[h.index];if(f){Array.isArray(f.text)||(f.text=[f.text]);var p=new Fj(f.raw,f.styles,f.section);p=hc(p,f),p.text=[];var v=zV(f,e,r);f.text.length>v&&(p.text=f.text.splice(v,f.text.length));var _=r.scaleFactor(),b=r.getLineHeightFactor();f.contentHeight=f.getContentHeight(_,b),f.contentHeight>=e&&(f.contentHeight=e,p.styles.minCellHeight-=e),f.contentHeight>n.height&&(n.height=f.contentHeight),p.contentHeight=p.getContentHeight(_,b),p.contentHeight>a&&(a=p.contentHeight),i[h.index]=p}}var T=new Oj(n.raw,-1,n.section,i,!0);T.height=a;for(var I=0,L=t.columns;I<L.length;I++){var h=L[I],p=T.cells[h.index];p&&(p.height=T.height);var f=n.cells[h.index];f&&(f.height=n.height)}return T}function $V(n,e,t,r){var i=n.pageSize().height,a=r.settings.margin,c=a.top+a.bottom,d=i-c;e.section==="body"&&(d-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var h=e.getMinimumRowHeight(r.columns,n),f=h<t;if(h>d)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!f)return!1;var p=e.hasRowSpan(r.columns),v=e.getMaxCellHeight(r.columns)>d;return v?(p&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(p||r.settings.rowPageBreak==="avoid")}function Vg(n,e,t,r,i,a,c){var d=Bj(n,e,r,a);if(t.canEntireRowFit(d,c))wc(n,e,t,a,c);else if($V(n,t,d,e)){var h=HV(t,d,e,n);wc(n,e,t,a,c),Yf(n,e,i,a,c),Vg(n,e,h,r,i,a,c)}else Yf(n,e,i,a,c),Vg(n,e,t,r,i,a,c)}function wc(n,e,t,r,i){r.x=e.settings.margin.left;for(var a=0,c=i;a<c.length;a++){var d=c[a],h=t.cells[d.index];if(!h){r.x+=d.width;continue}n.applyStyles(h.styles),h.x=r.x,h.y=r.y;var f=e.callCellHooks(n,e.hooks.willDrawCell,h,t,d,r);if(f===!1){r.x+=d.width;continue}GV(n,h,r);var p=h.getTextPos();Tj(h.text,p.x,p.y,{halign:h.styles.halign,valign:h.styles.valign,maxWidth:Math.ceil(h.width-h.padding("left")-h.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,h,t,d,r),r.x+=d.width}r.y+=t.height}function GV(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=Rj(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),WV(n,e,t,r.lineWidth))}function WV(n,e,t,r){var i,a,c,d;r.top&&(i=t.x,a=t.y,c=t.x+e.width,d=t.y,r.right&&(c+=.5*r.right),r.left&&(i-=.5*r.left),h(r.top,i,a,c,d)),r.bottom&&(i=t.x,a=t.y+e.height,c=t.x+e.width,d=t.y+e.height,r.right&&(c+=.5*r.right),r.left&&(i-=.5*r.left),h(r.bottom,i,a,c,d)),r.left&&(i=t.x,a=t.y,c=t.x,d=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(d+=.5*r.bottom),h(r.left,i,a,c,d)),r.right&&(i=t.x+e.width,a=t.y,c=t.x+e.width,d=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(d+=.5*r.bottom),h(r.right,i,a,c,d));function h(f,p,v,_,b){n.getDocument().setLineWidth(f),n.getDocument().line(p,v,_,b,"S")}}function Bj(n,e,t,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function Yf(n,e,t,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(d){return wc(n,e,d,r,i)}),e.callEndPageHooks(n,r);var c=e.settings.margin;Lj(n,e,t,r),Uj(n),e.pageNumber++,r.x=c.left,r.y=c.top,t.y=c.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(d){return wc(n,e,d,r,i)}),n.applyStyles(n.userStyles))}function Uj(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function YV(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=Mj(this,r),a=qj(this,i);return Vj(this,a),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){Tj(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return yh.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){yh.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new yh(this),a=Dj(i,e,window,t,!1),c=a.head,d=a.body,h=((r=c[0])===null||r===void 0?void 0:r.map(function(f){return f.content}))||[];return{columns:h,rows:d,data:d}}}var Iv;function zj(n,e){var t=Mj(n,e),r=qj(n,t);Vj(n,r)}try{if(typeof window<"u"&&window){var XN=window,JN=XN.jsPDF||((Iv=XN.jspdf)===null||Iv===void 0?void 0:Iv.jsPDF);JN&&YV(JN)}}catch(n){console.error("Could not apply autoTable plugin",n)}const KV=n=>new Promise((e,t)=>{const r=new Image;r.src=n,r.onload=()=>e(r),r.onerror=t}),QV=async n=>{const e=new Et,t=[107,114,128],r=[107,114,128],i=[243,244,246];try{const _=await KV(Zu);e.addImage(_,"PNG",20,15,25,25)}catch(_){console.error("Erreur chargement logo",_)}e.setFontSize(24),e.setTextColor(t[0],t[1],t[2]),e.text("BOULANGERIE",55,25),e.setFontSize(10),e.setTextColor(r[0],r[1],r[2]),e.text("Adresse de la boulangerie",55,32),e.text("Tl: +221 77 575 41 59 / +221 78 582 27 72",55,37),e.text("Email: contact@boulangerie.sn",55,42),e.setFontSize(28),e.setTextColor(0,0,0),e.text("FACTURE",140,25),e.setFontSize(11),e.setTextColor(r[0],r[1],r[2]),e.text(`N ${n.numeroFacture}`,140,35),e.text(`Date: ${n.dateFacture.toLocaleDateString("fr-FR")}`,140,42),e.text(`Livraison: ${n.dateLivraison.toLocaleDateString("fr-FR")}`,140,49);const a=XV(n.statut);e.setFillColor(a[0],a[1],a[2]),e.rect(140,52,50,8,"F"),e.setTextColor(255,255,255),e.setFontSize(9),e.text(JV(n.statut),142,58),e.setLineWidth(.5),e.setDrawColor(r[0],r[1],r[2]),e.line(20,70,190,70),e.setFontSize(14),e.setTextColor(0,0,0),e.text("FACTURER :",20,85),e.setFontSize(11),e.setTextColor(r[0],r[1],r[2]);let c=95;if(e.text(n.client?.nom||"Client inconnu",20,c),n.client?.adresse){c+=6;const _=n.client.adresse;e.text(_,20,c)}if(n.client?.telephone&&(c+=6,e.text(`Tl: ${n.client.telephone}`,20,c)),n.client?.email){c+=6;const _=n.client.email;e.text(`Email: ${_}`,20,c)}e.setFontSize(11),e.setTextColor(0,0,0),e.text("CONDITIONS:",140,85),e.setTextColor(r[0],r[1],r[2]);const d=n.conditionsPaiement||" rception";e.text(d,140,95),e.text(`TVA: ${n.tauxTVA}%`,140,102);const h=Math.max(c+15,120),f=n.lignes.map(_=>[_.produit?.nom||"Produit inconnu",_.quantiteLivree.toString(),_.quantiteRetournee.toString(),_.quantiteFacturee.toString(),Cf(_.prixUnitaire),Cf(_.montantLigne)]);zj(e,{startY:h,head:[["Produit","Qt Liv.","Qt Ret.","Qt Fact.","P.U.","Total"]],body:f,theme:"grid",headStyles:{fillColor:t,textColor:[255,255,255],fontSize:8,fontStyle:"bold",halign:"center"},bodyStyles:{fontSize:8,cellPadding:2},columnStyles:{0:{cellWidth:"auto",halign:"left",minCellWidth:50},1:{cellWidth:20,halign:"center"},2:{cellWidth:20,halign:"center"},3:{cellWidth:20,halign:"center"},4:{cellWidth:24,halign:"right"},5:{cellWidth:24,halign:"right"}},alternateRowStyles:{fillColor:i},margin:{left:20,right:20},styles:{overflow:"linebreak",cellWidth:"wrap"}});const p=e.lastAutoTable.finalY+10;e.setFillColor(i[0],i[1],i[2]),e.rect(125,p,65,36,"F"),e.setFontSize(9),e.setTextColor(0,0,0),e.text("Total HT:",130,p+10),e.text(Cf(n.totalHT),185,p+10,{align:"right"}),e.text(`TVA (${n.tauxTVA}%):`,130,p+19),e.text(Cf(n.montantTVA),185,p+19,{align:"right"}),e.setLineWidth(.3),e.line(130,p+23,185,p+23),e.setFontSize(10),e.setFont("helvetica","bold"),e.text("TOTAL TTC:",130,p+32),e.text(Cf(n.totalTTC),185,p+32,{align:"right"});const v=e.internal.pageSize.height;return e.setFontSize(8),e.setFont("helvetica","normal"),e.setTextColor(r[0],r[1],r[2]),e.text("Merci de votre confiance !",20,v-25),e.text("TVA incluse - Paiement  rception de facture",20,v-20),e.text(`Facture gnre le ${new Date().toLocaleDateString("fr-FR")}  ${new Date().toLocaleTimeString("fr-FR")}`,20,v-15),e.text("Page 1/1",170,v-15),e},XV=n=>{switch(n){case"en_attente_retours":return[251,191,36];case"validee":return[59,130,246];case"envoyee":return[99,102,241];case"payee":return[34,197,94];case"annulee":return[239,68,68];default:return[107,114,128]}},JV=n=>{switch(n){case"en_attente_retours":return"EN ATTENTE";case"validee":return"VALIDE";case"envoyee":return"ENVOYE";case"payee":return"PAYE";case"annulee":return"ANNULE";default:return n.toUpperCase()}},Hj=async n=>{try{const e=await QV(n),t=`Facture_${n.numeroFacture}_${n.client?.nom?.replace(/\s/g,"_")||"Client"}.pdf`;return e.save(t),!0}catch(e){throw console.error("Erreur lors de la gnration du PDF:",e),new Error("Impossible de gnrer le PDF")}},ZV=({facture:n,isOpen:e,onClose:t})=>{const{modifierTauxTVA:r}=am(),[i,a]=he.useState(!1),[c,d]=he.useState("");if(!n)return null;const h=b=>{switch(b){case"en_attente_retours":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"validee":return"bg-blue-100 text-blue-800 border-blue-200";case"envoyee":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"payee":return"bg-green-100 text-green-800 border-green-200";case"annulee":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=b=>{switch(b){case"en_attente_retours":return"En attente retours";case"validee":return"Valide";case"envoyee":return"Envoye";case"payee":return"Paye";case"annulee":return"Annule";default:return b}},p=async()=>{try{const b=parseFloat(c);if(isNaN(b)||b<0||b>100){Pt.error(" Veuillez saisir un taux de TVA valide (0-100%)");return}await r(n.id,b),Pt.success(` Taux de TVA modifi  ${b}%`),a(!1),d("")}catch{Pt.error(" Erreur lors de la modification du taux de TVA")}},v=()=>{d(n.tauxTVA.toString()),a(!0)},_=()=>{a(!1),d("")};return l.jsx(Nl,{isOpen:e,onClose:t,title:`Facture ${n.numeroFacture}`,size:"lg",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"border-b border-gray-200 pb-4",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center gap-3",children:[l.jsx("img",{src:Zu,alt:"Logo",className:"h-8 w-auto"}),n.numeroFacture]}),l.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Date de livraison : ",n.dateLivraison.toLocaleDateString("fr-FR")]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Date de facturation : ",n.dateFacture.toLocaleDateString("fr-FR")]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${h(n.statut)}`,children:f(n.statut)}),l.jsx("div",{className:"mt-2 text-2xl font-bold text-gray-900",children:Pa(n.totalTTC)}),(n.statut==="validee"||n.statut==="envoyee"||n.statut==="payee")&&l.jsx("div",{className:"mt-3",children:l.jsxs(zr,{onClick:async()=>{try{await Hj(n),Pt.success(` PDF de la facture ${n.numeroFacture} tlcharg`)}catch{Pt.error(" Erreur lors de la gnration du PDF")}},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:download",className:"text-sm"}),"Tlcharger PDF"]})})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:account",className:"text-xl text-blue-600"}),"Informations client"]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Nom : "}),l.jsx("span",{className:"text-gray-900",children:n.client?.nom||"Client inconnu"})]}),n.client?.adresse&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Adresse : "}),l.jsx("span",{className:"text-gray-900",children:n.client.adresse})]}),n.client?.telephone&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Tlphone : "}),l.jsx("span",{className:"text-gray-900",children:n.client.telephone})]}),n.client?.email&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Email : "}),l.jsx("span",{className:"text-gray-900",children:n.client.email})]})]})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:file-document",className:"text-xl text-green-600"}),"Dtails facture"]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Conditions de paiement : "}),l.jsx("span",{className:"text-gray-900",children:n.conditionsPaiement})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"TVA : "}),i?l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("input",{type:"number",value:c,onChange:b=>d(b.target.value),className:"w-16 px-2 py-1 border border-gray-300 rounded text-sm",min:"0",max:"100",step:"0.1",autoFocus:!0}),l.jsx("span",{className:"text-gray-600 text-sm",children:"%"}),l.jsx("button",{onClick:p,className:"text-green-600 hover:text-green-800 text-sm p-1",title:"Confirmer",children:l.jsx(de,{icon:"mdi:check"})}),l.jsx("button",{onClick:_,className:"text-red-600 hover:text-red-800 text-sm p-1",title:"Annuler",children:l.jsx(de,{icon:"mdi:close"})})]}):l.jsxs("span",{className:"text-gray-900 flex items-center gap-2",children:[n.tauxTVA,"%",n.statut!=="payee"&&n.statut!=="annulee"&&l.jsx("button",{onClick:v,className:"text-blue-600 hover:text-blue-800 text-xs p-1",title:"Modifier le taux de TVA",children:l.jsx(de,{icon:"mdi:pencil"})})]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Retours complts : "}),l.jsx("span",{className:`font-medium ${n.retoursCompletes?"text-green-600":"text-orange-600"}`,children:n.retoursCompletes?"Oui":"Non"})]}),n.validatedAt&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Valide le : "}),l.jsx("span",{className:"text-gray-900",children:n.validatedAt.toLocaleDateString("fr-FR")})]}),n.paidAt&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Paye le : "}),l.jsx("span",{className:"text-gray-900",children:n.paidAt.toLocaleDateString("fr-FR")})]})]})]})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:format-list-bulleted",className:"text-xl text-purple-600"}),"Dtail des produits"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 rounded-lg",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produit"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qt livre"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qt retourne"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qt facture"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix unitaire"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.lignes.map((b,T)=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:b.produit?.nom||"Produit inconnu"}),l.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:b.quantiteLivree}),l.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:b.quantiteRetournee}),l.jsx("td",{className:"px-4 py-3 text-sm text-center font-medium text-gray-900",children:b.quantiteFacturee}),l.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:Pa(b.prixUnitaire)}),l.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900",children:Pa(b.montantLigne)})]},T))})]})})]}),l.jsx("div",{className:"border-t border-gray-200 pt-4",children:l.jsx("div",{className:"flex justify-end",children:l.jsx("div",{className:"w-64",children:l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Total HT :"}),l.jsx("span",{className:"text-gray-900",children:Pa(n.totalHT)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"font-medium text-gray-700",children:["TVA (",n.tauxTVA,"%) :"]}),l.jsx("span",{className:"text-gray-900",children:Pa(n.montantTVA)})]}),l.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[l.jsx("span",{className:"font-bold text-gray-900",children:"Total TTC :"}),l.jsx("span",{className:"font-bold text-lg text-gray-900",children:Pa(n.totalTTC)})]})]})})})})]})})},eB=({isOpen:n,onClose:e})=>{const{chargerFactures:t}=am(),{chargerClients:r}=_u(),[i,a]=he.useState(new Date().getMonth()),[c,d]=he.useState(new Date().getFullYear()),[h,f]=he.useState(!1),[p,v]=he.useState([]),_=async()=>{f(!0);try{await t(),await r();const T=_u.getState().clients.filter(L=>L.typeClient==="boutique"&&L.eligibleRistourne);if(T.length===0){v([]),Pt("Aucun client ligible  la ristourne trouv.",{icon:""});return}const I=[];for(const L of T){const j=am.getState().factures.filter(re=>{const ne=new Date(re.dateLivraison);return re.clientId===L.id&&ne.getMonth()===i&&ne.getFullYear()===c&&re.statut!=="annulee"&&re.statut!=="brouillon"});if(j.length===0)continue;let U=0,z=0,B=0;j.forEach(re=>{re.lignes.forEach(ne=>{const V=ne.quantiteFacturee;if(V<=0)return;const D=ne.produit;if(D&&D.prixClient&&D.prixBoutique){const k=(D.prixBoutique||0)-(D.prixClient||0);k>0&&(U+=k*V)}z+=V,B+=ne.montantLigne})}),U>0&&I.push({client:L.nom,nombreFactures:j.length,volumeProduits:z,totalPaye:B,totalRistourne:U})}v(I),I.length===0?Pt("Aucune ristourne gnre pour cette priode.",{icon:"info"}):Pt.success(`${I.length} clients avec ristourne calcule !`)}catch(T){console.error(T),Pt.error("Erreur lors du calcul")}finally{f(!1)}},b=()=>{const T=new Et;T.setFontSize(18),T.text("Rapport des Ristournes Mensuelles",14,22),T.setFontSize(11);const I=new Date(c,i).toLocaleString("fr-FR",{month:"long",year:"numeric"});T.text(`Priode : ${I}`,14,32),T.text(`Gnr le : ${new Date().toLocaleDateString("fr-FR")}`,14,38);const L=["Client","Nbr Factures","Qt Produits","Total Ristourne"],j=p.map(B=>[B.client,B.nombreFactures,B.volumeProduits,Pa(B.totalRistourne)]);zj(T,{head:[L],body:j,startY:45,theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[66,66,66]}});const U=p.reduce((B,re)=>B+re.totalRistourne,0),z=T.lastAutoTable.finalY||50;T.setFontSize(12),T.setFont("helvetica","bold"),T.text(`Total  reverser : ${Pa(U)}`,14,z+15),T.save(`ristournes_${c}_${i+1}.pdf`),Pt.success("PDF tlcharg !")};return l.jsx(Nl,{isOpen:n,onClose:e,title:"Calculateur de Ristournes (Cashback)",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex gap-4 items-end bg-gray-50 p-4 rounded-lg",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Ch,{label:"Mois",value:i.toString(),onChange:T=>a(parseInt(T.target.value)),options:Array.from({length:12},(T,I)=>({value:I.toString(),label:new Date(2e3,I,1).toLocaleString("fr-FR",{month:"long"})}))})}),l.jsx("div",{className:"flex-1",children:l.jsx(Ch,{label:"Anne",value:c.toString(),onChange:T=>d(parseInt(T.target.value)),options:[{value:"2024",label:"2024"},{value:"2025",label:"2025"}]})}),l.jsx(zr,{onClick:_,isLoading:h,children:"Calculer"})]}),l.jsx("div",{className:"min-h-[200px]",children:h?l.jsx(Gy,{message:"Analyse des factures en cours..."}):p.length>0?l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"overflow-x-auto border rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Vol. Produits"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ristourne"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((T,I)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:T.client}),l.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-500",children:T.volumeProduits}),l.jsx("td",{className:"px-4 py-3 text-sm text-right font-bold text-green-600",children:Pa(T.totalRistourne)})]},I))}),l.jsx("tfoot",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("td",{colSpan:2,className:"px-4 py-3 text-sm font-bold text-gray-900 text-right",children:"TOTAL"}),l.jsx("td",{className:"px-4 py-3 text-sm font-bold text-green-700 text-right",children:Pa(p.reduce((T,I)=>T+I.totalRistourne,0))})]})})]})}),l.jsx("div",{className:"flex justify-end",children:l.jsxs(zr,{variant:"secondary",onClick:b,children:[l.jsx(de,{icon:"mdi:file-pdf-box",className:"mr-2 text-lg"}),"Tlcharger le rapport PDF"]})})]}):l.jsx("div",{className:"text-center py-10 text-gray-500",children:"Cliquez sur Calculer pour voir les ristournes  reverser."})})]})})},tB=()=>{const{factures:n,factureActive:e,isLoading:t,chargerFactures:r,chargerParametres:i,genererFacturesDepuisLivraisons:a,envoyerFacture:c,marquerPayee:d,annulerFacture:h,supprimerFacture:f,setFactureActive:p,actualiserStatutsFactures:v}=am(),{chargerProgramme:_}=_l(),{chargerInvendusDuJour:b}=sm(),T=Wy(),[I,L]=he.useState(new Date().toISOString().split("T")[0]),[j,U]=he.useState("tous"),[z,B]=he.useState(!1),[re,ne]=he.useState(!1);he.useEffect(()=>{(async()=>{try{await i(),await r()}catch(ae){console.error("Erreur lors de l'initialisation:",ae)}})()},[i,r]),he.useEffect(()=>{(async()=>{try{await r(),await v()}catch(ae){console.error("Erreur lors du rechargement des factures:",ae)}})()},[I,r,v]),he.useEffect(()=>{const Q=setInterval(async()=>{try{await v(),await r()}catch(ae){console.error("Erreur lors de la synchronisation automatique:",ae)}},3e4);return()=>clearInterval(Q)},[v,r]);const V=async()=>{try{const Q=new Date(I),ae=n.filter(J=>J.dateLivraison.toISOString().split("T")[0]===I);if(ae.length>0){const J=ae.filter(X=>X.statut==="en_attente_retours").length;if(!await T.confirm({title:"Mise  jour des factures",message:`Il existe dj ${ae.length} facture(s) pour le ${new Date(I).toLocaleDateString("fr-FR")} :
 ${J} facture(s) en attente de retours
 ${ae.length-J} facture(s) dj valide(s)

Cette action va :
 Vrifier l'tat des retours clients
 Mettre  jour automatiquement les statuts
 Passer en "Valide" si retours complts
 NE crera PAS de doublons`,confirmText:"Mettre  jour",cancelText:"Annuler",type:"warning"}))return}console.log(" Chargement du programme pour",Q.toLocaleDateString("fr-FR")),await _(Q),console.log(" Chargement des retours clients pour",Q.toLocaleDateString("fr-FR")),await b(Q),await new Promise(J=>setTimeout(J,500));const je=_l.getState().programmeActuel?.commandesClients||[];console.log(` ${je.length} commandes clients charges`);const Fe=sm.getState().invendusClients;console.log(` ${Fe.length} retours clients chargs`),Fe.length>0?console.log(" Clients avec retours:",Fe.map(J=>({clientId:J.clientId,client:J.client?.nom,produits:J.produits.length,retoursCompletes:J.retoursCompletes}))):console.warn(" Aucun retour client trouv pour cette date"),await a(Q,je,Fe),await r(),Pt.success(" Factures gnres avec succs")}catch(Q){console.error("Erreur lors de la gnration:",Q),Pt.error(` Erreur lors de la gnration: ${Q}`)}},D=async(Q,ae)=>{try{switch(Q){case"voir":p(ae),B(!0);break;case"pdf":try{await Hj(ae),Pt.success(` PDF de la facture ${ae.numeroFacture} tlcharg`)}catch(me){console.error("Erreur lors de la gnration du PDF:",me),Pt.error(" Erreur lors de la gnration du PDF")}break;case"envoyer":{await T.confirm({title:"Envoyer la facture",message:`Envoyer la facture ${ae.numeroFacture} au client "${ae.client?.nom||"Inconnu"}" ?

La facture passera au statut "Envoye".`,confirmText:"Envoyer",cancelText:"Annuler",type:"info"})&&(await c(ae.id),Pt.success(` Facture ${ae.numeroFacture} envoye au client`));break}case"relancer":Pt(" Relance client - Fonctionnalit  implmenter",{icon:"",duration:3e3});break;case"payer":{await T.confirm({title:"Marquer comme paye",message:`Confirmer le paiement de la facture ${ae.numeroFacture} (${Pa(ae.totalTTC)}) ?

La facture passera au statut "Paye".`,confirmText:"Confirmer le paiement",cancelText:"Annuler",type:"success"})&&(await d(ae.id),Pt.success(` Facture ${ae.numeroFacture} marque comme paye`));break}case"annuler":{await T.confirm({title:"Annuler la facture",message:`tes-vous sr de vouloir annuler la facture ${ae.numeroFacture} ?

Cette action est irrversible et la facture ne pourra plus tre modifie.`,confirmText:"Annuler la facture",cancelText:"Conserver",type:"danger"})&&(await h(ae.id),Pt.success(` Facture ${ae.numeroFacture} annule`));break}case"supprimer":{await T.confirm({title:"Supprimer la facture",message:`ATTENTION : tes-vous sr de vouloir SUPPRIMER DFINITIVEMENT la facture ${ae.numeroFacture} ?

Cette action supprimera la facture de la base de donnes.`,confirmText:"Supprimer dfinitivement",cancelText:"Annuler",type:"danger"})&&(await f(ae.id),Pt.success(` Facture ${ae.numeroFacture} supprime`));break}}}catch(me){console.error("Erreur lors de l'action:",me),Pt.error(` Erreur: ${me}`)}},k=async()=>{const Q=n.filter(me=>me.dateLivraison.toISOString().split("T")[0]===I&&me.statut==="en_attente_retours");if(Q.length===0){Pt(` Aucune facture en attente de retours pour le ${new Date(I).toLocaleDateString("fr-FR")}.`,{icon:"",duration:3e3});return}if(await T.confirm({title:"Actualisation des statuts",message:`${Q.length} facture(s) en attente de retours trouve(s) pour le ${new Date(I).toLocaleDateString("fr-FR")}.

Cette action va :
 Vrifier l'tat des retours pour chaque client
 Mettre  jour automatiquement les statuts
 Valider les factures si retours complts`,confirmText:"Actualiser",cancelText:"Annuler",type:"info"}))try{await v(),await r(),Pt.success(` Statuts des factures du ${new Date(I).toLocaleDateString("fr-FR")} actualiss`)}catch(me){console.error("Erreur lors de l'actualisation:",me),Pt.error(` Erreur lors de l'actualisation: ${me}`)}},$=n.filter(Q=>{const je=Q.dateLivraison.toISOString().split("T")[0]===I,Fe=j==="tous"||Q.statut===j;return je&&Fe}),S=n.filter(Q=>Q.dateLivraison.toISOString().split("T")[0]===I),R={total:S.length,enAttente:S.filter(Q=>Q.statut==="en_attente_retours").length,validees:S.filter(Q=>Q.statut==="validee").length,payees:S.filter(Q=>Q.statut==="payee").length,montantTotal:S.filter(Q=>Q.statut!=="annulee").reduce((Q,ae)=>Q+ae.totalTTC,0),montantEnAttente:S.filter(Q=>Q.statut==="validee"||Q.statut==="envoyee").reduce((Q,ae)=>Q+ae.totalTTC,0)},F=Q=>{switch(Q){case"brouillon":return"text-gray-600 bg-gray-100";case"en_attente_retours":return"text-yellow-700 bg-yellow-100";case"validee":return"text-blue-700 bg-blue-100";case"envoyee":return"text-indigo-700 bg-indigo-100";case"payee":return"text-green-700 bg-green-100";case"annulee":return"text-red-700 bg-red-100";default:return"text-gray-600 bg-gray-100"}},oe=Q=>{switch(Q){case"brouillon":return"Brouillon";case"en_attente_retours":return"En attente retours";case"validee":return"Valide";case"envoyee":return"Envoye";case"payee":return"Paye";case"annulee":return"Annule";default:return Q}},be=Q=>{const ae=[{key:"voir",label:"Voir dtails",icon:"mdi:eye",color:"text-blue-600"}];switch(Q.statut){case"en_attente_retours":ae.push({key:"supprimer",label:"Supprimer",icon:"mdi:trash-can-outline",color:"text-red-500 hover:bg-red-50"});break;case"validee":ae.push({key:"pdf",label:"Tlcharger PDF",icon:"mdi:download",color:"text-gray-600"}),ae.push({key:"envoyer",label:"Envoyer au client",icon:"mdi:send",color:"text-indigo-600"}),ae.push({key:"annuler",label:"Annuler",icon:"mdi:cancel",color:"text-red-600"}),ae.push({key:"supprimer",label:"Supprimer",icon:"mdi:trash-can-outline",color:"text-red-500 hover:bg-red-50"});break;case"envoyee":ae.push({key:"pdf",label:"Tlcharger PDF",icon:"mdi:download",color:"text-gray-600"}),ae.push({key:"relancer",label:"Relancer client",icon:"mdi:email-send",color:"text-orange-600"}),ae.push({key:"payer",label:"Marquer paye",icon:"mdi:cash-check",color:"text-green-600"});break;case"payee":ae.push({key:"pdf",label:"Tlcharger PDF",icon:"mdi:download",color:"text-gray-600"});break;case"annulee":ae.push({key:"supprimer",label:"Supprimer",icon:"mdi:trash-can-outline",color:"text-red-500 hover:bg-red-50"});break}return ae};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-linear-to-r from-purple-600 to-indigo-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:file-document",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Factures"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Gnration et suivi des factures clients bases sur les livraisons et retours"})]})]}),l.jsxs(zr,{onClick:()=>ne(!0),variant:"outline",className:"flex items-center gap-2 border-orange-200 text-orange-700 hover:bg-orange-50 hover:border-orange-300",children:[l.jsx(de,{icon:"mdi:calculator",className:"text-xl"}),l.jsx("span",{children:"Calculer Ristournes"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:file-multiple",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:R.total}),l.jsx("div",{className:"text-gray-300 text-xs",children:"factures"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Factures"}),l.jsx("div",{className:"text-gray-300 text-sm",children:"Toutes priodes confondues"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:clock-outline",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:R.enAttente}),l.jsx("div",{className:"text-gray-300 text-xs",children:"en attente"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"En Attente Retours"}),l.jsx("div",{className:"text-gray-300 text-sm",children:"Ncessite saisie retours"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:check-circle",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:R.payees}),l.jsx("div",{className:"text-gray-300 text-xs",children:"payes"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Factures Payes"}),l.jsx("div",{className:"text-gray-300 text-sm",children:"Compltement rgles"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:cash",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-bold",children:Pa(R.montantTotal)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"FCFA"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Montant Total"}),l.jsx("div",{className:"text-gray-300 text-sm",children:"Chiffre d'affaires global"})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:file-plus",className:"text-lg text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Gnration de factures"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Crer des factures bases sur les livraisons du jour"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[l.jsx("div",{className:"flex-1 min-w-48",children:l.jsx(mr,{type:"date",label:"Date de livraison",value:I,onChange:Q=>L(Q.target.value)})}),l.jsxs(zr,{onClick:V,isLoading:t,className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:plus",className:"text-sm"}),n.some(Q=>Q.dateLivraison.toISOString().split("T")[0]===I)?"Mettre  jour factures":"Gnrer nouvelles factures"," du ",new Date(I).toLocaleDateString("fr-FR")]}),l.jsxs(zr,{onClick:k,isLoading:t,variant:"secondary",className:"flex items-center gap-2",children:[!t&&l.jsx(de,{icon:"mdi:sync",className:"text-sm"}),"Synchroniser avec retours"]})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:file-document-multiple",className:"text-lg text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Liste des factures"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Filtrer et grer vos factures"})]})]})}),l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"mb-4 flex flex-wrap gap-4",children:l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filtrer par statut"}),l.jsxs("select",{value:j,onChange:Q=>U(Q.target.value),className:"block rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-orange-500 focus:ring-1 sm:text-sm transition-colors bg-white",children:[l.jsx("option",{value:"tous",children:"Tous"}),l.jsx("option",{value:"en_attente_retours",children:"En attente retours"}),l.jsx("option",{value:"validee",children:"Valides"}),l.jsx("option",{value:"envoyee",children:"Envoyes"}),l.jsx("option",{value:"payee",children:"Payes"}),l.jsx("option",{value:"annulee",children:"Annules"})]})]})}),$.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(de,{icon:"mdi:file-document-outline",className:"text-6xl mb-4 text-gray-400"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune facture trouve"}),l.jsx("p",{className:"text-gray-600",children:j==="tous"?"Commencez par gnrer des factures pour une date donne":`Aucune facture avec le statut "${oe(j)}"`})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"N Facture"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date livraison"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant TTC"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Retours"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(Q=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:Q.numeroFacture}),l.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:Q.client?.nom||"Client inconnu"}),l.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:Q.dateLivraison.toLocaleDateString("fr-FR")}),l.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:Pa(Q.totalTTC)}),l.jsx("td",{className:"px-4 py-2 text-sm",children:l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F(Q.statut)}`,children:oe(Q.statut)})}),l.jsx("td",{className:"px-4 py-2 text-sm text-center",children:Q.retoursCompletes?l.jsx(de,{icon:"mdi:check-circle",className:"text-green-500 text-lg"}):l.jsx(de,{icon:"mdi:clock-outline",className:"text-yellow-500 text-lg"})}),l.jsx("td",{className:"px-4 py-2 text-sm",children:l.jsx("div",{className:"flex space-x-2",children:be(Q).map(ae=>l.jsx("button",{onClick:()=>D(ae.key,Q),className:`p-1 rounded hover:bg-gray-100 ${ae.color}`,title:ae.label,children:l.jsx(de,{icon:ae.icon,className:"text-lg"})},ae.key))})})]},Q.id))})]})})]})]})]}),l.jsx(Cl,{isOpen:T.isOpen,onClose:T.handleCancel,onConfirm:T.handleConfirm,title:T.title,message:T.message,confirmText:T.confirmText,cancelText:T.cancelText,type:T.type}),l.jsx(ZV,{facture:e,isOpen:z,onClose:()=>{B(!1),p(null)}}),l.jsx(eB,{isOpen:re,onClose:()=>ne(!1)})]})},nB=()=>{const{matieres:n,getDepensesPeriode:e,getValeurConsommationPeriode:t}=El(),{factures:r,chargerFactures:i}=am(),[a,c]=lc.useState(0),[d,h]=lc.useState(!0),f=n.reduce((z,B)=>z+B.valeurTotale,0),p=new Date,v=new Date(p.getFullYear(),p.getMonth(),1),_=new Date(p.getFullYear(),p.getMonth()+1,0),b=t(v,p),T=e(v,p);lc.useEffect(()=>{(async()=>{h(!0);try{await i(v,_);const B=xs($n(wt,"shopSales"),Fn("date",">=",v),Fn("date","<=",_)),re=await ga(B);let ne=0;re.docs.forEach(V=>{const D=V.data();if(D.produits&&Array.isArray(D.produits)){const k=D.produits.reduce(($,S)=>{const R=S.produit?.prixBoutique||0,F=S.venduTotal||0;return $+R*F},0);ne+=k}}),c(ne)}catch(B){console.error("Erreur chargement stats:",B)}finally{h(!1)}})()},[]);const I=r.filter(z=>z.statut==="validee"||z.statut==="payee"||z.statut==="envoyee").reduce((z,B)=>z+B.totalTTC,0),L=I+a,j=L-b,U=L>0?j/L*100:0;return lc.useEffect(()=>{console.log(" DEBUG Marge Brute:",{"Ventes Factures":I,"Ventes Boutique":a,"Total Ventes":L,"Cot Matires Consommes":b,"Marge Brute Calcule":j,"Nombre de Factures":r.length,"Factures dtail":r.map(z=>({id:z.id,statut:z.statut,total:z.totalTTC}))})},[L,b,j,r,I,a]),l.jsx(l.Fragment,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[l.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Valeur totale Stock"}),l.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:[Math.round(f).toLocaleString()," FCFA"]})]}),l.jsx("div",{className:"p-3 bg-blue-50 rounded-lg text-blue-600",children:l.jsx(D3,{size:24})})]})}),l.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Flux de Trsorerie (Achats)"}),l.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:[Math.round(T).toLocaleString()," FCFA"]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Achats du mois"})]}),l.jsx("div",{className:"p-3 bg-orange-50 rounded-lg text-orange-600",children:l.jsx($O,{size:24})})]})}),l.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Cot Production"}),l.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mt-1 text-orange-600",children:[Math.round(b).toLocaleString()," FCFA"]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Matires consommes"})]}),l.jsx("div",{className:"p-3 bg-orange-50 rounded-lg text-orange-600",children:l.jsx(EO,{size:24})})]})}),l.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Marge Brute (Comptable)"}),d?l.jsx("h3",{className:"text-2xl font-bold text-gray-300 mt-1 animate-pulse",children:"..."}):l.jsxs(l.Fragment,{children:[l.jsxs("h3",{className:`text-2xl font-bold mt-1 ${j>=0?"text-green-600":"text-red-600"}`,children:[Math.round(j).toLocaleString()," FCFA"]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${U>30?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[U.toFixed(1),"%"]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Ventes - Conso."})]})]})]}),l.jsx("div",{className:"p-3 bg-purple-50 rounded-lg text-purple-600",children:l.jsx(WO,{size:24})})]})})]})})},rB=({onAddMouvement:n})=>{const{matieres:e,addMatiere:t,updateMatiere:r,deleteMatiere:i}=El(),[a,c]=he.useState(null),[d,h]=he.useState(!1),[f,p]=he.useState({isOpen:!1,matiereId:"",matiereNom:""}),[v,_]=he.useState({nom:"",unite:"kg",stockMinimum:"",prixMoyenPondere:"",stockActuel:"",valeurTotale:0}),b=j=>{j.preventDefault(),a?(r(a,{...v,stockMinimum:Number(v.stockMinimum)||0,stockActuel:Number(v.stockActuel)||0,prixMoyenPondere:Number(v.prixMoyenPondere)||0,valeurTotale:(Number(v.stockActuel)||0)*(Number(v.prixMoyenPondere)||0)}),c(null)):t({nom:v.nom||"",unite:v.unite||"kg",stockMinimum:Number(v.stockMinimum)||0,stockActuel:Number(v.stockActuel)||0,prixMoyenPondere:Number(v.prixMoyenPondere)||0,valeurTotale:(Number(v.stockActuel)||0)*(Number(v.prixMoyenPondere)||0),active:!0}),_({nom:"",unite:"kg",stockMinimum:"",prixMoyenPondere:"",stockActuel:"",valeurTotale:0}),h(!1)},T=j=>{_(j),c(j.id),h(!0)},I=(j,U)=>{p({isOpen:!0,matiereId:j,matiereNom:U})},L=()=>{i(f.matiereId),p({isOpen:!1,matiereId:"",matiereNom:""})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Matires Premires"}),l.jsxs("button",{onClick:()=>{c(null),c(null),_({nom:"",unite:"kg",stockMinimum:"",prixMoyenPondere:"",stockActuel:"",valeurTotale:0}),h(!d)},className:"flex items-center space-x-2 bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:[l.jsx(Hy,{size:20}),l.jsx("span",{children:"Nouvelle Matire"})]})]}),d&&l.jsxs("form",{onSubmit:b,className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),l.jsx("input",{required:!0,type:"text",value:v.nom,onChange:j=>_({...v,nom:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: Farine T55"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),l.jsxs("select",{value:v.unite,onChange:j=>_({...v,unite:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",children:[l.jsx("option",{value:"kg",children:"Kilogramme (kg)"}),l.jsx("option",{value:"g",children:"Gramme (g)"}),l.jsx("option",{value:"l",children:"Litre (l)"}),l.jsx("option",{value:"piece",children:"Pice"}),l.jsx("option",{value:"sac_50kg",children:"Sac 50kg"}),l.jsx("option",{value:"sac_25kg",children:"Sac 25kg"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Initial"}),l.jsx("input",{type:"number",min:"0",step:"0.01",value:v.stockActuel,onChange:j=>_({...v,stockActuel:j.target.value===""?"":parseFloat(j.target.value)}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",disabled:!!a}),a&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Pour modifier le stock, utilisez "Mouvement"'})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seuil d'alerte"}),l.jsx("input",{type:"number",min:"0",value:v.stockMinimum,onChange:j=>_({...v,stockMinimum:j.target.value===""?"":parseFloat(j.target.value)}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix Moyen Initial (FCFA)"}),l.jsx("input",{type:"number",min:"0",value:v.prixMoyenPondere,onChange:j=>_({...v,prixMoyenPondere:j.target.value===""?"":parseFloat(j.target.value)}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",disabled:!!a})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Annuler"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:a?"Mettre  jour":"Crer"})]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"Nom"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-600",children:"Stock Actuel"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-600",children:"Valeur (FCFA)"}),l.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-600",children:"tat"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-600",children:"Actions"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.map(j=>{const U=j.stockActuel<=j.stockMinimum;return l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsxs("td",{className:"px-6 py-4",children:[l.jsx("div",{className:"font-medium text-gray-900",children:j.nom}),l.jsxs("div",{className:"text-xs text-gray-500",children:["PMP: ",Math.round(j.prixMoyenPondere).toLocaleString()," FCFA / ",j.unite]})]}),l.jsxs("td",{className:"px-6 py-4 text-right font-medium text-gray-900",children:[j.stockActuel.toLocaleString()," ",l.jsx("span",{className:"text-gray-500 text-sm",children:j.unite})]}),l.jsx("td",{className:"px-6 py-4 text-right text-gray-600",children:Math.round(j.valeurTotale).toLocaleString()}),l.jsx("td",{className:"px-6 py-4 text-center",children:U?l.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[l.jsx(KO,{size:12,className:"mr-1"}),"Critique"]}):l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"OK"})}),l.jsx("td",{className:"px-6 py-4 text-right",children:l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx("button",{onClick:()=>n(j),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Ajouter un mouvement",children:l.jsx(wO,{size:18})}),l.jsx("button",{onClick:()=>T(j),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Modifier",children:l.jsx(M3,{size:18})}),l.jsx("button",{onClick:()=>I(j.id,j.nom),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Supprimer",children:l.jsx($y,{size:18})})]})})]},j.id)}),e.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"Aucune matire premire enregistre."})})]})]})}),l.jsx(Cl,{isOpen:f.isOpen,onClose:()=>p({isOpen:!1,matiereId:"",matiereNom:""}),onConfirm:L,title:"Confirmer la suppression",message:`tes-vous sr de vouloir supprimer la matire premire "${f.matiereNom}" ?

Cette action est irrversible.`,confirmText:"Supprimer",cancelText:"Annuler",type:"danger",position:"center"})]})},iB=({isOpen:n,onClose:e,selectedMatiere:t})=>{const{addMouvement:r,fournisseurs:i}=El(),[a,c]=he.useState({type:"achat",quantite:"",prixTotal:"",motif:"",auteur:"",responsable:"",fournisseurId:"",referenceDocument:""});if(he.useEffect(()=>{n&&c({type:"achat",quantite:"",prixTotal:"",motif:"",auteur:"",responsable:"",fournisseurId:"",referenceDocument:""})},[n,t]),!n||!t)return null;const d=p=>{const v=p===""?"":parseFloat(p),_={...a,quantite:v};a.type==="achat"&&typeof v=="number"&&t.prixMoyenPondere>0&&(_.prixTotal=Math.round(v*t.prixMoyenPondere)),c(_)},h=async p=>{p.preventDefault();try{await r({date:new Date,matiereId:t.id,type:a.type,quantite:Number(a.quantite)||0,prixTotal:a.type==="achat"?Number(a.prixTotal)||0:void 0,motif:a.motif,auteur:a.auteur,responsable:a.responsable,referenceDocument:a.referenceDocument,userId:"current-user-id"}),e()}catch(v){console.error("Erreur lors de l'ajout du mouvement:",v),alert("Erreur lors de l'enregistrement. Vrifiez votre connexion.")}},f=["consommation","perte","retour_fournisseur"].includes(a.type);return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[l.jsxs("h3",{className:"font-bold text-gray-800",children:["Mouvement de Stock : ",t.nom]}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:l.jsx(e9,{size:20})})]}),l.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de mouvement"}),l.jsxs("select",{value:a.type,onChange:p=>c({...a,type:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",children:[l.jsx("option",{value:"achat",children:"Achat / Entre"}),l.jsx("option",{value:"consommation",children:"Consommation (Production)"}),l.jsx("option",{value:"perte",children:"Perte / Gchis"}),l.jsx("option",{value:"retour_fournisseur",children:"Retour Fournisseur"}),l.jsx("option",{value:"correction",children:"Correction d'Inventaire"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[f?"Quantit Sortante":"Quantit Entrante"," (",t.unite,")"]}),l.jsx("input",{type:"number",min:"0",step:"0.01",required:!0,value:a.quantite,onChange:p=>d(p.target.value),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none font-bold text-lg"})]}),a.type==="achat"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix Total (FCFA)"}),l.jsx("input",{type:"number",min:"0",required:!0,value:a.prixTotal,onChange:p=>c({...a,prixTotal:p.target.value===""?"":parseFloat(p.target.value)}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:["Soit ",Number(a.quantite)>0?Math.round((Number(a.prixTotal)||0)/Number(a.quantite)):0," FCFA / ",t.unite]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fournisseur (Optionnel)"}),l.jsxs("select",{value:a.fournisseurId,onChange:p=>c({...a,fournisseurId:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",children:[l.jsx("option",{value:"",children:"Slectionner..."}),i.map(p=>l.jsx("option",{value:p.id,children:p.nom},p.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rfrence Facture / BL"}),l.jsx("input",{type:"text",value:a.referenceDocument,onChange:p=>c({...a,referenceDocument:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Auteur (Celui qui sort)"}),l.jsx("input",{type:"text",required:!0,value:a.auteur,onChange:p=>c({...a,auteur:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: Boulanger"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Valid par (Responsable) ",a.type!=="achat"&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",required:a.type!=="achat",value:a.responsable,onChange:p=>c({...a,responsable:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:a.type==="achat"?"Optionnel":"Ex: Grant"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motif / Commentaire"}),l.jsx("input",{type:"text",value:a.motif,onChange:p=>c({...a,motif:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:a.type==="perte"?"Ex: Sac dchir, Humidit...":"Optionnel"})]}),l.jsxs("div",{className:"pt-4 flex space-x-3",children:[l.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Annuler"}),l.jsxs("button",{type:"submit",className:`flex-1 px-4 py-2 rounded-lg text-white font-medium ${f?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"}`,children:["Valider ",f?"la Sortie":"l'Entre"]})]})]})]})})},sB=()=>{const{mouvements:n,matieres:e}=El(),[t,r]=he.useState(""),a=n.map(h=>{const f=e.find(v=>v.id===h.matiereId);let p=h.prixTotal;return!p&&f&&["consommation","perte"].includes(h.type)&&(p=Math.abs(h.quantite)*f.prixMoyenPondere),{...h,matiereNom:f?f.nom:"Article Inconnu",matiereUnite:f?f.unite:"",displayPrice:p}}).filter(h=>h.matiereNom.toLowerCase().includes(t.toLowerCase())||h.motif&&h.motif.toLowerCase().includes(t.toLowerCase())),c=h=>{switch(h){case"achat":return"bg-green-100 text-green-800";case"consommation":return"bg-blue-100 text-blue-800";case"perte":return"bg-red-100 text-red-800";case"correction":return"bg-gray-100 text-gray-800";case"retour_fournisseur":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},d=h=>h==="achat"?l.jsx(yO,{size:16,className:"mr-1"}):l.jsx(NO,{size:16,className:"mr-1"});return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Historique des Mouvements"}),l.jsxs("div",{className:"relative",children:[l.jsx(VO,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),l.jsx("input",{type:"text",placeholder:"Rechercher...",value:t,onChange:h=>r(h.target.value),className:"pl-10 pr-4 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-orange-500 outline-none w-64"})]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:[l.jsx("th",{className:"px-6 py-3",children:"Date"}),l.jsx("th",{className:"px-6 py-3",children:"Article"}),l.jsx("th",{className:"px-6 py-3",children:"Type"}),l.jsx("th",{className:"px-6 py-3",children:"Auteur / Resp."}),l.jsx("th",{className:"px-6 py-3 text-right",children:"Quantit"}),l.jsx("th",{className:"px-6 py-3 text-right",children:"Prix Total"}),l.jsx("th",{className:"px-6 py-3",children:"Motif / Rf"})]})}),l.jsxs("tbody",{className:"bg-white divide-y divide-gray-100",children:[a.map(h=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[new Date(h.date).toLocaleDateString("fr-FR")," ",l.jsx("span",{className:"text-xs",children:new Date(h.date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h.matiereNom}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c(h.type)}`,children:[d(h.type),h.type==="achat"?"Entre":h.type.charAt(0).toUpperCase()+h.type.slice(1)]})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[l.jsx("div",{className:"font-medium",children:h.auteur||"Inconnu"}),h.responsable&&l.jsxs("div",{className:"text-xs text-gray-500 text-green-600",children:["Valid par: ",h.responsable]})]}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:[h.quantite," ",l.jsx("span",{className:"text-gray-500 font-normal",children:h.matiereUnite})]}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:[h.displayPrice?`${h.displayPrice.toLocaleString()} FCFA`:"-",!h.prixTotal&&h.displayPrice&&l.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"(est.)"})]}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{children:h.motif||"-"}),h.referenceDocument&&l.jsxs("span",{className:"text-xs text-gray-400",children:["Rf: ",h.referenceDocument]})]})})]},h.id)),a.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"Aucun mouvement trouv."})})]})]})})]})},aB=()=>{const{fournisseurs:n,addFournisseur:e,updateFournisseur:t,deleteFournisseur:r}=El(),[i,a]=he.useState(null),[c,d]=he.useState(!1),[h,f]=he.useState({isOpen:!1,fournisseurId:"",fournisseurNom:""}),[p,v]=he.useState({nom:"",contact:"",telephone:"",adresse:"",categories:""}),_=async j=>{j.preventDefault();const U=p.categories.split(",").map(z=>z.trim()).filter(z=>z!=="");i?(await t(i,{nom:p.nom,contact:p.contact,telephone:p.telephone,adresse:p.adresse,categories:U}),a(null)):await e({nom:p.nom,contact:p.contact,telephone:p.telephone,adresse:p.adresse,categories:U,active:!0}),b(),d(!1)},b=()=>{v({nom:"",contact:"",telephone:"",adresse:"",categories:""})},T=j=>{v({nom:j.nom,contact:j.contact,telephone:j.telephone||"",adresse:j.adresse||"",categories:j.categories.join(", ")}),a(j.id),d(!0)},I=(j,U)=>{f({isOpen:!0,fournisseurId:j,fournisseurNom:U})},L=async()=>{await r(h.fournisseurId),f({isOpen:!1,fournisseurId:"",fournisseurNom:""})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Fournisseurs"}),l.jsxs("button",{onClick:()=>{a(null),b(),d(!c)},className:"flex items-center space-x-2 bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:[l.jsx(Hy,{size:20}),l.jsx("span",{children:"Nouveau Fournisseur"})]})]}),c&&l.jsxs("form",{onSubmit:_,className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de l'entreprise"}),l.jsx("input",{required:!0,type:"text",value:p.nom,onChange:j=>v({...p,nom:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: Grands Moulins de Dakar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Principal (Nom)"}),l.jsx("input",{required:!0,type:"text",value:p.contact,onChange:j=>v({...p,contact:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: M. Diallo"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tlphone"}),l.jsx("input",{type:"tel",value:p.telephone,onChange:j=>v({...p,telephone:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: 77 123 45 67"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse"}),l.jsx("input",{type:"text",value:p.adresse,onChange:j=>v({...p,adresse:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Adresse du dpt / bureau"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catgories (spares par des virgules)"}),l.jsx("input",{type:"text",value:p.categories,onChange:j=>v({...p,categories:j.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: Farine, Levure, Emballage"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Annuler"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:i?"Mettre  jour":"Ajouter"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.map(j=>l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5 hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-lg text-gray-800",children:j.nom}),l.jsxs("div",{className:"flex items-center text-gray-500 text-sm mt-1",children:[l.jsx(I_,{size:14,className:"mr-1"}),j.contact]})]}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("button",{onClick:()=>T(j),className:"p-1.5 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",children:l.jsx(M3,{size:16})}),l.jsx("button",{onClick:()=>I(j.id,j.nom),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:l.jsx($y,{size:16})})]})]}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[j.telephone&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(OO,{size:14,className:"mr-2 text-gray-400"}),j.telephone]}),j.adresse&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(kO,{size:14,className:"mr-2 text-gray-400"}),j.adresse]})]}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-50 flex flex-wrap gap-2",children:[j.categories.map((U,z)=>l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-600",children:[l.jsx(UO,{size:10,className:"mr-1"}),U]},z)),j.categories.length===0&&l.jsx("span",{className:"text-xs text-gray-400 italic",children:"Aucune catgorie"})]})]},j.id)),n.length===0&&!c&&l.jsxs("div",{className:"col-span-full py-12 text-center text-gray-500 bg-gray-50 rounded-xl border border-dashed border-gray-200",children:[l.jsx(I_,{size:48,className:"mx-auto mb-4 opacity-20"}),l.jsx("p",{children:"Aucun fournisseur enregistr."}),l.jsx("button",{onClick:()=>d(!0),className:"mt-4 text-orange-500 hover:text-orange-600 font-medium",children:"Ajouter le premier fournisseur"})]})]}),l.jsx(Cl,{isOpen:h.isOpen,onClose:()=>f({isOpen:!1,fournisseurId:"",fournisseurNom:""}),onConfirm:L,title:"Confirmer la suppression",message:`tes-vous sr de vouloir supprimer le fournisseur "${h.fournisseurNom}" ?

Cette action est irrversible.`,confirmText:"Supprimer",cancelText:"Annuler",type:"danger",position:"center"})]})},oB=()=>{const[n,e]=he.useState("stock"),[t,r]=he.useState(!1),[i,a]=he.useState(void 0),{chargerDonnees:c,isLoading:d}=El();if(he.useEffect(()=>{c()},[c]),d)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx("div",{className:"w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full animate-spin"})});const h=f=>{a(f),r(!0)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Stocks"}),l.jsx("p",{className:"text-gray-500",children:"Suivi des matires premires et dpenses (FCFA)"})]})}),l.jsx(nB,{}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[l.jsx("div",{className:"border-b border-gray-100",children:l.jsxs("nav",{className:"flex space-x-4 px-6","aria-label":"Tabs",children:[l.jsxs("button",{onClick:()=>e("stock"),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${n==="stock"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(D3,{size:18}),l.jsx("span",{children:"Inventaire"})]}),l.jsxs("button",{onClick:()=>e("mouvements"),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${n==="mouvements"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(LO,{size:18}),l.jsx("span",{children:"Historique Mouvements"})]}),l.jsxs("button",{onClick:()=>e("fournisseurs"),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${n==="fournisseurs"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(JO,{size:18}),l.jsx("span",{children:"Fournisseurs"})]})]})}),l.jsxs("div",{className:"p-6",children:[n==="stock"&&l.jsx(rB,{onAddMouvement:h}),n==="mouvements"&&l.jsx(sB,{}),n==="fournisseurs"&&l.jsx(aB,{})]})]}),l.jsx(iB,{isOpen:t,onClose:()=>{r(!1),a(void 0)},selectedMatiere:i})]})},so=({children:n})=>{const{isAuthenticated:e,isLoading:t}=Tm();return t?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):e?l.jsx(hO,{children:n}):l.jsx(k3,{})};function lB(){const{setUser:n,setLoading:e}=Tm();return he.useEffect(()=>{const t=lR(l1,async r=>{if(e(!0),r)try{const i=Tn(wt,"users",r.uid),a=await dc(i);if(a.exists()){const c=a.data();n({id:r.uid,email:r.email||"",nom:c.nom||"",prenom:c.prenom||"",role:c.role||"admin",active:c.active??!0,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date})}else console.warn("Profil utilisateur introuvable dans Firestore"),n({id:r.uid,email:r.email||"",nom:"",prenom:"",role:"admin",active:!0,createdAt:new Date,updatedAt:new Date})}catch(i){console.error("Erreur lors de la rcupration du profil:",i),n(null)}else n(null);e(!1)});return()=>t()},[n,e]),l.jsx(hC,{children:l.jsxs(zT,{children:[l.jsx(Hs,{path:"/login",element:l.jsx(k3,{})}),l.jsx(Hs,{path:"/production",element:l.jsx(so,{children:l.jsx(o9,{})})}),l.jsx(Hs,{path:"/boulanger",element:l.jsx(so,{children:l.jsx(c9,{})})}),l.jsx(Hs,{path:"/livraison",element:l.jsx(so,{children:l.jsx(u9,{})})}),l.jsx(Hs,{path:"/retours",element:l.jsx(so,{children:l.jsx(d9,{})})}),l.jsx(Hs,{path:"/boutique",element:l.jsx(so,{children:l.jsx(h9,{})})}),l.jsx(Hs,{path:"/rapport",element:l.jsx(so,{children:l.jsx(f9,{})})}),l.jsx(Hs,{path:"/admin/produits",element:l.jsx(so,{children:l.jsx(p9,{})})}),l.jsx(Hs,{path:"/admin/clients",element:l.jsx(so,{children:l.jsx(x9,{})})}),l.jsx(Hs,{path:"/admin/livreurs",element:l.jsx(so,{children:l.jsx(y9,{})})}),l.jsx(Hs,{path:"/admin/users",element:l.jsx(so,{children:l.jsx(w9,{})})}),l.jsx(Hs,{path:"/facturation",element:l.jsx(so,{children:l.jsx(tB,{})})}),l.jsx(Hs,{path:"/stocks",element:l.jsx(so,{children:l.jsx(oB,{})})}),l.jsx(Hs,{path:"/",element:l.jsx(BT,{to:"/production",replace:!0})})]})})}lE.createRoot(document.getElementById("root")).render(l.jsxs(he.StrictMode,{children:[l.jsx(lB,{}),l.jsx(QE,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]}));export{nr as _,cB as c,J6 as g};
