(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var tU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W6(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var R1={exports:{}},wf={};var s5;function Y6(){if(s5)return wf;s5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var c=null;if(a!==void 0&&(c=""+a),i.key!==void 0&&(c=""+i.key),"key"in i){a={};for(var d in i)d!=="key"&&(a[d]=i[d])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:c,ref:i!==void 0?i:null,props:a}}return wf.Fragment=e,wf.jsx=t,wf.jsxs=t,wf}var a5;function K6(){return a5||(a5=1,R1.exports=Y6()),R1.exports}var l=K6(),L1={exports:{}},an={};var o5;function Q6(){if(o5)return an;o5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),N=Symbol.iterator;function b(X){return X===null||typeof X!="object"?null:(X=N&&X[N]||X["@@iterator"],typeof X=="function"?X:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,I={};function R(X,q,J){this.props=X,this.context=q,this.refs=I,this.updater=J||E}R.prototype.isReactComponent={},R.prototype.setState=function(X,q){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,q,"setState")},R.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function U(){}U.prototype=R.prototype;function $(X,q,J){this.props=X,this.context=q,this.refs=I,this.updater=J||E}var z=$.prototype=new U;z.constructor=$,C(z,R.prototype),z.isPureReactComponent=!0;var ue=Array.isArray;function ie(){}var V={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function k(X,q,J){var re=J.ref;return{$$typeof:n,type:X,key:q,ref:re!==void 0?re:null,props:J}}function G(X,q){return k(X.type,q,X.props)}function S(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function L(X){var q={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(J){return q[J]})}var F=/\/+/g;function se(X,q){return typeof X=="object"&&X!==null&&X.key!=null?L(""+X.key):q.toString(36)}function ye(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(ie,ie):(X.status="pending",X.then(function(q){X.status==="pending"&&(X.status="fulfilled",X.value=q)},function(q){X.status==="pending"&&(X.status="rejected",X.reason=q)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function Q(X,q,J,re,fe){var pe=typeof X;(pe==="undefined"||pe==="boolean")&&(X=null);var we=!1;if(X===null)we=!0;else switch(pe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(X.$$typeof){case n:case e:we=!0;break;case p:return we=X._init,Q(we(X._payload),q,J,re,fe)}}if(we)return fe=fe(X),we=re===""?"."+se(X,0):re,ue(fe)?(J="",we!=null&&(J=we.replace(F,"$&/")+"/"),Q(fe,q,J,"",function(Ue){return Ue})):fe!=null&&(S(fe)&&(fe=G(fe,J+(fe.key==null||X&&X.key===fe.key?"":(""+fe.key).replace(F,"$&/")+"/")+we)),q.push(fe)),1;we=0;var Pe=re===""?".":re+":";if(ue(X))for(var Re=0;Re<X.length;Re++)re=X[Re],pe=Pe+se(re,Re),we+=Q(re,q,J,pe,fe);else if(Re=b(X),typeof Re=="function")for(X=Re.call(X),Re=0;!(re=X.next()).done;)re=re.value,pe=Pe+se(re,Re++),we+=Q(re,q,J,pe,fe);else if(pe==="object"){if(typeof X.then=="function")return Q(ye(X),q,J,re,fe);throw q=String(X),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return we}function ce(X,q,J){if(X==null)return X;var re=[],fe=0;return Q(X,re,"","",function(pe){return q.call(J,pe,fe++)}),re}function me(X){if(X._status===-1){var q=X._result;q=q(),q.then(function(J){(X._status===0||X._status===-1)&&(X._status=1,X._result=J)},function(J){(X._status===0||X._status===-1)&&(X._status=2,X._result=J)}),X._status===-1&&(X._status=0,X._result=q)}if(X._status===1)return X._result.default;throw X._result}var Se=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},Fe={map:ce,forEach:function(X,q,J){ce(X,function(){q.apply(this,arguments)},J)},count:function(X){var q=0;return ce(X,function(){q++}),q},toArray:function(X){return ce(X,function(q){return q})||[]},only:function(X){if(!S(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return an.Activity=x,an.Children=Fe,an.Component=R,an.Fragment=t,an.Profiler=i,an.PureComponent=$,an.StrictMode=r,an.Suspense=h,an.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,an.__COMPILER_RUNTIME={__proto__:null,c:function(X){return V.H.useMemoCache(X)}},an.cache=function(X){return function(){return X.apply(null,arguments)}},an.cacheSignal=function(){return null},an.cloneElement=function(X,q,J){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var re=C({},X.props),fe=X.key;if(q!=null)for(pe in q.key!==void 0&&(fe=""+q.key),q)!D.call(q,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&q.ref===void 0||(re[pe]=q[pe]);var pe=arguments.length-2;if(pe===1)re.children=J;else if(1<pe){for(var we=Array(pe),Pe=0;Pe<pe;Pe++)we[Pe]=arguments[Pe+2];re.children=we}return k(X.type,fe,re)},an.createContext=function(X){return X={$$typeof:c,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},an.createElement=function(X,q,J){var re,fe={},pe=null;if(q!=null)for(re in q.key!==void 0&&(pe=""+q.key),q)D.call(q,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(fe[re]=q[re]);var we=arguments.length-2;if(we===1)fe.children=J;else if(1<we){for(var Pe=Array(we),Re=0;Re<we;Re++)Pe[Re]=arguments[Re+2];fe.children=Pe}if(X&&X.defaultProps)for(re in we=X.defaultProps,we)fe[re]===void 0&&(fe[re]=we[re]);return k(X,pe,fe)},an.createRef=function(){return{current:null}},an.forwardRef=function(X){return{$$typeof:d,render:X}},an.isValidElement=S,an.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:me}},an.memo=function(X,q){return{$$typeof:f,type:X,compare:q===void 0?null:q}},an.startTransition=function(X){var q=V.T,J={};V.T=J;try{var re=X(),fe=V.S;fe!==null&&fe(J,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(ie,Se)}catch(pe){Se(pe)}finally{q!==null&&J.types!==null&&(q.types=J.types),V.T=q}},an.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},an.use=function(X){return V.H.use(X)},an.useActionState=function(X,q,J){return V.H.useActionState(X,q,J)},an.useCallback=function(X,q){return V.H.useCallback(X,q)},an.useContext=function(X){return V.H.useContext(X)},an.useDebugValue=function(){},an.useDeferredValue=function(X,q){return V.H.useDeferredValue(X,q)},an.useEffect=function(X,q){return V.H.useEffect(X,q)},an.useEffectEvent=function(X){return V.H.useEffectEvent(X)},an.useId=function(){return V.H.useId()},an.useImperativeHandle=function(X,q,J){return V.H.useImperativeHandle(X,q,J)},an.useInsertionEffect=function(X,q){return V.H.useInsertionEffect(X,q)},an.useLayoutEffect=function(X,q){return V.H.useLayoutEffect(X,q)},an.useMemo=function(X,q){return V.H.useMemo(X,q)},an.useOptimistic=function(X,q){return V.H.useOptimistic(X,q)},an.useReducer=function(X,q,J){return V.H.useReducer(X,q,J)},an.useRef=function(X){return V.H.useRef(X)},an.useState=function(X){return V.H.useState(X)},an.useSyncExternalStore=function(X,q,J){return V.H.useSyncExternalStore(X,q,J)},an.useTransition=function(){return V.H.useTransition()},an.version="19.2.1",an}var l5;function Ny(){return l5||(l5=1,L1.exports=Q6()),L1.exports}var he=Ny();const ru=W6(he);var k1={exports:{}},_f={},P1={exports:{}},D1={};var c5;function X6(){return c5||(c5=1,(function(n){function e(Q,ce){var me=Q.length;Q.push(ce);e:for(;0<me;){var Se=me-1>>>1,Fe=Q[Se];if(0<i(Fe,ce))Q[Se]=ce,Q[me]=Fe,me=Se;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ce=Q[0],me=Q.pop();if(me!==ce){Q[0]=me;e:for(var Se=0,Fe=Q.length,X=Fe>>>1;Se<X;){var q=2*(Se+1)-1,J=Q[q],re=q+1,fe=Q[re];if(0>i(J,me))re<Fe&&0>i(fe,J)?(Q[Se]=fe,Q[re]=me,Se=re):(Q[Se]=J,Q[q]=me,Se=q);else if(re<Fe&&0>i(fe,me))Q[Se]=fe,Q[re]=me,Se=re;else break e}}return ce}function i(Q,ce){var me=Q.sortIndex-ce.sortIndex;return me!==0?me:Q.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],f=[],p=1,x=null,N=3,b=!1,E=!1,C=!1,I=!1,R=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function z(Q){for(var ce=t(f);ce!==null;){if(ce.callback===null)r(f);else if(ce.startTime<=Q)r(f),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=t(f)}}function ue(Q){if(C=!1,z(Q),!E)if(t(h)!==null)E=!0,ie||(ie=!0,L());else{var ce=t(f);ce!==null&&ye(ue,ce.startTime-Q)}}var ie=!1,V=-1,D=5,k=-1;function G(){return I?!0:!(n.unstable_now()-k<D)}function S(){if(I=!1,ie){var Q=n.unstable_now();k=Q;var ce=!0;try{e:{E=!1,C&&(C=!1,U(V),V=-1),b=!0;var me=N;try{t:{for(z(Q),x=t(h);x!==null&&!(x.expirationTime>Q&&G());){var Se=x.callback;if(typeof Se=="function"){x.callback=null,N=x.priorityLevel;var Fe=Se(x.expirationTime<=Q);if(Q=n.unstable_now(),typeof Fe=="function"){x.callback=Fe,z(Q),ce=!0;break t}x===t(h)&&r(h),z(Q)}else r(h);x=t(h)}if(x!==null)ce=!0;else{var X=t(f);X!==null&&ye(ue,X.startTime-Q),ce=!1}}break e}finally{x=null,N=me,b=!1}ce=void 0}}finally{ce?L():ie=!1}}}var L;if(typeof $=="function")L=function(){$(S)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,se=F.port2;F.port1.onmessage=S,L=function(){se.postMessage(null)}}else L=function(){R(S,0)};function ye(Q,ce){V=R(function(){Q(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_next=function(Q){switch(N){case 1:case 2:case 3:var ce=3;break;default:ce=N}var me=N;N=ce;try{return Q()}finally{N=me}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(Q,ce){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var me=N;N=Q;try{return ce()}finally{N=me}},n.unstable_scheduleCallback=function(Q,ce,me){var Se=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Se+me:Se):me=Se,Q){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=me+Fe,Q={id:p++,callback:ce,priorityLevel:Q,startTime:me,expirationTime:Fe,sortIndex:-1},me>Se?(Q.sortIndex=me,e(f,Q),t(h)===null&&Q===t(f)&&(C?(U(V),V=-1):C=!0,ye(ue,me-Se))):(Q.sortIndex=Fe,e(h,Q),E||b||(E=!0,ie||(ie=!0,L()))),Q},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(Q){var ce=N;return function(){var me=N;N=ce;try{return Q.apply(this,arguments)}finally{N=me}}}})(D1)),D1}var u5;function J6(){return u5||(u5=1,P1.exports=X6()),P1.exports}var M1={exports:{}},Ns={};var d5;function Z6(){if(d5)return Ns;d5=1;var n=Ny();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(h,f,p){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:x==null?null:""+x,children:h,containerInfo:f,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ns.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ns.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(h,f,null,p)},Ns.flushSync=function(h){var f=c.T,p=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=f,r.p=p,r.d.f()}},Ns.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},Ns.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Ns.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,x=d(p,f.crossOrigin),N=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:x,integrity:N,fetchPriority:b}):p==="script"&&r.d.X(h,{crossOrigin:x,integrity:N,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ns.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=d(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},Ns.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,x=d(p,f.crossOrigin);r.d.L(h,p,{crossOrigin:x,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ns.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=d(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},Ns.requestFormReset=function(h){r.d.r(h)},Ns.unstable_batchedUpdates=function(h,f){return h(f)},Ns.useFormState=function(h,f,p){return c.H.useFormState(h,f,p)},Ns.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ns.version="19.2.1",Ns}var h5;function ej(){if(h5)return M1.exports;h5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),M1.exports=Z6(),M1.exports}var f5;function tj(){if(f5)return _f;f5=1;var n=J6(),e=Ny(),t=ej();function r(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function c(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(r(188))}function f(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(r(188));return o!==s?null:s}for(var u=s,m=o;;){var y=u.return;if(y===null)break;var _=y.alternate;if(_===null){if(m=y.return,m!==null){u=m;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===u)return h(y),s;if(_===m)return h(y),o;_=_.sibling}throw Error(r(188))}if(u.return!==m.return)u=y,m=_;else{for(var M=!1,K=y.child;K;){if(K===u){M=!0,u=y,m=_;break}if(K===m){M=!0,m=y,u=_;break}K=K.sibling}if(!M){for(K=_.child;K;){if(K===u){M=!0,u=_,m=y;break}if(K===m){M=!0,m=_,u=y;break}K=K.sibling}if(!M)throw Error(r(189))}}if(u.alternate!==m)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?s:o}function p(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=p(s),o!==null)return o;s=s.sibling}return null}var x=Object.assign,N=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),$=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),S=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=S&&s[S]||s["@@iterator"],typeof s=="function"?s:null)}var F=Symbol.for("react.client.reference");function se(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===F?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case C:return"Fragment";case R:return"Profiler";case I:return"StrictMode";case ue:return"Suspense";case ie:return"SuspenseList";case k:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case $:return s.displayName||"Context";case U:return(s._context.displayName||"Context")+".Consumer";case z:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return o=s.displayName||null,o!==null?o:se(s.type)||"Memo";case D:o=s._payload,s=s._init;try{return se(s(o))}catch{}}return null}var ye=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Se=[],Fe=-1;function X(s){return{current:s}}function q(s){0>Fe||(s.current=Se[Fe],Se[Fe]=null,Fe--)}function J(s,o){Fe++,Se[Fe]=s.current,s.current=o}var re=X(null),fe=X(null),pe=X(null),we=X(null);function Pe(s,o){switch(J(pe,o),J(fe,s),J(re,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?Tb(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=Tb(o),s=Cb(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}q(re),J(re,s)}function Re(){q(re),q(fe),q(pe)}function Ue(s){s.memoizedState!==null&&J(we,s);var o=re.current,u=Cb(o,s.type);o!==u&&(J(fe,s),J(re,u))}function et(s){fe.current===s&&(q(re),q(fe)),we.current===s&&(q(we),vf._currentValue=me)}var it,Ne;function Be(s){if(it===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);it=o&&o[1]||"",Ne=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+it+s+Ne}var te=!1;function Ze(s,o){if(!s||te)return"";te=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var Ke=function(){throw Error()};if(Object.defineProperty(Ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ke,[])}catch(Oe){var Me=Oe}Reflect.construct(s,[],Ke)}else{try{Ke.call()}catch(Oe){Me=Oe}s.call(Ke.prototype)}}else{try{throw Error()}catch(Oe){Me=Oe}(Ke=s())&&typeof Ke.catch=="function"&&Ke.catch(function(){})}}catch(Oe){if(Oe&&Me&&typeof Oe.stack=="string")return[Oe.stack,Me.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),M=_[0],K=_[1];if(M&&K){var ge=M.split(`
`),ke=K.split(`
`);for(y=m=0;m<ge.length&&!ge[m].includes("DetermineComponentFrameRoot");)m++;for(;y<ke.length&&!ke[y].includes("DetermineComponentFrameRoot");)y++;if(m===ge.length||y===ke.length)for(m=ge.length-1,y=ke.length-1;1<=m&&0<=y&&ge[m]!==ke[y];)y--;for(;1<=m&&0<=y;m--,y--)if(ge[m]!==ke[y]){if(m!==1||y!==1)do if(m--,y--,0>y||ge[m]!==ke[y]){var $e=`
`+ge[m].replace(" at new "," at ");return s.displayName&&$e.includes("<anonymous>")&&($e=$e.replace("<anonymous>",s.displayName)),$e}while(1<=m&&0<=y);break}}}finally{te=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Be(u):""}function ct(s,o){switch(s.tag){case 26:case 27:case 5:return Be(s.type);case 16:return Be("Lazy");case 13:return s.child!==o&&o!==null?Be("Suspense Fallback"):Be("Suspense");case 19:return Be("SuspenseList");case 0:case 15:return Ze(s.type,!1);case 11:return Ze(s.type.render,!1);case 1:return Ze(s.type,!0);case 31:return Be("Activity");default:return""}}function ot(s){try{var o="",u=null;do o+=ct(s,u),u=s,s=s.return;while(s);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var ze=Object.prototype.hasOwnProperty,at=n.unstable_scheduleCallback,lt=n.unstable_cancelCallback,Rt=n.unstable_shouldYield,At=n.unstable_requestPaint,Jt=n.unstable_now,rn=n.unstable_getCurrentPriorityLevel,$t=n.unstable_ImmediatePriority,cn=n.unstable_UserBlockingPriority,tn=n.unstable_NormalPriority,xt=n.unstable_LowPriority,Kt=n.unstable_IdlePriority,wt=n.log,xr=n.unstable_setDisableYieldValue,nn=null,It=null;function Bt(s){if(typeof wt=="function"&&xr(s),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(nn,s)}catch{}}var Zt=Math.clz32?Math.clz32:qt,jt=Math.log,Pn=Math.LN2;function qt(s){return s>>>=0,s===0?32:31-(jt(s)/Pn|0)|0}var Vt=256,Fn=262144,St=4194304;function _t(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function un(s,o,u){var m=s.pendingLanes;if(m===0)return 0;var y=0,_=s.suspendedLanes,M=s.pingedLanes;s=s.warmLanes;var K=m&134217727;return K!==0?(m=K&~_,m!==0?y=_t(m):(M&=K,M!==0?y=_t(M):u||(u=K&~s,u!==0&&(y=_t(u))))):(K=m&~_,K!==0?y=_t(K):M!==0?y=_t(M):u||(u=m&~s,u!==0&&(y=_t(u)))),y===0?0:o!==0&&o!==y&&(o&_)===0&&(_=y&-y,u=o&-o,_>=u||_===32&&(u&4194048)!==0)?o:y}function bi(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function ci(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hs(){var s=St;return St<<=1,(St&62914560)===0&&(St=4194304),s}function ei(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function Tt(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function pa(s,o,u,m,y,_){var M=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var K=s.entanglements,ge=s.expirationTimes,ke=s.hiddenUpdates;for(u=M&~u;0<u;){var $e=31-Zt(u),Ke=1<<$e;K[$e]=0,ge[$e]=-1;var Me=ke[$e];if(Me!==null)for(ke[$e]=null,$e=0;$e<Me.length;$e++){var Oe=Me[$e];Oe!==null&&(Oe.lane&=-536870913)}u&=~Ke}m!==0&&Ji(s,m,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(M&~o))}function Ji(s,o,u){s.pendingLanes|=o,s.suspendedLanes&=~o;var m=31-Zt(o);s.entangledLanes|=o,s.entanglements[m]=s.entanglements[m]|1073741824|u&261930}function Mi(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var m=31-Zt(u),y=1<<m;y&o|s[m]&o&&(s[m]|=o),u&=~y}}function Oi(s,o){var u=o&-o;return u=(u&42)!==0?1:Yn(u),(u&(s.suspendedLanes|o))!==0?0:u}function Yn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function sr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function zr(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:Jb(s.type))}function wi(s,o){var u=ce.p;try{return ce.p=s,o()}finally{ce.p=u}}var ui=Math.random().toString(36).slice(2),qn="__reactFiber$"+ui,Qn="__reactProps$"+ui,Hr="__reactContainer$"+ui,Fi="__reactEvents$"+ui,gs="__reactListeners$"+ui,Fa="__reactHandles$"+ui,Rs="__reactResources$"+ui,qi="__reactMarker$"+ui;function ga(s){delete s[qn],delete s[Qn],delete s[Fi],delete s[gs],delete s[Fa]}function Zi(s){var o=s[qn];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Hr]||u[qn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=Mb(s);s!==null;){if(u=s[qn])return u;s=Mb(s)}return o}s=u,u=s.parentNode}return null}function _i(s){if(s=s[qn]||s[Hr]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function es(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(r(33))}function vs(s){var o=s[Rs];return o||(o=s[Rs]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function br(s){s[qi]=!0}var Bo=new Set,Vi={};function ys(s,o){Ls(s,o),Ls(s+"Capture",o)}function Ls(s,o){for(Vi[s]=o,s=0;s<o.length;s++)Bo.add(o[s])}var uo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zo={},Ho={};function jl(s){return ze.call(Ho,s)?!0:ze.call(zo,s)?!1:uo.test(s)?Ho[s]=!0:(zo[s]=!0,!1)}function ts(s,o,u){if(jl(o))if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+u)}}function di(s,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+u)}}function Er(s,o,u,m){if(m===null)s.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(o,u,""+m)}}function mn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function va(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function xs(s,o,u){var m=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var y=m.get,_=m.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return y.call(this)},set:function(M){u=""+M,_.call(this,M)}}),Object.defineProperty(s,o,{enumerable:m.enumerable}),{getValue:function(){return u},setValue:function(M){u=""+M},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function bn(s){if(!s._valueTracker){var o=va(s)?"checked":"value";s._valueTracker=xs(s,o,""+s[o])}}function qa(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return s&&(m=va(s)?s.checked?"true":"false":s.value),s=m,s!==u?(o.setValue(s),!0):!1}function Dr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var mr=/[\n"\\]/g;function jr(s){return s.replace(mr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ho(s,o,u,m,y,_,M,K){s.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.type=M:s.removeAttribute("type"),o!=null?M==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+mn(o)):s.value!==""+mn(o)&&(s.value=""+mn(o)):M!=="submit"&&M!=="reset"||s.removeAttribute("value"),o!=null?Tl(s,M,mn(o)):u!=null?Tl(s,M,mn(u)):m!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?s.name=""+mn(K):s.removeAttribute("name")}function xc(s,o,u,m,y,_,M,K){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),o!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){bn(s);return}u=u!=null?""+mn(u):"",o=o!=null?""+mn(o):u,K||o===s.value||(s.value=o),s.defaultValue=o}m=m??y,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=K?s.checked:!!m,s.defaultChecked=!!m,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(s.name=M),bn(s)}function Tl(s,o,u){o==="number"&&Dr(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function Ni(s,o,u,m){if(s=s.options,o){o={};for(var y=0;y<u.length;y++)o["$"+u[y]]=!0;for(u=0;u<s.length;u++)y=o.hasOwnProperty("$"+s[u].value),s[u].selected!==y&&(s[u].selected=y),y&&m&&(s[u].defaultSelected=!0)}else{for(u=""+mn(u),o=null,y=0;y<s.length;y++){if(s[y].value===u){s[y].selected=!0,m&&(s[y].defaultSelected=!0);return}o!==null||s[y].disabled||(o=s[y])}o!==null&&(o.selected=!0)}}function Cl(s,o,u){if(o!=null&&(o=""+mn(o),o!==s.value&&(s.value=o),u==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=u!=null?""+mn(u):""}function ya(s,o,u,m){if(o==null){if(m!=null){if(u!=null)throw Error(r(92));if(ye(m)){if(1<m.length)throw Error(r(93));m=m[0]}u=m}u==null&&(u=""),o=u}u=mn(o),s.defaultValue=u,m=s.textContent,m===u&&m!==""&&m!==null&&(s.value=m),bn(s)}function ti(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var Va=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Il(s,o,u){var m=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":m?s.setProperty(o,u):typeof u!="number"||u===0||Va.has(o)?o==="float"?s.cssFloat=u:s[o]=(""+u).trim():s[o]=u+"px"}function Rl(s,o,u){if(o!=null&&typeof o!="object")throw Error(r(62));if(s=s.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var y in o)m=o[y],o.hasOwnProperty(y)&&u[y]!==m&&Il(s,y,m)}else for(var _ in o)o.hasOwnProperty(_)&&Il(s,_,o[_])}function $o(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Go=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ui(s){return xa.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ks(){}var ba=null;function Bi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ua=null,Lt=null;function fo(s){var o=_i(s);if(o&&(s=o.stateNode)){var u=s[Qn]||null;e:switch(s=o.stateNode,o.type){case"input":if(ho(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+jr(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==s&&m.form===s.form){var y=m[Qn]||null;if(!y)throw Error(r(90));ho(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<u.length;o++)m=u[o],m.form===s.form&&qa(m)}break e;case"textarea":Cl(s,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Ni(s,!!u.multiple,o,!1)}}}var Wo=!1;function Ba(s,o,u){if(Wo)return s(o,u);Wo=!0;try{var m=s(o);return m}finally{if(Wo=!1,(Ua!==null||Lt!==null)&&(Qm(),Ua&&(o=Ua,s=Lt,Lt=Ua=null,fo(o),s)))for(o=0;o<s.length;o++)fo(s[o])}}function ni(s,o){var u=s.stateNode;if(u===null)return null;var m=u[Qn]||null;if(m===null)return null;u=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(r(231,o,typeof u));return u}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mo=!1;if($r)try{var Vn={};Object.defineProperty(Vn,"passive",{get:function(){mo=!0}}),window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch{mo=!1}var ns=null,po=null,Ps=null;function Ll(){if(Ps)return Ps;var s,o=po,u=o.length,m,y="value"in ns?ns.value:ns.textContent,_=y.length;for(s=0;s<u&&o[s]===y[s];s++);var M=u-s;for(m=1;m<=M&&o[u-m]===y[_-m];m++);return Ps=y.slice(s,1<m?1-m:void 0)}function rs(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function wa(){return!0}function is(){return!1}function Mr(s){function o(u,m,y,_,M){this._reactName=u,this._targetInst=y,this.type=m,this.nativeEvent=_,this.target=M,this.currentTarget=null;for(var K in s)s.hasOwnProperty(K)&&(u=s[K],this[K]=u?u(_):_[K]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?wa:is,this.isPropagationStopped=is,this}return x(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),o}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hi=Mr($s),Gs=x({},$s,{view:0,detail:0}),za=Mr(Gs),Ws,Ys,bs,go=x({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mt,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==bs&&(bs&&s.type==="mousemove"?(Ws=s.screenX-bs.screenX,Ys=s.screenY-bs.screenY):Ys=Ws=0,bs=s),Ws)},movementY:function(s){return"movementY"in s?s.movementY:Ys}}),Yo=Mr(go),ss=x({},go,{dataTransfer:0}),Ks=Mr(ss),kl=x({},Gs,{relatedTarget:0}),Ds=Mr(kl),Ko=x({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),A=Mr(Ko),B=x({},$s,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),oe=Mr(B),ve=x({},$s,{data:0}),Ae=Mr(ve),He={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ht={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gt(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=ht[s])?!!o[s]:!1}function Mt(){return gt}var Ct=x({},Gs,{key:function(s){if(s.key){var o=He[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=rs(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Xe[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mt,charCode:function(s){return s.type==="keypress"?rs(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?rs(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),pn=Mr(Ct),ar=x({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kn=Mr(ar),v=x({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mt}),T=Mr(v),O=x({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),ee=Mr(O),je=x({},go,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),De=Mr(je),nt=x({},$s,{newState:0,oldState:0}),Yt=Mr(nt),or=[9,13,27,32],hn=$r&&"CompositionEvent"in window,Un=null;$r&&"documentMode"in document&&(Un=document.documentMode);var fi=$r&&"TextEvent"in window&&!Un,Ai=$r&&(!hn||Un&&8<Un&&11>=Un),Xn=" ",Si=!1;function Ms(s,o){switch(s){case"keyup":return or.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ha(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var $a=!1;function as(s,o){switch(s){case"compositionend":return Ha(o);case"keypress":return o.which!==32?null:(Si=!0,Xn);case"textInput":return s=o.data,s===Xn&&Si?null:s;default:return null}}function vo(s,o){if($a)return s==="compositionend"||!hn&&Ms(s,o)?(s=Ll(),Ps=po=ns=null,$a=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ai&&o.locale!=="ko"?null:o.data;default:return null}}var bc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eu(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!bc[s.type]:o==="textarea"}function Os(s,o,u,m){Ua?Lt?Lt.push(m):Lt=[m]:Ua=m,o=rp(o,"onChange"),0<o.length&&(u=new hi("onChange","change",null,u,m),s.push({event:u,listeners:o}))}var _a=null,yo=null;function ju(s){_b(s,0)}function Na(s){var o=es(s);if(qa(o))return s}function Qo(s,o){if(s==="change")return o}var ws=!1;if($r){var os;if($r){var Ga="oninput"in document;if(!Ga){var Wa=document.createElement("div");Wa.setAttribute("oninput","return;"),Ga=typeof Wa.oninput=="function"}os=Ga}else os=!1;ws=os&&(!document.documentMode||9<document.documentMode)}function xo(){_a&&(_a.detachEvent("onpropertychange",wc),yo=_a=null)}function wc(s){if(s.propertyName==="value"&&Na(yo)){var o=[];Os(o,yo,s,Bi(s)),Ba(ju,o)}}function _c(s,o,u){s==="focusin"?(xo(),_a=o,yo=u,_a.attachEvent("onpropertychange",wc)):s==="focusout"&&xo()}function Or(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Na(yo)}function fd(s,o){if(s==="click")return Na(o)}function Ya(s,o){if(s==="input"||s==="change")return Na(o)}function Ka(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Ei=typeof Object.is=="function"?Object.is:Ka;function bo(s,o){if(Ei(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var y=u[m];if(!ze.call(o,y)||!Ei(s[y],o[y]))return!1}return!0}function Nc(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ac(s,o){var u=Nc(s);s=0;for(var m;u;){if(u.nodeType===3){if(m=s+u.textContent.length,s<=o&&m>=o)return{node:u,offset:o-s};s=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Nc(u)}}function wo(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?wo(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function _o(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Dr(s.document);o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=Dr(s.document)}return o}function Qa(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var Pl=$r&&"documentMode"in document&&11>=document.documentMode,Fs=null,No=null,zi=null,Qs=!1;function Dn(s,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Qs||Fs==null||Fs!==Dr(m)||(m=Fs,"selectionStart"in m&&Qa(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),zi&&bo(zi,m)||(zi=m,m=rp(No,"onSelect"),0<m.length&&(o=new hi("onSelect","select",null,o,u),s.push({event:o,listeners:m}),o.target=Fs)))}function En(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var lr={animationend:En("Animation","AnimationEnd"),animationiteration:En("Animation","AnimationIteration"),animationstart:En("Animation","AnimationStart"),transitionrun:En("Transition","TransitionRun"),transitionstart:En("Transition","TransitionStart"),transitioncancel:En("Transition","TransitionCancel"),transitionend:En("Transition","TransitionEnd")},Fr={},Xa={};$r&&(Xa=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);function Aa(s){if(Fr[s])return Fr[s];if(!lr[s])return s;var o=lr[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in Xa)return Fr[s]=o[u];return s}var Dl=Aa("animationend"),Tu=Aa("animationiteration"),qh=Aa("animationstart"),Em=Aa("transitionrun"),jm=Aa("transitionstart"),Tm=Aa("transitioncancel"),Vh=Aa("transitionend"),Uh=new Map,Ml="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ml.push("scrollEnd");function Xs(s,o){Uh.set(s,o),ys(o,[s])}var Cu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},qs=[],Ol=0,md=0;function Iu(){for(var s=Ol,o=md=Ol=0;o<s;){var u=qs[o];qs[o++]=null;var m=qs[o];qs[o++]=null;var y=qs[o];qs[o++]=null;var _=qs[o];if(qs[o++]=null,m!==null&&y!==null){var M=m.pending;M===null?y.next=y:(y.next=M.next,M.next=y),m.pending=y}_!==0&&Lu(u,y,_)}}function Ru(s,o,u,m){qs[Ol++]=s,qs[Ol++]=o,qs[Ol++]=u,qs[Ol++]=m,md|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function pd(s,o,u,m){return Ru(s,o,u,m),Hi(s)}function Ao(s,o){return Ru(s,null,null,o),Hi(s)}function Lu(s,o,u){s.lanes|=u;var m=s.alternate;m!==null&&(m.lanes|=u);for(var y=!1,_=s.return;_!==null;)_.childLanes|=u,m=_.alternate,m!==null&&(m.childLanes|=u),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&o!==null&&(y=31-Zt(u),s=_.hiddenUpdates,m=s[y],m===null?s[y]=[o]:m.push(o),o.lane=u|536870912),_):null}function Hi(s){if(50<uf)throw uf=0,t1=null,Error(r(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var ji={};function gd(s,o,u,m){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(s,o,u,m){return new gd(s,o,u,m)}function vd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Js(s,o){var u=s.alternate;return u===null?(u=$i(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function ku(s,o){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,o=u.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Sc(s,o,u,m,y,_){var M=0;if(m=s,typeof s=="function")vd(s)&&(M=1);else if(typeof s=="string")M=D6(s,u,re.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case k:return s=$i(31,u,o,y),s.elementType=k,s.lanes=_,s;case C:return Xo(u.children,y,_,o);case I:M=8,y|=24;break;case R:return s=$i(12,u,o,y|2),s.elementType=R,s.lanes=_,s;case ue:return s=$i(13,u,o,y),s.elementType=ue,s.lanes=_,s;case ie:return s=$i(19,u,o,y),s.elementType=ie,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case $:M=10;break e;case U:M=9;break e;case z:M=11;break e;case V:M=14;break e;case D:M=16,m=null;break e}M=29,u=Error(r(130,s===null?"null":typeof s,"")),m=null}return o=$i(M,u,o,y),o.elementType=s,o.type=m,o.lanes=_,o}function Xo(s,o,u,m){return s=$i(7,s,m,o),s.lanes=u,s}function Pu(s,o,u){return s=$i(6,s,null,o),s.lanes=u,s}function yd(s){var o=$i(18,null,null,0);return o.stateNode=s,o}function Ec(s,o,u){return o=$i(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var xd=new WeakMap;function Zs(s,o){if(typeof s=="object"&&s!==null){var u=xd.get(s);return u!==void 0?u:(o={value:s,source:o,stack:ot(o)},xd.set(s,o),o)}return{value:s,source:o,stack:ot(o)}}var jc=[],Fl=0,bd=null,Du=0,ea=[],ta=0,Jo=null,na=1,ra="";function Vs(s,o){jc[Fl++]=Du,jc[Fl++]=bd,bd=s,Du=o}function Cm(s,o,u){ea[ta++]=na,ea[ta++]=ra,ea[ta++]=Jo,Jo=s;var m=na;s=ra;var y=32-Zt(m)-1;m&=~(1<<y),u+=1;var _=32-Zt(o)+y;if(30<_){var M=y-y%5;_=(m&(1<<M)-1).toString(32),m>>=M,y-=M,na=1<<32-Zt(o)+y|u<<y|m,ra=_+s}else na=1<<_|u<<y|m,ra=s}function Bh(s){s.return!==null&&(Vs(s,1),Cm(s,1,0))}function wd(s){for(;s===bd;)bd=jc[--Fl],jc[Fl]=null,Du=jc[--Fl],jc[Fl]=null;for(;s===Jo;)Jo=ea[--ta],ea[ta]=null,ra=ea[--ta],ea[ta]=null,na=ea[--ta],ea[ta]=null}function Im(s,o){ea[ta++]=na,ea[ta++]=ra,ea[ta++]=Jo,na=o.id,ra=o.overflow,Jo=s}var Ti=null,pr=null,vn=!1,ls=null,Tr=!1,Sa=Error(r(519));function Zo(s){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tc(Zs(o,s)),Sa}function zh(s){var o=s.stateNode,u=s.type,m=s.memoizedProps;switch(o[qn]=s,o[Qn]=m,u){case"dialog":xn("cancel",o),xn("close",o);break;case"iframe":case"object":case"embed":xn("load",o);break;case"video":case"audio":for(u=0;u<hf.length;u++)xn(hf[u],o);break;case"source":xn("error",o);break;case"img":case"image":case"link":xn("error",o),xn("load",o);break;case"details":xn("toggle",o);break;case"input":xn("invalid",o),xc(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":xn("invalid",o);break;case"textarea":xn("invalid",o),ya(o,m.value,m.defaultValue,m.children)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||m.suppressHydrationWarning===!0||Eb(o.textContent,u)?(m.popover!=null&&(xn("beforetoggle",o),xn("toggle",o)),m.onScroll!=null&&xn("scroll",o),m.onScrollEnd!=null&&xn("scrollend",o),m.onClick!=null&&(o.onclick=ks),o=!0):o=!1,o||Zo(s,!0)}function So(s){for(Ti=s.return;Ti;)switch(Ti.tag){case 5:case 31:case 13:Tr=!1;return;case 27:case 3:Tr=!0;return;default:Ti=Ti.return}}function Ci(s){if(s!==Ti)return!1;if(!vn)return So(s),vn=!0,!1;var o=s.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||g1(s.type,s.memoizedProps)),u=!u),u&&pr&&Zo(s),So(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));pr=Db(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));pr=Db(s)}else o===27?(o=pr,Bc(s.type)?(s=w1,w1=null,pr=s):pr=o):pr=Ti?to(s.stateNode.nextSibling):null;return!0}function ql(){pr=Ti=null,vn=!1}function Hh(){var s=ls;return s!==null&&(ca===null?ca=s:ca.push.apply(ca,s),ls=null),s}function Tc(s){ls===null?ls=[s]:ls.push(s)}var _d=X(null),el=null,Ja=null;function tl(s,o,u){J(_d,o._currentValue),o._currentValue=u}function ia(s){s._currentValue=_d.current,q(_d)}function Cc(s,o,u){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===u)break;s=s.return}}function Vl(s,o,u,m){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var M=y.child;_=_.firstContext;e:for(;_!==null;){var K=_;_=y;for(var ge=0;ge<o.length;ge++)if(K.context===o[ge]){_.lanes|=u,K=_.alternate,K!==null&&(K.lanes|=u),Cc(_.return,u,s),m||(M=null);break e}_=K.next}}else if(y.tag===18){if(M=y.return,M===null)throw Error(r(341));M.lanes|=u,_=M.alternate,_!==null&&(_.lanes|=u),Cc(M,u,s),M=null}else M=y.child;if(M!==null)M.return=y;else for(M=y;M!==null;){if(M===s){M=null;break}if(y=M.sibling,y!==null){y.return=M.return,M=y;break}M=M.return}y=M}}function nl(s,o,u,m){s=null;for(var y=o,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var M=y.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var K=y.type;Ei(y.pendingProps.value,M.value)||(s!==null?s.push(K):s=[K])}}else if(y===we.current){if(M=y.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(vf):s=[vf])}y=y.return}s!==null&&Vl(o,s,u,m),o.flags|=262144}function Nd(s){for(s=s.firstContext;s!==null;){if(!Ei(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function rl(s){el=s,Ja=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ii(s){return Rm(el,s)}function Ad(s,o){return el===null&&rl(s),Rm(s,o)}function Rm(s,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Ja===null){if(s===null)throw Error(r(308));Ja=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Ja=Ja.next=o;return u}var b0=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(u,m){s.push(m)}};this.abort=function(){o.aborted=!0,s.forEach(function(u){return u()})}},w0=n.unstable_scheduleCallback,_0=n.unstable_NormalPriority,qr={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ic(){return{controller:new b0,data:new Map,refCount:0}}function Mu(s){s.refCount--,s.refCount===0&&w0(_0,function(){s.controller.abort()})}var Ou=null,Sd=0,g=0,w=null;function j(s,o){if(Ou===null){var u=Ou=[];Sd=0,g=o1(),w={status:"pending",value:void 0,then:function(m){u.push(m)}}}return Sd++,o.then(P,P),o}function P(){if(--Sd===0&&Ou!==null){w!==null&&(w.status="fulfilled");var s=Ou;Ou=null,g=0,w=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function H(s,o){var u=[],m={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return s.then(function(){m.status="fulfilled",m.value=o;for(var y=0;y<u.length;y++)(0,u[y])(o)},function(y){for(m.status="rejected",m.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),m}var W=Q.S;Q.S=function(s,o){Q2=Jt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&j(s,o),W!==null&&W(s,o)};var Y=X(null);function Z(){var s=Y.current;return s!==null?s:vr.pooledCache}function ne(s,o){o===null?J(Y,Y.current):J(Y,o.pool)}function le(){var s=Z();return s===null?null:{parent:qr._currentValue,pool:s}}var xe=Error(r(460)),Ie=Error(r(474)),ae=Error(r(542)),_e={then:function(){}};function Te(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ve(s,o,u){switch(u=s[u],u===void 0?s.push(o):u!==o&&(o.then(ks,ks),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,tt(s),s;default:if(typeof o.status=="string")o.then(ks,ks);else{if(s=vr,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=o,s.status="pending",s.then(function(m){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=m}},function(m){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,tt(s),s}throw qe=o,xe}}function Ce(s){try{var o=s._init;return o(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(qe=u,xe):u}}var qe=null;function Ge(){if(qe===null)throw Error(r(459));var s=qe;return qe=null,s}function tt(s){if(s===xe||s===ae)throw Error(r(483))}var Qe=null,vt=0;function ut(s){var o=vt;return vt+=1,Qe===null&&(Qe=[]),Ve(Qe,s,o)}function Qt(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function mt(s,o){throw o.$$typeof===N?Error(r(525)):(s=Object.prototype.toString.call(o),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function gn(s){function o(Ee,be){if(s){var Le=Ee.deletions;Le===null?(Ee.deletions=[be],Ee.flags|=16):Le.push(be)}}function u(Ee,be){if(!s)return null;for(;be!==null;)o(Ee,be),be=be.sibling;return null}function m(Ee){for(var be=new Map;Ee!==null;)Ee.key!==null?be.set(Ee.key,Ee):be.set(Ee.index,Ee),Ee=Ee.sibling;return be}function y(Ee,be){return Ee=Js(Ee,be),Ee.index=0,Ee.sibling=null,Ee}function _(Ee,be,Le){return Ee.index=Le,s?(Le=Ee.alternate,Le!==null?(Le=Le.index,Le<be?(Ee.flags|=67108866,be):Le):(Ee.flags|=67108866,be)):(Ee.flags|=1048576,be)}function M(Ee){return s&&Ee.alternate===null&&(Ee.flags|=67108866),Ee}function K(Ee,be,Le,Ye){return be===null||be.tag!==6?(be=Pu(Le,Ee.mode,Ye),be.return=Ee,be):(be=y(be,Le),be.return=Ee,be)}function ge(Ee,be,Le,Ye){var Ft=Le.type;return Ft===C?$e(Ee,be,Le.props.children,Ye,Le.key):be!==null&&(be.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===D&&Ce(Ft)===be.type)?(be=y(be,Le.props),Qt(be,Le),be.return=Ee,be):(be=Sc(Le.type,Le.key,Le.props,null,Ee.mode,Ye),Qt(be,Le),be.return=Ee,be)}function ke(Ee,be,Le,Ye){return be===null||be.tag!==4||be.stateNode.containerInfo!==Le.containerInfo||be.stateNode.implementation!==Le.implementation?(be=Ec(Le,Ee.mode,Ye),be.return=Ee,be):(be=y(be,Le.children||[]),be.return=Ee,be)}function $e(Ee,be,Le,Ye,Ft){return be===null||be.tag!==7?(be=Xo(Le,Ee.mode,Ye,Ft),be.return=Ee,be):(be=y(be,Le),be.return=Ee,be)}function Ke(Ee,be,Le){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return be=Pu(""+be,Ee.mode,Le),be.return=Ee,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case b:return Le=Sc(be.type,be.key,be.props,null,Ee.mode,Le),Qt(Le,be),Le.return=Ee,Le;case E:return be=Ec(be,Ee.mode,Le),be.return=Ee,be;case D:return be=Ce(be),Ke(Ee,be,Le)}if(ye(be)||L(be))return be=Xo(be,Ee.mode,Le,null),be.return=Ee,be;if(typeof be.then=="function")return Ke(Ee,ut(be),Le);if(be.$$typeof===$)return Ke(Ee,Ad(Ee,be),Le);mt(Ee,be)}return null}function Me(Ee,be,Le,Ye){var Ft=be!==null?be.key:null;if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return Ft!==null?null:K(Ee,be,""+Le,Ye);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case b:return Le.key===Ft?ge(Ee,be,Le,Ye):null;case E:return Le.key===Ft?ke(Ee,be,Le,Ye):null;case D:return Le=Ce(Le),Me(Ee,be,Le,Ye)}if(ye(Le)||L(Le))return Ft!==null?null:$e(Ee,be,Le,Ye,null);if(typeof Le.then=="function")return Me(Ee,be,ut(Le),Ye);if(Le.$$typeof===$)return Me(Ee,be,Ad(Ee,Le),Ye);mt(Ee,Le)}return null}function Oe(Ee,be,Le,Ye,Ft){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ee=Ee.get(Le)||null,K(be,Ee,""+Ye,Ft);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case b:return Ee=Ee.get(Ye.key===null?Le:Ye.key)||null,ge(be,Ee,Ye,Ft);case E:return Ee=Ee.get(Ye.key===null?Le:Ye.key)||null,ke(be,Ee,Ye,Ft);case D:return Ye=Ce(Ye),Oe(Ee,be,Le,Ye,Ft)}if(ye(Ye)||L(Ye))return Ee=Ee.get(Le)||null,$e(be,Ee,Ye,Ft,null);if(typeof Ye.then=="function")return Oe(Ee,be,Le,ut(Ye),Ft);if(Ye.$$typeof===$)return Oe(Ee,be,Le,Ad(be,Ye),Ft);mt(be,Ye)}return null}function pt(Ee,be,Le,Ye){for(var Ft=null,Bn=null,Nt=be,dn=be=0,_n=null;Nt!==null&&dn<Le.length;dn++){Nt.index>dn?(_n=Nt,Nt=null):_n=Nt.sibling;var zn=Me(Ee,Nt,Le[dn],Ye);if(zn===null){Nt===null&&(Nt=_n);break}s&&Nt&&zn.alternate===null&&o(Ee,Nt),be=_(zn,be,dn),Bn===null?Ft=zn:Bn.sibling=zn,Bn=zn,Nt=_n}if(dn===Le.length)return u(Ee,Nt),vn&&Vs(Ee,dn),Ft;if(Nt===null){for(;dn<Le.length;dn++)Nt=Ke(Ee,Le[dn],Ye),Nt!==null&&(be=_(Nt,be,dn),Bn===null?Ft=Nt:Bn.sibling=Nt,Bn=Nt);return vn&&Vs(Ee,dn),Ft}for(Nt=m(Nt);dn<Le.length;dn++)_n=Oe(Nt,Ee,dn,Le[dn],Ye),_n!==null&&(s&&_n.alternate!==null&&Nt.delete(_n.key===null?dn:_n.key),be=_(_n,be,dn),Bn===null?Ft=_n:Bn.sibling=_n,Bn=_n);return s&&Nt.forEach(function(Wc){return o(Ee,Wc)}),vn&&Vs(Ee,dn),Ft}function Ht(Ee,be,Le,Ye){if(Le==null)throw Error(r(151));for(var Ft=null,Bn=null,Nt=be,dn=be=0,_n=null,zn=Le.next();Nt!==null&&!zn.done;dn++,zn=Le.next()){Nt.index>dn?(_n=Nt,Nt=null):_n=Nt.sibling;var Wc=Me(Ee,Nt,zn.value,Ye);if(Wc===null){Nt===null&&(Nt=_n);break}s&&Nt&&Wc.alternate===null&&o(Ee,Nt),be=_(Wc,be,dn),Bn===null?Ft=Wc:Bn.sibling=Wc,Bn=Wc,Nt=_n}if(zn.done)return u(Ee,Nt),vn&&Vs(Ee,dn),Ft;if(Nt===null){for(;!zn.done;dn++,zn=Le.next())zn=Ke(Ee,zn.value,Ye),zn!==null&&(be=_(zn,be,dn),Bn===null?Ft=zn:Bn.sibling=zn,Bn=zn);return vn&&Vs(Ee,dn),Ft}for(Nt=m(Nt);!zn.done;dn++,zn=Le.next())zn=Oe(Nt,Ee,dn,zn.value,Ye),zn!==null&&(s&&zn.alternate!==null&&Nt.delete(zn.key===null?dn:zn.key),be=_(zn,be,dn),Bn===null?Ft=zn:Bn.sibling=zn,Bn=zn);return s&&Nt.forEach(function(G6){return o(Ee,G6)}),vn&&Vs(Ee,dn),Ft}function hr(Ee,be,Le,Ye){if(typeof Le=="object"&&Le!==null&&Le.type===C&&Le.key===null&&(Le=Le.props.children),typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case b:e:{for(var Ft=Le.key;be!==null;){if(be.key===Ft){if(Ft=Le.type,Ft===C){if(be.tag===7){u(Ee,be.sibling),Ye=y(be,Le.props.children),Ye.return=Ee,Ee=Ye;break e}}else if(be.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===D&&Ce(Ft)===be.type){u(Ee,be.sibling),Ye=y(be,Le.props),Qt(Ye,Le),Ye.return=Ee,Ee=Ye;break e}u(Ee,be);break}else o(Ee,be);be=be.sibling}Le.type===C?(Ye=Xo(Le.props.children,Ee.mode,Ye,Le.key),Ye.return=Ee,Ee=Ye):(Ye=Sc(Le.type,Le.key,Le.props,null,Ee.mode,Ye),Qt(Ye,Le),Ye.return=Ee,Ee=Ye)}return M(Ee);case E:e:{for(Ft=Le.key;be!==null;){if(be.key===Ft)if(be.tag===4&&be.stateNode.containerInfo===Le.containerInfo&&be.stateNode.implementation===Le.implementation){u(Ee,be.sibling),Ye=y(be,Le.children||[]),Ye.return=Ee,Ee=Ye;break e}else{u(Ee,be);break}else o(Ee,be);be=be.sibling}Ye=Ec(Le,Ee.mode,Ye),Ye.return=Ee,Ee=Ye}return M(Ee);case D:return Le=Ce(Le),hr(Ee,be,Le,Ye)}if(ye(Le))return pt(Ee,be,Le,Ye);if(L(Le)){if(Ft=L(Le),typeof Ft!="function")throw Error(r(150));return Le=Ft.call(Le),Ht(Ee,be,Le,Ye)}if(typeof Le.then=="function")return hr(Ee,be,ut(Le),Ye);if(Le.$$typeof===$)return hr(Ee,be,Ad(Ee,Le),Ye);mt(Ee,Le)}return typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint"?(Le=""+Le,be!==null&&be.tag===6?(u(Ee,be.sibling),Ye=y(be,Le),Ye.return=Ee,Ee=Ye):(u(Ee,be),Ye=Pu(Le,Ee.mode,Ye),Ye.return=Ee,Ee=Ye),M(Ee)):u(Ee,be)}return function(Ee,be,Le,Ye){try{vt=0;var Ft=hr(Ee,be,Le,Ye);return Qe=null,Ft}catch(Nt){if(Nt===xe||Nt===ae)throw Nt;var Bn=$i(29,Nt,null,Ee.mode);return Bn.lanes=Ye,Bn.return=Ee,Bn}finally{}}}var gr=gn(!0),sn=gn(!1),dt=!1;function rt(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wr(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function zt(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ln(s,o,u){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Wn&2)!==0){var y=m.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),m.pending=o,o=Hi(s),Lu(s,null,u),o}return Ru(s,m,o,u),Hi(s)}function $n(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,Mi(s,u)}}function ri(s,o){var u=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var y=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var M={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?y=_=M:_=_.next=M,u=u.next}while(u!==null);_===null?y=_=o:_=_.next=o}else y=_=o;u={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}var Ri=!1;function cr(){if(Ri){var s=w;if(s!==null)throw s}}function Gr(s,o,u,m){Ri=!1;var y=s.updateQueue;dt=!1;var _=y.firstBaseUpdate,M=y.lastBaseUpdate,K=y.shared.pending;if(K!==null){y.shared.pending=null;var ge=K,ke=ge.next;ge.next=null,M===null?_=ke:M.next=ke,M=ge;var $e=s.alternate;$e!==null&&($e=$e.updateQueue,K=$e.lastBaseUpdate,K!==M&&(K===null?$e.firstBaseUpdate=ke:K.next=ke,$e.lastBaseUpdate=ge))}if(_!==null){var Ke=y.baseState;M=0,$e=ke=ge=null,K=_;do{var Me=K.lane&-536870913,Oe=Me!==K.lane;if(Oe?(wn&Me)===Me:(m&Me)===Me){Me!==0&&Me===g&&(Ri=!0),$e!==null&&($e=$e.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var pt=s,Ht=K;Me=o;var hr=u;switch(Ht.tag){case 1:if(pt=Ht.payload,typeof pt=="function"){Ke=pt.call(hr,Ke,Me);break e}Ke=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=Ht.payload,Me=typeof pt=="function"?pt.call(hr,Ke,Me):pt,Me==null)break e;Ke=x({},Ke,Me);break e;case 2:dt=!0}}Me=K.callback,Me!==null&&(s.flags|=64,Oe&&(s.flags|=8192),Oe=y.callbacks,Oe===null?y.callbacks=[Me]:Oe.push(Me))}else Oe={lane:Me,tag:K.tag,payload:K.payload,callback:K.callback,next:null},$e===null?(ke=$e=Oe,ge=Ke):$e=$e.next=Oe,M|=Me;if(K=K.next,K===null){if(K=y.shared.pending,K===null)break;Oe=K,K=Oe.next,Oe.next=null,y.lastBaseUpdate=Oe,y.shared.pending=null}}while(!0);$e===null&&(ge=Ke),y.baseState=ge,y.firstBaseUpdate=ke,y.lastBaseUpdate=$e,_===null&&(y.shared.lanes=0),Oc|=M,s.lanes=M,s.memoizedState=Ke}}function Gi(s,o){if(typeof s!="function")throw Error(r(191,s));s.call(o)}function Wr(s,o){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)Gi(u[s],o)}var fn=X(null),Cn=X(0);function _r(s,o){s=Ql,J(Cn,s),J(fn,o),Ql=s|o.baseLanes}function Mn(){J(Cn,Ql),J(fn,fn.current)}function ii(){Ql=Cn.current,q(fn),q(Cn)}var Nr=X(null),In=null;function Vr(s){var o=s.alternate;J(jn,jn.current&1),J(Nr,s),In===null&&(o===null||fn.current!==null||o.memoizedState!==null)&&(In=s)}function Gn(s){J(jn,jn.current),J(Nr,s),In===null&&(In=s)}function Yr(s){s.tag===22?(J(jn,jn.current),J(Nr,s),In===null&&(In=s)):Kr()}function Kr(){J(jn,jn.current),J(Nr,Nr.current)}function Jn(s){q(Nr),In===s&&(In=null),q(jn)}var jn=X(0);function Wi(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||x1(u)||b1(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Cr=0,kt=null,Ot=null,Rn=null,_s=!1,sa=!1,cs=!1,Qr=0,il=0,sl=null,Ed=0;function ur(){throw Error(r(321))}function $h(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!Ei(s[u],o[u]))return!1;return!0}function Gh(s,o,u,m,y,_){return Cr=_,kt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Q.H=s===null||s.memoizedState===null?o2:I0,cs=!1,_=u(m,y),cs=!1,sa&&(_=Eo(o,u,m,y)),jd(s),_}function jd(s){Q.H=ef;var o=Ot!==null&&Ot.next!==null;if(Cr=0,Rn=Ot=kt=null,_s=!1,il=0,sl=null,o)throw Error(r(300));s===null||pi||(s=s.dependencies,s!==null&&Nd(s)&&(pi=!0))}function Eo(s,o,u,m){kt=s;var y=0;do{if(sa&&(sl=null),il=0,sa=!1,25<=y)throw Error(r(301));if(y+=1,Rn=Ot=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Q.H=l2,_=o(u,m)}while(sa);return _}function N0(){var s=Q.H,o=s.useState()[0];return o=typeof o.then=="function"?al(o):o,s=s.useState()[0],(Ot!==null?Ot.memoizedState:null)!==s&&(kt.flags|=1024),o}function Wh(){var s=Qr!==0;return Qr=0,s}function Yh(s,o,u){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~u}function Td(s){if(_s){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}_s=!1}Cr=0,Rn=Ot=kt=null,sa=!1,il=Qr=0,sl=null}function mi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?kt.memoizedState=Rn=s:Rn=Rn.next=s,Rn}function Ir(){if(Ot===null){var s=kt.alternate;s=s!==null?s.memoizedState:null}else s=Ot.next;var o=Rn===null?kt.memoizedState:Rn.next;if(o!==null)Rn=o,Ot=s;else{if(s===null)throw kt.alternate===null?Error(r(467)):Error(r(310));Ot=s,s={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Rn===null?kt.memoizedState=Rn=s:Rn=Rn.next=s}return Rn}function Fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function al(s){var o=il;return il+=1,sl===null&&(sl=[]),s=Ve(sl,s,o),o=kt,(Rn===null?o.memoizedState:Rn.next)===null&&(o=o.alternate,Q.H=o===null||o.memoizedState===null?o2:I0),s}function Rc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return al(s);if(s.$$typeof===$)return Ii(s)}throw Error(r(438,String(s)))}function Ul(s){var o=null,u=kt.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var m=kt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Fu(),kt.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(s),m=0;m<s;m++)u[m]=G;return o.index++,u}function Za(s,o){return typeof o=="function"?o(s):o}function Cd(s){var o=Ir();return Lc(o,Ot,s)}function Lc(s,o,u){var m=s.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=u;var y=s.baseQueue,_=m.pending;if(_!==null){if(y!==null){var M=y.next;y.next=_.next,_.next=M}o.baseQueue=y=_,m.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{o=y.next;var K=M=null,ge=null,ke=o,$e=!1;do{var Ke=ke.lane&-536870913;if(Ke!==ke.lane?(wn&Ke)===Ke:(Cr&Ke)===Ke){var Me=ke.revertLane;if(Me===0)ge!==null&&(ge=ge.next={lane:0,revertLane:0,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),Ke===g&&($e=!0);else if((Cr&Me)===Me){ke=ke.next,Me===g&&($e=!0);continue}else Ke={lane:0,revertLane:ke.revertLane,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},ge===null?(K=ge=Ke,M=_):ge=ge.next=Ke,kt.lanes|=Me,Oc|=Me;Ke=ke.action,cs&&u(_,Ke),_=ke.hasEagerState?ke.eagerState:u(_,Ke)}else Me={lane:Ke,revertLane:ke.revertLane,gesture:ke.gesture,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},ge===null?(K=ge=Me,M=_):ge=ge.next=Me,kt.lanes|=Ke,Oc|=Ke;ke=ke.next}while(ke!==null&&ke!==o);if(ge===null?M=_:ge.next=K,!Ei(_,s.memoizedState)&&(pi=!0,$e&&(u=w,u!==null)))throw u;s.memoizedState=_,s.baseState=M,s.baseQueue=ge,m.lastRenderedState=_}return y===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function Id(s){var o=Ir(),u=o.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var m=u.dispatch,y=u.pending,_=o.memoizedState;if(y!==null){u.pending=null;var M=y=y.next;do _=s(_,M.action),M=M.next;while(M!==y);Ei(_,o.memoizedState)||(pi=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,m]}function Rd(s,o,u){var m=kt,y=Ir(),_=vn;if(_){if(u===void 0)throw Error(r(407));u=u()}else u=o();var M=!Ei((Ot||y).memoizedState,u);if(M&&(y.memoizedState=u,pi=!0),y=y.queue,A0(Qh.bind(null,m,y,s),[s]),y.getSnapshot!==o||M||Rn!==null&&Rn.memoizedState.tag&1){if(m.flags|=2048,zl(9,{destroy:void 0},Kh.bind(null,m,y,u,o),null),vr===null)throw Error(r(349));_||(Cr&127)!==0||jo(m,o,u)}return u}function jo(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=kt.updateQueue,o===null?(o=Fu(),kt.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function Kh(s,o,u,m){o.value=u,o.getSnapshot=m,Lm(o)&&Xh(s)}function Qh(s,o,u){return u(function(){Lm(o)&&Xh(s)})}function Lm(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!Ei(s,u)}catch{return!0}}function Xh(s){var o=Ao(s,2);o!==null&&ua(o,s,2)}function ol(s){var o=mi();if(typeof s=="function"){var u=s;if(s=u(),cs){Bt(!0);try{u()}finally{Bt(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:s},o}function km(s,o,u,m){return s.baseState=u,Lc(s,Ot,typeof m=="function"?m:Za)}function Pm(s,o,u,m,y){if(Fm(s))throw Error(r(485));if(s=o.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){_.listeners.push(M)}};Q.T!==null?u(!0):_.isTransition=!1,m(_),u=o.pending,u===null?(_.next=o.pending=_,Dm(o,_)):(_.next=u.next,o.pending=u.next=_)}}function Dm(s,o){var u=o.action,m=o.payload,y=s.state;if(o.isTransition){var _=Q.T,M={};Q.T=M;try{var K=u(y,m),ge=Q.S;ge!==null&&ge(M,K),Jh(s,o,K)}catch(ke){Bl(s,o,ke)}finally{_!==null&&M.types!==null&&(_.types=M.types),Q.T=_}}else try{_=u(y,m),Jh(s,o,_)}catch(ke){Bl(s,o,ke)}}function Jh(s,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){Mm(s,o,m)},function(m){return Bl(s,o,m)}):Mm(s,o,u)}function Mm(s,o,u){o.status="fulfilled",o.value=u,Ld(o),s.state=u,o=s.pending,o!==null&&(u=o.next,u===o?s.pending=null:(u=u.next,o.next=u,Dm(s,u)))}function Bl(s,o,u){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=u,Ld(o),o=o.next;while(o!==m)}s.action=null}function Ld(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function qu(s,o){return o}function eo(s,o){if(vn){var u=vr.formState;if(u!==null){e:{var m=kt;if(vn){if(pr){t:{for(var y=pr,_=Tr;y.nodeType!==8;){if(!_){y=null;break t}if(y=to(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){pr=to(y.nextSibling),m=y.data==="F!";break e}}Zo(m)}m=!1}m&&(o=u[0])}}return u=mi(),u.memoizedState=u.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qu,lastRenderedState:o},u.queue=m,u=i2.bind(null,kt,m),m.dispatch=u,m=ol(!1),_=C0.bind(null,kt,!1,m.queue),m=mi(),y={state:o,dispatch:null,action:s,pending:null},m.queue=y,u=Pm.bind(null,kt,y,_,u),y.dispatch=u,m.memoizedState=s,[o,u,!1]}function To(s){var o=Ir();return Co(o,Ot,s)}function Co(s,o,u){if(o=Lc(s,o,qu)[0],s=Cd(Za)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=al(o)}catch(M){throw M===xe?ae:M}else m=o;o=Ir();var y=o.queue,_=y.dispatch;return u!==o.memoizedState&&(kt.flags|=2048,zl(9,{destroy:void 0},kd.bind(null,y,u),null)),[m,_,s]}function kd(s,o){s.action=o}function Pd(s){var o=Ir(),u=Ot;if(u!==null)return Co(o,u,s);Ir(),o=o.memoizedState,u=Ir();var m=u.queue.dispatch;return u.memoizedState=s,[o,m,!1]}function zl(s,o,u,m){return s={tag:s,create:u,deps:m,inst:o,next:null},o=kt.updateQueue,o===null&&(o=Fu(),kt.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=s.next=s:(m=u.next,u.next=s,s.next=m,o.lastEffect=s),s}function Om(){return Ir().memoizedState}function kc(s,o,u,m){var y=mi();kt.flags|=s,y.memoizedState=zl(1|o,{destroy:void 0},u,m===void 0?null:m)}function Pc(s,o,u,m){var y=Ir();m=m===void 0?null:m;var _=y.memoizedState.inst;Ot!==null&&m!==null&&$h(m,Ot.memoizedState.deps)?y.memoizedState=zl(o,_,u,m):(kt.flags|=s,y.memoizedState=zl(1|o,_,u,m))}function Hx(s,o){kc(8390656,8,s,o)}function A0(s,o){Pc(2048,8,s,o)}function VE(s){kt.flags|=4;var o=kt.updateQueue;if(o===null)o=Fu(),kt.updateQueue=o,o.events=[s];else{var u=o.events;u===null?o.events=[s]:u.push(s)}}function $x(s){var o=Ir().memoizedState;return VE({ref:o,nextImpl:s}),function(){if((Wn&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function Gx(s,o){return Pc(4,2,s,o)}function Wx(s,o){return Pc(4,4,s,o)}function Yx(s,o){if(typeof o=="function"){s=s();var u=o(s);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Kx(s,o,u){u=u!=null?u.concat([s]):null,Pc(4,4,Yx.bind(null,o,s),u)}function S0(){}function Qx(s,o){var u=Ir();o=o===void 0?null:o;var m=u.memoizedState;return o!==null&&$h(o,m[1])?m[0]:(u.memoizedState=[s,o],s)}function Xx(s,o){var u=Ir();o=o===void 0?null:o;var m=u.memoizedState;if(o!==null&&$h(o,m[1]))return m[0];if(m=s(),cs){Bt(!0);try{s()}finally{Bt(!1)}}return u.memoizedState=[m,o],m}function E0(s,o,u){return u===void 0||(Cr&1073741824)!==0&&(wn&261930)===0?s.memoizedState=o:(s.memoizedState=u,s=J2(),kt.lanes|=s,Oc|=s,u)}function Jx(s,o,u,m){return Ei(u,o)?u:fn.current!==null?(s=E0(s,u,m),Ei(s,o)||(pi=!0),s):(Cr&42)===0||(Cr&1073741824)!==0&&(wn&261930)===0?(pi=!0,s.memoizedState=u):(s=J2(),kt.lanes|=s,Oc|=s,o)}function Zx(s,o,u,m,y){var _=ce.p;ce.p=_!==0&&8>_?_:8;var M=Q.T,K={};Q.T=K,C0(s,!1,o,u);try{var ge=y(),ke=Q.S;if(ke!==null&&ke(K,ge),ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var $e=H(ge,m);Zh(s,o,$e,Ta(s))}else Zh(s,o,m,Ta(s))}catch(Ke){Zh(s,o,{then:function(){},status:"rejected",reason:Ke},Ta())}finally{ce.p=_,M!==null&&K.types!==null&&(M.types=K.types),Q.T=M}}function UE(){}function j0(s,o,u,m){if(s.tag!==5)throw Error(r(476));var y=e2(s).queue;Zx(s,y,o,me,u===null?UE:function(){return t2(s),u(m)})}function e2(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:me},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:u},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function t2(s){var o=e2(s);o.next===null&&(o=s.alternate.memoizedState),Zh(s,o.next.queue,{},Ta())}function T0(){return Ii(vf)}function n2(){return Ir().memoizedState}function r2(){return Ir().memoizedState}function BE(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var u=Ta();s=zt(u);var m=ln(o,s,u);m!==null&&(ua(m,o,u),$n(m,o,u)),o={cache:Ic()},s.payload=o;return}o=o.return}}function zE(s,o,u){var m=Ta();u={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Fm(s)?s2(o,u):(u=pd(s,o,u,m),u!==null&&(ua(u,s,m),a2(u,o,m)))}function i2(s,o,u){var m=Ta();Zh(s,o,u,m)}function Zh(s,o,u,m){var y={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Fm(s))s2(o,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var M=o.lastRenderedState,K=_(M,u);if(y.hasEagerState=!0,y.eagerState=K,Ei(K,M))return Ru(s,o,y,0),vr===null&&Iu(),!1}catch{}finally{}if(u=pd(s,o,y,m),u!==null)return ua(u,s,m),a2(u,o,m),!0}return!1}function C0(s,o,u,m){if(m={lane:2,revertLane:o1(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Fm(s)){if(o)throw Error(r(479))}else o=pd(s,u,m,2),o!==null&&ua(o,s,2)}function Fm(s){var o=s.alternate;return s===kt||o!==null&&o===kt}function s2(s,o){sa=_s=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function a2(s,o,u){if((u&4194048)!==0){var m=o.lanes;m&=s.pendingLanes,u|=m,o.lanes=u,Mi(s,u)}}var ef={readContext:Ii,use:Rc,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useLayoutEffect:ur,useInsertionEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useSyncExternalStore:ur,useId:ur,useHostTransitionStatus:ur,useFormState:ur,useActionState:ur,useOptimistic:ur,useMemoCache:ur,useCacheRefresh:ur};ef.useEffectEvent=ur;var o2={readContext:Ii,use:Rc,useCallback:function(s,o){return mi().memoizedState=[s,o===void 0?null:o],s},useContext:Ii,useEffect:Hx,useImperativeHandle:function(s,o,u){u=u!=null?u.concat([s]):null,kc(4194308,4,Yx.bind(null,o,s),u)},useLayoutEffect:function(s,o){return kc(4194308,4,s,o)},useInsertionEffect:function(s,o){kc(4,2,s,o)},useMemo:function(s,o){var u=mi();o=o===void 0?null:o;var m=s();if(cs){Bt(!0);try{s()}finally{Bt(!1)}}return u.memoizedState=[m,o],m},useReducer:function(s,o,u){var m=mi();if(u!==void 0){var y=u(o);if(cs){Bt(!0);try{u(o)}finally{Bt(!1)}}}else y=o;return m.memoizedState=m.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},m.queue=s,s=s.dispatch=zE.bind(null,kt,s),[m.memoizedState,s]},useRef:function(s){var o=mi();return s={current:s},o.memoizedState=s},useState:function(s){s=ol(s);var o=s.queue,u=i2.bind(null,kt,o);return o.dispatch=u,[s.memoizedState,u]},useDebugValue:S0,useDeferredValue:function(s,o){var u=mi();return E0(u,s,o)},useTransition:function(){var s=ol(!1);return s=Zx.bind(null,kt,s.queue,!0,!1),mi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,u){var m=kt,y=mi();if(vn){if(u===void 0)throw Error(r(407));u=u()}else{if(u=o(),vr===null)throw Error(r(349));(wn&127)!==0||jo(m,o,u)}y.memoizedState=u;var _={value:u,getSnapshot:o};return y.queue=_,Hx(Qh.bind(null,m,_,s),[s]),m.flags|=2048,zl(9,{destroy:void 0},Kh.bind(null,m,_,u,o),null),u},useId:function(){var s=mi(),o=vr.identifierPrefix;if(vn){var u=ra,m=na;u=(m&~(1<<32-Zt(m)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Qr++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=Ed++,o="_"+o+"r_"+u.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:T0,useFormState:eo,useActionState:eo,useOptimistic:function(s){var o=mi();o.memoizedState=o.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=C0.bind(null,kt,!0,u),u.dispatch=o,[s,o]},useMemoCache:Ul,useCacheRefresh:function(){return mi().memoizedState=BE.bind(null,kt)},useEffectEvent:function(s){var o=mi(),u={impl:s};return o.memoizedState=u,function(){if((Wn&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},I0={readContext:Ii,use:Rc,useCallback:Qx,useContext:Ii,useEffect:A0,useImperativeHandle:Kx,useInsertionEffect:Gx,useLayoutEffect:Wx,useMemo:Xx,useReducer:Cd,useRef:Om,useState:function(){return Cd(Za)},useDebugValue:S0,useDeferredValue:function(s,o){var u=Ir();return Jx(u,Ot.memoizedState,s,o)},useTransition:function(){var s=Cd(Za)[0],o=Ir().memoizedState;return[typeof s=="boolean"?s:al(s),o]},useSyncExternalStore:Rd,useId:n2,useHostTransitionStatus:T0,useFormState:To,useActionState:To,useOptimistic:function(s,o){var u=Ir();return km(u,Ot,s,o)},useMemoCache:Ul,useCacheRefresh:r2};I0.useEffectEvent=$x;var l2={readContext:Ii,use:Rc,useCallback:Qx,useContext:Ii,useEffect:A0,useImperativeHandle:Kx,useInsertionEffect:Gx,useLayoutEffect:Wx,useMemo:Xx,useReducer:Id,useRef:Om,useState:function(){return Id(Za)},useDebugValue:S0,useDeferredValue:function(s,o){var u=Ir();return Ot===null?E0(u,s,o):Jx(u,Ot.memoizedState,s,o)},useTransition:function(){var s=Id(Za)[0],o=Ir().memoizedState;return[typeof s=="boolean"?s:al(s),o]},useSyncExternalStore:Rd,useId:n2,useHostTransitionStatus:T0,useFormState:Pd,useActionState:Pd,useOptimistic:function(s,o){var u=Ir();return Ot!==null?km(u,Ot,s,o):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:Ul,useCacheRefresh:r2};l2.useEffectEvent=$x;function R0(s,o,u,m){o=s.memoizedState,u=u(m,o),u=u==null?o:x({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var L0={enqueueSetState:function(s,o,u){s=s._reactInternals;var m=Ta(),y=zt(m);y.payload=o,u!=null&&(y.callback=u),o=ln(s,y,m),o!==null&&(ua(o,s,m),$n(o,s,m))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var m=Ta(),y=zt(m);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=ln(s,y,m),o!==null&&(ua(o,s,m),$n(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=Ta(),m=zt(u);m.tag=2,o!=null&&(m.callback=o),o=ln(s,m,u),o!==null&&(ua(o,s,u),$n(o,s,u))}};function c2(s,o,u,m,y,_,M){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,_,M):o.prototype&&o.prototype.isPureReactComponent?!bo(u,m)||!bo(y,_):!0}function u2(s,o,u,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==s&&L0.enqueueReplaceState(o,o.state,null)}function Vu(s,o){var u=o;if("ref"in o){u={};for(var m in o)m!=="ref"&&(u[m]=o[m])}if(s=s.defaultProps){u===o&&(u=x({},u));for(var y in s)u[y]===void 0&&(u[y]=s[y])}return u}function d2(s){Cu(s)}function h2(s){console.error(s)}function f2(s){Cu(s)}function qm(s,o){try{var u=s.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function m2(s,o,u){try{var m=s.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function k0(s,o,u){return u=zt(u),u.tag=3,u.payload={element:null},u.callback=function(){qm(s,o)},u}function p2(s){return s=zt(s),s.tag=3,s}function g2(s,o,u,m){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var _=m.value;s.payload=function(){return y(_)},s.callback=function(){m2(o,u,m)}}var M=u.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(s.callback=function(){m2(o,u,m),typeof y!="function"&&(Fc===null?Fc=new Set([this]):Fc.add(this));var K=m.stack;this.componentDidCatch(m.value,{componentStack:K!==null?K:""})})}function HE(s,o,u,m,y){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=u.alternate,o!==null&&nl(o,u,y,!0),u=Nr.current,u!==null){switch(u.tag){case 31:case 13:return In===null?Xm():u.alternate===null&&Xr===0&&(Xr=3),u.flags&=-257,u.flags|=65536,u.lanes=y,m===_e?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([m]):o.add(m),i1(s,m,y)),!1;case 22:return u.flags|=65536,m===_e?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([m]):u.add(m)),i1(s,m,y)),!1}throw Error(r(435,u.tag))}return i1(s,m,y),Xm(),!1}if(vn)return o=Nr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,m!==Sa&&(s=Error(r(422),{cause:m}),Tc(Zs(s,u)))):(m!==Sa&&(o=Error(r(423),{cause:m}),Tc(Zs(o,u))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,m=Zs(m,u),y=k0(s.stateNode,m,y),ri(s,y),Xr!==4&&(Xr=2)),!1;var _=Error(r(520),{cause:m});if(_=Zs(_,u),cf===null?cf=[_]:cf.push(_),Xr!==4&&(Xr=2),o===null)return!0;m=Zs(m,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,s=y&-y,u.lanes|=s,s=k0(u.stateNode,m,s),ri(u,s),!1;case 1:if(o=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Fc===null||!Fc.has(_))))return u.flags|=65536,y&=-y,u.lanes|=y,y=p2(y),g2(y,s,u,m),ri(u,y),!1}u=u.return}while(u!==null);return!1}var P0=Error(r(461)),pi=!1;function us(s,o,u,m){o.child=s===null?sn(o,null,u,m):gr(o,s.child,u,m)}function v2(s,o,u,m,y){u=u.render;var _=o.ref;if("ref"in m){var M={};for(var K in m)K!=="ref"&&(M[K]=m[K])}else M=m;return rl(o),m=Gh(s,o,u,M,_,y),K=Wh(),s!==null&&!pi?(Yh(s,o,y),Hl(s,o,y)):(vn&&K&&Bh(o),o.flags|=1,us(s,o,m,y),o.child)}function y2(s,o,u,m,y){if(s===null){var _=u.type;return typeof _=="function"&&!vd(_)&&_.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=_,x2(s,o,_,m,y)):(s=Sc(u.type,null,m,o,o.mode,y),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,!B0(s,y)){var M=_.memoizedProps;if(u=u.compare,u=u!==null?u:bo,u(M,m)&&s.ref===o.ref)return Hl(s,o,y)}return o.flags|=1,s=Js(_,m),s.ref=o.ref,s.return=o,o.child=s}function x2(s,o,u,m,y){if(s!==null){var _=s.memoizedProps;if(bo(_,m)&&s.ref===o.ref)if(pi=!1,o.pendingProps=m=_,B0(s,y))(s.flags&131072)!==0&&(pi=!0);else return o.lanes=s.lanes,Hl(s,o,y)}return D0(s,o,u,m,y)}function b2(s,o,u,m){var y=m.children,_=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,s!==null){for(m=o.child=s.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;m=y&~_}else m=0,o.child=null;return w2(s,o,_,u,m)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&ne(o,_!==null?_.cachePool:null),_!==null?_r(o,_):Mn(),Yr(o);else return m=o.lanes=536870912,w2(s,o,_!==null?_.baseLanes|u:u,u,m)}else _!==null?(ne(o,_.cachePool),_r(o,_),Kr(),o.memoizedState=null):(s!==null&&ne(o,null),Mn(),Kr());return us(s,o,y,u),o.child}function tf(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function w2(s,o,u,m,y){var _=Z();return _=_===null?null:{parent:qr._currentValue,pool:_},o.memoizedState={baseLanes:u,cachePool:_},s!==null&&ne(o,null),Mn(),Yr(o),s!==null&&nl(s,o,m,!0),o.childLanes=y,null}function Vm(s,o){return o=Bm({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function _2(s,o,u){return gr(o,s.child,null,u),s=Vm(o,o.pendingProps),s.flags|=2,Jn(o),o.memoizedState=null,s}function $E(s,o,u){var m=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(vn){if(m.mode==="hidden")return s=Vm(o,m),o.lanes=536870912,tf(null,s);if(Gn(o),(s=pr)?(s=Pb(s,Tr),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Jo!==null?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},u=yd(s),u.return=o,o.child=u,Ti=o,pr=null)):s=null,s===null)throw Zo(o);return o.lanes=536870912,null}return Vm(o,m)}var _=s.memoizedState;if(_!==null){var M=_.dehydrated;if(Gn(o),y)if(o.flags&256)o.flags&=-257,o=_2(s,o,u);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(r(558));else if(pi||nl(s,o,u,!1),y=(u&s.childLanes)!==0,pi||y){if(m=vr,m!==null&&(M=Oi(m,u),M!==0&&M!==_.retryLane))throw _.retryLane=M,Ao(s,M),ua(m,s,M),P0;Xm(),o=_2(s,o,u)}else s=_.treeContext,pr=to(M.nextSibling),Ti=o,vn=!0,ls=null,Tr=!1,s!==null&&Im(o,s),o=Vm(o,m),o.flags|=4096;return o}return s=Js(s.child,{mode:m.mode,children:m.children}),s.ref=o.ref,o.child=s,s.return=o,s}function Um(s,o){var u=o.ref;if(u===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(s===null||s.ref!==u)&&(o.flags|=4194816)}}function D0(s,o,u,m,y){return rl(o),u=Gh(s,o,u,m,void 0,y),m=Wh(),s!==null&&!pi?(Yh(s,o,y),Hl(s,o,y)):(vn&&m&&Bh(o),o.flags|=1,us(s,o,u,y),o.child)}function N2(s,o,u,m,y,_){return rl(o),o.updateQueue=null,u=Eo(o,m,u,y),jd(s),m=Wh(),s!==null&&!pi?(Yh(s,o,_),Hl(s,o,_)):(vn&&m&&Bh(o),o.flags|=1,us(s,o,u,_),o.child)}function A2(s,o,u,m,y){if(rl(o),o.stateNode===null){var _=ji,M=u.contextType;typeof M=="object"&&M!==null&&(_=Ii(M)),_=new u(m,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=L0,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=m,_.state=o.memoizedState,_.refs={},rt(o),M=u.contextType,_.context=typeof M=="object"&&M!==null?Ii(M):ji,_.state=o.memoizedState,M=u.getDerivedStateFromProps,typeof M=="function"&&(R0(o,u,M,m),_.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(M=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),M!==_.state&&L0.enqueueReplaceState(_,_.state,null),Gr(o,m,_,y),cr(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(s===null){_=o.stateNode;var K=o.memoizedProps,ge=Vu(u,K);_.props=ge;var ke=_.context,$e=u.contextType;M=ji,typeof $e=="object"&&$e!==null&&(M=Ii($e));var Ke=u.getDerivedStateFromProps;$e=typeof Ke=="function"||typeof _.getSnapshotBeforeUpdate=="function",K=o.pendingProps!==K,$e||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(K||ke!==M)&&u2(o,_,m,M),dt=!1;var Me=o.memoizedState;_.state=Me,Gr(o,m,_,y),cr(),ke=o.memoizedState,K||Me!==ke||dt?(typeof Ke=="function"&&(R0(o,u,Ke,m),ke=o.memoizedState),(ge=dt||c2(o,u,ge,m,Me,ke,M))?($e||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=ke),_.props=m,_.state=ke,_.context=M,m=ge):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{_=o.stateNode,wr(s,o),M=o.memoizedProps,$e=Vu(u,M),_.props=$e,Ke=o.pendingProps,Me=_.context,ke=u.contextType,ge=ji,typeof ke=="object"&&ke!==null&&(ge=Ii(ke)),K=u.getDerivedStateFromProps,(ke=typeof K=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(M!==Ke||Me!==ge)&&u2(o,_,m,ge),dt=!1,Me=o.memoizedState,_.state=Me,Gr(o,m,_,y),cr();var Oe=o.memoizedState;M!==Ke||Me!==Oe||dt||s!==null&&s.dependencies!==null&&Nd(s.dependencies)?(typeof K=="function"&&(R0(o,u,K,m),Oe=o.memoizedState),($e=dt||c2(o,u,$e,m,Me,Oe,ge)||s!==null&&s.dependencies!==null&&Nd(s.dependencies))?(ke||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,Oe,ge),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,Oe,ge)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||M===s.memoizedProps&&Me===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&Me===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Oe),_.props=m,_.state=Oe,_.context=ge,m=$e):(typeof _.componentDidUpdate!="function"||M===s.memoizedProps&&Me===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&Me===s.memoizedState||(o.flags|=1024),m=!1)}return _=m,Um(s,o),m=(o.flags&128)!==0,_||m?(_=o.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,s!==null&&m?(o.child=gr(o,s.child,null,y),o.child=gr(o,null,u,y)):us(s,o,u,y),o.memoizedState=_.state,s=o.child):s=Hl(s,o,y),s}function S2(s,o,u,m){return ql(),o.flags|=256,us(s,o,u,m),o.child}var M0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function O0(s){return{baseLanes:s,cachePool:le()}}function F0(s,o,u){return s=s!==null?s.childLanes&~u:0,o&&(s|=ja),s}function E2(s,o,u){var m=o.pendingProps,y=!1,_=(o.flags&128)!==0,M;if((M=_)||(M=s!==null&&s.memoizedState===null?!1:(jn.current&2)!==0),M&&(y=!0,o.flags&=-129),M=(o.flags&32)!==0,o.flags&=-33,s===null){if(vn){if(y?Vr(o):Kr(),(s=pr)?(s=Pb(s,Tr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Jo!==null?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},u=yd(s),u.return=o,o.child=u,Ti=o,pr=null)):s=null,s===null)throw Zo(o);return b1(s)?o.lanes=32:o.lanes=536870912,null}var K=m.children;return m=m.fallback,y?(Kr(),y=o.mode,K=Bm({mode:"hidden",children:K},y),m=Xo(m,y,u,null),K.return=o,m.return=o,K.sibling=m,o.child=K,m=o.child,m.memoizedState=O0(u),m.childLanes=F0(s,M,u),o.memoizedState=M0,tf(null,m)):(Vr(o),q0(o,K))}var ge=s.memoizedState;if(ge!==null&&(K=ge.dehydrated,K!==null)){if(_)o.flags&256?(Vr(o),o.flags&=-257,o=V0(s,o,u)):o.memoizedState!==null?(Kr(),o.child=s.child,o.flags|=128,o=null):(Kr(),K=m.fallback,y=o.mode,m=Bm({mode:"visible",children:m.children},y),K=Xo(K,y,u,null),K.flags|=2,m.return=o,K.return=o,m.sibling=K,o.child=m,gr(o,s.child,null,u),m=o.child,m.memoizedState=O0(u),m.childLanes=F0(s,M,u),o.memoizedState=M0,o=tf(null,m));else if(Vr(o),b1(K)){if(M=K.nextSibling&&K.nextSibling.dataset,M)var ke=M.dgst;M=ke,m=Error(r(419)),m.stack="",m.digest=M,Tc({value:m,source:null,stack:null}),o=V0(s,o,u)}else if(pi||nl(s,o,u,!1),M=(u&s.childLanes)!==0,pi||M){if(M=vr,M!==null&&(m=Oi(M,u),m!==0&&m!==ge.retryLane))throw ge.retryLane=m,Ao(s,m),ua(M,s,m),P0;x1(K)||Xm(),o=V0(s,o,u)}else x1(K)?(o.flags|=192,o.child=s.child,o=null):(s=ge.treeContext,pr=to(K.nextSibling),Ti=o,vn=!0,ls=null,Tr=!1,s!==null&&Im(o,s),o=q0(o,m.children),o.flags|=4096);return o}return y?(Kr(),K=m.fallback,y=o.mode,ge=s.child,ke=ge.sibling,m=Js(ge,{mode:"hidden",children:m.children}),m.subtreeFlags=ge.subtreeFlags&65011712,ke!==null?K=Js(ke,K):(K=Xo(K,y,u,null),K.flags|=2),K.return=o,m.return=o,m.sibling=K,o.child=m,tf(null,m),m=o.child,K=s.child.memoizedState,K===null?K=O0(u):(y=K.cachePool,y!==null?(ge=qr._currentValue,y=y.parent!==ge?{parent:ge,pool:ge}:y):y=le(),K={baseLanes:K.baseLanes|u,cachePool:y}),m.memoizedState=K,m.childLanes=F0(s,M,u),o.memoizedState=M0,tf(s.child,m)):(Vr(o),u=s.child,s=u.sibling,u=Js(u,{mode:"visible",children:m.children}),u.return=o,u.sibling=null,s!==null&&(M=o.deletions,M===null?(o.deletions=[s],o.flags|=16):M.push(s)),o.child=u,o.memoizedState=null,u)}function q0(s,o){return o=Bm({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Bm(s,o){return s=$i(22,s,null,o),s.lanes=0,s}function V0(s,o,u){return gr(o,s.child,null,u),s=q0(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function j2(s,o,u){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),Cc(s.return,o,u)}function U0(s,o,u,m,y,_){var M=s.memoizedState;M===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:y,treeForkCount:_}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=m,M.tail=u,M.tailMode=y,M.treeForkCount=_)}function T2(s,o,u){var m=o.pendingProps,y=m.revealOrder,_=m.tail;m=m.children;var M=jn.current,K=(M&2)!==0;if(K?(M=M&1|2,o.flags|=128):M&=1,J(jn,M),us(s,o,m,u),m=vn?Du:0,!K&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&j2(s,u,o);else if(s.tag===19)j2(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(u=o.child,y=null;u!==null;)s=u.alternate,s!==null&&Wi(s)===null&&(y=u),u=u.sibling;u=y,u===null?(y=o.child,o.child=null):(y=u.sibling,u.sibling=null),U0(o,!1,y,u,_,m);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=o.child,o.child=null;y!==null;){if(s=y.alternate,s!==null&&Wi(s)===null){o.child=y;break}s=y.sibling,y.sibling=u,u=y,y=s}U0(o,!0,u,null,_,m);break;case"together":U0(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function Hl(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Oc|=o.lanes,(u&o.childLanes)===0)if(s!==null){if(nl(s,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(r(153));if(o.child!==null){for(s=o.child,u=Js(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Js(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function B0(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Nd(s)))}function GE(s,o,u){switch(o.tag){case 3:Pe(o,o.stateNode.containerInfo),tl(o,qr,s.memoizedState.cache),ql();break;case 27:case 5:Ue(o);break;case 4:Pe(o,o.stateNode.containerInfo);break;case 10:tl(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Gn(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Vr(o),o.flags|=128,null):(u&o.child.childLanes)!==0?E2(s,o,u):(Vr(o),s=Hl(s,o,u),s!==null?s.sibling:null);Vr(o);break;case 19:var y=(s.flags&128)!==0;if(m=(u&o.childLanes)!==0,m||(nl(s,o,u,!1),m=(u&o.childLanes)!==0),y){if(m)return T2(s,o,u);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),J(jn,jn.current),m)break;return null;case 22:return o.lanes=0,b2(s,o,u,o.pendingProps);case 24:tl(o,qr,s.memoizedState.cache)}return Hl(s,o,u)}function C2(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps)pi=!0;else{if(!B0(s,u)&&(o.flags&128)===0)return pi=!1,GE(s,o,u);pi=(s.flags&131072)!==0}else pi=!1,vn&&(o.flags&1048576)!==0&&Cm(o,Du,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(s=Ce(o.elementType),o.type=s,typeof s=="function")vd(s)?(m=Vu(s,m),o.tag=1,o=A2(null,o,s,m,u)):(o.tag=0,o=D0(null,o,s,m,u));else{if(s!=null){var y=s.$$typeof;if(y===z){o.tag=11,o=v2(null,o,s,m,u);break e}else if(y===V){o.tag=14,o=y2(null,o,s,m,u);break e}}throw o=se(s)||s,Error(r(306,o,""))}}return o;case 0:return D0(s,o,o.type,o.pendingProps,u);case 1:return m=o.type,y=Vu(m,o.pendingProps),A2(s,o,m,y,u);case 3:e:{if(Pe(o,o.stateNode.containerInfo),s===null)throw Error(r(387));m=o.pendingProps;var _=o.memoizedState;y=_.element,wr(s,o),Gr(o,m,null,u);var M=o.memoizedState;if(m=M.cache,tl(o,qr,m),m!==_.cache&&Vl(o,[qr],u,!0),cr(),m=M.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:M.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=S2(s,o,m,u);break e}else if(m!==y){y=Zs(Error(r(424)),o),Tc(y),o=S2(s,o,m,u);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(pr=to(s.firstChild),Ti=o,vn=!0,ls=null,Tr=!0,u=sn(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ql(),m===y){o=Hl(s,o,u);break e}us(s,o,m,u)}o=o.child}return o;case 26:return Um(s,o),s===null?(u=Vb(o.type,null,o.pendingProps,null))?o.memoizedState=u:vn||(u=o.type,s=o.pendingProps,m=ip(pe.current).createElement(u),m[qn]=o,m[Qn]=s,ds(m,u,s),br(m),o.stateNode=m):o.memoizedState=Vb(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Ue(o),s===null&&vn&&(m=o.stateNode=Ob(o.type,o.pendingProps,pe.current),Ti=o,Tr=!0,y=pr,Bc(o.type)?(w1=y,pr=to(m.firstChild)):pr=y),us(s,o,o.pendingProps.children,u),Um(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&vn&&((y=m=pr)&&(m=_6(m,o.type,o.pendingProps,Tr),m!==null?(o.stateNode=m,Ti=o,pr=to(m.firstChild),Tr=!1,y=!0):y=!1),y||Zo(o)),Ue(o),y=o.type,_=o.pendingProps,M=s!==null?s.memoizedProps:null,m=_.children,g1(y,_)?m=null:M!==null&&g1(y,M)&&(o.flags|=32),o.memoizedState!==null&&(y=Gh(s,o,N0,null,null,u),vf._currentValue=y),Um(s,o),us(s,o,m,u),o.child;case 6:return s===null&&vn&&((s=u=pr)&&(u=N6(u,o.pendingProps,Tr),u!==null?(o.stateNode=u,Ti=o,pr=null,s=!0):s=!1),s||Zo(o)),null;case 13:return E2(s,o,u);case 4:return Pe(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=gr(o,null,m,u):us(s,o,m,u),o.child;case 11:return v2(s,o,o.type,o.pendingProps,u);case 7:return us(s,o,o.pendingProps,u),o.child;case 8:return us(s,o,o.pendingProps.children,u),o.child;case 12:return us(s,o,o.pendingProps.children,u),o.child;case 10:return m=o.pendingProps,tl(o,o.type,m.value),us(s,o,m.children,u),o.child;case 9:return y=o.type._context,m=o.pendingProps.children,rl(o),y=Ii(y),m=m(y),o.flags|=1,us(s,o,m,u),o.child;case 14:return y2(s,o,o.type,o.pendingProps,u);case 15:return x2(s,o,o.type,o.pendingProps,u);case 19:return T2(s,o,u);case 31:return $E(s,o,u);case 22:return b2(s,o,u,o.pendingProps);case 24:return rl(o),m=Ii(qr),s===null?(y=Z(),y===null&&(y=vr,_=Ic(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=u),y=_),o.memoizedState={parent:m,cache:y},rt(o),tl(o,qr,y)):((s.lanes&u)!==0&&(wr(s,o),Gr(o,null,null,u),cr()),y=s.memoizedState,_=o.memoizedState,y.parent!==m?(y={parent:m,cache:m},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),tl(o,qr,m)):(m=_.cache,tl(o,qr,m),m!==y.cache&&Vl(o,[qr],u,!0))),us(s,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function $l(s){s.flags|=4}function z0(s,o,u,m,y){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(nb())s.flags|=8192;else throw qe=_e,Ie}else s.flags&=-16777217}function I2(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!$b(o))if(nb())s.flags|=8192;else throw qe=_e,Ie}function zm(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Hs():536870912,s.lanes|=o,Fd|=o)}function nf(s,o){if(!vn)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Ar(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,m=0;if(o)for(var y=s.child;y!==null;)u|=y.lanes|y.childLanes,m|=y.subtreeFlags&65011712,m|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)u|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=m,s.childLanes=u,o}function WE(s,o,u){var m=o.pendingProps;switch(wd(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(o),null;case 1:return Ar(o),null;case 3:return u=o.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),ia(qr),Re(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Ci(o)?$l(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Hh())),Ar(o),null;case 26:var y=o.type,_=o.memoizedState;return s===null?($l(o),_!==null?(Ar(o),I2(o,_)):(Ar(o),z0(o,y,null,m,u))):_?_!==s.memoizedState?($l(o),Ar(o),I2(o,_)):(Ar(o),o.flags&=-16777217):(s=s.memoizedProps,s!==m&&$l(o),Ar(o),z0(o,y,s,m,u)),null;case 27:if(et(o),u=pe.current,y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&$l(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return Ar(o),null}s=re.current,Ci(o)?zh(o):(s=Ob(y,m,u),o.stateNode=s,$l(o))}return Ar(o),null;case 5:if(et(o),y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&$l(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return Ar(o),null}if(_=re.current,Ci(o))zh(o);else{var M=ip(pe.current);switch(_){case 1:_=M.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=M.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=M.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=M.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=M.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof m.is=="string"?M.createElement("select",{is:m.is}):M.createElement("select"),m.multiple?_.multiple=!0:m.size&&(_.size=m.size);break;default:_=typeof m.is=="string"?M.createElement(y,{is:m.is}):M.createElement(y)}}_[qn]=o,_[Qn]=m;e:for(M=o.child;M!==null;){if(M.tag===5||M.tag===6)_.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===o)break e;for(;M.sibling===null;){if(M.return===null||M.return===o)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}o.stateNode=_;e:switch(ds(_,y,m),y){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&$l(o)}}return Ar(o),z0(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,u),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==m&&$l(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(r(166));if(s=pe.current,Ci(o)){if(s=o.stateNode,u=o.memoizedProps,m=null,y=Ti,y!==null)switch(y.tag){case 27:case 5:m=y.memoizedProps}s[qn]=o,s=!!(s.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||Eb(s.nodeValue,u)),s||Zo(o,!0)}else s=ip(s).createTextNode(m),s[qn]=o,o.stateNode=s}return Ar(o),null;case 31:if(u=o.memoizedState,s===null||s.memoizedState!==null){if(m=Ci(o),u!==null){if(s===null){if(!m)throw Error(r(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[qn]=o}else ql(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ar(o),s=!1}else u=Hh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return o.flags&256?(Jn(o),o):(Jn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Ar(o),null;case 13:if(m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Ci(o),m!==null&&m.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[qn]=o}else ql(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ar(o),y=!1}else y=Hh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Jn(o),o):(Jn(o),null)}return Jn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=m!==null,s=s!==null&&s.memoizedState!==null,u&&(m=o.child,y=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(y=m.alternate.memoizedState.cachePool.pool),_=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==y&&(m.flags|=2048)),u!==s&&u&&(o.child.flags|=8192),zm(o,o.updateQueue),Ar(o),null);case 4:return Re(),s===null&&d1(o.stateNode.containerInfo),Ar(o),null;case 10:return ia(o.type),Ar(o),null;case 19:if(q(jn),m=o.memoizedState,m===null)return Ar(o),null;if(y=(o.flags&128)!==0,_=m.rendering,_===null)if(y)nf(m,!1);else{if(Xr!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(_=Wi(s),_!==null){for(o.flags|=128,nf(m,!1),s=_.updateQueue,o.updateQueue=s,zm(o,s),o.subtreeFlags=0,s=u,u=o.child;u!==null;)ku(u,s),u=u.sibling;return J(jn,jn.current&1|2),vn&&Vs(o,m.treeForkCount),o.child}s=s.sibling}m.tail!==null&&Jt()>Ym&&(o.flags|=128,y=!0,nf(m,!1),o.lanes=4194304)}else{if(!y)if(s=Wi(_),s!==null){if(o.flags|=128,y=!0,s=s.updateQueue,o.updateQueue=s,zm(o,s),nf(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!vn)return Ar(o),null}else 2*Jt()-m.renderingStartTime>Ym&&u!==536870912&&(o.flags|=128,y=!0,nf(m,!1),o.lanes=4194304);m.isBackwards?(_.sibling=o.child,o.child=_):(s=m.last,s!==null?s.sibling=_:o.child=_,m.last=_)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Jt(),s.sibling=null,u=jn.current,J(jn,y?u&1|2:u&1),vn&&Vs(o,m.treeForkCount),s):(Ar(o),null);case 22:case 23:return Jn(o),ii(),m=o.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(u&536870912)!==0&&(o.flags&128)===0&&(Ar(o),o.subtreeFlags&6&&(o.flags|=8192)):Ar(o),u=o.updateQueue,u!==null&&zm(o,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048),s!==null&&q(Y),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ia(qr),Ar(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function YE(s,o){switch(wd(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return ia(qr),Re(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return et(o),null;case 31:if(o.memoizedState!==null){if(Jn(o),o.alternate===null)throw Error(r(340));ql()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(Jn(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(r(340));ql()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return q(jn),null;case 4:return Re(),null;case 10:return ia(o.type),null;case 22:case 23:return Jn(o),ii(),s!==null&&q(Y),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return ia(qr),null;case 25:return null;default:return null}}function R2(s,o){switch(wd(o),o.tag){case 3:ia(qr),Re();break;case 26:case 27:case 5:et(o);break;case 4:Re();break;case 31:o.memoizedState!==null&&Jn(o);break;case 13:Jn(o);break;case 19:q(jn);break;case 10:ia(o.type);break;case 22:case 23:Jn(o),ii(),s!==null&&q(Y);break;case 24:ia(qr)}}function rf(s,o){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&s)===s){m=void 0;var _=u.create,M=u.inst;m=_(),M.destroy=m}u=u.next}while(u!==y)}}catch(K){er(o,o.return,K)}}function Dc(s,o,u){try{var m=o.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var _=y.next;m=_;do{if((m.tag&s)===s){var M=m.inst,K=M.destroy;if(K!==void 0){M.destroy=void 0,y=o;var ge=u,ke=K;try{ke()}catch($e){er(y,ge,$e)}}}m=m.next}while(m!==_)}}catch($e){er(o,o.return,$e)}}function L2(s){var o=s.updateQueue;if(o!==null){var u=s.stateNode;try{Wr(o,u)}catch(m){er(s,s.return,m)}}}function k2(s,o,u){u.props=Vu(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(m){er(s,o,m)}}function sf(s,o){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof u=="function"?s.refCleanup=u(m):u.current=m}}catch(y){er(s,o,y)}}function ll(s,o){var u=s.ref,m=s.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(y){er(s,o,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){er(s,o,y)}else u.current=null}function P2(s){var o=s.type,u=s.memoizedProps,m=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break e;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(y){er(s,s.return,y)}}function H0(s,o,u){try{var m=s.stateNode;g6(m,s.type,u,o),m[Qn]=o}catch(y){er(s,s.return,y)}}function D2(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Bc(s.type)||s.tag===4}function $0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||D2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Bc(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function G0(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(s),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ks));else if(m!==4&&(m===27&&Bc(s.type)&&(u=s.stateNode,o=null),s=s.child,s!==null))for(G0(s,o,u),s=s.sibling;s!==null;)G0(s,o,u),s=s.sibling}function Hm(s,o,u){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(m!==4&&(m===27&&Bc(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Hm(s,o,u),s=s.sibling;s!==null;)Hm(s,o,u),s=s.sibling}function M2(s){var o=s.stateNode,u=s.memoizedProps;try{for(var m=s.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);ds(o,m,u),o[qn]=s,o[Qn]=u}catch(_){er(s,s.return,_)}}var Gl=!1,gi=!1,W0=!1,O2=typeof WeakSet=="function"?WeakSet:Set,Yi=null;function KE(s,o){if(s=s.containerInfo,m1=dp,s=_o(s),Qa(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var y=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var M=0,K=-1,ge=-1,ke=0,$e=0,Ke=s,Me=null;t:for(;;){for(var Oe;Ke!==u||y!==0&&Ke.nodeType!==3||(K=M+y),Ke!==_||m!==0&&Ke.nodeType!==3||(ge=M+m),Ke.nodeType===3&&(M+=Ke.nodeValue.length),(Oe=Ke.firstChild)!==null;)Me=Ke,Ke=Oe;for(;;){if(Ke===s)break t;if(Me===u&&++ke===y&&(K=M),Me===_&&++$e===m&&(ge=M),(Oe=Ke.nextSibling)!==null)break;Ke=Me,Me=Ke.parentNode}Ke=Oe}u=K===-1||ge===-1?null:{start:K,end:ge}}else u=null}u=u||{start:0,end:0}}else u=null;for(p1={focusedElem:s,selectionRange:u},dp=!1,Yi=o;Yi!==null;)if(o=Yi,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Yi=s;else for(;Yi!==null;){switch(o=Yi,_=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)y=s[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,u=o,y=_.memoizedProps,_=_.memoizedState,m=u.stateNode;try{var pt=Vu(u.type,y);s=m.getSnapshotBeforeUpdate(pt,_),m.__reactInternalSnapshotBeforeUpdate=s}catch(Ht){er(u,u.return,Ht)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,u=s.nodeType,u===9)y1(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":y1(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=o.sibling,s!==null){s.return=o.return,Yi=s;break}Yi=o.return}}function F2(s,o,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:Yl(s,u),m&4&&rf(5,u);break;case 1:if(Yl(s,u),m&4)if(s=u.stateNode,o===null)try{s.componentDidMount()}catch(M){er(u,u.return,M)}else{var y=Vu(u.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(y,o,s.__reactInternalSnapshotBeforeUpdate)}catch(M){er(u,u.return,M)}}m&64&&L2(u),m&512&&sf(u,u.return);break;case 3:if(Yl(s,u),m&64&&(s=u.updateQueue,s!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{Wr(s,o)}catch(M){er(u,u.return,M)}}break;case 27:o===null&&m&4&&M2(u);case 26:case 5:Yl(s,u),o===null&&m&4&&P2(u),m&512&&sf(u,u.return);break;case 12:Yl(s,u);break;case 31:Yl(s,u),m&4&&U2(s,u);break;case 13:Yl(s,u),m&4&&B2(s,u),m&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=i6.bind(null,u),A6(s,u))));break;case 22:if(m=u.memoizedState!==null||Gl,!m){o=o!==null&&o.memoizedState!==null||gi,y=Gl;var _=gi;Gl=m,(gi=o)&&!_?Kl(s,u,(u.subtreeFlags&8772)!==0):Yl(s,u),Gl=y,gi=_}break;case 30:break;default:Yl(s,u)}}function q2(s){var o=s.alternate;o!==null&&(s.alternate=null,q2(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&ga(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Rr=null,aa=!1;function Wl(s,o,u){for(u=u.child;u!==null;)V2(s,o,u),u=u.sibling}function V2(s,o,u){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(nn,u)}catch{}switch(u.tag){case 26:gi||ll(u,o),Wl(s,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:gi||ll(u,o);var m=Rr,y=aa;Bc(u.type)&&(Rr=u.stateNode,aa=!1),Wl(s,o,u),mf(u.stateNode),Rr=m,aa=y;break;case 5:gi||ll(u,o);case 6:if(m=Rr,y=aa,Rr=null,Wl(s,o,u),Rr=m,aa=y,Rr!==null)if(aa)try{(Rr.nodeType===9?Rr.body:Rr.nodeName==="HTML"?Rr.ownerDocument.body:Rr).removeChild(u.stateNode)}catch(_){er(u,o,_)}else try{Rr.removeChild(u.stateNode)}catch(_){er(u,o,_)}break;case 18:Rr!==null&&(aa?(s=Rr,Lb(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Gd(s)):Lb(Rr,u.stateNode));break;case 4:m=Rr,y=aa,Rr=u.stateNode.containerInfo,aa=!0,Wl(s,o,u),Rr=m,aa=y;break;case 0:case 11:case 14:case 15:Dc(2,u,o),gi||Dc(4,u,o),Wl(s,o,u);break;case 1:gi||(ll(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"&&k2(u,o,m)),Wl(s,o,u);break;case 21:Wl(s,o,u);break;case 22:gi=(m=gi)||u.memoizedState!==null,Wl(s,o,u),gi=m;break;default:Wl(s,o,u)}}function U2(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Gd(s)}catch(u){er(o,o.return,u)}}}function B2(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Gd(s)}catch(u){er(o,o.return,u)}}function QE(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new O2),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new O2),o;default:throw Error(r(435,s.tag))}}function $m(s,o){var u=QE(s);o.forEach(function(m){if(!u.has(m)){u.add(m);var y=s6.bind(null,s,m);m.then(y,y)}})}function oa(s,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var y=u[m],_=s,M=o,K=M;e:for(;K!==null;){switch(K.tag){case 27:if(Bc(K.type)){Rr=K.stateNode,aa=!1;break e}break;case 5:Rr=K.stateNode,aa=!1;break e;case 3:case 4:Rr=K.stateNode.containerInfo,aa=!0;break e}K=K.return}if(Rr===null)throw Error(r(160));V2(_,M,y),Rr=null,aa=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)z2(o,s),o=o.sibling}var Io=null;function z2(s,o){var u=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:oa(o,s),la(s),m&4&&(Dc(3,s,s.return),rf(3,s),Dc(5,s,s.return));break;case 1:oa(o,s),la(s),m&512&&(gi||u===null||ll(u,u.return)),m&64&&Gl&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var y=Io;if(oa(o,s),la(s),m&512&&(gi||u===null||ll(u,u.return)),m&4){var _=u!==null?u.memoizedState:null;if(m=s.memoizedState,u===null)if(m===null)if(s.stateNode===null){e:{m=s.type,u=s.memoizedProps,y=y.ownerDocument||y;t:switch(m){case"title":_=y.getElementsByTagName("title")[0],(!_||_[qi]||_[qn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(m),y.head.insertBefore(_,y.querySelector("head > title"))),ds(_,m,u),_[qn]=s,br(_),m=_;break e;case"link":var M=zb("link","href",y).get(m+(u.href||""));if(M){for(var K=0;K<M.length;K++)if(_=M[K],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){M.splice(K,1);break t}}_=y.createElement(m),ds(_,m,u),y.head.appendChild(_);break;case"meta":if(M=zb("meta","content",y).get(m+(u.content||""))){for(K=0;K<M.length;K++)if(_=M[K],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){M.splice(K,1);break t}}_=y.createElement(m),ds(_,m,u),y.head.appendChild(_);break;default:throw Error(r(468,m))}_[qn]=s,br(_),m=_}s.stateNode=m}else Hb(y,s.type,s.stateNode);else s.stateNode=Bb(y,m,s.memoizedProps);else _!==m?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,m===null?Hb(y,s.type,s.stateNode):Bb(y,m,s.memoizedProps)):m===null&&s.stateNode!==null&&H0(s,s.memoizedProps,u.memoizedProps)}break;case 27:oa(o,s),la(s),m&512&&(gi||u===null||ll(u,u.return)),u!==null&&m&4&&H0(s,s.memoizedProps,u.memoizedProps);break;case 5:if(oa(o,s),la(s),m&512&&(gi||u===null||ll(u,u.return)),s.flags&32){y=s.stateNode;try{ti(y,"")}catch(pt){er(s,s.return,pt)}}m&4&&s.stateNode!=null&&(y=s.memoizedProps,H0(s,y,u!==null?u.memoizedProps:y)),m&1024&&(W0=!0);break;case 6:if(oa(o,s),la(s),m&4){if(s.stateNode===null)throw Error(r(162));m=s.memoizedProps,u=s.stateNode;try{u.nodeValue=m}catch(pt){er(s,s.return,pt)}}break;case 3:if(op=null,y=Io,Io=sp(o.containerInfo),oa(o,s),Io=y,la(s),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Gd(o.containerInfo)}catch(pt){er(s,s.return,pt)}W0&&(W0=!1,H2(s));break;case 4:m=Io,Io=sp(s.stateNode.containerInfo),oa(o,s),la(s),Io=m;break;case 12:oa(o,s),la(s);break;case 31:oa(o,s),la(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,$m(s,m)));break;case 13:oa(o,s),la(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Wm=Jt()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,$m(s,m)));break;case 22:y=s.memoizedState!==null;var ge=u!==null&&u.memoizedState!==null,ke=Gl,$e=gi;if(Gl=ke||y,gi=$e||ge,oa(o,s),gi=$e,Gl=ke,la(s),m&8192)e:for(o=s.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(u===null||ge||Gl||gi||Uu(s)),u=null,o=s;;){if(o.tag===5||o.tag===26){if(u===null){ge=u=o;try{if(_=ge.stateNode,y)M=_.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{K=ge.stateNode;var Ke=ge.memoizedProps.style,Me=Ke!=null&&Ke.hasOwnProperty("display")?Ke.display:null;K.style.display=Me==null||typeof Me=="boolean"?"":(""+Me).trim()}}catch(pt){er(ge,ge.return,pt)}}}else if(o.tag===6){if(u===null){ge=o;try{ge.stateNode.nodeValue=y?"":ge.memoizedProps}catch(pt){er(ge,ge.return,pt)}}}else if(o.tag===18){if(u===null){ge=o;try{var Oe=ge.stateNode;y?kb(Oe,!0):kb(ge.stateNode,!1)}catch(pt){er(ge,ge.return,pt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=s.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,$m(s,u))));break;case 19:oa(o,s),la(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,$m(s,m)));break;case 30:break;case 21:break;default:oa(o,s),la(s)}}function la(s){var o=s.flags;if(o&2){try{for(var u,m=s.return;m!==null;){if(D2(m)){u=m;break}m=m.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var y=u.stateNode,_=$0(s);Hm(s,_,y);break;case 5:var M=u.stateNode;u.flags&32&&(ti(M,""),u.flags&=-33);var K=$0(s);Hm(s,K,M);break;case 3:case 4:var ge=u.stateNode.containerInfo,ke=$0(s);G0(s,ke,ge);break;default:throw Error(r(161))}}catch($e){er(s,s.return,$e)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function H2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;H2(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Yl(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)F2(s,o.alternate,o),o=o.sibling}function Uu(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Dc(4,o,o.return),Uu(o);break;case 1:ll(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&k2(o,o.return,u),Uu(o);break;case 27:mf(o.stateNode);case 26:case 5:ll(o,o.return),Uu(o);break;case 22:o.memoizedState===null&&Uu(o);break;case 30:Uu(o);break;default:Uu(o)}s=s.sibling}}function Kl(s,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,y=s,_=o,M=_.flags;switch(_.tag){case 0:case 11:case 15:Kl(y,_,u),rf(4,_);break;case 1:if(Kl(y,_,u),m=_,y=m.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ke){er(m,m.return,ke)}if(m=_,y=m.updateQueue,y!==null){var K=m.stateNode;try{var ge=y.shared.hiddenCallbacks;if(ge!==null)for(y.shared.hiddenCallbacks=null,y=0;y<ge.length;y++)Gi(ge[y],K)}catch(ke){er(m,m.return,ke)}}u&&M&64&&L2(_),sf(_,_.return);break;case 27:M2(_);case 26:case 5:Kl(y,_,u),u&&m===null&&M&4&&P2(_),sf(_,_.return);break;case 12:Kl(y,_,u);break;case 31:Kl(y,_,u),u&&M&4&&U2(y,_);break;case 13:Kl(y,_,u),u&&M&4&&B2(y,_);break;case 22:_.memoizedState===null&&Kl(y,_,u),sf(_,_.return);break;case 30:break;default:Kl(y,_,u)}o=o.sibling}}function Y0(s,o){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Mu(u))}function K0(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Mu(s))}function Ro(s,o,u,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)$2(s,o,u,m),o=o.sibling}function $2(s,o,u,m){var y=o.flags;switch(o.tag){case 0:case 11:case 15:Ro(s,o,u,m),y&2048&&rf(9,o);break;case 1:Ro(s,o,u,m);break;case 3:Ro(s,o,u,m),y&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Mu(s)));break;case 12:if(y&2048){Ro(s,o,u,m),s=o.stateNode;try{var _=o.memoizedProps,M=_.id,K=_.onPostCommit;typeof K=="function"&&K(M,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ge){er(o,o.return,ge)}}else Ro(s,o,u,m);break;case 31:Ro(s,o,u,m);break;case 13:Ro(s,o,u,m);break;case 23:break;case 22:_=o.stateNode,M=o.alternate,o.memoizedState!==null?_._visibility&2?Ro(s,o,u,m):af(s,o):_._visibility&2?Ro(s,o,u,m):(_._visibility|=2,Dd(s,o,u,m,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Y0(M,o);break;case 24:Ro(s,o,u,m),y&2048&&K0(o.alternate,o);break;default:Ro(s,o,u,m)}}function Dd(s,o,u,m,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=s,M=o,K=u,ge=m,ke=M.flags;switch(M.tag){case 0:case 11:case 15:Dd(_,M,K,ge,y),rf(8,M);break;case 23:break;case 22:var $e=M.stateNode;M.memoizedState!==null?$e._visibility&2?Dd(_,M,K,ge,y):af(_,M):($e._visibility|=2,Dd(_,M,K,ge,y)),y&&ke&2048&&Y0(M.alternate,M);break;case 24:Dd(_,M,K,ge,y),y&&ke&2048&&K0(M.alternate,M);break;default:Dd(_,M,K,ge,y)}o=o.sibling}}function af(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=s,m=o,y=m.flags;switch(m.tag){case 22:af(u,m),y&2048&&Y0(m.alternate,m);break;case 24:af(u,m),y&2048&&K0(m.alternate,m);break;default:af(u,m)}o=o.sibling}}var of=8192;function Md(s,o,u){if(s.subtreeFlags&of)for(s=s.child;s!==null;)G2(s,o,u),s=s.sibling}function G2(s,o,u){switch(s.tag){case 26:Md(s,o,u),s.flags&of&&s.memoizedState!==null&&M6(u,Io,s.memoizedState,s.memoizedProps);break;case 5:Md(s,o,u);break;case 3:case 4:var m=Io;Io=sp(s.stateNode.containerInfo),Md(s,o,u),Io=m;break;case 22:s.memoizedState===null&&(m=s.alternate,m!==null&&m.memoizedState!==null?(m=of,of=16777216,Md(s,o,u),of=m):Md(s,o,u));break;default:Md(s,o,u)}}function W2(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function lf(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Yi=m,K2(m,s)}W2(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Y2(s),s=s.sibling}function Y2(s){switch(s.tag){case 0:case 11:case 15:lf(s),s.flags&2048&&Dc(9,s,s.return);break;case 3:lf(s);break;case 12:lf(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Gm(s)):lf(s);break;default:lf(s)}}function Gm(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Yi=m,K2(m,s)}W2(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Dc(8,o,o.return),Gm(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Gm(o));break;default:Gm(o)}s=s.sibling}}function K2(s,o){for(;Yi!==null;){var u=Yi;switch(u.tag){case 0:case 11:case 15:Dc(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Mu(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,Yi=m;else e:for(u=s;Yi!==null;){m=Yi;var y=m.sibling,_=m.return;if(q2(m),m===u){Yi=null;break e}if(y!==null){y.return=_,Yi=y;break e}Yi=_}}}var XE={getCacheForType:function(s){var o=Ii(qr),u=o.data.get(s);return u===void 0&&(u=s(),o.data.set(s,u)),u},cacheSignal:function(){return Ii(qr).controller.signal}},JE=typeof WeakMap=="function"?WeakMap:Map,Wn=0,vr=null,yn=null,wn=0,Zn=0,Ea=null,Mc=!1,Od=!1,Q0=!1,Ql=0,Xr=0,Oc=0,Bu=0,X0=0,ja=0,Fd=0,cf=null,ca=null,J0=!1,Wm=0,Q2=0,Ym=1/0,Km=null,Fc=null,Li=0,qc=null,qd=null,Xl=0,Z0=0,e1=null,X2=null,uf=0,t1=null;function Ta(){return(Wn&2)!==0&&wn!==0?wn&-wn:Q.T!==null?o1():zr()}function J2(){if(ja===0)if((wn&536870912)===0||vn){var s=Fn;Fn<<=1,(Fn&3932160)===0&&(Fn=262144),ja=s}else ja=536870912;return s=Nr.current,s!==null&&(s.flags|=32),ja}function ua(s,o,u){(s===vr&&(Zn===2||Zn===9)||s.cancelPendingCommit!==null)&&(Vd(s,0),Vc(s,wn,ja,!1)),Tt(s,u),((Wn&2)===0||s!==vr)&&(s===vr&&((Wn&2)===0&&(Bu|=u),Xr===4&&Vc(s,wn,ja,!1)),cl(s))}function Z2(s,o,u){if((Wn&6)!==0)throw Error(r(327));var m=!u&&(o&127)===0&&(o&s.expiredLanes)===0||bi(s,o),y=m?t6(s,o):r1(s,o,!0),_=m;do{if(y===0){Od&&!m&&Vc(s,o,0,!1);break}else{if(u=s.current.alternate,_&&!ZE(u)){y=r1(s,o,!1),_=!1;continue}if(y===2){if(_=o,s.errorRecoveryDisabledLanes&_)var M=0;else M=s.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){o=M;e:{var K=s;y=cf;var ge=K.current.memoizedState.isDehydrated;if(ge&&(Vd(K,M).flags|=256),M=r1(K,M,!1),M!==2){if(Q0&&!ge){K.errorRecoveryDisabledLanes|=_,Bu|=_,y=4;break e}_=ca,ca=y,_!==null&&(ca===null?ca=_:ca.push.apply(ca,_))}y=M}if(_=!1,y!==2)continue}}if(y===1){Vd(s,0),Vc(s,o,0,!0);break}e:{switch(m=s,_=y,_){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Vc(m,o,ja,!Mc);break e;case 2:ca=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(y=Wm+300-Jt(),10<y)){if(Vc(m,o,ja,!Mc),un(m,0,!0)!==0)break e;Xl=o,m.timeoutHandle=Ib(eb.bind(null,m,u,ca,Km,J0,o,ja,Bu,Fd,Mc,_,"Throttled",-0,0),y);break e}eb(m,u,ca,Km,J0,o,ja,Bu,Fd,Mc,_,null,-0,0)}}break}while(!0);cl(s)}function eb(s,o,u,m,y,_,M,K,ge,ke,$e,Ke,Me,Oe){if(s.timeoutHandle=-1,Ke=o.subtreeFlags,Ke&8192||(Ke&16785408)===16785408){Ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ks},G2(o,_,Ke);var pt=(_&62914560)===_?Wm-Jt():(_&4194048)===_?Q2-Jt():0;if(pt=O6(Ke,pt),pt!==null){Xl=_,s.cancelPendingCommit=pt(lb.bind(null,s,o,_,u,m,y,M,K,ge,$e,Ke,null,Me,Oe)),Vc(s,_,M,!ke);return}}lb(s,o,_,u,m,y,M,K,ge)}function ZE(s){for(var o=s;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var y=u[m],_=y.getSnapshot;y=y.value;try{if(!Ei(_(),y))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Vc(s,o,u,m){o&=~X0,o&=~Bu,s.suspendedLanes|=o,s.pingedLanes&=~o,m&&(s.warmLanes|=o),m=s.expirationTimes;for(var y=o;0<y;){var _=31-Zt(y),M=1<<_;m[_]=-1,y&=~M}u!==0&&Ji(s,u,o)}function Qm(){return(Wn&6)===0?(df(0),!1):!0}function n1(){if(yn!==null){if(Zn===0)var s=yn.return;else s=yn,Ja=el=null,Td(s),Qe=null,vt=0,s=yn;for(;s!==null;)R2(s.alternate,s),s=s.return;yn=null}}function Vd(s,o){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,x6(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Xl=0,n1(),vr=s,yn=u=Js(s.current,null),wn=o,Zn=0,Ea=null,Mc=!1,Od=bi(s,o),Q0=!1,Fd=ja=X0=Bu=Oc=Xr=0,ca=cf=null,J0=!1,(o&8)!==0&&(o|=o&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=o;0<m;){var y=31-Zt(m),_=1<<y;o|=s[y],m&=~_}return Ql=o,Iu(),u}function tb(s,o){kt=null,Q.H=ef,o===xe||o===ae?(o=Ge(),Zn=3):o===Ie?(o=Ge(),Zn=4):Zn=o===P0?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ea=o,yn===null&&(Xr=1,qm(s,Zs(o,s.current)))}function nb(){var s=Nr.current;return s===null?!0:(wn&4194048)===wn?In===null:(wn&62914560)===wn||(wn&536870912)!==0?s===In:!1}function rb(){var s=Q.H;return Q.H=ef,s===null?ef:s}function ib(){var s=Q.A;return Q.A=XE,s}function Xm(){Xr=4,Mc||(wn&4194048)!==wn&&Nr.current!==null||(Od=!0),(Oc&134217727)===0&&(Bu&134217727)===0||vr===null||Vc(vr,wn,ja,!1)}function r1(s,o,u){var m=Wn;Wn|=2;var y=rb(),_=ib();(vr!==s||wn!==o)&&(Km=null,Vd(s,o)),o=!1;var M=Xr;e:do try{if(Zn!==0&&yn!==null){var K=yn,ge=Ea;switch(Zn){case 8:n1(),M=6;break e;case 3:case 2:case 9:case 6:Nr.current===null&&(o=!0);var ke=Zn;if(Zn=0,Ea=null,Ud(s,K,ge,ke),u&&Od){M=0;break e}break;default:ke=Zn,Zn=0,Ea=null,Ud(s,K,ge,ke)}}e6(),M=Xr;break}catch($e){tb(s,$e)}while(!0);return o&&s.shellSuspendCounter++,Ja=el=null,Wn=m,Q.H=y,Q.A=_,yn===null&&(vr=null,wn=0,Iu()),M}function e6(){for(;yn!==null;)sb(yn)}function t6(s,o){var u=Wn;Wn|=2;var m=rb(),y=ib();vr!==s||wn!==o?(Km=null,Ym=Jt()+500,Vd(s,o)):Od=bi(s,o);e:do try{if(Zn!==0&&yn!==null){o=yn;var _=Ea;t:switch(Zn){case 1:Zn=0,Ea=null,Ud(s,o,_,1);break;case 2:case 9:if(Te(_)){Zn=0,Ea=null,ab(o);break}o=function(){Zn!==2&&Zn!==9||vr!==s||(Zn=7),cl(s)},_.then(o,o);break e;case 3:Zn=7;break e;case 4:Zn=5;break e;case 7:Te(_)?(Zn=0,Ea=null,ab(o)):(Zn=0,Ea=null,Ud(s,o,_,7));break;case 5:var M=null;switch(yn.tag){case 26:M=yn.memoizedState;case 5:case 27:var K=yn;if(M?$b(M):K.stateNode.complete){Zn=0,Ea=null;var ge=K.sibling;if(ge!==null)yn=ge;else{var ke=K.return;ke!==null?(yn=ke,Jm(ke)):yn=null}break t}}Zn=0,Ea=null,Ud(s,o,_,5);break;case 6:Zn=0,Ea=null,Ud(s,o,_,6);break;case 8:n1(),Xr=6;break e;default:throw Error(r(462))}}n6();break}catch($e){tb(s,$e)}while(!0);return Ja=el=null,Q.H=m,Q.A=y,Wn=u,yn!==null?0:(vr=null,wn=0,Iu(),Xr)}function n6(){for(;yn!==null&&!Rt();)sb(yn)}function sb(s){var o=C2(s.alternate,s,Ql);s.memoizedProps=s.pendingProps,o===null?Jm(s):yn=o}function ab(s){var o=s,u=o.alternate;switch(o.tag){case 15:case 0:o=N2(u,o,o.pendingProps,o.type,void 0,wn);break;case 11:o=N2(u,o,o.pendingProps,o.type.render,o.ref,wn);break;case 5:Td(o);default:R2(u,o),o=yn=ku(o,Ql),o=C2(u,o,Ql)}s.memoizedProps=s.pendingProps,o===null?Jm(s):yn=o}function Ud(s,o,u,m){Ja=el=null,Td(o),Qe=null,vt=0;var y=o.return;try{if(HE(s,y,o,u,wn)){Xr=1,qm(s,Zs(u,s.current)),yn=null;return}}catch(_){if(y!==null)throw yn=y,_;Xr=1,qm(s,Zs(u,s.current)),yn=null;return}o.flags&32768?(vn||m===1?s=!0:Od||(wn&536870912)!==0?s=!1:(Mc=s=!0,(m===2||m===9||m===3||m===6)&&(m=Nr.current,m!==null&&m.tag===13&&(m.flags|=16384))),ob(o,s)):Jm(o)}function Jm(s){var o=s;do{if((o.flags&32768)!==0){ob(o,Mc);return}s=o.return;var u=WE(o.alternate,o,Ql);if(u!==null){yn=u;return}if(o=o.sibling,o!==null){yn=o;return}yn=o=s}while(o!==null);Xr===0&&(Xr=5)}function ob(s,o){do{var u=YE(s.alternate,s);if(u!==null){u.flags&=32767,yn=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(s=s.sibling,s!==null)){yn=s;return}yn=s=u}while(s!==null);Xr=6,yn=null}function lb(s,o,u,m,y,_,M,K,ge){s.cancelPendingCommit=null;do Zm();while(Li!==0);if((Wn&6)!==0)throw Error(r(327));if(o!==null){if(o===s.current)throw Error(r(177));if(_=o.lanes|o.childLanes,_|=md,pa(s,u,_,M,K,ge),s===vr&&(yn=vr=null,wn=0),qd=o,qc=s,Xl=u,Z0=_,e1=y,X2=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,a6(tn,function(){return fb(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=Q.T,Q.T=null,y=ce.p,ce.p=2,M=Wn,Wn|=4;try{KE(s,o,u)}finally{Wn=M,ce.p=y,Q.T=m}}Li=1,cb(),ub(),db()}}function cb(){if(Li===1){Li=0;var s=qc,o=qd,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null;var m=ce.p;ce.p=2;var y=Wn;Wn|=4;try{z2(o,s);var _=p1,M=_o(s.containerInfo),K=_.focusedElem,ge=_.selectionRange;if(M!==K&&K&&K.ownerDocument&&wo(K.ownerDocument.documentElement,K)){if(ge!==null&&Qa(K)){var ke=ge.start,$e=ge.end;if($e===void 0&&($e=ke),"selectionStart"in K)K.selectionStart=ke,K.selectionEnd=Math.min($e,K.value.length);else{var Ke=K.ownerDocument||document,Me=Ke&&Ke.defaultView||window;if(Me.getSelection){var Oe=Me.getSelection(),pt=K.textContent.length,Ht=Math.min(ge.start,pt),hr=ge.end===void 0?Ht:Math.min(ge.end,pt);!Oe.extend&&Ht>hr&&(M=hr,hr=Ht,Ht=M);var Ee=Ac(K,Ht),be=Ac(K,hr);if(Ee&&be&&(Oe.rangeCount!==1||Oe.anchorNode!==Ee.node||Oe.anchorOffset!==Ee.offset||Oe.focusNode!==be.node||Oe.focusOffset!==be.offset)){var Le=Ke.createRange();Le.setStart(Ee.node,Ee.offset),Oe.removeAllRanges(),Ht>hr?(Oe.addRange(Le),Oe.extend(be.node,be.offset)):(Le.setEnd(be.node,be.offset),Oe.addRange(Le))}}}}for(Ke=[],Oe=K;Oe=Oe.parentNode;)Oe.nodeType===1&&Ke.push({element:Oe,left:Oe.scrollLeft,top:Oe.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<Ke.length;K++){var Ye=Ke[K];Ye.element.scrollLeft=Ye.left,Ye.element.scrollTop=Ye.top}}dp=!!m1,p1=m1=null}finally{Wn=y,ce.p=m,Q.T=u}}s.current=o,Li=2}}function ub(){if(Li===2){Li=0;var s=qc,o=qd,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=Q.T,Q.T=null;var m=ce.p;ce.p=2;var y=Wn;Wn|=4;try{F2(s,o.alternate,o)}finally{Wn=y,ce.p=m,Q.T=u}}Li=3}}function db(){if(Li===4||Li===3){Li=0,At();var s=qc,o=qd,u=Xl,m=X2;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Li=5:(Li=0,qd=qc=null,hb(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Fc=null),sr(u),o=o.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(nn,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=Q.T,y=ce.p,ce.p=2,Q.T=null;try{for(var _=s.onRecoverableError,M=0;M<m.length;M++){var K=m[M];_(K.value,{componentStack:K.stack})}}finally{Q.T=o,ce.p=y}}(Xl&3)!==0&&Zm(),cl(s),y=s.pendingLanes,(u&261930)!==0&&(y&42)!==0?s===t1?uf++:(uf=0,t1=s):uf=0,df(0)}}function hb(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Mu(o)))}function Zm(){return cb(),ub(),db(),fb()}function fb(){if(Li!==5)return!1;var s=qc,o=Z0;Z0=0;var u=sr(Xl),m=Q.T,y=ce.p;try{ce.p=32>u?32:u,Q.T=null,u=e1,e1=null;var _=qc,M=Xl;if(Li=0,qd=qc=null,Xl=0,(Wn&6)!==0)throw Error(r(331));var K=Wn;if(Wn|=4,Y2(_.current),$2(_,_.current,M,u),Wn=K,df(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(nn,_)}catch{}return!0}finally{ce.p=y,Q.T=m,hb(s,o)}}function mb(s,o,u){o=Zs(u,o),o=k0(s.stateNode,o,2),s=ln(s,o,2),s!==null&&(Tt(s,2),cl(s))}function er(s,o,u){if(s.tag===3)mb(s,s,u);else for(;o!==null;){if(o.tag===3){mb(o,s,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Fc===null||!Fc.has(m))){s=Zs(u,s),u=p2(2),m=ln(o,u,2),m!==null&&(g2(u,m,o,s),Tt(m,2),cl(m));break}}o=o.return}}function i1(s,o,u){var m=s.pingCache;if(m===null){m=s.pingCache=new JE;var y=new Set;m.set(o,y)}else y=m.get(o),y===void 0&&(y=new Set,m.set(o,y));y.has(u)||(Q0=!0,y.add(u),s=r6.bind(null,s,o,u),o.then(s,s))}function r6(s,o,u){var m=s.pingCache;m!==null&&m.delete(o),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,vr===s&&(wn&u)===u&&(Xr===4||Xr===3&&(wn&62914560)===wn&&300>Jt()-Wm?(Wn&2)===0&&Vd(s,0):X0|=u,Fd===wn&&(Fd=0)),cl(s)}function pb(s,o){o===0&&(o=Hs()),s=Ao(s,o),s!==null&&(Tt(s,o),cl(s))}function i6(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),pb(s,u)}function s6(s,o){var u=0;switch(s.tag){case 31:case 13:var m=s.stateNode,y=s.memoizedState;y!==null&&(u=y.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(o),pb(s,u)}function a6(s,o){return at(s,o)}var ep=null,Bd=null,s1=!1,tp=!1,a1=!1,Uc=0;function cl(s){s!==Bd&&s.next===null&&(Bd===null?ep=Bd=s:Bd=Bd.next=s),tp=!0,s1||(s1=!0,l6())}function df(s,o){if(!a1&&tp){a1=!0;do for(var u=!1,m=ep;m!==null;){if(s!==0){var y=m.pendingLanes;if(y===0)var _=0;else{var M=m.suspendedLanes,K=m.pingedLanes;_=(1<<31-Zt(42|s)+1)-1,_&=y&~(M&~K),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,xb(m,_))}else _=wn,_=un(m,m===vr?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||bi(m,_)||(u=!0,xb(m,_));m=m.next}while(u);a1=!1}}function o6(){gb()}function gb(){tp=s1=!1;var s=0;Uc!==0&&y6()&&(s=Uc);for(var o=Jt(),u=null,m=ep;m!==null;){var y=m.next,_=vb(m,o);_===0?(m.next=null,u===null?ep=y:u.next=y,y===null&&(Bd=u)):(u=m,(s!==0||(_&3)!==0)&&(tp=!0)),m=y}Li!==0&&Li!==5||df(s),Uc!==0&&(Uc=0)}function vb(s,o){for(var u=s.suspendedLanes,m=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var M=31-Zt(_),K=1<<M,ge=y[M];ge===-1?((K&u)===0||(K&m)!==0)&&(y[M]=ci(K,o)):ge<=o&&(s.expiredLanes|=K),_&=~K}if(o=vr,u=wn,u=un(s,s===o?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,u===0||s===o&&(Zn===2||Zn===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&lt(m),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||bi(s,u)){if(o=u&-u,o===s.callbackPriority)return o;switch(m!==null&&lt(m),sr(u)){case 2:case 8:u=cn;break;case 32:u=tn;break;case 268435456:u=Kt;break;default:u=tn}return m=yb.bind(null,s),u=at(u,m),s.callbackPriority=o,s.callbackNode=u,o}return m!==null&&m!==null&&lt(m),s.callbackPriority=2,s.callbackNode=null,2}function yb(s,o){if(Li!==0&&Li!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Zm()&&s.callbackNode!==u)return null;var m=wn;return m=un(s,s===vr?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(Z2(s,m,o),vb(s,Jt()),s.callbackNode!=null&&s.callbackNode===u?yb.bind(null,s):null)}function xb(s,o){if(Zm())return null;Z2(s,o,!0)}function l6(){b6(function(){(Wn&6)!==0?at($t,o6):gb()})}function o1(){if(Uc===0){var s=g;s===0&&(s=Vt,Vt<<=1,(Vt&261888)===0&&(Vt=256)),Uc=s}return Uc}function bb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ui(""+s)}function wb(s,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,s.id&&u.setAttribute("form",s.id),o.parentNode.insertBefore(u,o),s=new FormData(s),u.parentNode.removeChild(u),s}function c6(s,o,u,m,y){if(o==="submit"&&u&&u.stateNode===y){var _=bb((y[Qn]||null).action),M=m.submitter;M&&(o=(o=M[Qn]||null)?bb(o.formAction):M.getAttribute("formAction"),o!==null&&(_=o,M=null));var K=new hi("action","action",null,m,y);s.push({event:K,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Uc!==0){var ge=M?wb(y,M):new FormData(y);j0(u,{pending:!0,data:ge,method:y.method,action:_},null,ge)}}else typeof _=="function"&&(K.preventDefault(),ge=M?wb(y,M):new FormData(y),j0(u,{pending:!0,data:ge,method:y.method,action:_},_,ge))},currentTarget:y}]})}}for(var l1=0;l1<Ml.length;l1++){var c1=Ml[l1],u6=c1.toLowerCase(),d6=c1[0].toUpperCase()+c1.slice(1);Xs(u6,"on"+d6)}Xs(Dl,"onAnimationEnd"),Xs(Tu,"onAnimationIteration"),Xs(qh,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(Em,"onTransitionRun"),Xs(jm,"onTransitionStart"),Xs(Tm,"onTransitionCancel"),Xs(Vh,"onTransitionEnd"),Ls("onMouseEnter",["mouseout","mouseover"]),Ls("onMouseLeave",["mouseout","mouseover"]),Ls("onPointerEnter",["pointerout","pointerover"]),Ls("onPointerLeave",["pointerout","pointerover"]),ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ys("onBeforeInput",["compositionend","keypress","textInput","paste"]),ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hf));function _b(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var m=s[u],y=m.event;m=m.listeners;e:{var _=void 0;if(o)for(var M=m.length-1;0<=M;M--){var K=m[M],ge=K.instance,ke=K.currentTarget;if(K=K.listener,ge!==_&&y.isPropagationStopped())break e;_=K,y.currentTarget=ke;try{_(y)}catch($e){Cu($e)}y.currentTarget=null,_=ge}else for(M=0;M<m.length;M++){if(K=m[M],ge=K.instance,ke=K.currentTarget,K=K.listener,ge!==_&&y.isPropagationStopped())break e;_=K,y.currentTarget=ke;try{_(y)}catch($e){Cu($e)}y.currentTarget=null,_=ge}}}}function xn(s,o){var u=o[Fi];u===void 0&&(u=o[Fi]=new Set);var m=s+"__bubble";u.has(m)||(Nb(o,s,2,!1),u.add(m))}function u1(s,o,u){var m=0;o&&(m|=4),Nb(u,s,m,o)}var np="_reactListening"+Math.random().toString(36).slice(2);function d1(s){if(!s[np]){s[np]=!0,Bo.forEach(function(u){u!=="selectionchange"&&(h6.has(u)||u1(u,!1,s),u1(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[np]||(o[np]=!0,u1("selectionchange",!1,o))}}function Nb(s,o,u,m){switch(Jb(o)){case 2:var y=V6;break;case 8:y=U6;break;default:y=E1}u=y.bind(null,o,u,s),y=void 0,!mo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),m?y!==void 0?s.addEventListener(o,u,{capture:!0,passive:y}):s.addEventListener(o,u,!0):y!==void 0?s.addEventListener(o,u,{passive:y}):s.addEventListener(o,u,!1)}function h1(s,o,u,m,y){var _=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var K=m.stateNode.containerInfo;if(K===y)break;if(M===4)for(M=m.return;M!==null;){var ge=M.tag;if((ge===3||ge===4)&&M.stateNode.containerInfo===y)return;M=M.return}for(;K!==null;){if(M=Zi(K),M===null)return;if(ge=M.tag,ge===5||ge===6||ge===26||ge===27){m=_=M;continue e}K=K.parentNode}}m=m.return}Ba(function(){var ke=_,$e=Bi(u),Ke=[];e:{var Me=Uh.get(s);if(Me!==void 0){var Oe=hi,pt=s;switch(s){case"keypress":if(rs(u)===0)break e;case"keydown":case"keyup":Oe=pn;break;case"focusin":pt="focus",Oe=Ds;break;case"focusout":pt="blur",Oe=Ds;break;case"beforeblur":case"afterblur":Oe=Ds;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=Yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=Ks;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=T;break;case Dl:case Tu:case qh:Oe=A;break;case Vh:Oe=ee;break;case"scroll":case"scrollend":Oe=za;break;case"wheel":Oe=De;break;case"copy":case"cut":case"paste":Oe=oe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=Kn;break;case"toggle":case"beforetoggle":Oe=Yt}var Ht=(o&4)!==0,hr=!Ht&&(s==="scroll"||s==="scrollend"),Ee=Ht?Me!==null?Me+"Capture":null:Me;Ht=[];for(var be=ke,Le;be!==null;){var Ye=be;if(Le=Ye.stateNode,Ye=Ye.tag,Ye!==5&&Ye!==26&&Ye!==27||Le===null||Ee===null||(Ye=ni(be,Ee),Ye!=null&&Ht.push(ff(be,Ye,Le))),hr)break;be=be.return}0<Ht.length&&(Me=new Oe(Me,pt,null,u,$e),Ke.push({event:Me,listeners:Ht}))}}if((o&7)===0){e:{if(Me=s==="mouseover"||s==="pointerover",Oe=s==="mouseout"||s==="pointerout",Me&&u!==ba&&(pt=u.relatedTarget||u.fromElement)&&(Zi(pt)||pt[Hr]))break e;if((Oe||Me)&&(Me=$e.window===$e?$e:(Me=$e.ownerDocument)?Me.defaultView||Me.parentWindow:window,Oe?(pt=u.relatedTarget||u.toElement,Oe=ke,pt=pt?Zi(pt):null,pt!==null&&(hr=a(pt),Ht=pt.tag,pt!==hr||Ht!==5&&Ht!==27&&Ht!==6)&&(pt=null)):(Oe=null,pt=ke),Oe!==pt)){if(Ht=Yo,Ye="onMouseLeave",Ee="onMouseEnter",be="mouse",(s==="pointerout"||s==="pointerover")&&(Ht=Kn,Ye="onPointerLeave",Ee="onPointerEnter",be="pointer"),hr=Oe==null?Me:es(Oe),Le=pt==null?Me:es(pt),Me=new Ht(Ye,be+"leave",Oe,u,$e),Me.target=hr,Me.relatedTarget=Le,Ye=null,Zi($e)===ke&&(Ht=new Ht(Ee,be+"enter",pt,u,$e),Ht.target=Le,Ht.relatedTarget=hr,Ye=Ht),hr=Ye,Oe&&pt)t:{for(Ht=f6,Ee=Oe,be=pt,Le=0,Ye=Ee;Ye;Ye=Ht(Ye))Le++;Ye=0;for(var Ft=be;Ft;Ft=Ht(Ft))Ye++;for(;0<Le-Ye;)Ee=Ht(Ee),Le--;for(;0<Ye-Le;)be=Ht(be),Ye--;for(;Le--;){if(Ee===be||be!==null&&Ee===be.alternate){Ht=Ee;break t}Ee=Ht(Ee),be=Ht(be)}Ht=null}else Ht=null;Oe!==null&&Ab(Ke,Me,Oe,Ht,!1),pt!==null&&hr!==null&&Ab(Ke,hr,pt,Ht,!0)}}e:{if(Me=ke?es(ke):window,Oe=Me.nodeName&&Me.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&Me.type==="file")var Bn=Qo;else if(Eu(Me))if(ws)Bn=Ya;else{Bn=Or;var Nt=_c}else Oe=Me.nodeName,!Oe||Oe.toLowerCase()!=="input"||Me.type!=="checkbox"&&Me.type!=="radio"?ke&&$o(ke.elementType)&&(Bn=Qo):Bn=fd;if(Bn&&(Bn=Bn(s,ke))){Os(Ke,Bn,u,$e);break e}Nt&&Nt(s,Me,ke),s==="focusout"&&ke&&Me.type==="number"&&ke.memoizedProps.value!=null&&Tl(Me,"number",Me.value)}switch(Nt=ke?es(ke):window,s){case"focusin":(Eu(Nt)||Nt.contentEditable==="true")&&(Fs=Nt,No=ke,zi=null);break;case"focusout":zi=No=Fs=null;break;case"mousedown":Qs=!0;break;case"contextmenu":case"mouseup":case"dragend":Qs=!1,Dn(Ke,u,$e);break;case"selectionchange":if(Pl)break;case"keydown":case"keyup":Dn(Ke,u,$e)}var dn;if(hn)e:{switch(s){case"compositionstart":var _n="onCompositionStart";break e;case"compositionend":_n="onCompositionEnd";break e;case"compositionupdate":_n="onCompositionUpdate";break e}_n=void 0}else $a?Ms(s,u)&&(_n="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(_n="onCompositionStart");_n&&(Ai&&u.locale!=="ko"&&($a||_n!=="onCompositionStart"?_n==="onCompositionEnd"&&$a&&(dn=Ll()):(ns=$e,po="value"in ns?ns.value:ns.textContent,$a=!0)),Nt=rp(ke,_n),0<Nt.length&&(_n=new Ae(_n,s,null,u,$e),Ke.push({event:_n,listeners:Nt}),dn?_n.data=dn:(dn=Ha(u),dn!==null&&(_n.data=dn)))),(dn=fi?as(s,u):vo(s,u))&&(_n=rp(ke,"onBeforeInput"),0<_n.length&&(Nt=new Ae("onBeforeInput","beforeinput",null,u,$e),Ke.push({event:Nt,listeners:_n}),Nt.data=dn)),c6(Ke,s,ke,u,$e)}_b(Ke,o)})}function ff(s,o,u){return{instance:s,listener:o,currentTarget:u}}function rp(s,o){for(var u=o+"Capture",m=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=ni(s,u),y!=null&&m.unshift(ff(s,y,_)),y=ni(s,o),y!=null&&m.push(ff(s,y,_))),s.tag===3)return m;s=s.return}return[]}function f6(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Ab(s,o,u,m,y){for(var _=o._reactName,M=[];u!==null&&u!==m;){var K=u,ge=K.alternate,ke=K.stateNode;if(K=K.tag,ge!==null&&ge===m)break;K!==5&&K!==26&&K!==27||ke===null||(ge=ke,y?(ke=ni(u,_),ke!=null&&M.unshift(ff(u,ke,ge))):y||(ke=ni(u,_),ke!=null&&M.push(ff(u,ke,ge)))),u=u.return}M.length!==0&&s.push({event:o,listeners:M})}var m6=/\r\n?/g,p6=/\u0000|\uFFFD/g;function Sb(s){return(typeof s=="string"?s:""+s).replace(m6,`
`).replace(p6,"")}function Eb(s,o){return o=Sb(o),Sb(s)===o}function dr(s,o,u,m,y,_){switch(u){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||ti(s,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&ti(s,""+m);break;case"className":di(s,"class",m);break;case"tabIndex":di(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":di(s,u,m);break;case"style":Rl(s,m,_);break;case"data":if(o!=="object"){di(s,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||u!=="href")){s.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(u);break}m=Ui(""+m),s.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(o!=="input"&&dr(s,o,"name",y.name,y,null),dr(s,o,"formEncType",y.formEncType,y,null),dr(s,o,"formMethod",y.formMethod,y,null),dr(s,o,"formTarget",y.formTarget,y,null)):(dr(s,o,"encType",y.encType,y,null),dr(s,o,"method",y.method,y,null),dr(s,o,"target",y.target,y,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(u);break}m=Ui(""+m),s.setAttribute(u,m);break;case"onClick":m!=null&&(s.onclick=ks);break;case"onScroll":m!=null&&xn("scroll",s);break;case"onScrollEnd":m!=null&&xn("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(u=m.__html,u!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}u=Ui(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(u,""+m):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":m===!0?s.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(u,m):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(u,m):s.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(u):s.setAttribute(u,m);break;case"popover":xn("beforetoggle",s),xn("toggle",s),ts(s,"popover",m);break;case"xlinkActuate":Er(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Er(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Er(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Er(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Er(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Er(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Er(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Er(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Er(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ts(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Go.get(u)||u,ts(s,u,m))}}function f1(s,o,u,m,y,_){switch(u){case"style":Rl(s,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(u=m.__html,u!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"children":typeof m=="string"?ti(s,m):(typeof m=="number"||typeof m=="bigint")&&ti(s,""+m);break;case"onScroll":m!=null&&xn("scroll",s);break;case"onScrollEnd":m!=null&&xn("scrollend",s);break;case"onClick":m!=null&&(s.onclick=ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vi.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),o=u.slice(2,y?u.length-7:void 0),_=s[Qn]||null,_=_!=null?_[u]:null,typeof _=="function"&&s.removeEventListener(o,_,y),typeof m=="function")){typeof _!="function"&&_!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(o,m,y);break e}u in s?s[u]=m:m===!0?s.setAttribute(u,""):ts(s,u,m)}}}function ds(s,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xn("error",s),xn("load",s);var m=!1,y=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var M=u[_];if(M!=null)switch(_){case"src":m=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:dr(s,o,_,M,u,null)}}y&&dr(s,o,"srcSet",u.srcSet,u,null),m&&dr(s,o,"src",u.src,u,null);return;case"input":xn("invalid",s);var K=_=M=y=null,ge=null,ke=null;for(m in u)if(u.hasOwnProperty(m)){var $e=u[m];if($e!=null)switch(m){case"name":y=$e;break;case"type":M=$e;break;case"checked":ge=$e;break;case"defaultChecked":ke=$e;break;case"value":_=$e;break;case"defaultValue":K=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(r(137,o));break;default:dr(s,o,m,$e,u,null)}}xc(s,_,K,ge,ke,M,y,!1);return;case"select":xn("invalid",s),m=M=_=null;for(y in u)if(u.hasOwnProperty(y)&&(K=u[y],K!=null))switch(y){case"value":_=K;break;case"defaultValue":M=K;break;case"multiple":m=K;default:dr(s,o,y,K,u,null)}o=_,u=M,s.multiple=!!m,o!=null?Ni(s,!!m,o,!1):u!=null&&Ni(s,!!m,u,!0);return;case"textarea":xn("invalid",s),_=y=m=null;for(M in u)if(u.hasOwnProperty(M)&&(K=u[M],K!=null))switch(M){case"value":m=K;break;case"defaultValue":y=K;break;case"children":_=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(91));break;default:dr(s,o,M,K,u,null)}ya(s,m,y,_);return;case"option":for(ge in u)if(u.hasOwnProperty(ge)&&(m=u[ge],m!=null))switch(ge){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:dr(s,o,ge,m,u,null)}return;case"dialog":xn("beforetoggle",s),xn("toggle",s),xn("cancel",s),xn("close",s);break;case"iframe":case"object":xn("load",s);break;case"video":case"audio":for(m=0;m<hf.length;m++)xn(hf[m],s);break;case"image":xn("error",s),xn("load",s);break;case"details":xn("toggle",s);break;case"embed":case"source":case"link":xn("error",s),xn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in u)if(u.hasOwnProperty(ke)&&(m=u[ke],m!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:dr(s,o,ke,m,u,null)}return;default:if($o(o)){for($e in u)u.hasOwnProperty($e)&&(m=u[$e],m!==void 0&&f1(s,o,$e,m,u,void 0));return}}for(K in u)u.hasOwnProperty(K)&&(m=u[K],m!=null&&dr(s,o,K,m,u,null))}function g6(s,o,u,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,M=null,K=null,ge=null,ke=null,$e=null;for(Oe in u){var Ke=u[Oe];if(u.hasOwnProperty(Oe)&&Ke!=null)switch(Oe){case"checked":break;case"value":break;case"defaultValue":ge=Ke;default:m.hasOwnProperty(Oe)||dr(s,o,Oe,null,m,Ke)}}for(var Me in m){var Oe=m[Me];if(Ke=u[Me],m.hasOwnProperty(Me)&&(Oe!=null||Ke!=null))switch(Me){case"type":_=Oe;break;case"name":y=Oe;break;case"checked":ke=Oe;break;case"defaultChecked":$e=Oe;break;case"value":M=Oe;break;case"defaultValue":K=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(r(137,o));break;default:Oe!==Ke&&dr(s,o,Me,Oe,m,Ke)}}ho(s,M,K,ge,ke,$e,_,y);return;case"select":Oe=M=K=Me=null;for(_ in u)if(ge=u[_],u.hasOwnProperty(_)&&ge!=null)switch(_){case"value":break;case"multiple":Oe=ge;default:m.hasOwnProperty(_)||dr(s,o,_,null,m,ge)}for(y in m)if(_=m[y],ge=u[y],m.hasOwnProperty(y)&&(_!=null||ge!=null))switch(y){case"value":Me=_;break;case"defaultValue":K=_;break;case"multiple":M=_;default:_!==ge&&dr(s,o,y,_,m,ge)}o=K,u=M,m=Oe,Me!=null?Ni(s,!!u,Me,!1):!!m!=!!u&&(o!=null?Ni(s,!!u,o,!0):Ni(s,!!u,u?[]:"",!1));return;case"textarea":Oe=Me=null;for(K in u)if(y=u[K],u.hasOwnProperty(K)&&y!=null&&!m.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:dr(s,o,K,null,m,y)}for(M in m)if(y=m[M],_=u[M],m.hasOwnProperty(M)&&(y!=null||_!=null))switch(M){case"value":Me=y;break;case"defaultValue":Oe=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==_&&dr(s,o,M,y,m,_)}Cl(s,Me,Oe);return;case"option":for(var pt in u)if(Me=u[pt],u.hasOwnProperty(pt)&&Me!=null&&!m.hasOwnProperty(pt))switch(pt){case"selected":s.selected=!1;break;default:dr(s,o,pt,null,m,Me)}for(ge in m)if(Me=m[ge],Oe=u[ge],m.hasOwnProperty(ge)&&Me!==Oe&&(Me!=null||Oe!=null))switch(ge){case"selected":s.selected=Me&&typeof Me!="function"&&typeof Me!="symbol";break;default:dr(s,o,ge,Me,m,Oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in u)Me=u[Ht],u.hasOwnProperty(Ht)&&Me!=null&&!m.hasOwnProperty(Ht)&&dr(s,o,Ht,null,m,Me);for(ke in m)if(Me=m[ke],Oe=u[ke],m.hasOwnProperty(ke)&&Me!==Oe&&(Me!=null||Oe!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,o));break;default:dr(s,o,ke,Me,m,Oe)}return;default:if($o(o)){for(var hr in u)Me=u[hr],u.hasOwnProperty(hr)&&Me!==void 0&&!m.hasOwnProperty(hr)&&f1(s,o,hr,void 0,m,Me);for($e in m)Me=m[$e],Oe=u[$e],!m.hasOwnProperty($e)||Me===Oe||Me===void 0&&Oe===void 0||f1(s,o,$e,Me,m,Oe);return}}for(var Ee in u)Me=u[Ee],u.hasOwnProperty(Ee)&&Me!=null&&!m.hasOwnProperty(Ee)&&dr(s,o,Ee,null,m,Me);for(Ke in m)Me=m[Ke],Oe=u[Ke],!m.hasOwnProperty(Ke)||Me===Oe||Me==null&&Oe==null||dr(s,o,Ke,Me,m,Oe)}function jb(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function v6(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,u=performance.getEntriesByType("resource"),m=0;m<u.length;m++){var y=u[m],_=y.transferSize,M=y.initiatorType,K=y.duration;if(_&&K&&jb(M)){for(M=0,K=y.responseEnd,m+=1;m<u.length;m++){var ge=u[m],ke=ge.startTime;if(ke>K)break;var $e=ge.transferSize,Ke=ge.initiatorType;$e&&jb(Ke)&&(ge=ge.responseEnd,M+=$e*(ge<K?1:(K-ke)/(ge-ke)))}if(--m,o+=8*(_+M)/(y.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var m1=null,p1=null;function ip(s){return s.nodeType===9?s:s.ownerDocument}function Tb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cb(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function g1(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var v1=null;function y6(){var s=window.event;return s&&s.type==="popstate"?s===v1?!1:(v1=s,!0):(v1=null,!1)}var Ib=typeof setTimeout=="function"?setTimeout:void 0,x6=typeof clearTimeout=="function"?clearTimeout:void 0,Rb=typeof Promise=="function"?Promise:void 0,b6=typeof queueMicrotask=="function"?queueMicrotask:typeof Rb<"u"?function(s){return Rb.resolve(null).then(s).catch(w6)}:Ib;function w6(s){setTimeout(function(){throw s})}function Bc(s){return s==="head"}function Lb(s,o){var u=o,m=0;do{var y=u.nextSibling;if(s.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(m===0){s.removeChild(y),Gd(o);return}m--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")m++;else if(u==="html")mf(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,mf(u);for(var _=u.firstChild;_;){var M=_.nextSibling,K=_.nodeName;_[qi]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=M}}else u==="body"&&mf(s.ownerDocument.body);u=y}while(u);Gd(o)}function kb(s,o){var u=s;s=0;do{var m=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=m}while(u)}function y1(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":y1(u),ga(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function _6(s,o,u,m){for(;s.nodeType===1;){var y=u;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[qi])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=to(s.nextSibling),s===null)break}return null}function N6(s,o,u){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=to(s.nextSibling),s===null))return null;return s}function Pb(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=to(s.nextSibling),s===null))return null;return s}function x1(s){return s.data==="$?"||s.data==="$~"}function b1(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function A6(s,o){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||u.readyState!=="loading")o();else{var m=function(){o(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function to(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var w1=null;function Db(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(o===0)return to(s.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}s=s.nextSibling}return null}function Mb(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return s;o--}else u!=="/$"&&u!=="/&"||o++}s=s.previousSibling}return null}function Ob(s,o,u){switch(o=ip(u),s){case"html":if(s=o.documentElement,!s)throw Error(r(452));return s;case"head":if(s=o.head,!s)throw Error(r(453));return s;case"body":if(s=o.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function mf(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);ga(s)}var no=new Map,Fb=new Set;function sp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Jl=ce.d;ce.d={f:S6,r:E6,D:j6,C:T6,L:C6,m:I6,X:L6,S:R6,M:k6};function S6(){var s=Jl.f(),o=Qm();return s||o}function E6(s){var o=_i(s);o!==null&&o.tag===5&&o.type==="form"?t2(o):Jl.r(s)}var zd=typeof document>"u"?null:document;function qb(s,o,u){var m=zd;if(m&&typeof o=="string"&&o){var y=jr(o);y='link[rel="'+s+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),Fb.has(y)||(Fb.add(y),s={rel:s,crossOrigin:u,href:o},m.querySelector(y)===null&&(o=m.createElement("link"),ds(o,"link",s),br(o),m.head.appendChild(o)))}}function j6(s){Jl.D(s),qb("dns-prefetch",s,null)}function T6(s,o){Jl.C(s,o),qb("preconnect",s,o)}function C6(s,o,u){Jl.L(s,o,u);var m=zd;if(m&&s&&o){var y='link[rel="preload"][as="'+jr(o)+'"]';o==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+jr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+jr(u.imageSizes)+'"]')):y+='[href="'+jr(s)+'"]';var _=y;switch(o){case"style":_=Hd(s);break;case"script":_=$d(s)}no.has(_)||(s=x({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:s,as:o},u),no.set(_,s),m.querySelector(y)!==null||o==="style"&&m.querySelector(pf(_))||o==="script"&&m.querySelector(gf(_))||(o=m.createElement("link"),ds(o,"link",s),br(o),m.head.appendChild(o)))}}function I6(s,o){Jl.m(s,o);var u=zd;if(u&&s){var m=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+jr(m)+'"][href="'+jr(s)+'"]',_=y;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=$d(s)}if(!no.has(_)&&(s=x({rel:"modulepreload",href:s},o),no.set(_,s),u.querySelector(y)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(gf(_)))return}m=u.createElement("link"),ds(m,"link",s),br(m),u.head.appendChild(m)}}}function R6(s,o,u){Jl.S(s,o,u);var m=zd;if(m&&s){var y=vs(m).hoistableStyles,_=Hd(s);o=o||"default";var M=y.get(_);if(!M){var K={loading:0,preload:null};if(M=m.querySelector(pf(_)))K.loading=5;else{s=x({rel:"stylesheet",href:s,"data-precedence":o},u),(u=no.get(_))&&_1(s,u);var ge=M=m.createElement("link");br(ge),ds(ge,"link",s),ge._p=new Promise(function(ke,$e){ge.onload=ke,ge.onerror=$e}),ge.addEventListener("load",function(){K.loading|=1}),ge.addEventListener("error",function(){K.loading|=2}),K.loading|=4,ap(M,o,m)}M={type:"stylesheet",instance:M,count:1,state:K},y.set(_,M)}}}function L6(s,o){Jl.X(s,o);var u=zd;if(u&&s){var m=vs(u).hoistableScripts,y=$d(s),_=m.get(y);_||(_=u.querySelector(gf(y)),_||(s=x({src:s,async:!0},o),(o=no.get(y))&&N1(s,o),_=u.createElement("script"),br(_),ds(_,"link",s),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(y,_))}}function k6(s,o){Jl.M(s,o);var u=zd;if(u&&s){var m=vs(u).hoistableScripts,y=$d(s),_=m.get(y);_||(_=u.querySelector(gf(y)),_||(s=x({src:s,async:!0,type:"module"},o),(o=no.get(y))&&N1(s,o),_=u.createElement("script"),br(_),ds(_,"link",s),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(y,_))}}function Vb(s,o,u,m){var y=(y=pe.current)?sp(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Hd(u.href),u=vs(y).hoistableStyles,m=u.get(o),m||(m={type:"style",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Hd(u.href);var _=vs(y).hoistableStyles,M=_.get(s);if(M||(y=y.ownerDocument||y,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,M),(_=y.querySelector(pf(s)))&&!_._p&&(M.instance=_,M.state.loading=5),no.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},no.set(s,u),_||P6(y,s,u,M.state))),o&&m===null)throw Error(r(528,""));return M}if(o&&m!==null)throw Error(r(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=$d(u),u=vs(y).hoistableScripts,m=u.get(o),m||(m={type:"script",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Hd(s){return'href="'+jr(s)+'"'}function pf(s){return'link[rel="stylesheet"]['+s+"]"}function Ub(s){return x({},s,{"data-precedence":s.precedence,precedence:null})}function P6(s,o,u,m){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=s.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),ds(o,"link",u),br(o),s.head.appendChild(o))}function $d(s){return'[src="'+jr(s)+'"]'}function gf(s){return"script[async]"+s}function Bb(s,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var m=s.querySelector('style[data-href~="'+jr(u.href)+'"]');if(m)return o.instance=m,br(m),m;var y=x({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),br(m),ds(m,"style",y),ap(m,u.precedence,s),o.instance=m;case"stylesheet":y=Hd(u.href);var _=s.querySelector(pf(y));if(_)return o.state.loading|=4,o.instance=_,br(_),_;m=Ub(u),(y=no.get(y))&&_1(m,y),_=(s.ownerDocument||s).createElement("link"),br(_);var M=_;return M._p=new Promise(function(K,ge){M.onload=K,M.onerror=ge}),ds(_,"link",m),o.state.loading|=4,ap(_,u.precedence,s),o.instance=_;case"script":return _=$d(u.src),(y=s.querySelector(gf(_)))?(o.instance=y,br(y),y):(m=u,(y=no.get(_))&&(m=x({},u),N1(m,y)),s=s.ownerDocument||s,y=s.createElement("script"),br(y),ds(y,"link",m),s.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,ap(m,u.precedence,s));return o.instance}function ap(s,o,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=m.length?m[m.length-1]:null,_=y,M=0;M<m.length;M++){var K=m[M];if(K.dataset.precedence===o)_=K;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(s,o.firstChild))}function _1(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function N1(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var op=null;function zb(s,o,u){if(op===null){var m=new Map,y=op=new Map;y.set(u,m)}else y=op,m=y.get(u),m||(m=new Map,y.set(u,m));if(m.has(s))return m;for(m.set(s,null),u=u.getElementsByTagName(s),y=0;y<u.length;y++){var _=u[y];if(!(_[qi]||_[qn]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var M=_.getAttribute(o)||"";M=s+M;var K=m.get(M);K?K.push(_):m.set(M,[_])}}return m}function Hb(s,o,u){s=s.ownerDocument||s,s.head.insertBefore(u,o==="title"?s.querySelector("head > title"):null)}function D6(s,o,u){if(u===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function $b(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function M6(s,o,u,m){if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=Hd(m.href),_=o.querySelector(pf(y));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=lp.bind(s),o.then(s,s)),u.state.loading|=4,u.instance=_,br(_);return}_=o.ownerDocument||o,m=Ub(m),(y=no.get(y))&&_1(m,y),_=_.createElement("link"),br(_);var M=_;M._p=new Promise(function(K,ge){M.onload=K,M.onerror=ge}),ds(_,"link",m),u.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=lp.bind(s),o.addEventListener("load",u),o.addEventListener("error",u))}}var A1=0;function O6(s,o){return s.stylesheets&&s.count===0&&up(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var m=setTimeout(function(){if(s.stylesheets&&up(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+o);0<s.imgBytes&&A1===0&&(A1=62500*v6());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&up(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>A1?50:800)+o);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(m),clearTimeout(y)}}:null}function lp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)up(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var cp=null;function up(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,cp=new Map,o.forEach(F6,s),cp=null,lp.call(s))}function F6(s,o){if(!(o.state.loading&4)){var u=cp.get(s);if(u)var m=u.get(null);else{u=new Map,cp.set(s,u);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var M=y[_];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(u.set(M.dataset.precedence,M),m=M)}m&&u.set(null,m)}y=o.instance,M=y.getAttribute("data-precedence"),_=u.get(M)||m,_===m&&u.set(null,y),u.set(M,y),this.count++,m=lp.bind(this),y.addEventListener("load",m),y.addEventListener("error",m),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),o.state.loading|=4}}var vf={$$typeof:$,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function q6(s,o,u,m,y,_,M,K,ge){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ei(0),this.hiddenUpdates=ei(null),this.identifierPrefix=m,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ge,this.incompleteTransitions=new Map}function Gb(s,o,u,m,y,_,M,K,ge,ke,$e,Ke){return s=new q6(s,o,u,M,ge,ke,$e,Ke,K),o=1,_===!0&&(o|=24),_=$i(3,null,null,o),s.current=_,_.stateNode=s,o=Ic(),o.refCount++,s.pooledCache=o,o.refCount++,_.memoizedState={element:m,isDehydrated:u,cache:o},rt(_),s}function Wb(s){return s?(s=ji,s):ji}function Yb(s,o,u,m,y,_){y=Wb(y),m.context===null?m.context=y:m.pendingContext=y,m=zt(o),m.payload={element:u},_=_===void 0?null:_,_!==null&&(m.callback=_),u=ln(s,m,o),u!==null&&(ua(u,s,o),$n(u,s,o))}function Kb(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function S1(s,o){Kb(s,o),(s=s.alternate)&&Kb(s,o)}function Qb(s){if(s.tag===13||s.tag===31){var o=Ao(s,67108864);o!==null&&ua(o,s,67108864),S1(s,67108864)}}function Xb(s){if(s.tag===13||s.tag===31){var o=Ta();o=Yn(o);var u=Ao(s,o);u!==null&&ua(u,s,o),S1(s,o)}}var dp=!0;function V6(s,o,u,m){var y=Q.T;Q.T=null;var _=ce.p;try{ce.p=2,E1(s,o,u,m)}finally{ce.p=_,Q.T=y}}function U6(s,o,u,m){var y=Q.T;Q.T=null;var _=ce.p;try{ce.p=8,E1(s,o,u,m)}finally{ce.p=_,Q.T=y}}function E1(s,o,u,m){if(dp){var y=j1(m);if(y===null)h1(s,o,m,hp,u),Zb(s,m);else if(z6(y,s,o,u,m))m.stopPropagation();else if(Zb(s,m),o&4&&-1<B6.indexOf(s)){for(;y!==null;){var _=_i(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var M=_t(_.pendingLanes);if(M!==0){var K=_;for(K.pendingLanes|=2,K.entangledLanes|=2;M;){var ge=1<<31-Zt(M);K.entanglements[1]|=ge,M&=~ge}cl(_),(Wn&6)===0&&(Ym=Jt()+500,df(0))}}break;case 31:case 13:K=Ao(_,2),K!==null&&ua(K,_,2),Qm(),S1(_,2)}if(_=j1(m),_===null&&h1(s,o,m,hp,u),_===y)break;y=_}y!==null&&m.stopPropagation()}else h1(s,o,m,null,u)}}function j1(s){return s=Bi(s),T1(s)}var hp=null;function T1(s){if(hp=null,s=Zi(s),s!==null){var o=a(s);if(o===null)s=null;else{var u=o.tag;if(u===13){if(s=c(o),s!==null)return s;s=null}else if(u===31){if(s=d(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return hp=s,null}function Jb(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rn()){case $t:return 2;case cn:return 8;case tn:case xt:return 32;case Kt:return 268435456;default:return 32}default:return 32}}var C1=!1,zc=null,Hc=null,$c=null,yf=new Map,xf=new Map,Gc=[],B6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zb(s,o){switch(s){case"focusin":case"focusout":zc=null;break;case"dragenter":case"dragleave":Hc=null;break;case"mouseover":case"mouseout":$c=null;break;case"pointerover":case"pointerout":yf.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":xf.delete(o.pointerId)}}function bf(s,o,u,m,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:_,targetContainers:[y]},o!==null&&(o=_i(o),o!==null&&Qb(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),s)}function z6(s,o,u,m,y){switch(o){case"focusin":return zc=bf(zc,s,o,u,m,y),!0;case"dragenter":return Hc=bf(Hc,s,o,u,m,y),!0;case"mouseover":return $c=bf($c,s,o,u,m,y),!0;case"pointerover":var _=y.pointerId;return yf.set(_,bf(yf.get(_)||null,s,o,u,m,y)),!0;case"gotpointercapture":return _=y.pointerId,xf.set(_,bf(xf.get(_)||null,s,o,u,m,y)),!0}return!1}function e5(s){var o=Zi(s.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){s.blockedOn=o,wi(s.priority,function(){Xb(u)});return}}else if(o===31){if(o=d(u),o!==null){s.blockedOn=o,wi(s.priority,function(){Xb(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function fp(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=j1(s.nativeEvent);if(u===null){u=s.nativeEvent;var m=new u.constructor(u.type,u);ba=m,u.target.dispatchEvent(m),ba=null}else return o=_i(u),o!==null&&Qb(o),s.blockedOn=u,!1;o.shift()}return!0}function t5(s,o,u){fp(s)&&u.delete(o)}function H6(){C1=!1,zc!==null&&fp(zc)&&(zc=null),Hc!==null&&fp(Hc)&&(Hc=null),$c!==null&&fp($c)&&($c=null),yf.forEach(t5),xf.forEach(t5)}function mp(s,o){s.blockedOn===o&&(s.blockedOn=null,C1||(C1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,H6)))}var pp=null;function n5(s){pp!==s&&(pp=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){pp===s&&(pp=null);for(var o=0;o<s.length;o+=3){var u=s[o],m=s[o+1],y=s[o+2];if(typeof m!="function"){if(T1(m||u)===null)continue;break}var _=_i(u);_!==null&&(s.splice(o,3),o-=3,j0(_,{pending:!0,data:y,method:u.method,action:m},m,y))}}))}function Gd(s){function o(ge){return mp(ge,s)}zc!==null&&mp(zc,s),Hc!==null&&mp(Hc,s),$c!==null&&mp($c,s),yf.forEach(o),xf.forEach(o);for(var u=0;u<Gc.length;u++){var m=Gc[u];m.blockedOn===s&&(m.blockedOn=null)}for(;0<Gc.length&&(u=Gc[0],u.blockedOn===null);)e5(u),u.blockedOn===null&&Gc.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var y=u[m],_=u[m+1],M=y[Qn]||null;if(typeof _=="function")M||n5(u);else if(M){var K=null;if(_&&_.hasAttribute("formAction")){if(y=_,M=_[Qn]||null)K=M.formAction;else if(T1(y)!==null)continue}else K=M.action;typeof K=="function"?u[m+1]=K:(u.splice(m,3),m-=3),n5(u)}}}function r5(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(M){return y=M})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),m||setTimeout(u,20)}function u(){if(!m&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){m=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function I1(s){this._internalRoot=s}gp.prototype.render=I1.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(r(409));var u=o.current,m=Ta();Yb(u,m,s,o,null,null)},gp.prototype.unmount=I1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Yb(s.current,2,null,s,null,null),Qm(),o[Hr]=null}};function gp(s){this._internalRoot=s}gp.prototype.unstable_scheduleHydration=function(s){if(s){var o=zr();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Gc.length&&o!==0&&o<Gc[u].priority;u++);Gc.splice(u,0,s),u===0&&e5(s)}};var i5=e.version;if(i5!=="19.2.1")throw Error(r(527,i5,"19.2.1"));ce.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(o),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var $6={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vp.isDisabled&&vp.supportsFiber)try{nn=vp.inject($6),It=vp}catch{}}return _f.createRoot=function(s,o){if(!i(s))throw Error(r(299));var u=!1,m="",y=d2,_=h2,M=f2;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),o=Gb(s,1,!1,null,null,u,m,null,y,_,M,r5),s[Hr]=o.current,d1(s),new I1(o)},_f.hydrateRoot=function(s,o,u){if(!i(s))throw Error(r(299));var m=!1,y="",_=d2,M=h2,K=f2,ge=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(M=u.onCaughtError),u.onRecoverableError!==void 0&&(K=u.onRecoverableError),u.formState!==void 0&&(ge=u.formState)),o=Gb(s,1,!0,o,u??null,m,y,ge,_,M,K,r5),o.context=Wb(null),u=o.current,m=Ta(),m=Yn(m),y=zt(m),y.callback=null,ln(u,y,m),u=m,o.current.lanes=u,Tt(o,u),cl(o),s[Hr]=o.current,d1(s),new gp(o)},_f.version="19.2.1",_f}var m5;function nj(){if(m5)return k1.exports;m5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),k1.exports=tj(),k1.exports}var rj=nj();let ij={data:""},sj=n=>{if(typeof window=="object"){let e=(n?n.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(n||document.head).appendChild(e),e.firstChild}return n||ij},aj=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,oj=/\/\*[^]*?\*\/|  +/g,p5=/\n+/g,Jc=(n,e)=>{let t="",r="",i="";for(let a in n){let c=n[a];a[0]=="@"?a[1]=="i"?t=a+" "+c+";":r+=a[1]=="f"?Jc(c,a):a+"{"+Jc(c,a[1]=="k"?"":e)+"}":typeof c=="object"?r+=Jc(c,e?e.replace(/([^,])+/g,d=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,d):d?d+" "+h:h)):a):c!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Jc.p?Jc.p(a,c):a+":"+c+";")}return t+(e&&i?e+"{"+i+"}":i)+r},Zl={},HN=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+HN(n[t]);return e}return n},lj=(n,e,t,r,i)=>{let a=HN(n),c=Zl[a]||(Zl[a]=(h=>{let f=0,p=11;for(;f<h.length;)p=101*p+h.charCodeAt(f++)>>>0;return"go"+p})(a));if(!Zl[c]){let h=a!==n?n:(f=>{let p,x,N=[{}];for(;p=aj.exec(f.replace(oj,""));)p[4]?N.shift():p[3]?(x=p[3].replace(p5," ").trim(),N.unshift(N[0][x]=N[0][x]||{})):N[0][p[1]]=p[2].replace(p5," ").trim();return N[0]})(n);Zl[c]=Jc(i?{["@keyframes "+c]:h}:h,t?"":"."+c)}let d=t&&Zl.g?Zl.g:null;return t&&(Zl.g=Zl[c]),((h,f,p,x)=>{x?f.data=f.data.replace(x,h):f.data.indexOf(h)===-1&&(f.data=p?h+f.data:f.data+h)})(Zl[c],e,r,d),c},cj=(n,e,t)=>n.reduce((r,i,a)=>{let c=e[a];if(c&&c.call){let d=c(t),h=d&&d.props&&d.props.className||/^go/.test(d)&&d;c=h?"."+h:d&&typeof d=="object"?d.props?"":Jc(d,""):d===!1?"":d}return r+i+(c??"")},"");function Og(n){let e=this||{},t=n.call?n(e.p):n;return lj(t.unshift?t.raw?cj(t,[].slice.call(arguments,1),e.p):t.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):t,sj(e.target),e.g,e.o,e.k)}let $N,jv,Tv;Og.bind({g:1});let uc=Og.bind({k:1});function uj(n,e,t,r){Jc.p=e,$N=n,jv=t,Tv=r}function bu(n,e){let t=this||{};return function(){let r=arguments;function i(a,c){let d=Object.assign({},a),h=d.className||i.className;t.p=Object.assign({theme:jv&&jv()},d),t.o=/ *go\d+/.test(h),d.className=Og.apply(t,r)+(h?" "+h:"");let f=n;return n[0]&&(f=d.as||n,delete d.as),Tv&&f[0]&&Tv(d),$N(f,d)}return i}}var dj=n=>typeof n=="function",rg=(n,e)=>dj(n)?n(e):n,hj=(()=>{let n=0;return()=>(++n).toString()})(),GN=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),fj=20,Ay="default",WN=(n,e)=>{let{toastLimit:t}=n.settings;switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,t)};case 1:return{...n,toasts:n.toasts.map(c=>c.id===e.toast.id?{...c,...e.toast}:c)};case 2:let{toast:r}=e;return WN(n,{type:n.toasts.find(c=>c.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...n,toasts:n.toasts.map(c=>c.id===i||i===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(c=>c.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let a=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+a}))}}},Dp=[],YN={toasts:[],pausedAt:void 0,settings:{toastLimit:fj}},fl={},KN=(n,e=Ay)=>{fl[e]=WN(fl[e]||YN,n),Dp.forEach(([t,r])=>{t===e&&r(fl[e])})},QN=n=>Object.keys(fl).forEach(e=>KN(n,e)),mj=n=>Object.keys(fl).find(e=>fl[e].toasts.some(t=>t.id===n)),Fg=(n=Ay)=>e=>{KN(e,n)},pj={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},gj=(n={},e=Ay)=>{let[t,r]=he.useState(fl[e]||YN),i=he.useRef(fl[e]);he.useEffect(()=>(i.current!==fl[e]&&r(fl[e]),Dp.push([e,r]),()=>{let c=Dp.findIndex(([d])=>d===e);c>-1&&Dp.splice(c,1)}),[e]);let a=t.toasts.map(c=>{var d,h,f;return{...n,...n[c.type],...c,removeDelay:c.removeDelay||((d=n[c.type])==null?void 0:d.removeDelay)||n?.removeDelay,duration:c.duration||((h=n[c.type])==null?void 0:h.duration)||n?.duration||pj[c.type],style:{...n.style,...(f=n[c.type])==null?void 0:f.style,...c.style}}});return{...t,toasts:a}},vj=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:t?.id||hj()}),om=n=>(e,t)=>{let r=vj(e,n,t);return Fg(r.toasterId||mj(r.id))({type:2,toast:r}),r.id},ki=(n,e)=>om("blank")(n,e);ki.error=om("error");ki.success=om("success");ki.loading=om("loading");ki.custom=om("custom");ki.dismiss=(n,e)=>{let t={type:3,toastId:n};e?Fg(e)(t):QN(t)};ki.dismissAll=n=>ki.dismiss(void 0,n);ki.remove=(n,e)=>{let t={type:4,toastId:n};e?Fg(e)(t):QN(t)};ki.removeAll=n=>ki.remove(void 0,n);ki.promise=(n,e,t)=>{let r=ki.loading(e.loading,{...t,...t?.loading});return typeof n=="function"&&(n=n()),n.then(i=>{let a=e.success?rg(e.success,i):void 0;return a?ki.success(a,{id:r,...t,...t?.success}):ki.dismiss(r),i}).catch(i=>{let a=e.error?rg(e.error,i):void 0;a?ki.error(a,{id:r,...t,...t?.error}):ki.dismiss(r)}),n};var yj=1e3,xj=(n,e="default")=>{let{toasts:t,pausedAt:r}=gj(n,e),i=he.useRef(new Map).current,a=he.useCallback((x,N=yj)=>{if(i.has(x))return;let b=setTimeout(()=>{i.delete(x),c({type:4,toastId:x})},N);i.set(x,b)},[]);he.useEffect(()=>{if(r)return;let x=Date.now(),N=t.map(b=>{if(b.duration===1/0)return;let E=(b.duration||0)+b.pauseDuration-(x-b.createdAt);if(E<0){b.visible&&ki.dismiss(b.id);return}return setTimeout(()=>ki.dismiss(b.id,e),E)});return()=>{N.forEach(b=>b&&clearTimeout(b))}},[t,r,e]);let c=he.useCallback(Fg(e),[e]),d=he.useCallback(()=>{c({type:5,time:Date.now()})},[c]),h=he.useCallback((x,N)=>{c({type:1,toast:{id:x,height:N}})},[c]),f=he.useCallback(()=>{r&&c({type:6,time:Date.now()})},[r,c]),p=he.useCallback((x,N)=>{let{reverseOrder:b=!1,gutter:E=8,defaultPosition:C}=N||{},I=t.filter($=>($.position||C)===(x.position||C)&&$.height),R=I.findIndex($=>$.id===x.id),U=I.filter(($,z)=>z<R&&$.visible).length;return I.filter($=>$.visible).slice(...b?[U+1]:[0,U]).reduce(($,z)=>$+(z.height||0)+E,0)},[t]);return he.useEffect(()=>{t.forEach(x=>{if(x.dismissed)a(x.id,x.removeDelay);else{let N=i.get(x.id);N&&(clearTimeout(N),i.delete(x.id))}})},[t,a]),{toasts:t,handlers:{updateHeight:h,startPause:d,endPause:f,calculateOffset:p}}},bj=uc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,wj=uc`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_j=uc`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Nj=bu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${bj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${wj} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${_j} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Aj=uc`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Sj=bu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${Aj} 1s linear infinite;
`,Ej=uc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,jj=uc`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Tj=bu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ej} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${jj} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Cj=bu("div")`
  position: absolute;
`,Ij=bu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Rj=uc`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Lj=bu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Rj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,kj=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?he.createElement(Lj,null,e):e:t==="blank"?null:he.createElement(Ij,null,he.createElement(Sj,{...r}),t!=="loading"&&he.createElement(Cj,null,t==="error"?he.createElement(Nj,{...r}):he.createElement(Tj,{...r})))},Pj=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Dj=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,Mj="0%{opacity:0;} 100%{opacity:1;}",Oj="0%{opacity:1;} 100%{opacity:0;}",Fj=bu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,qj=bu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Vj=(n,e)=>{let t=n.includes("top")?1:-1,[r,i]=GN()?[Mj,Oj]:[Pj(t),Dj(t)];return{animation:e?`${uc(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${uc(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Uj=he.memo(({toast:n,position:e,style:t,children:r})=>{let i=n.height?Vj(n.position||e||"top-center",n.visible):{opacity:0},a=he.createElement(kj,{toast:n}),c=he.createElement(qj,{...n.ariaProps},rg(n.message,n));return he.createElement(Fj,{className:n.className,style:{...i,...t,...n.style}},typeof r=="function"?r({icon:a,message:c}):he.createElement(he.Fragment,null,a,c))});uj(he.createElement);var Bj=({id:n,className:e,style:t,onHeightUpdate:r,children:i})=>{let a=he.useCallback(c=>{if(c){let d=()=>{let h=c.getBoundingClientRect().height;r(n,h)};d(),new MutationObserver(d).observe(c,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return he.createElement("div",{ref:a,className:e,style:t},i)},zj=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:GN()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...i}},Hj=Og`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,yp=16,$j=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:i,toasterId:a,containerStyle:c,containerClassName:d})=>{let{toasts:h,handlers:f}=xj(t,a);return he.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:yp,left:yp,right:yp,bottom:yp,pointerEvents:"none",...c},className:d,onMouseEnter:f.startPause,onMouseLeave:f.endPause},h.map(p=>{let x=p.position||e,N=f.calculateOffset(p,{reverseOrder:n,gutter:r,defaultPosition:e}),b=zj(x,N);return he.createElement(Bj,{id:p.id,key:p.id,onHeightUpdate:f.updateHeight,className:p.visible?Hj:"",style:b},p.type==="custom"?rg(p.message,p):i?i(p):he.createElement(Uj,{toast:p,position:x}))}))},Pt=ki;var g5="popstate";function Gj(n={}){function e(r,i){let{pathname:a,search:c,hash:d}=r.location;return Cv("",{pathname:a,search:c,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Gf(i)}return Yj(e,t,null,n)}function kr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ao(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Wj(){return Math.random().toString(36).substring(2,10)}function v5(n,e){return{usr:n.state,key:n.key,idx:e}}function Cv(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?jh(e):e,state:t,key:e&&e.key||r||Wj()}}function Gf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function jh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function Yj(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,d="POP",h=null,f=p();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function p(){return(c.state||{idx:null}).idx}function x(){d="POP";let I=p(),R=I==null?null:I-f;f=I,h&&h({action:d,location:C.location,delta:R})}function N(I,R){d="PUSH";let U=Cv(C.location,I,R);f=p()+1;let $=v5(U,f),z=C.createHref(U);try{c.pushState($,"",z)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;i.location.assign(z)}a&&h&&h({action:d,location:C.location,delta:1})}function b(I,R){d="REPLACE";let U=Cv(C.location,I,R);f=p();let $=v5(U,f),z=C.createHref(U);c.replaceState($,"",z),a&&h&&h({action:d,location:C.location,delta:0})}function E(I){return Kj(I)}let C={get action(){return d},get location(){return n(i,c)},listen(I){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(g5,x),h=I,()=>{i.removeEventListener(g5,x),h=null}},createHref(I){return e(i,I)},createURL:E,encodeLocation(I){let R=E(I);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:N,replace:b,go(I){return c.go(I)}};return C}function Kj(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),kr(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Gf(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function XN(n,e,t="/"){return Qj(n,e,t,!1)}function Qj(n,e,t,r){let i=typeof e=="string"?jh(e):e,a=dc(i.pathname||"/",t);if(a==null)return null;let c=JN(n);Xj(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=lT(a);d=aT(c[h],f,r)}return d}function JN(n,e=[],t=[],r="",i=!1){let a=(c,d,h=i,f)=>{let p={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&h)return;kr(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let x=lc([r,p.relativePath]),N=t.concat(p);c.children&&c.children.length>0&&(kr(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),JN(c.children,e,N,x,h)),!(c.path==null&&!c.index)&&e.push({path:x,score:iT(x,c.index),routesMeta:N})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))a(c,d);else for(let h of ZN(c.path))a(c,d,!0,h)}),e}function ZN(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=ZN(r.join("/")),d=[];return d.push(...c.map(h=>h===""?a:[a,h].join("/"))),i&&d.push(...c),d.map(h=>n.startsWith("/")&&h===""?"/":h)}function Xj(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:sT(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var Jj=/^:[\w-]+$/,Zj=3,eT=2,tT=1,nT=10,rT=-2,y5=n=>n==="*";function iT(n,e){let t=n.split("/"),r=t.length;return t.some(y5)&&(r+=rT),e&&(r+=eT),t.filter(i=>!y5(i)).reduce((i,a)=>i+(Jj.test(a)?Zj:a===""?tT:nT),r)}function sT(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function aT(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",c=[];for(let d=0;d<r.length;++d){let h=r[d],f=d===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",x=ig({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),N=h.route;if(!x&&f&&t&&!r[r.length-1].route.index&&(x=ig({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!x)return null;Object.assign(i,x.params),c.push({params:i,pathname:lc([a,x.pathname]),pathnameBase:fT(lc([a,x.pathnameBase])),route:N}),x.pathnameBase!=="/"&&(a=lc([a,x.pathnameBase]))}return c}function ig(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=oT(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:x},N)=>{if(p==="*"){let E=d[N]||"";c=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const b=d[N];return x&&!b?f[p]=void 0:f[p]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:n}}function oT(n,e=!1,t=!0){ao(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ao(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function dc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var cT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uT=n=>cT.test(n);function dT(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?jh(n):n,a;if(t)if(uT(t))a=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),ao(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?a=x5(t.substring(1),"/"):a=x5(t,e)}else a=e;return{pathname:a,search:mT(r),hash:pT(i)}}function x5(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function O1(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Sy(n){let e=hT(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Ey(n,e,t,r=!1){let i;typeof n=="string"?i=jh(n):(i={...n},kr(!i.pathname||!i.pathname.includes("?"),O1("?","pathname","search",i)),kr(!i.pathname||!i.pathname.includes("#"),O1("#","pathname","hash",i)),kr(!i.search||!i.search.includes("#"),O1("#","search","hash",i)));let a=n===""||i.pathname==="",c=a?"/":i.pathname,d;if(c==null)d=t;else{let x=e.length-1;if(!r&&c.startsWith("..")){let N=c.split("/");for(;N[0]==="..";)N.shift(),x-=1;i.pathname=N.join("/")}d=x>=0?e[x]:"/"}let h=dT(i,d),f=c&&c!=="/"&&c.endsWith("/"),p=(a||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var lc=n=>n.join("/").replace(/\/\/+/g,"/"),fT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),mT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,pT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function gT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function vT(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var e4=["POST","PUT","PATCH","DELETE"];new Set(e4);var yT=["GET",...e4];new Set(yT);var Th=he.createContext(null);Th.displayName="DataRouter";var qg=he.createContext(null);qg.displayName="DataRouterState";he.createContext(!1);var t4=he.createContext({isTransitioning:!1});t4.displayName="ViewTransition";var xT=he.createContext(new Map);xT.displayName="Fetchers";var bT=he.createContext(null);bT.displayName="Await";var co=he.createContext(null);co.displayName="Navigation";var lm=he.createContext(null);lm.displayName="Location";var Sl=he.createContext({outlet:null,matches:[],isDataRoute:!1});Sl.displayName="Route";var jy=he.createContext(null);jy.displayName="RouteError";function wT(n,{relative:e}={}){kr(Ch(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=he.useContext(co),{hash:i,pathname:a,search:c}=cm(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:lc([t,a])),r.createHref({pathname:d,search:c,hash:i})}function Ch(){return he.useContext(lm)!=null}function wu(){return kr(Ch(),"useLocation() may be used only in the context of a <Router> component."),he.useContext(lm).location}var n4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function r4(n){he.useContext(co).static||he.useLayoutEffect(n)}function i4(){let{isDataRoute:n}=he.useContext(Sl);return n?PT():_T()}function _T(){kr(Ch(),"useNavigate() may be used only in the context of a <Router> component.");let n=he.useContext(Th),{basename:e,navigator:t}=he.useContext(co),{matches:r}=he.useContext(Sl),{pathname:i}=wu(),a=JSON.stringify(Sy(r)),c=he.useRef(!1);return r4(()=>{c.current=!0}),he.useCallback((h,f={})=>{if(ao(c.current,n4),!c.current)return;if(typeof h=="number"){t.go(h);return}let p=Ey(h,JSON.parse(a),i,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:lc([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,a,i,n])}he.createContext(null);function cm(n,{relative:e}={}){let{matches:t}=he.useContext(Sl),{pathname:r}=wu(),i=JSON.stringify(Sy(t));return he.useMemo(()=>Ey(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function NT(n,e){return s4(n,e)}function s4(n,e,t,r,i){kr(Ch(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=he.useContext(co),{matches:c}=he.useContext(Sl),d=c[c.length-1],h=d?d.params:{},f=d?d.pathname:"/",p=d?d.pathnameBase:"/",x=d&&d.route;{let U=x&&x.path||"";a4(f,!x||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let N=wu(),b;if(e){let U=typeof e=="string"?jh(e):e;kr(p==="/"||U.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${U.pathname}" was given in the \`location\` prop.`),b=U}else b=N;let E=b.pathname||"/",C=E;if(p!=="/"){let U=p.replace(/^\//,"").split("/");C="/"+E.replace(/^\//,"").split("/").slice(U.length).join("/")}let I=XN(n,{pathname:C});ao(x||I!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),ao(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=TT(I&&I.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:lc([p,a.encodeLocation?a.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?p:lc([p,a.encodeLocation?a.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),c,t,r,i);return e&&R?he.createElement(lm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},R):R}function AT(){let n=kT(),e=gT(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=he.createElement(he.Fragment,null,he.createElement("p",null," Hey developer "),he.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",he.createElement("code",{style:a},"ErrorBoundary")," or"," ",he.createElement("code",{style:a},"errorElement")," prop on your route.")),he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},e),t?he.createElement("pre",{style:i},t):null,c)}var ST=he.createElement(AT,null),ET=class extends he.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?he.createElement(Sl.Provider,{value:this.props.routeContext},he.createElement(jy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jT({routeContext:n,match:e,children:t}){let r=he.useContext(Th);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),he.createElement(Sl.Provider,{value:n},t)}function TT(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,c=t?.errors;if(c!=null){let p=a.findIndex(x=>x.route.id&&c?.[x.route.id]!==void 0);kr(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let d=!1,h=-1;if(t)for(let p=0;p<a.length;p++){let x=a[p];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(h=p),x.route.id){let{loaderData:N,errors:b}=t,E=x.route.loader&&!N.hasOwnProperty(x.route.id)&&(!b||b[x.route.id]===void 0);if(x.route.lazy||E){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}let f=t&&r?(p,x)=>{r(p,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:vT(t.matches),errorInfo:x})}:void 0;return a.reduceRight((p,x,N)=>{let b,E=!1,C=null,I=null;t&&(b=c&&x.route.id?c[x.route.id]:void 0,C=x.route.errorElement||ST,d&&(h<0&&N===0?(a4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,I=null):h===N&&(E=!0,I=x.route.hydrateFallbackElement||null)));let R=e.concat(a.slice(0,N+1)),U=()=>{let $;return b?$=C:E?$=I:x.route.Component?$=he.createElement(x.route.Component,null):x.route.element?$=x.route.element:$=p,he.createElement(jT,{match:x,routeContext:{outlet:p,matches:R,isDataRoute:t!=null},children:$})};return t&&(x.route.ErrorBoundary||x.route.errorElement||N===0)?he.createElement(ET,{location:t.location,revalidation:t.revalidation,component:C,error:b,children:U(),routeContext:{outlet:null,matches:R,isDataRoute:!0},onError:f}):U()},null)}function Ty(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CT(n){let e=he.useContext(Th);return kr(e,Ty(n)),e}function IT(n){let e=he.useContext(qg);return kr(e,Ty(n)),e}function RT(n){let e=he.useContext(Sl);return kr(e,Ty(n)),e}function Cy(n){let e=RT(n),t=e.matches[e.matches.length-1];return kr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function LT(){return Cy("useRouteId")}function kT(){let n=he.useContext(jy),e=IT("useRouteError"),t=Cy("useRouteError");return n!==void 0?n:e.errors?.[t]}function PT(){let{router:n}=CT("useNavigate"),e=Cy("useNavigate"),t=he.useRef(!1);return r4(()=>{t.current=!0}),he.useCallback(async(i,a={})=>{ao(t.current,n4),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var b5={};function a4(n,e,t){!e&&!b5[n]&&(b5[n]=!0,ao(!1,t))}he.memo(DT);function DT({routes:n,future:e,state:t,unstable_onError:r}){return s4(n,void 0,t,r,e)}function MT({to:n,replace:e,state:t,relative:r}){kr(Ch(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=he.useContext(co);ao(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=he.useContext(Sl),{pathname:c}=wu(),d=i4(),h=Ey(n,Sy(a),c,r==="path"),f=JSON.stringify(h);return he.useEffect(()=>{d(JSON.parse(f),{replace:e,state:t,relative:r})},[d,f,r,e,t]),null}function Us(n){kr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function OT({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:c}){kr(!Ch(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),h=he.useMemo(()=>({basename:d,navigator:i,static:a,unstable_useTransitions:c,future:{}}),[d,i,a,c]);typeof t=="string"&&(t=jh(t));let{pathname:f="/",search:p="",hash:x="",state:N=null,key:b="default"}=t,E=he.useMemo(()=>{let C=dc(f,d);return C==null?null:{location:{pathname:C,search:p,hash:x,state:N,key:b},navigationType:r}},[d,f,p,x,N,b,r]);return ao(E!=null,`<Router basename="${d}"> is not able to match the URL "${f}${p}${x}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:he.createElement(co.Provider,{value:h},he.createElement(lm.Provider,{children:e,value:E}))}function FT({children:n,location:e}){return NT(Iv(n),e)}function Iv(n,e=[]){let t=[];return he.Children.forEach(n,(r,i)=>{if(!he.isValidElement(r))return;let a=[...e,i];if(r.type===he.Fragment){t.push.apply(t,Iv(r.props.children,a));return}kr(r.type===Us,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),kr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Iv(r.props.children,a)),t.push(c)}),t}var Mp="get",Op="application/x-www-form-urlencoded";function Vg(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function qT(n){return Vg(n)&&n.tagName.toLowerCase()==="button"}function VT(n){return Vg(n)&&n.tagName.toLowerCase()==="form"}function UT(n){return Vg(n)&&n.tagName.toLowerCase()==="input"}function BT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function zT(n,e){return n.button===0&&(!e||e==="_self")&&!BT(n)}var xp=null;function HT(){if(xp===null)try{new FormData(document.createElement("form"),0),xp=!1}catch{xp=!0}return xp}var $T=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function F1(n){return n!=null&&!$T.has(n)?(ao(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Op}"`),null):n}function GT(n,e){let t,r,i,a,c;if(VT(n)){let d=n.getAttribute("action");r=d?dc(d,e):null,t=n.getAttribute("method")||Mp,i=F1(n.getAttribute("enctype"))||Op,a=new FormData(n)}else if(qT(n)||UT(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||d.getAttribute("action");if(r=h?dc(h,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Mp,i=F1(n.getAttribute("formenctype"))||F1(d.getAttribute("enctype"))||Op,a=new FormData(d,n),!HT()){let{name:f,type:p,value:x}=n;if(p==="image"){let N=f?`${f}.`:"";a.append(`${N}x`,"0"),a.append(`${N}y`,"0")}else f&&a.append(f,x)}}else{if(Vg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Mp,r=null,i=Op,c=n}return a&&i==="text/plain"&&(c=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Iy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function WT(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&dc(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function YT(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KT(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function QT(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let c=await YT(a,t);return c.links?c.links():[]}return[]}));return eC(r.flat(1).filter(KT).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function w5(n,e,t,r,i,a){let c=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,d=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return a==="assets"?e.filter((h,f)=>c(h,f)||d(h,f)):a==="data"?e.filter((h,f)=>{let p=r.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(c(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let x=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function XT(n,e,{includeHydrateFallback:t}={}){return JT(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function JT(n){return[...new Set(n)]}function ZT(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function eC(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(ZT(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function o4(){let n=he.useContext(Th);return Iy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function tC(){let n=he.useContext(qg);return Iy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ry=he.createContext(void 0);Ry.displayName="FrameworkContext";function l4(){let n=he.useContext(Ry);return Iy(n,"You must render this element inside a <HydratedRouter> element"),n}function nC(n,e){let t=he.useContext(Ry),[r,i]=he.useState(!1),[a,c]=he.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:x}=e,N=he.useRef(null);he.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let C=R=>{R.forEach(U=>{c(U.isIntersecting)})},I=new IntersectionObserver(C,{threshold:.5});return N.current&&I.observe(N.current),()=>{I.disconnect()}}},[n]),he.useEffect(()=>{if(r){let C=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(C)}}},[r]);let b=()=>{i(!0)},E=()=>{i(!1),c(!1)};return t?n!=="intent"?[a,N,{}]:[a,N,{onFocus:Nf(d,b),onBlur:Nf(h,E),onMouseEnter:Nf(f,b),onMouseLeave:Nf(p,E),onTouchStart:Nf(x,b)}]:[!1,N,{}]}function Nf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function rC({page:n,...e}){let{router:t}=o4(),r=he.useMemo(()=>XN(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?he.createElement(sC,{page:n,matches:r,...e}):null}function iC(n){let{manifest:e,routeModules:t}=l4(),[r,i]=he.useState([]);return he.useEffect(()=>{let a=!1;return QT(n,e,t).then(c=>{a||i(c)}),()=>{a=!0}},[n,e,t]),r}function sC({page:n,matches:e,...t}){let r=wu(),{manifest:i,routeModules:a}=l4(),{basename:c}=o4(),{loaderData:d,matches:h}=tC(),f=he.useMemo(()=>w5(n,e,h,i,r,"data"),[n,e,h,i,r]),p=he.useMemo(()=>w5(n,e,h,i,r,"assets"),[n,e,h,i,r]),x=he.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let E=new Set,C=!1;if(e.forEach(R=>{let U=i.routes[R.route.id];!U||!U.hasLoader||(!f.some($=>$.route.id===R.route.id)&&R.route.id in d&&a[R.route.id]?.shouldRevalidate||U.hasClientLoader?C=!0:E.add(R.route.id))}),E.size===0)return[];let I=WT(n,c,"data");return C&&E.size>0&&I.searchParams.set("_routes",e.filter(R=>E.has(R.route.id)).map(R=>R.route.id).join(",")),[I.pathname+I.search]},[c,d,r,i,f,e,n,a]),N=he.useMemo(()=>XT(p,i),[p,i]),b=iC(p);return he.createElement(he.Fragment,null,x.map(E=>he.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),N.map(E=>he.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),b.map(({key:E,link:C})=>he.createElement("link",{key:E,nonce:t.nonce,...C})))}function aC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var c4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{c4&&(window.__reactRouterVersion="7.10.1")}catch{}function oC({basename:n,children:e,unstable_useTransitions:t,window:r}){let i=he.useRef();i.current==null&&(i.current=Gj({window:r,v5Compat:!0}));let a=i.current,[c,d]=he.useState({action:a.action,location:a.location}),h=he.useCallback(f=>{t===!1?d(f):he.startTransition(()=>d(f))},[t]);return he.useLayoutEffect(()=>a.listen(h),[a,h]),he.createElement(OT,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:a,unstable_useTransitions:t===!0})}var u4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d4=he.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:c,state:d,target:h,to:f,preventScrollReset:p,viewTransition:x,...N},b){let{basename:E,unstable_useTransitions:C}=he.useContext(co),I=typeof f=="string"&&u4.test(f),R,U=!1;if(typeof f=="string"&&I&&(R=f,c4))try{let G=new URL(window.location.href),S=f.startsWith("//")?new URL(G.protocol+f):new URL(f),L=dc(S.pathname,E);S.origin===G.origin&&L!=null?f=L+S.search+S.hash:U=!0}catch{ao(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=wT(f,{relative:i}),[z,ue,ie]=nC(r,N),V=uC(f,{replace:c,state:d,target:h,preventScrollReset:p,relative:i,viewTransition:x,unstable_useTransitions:C});function D(G){e&&e(G),G.defaultPrevented||V(G)}let k=he.createElement("a",{...N,...ie,href:R||$,onClick:U||a?e:D,ref:aC(b,ue),target:h,"data-discover":!I&&t==="render"?"true":void 0});return z&&!I?he.createElement(he.Fragment,null,k,he.createElement(rC,{page:$})):k});d4.displayName="Link";var h4=he.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:c,viewTransition:d,children:h,...f},p){let x=cm(c,{relative:f.relative}),N=wu(),b=he.useContext(qg),{navigator:E,basename:C}=he.useContext(co),I=b!=null&&pC(x)&&d===!0,R=E.encodeLocation?E.encodeLocation(x).pathname:x.pathname,U=N.pathname,$=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(U=U.toLowerCase(),$=$?$.toLowerCase():null,R=R.toLowerCase()),$&&C&&($=dc($,C)||$);const z=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let ue=U===R||!i&&U.startsWith(R)&&U.charAt(z)==="/",ie=$!=null&&($===R||!i&&$.startsWith(R)&&$.charAt(R.length)==="/"),V={isActive:ue,isPending:ie,isTransitioning:I},D=ue?e:void 0,k;typeof r=="function"?k=r(V):k=[r,ue?"active":null,ie?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let G=typeof a=="function"?a(V):a;return he.createElement(d4,{...f,"aria-current":D,className:k,ref:p,style:G,to:c,viewTransition:d},typeof h=="function"?h(V):h)});h4.displayName="NavLink";var lC=he.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:c=Mp,action:d,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:x,...N},b)=>{let{unstable_useTransitions:E}=he.useContext(co),C=fC(),I=mC(d,{relative:f}),R=c.toLowerCase()==="get"?"get":"post",U=typeof d=="string"&&u4.test(d),$=z=>{if(h&&h(z),z.defaultPrevented)return;z.preventDefault();let ue=z.nativeEvent.submitter,ie=ue?.getAttribute("formmethod")||c,V=()=>C(ue||z.currentTarget,{fetcherKey:e,method:ie,navigate:t,replace:i,state:a,relative:f,preventScrollReset:p,viewTransition:x});E&&t!==!1?he.startTransition(()=>V()):V()};return he.createElement("form",{ref:b,method:R,action:I,onSubmit:r?h:$,...N,"data-discover":!U&&n==="render"?"true":void 0})});lC.displayName="Form";function cC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function f4(n){let e=he.useContext(Th);return kr(e,cC(n)),e}function uC(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:c,unstable_useTransitions:d}={}){let h=i4(),f=wu(),p=cm(n,{relative:a});return he.useCallback(x=>{if(zT(x,e)){x.preventDefault();let N=t!==void 0?t:Gf(f)===Gf(p),b=()=>h(n,{replace:N,state:r,preventScrollReset:i,relative:a,viewTransition:c});d?he.startTransition(()=>b()):b()}},[f,h,p,t,r,e,n,i,a,c,d])}var dC=0,hC=()=>`__${String(++dC)}__`;function fC(){let{router:n}=f4("useSubmit"),{basename:e}=he.useContext(co),t=LT(),r=n.fetch,i=n.navigate;return he.useCallback(async(a,c={})=>{let{action:d,method:h,encType:f,formData:p,body:x}=GT(a,e);if(c.navigate===!1){let N=c.fetcherKey||hC();await r(N,t,c.action||d,{preventScrollReset:c.preventScrollReset,formData:p,body:x,formMethod:c.method||h,formEncType:c.encType||f,flushSync:c.flushSync})}else await i(c.action||d,{preventScrollReset:c.preventScrollReset,formData:p,body:x,formMethod:c.method||h,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,i,e,t])}function mC(n,{relative:e}={}){let{basename:t}=he.useContext(co),r=he.useContext(Sl);kr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...cm(n||".",{relative:e})},c=wu();if(n==null){a.search=c.search;let d=new URLSearchParams(a.search),h=d.getAll("index");if(h.some(p=>p==="")){d.delete("index"),h.filter(x=>x).forEach(x=>d.append("index",x));let p=d.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:lc([t,a.pathname])),Gf(a)}function pC(n,{relative:e}={}){let t=he.useContext(t4);kr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=f4("useViewTransitionState"),i=cm(n,{relative:e});if(!t.isTransitioning)return!1;let a=dc(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=dc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return ig(i.pathname,c)!=null||ig(i.pathname,a)!=null}const gC=()=>{};var _5={};const m4=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},vC=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],c=n[t++],d=n[t++],h=((i&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},p4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],c=i+1<n.length,d=c?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,p=a>>2,x=(a&3)<<4|d>>4;let N=(d&15)<<2|f>>6,b=f&63;h||(b=64,c||(N=64)),r.push(t[p],t[x],t[N],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(m4(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const x=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||d==null||f==null||x==null)throw new yC;const N=a<<2|d>>4;if(r.push(N),f!==64){const b=d<<4&240|f>>2;if(r.push(b),x!==64){const E=f<<6&192|x;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class yC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xC=function(n){const e=m4(n);return p4.encodeByteArray(e,!0)},sg=function(n){return xC(n).replace(/\./g,"")},g4=function(n){try{return p4.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const wC=()=>bC().__FIREBASE_DEFAULTS__,_C=()=>{if(typeof process>"u"||typeof _5>"u")return;const n=_5.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},NC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&g4(n[1]);return e&&JSON.parse(e)},Ug=()=>{try{return gC()||wC()||_C()||NC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},v4=n=>Ug()?.emulatorHosts?.[n],AC=n=>{const e=v4(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},y4=()=>Ug()?.config,x4=n=>Ug()?.[`_${n}`];class SC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Ih(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function b4(n){return(await fetch(n,{credentials:"include"})).ok}function EC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[sg(JSON.stringify(t)),sg(JSON.stringify(c)),""].join(".")}const Df={};function jC(){const n={prod:[],emulator:[]};for(const e of Object.keys(Df))Df[e]?n.emulator.push(e):n.prod.push(e);return n}function TC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let N5=!1;function w4(n,e){if(typeof window>"u"||typeof document>"u"||!Ih(window.location.host)||Df[n]===e||Df[n]||N5)return;Df[n]=e;function t(N){return`__firebase__banner__${N}`}const r="__firebase__banner",a=jC().prod.length>0;function c(){const N=document.getElementById(r);N&&N.remove()}function d(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function h(N,b){N.setAttribute("width","24"),N.setAttribute("id",b),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function f(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{N5=!0,c()},N}function p(N,b){N.setAttribute("id",b),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function x(){const N=TC(r),b=t("text"),E=document.getElementById(b)||document.createElement("span"),C=t("learnmore"),I=document.getElementById(C)||document.createElement("a"),R=t("preprendIcon"),U=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const $=N.element;d($),p(I,C);const z=f();h(U,R),$.append(U,E,I,z),document.body.appendChild($)}a?(E.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function Is(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Is())}function IC(){const n=Ug()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function LC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kC(){const n=Is();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function PC(){return!IC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N4(){try{return typeof indexedDB=="object"}catch{return!1}}function A4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}function DC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const MC="FirebaseError";class qo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=MC,Object.setPrototypeOf(this,qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sd.prototype.create)}}class sd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?OC(a,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new qo(i,d,r)}}function OC(n,e){return n.replace(FC,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const FC=/\{\$([^}]+)}/g;function qC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function du(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],c=e[i];if(A5(a)&&A5(c)){if(!du(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function A5(n){return n!==null&&typeof n=="object"}function um(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Cf(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function If(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function VC(n,e){const t=new UC(n,e);return t.subscribe.bind(t)}class UC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");BC(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=q1),i.error===void 0&&(i.error=q1),i.complete===void 0&&(i.complete=q1);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function q1(){}const zC=1e3,HC=2,$C=14400*1e3,GC=.5;function S5(n,e=zC,t=HC){const r=e*Math.pow(t,n),i=Math.round(GC*r*(Math.random()-.5)*2);return Math.min($C,r+i)}function Pr(n){return n&&n._delegate?n._delegate:n}class Do{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const zu="[DEFAULT]";class WC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new SC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KC(e))try{this.getOrInitializeService({instanceIdentifier:zu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=zu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zu){return this.instances.has(e)}getOptions(e=zu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zu){return this.component?this.component.multipleInstances?e:zu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YC(n){return n===zu?void 0:n}function KC(n){return n.instantiationMode==="EAGER"}class QC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new WC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Nn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Nn||(Nn={}));const XC={debug:Nn.DEBUG,verbose:Nn.VERBOSE,info:Nn.INFO,warn:Nn.WARN,error:Nn.ERROR,silent:Nn.SILENT},JC=Nn.INFO,ZC={[Nn.DEBUG]:"log",[Nn.VERBOSE]:"log",[Nn.INFO]:"info",[Nn.WARN]:"warn",[Nn.ERROR]:"error"},eI=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=ZC[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bg{constructor(e){this.name=e,this._logLevel=JC,this._logHandler=eI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Nn.DEBUG,...e),this._logHandler(this,Nn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Nn.VERBOSE,...e),this._logHandler(this,Nn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Nn.INFO,...e),this._logHandler(this,Nn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Nn.WARN,...e),this._logHandler(this,Nn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Nn.ERROR,...e),this._logHandler(this,Nn.ERROR,...e)}}const tI=(n,e)=>e.some(t=>n instanceof t);let E5,j5;function nI(){return E5||(E5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rI(){return j5||(j5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S4=new WeakMap,Rv=new WeakMap,E4=new WeakMap,V1=new WeakMap,Ly=new WeakMap;function iI(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(au(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&S4.set(t,n)}).catch(()=>{}),Ly.set(e,n),e}function sI(n){if(Rv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});Rv.set(n,e)}let Lv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||E4.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return au(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function aI(n){Lv=n(Lv)}function oI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(U1(this),e,...t);return E4.set(r,e.sort?e.sort():[e]),au(r)}:rI().includes(n)?function(...e){return n.apply(U1(this),e),au(S4.get(this))}:function(...e){return au(n.apply(U1(this),e))}}function lI(n){return typeof n=="function"?oI(n):(n instanceof IDBTransaction&&sI(n),tI(n,nI())?new Proxy(n,Lv):n)}function au(n){if(n instanceof IDBRequest)return iI(n);if(V1.has(n))return V1.get(n);const e=lI(n);return e!==n&&(V1.set(n,e),Ly.set(e,n)),e}const U1=n=>Ly.get(n);function j4(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),d=au(c);return r&&c.addEventListener("upgradeneeded",h=>{r(au(c.result),h.oldVersion,h.newVersion,au(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),d.then(h=>{a&&h.addEventListener("close",()=>a()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const cI=["get","getKey","getAll","getAllKeys","count"],uI=["put","add","delete","clear"],B1=new Map;function T5(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(B1.get(e))return B1.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=uI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cI.includes(t)))return;const a=async function(c,...d){const h=this.transaction(c,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(d.shift())),(await Promise.all([f[t](...d),i&&h.done]))[0]};return B1.set(e,a),a}aI(n=>({...n,get:(e,t,r)=>T5(e,t)||n.get(e,t,r),has:(e,t)=>!!T5(e,t)||n.has(e,t)}));class dI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function hI(n){return n.getComponent()?.type==="VERSION"}const kv="@firebase/app",C5="0.14.6";const hc=new Bg("@firebase/app"),fI="@firebase/app-compat",mI="@firebase/analytics-compat",pI="@firebase/analytics",gI="@firebase/app-check-compat",vI="@firebase/app-check",yI="@firebase/auth",xI="@firebase/auth-compat",bI="@firebase/database",wI="@firebase/data-connect",_I="@firebase/database-compat",NI="@firebase/functions",AI="@firebase/functions-compat",SI="@firebase/installations",EI="@firebase/installations-compat",jI="@firebase/messaging",TI="@firebase/messaging-compat",CI="@firebase/performance",II="@firebase/performance-compat",RI="@firebase/remote-config",LI="@firebase/remote-config-compat",kI="@firebase/storage",PI="@firebase/storage-compat",DI="@firebase/firestore",MI="@firebase/ai",OI="@firebase/firestore-compat",FI="firebase",qI="12.6.0";const Pv="[DEFAULT]",VI={[kv]:"fire-core",[fI]:"fire-core-compat",[pI]:"fire-analytics",[mI]:"fire-analytics-compat",[vI]:"fire-app-check",[gI]:"fire-app-check-compat",[yI]:"fire-auth",[xI]:"fire-auth-compat",[bI]:"fire-rtdb",[wI]:"fire-data-connect",[_I]:"fire-rtdb-compat",[NI]:"fire-fn",[AI]:"fire-fn-compat",[SI]:"fire-iid",[EI]:"fire-iid-compat",[jI]:"fire-fcm",[TI]:"fire-fcm-compat",[CI]:"fire-perf",[II]:"fire-perf-compat",[RI]:"fire-rc",[LI]:"fire-rc-compat",[kI]:"fire-gcs",[PI]:"fire-gcs-compat",[DI]:"fire-fst",[OI]:"fire-fst-compat",[MI]:"fire-vertex","fire-js":"fire-js",[FI]:"fire-js-all"};const ag=new Map,UI=new Map,Dv=new Map;function I5(n,e){try{n.container.addComponent(e)}catch(t){hc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _l(n){const e=n.name;if(Dv.has(e))return hc.debug(`There were multiple attempts to register component ${e}.`),!1;Dv.set(e,n);for(const t of ag.values())I5(t,n);for(const t of UI.values())I5(t,n);return!0}function ad(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function io(n){return n==null?!1:n.settings!==void 0}const BI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ou=new sd("app","Firebase",BI);class zI{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Do("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ou.create("app-deleted",{appName:this._name})}}const Rh=qI;function ky(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Pv,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ou.create("bad-app-name",{appName:String(i)});if(t||(t=y4()),!t)throw ou.create("no-options");const a=ag.get(i);if(a){if(du(t,a.options)&&du(r,a.config))return a;throw ou.create("duplicate-app",{appName:i})}const c=new QC(i);for(const h of Dv.values())c.addComponent(h);const d=new zI(t,r,c);return ag.set(i,d),d}function Py(n=Pv){const e=ag.get(n);if(!e&&n===Pv&&y4())return ky();if(!e)throw ou.create("no-app",{appName:n});return e}function so(n,e,t){let r=VI[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hc.warn(c.join(" "));return}_l(new Do(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const HI="firebase-heartbeat-database",$I=1,Wf="firebase-heartbeat-store";let z1=null;function T4(){return z1||(z1=j4(HI,$I,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wf)}catch(t){console.warn(t)}}}}).catch(n=>{throw ou.create("idb-open",{originalErrorMessage:n.message})})),z1}async function GI(n){try{const t=(await T4()).transaction(Wf),r=await t.objectStore(Wf).get(C4(n));return await t.done,r}catch(e){if(e instanceof qo)hc.warn(e.message);else{const t=ou.create("idb-get",{originalErrorMessage:e?.message});hc.warn(t.message)}}}async function R5(n,e){try{const r=(await T4()).transaction(Wf,"readwrite");await r.objectStore(Wf).put(e,C4(n)),await r.done}catch(t){if(t instanceof qo)hc.warn(t.message);else{const r=ou.create("idb-set",{originalErrorMessage:t?.message});hc.warn(r.message)}}}function C4(n){return`${n.name}!${n.options.appId}`}const WI=1024,YI=30;class KI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=L5();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>YI){const i=JI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){hc.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=L5(),{heartbeatsToSend:t,unsentEntries:r}=QI(this._heartbeatsCache.heartbeats),i=sg(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return hc.warn(e),""}}}function L5(){return new Date().toISOString().substring(0,10)}function QI(n,e=WI){const t=[];let r=n.slice();for(const i of n){const a=t.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),k5(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),k5(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class XI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N4()?A4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return R5(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return R5(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function k5(n){return sg(JSON.stringify({version:2,heartbeats:n})).length}function JI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function ZI(n){_l(new Do("platform-logger",e=>new dI(e),"PRIVATE")),_l(new Do("heartbeat",e=>new KI(e),"PRIVATE")),so(kv,C5,n),so(kv,C5,"esm2020"),so("fire-js","")}ZI("");function I4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eR=I4,R4=new sd("auth","Firebase",I4());const og=new Bg("@firebase/auth");function tR(n,...e){og.logLevel<=Nn.WARN&&og.warn(`Auth (${Rh}): ${n}`,...e)}function Fp(n,...e){og.logLevel<=Nn.ERROR&&og.error(`Auth (${Rh}): ${n}`,...e)}function Mo(n,...e){throw Dy(n,...e)}function pl(n,...e){return Dy(n,...e)}function L4(n,e,t){const r={...eR(),[e]:t};return new sd("auth","Firebase",r).create(e,{appName:n.name})}function cc(n){return L4(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return R4.create(n,...e)}function Wt(n,e,...t){if(!n)throw Dy(e,...t)}function ic(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Fp(e),new Error(e)}function fc(n,e){n||ic(e)}function Mv(){return typeof self<"u"&&self.location?.href||""}function nR(){return P5()==="http:"||P5()==="https:"}function P5(){return typeof self<"u"&&self.location?.protocol||null}function rR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nR()||_4()||"connection"in navigator)?navigator.onLine:!0}function iR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class dm{constructor(e,t){this.shortDelay=e,this.longDelay=t,fc(t>e,"Short delay should be less than long delay!"),this.isMobile=CC()||LC()}get(){return rR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function My(n,e){fc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class k4{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ic("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ic("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ic("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const aR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oR=new dm(3e4,6e4);function _u(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function vc(n,e,t,r,i={}){return P4(n,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const d=um({key:n.config.apiKey,...c}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...a};return RC()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Ih(n.emulatorConfig.host)&&(f.credentials="include"),k4.fetch()(await D4(n,n.config.apiHost,t,d),f)})}async function P4(n,e,t){n._canInitEmulator=!1;const r={...sR,...e};try{const i=new cR(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw bp(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[h,f]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw bp(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw bp(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw bp(n,"user-disabled",c);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw L4(n,p,f);Mo(n,p)}}catch(i){if(i instanceof qo)throw i;Mo(n,"network-request-failed",{message:String(i)})}}async function hm(n,e,t,r,i={}){const a=await vc(n,e,t,r,i);return"mfaPendingCredential"in a&&Mo(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function D4(n,e,t,r){const i=`${e}${t}?${r}`,a=n,c=a.config.emulator?My(n.config,i):`${n.config.apiScheme}://${i}`;return aR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function lR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(pl(this.auth,"network-request-failed")),oR.get())})}}function bp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=pl(n,e,r);return i.customData._tokenResponse=t,i}function D5(n){return n!==void 0&&n.enterprise!==void 0}class uR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dR(n,e){return vc(n,"GET","/v2/recaptchaConfig",_u(n,e))}async function hR(n,e){return vc(n,"POST","/v1/accounts:delete",e)}async function lg(n,e){return vc(n,"POST","/v1/accounts:lookup",e)}function Mf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fR(n,e=!1){const t=Pr(n),r=await t.getIdToken(e),i=Oy(r);Wt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a?.sign_in_provider;return{claims:i,token:r,authTime:Mf(H1(i.auth_time)),issuedAtTime:Mf(H1(i.iat)),expirationTime:Mf(H1(i.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function H1(n){return Number(n)*1e3}function Oy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Fp("JWT malformed, contained fewer than 3 sections"),null;try{const i=g4(t);return i?JSON.parse(i):(Fp("Failed to decode base64 JWT payload"),null)}catch(i){return Fp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function M5(n){const e=Oy(n);return Wt(e,"internal-error"),Wt(typeof e.exp<"u","internal-error"),Wt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function yh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof qo&&mR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function mR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class pR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ov{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mf(this.lastLoginAt),this.creationTime=Mf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function cg(n){const e=n.auth,t=await n.getIdToken(),r=await yh(n,lg(e,{idToken:t}));Wt(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?M4(i.providerUserInfo):[],c=vR(n.providerData,a),d=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!c?.length,f=d?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Ov(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function gR(n){const e=Pr(n);await cg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vR(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function M4(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function yR(n,e){const t=await P4(n,{},async()=>{const r=um({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,c=await D4(n,i,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:r};return n.emulatorConfig&&Ih(n.emulatorConfig.host)&&(h.credentials="include"),k4.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function xR(n,e){return vc(n,"POST","/v2/accounts:revokeToken",_u(n,e))}class oh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Wt(e.idToken,"internal-error"),Wt(typeof e.idToken<"u","internal-error"),Wt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):M5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Wt(e.length!==0,"internal-error");const t=M5(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Wt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await yR(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,c=new oh;return r&&(Wt(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Wt(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&(Wt(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oh,this.toJSON())}_performRefresh(){return ic("not implemented")}}function Yc(n,e){Wt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Po{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new pR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ov(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await yh(this,this.stsTokenManager.getToken(this.auth,e));return Wt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fR(this,e)}reload(){return gR(this)}_assign(e){this!==e&&(Wt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Po({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Wt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await cg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(io(this.auth.app))return Promise.reject(cc(this.auth));const e=await this.getIdToken();return await yh(this,hR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:x,emailVerified:N,isAnonymous:b,providerData:E,stsTokenManager:C}=t;Wt(x&&C,e,"internal-error");const I=oh.fromJSON(this.name,C);Wt(typeof x=="string",e,"internal-error"),Yc(r,e.name),Yc(i,e.name),Wt(typeof N=="boolean",e,"internal-error"),Wt(typeof b=="boolean",e,"internal-error"),Yc(a,e.name),Yc(c,e.name),Yc(d,e.name),Yc(h,e.name),Yc(f,e.name),Yc(p,e.name);const R=new Po({uid:x,auth:e,email:i,emailVerified:N,displayName:r,isAnonymous:b,photoURL:c,phoneNumber:a,tenantId:d,stsTokenManager:I,createdAt:f,lastLoginAt:p});return E&&Array.isArray(E)&&(R.providerData=E.map(U=>({...U}))),h&&(R._redirectEventId=h),R}static async _fromIdTokenResponse(e,t,r=!1){const i=new oh;i.updateFromServerResponse(t);const a=new Po({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await cg(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Wt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?M4(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!a?.length,d=new oh;d.updateFromIdToken(r);const h=new Po({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ov(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(h,f),h}}const O5=new Map;function sc(n){fc(n instanceof Function,"Expected a class definition");let e=O5.get(n);return e?(fc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,O5.set(n,e),e)}class O4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}O4.type="NONE";const F5=O4;function qp(n,e,t){return`firebase:${n}:${e}:${t}`}class lh{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=qp(this.userKey,i.apiKey,a),this.fullPersistenceKey=qp("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await lg(this.auth,{idToken:e}).catch(()=>{});return t?Po._fromGetAccountInfoResponse(this.auth,t,e):null}return Po._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new lh(sc(F5),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||sc(F5);const c=qp(r,e.config.apiKey,e.name);let d=null;for(const f of t)try{const p=await f._get(c);if(p){let x;if(typeof p=="string"){const N=await lg(e,{idToken:p}).catch(()=>{});if(!N)break;x=await Po._fromGetAccountInfoResponse(e,N,p)}else x=Po._fromJSON(e,p);f!==a&&(d=x),a=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new lh(a,e,r):(a=h[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(c)}catch{}})),new lh(a,e,r))}}function q5(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(U4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(z4(e))return"Blackberry";if(H4(e))return"Webos";if(q4(e))return"Safari";if((e.includes("chrome/")||V4(e))&&!e.includes("edge/"))return"Chrome";if(B4(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function F4(n=Is()){return/firefox\//i.test(n)}function q4(n=Is()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function V4(n=Is()){return/crios\//i.test(n)}function U4(n=Is()){return/iemobile/i.test(n)}function B4(n=Is()){return/android/i.test(n)}function z4(n=Is()){return/blackberry/i.test(n)}function H4(n=Is()){return/webos/i.test(n)}function Fy(n=Is()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bR(n=Is()){return Fy(n)&&!!window.navigator?.standalone}function wR(){return kC()&&document.documentMode===10}function $4(n=Is()){return Fy(n)||B4(n)||H4(n)||z4(n)||/windows phone/i.test(n)||U4(n)}function G4(n,e=[]){let t;switch(n){case"Browser":t=q5(Is());break;case"Worker":t=`${q5(Is())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Rh}/${r}`}class _R{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,d)=>{try{const h=e(a);c(h)}catch(h){d(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function NR(n,e={}){return vc(n,"GET","/v2/passwordPolicy",_u(n,e))}const AR=6;class SR{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??AR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class ER{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new V5(this),this.idTokenSubscription=new V5(this),this.beforeStateQueue=new _R(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=sc(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await lh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await lg(this,{idToken:e}),r=await Po._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(io(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===c)&&d?.user&&(r=d.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Wt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await cg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(io(this.app))return Promise.reject(cc(this));const t=e?Pr(e):null;return t&&Wt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Wt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return io(this.app)?Promise.reject(cc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return io(this.app)?Promise.reject(cc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NR(this),t=new SR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await xR(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&sc(e)||this._popupRedirectResolver;Wt(t,this,"argument-error"),this.redirectPersistenceManager=await lh.create(this,[sc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Wt(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Wt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=G4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(io(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&tR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function od(n){return Pr(n)}class V5{constructor(e){this.auth=e,this.observer=null,this.addObserver=VC(t=>this.observer=t)}get next(){return Wt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jR(n){zg=n}function W4(n){return zg.loadJS(n)}function TR(){return zg.recaptchaEnterpriseScript}function CR(){return zg.gapiScript}function IR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class RR{constructor(){this.enterprise=new LR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class LR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const kR="recaptcha-enterprise",Y4="NO_RECAPTCHA";class PR{constructor(e){this.type=kR,this.auth=od(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{dR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new uR(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,c(f.siteKey)}}).catch(h=>{d(h)})})}function i(a,c,d){const h=window.grecaptcha;D5(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{c(f)}).catch(()=>{c(Y4)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RR().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(d=>{if(!t&&D5(window.grecaptcha))i(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=TR();h.length!==0&&(h+=d),W4(h).then(()=>{i(d,a,c)}).catch(f=>{c(f)})}}).catch(d=>{c(d)})})}}async function U5(n,e,t,r=!1,i=!1){const a=new PR(n);let c;if(i)c=Y4;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Fv(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await U5(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await U5(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)})}function DR(n,e){const t=ad(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(du(a,e??{}))return i;Mo(i,"already-initialized")}return t.initialize({options:e})}function MR(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(sc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function OR(n,e,t){const r=od(n);Wt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=K4(e),{host:c,port:d}=FR(e),h=d===null?"":`:${d}`,f={url:`${a}//${c}${h}/`},p=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Wt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Wt(du(f,r.config.emulator)&&du(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Ih(c)?(b4(`${a}//${c}${h}`),w4("Auth",!0)):qR()}function K4(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function FR(n){const e=K4(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:B5(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:B5(c)}}}function B5(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function qR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class qy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ic("not implemented")}_getIdTokenResponse(e){return ic("not implemented")}_linkToIdToken(e,t){return ic("not implemented")}_getReauthenticationResolver(e){return ic("not implemented")}}async function VR(n,e){return vc(n,"POST","/v1/accounts:signUp",e)}async function UR(n,e){return hm(n,"POST","/v1/accounts:signInWithPassword",_u(n,e))}async function BR(n,e){return hm(n,"POST","/v1/accounts:signInWithEmailLink",_u(n,e))}async function zR(n,e){return hm(n,"POST","/v1/accounts:signInWithEmailLink",_u(n,e))}class Yf extends qy{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Yf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Yf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fv(e,t,"signInWithPassword",UR);case"emailLink":return BR(e,{email:this._email,oobCode:this._password});default:Mo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fv(e,r,"signUpPassword",VR);case"emailLink":return zR(e,{idToken:t,email:this._email,oobCode:this._password});default:Mo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ch(n,e){return hm(n,"POST","/v1/accounts:signInWithIdp",_u(n,e))}const HR="http://localhost";class Qu extends qy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const c=new Qu(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ch(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ch(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ch(e,t)}buildRequest(){const e={requestUri:HR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=um(t)}return e}}function $R(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GR(n){const e=Cf(If(n)).link,t=e?Cf(If(e)).deep_link_id:null,r=Cf(If(n)).deep_link_id;return(r?Cf(If(r)).link:null)||r||t||e||n}class Vy{constructor(e){const t=Cf(If(e)),r=t.apiKey??null,i=t.oobCode??null,a=$R(t.mode??null);Wt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=GR(e);try{return new Vy(t)}catch{return null}}}class Lh{constructor(){this.providerId=Lh.PROVIDER_ID}static credential(e,t){return Yf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Vy.parseLink(t);return Wt(r,"argument-error"),Yf._fromEmailAndCode(e,r.code,r.tenantId)}}Lh.PROVIDER_ID="password";Lh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Q4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fm extends Q4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zc extends fm{constructor(){super("facebook.com")}static credential(e){return Qu._fromParams({providerId:Zc.PROVIDER_ID,signInMethod:Zc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zc.credentialFromTaggedObject(e)}static credentialFromError(e){return Zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zc.credential(e.oauthAccessToken)}catch{return null}}}Zc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zc.PROVIDER_ID="facebook.com";class eu extends fm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qu._fromParams({providerId:eu.PROVIDER_ID,signInMethod:eu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return eu.credentialFromTaggedObject(e)}static credentialFromError(e){return eu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return eu.credential(t,r)}catch{return null}}}eu.GOOGLE_SIGN_IN_METHOD="google.com";eu.PROVIDER_ID="google.com";class tu extends fm{constructor(){super("github.com")}static credential(e){return Qu._fromParams({providerId:tu.PROVIDER_ID,signInMethod:tu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tu.credentialFromTaggedObject(e)}static credentialFromError(e){return tu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tu.credential(e.oauthAccessToken)}catch{return null}}}tu.GITHUB_SIGN_IN_METHOD="github.com";tu.PROVIDER_ID="github.com";class nu extends fm{constructor(){super("twitter.com")}static credential(e,t){return Qu._fromParams({providerId:nu.PROVIDER_ID,signInMethod:nu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nu.credentialFromTaggedObject(e)}static credentialFromError(e){return nu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return nu.credential(t,r)}catch{return null}}}nu.TWITTER_SIGN_IN_METHOD="twitter.com";nu.PROVIDER_ID="twitter.com";async function WR(n,e){return hm(n,"POST","/v1/accounts:signUp",_u(n,e))}class Xu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Po._fromIdTokenResponse(e,r,i),c=z5(r);return new Xu({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=z5(r);return new Xu({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function z5(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class ug extends qo{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ug.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new ug(e,t,r,i)}}function X4(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ug._fromErrorAndOperation(n,a,e,r):a})}async function YR(n,e,t=!1){const r=await yh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Xu._forOperation(n,"link",r)}async function KR(n,e,t=!1){const{auth:r}=n;if(io(r.app))return Promise.reject(cc(r));const i="reauthenticate";try{const a=await yh(n,X4(r,i,e,n),t);Wt(a.idToken,r,"internal-error");const c=Oy(a.idToken);Wt(c,r,"internal-error");const{sub:d}=c;return Wt(n.uid===d,r,"user-mismatch"),Xu._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Mo(r,"user-mismatch"),a}}async function J4(n,e,t=!1){if(io(n.app))return Promise.reject(cc(n));const r="signIn",i=await X4(n,r,e),a=await Xu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function QR(n,e){return J4(od(n),e)}async function Z4(n){const e=od(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XR(n,e,t){if(io(n.app))return Promise.reject(cc(n));const r=od(n),c=await Fv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WR).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Z4(n),h}),d=await Xu._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function JR(n,e,t){return io(n.app)?Promise.reject(cc(n)):QR(Pr(n),Lh.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Z4(n),r})}async function ZR(n,e){return vc(n,"POST","/v1/accounts:update",e)}async function eL(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Pr(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await yh(r,ZR(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function tL(n,e,t,r){return Pr(n).onIdTokenChanged(e,t,r)}function nL(n,e,t){return Pr(n).beforeAuthStateChanged(e,t)}function rL(n,e,t,r){return Pr(n).onAuthStateChanged(e,t,r)}function iL(n){return Pr(n).signOut()}const dg="__sak";class eA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dg,"1"),this.storage.removeItem(dg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const sL=1e3,aL=10;class tA extends eA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);wR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,aL):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},sL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}tA.type="LOCAL";const oL=tA;class nA extends eA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}nA.type="SESSION";const rA=nA;function lL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Hg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Hg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,c=this.handlersMap[i];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async f=>f(t.origin,a)),h=await lL(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hg.receivers=[];function Uy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class cL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((d,h)=>{const f=Uy("",20);i.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(x){const N=x;if(N.data.eventId===f)switch(N.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(N.data.response);break;default:clearTimeout(p),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function gl(){return window}function uL(n){gl().location.href=n}function iA(){return typeof gl().WorkerGlobalScope<"u"&&typeof gl().importScripts=="function"}async function dL(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hL(){return navigator?.serviceWorker?.controller||null}function fL(){return iA()?self:null}const sA="firebaseLocalStorageDb",mL=1,hg="firebaseLocalStorage",aA="fbase_key";class mm{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $g(n,e){return n.transaction([hg],e?"readwrite":"readonly").objectStore(hg)}function pL(){const n=indexedDB.deleteDatabase(sA);return new mm(n).toPromise()}function qv(){const n=indexedDB.open(sA,mL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(hg,{keyPath:aA})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(hg)?e(r):(r.close(),await pL(),e(await qv()))})})}async function H5(n,e,t){const r=$g(n,!0).put({[aA]:e,value:t});return new mm(r).toPromise()}async function gL(n,e){const t=$g(n,!1).get(e),r=await new mm(t).toPromise();return r===void 0?null:r.value}function $5(n,e){const t=$g(n,!0).delete(e);return new mm(t).toPromise()}const vL=800,yL=3;class oA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>yL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hg._getInstance(fL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await dL(),!this.activeServiceWorker)return;this.sender=new cL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qv();return await H5(e,dg,"1"),await $5(e,dg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>H5(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>gL(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$5(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=$g(i,!1).getAll();return new mm(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oA.type="LOCAL";const xL=oA;new dm(3e4,6e4);function bL(n,e){return e?sc(e):(Wt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class By extends qy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ch(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ch(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ch(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wL(n){return J4(n.auth,new By(n),n.bypassAuthState)}function _L(n){const{auth:e,user:t}=n;return Wt(t,e,"internal-error"),KR(t,new By(n),n.bypassAuthState)}async function NL(n){const{auth:e,user:t}=n;return Wt(t,e,"internal-error"),YR(t,new By(n),n.bypassAuthState)}class lA{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wL;case"linkViaPopup":case"linkViaRedirect":return NL;case"reauthViaPopup":case"reauthViaRedirect":return _L;default:Mo(this.auth,"internal-error")}}resolve(e){fc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const AL=new dm(2e3,1e4);class ih extends lA{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ih.currentPopupAction&&ih.currentPopupAction.cancel(),ih.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Wt(e,this.auth,"internal-error"),e}async onExecution(){fc(this.filter.length===1,"Popup operations only handle one event");const e=Uy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(pl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ih.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AL.get())};e()}}ih.currentPopupAction=null;const SL="pendingRedirect",Vp=new Map;class EL extends lA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Vp.get(this.auth._key());if(!e){try{const r=await jL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Vp.set(this.auth._key(),e)}return this.bypassAuthState||Vp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jL(n,e){const t=IL(e),r=CL(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function TL(n,e){Vp.set(n._key(),e)}function CL(n){return sc(n._redirectPersistence)}function IL(n){return qp(SL,n.config.apiKey,n.name)}async function RL(n,e,t=!1){if(io(n.app))return Promise.reject(cc(n));const r=od(n),i=bL(r,e),c=await new EL(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const LL=600*1e3;class kL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!cA(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(pl(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LL&&this.cachedEventUids.clear(),this.cachedEventUids.has(G5(e))}saveEventToCache(e){this.cachedEventUids.add(G5(e)),this.lastProcessedEventTime=Date.now()}}function G5(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function cA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function PL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cA(n);default:return!1}}async function DL(n,e={}){return vc(n,"GET","/v1/projects",e)}const ML=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OL=/^https?/;async function FL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await DL(n);for(const t of e)try{if(qL(t))return}catch{}Mo(n,"unauthorized-domain")}function qL(n){const e=Mv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!OL.test(t))return!1;if(ML.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const VL=new dm(3e4,6e4);function W5(){const n=gl().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function UL(n){return new Promise((e,t)=>{function r(){W5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W5(),t(pl(n,"network-request-failed"))},timeout:VL.get()})}if(gl().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gl().gapi?.load)r();else{const i=IR("iframefcb");return gl()[i]=()=>{gapi.load?r():t(pl(n,"network-request-failed"))},W4(`${CR()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw Up=null,e})}let Up=null;function BL(n){return Up=Up||UL(n),Up}const zL=new dm(5e3,15e3),HL="__/auth/iframe",$L="emulator/auth/iframe",GL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YL(n){const e=n.config;Wt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?My(e,$L):`https://${n.config.authDomain}/${HL}`,r={apiKey:e.apiKey,appName:n.name,v:Rh},i=WL.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${um(r).slice(1)}`}async function KL(n){const e=await BL(n),t=gl().gapi;return Wt(t,n,"internal-error"),e.open({where:document.body,url:YL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GL,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=pl(n,"network-request-failed"),d=gl().setTimeout(()=>{a(c)},zL.get());function h(){gl().clearTimeout(d),i(r)}r.ping(h).then(h,()=>{a(c)})}))}const QL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XL=500,JL=600,ZL="_blank",e8="http://localhost";class Y5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function t8(n,e,t,r=XL,i=JL){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const h={...QL,width:r.toString(),height:i.toString(),top:a,left:c},f=Is().toLowerCase();t&&(d=V4(f)?ZL:t),F4(f)&&(e=e||e8,h.scrollbars="yes");const p=Object.entries(h).reduce((N,[b,E])=>`${N}${b}=${E},`,"");if(bR(f)&&d!=="_self")return n8(e||"",d),new Y5(null);const x=window.open(e||"",d,p);Wt(x,n,"popup-blocked");try{x.focus()}catch{}return new Y5(x)}function n8(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const r8="__/auth/handler",i8="emulator/auth/handler",s8=encodeURIComponent("fac");async function K5(n,e,t,r,i,a){Wt(n.config.authDomain,n,"auth-domain-config-required"),Wt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Rh,eventId:i};if(e instanceof Q4){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",qC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,x]of Object.entries({}))c[p]=x}if(e instanceof fm){const p=e.getScopes().filter(x=>x!=="");p.length>0&&(c.scopes=p.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const p of Object.keys(d))d[p]===void 0&&delete d[p];const h=await n._getAppCheckToken(),f=h?`#${s8}=${encodeURIComponent(h)}`:"";return`${a8(n)}?${um(d).slice(1)}${f}`}function a8({config:n}){return n.emulator?My(n,i8):`https://${n.authDomain}/${r8}`}const $1="webStorageSupport";class o8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rA,this._completeRedirectFn=RL,this._overrideRedirectResult=TL}async _openPopup(e,t,r,i){fc(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await K5(e,t,r,Mv(),i);return t8(e,a,Uy())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await K5(e,t,r,Mv(),i);return uL(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(fc(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await KL(e),r=new kL(e);return t.register("authEvent",i=>(Wt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($1,{type:$1},i=>{const a=i?.[0]?.[$1];a!==void 0&&t(!!a),Mo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=FL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $4()||q4()||Fy()}}const l8=o8;var Q5="@firebase/auth",X5="1.11.1";class c8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Wt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function u8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function d8(n){_l(new Do("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Wt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:G4(n)},f=new ER(r,i,a,h);return MR(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_l(new Do("auth-internal",e=>{const t=od(e.getProvider("auth").getImmediate());return(r=>new c8(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),so(Q5,X5,u8(n)),so(Q5,X5,"esm2020")}const h8=300,f8=x4("authIdTokenMaxAge")||h8;let J5=null;const m8=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>f8)return;const i=t?.token;J5!==i&&(J5=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uA(n=Py()){const e=ad(n,"auth");if(e.isInitialized())return e.getImmediate();const t=DR(n,{popupRedirectResolver:l8,persistence:[xL,oL,rA]}),r=x4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=m8(a.toString());nL(t,c,()=>c(t.currentUser)),tL(t,d=>c(d))}}const i=v4("auth");return i&&OR(t,`http://${i}`),t}function p8(){return document.getElementsByTagName("head")?.[0]??document}jR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=pl("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",p8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});d8("Browser");var Z5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var lu,dA;(function(){var n;function e(V,D){function k(){}k.prototype=D.prototype,V.F=D.prototype,V.prototype=new k,V.prototype.constructor=V,V.D=function(G,S,L){for(var F=Array(arguments.length-2),se=2;se<arguments.length;se++)F[se-2]=arguments[se];return D.prototype[S].apply(G,F)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(V,D,k){k||(k=0);const G=Array(16);if(typeof D=="string")for(var S=0;S<16;++S)G[S]=D.charCodeAt(k++)|D.charCodeAt(k++)<<8|D.charCodeAt(k++)<<16|D.charCodeAt(k++)<<24;else for(S=0;S<16;++S)G[S]=D[k++]|D[k++]<<8|D[k++]<<16|D[k++]<<24;D=V.g[0],k=V.g[1],S=V.g[2];let L=V.g[3],F;F=D+(L^k&(S^L))+G[0]+3614090360&4294967295,D=k+(F<<7&4294967295|F>>>25),F=L+(S^D&(k^S))+G[1]+3905402710&4294967295,L=D+(F<<12&4294967295|F>>>20),F=S+(k^L&(D^k))+G[2]+606105819&4294967295,S=L+(F<<17&4294967295|F>>>15),F=k+(D^S&(L^D))+G[3]+3250441966&4294967295,k=S+(F<<22&4294967295|F>>>10),F=D+(L^k&(S^L))+G[4]+4118548399&4294967295,D=k+(F<<7&4294967295|F>>>25),F=L+(S^D&(k^S))+G[5]+1200080426&4294967295,L=D+(F<<12&4294967295|F>>>20),F=S+(k^L&(D^k))+G[6]+2821735955&4294967295,S=L+(F<<17&4294967295|F>>>15),F=k+(D^S&(L^D))+G[7]+4249261313&4294967295,k=S+(F<<22&4294967295|F>>>10),F=D+(L^k&(S^L))+G[8]+1770035416&4294967295,D=k+(F<<7&4294967295|F>>>25),F=L+(S^D&(k^S))+G[9]+2336552879&4294967295,L=D+(F<<12&4294967295|F>>>20),F=S+(k^L&(D^k))+G[10]+4294925233&4294967295,S=L+(F<<17&4294967295|F>>>15),F=k+(D^S&(L^D))+G[11]+2304563134&4294967295,k=S+(F<<22&4294967295|F>>>10),F=D+(L^k&(S^L))+G[12]+1804603682&4294967295,D=k+(F<<7&4294967295|F>>>25),F=L+(S^D&(k^S))+G[13]+4254626195&4294967295,L=D+(F<<12&4294967295|F>>>20),F=S+(k^L&(D^k))+G[14]+2792965006&4294967295,S=L+(F<<17&4294967295|F>>>15),F=k+(D^S&(L^D))+G[15]+1236535329&4294967295,k=S+(F<<22&4294967295|F>>>10),F=D+(S^L&(k^S))+G[1]+4129170786&4294967295,D=k+(F<<5&4294967295|F>>>27),F=L+(k^S&(D^k))+G[6]+3225465664&4294967295,L=D+(F<<9&4294967295|F>>>23),F=S+(D^k&(L^D))+G[11]+643717713&4294967295,S=L+(F<<14&4294967295|F>>>18),F=k+(L^D&(S^L))+G[0]+3921069994&4294967295,k=S+(F<<20&4294967295|F>>>12),F=D+(S^L&(k^S))+G[5]+3593408605&4294967295,D=k+(F<<5&4294967295|F>>>27),F=L+(k^S&(D^k))+G[10]+38016083&4294967295,L=D+(F<<9&4294967295|F>>>23),F=S+(D^k&(L^D))+G[15]+3634488961&4294967295,S=L+(F<<14&4294967295|F>>>18),F=k+(L^D&(S^L))+G[4]+3889429448&4294967295,k=S+(F<<20&4294967295|F>>>12),F=D+(S^L&(k^S))+G[9]+568446438&4294967295,D=k+(F<<5&4294967295|F>>>27),F=L+(k^S&(D^k))+G[14]+3275163606&4294967295,L=D+(F<<9&4294967295|F>>>23),F=S+(D^k&(L^D))+G[3]+4107603335&4294967295,S=L+(F<<14&4294967295|F>>>18),F=k+(L^D&(S^L))+G[8]+1163531501&4294967295,k=S+(F<<20&4294967295|F>>>12),F=D+(S^L&(k^S))+G[13]+2850285829&4294967295,D=k+(F<<5&4294967295|F>>>27),F=L+(k^S&(D^k))+G[2]+4243563512&4294967295,L=D+(F<<9&4294967295|F>>>23),F=S+(D^k&(L^D))+G[7]+1735328473&4294967295,S=L+(F<<14&4294967295|F>>>18),F=k+(L^D&(S^L))+G[12]+2368359562&4294967295,k=S+(F<<20&4294967295|F>>>12),F=D+(k^S^L)+G[5]+4294588738&4294967295,D=k+(F<<4&4294967295|F>>>28),F=L+(D^k^S)+G[8]+2272392833&4294967295,L=D+(F<<11&4294967295|F>>>21),F=S+(L^D^k)+G[11]+1839030562&4294967295,S=L+(F<<16&4294967295|F>>>16),F=k+(S^L^D)+G[14]+4259657740&4294967295,k=S+(F<<23&4294967295|F>>>9),F=D+(k^S^L)+G[1]+2763975236&4294967295,D=k+(F<<4&4294967295|F>>>28),F=L+(D^k^S)+G[4]+1272893353&4294967295,L=D+(F<<11&4294967295|F>>>21),F=S+(L^D^k)+G[7]+4139469664&4294967295,S=L+(F<<16&4294967295|F>>>16),F=k+(S^L^D)+G[10]+3200236656&4294967295,k=S+(F<<23&4294967295|F>>>9),F=D+(k^S^L)+G[13]+681279174&4294967295,D=k+(F<<4&4294967295|F>>>28),F=L+(D^k^S)+G[0]+3936430074&4294967295,L=D+(F<<11&4294967295|F>>>21),F=S+(L^D^k)+G[3]+3572445317&4294967295,S=L+(F<<16&4294967295|F>>>16),F=k+(S^L^D)+G[6]+76029189&4294967295,k=S+(F<<23&4294967295|F>>>9),F=D+(k^S^L)+G[9]+3654602809&4294967295,D=k+(F<<4&4294967295|F>>>28),F=L+(D^k^S)+G[12]+3873151461&4294967295,L=D+(F<<11&4294967295|F>>>21),F=S+(L^D^k)+G[15]+530742520&4294967295,S=L+(F<<16&4294967295|F>>>16),F=k+(S^L^D)+G[2]+3299628645&4294967295,k=S+(F<<23&4294967295|F>>>9),F=D+(S^(k|~L))+G[0]+4096336452&4294967295,D=k+(F<<6&4294967295|F>>>26),F=L+(k^(D|~S))+G[7]+1126891415&4294967295,L=D+(F<<10&4294967295|F>>>22),F=S+(D^(L|~k))+G[14]+2878612391&4294967295,S=L+(F<<15&4294967295|F>>>17),F=k+(L^(S|~D))+G[5]+4237533241&4294967295,k=S+(F<<21&4294967295|F>>>11),F=D+(S^(k|~L))+G[12]+1700485571&4294967295,D=k+(F<<6&4294967295|F>>>26),F=L+(k^(D|~S))+G[3]+2399980690&4294967295,L=D+(F<<10&4294967295|F>>>22),F=S+(D^(L|~k))+G[10]+4293915773&4294967295,S=L+(F<<15&4294967295|F>>>17),F=k+(L^(S|~D))+G[1]+2240044497&4294967295,k=S+(F<<21&4294967295|F>>>11),F=D+(S^(k|~L))+G[8]+1873313359&4294967295,D=k+(F<<6&4294967295|F>>>26),F=L+(k^(D|~S))+G[15]+4264355552&4294967295,L=D+(F<<10&4294967295|F>>>22),F=S+(D^(L|~k))+G[6]+2734768916&4294967295,S=L+(F<<15&4294967295|F>>>17),F=k+(L^(S|~D))+G[13]+1309151649&4294967295,k=S+(F<<21&4294967295|F>>>11),F=D+(S^(k|~L))+G[4]+4149444226&4294967295,D=k+(F<<6&4294967295|F>>>26),F=L+(k^(D|~S))+G[11]+3174756917&4294967295,L=D+(F<<10&4294967295|F>>>22),F=S+(D^(L|~k))+G[2]+718787259&4294967295,S=L+(F<<15&4294967295|F>>>17),F=k+(L^(S|~D))+G[9]+3951481745&4294967295,V.g[0]=V.g[0]+D&4294967295,V.g[1]=V.g[1]+(S+(F<<21&4294967295|F>>>11))&4294967295,V.g[2]=V.g[2]+S&4294967295,V.g[3]=V.g[3]+L&4294967295}r.prototype.v=function(V,D){D===void 0&&(D=V.length);const k=D-this.blockSize,G=this.C;let S=this.h,L=0;for(;L<D;){if(S==0)for(;L<=k;)i(this,V,L),L+=this.blockSize;if(typeof V=="string"){for(;L<D;)if(G[S++]=V.charCodeAt(L++),S==this.blockSize){i(this,G),S=0;break}}else for(;L<D;)if(G[S++]=V[L++],S==this.blockSize){i(this,G),S=0;break}}this.h=S,this.o+=D},r.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var D=1;D<V.length-8;++D)V[D]=0;D=this.o*8;for(var k=V.length-8;k<V.length;++k)V[k]=D&255,D/=256;for(this.v(V),V=Array(16),D=0,k=0;k<4;++k)for(let G=0;G<32;G+=8)V[D++]=this.g[k]>>>G&255;return V};function a(V,D){var k=d;return Object.prototype.hasOwnProperty.call(k,V)?k[V]:k[V]=D(V)}function c(V,D){this.h=D;const k=[];let G=!0;for(let S=V.length-1;S>=0;S--){const L=V[S]|0;G&&L==D||(k[S]=L,G=!1)}this.g=k}var d={};function h(V){return-128<=V&&V<128?a(V,function(D){return new c([D|0],D<0?-1:0)}):new c([V|0],V<0?-1:0)}function f(V){if(isNaN(V)||!isFinite(V))return x;if(V<0)return I(f(-V));const D=[];let k=1;for(let G=0;V>=k;G++)D[G]=V/k|0,k*=4294967296;return new c(D,0)}function p(V,D){if(V.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(V.charAt(0)=="-")return I(p(V.substring(1),D));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=f(Math.pow(D,8));let G=x;for(let L=0;L<V.length;L+=8){var S=Math.min(8,V.length-L);const F=parseInt(V.substring(L,L+S),D);S<8?(S=f(Math.pow(D,S)),G=G.j(S).add(f(F))):(G=G.j(k),G=G.add(f(F)))}return G}var x=h(0),N=h(1),b=h(16777216);n=c.prototype,n.m=function(){if(C(this))return-I(this).m();let V=0,D=1;for(let k=0;k<this.g.length;k++){const G=this.i(k);V+=(G>=0?G:4294967296+G)*D,D*=4294967296}return V},n.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(E(this))return"0";if(C(this))return"-"+I(this).toString(V);const D=f(Math.pow(V,6));var k=this;let G="";for(;;){const S=z(k,D).g;k=R(k,S.j(D));let L=((k.g.length>0?k.g[0]:k.h)>>>0).toString(V);if(k=S,E(k))return L+G;for(;L.length<6;)L="0"+L;G=L+G}},n.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function E(V){if(V.h!=0)return!1;for(let D=0;D<V.g.length;D++)if(V.g[D]!=0)return!1;return!0}function C(V){return V.h==-1}n.l=function(V){return V=R(this,V),C(V)?-1:E(V)?0:1};function I(V){const D=V.g.length,k=[];for(let G=0;G<D;G++)k[G]=~V.g[G];return new c(k,~V.h).add(N)}n.abs=function(){return C(this)?I(this):this},n.add=function(V){const D=Math.max(this.g.length,V.g.length),k=[];let G=0;for(let S=0;S<=D;S++){let L=G+(this.i(S)&65535)+(V.i(S)&65535),F=(L>>>16)+(this.i(S)>>>16)+(V.i(S)>>>16);G=F>>>16,L&=65535,F&=65535,k[S]=F<<16|L}return new c(k,k[k.length-1]&-2147483648?-1:0)};function R(V,D){return V.add(I(D))}n.j=function(V){if(E(this)||E(V))return x;if(C(this))return C(V)?I(this).j(I(V)):I(I(this).j(V));if(C(V))return I(this.j(I(V)));if(this.l(b)<0&&V.l(b)<0)return f(this.m()*V.m());const D=this.g.length+V.g.length,k=[];for(var G=0;G<2*D;G++)k[G]=0;for(G=0;G<this.g.length;G++)for(let S=0;S<V.g.length;S++){const L=this.i(G)>>>16,F=this.i(G)&65535,se=V.i(S)>>>16,ye=V.i(S)&65535;k[2*G+2*S]+=F*ye,U(k,2*G+2*S),k[2*G+2*S+1]+=L*ye,U(k,2*G+2*S+1),k[2*G+2*S+1]+=F*se,U(k,2*G+2*S+1),k[2*G+2*S+2]+=L*se,U(k,2*G+2*S+2)}for(V=0;V<D;V++)k[V]=k[2*V+1]<<16|k[2*V];for(V=D;V<2*D;V++)k[V]=0;return new c(k,0)};function U(V,D){for(;(V[D]&65535)!=V[D];)V[D+1]+=V[D]>>>16,V[D]&=65535,D++}function $(V,D){this.g=V,this.h=D}function z(V,D){if(E(D))throw Error("division by zero");if(E(V))return new $(x,x);if(C(V))return D=z(I(V),D),new $(I(D.g),I(D.h));if(C(D))return D=z(V,I(D)),new $(I(D.g),D.h);if(V.g.length>30){if(C(V)||C(D))throw Error("slowDivide_ only works with positive integers.");for(var k=N,G=D;G.l(V)<=0;)k=ue(k),G=ue(G);var S=ie(k,1),L=ie(G,1);for(G=ie(G,2),k=ie(k,2);!E(G);){var F=L.add(G);F.l(V)<=0&&(S=S.add(k),L=F),G=ie(G,1),k=ie(k,1)}return D=R(V,S.j(D)),new $(S,D)}for(S=x;V.l(D)>=0;){for(k=Math.max(1,Math.floor(V.m()/D.m())),G=Math.ceil(Math.log(k)/Math.LN2),G=G<=48?1:Math.pow(2,G-48),L=f(k),F=L.j(D);C(F)||F.l(V)>0;)k-=G,L=f(k),F=L.j(D);E(L)&&(L=N),S=S.add(L),V=R(V,F)}return new $(S,V)}n.B=function(V){return z(this,V).h},n.and=function(V){const D=Math.max(this.g.length,V.g.length),k=[];for(let G=0;G<D;G++)k[G]=this.i(G)&V.i(G);return new c(k,this.h&V.h)},n.or=function(V){const D=Math.max(this.g.length,V.g.length),k=[];for(let G=0;G<D;G++)k[G]=this.i(G)|V.i(G);return new c(k,this.h|V.h)},n.xor=function(V){const D=Math.max(this.g.length,V.g.length),k=[];for(let G=0;G<D;G++)k[G]=this.i(G)^V.i(G);return new c(k,this.h^V.h)};function ue(V){const D=V.g.length+1,k=[];for(let G=0;G<D;G++)k[G]=V.i(G)<<1|V.i(G-1)>>>31;return new c(k,V.h)}function ie(V,D){const k=D>>5;D%=32;const G=V.g.length-k,S=[];for(let L=0;L<G;L++)S[L]=D>0?V.i(L+k)>>>D|V.i(L+k+1)<<32-D:V.i(L+k);return new c(S,V.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,dA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=p,lu=c}).apply(typeof Z5<"u"?Z5:typeof self<"u"?self:typeof window<"u"?window:{});var wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var hA,Rf,fA,Bp,Vv,mA,pA,gA;(function(){var n,e=Object.defineProperty;function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof wp=="object"&&wp];for(var T=0;T<v.length;++T){var O=v[T];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=t(this);function i(v,T){if(T)e:{var O=r;v=v.split(".");for(var ee=0;ee<v.length-1;ee++){var je=v[ee];if(!(je in O))break e;O=O[je]}v=v[v.length-1],ee=O[v],T=T(ee),T!=ee&&T!=null&&e(O,v,{configurable:!0,writable:!0,value:T})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(T){var O=[],ee;for(ee in T)Object.prototype.hasOwnProperty.call(T,ee)&&O.push([ee,T[ee]]);return O}});var a=a||{},c=this||self;function d(v){var T=typeof v;return T=="object"&&v!=null||T=="function"}function h(v,T,O){return v.call.apply(v.bind,arguments)}function f(v,T,O){return f=h,f.apply(null,arguments)}function p(v,T){var O=Array.prototype.slice.call(arguments,1);return function(){var ee=O.slice();return ee.push.apply(ee,arguments),v.apply(this,ee)}}function x(v,T){function O(){}O.prototype=T.prototype,v.Z=T.prototype,v.prototype=new O,v.prototype.constructor=v,v.Ob=function(ee,je,De){for(var nt=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)nt[Yt-2]=arguments[Yt];return T.prototype[je].apply(ee,nt)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function b(v){const T=v.length;if(T>0){const O=Array(T);for(let ee=0;ee<T;ee++)O[ee]=v[ee];return O}return[]}function E(v,T){for(let ee=1;ee<arguments.length;ee++){const je=arguments[ee];var O=typeof je;if(O=O!="object"?O:je?Array.isArray(je)?"array":O:"null",O=="array"||O=="object"&&typeof je.length=="number"){O=v.length||0;const De=je.length||0;v.length=O+De;for(let nt=0;nt<De;nt++)v[O+nt]=je[nt]}else v.push(je)}}class C{constructor(T,O){this.i=T,this.j=O,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function I(v){c.setTimeout(()=>{throw v},0)}function R(){var v=V;let T=null;return v.g&&(T=v.g,v.g=v.g.next,v.g||(v.h=null),T.next=null),T}class U{constructor(){this.h=this.g=null}add(T,O){const ee=$.get();ee.set(T,O),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var $=new C(()=>new z,v=>v.reset());class z{constructor(){this.next=this.g=this.h=null}set(T,O){this.h=T,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ie=!1,V=new U,D=()=>{const v=Promise.resolve(void 0);ue=()=>{v.then(k)}};function k(){for(var v;v=R();){try{v.h.call(v.g)}catch(O){I(O)}var T=$;T.j(v),T.h<100&&(T.h++,v.next=T.g,T.g=v)}ie=!1}function G(){this.u=this.u,this.C=this.C}G.prototype.u=!1,G.prototype.dispose=function(){this.u||(this.u=!0,this.N())},G.prototype[Symbol.dispose]=function(){this.dispose()},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(v,T){this.type=v,this.g=this.target=T,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,T=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const O=()=>{};c.addEventListener("test",O,T),c.removeEventListener("test",O,T)}catch{}return v})();function F(v){return/^[\s\xa0]*$/.test(v)}function se(v,T){S.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,T)}x(se,S),se.prototype.init=function(v,T){const O=this.type=v.type,ee=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=T,T=v.relatedTarget,T||(O=="mouseover"?T=v.fromElement:O=="mouseout"&&(T=v.toElement)),this.relatedTarget=T,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),Q=0;function ce(v,T,O,ee,je){this.listener=v,this.proxy=null,this.src=T,this.type=O,this.capture=!!ee,this.ha=je,this.key=++Q,this.da=this.fa=!1}function me(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Se(v,T,O){for(const ee in v)T.call(O,v[ee],ee,v)}function Fe(v,T){for(const O in v)T.call(void 0,v[O],O,v)}function X(v){const T={};for(const O in v)T[O]=v[O];return T}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(v,T){let O,ee;for(let je=1;je<arguments.length;je++){ee=arguments[je];for(O in ee)v[O]=ee[O];for(let De=0;De<q.length;De++)O=q[De],Object.prototype.hasOwnProperty.call(ee,O)&&(v[O]=ee[O])}}function re(v){this.src=v,this.g={},this.h=0}re.prototype.add=function(v,T,O,ee,je){const De=v.toString();v=this.g[De],v||(v=this.g[De]=[],this.h++);const nt=pe(v,T,ee,je);return nt>-1?(T=v[nt],O||(T.fa=!1)):(T=new ce(T,this.src,De,!!ee,je),T.fa=O,v.push(T)),T};function fe(v,T){const O=T.type;if(O in v.g){var ee=v.g[O],je=Array.prototype.indexOf.call(ee,T,void 0),De;(De=je>=0)&&Array.prototype.splice.call(ee,je,1),De&&(me(T),v.g[O].length==0&&(delete v.g[O],v.h--))}}function pe(v,T,O,ee){for(let je=0;je<v.length;++je){const De=v[je];if(!De.da&&De.listener==T&&De.capture==!!O&&De.ha==ee)return je}return-1}var we="closure_lm_"+(Math.random()*1e6|0),Pe={};function Re(v,T,O,ee,je){if(Array.isArray(T)){for(let De=0;De<T.length;De++)Re(v,T[De],O,ee,je);return null}return O=ot(O),v&&v[ye]?v.J(T,O,d(ee)?!!ee.capture:!1,je):Ue(v,T,O,!1,ee,je)}function Ue(v,T,O,ee,je,De){if(!T)throw Error("Invalid event type");const nt=d(je)?!!je.capture:!!je;let Yt=Ze(v);if(Yt||(v[we]=Yt=new re(v)),O=Yt.add(T,O,ee,nt,De),O.proxy)return O;if(ee=et(),O.proxy=ee,ee.src=v,ee.listener=O,v.addEventListener)L||(je=nt),je===void 0&&(je=!1),v.addEventListener(T.toString(),ee,je);else if(v.attachEvent)v.attachEvent(Be(T.toString()),ee);else if(v.addListener&&v.removeListener)v.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return O}function et(){function v(O){return T.call(v.src,v.listener,O)}const T=te;return v}function it(v,T,O,ee,je){if(Array.isArray(T))for(var De=0;De<T.length;De++)it(v,T[De],O,ee,je);else ee=d(ee)?!!ee.capture:!!ee,O=ot(O),v&&v[ye]?(v=v.i,De=String(T).toString(),De in v.g&&(T=v.g[De],O=pe(T,O,ee,je),O>-1&&(me(T[O]),Array.prototype.splice.call(T,O,1),T.length==0&&(delete v.g[De],v.h--)))):v&&(v=Ze(v))&&(T=v.g[T.toString()],v=-1,T&&(v=pe(T,O,ee,je)),(O=v>-1?T[v]:null)&&Ne(O))}function Ne(v){if(typeof v!="number"&&v&&!v.da){var T=v.src;if(T&&T[ye])fe(T.i,v);else{var O=v.type,ee=v.proxy;T.removeEventListener?T.removeEventListener(O,ee,v.capture):T.detachEvent?T.detachEvent(Be(O),ee):T.addListener&&T.removeListener&&T.removeListener(ee),(O=Ze(T))?(fe(O,v),O.h==0&&(O.src=null,T[we]=null)):me(v)}}}function Be(v){return v in Pe?Pe[v]:Pe[v]="on"+v}function te(v,T){if(v.da)v=!0;else{T=new se(T,this);const O=v.listener,ee=v.ha||v.src;v.fa&&Ne(v),v=O.call(ee,T)}return v}function Ze(v){return v=v[we],v instanceof re?v:null}var ct="__closure_events_fn_"+(Math.random()*1e9>>>0);function ot(v){return typeof v=="function"?v:(v[ct]||(v[ct]=function(T){return v.handleEvent(T)}),v[ct])}function ze(){G.call(this),this.i=new re(this),this.M=this,this.G=null}x(ze,G),ze.prototype[ye]=!0,ze.prototype.removeEventListener=function(v,T,O,ee){it(this,v,T,O,ee)};function at(v,T){var O,ee=v.G;if(ee)for(O=[];ee;ee=ee.G)O.push(ee);if(v=v.M,ee=T.type||T,typeof T=="string")T=new S(T,v);else if(T instanceof S)T.target=T.target||v;else{var je=T;T=new S(ee,v),J(T,je)}je=!0;let De,nt;if(O)for(nt=O.length-1;nt>=0;nt--)De=T.g=O[nt],je=lt(De,ee,!0,T)&&je;if(De=T.g=v,je=lt(De,ee,!0,T)&&je,je=lt(De,ee,!1,T)&&je,O)for(nt=0;nt<O.length;nt++)De=T.g=O[nt],je=lt(De,ee,!1,T)&&je}ze.prototype.N=function(){if(ze.Z.N.call(this),this.i){var v=this.i;for(const T in v.g){const O=v.g[T];for(let ee=0;ee<O.length;ee++)me(O[ee]);delete v.g[T],v.h--}}this.G=null},ze.prototype.J=function(v,T,O,ee){return this.i.add(String(v),T,!1,O,ee)},ze.prototype.K=function(v,T,O,ee){return this.i.add(String(v),T,!0,O,ee)};function lt(v,T,O,ee){if(T=v.i.g[String(T)],!T)return!0;T=T.concat();let je=!0;for(let De=0;De<T.length;++De){const nt=T[De];if(nt&&!nt.da&&nt.capture==O){const Yt=nt.listener,or=nt.ha||nt.src;nt.fa&&fe(v.i,nt),je=Yt.call(or,ee)!==!1&&je}}return je&&!ee.defaultPrevented}function Rt(v,T){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=f(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:c.setTimeout(v,T||0)}function At(v){v.g=Rt(()=>{v.g=null,v.i&&(v.i=!1,At(v))},v.l);const T=v.h;v.h=null,v.m.apply(null,T)}class Jt extends G{constructor(T,O){super(),this.m=T,this.l=O,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:At(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rn(v){G.call(this),this.h=v,this.g={}}x(rn,G);var $t=[];function cn(v){Se(v.g,function(T,O){this.g.hasOwnProperty(O)&&Ne(T)},v),v.g={}}rn.prototype.N=function(){rn.Z.N.call(this),cn(this)},rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tn=c.JSON.stringify,xt=c.JSON.parse,Kt=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function wt(){}function xr(){}var nn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function It(){S.call(this,"d")}x(It,S);function Bt(){S.call(this,"c")}x(Bt,S);var Zt={},jt=null;function Pn(){return jt=jt||new ze}Zt.Ia="serverreachability";function qt(v){S.call(this,Zt.Ia,v)}x(qt,S);function Vt(v){const T=Pn();at(T,new qt(T))}Zt.STAT_EVENT="statevent";function Fn(v,T){S.call(this,Zt.STAT_EVENT,v),this.stat=T}x(Fn,S);function St(v){const T=Pn();at(T,new Fn(T,v))}Zt.Ja="timingevent";function _t(v,T){S.call(this,Zt.Ja,v),this.size=T}x(_t,S);function un(v,T){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},T)}function bi(){this.g=!0}bi.prototype.ua=function(){this.g=!1};function ci(v,T,O,ee,je,De){v.info(function(){if(v.g)if(De){var nt="",Yt=De.split("&");for(let hn=0;hn<Yt.length;hn++){var or=Yt[hn].split("=");if(or.length>1){const Un=or[0];or=or[1];const fi=Un.split("_");nt=fi.length>=2&&fi[1]=="type"?nt+(Un+"="+or+"&"):nt+(Un+"=redacted&")}}}else nt=null;else nt=De;return"XMLHTTP REQ ("+ee+") [attempt "+je+"]: "+T+`
`+O+`
`+nt})}function Hs(v,T,O,ee,je,De,nt){v.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+je+"]: "+T+`
`+O+`
`+De+" "+nt})}function ei(v,T,O,ee){v.info(function(){return"XMLHTTP TEXT ("+T+"): "+pa(v,O)+(ee?" "+ee:"")})}function Tt(v,T){v.info(function(){return"TIMEOUT: "+T})}bi.prototype.info=function(){};function pa(v,T){if(!v.g)return T;if(!T)return null;try{const De=JSON.parse(T);if(De){for(v=0;v<De.length;v++)if(Array.isArray(De[v])){var O=De[v];if(!(O.length<2)){var ee=O[1];if(Array.isArray(ee)&&!(ee.length<1)){var je=ee[0];if(je!="noop"&&je!="stop"&&je!="close")for(let nt=1;nt<ee.length;nt++)ee[nt]=""}}}}return tn(De)}catch{return T}}var Ji={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Mi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Oi;function Yn(){}x(Yn,wt),Yn.prototype.g=function(){return new XMLHttpRequest},Oi=new Yn;function sr(v){return encodeURIComponent(String(v))}function zr(v){var T=1;v=v.split(":");const O=[];for(;T>0&&v.length;)O.push(v.shift()),T--;return v.length&&O.push(v.join(":")),O}function wi(v,T,O,ee){this.j=v,this.i=T,this.l=O,this.S=ee||1,this.V=new rn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ui}function ui(){this.i=null,this.g="",this.h=!1}var qn={},Qn={};function Hr(v,T,O){v.M=1,v.A=qa(Er(T)),v.u=O,v.R=!0,Fi(v,null)}function Fi(v,T){v.F=Date.now(),qi(v),v.B=Er(v.A);var O=v.B,ee=v.S;Array.isArray(ee)||(ee=[String(ee)]),$o(O.i,"t",ee),v.C=0,O=v.j.L,v.h=new ui,v.g=ht(v.j,O?T:null,!v.u),v.P>0&&(v.O=new Jt(f(v.Y,v,v.g),v.P)),T=v.V,O=v.g,ee=v.ba;var je="readystatechange";Array.isArray(je)||(je&&($t[0]=je.toString()),je=$t);for(let De=0;De<je.length;De++){const nt=Re(O,je[De],ee||T.handleEvent,!1,T.h||T);if(!nt)break;T.g[nt.key]=nt}T=v.J?X(v.J):{},v.u?(v.v||(v.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,T)):(v.v="GET",v.g.ea(v.B,v.v,null,T)),Vt(),ci(v.i,v.v,v.B,v.l,v.S,v.u)}wi.prototype.ba=function(v){v=v.target;const T=this.O;T&&is(v)==3?T.j():this.Y(v)},wi.prototype.Y=function(v){try{if(v==this.g)e:{const Yt=is(this.g),or=this.g.ya(),hn=this.g.ca();if(!(Yt<3)&&(Yt!=3||this.g&&(this.h.h||this.g.la()||Mr(this.g)))){this.K||Yt!=4||or==7||(or==8||hn<=0?Vt(3):Vt(2)),Zi(this);var T=this.g.ca();this.X=T;var O=gs(this);if(this.o=T==200,Hs(this.i,this.v,this.B,this.l,this.S,Yt,T),this.o){if(this.U&&!this.L){t:{if(this.g){var ee,je=this.g;if((ee=je.g?je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(ee)){var De=ee;break t}}De=null}if(v=De)ei(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vs(this,v);else{this.o=!1,this.m=3,St(12),es(this),_i(this);break e}}if(this.R){v=!0;let Un;for(;!this.K&&this.C<O.length;)if(Un=Rs(this,O),Un==Qn){Yt==4&&(this.m=4,St(14),v=!1),ei(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==qn){this.m=4,St(15),ei(this.i,this.l,O,"[Invalid Chunk]"),v=!1;break}else ei(this.i,this.l,Un,null),vs(this,Un);if(Fa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yt!=4||O.length!=0||this.h.h||(this.m=1,St(16),v=!1),this.o=this.o&&v,!v)ei(this.i,this.l,O,"[Invalid Chunked Response]"),es(this),_i(this);else if(O.length>0&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.aa&&!nt.P&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Ko(nt),nt.P=!0,St(11))}}else ei(this.i,this.l,O,null),vs(this,O);Yt==4&&es(this),this.o&&!this.K&&(Yt==4?oe(this.j,this):(this.o=!1,qi(this)))}else $s(this.g),T==400&&O.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),es(this),_i(this)}}}catch{}finally{}};function gs(v){if(!Fa(v))return v.g.la();const T=Mr(v.g);if(T==="")return"";let O="";const ee=T.length,je=is(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return es(v),_i(v),"";v.h.i=new c.TextDecoder}for(let De=0;De<ee;De++)v.h.h=!0,O+=v.h.i.decode(T[De],{stream:!(je&&De==ee-1)});return T.length=0,v.h.g+=O,v.C=0,v.h.g}function Fa(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function Rs(v,T){var O=v.C,ee=T.indexOf(`
`,O);return ee==-1?Qn:(O=Number(T.substring(O,ee)),isNaN(O)?qn:(ee+=1,ee+O>T.length?Qn:(T=T.slice(ee,ee+O),v.C=ee+O,T)))}wi.prototype.cancel=function(){this.K=!0,es(this)};function qi(v){v.T=Date.now()+v.H,ga(v,v.H)}function ga(v,T){if(v.D!=null)throw Error("WatchDog timer not null");v.D=un(f(v.aa,v),T)}function Zi(v){v.D&&(c.clearTimeout(v.D),v.D=null)}wi.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(Tt(this.i,this.B),this.M!=2&&(Vt(),St(17)),es(this),this.m=2,_i(this)):ga(this,this.T-v)};function _i(v){v.j.I==0||v.K||oe(v.j,v)}function es(v){Zi(v);var T=v.O;T&&typeof T.dispose=="function"&&T.dispose(),v.O=null,cn(v.V),v.g&&(T=v.g,v.g=null,T.abort(),T.dispose())}function vs(v,T){try{var O=v.j;if(O.I!=0&&(O.g==v||Ls(O.h,v))){if(!v.L&&Ls(O.h,v)&&O.I==3){try{var ee=O.Ba.g.parse(T)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var je=ee;if(je[0]==0){e:if(!O.v){if(O.g)if(O.g.F+3e3<v.F)B(O),Ws(O);else break e;Ds(O),St(18)}}else O.xa=je[1],0<O.xa-O.K&&je[2]<37500&&O.F&&O.A==0&&!O.C&&(O.C=un(f(O.Va,O),6e3));ys(O.h)<=1&&O.ta&&(O.ta=void 0)}else Ae(O,11)}else if((v.L||O.g==v)&&B(O),!F(T))for(je=O.Ba.g.parse(T),T=0;T<je.length;T++){let hn=je[T];const Un=hn[0];if(!(Un<=O.K))if(O.K=Un,hn=hn[1],O.I==2)if(hn[0]=="c"){O.M=hn[1],O.ba=hn[2];const fi=hn[3];fi!=null&&(O.ka=fi,O.j.info("VER="+O.ka));const Ai=hn[4];Ai!=null&&(O.za=Ai,O.j.info("SVER="+O.za));const Xn=hn[5];Xn!=null&&typeof Xn=="number"&&Xn>0&&(ee=1.5*Xn,O.O=ee,O.j.info("backChannelRequestTimeoutMs_="+ee)),ee=O;const Si=v.g;if(Si){const Ms=Si.g?Si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ms){var De=ee.h;De.g||Ms.indexOf("spdy")==-1&&Ms.indexOf("quic")==-1&&Ms.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(uo(De,De.h),De.h=null))}if(ee.G){const Ha=Si.g?Si.g.getResponseHeader("X-HTTP-Session-Id"):null;Ha&&(ee.wa=Ha,bn(ee.J,ee.G,Ha))}}O.I=3,O.l&&O.l.ra(),O.aa&&(O.T=Date.now()-v.F,O.j.info("Handshake RTT: "+O.T+"ms")),ee=O;var nt=v;if(ee.na=Xe(ee,ee.L?ee.ba:null,ee.W),nt.L){zo(ee.h,nt);var Yt=nt,or=ee.O;or&&(Yt.H=or),Yt.D&&(Zi(Yt),qi(Yt)),ee.g=nt}else kl(ee);O.i.length>0&&bs(O)}else hn[0]!="stop"&&hn[0]!="close"||Ae(O,7);else O.I==3&&(hn[0]=="stop"||hn[0]=="close"?hn[0]=="stop"?Ae(O,7):za(O):hn[0]!="noop"&&O.l&&O.l.qa(hn),O.A=0)}}Vt(4)}catch{}}var br=class{constructor(v,T){this.g=v,this.map=T}};function Bo(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vi(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function ys(v){return v.h?1:v.g?v.g.size:0}function Ls(v,T){return v.h?v.h==T:v.g?v.g.has(T):!1}function uo(v,T){v.g?v.g.add(T):v.h=T}function zo(v,T){v.h&&v.h==T?v.h=null:v.g&&v.g.has(T)&&v.g.delete(T)}Bo.prototype.cancel=function(){if(this.i=Ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Ho(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let T=v.i;for(const O of v.g.values())T=T.concat(O.G);return T}return b(v.i)}var jl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ts(v,T){if(v){v=v.split("&");for(let O=0;O<v.length;O++){const ee=v[O].indexOf("=");let je,De=null;ee>=0?(je=v[O].substring(0,ee),De=v[O].substring(ee+1)):je=v[O],T(je,De?decodeURIComponent(De.replace(/\+/g," ")):"")}}}function di(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;v instanceof di?(this.l=v.l,mn(this,v.j),this.o=v.o,this.g=v.g,va(this,v.u),this.h=v.h,xs(this,Go(v.i)),this.m=v.m):v&&(T=String(v).match(jl))?(this.l=!1,mn(this,T[1]||"",!0),this.o=Dr(T[2]||""),this.g=Dr(T[3]||"",!0),va(this,T[4]),this.h=Dr(T[5]||"",!0),xs(this,T[6]||"",!0),this.m=Dr(T[7]||"")):(this.l=!1,this.i=new ya(null,this.l))}di.prototype.toString=function(){const v=[];var T=this.j;T&&v.push(mr(T,ho,!0),":");var O=this.g;return(O||T=="file")&&(v.push("//"),(T=this.o)&&v.push(mr(T,ho,!0),"@"),v.push(sr(O).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.u,O!=null&&v.push(":",String(O))),(O=this.h)&&(this.g&&O.charAt(0)!="/"&&v.push("/"),v.push(mr(O,O.charAt(0)=="/"?Tl:xc,!0))),(O=this.i.toString())&&v.push("?",O),(O=this.m)&&v.push("#",mr(O,Cl)),v.join("")},di.prototype.resolve=function(v){const T=Er(this);let O=!!v.j;O?mn(T,v.j):O=!!v.o,O?T.o=v.o:O=!!v.g,O?T.g=v.g:O=v.u!=null;var ee=v.h;if(O)va(T,v.u);else if(O=!!v.h){if(ee.charAt(0)!="/")if(this.g&&!this.h)ee="/"+ee;else{var je=T.h.lastIndexOf("/");je!=-1&&(ee=T.h.slice(0,je+1)+ee)}if(je=ee,je==".."||je==".")ee="";else if(je.indexOf("./")!=-1||je.indexOf("/.")!=-1){ee=je.lastIndexOf("/",0)==0,je=je.split("/");const De=[];for(let nt=0;nt<je.length;){const Yt=je[nt++];Yt=="."?ee&&nt==je.length&&De.push(""):Yt==".."?((De.length>1||De.length==1&&De[0]!="")&&De.pop(),ee&&nt==je.length&&De.push("")):(De.push(Yt),ee=!0)}ee=De.join("/")}else ee=je}return O?T.h=ee:O=v.i.toString()!=="",O?xs(T,Go(v.i)):O=!!v.m,O&&(T.m=v.m),T};function Er(v){return new di(v)}function mn(v,T,O){v.j=O?Dr(T,!0):T,v.j&&(v.j=v.j.replace(/:$/,""))}function va(v,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);v.u=T}else v.u=null}function xs(v,T,O){T instanceof ya?(v.i=T,Ui(v.i,v.l)):(O||(T=mr(T,Ni)),v.i=new ya(T,v.l))}function bn(v,T,O){v.i.set(T,O)}function qa(v){return bn(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function Dr(v,T){return v?T?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function mr(v,T,O){return typeof v=="string"?(v=encodeURI(v).replace(T,jr),O&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function jr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var ho=/[#\/\?@]/g,xc=/[#\?:]/g,Tl=/[#\?]/g,Ni=/[#\?@]/g,Cl=/#/g;function ya(v,T){this.h=this.g=null,this.i=v||null,this.j=!!T}function ti(v){v.g||(v.g=new Map,v.h=0,v.i&&ts(v.i,function(T,O){v.add(decodeURIComponent(T.replace(/\+/g," ")),O)}))}n=ya.prototype,n.add=function(v,T){ti(this),this.i=null,v=xa(this,v);let O=this.g.get(v);return O||this.g.set(v,O=[]),O.push(T),this.h+=1,this};function Va(v,T){ti(v),T=xa(v,T),v.g.has(T)&&(v.i=null,v.h-=v.g.get(T).length,v.g.delete(T))}function Il(v,T){return ti(v),T=xa(v,T),v.g.has(T)}n.forEach=function(v,T){ti(this),this.g.forEach(function(O,ee){O.forEach(function(je){v.call(T,je,ee,this)},this)},this)};function Rl(v,T){ti(v);let O=[];if(typeof T=="string")Il(v,T)&&(O=O.concat(v.g.get(xa(v,T))));else for(v=Array.from(v.g.values()),T=0;T<v.length;T++)O=O.concat(v[T]);return O}n.set=function(v,T){return ti(this),this.i=null,v=xa(this,v),Il(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[T]),this.h+=1,this},n.get=function(v,T){return v?(v=Rl(this,v),v.length>0?String(v[0]):T):T};function $o(v,T,O){Va(v,T),O.length>0&&(v.i=null,v.g.set(xa(v,T),b(O)),v.h+=O.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],T=Array.from(this.g.keys());for(let ee=0;ee<T.length;ee++){var O=T[ee];const je=sr(O);O=Rl(this,O);for(let De=0;De<O.length;De++){let nt=je;O[De]!==""&&(nt+="="+sr(O[De])),v.push(nt)}}return this.i=v.join("&")};function Go(v){const T=new ya;return T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),T}function xa(v,T){return T=String(T),v.j&&(T=T.toLowerCase()),T}function Ui(v,T){T&&!v.j&&(ti(v),v.i=null,v.g.forEach(function(O,ee){const je=ee.toLowerCase();ee!=je&&(Va(this,ee),$o(this,je,O))},v)),v.j=T}function ks(v,T){const O=new bi;if(c.Image){const ee=new Image;ee.onload=p(Bi,O,"TestLoadImage: loaded",!0,T,ee),ee.onerror=p(Bi,O,"TestLoadImage: error",!1,T,ee),ee.onabort=p(Bi,O,"TestLoadImage: abort",!1,T,ee),ee.ontimeout=p(Bi,O,"TestLoadImage: timeout",!1,T,ee),c.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=v}else T(!1)}function ba(v,T){const O=new bi,ee=new AbortController,je=setTimeout(()=>{ee.abort(),Bi(O,"TestPingServer: timeout",!1,T)},1e4);fetch(v,{signal:ee.signal}).then(De=>{clearTimeout(je),De.ok?Bi(O,"TestPingServer: ok",!0,T):Bi(O,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(je),Bi(O,"TestPingServer: error",!1,T)})}function Bi(v,T,O,ee,je){try{je&&(je.onload=null,je.onerror=null,je.onabort=null,je.ontimeout=null),ee(O)}catch{}}function Ua(){this.g=new Kt}function Lt(v){this.i=v.Sb||null,this.h=v.ab||!1}x(Lt,wt),Lt.prototype.g=function(){return new fo(this.i,this.h)};function fo(v,T){ze.call(this),this.H=v,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(fo,ze),n=fo.prototype,n.open=function(v,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=T,this.readyState=1,ni(this)},n.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(T.body=v),(this.H||c).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ba(this)),this.readyState=0},n.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wo(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wo(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}n.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var T=v.value?v.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!v.done}))&&(this.response=this.responseText+=T)}v.done?Ba(this):ni(this),this.readyState==3&&Wo(this)}},n.Oa=function(v){this.g&&(this.response=this.responseText=v,Ba(this))},n.Na=function(v){this.g&&(this.response=v,Ba(this))},n.ga=function(){this.g&&Ba(this)};function Ba(v){v.readyState=4,v.l=null,v.j=null,v.B=null,ni(v)}n.setRequestHeader=function(v,T){this.A.append(v,T)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],T=this.h.entries();for(var O=T.next();!O.done;)O=O.value,v.push(O[0]+": "+O[1]),O=T.next();return v.join(`\r
`)};function ni(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function $r(v){let T="";return Se(v,function(O,ee){T+=ee,T+=":",T+=O,T+=`\r
`}),T}function mo(v,T,O){e:{for(ee in O){var ee=!1;break e}ee=!0}ee||(O=$r(O),typeof v=="string"?O!=null&&sr(O):bn(v,T,O))}function Vn(v){ze.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Vn,ze);var ns=/^https?$/i,po=["POST","PUT"];n=Vn.prototype,n.Fa=function(v){this.H=v},n.ea=function(v,T,O,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);T=T?T.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oi.g(),this.g.onreadystatechange=N(f(this.Ca,this));try{this.B=!0,this.g.open(T,String(v),!0),this.B=!1}catch(De){Ps(this,De);return}if(v=O||"",O=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var je in ee)O.set(je,ee[je]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const De of ee.keys())O.set(De,ee.get(De));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(O.keys()).find(De=>De.toLowerCase()=="content-type"),je=c.FormData&&v instanceof c.FormData,!(Array.prototype.indexOf.call(po,T,void 0)>=0)||ee||je||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,nt]of O)this.g.setRequestHeader(De,nt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(De){Ps(this,De)}};function Ps(v,T){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=T,v.o=5,Ll(v),wa(v)}function Ll(v){v.A||(v.A=!0,at(v,"complete"),at(v,"error"))}n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,at(this,"complete"),at(this,"abort"),wa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wa(this,!0)),Vn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?rs(this):this.Xa())},n.Xa=function(){rs(this)};function rs(v){if(v.h&&typeof a<"u"){if(v.v&&is(v)==4)setTimeout(v.Ca.bind(v),0);else if(at(v,"readystatechange"),is(v)==4){v.h=!1;try{const De=v.ca();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var O;if(!(O=T)){var ee;if(ee=De===0){let nt=String(v.D).match(jl)[1]||null;!nt&&c.self&&c.self.location&&(nt=c.self.location.protocol.slice(0,-1)),ee=!ns.test(nt?nt.toLowerCase():"")}O=ee}if(O)at(v,"complete"),at(v,"success");else{v.o=6;try{var je=is(v)>2?v.g.statusText:""}catch{je=""}v.l=je+" ["+v.ca()+"]",Ll(v)}}finally{wa(v)}}}}function wa(v,T){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const O=v.g;v.g=null,T||at(v,"ready");try{O.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function is(v){return v.g?v.g.readyState:0}n.ca=function(){try{return is(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(v){if(this.g){var T=this.g.responseText;return v&&T.indexOf(v)==0&&(T=T.substring(v.length)),xt(T)}};function Mr(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function $s(v){const T={};v=(v.g&&is(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<v.length;ee++){if(F(v[ee]))continue;var O=zr(v[ee]);const je=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const De=T[je]||[];T[je]=De,De.push(O)}Fe(T,function(ee){return ee.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function hi(v,T,O){return O&&O.internalChannelParams&&O.internalChannelParams[v]||T}function Gs(v){this.za=0,this.i=[],this.j=new bi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=hi("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=hi("baseRetryDelayMs",5e3,v),this.Za=hi("retryDelaySeedMs",1e4,v),this.Ta=hi("forwardChannelMaxRetries",2,v),this.va=hi("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new Bo(v&&v.concurrentRequestLimit),this.Ba=new Ua,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Gs.prototype,n.ka=8,n.I=1,n.connect=function(v,T,O,ee){St(0),this.W=v,this.H=T||{},O&&ee!==void 0&&(this.H.OSID=O,this.H.OAID=ee),this.F=this.X,this.J=Xe(this,null,this.W),bs(this)};function za(v){if(Ys(v),v.I==3){var T=v.V++,O=Er(v.J);if(bn(O,"SID",v.M),bn(O,"RID",T),bn(O,"TYPE","terminate"),ss(v,O),T=new wi(v,v.j,T),T.M=2,T.A=qa(Er(O)),O=!1,c.navigator&&c.navigator.sendBeacon)try{O=c.navigator.sendBeacon(T.A.toString(),"")}catch{}!O&&c.Image&&(new Image().src=T.A,O=!0),O||(T.g=ht(T.j,null),T.g.ea(T.A)),T.F=Date.now(),qi(T)}He(v)}function Ws(v){v.g&&(Ko(v),v.g.cancel(),v.g=null)}function Ys(v){Ws(v),v.v&&(c.clearTimeout(v.v),v.v=null),B(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&c.clearTimeout(v.m),v.m=null)}function bs(v){if(!Vi(v.h)&&!v.m){v.m=!0;var T=v.Ea;ue||D(),ie||(ue(),ie=!0),V.add(T,v),v.D=0}}function go(v,T){return ys(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=T.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=un(f(v.Ea,v,T),ve(v,v.D)),v.D++,!0)}n.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const je=new wi(this,this.j,v);let De=this.o;if(this.U&&(De?(De=X(De),J(De,this.U)):De=this.U),this.u!==null||this.R||(je.J=De,De=null),this.S)e:{for(var T=0,O=0;O<this.i.length;O++){t:{var ee=this.i[O];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(T+=ee,T>4096){T=O;break e}if(T===4096||O===this.i.length-1){T=O+1;break e}}T=1e3}else T=1e3;T=Ks(this,je,T),O=Er(this.J),bn(O,"RID",v),bn(O,"CVER",22),this.G&&bn(O,"X-HTTP-Session-Id",this.G),ss(this,O),De&&(this.R?T="headers="+sr($r(De))+"&"+T:this.u&&mo(O,this.u,De)),uo(this.h,je),this.Ra&&bn(O,"TYPE","init"),this.S?(bn(O,"$req",T),bn(O,"SID","null"),je.U=!0,Hr(je,O,null)):Hr(je,O,T),this.I=2}}else this.I==3&&(v?Yo(this,v):this.i.length==0||Vi(this.h)||Yo(this))};function Yo(v,T){var O;T?O=T.l:O=v.V++;const ee=Er(v.J);bn(ee,"SID",v.M),bn(ee,"RID",O),bn(ee,"AID",v.K),ss(v,ee),v.u&&v.o&&mo(ee,v.u,v.o),O=new wi(v,v.j,O,v.D+1),v.u===null&&(O.J=v.o),T&&(v.i=T.G.concat(v.i)),T=Ks(v,O,1e3),O.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),uo(v.h,O),Hr(O,ee,T)}function ss(v,T){v.H&&Se(v.H,function(O,ee){bn(T,ee,O)}),v.l&&Se({},function(O,ee){bn(T,ee,O)})}function Ks(v,T,O){O=Math.min(v.i.length,O);const ee=v.l?f(v.l.Ka,v.l,v):null;e:{var je=v.i;let Yt=-1;for(;;){const or=["count="+O];Yt==-1?O>0?(Yt=je[0].g,or.push("ofs="+Yt)):Yt=0:or.push("ofs="+Yt);let hn=!0;for(let Un=0;Un<O;Un++){var De=je[Un].g;const fi=je[Un].map;if(De-=Yt,De<0)Yt=Math.max(0,je[Un].g-100),hn=!1;else try{De="req"+De+"_"||"";try{var nt=fi instanceof Map?fi:Object.entries(fi);for(const[Ai,Xn]of nt){let Si=Xn;d(Xn)&&(Si=tn(Xn)),or.push(De+Ai+"="+encodeURIComponent(Si))}}catch(Ai){throw or.push(De+"type="+encodeURIComponent("_badmap")),Ai}}catch{ee&&ee(fi)}}if(hn){nt=or.join("&");break e}}nt=void 0}return v=v.i.splice(0,O),T.G=v,nt}function kl(v){if(!v.g&&!v.v){v.Y=1;var T=v.Da;ue||D(),ie||(ue(),ie=!0),V.add(T,v),v.A=0}}function Ds(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=un(f(v.Da,v),ve(v,v.A)),v.A++,!0)}n.Da=function(){if(this.v=null,A(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=un(f(this.Wa,this),v)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Ws(this),A(this))};function Ko(v){v.B!=null&&(c.clearTimeout(v.B),v.B=null)}function A(v){v.g=new wi(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var T=Er(v.na);bn(T,"RID","rpc"),bn(T,"SID",v.M),bn(T,"AID",v.K),bn(T,"CI",v.F?"0":"1"),!v.F&&v.ia&&bn(T,"TO",v.ia),bn(T,"TYPE","xmlhttp"),ss(v,T),v.u&&v.o&&mo(T,v.u,v.o),v.O&&(v.g.H=v.O);var O=v.g;v=v.ba,O.M=1,O.A=qa(Er(T)),O.u=null,O.R=!0,Fi(O,v)}n.Va=function(){this.C!=null&&(this.C=null,Ws(this),Ds(this),St(19))};function B(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function oe(v,T){var O=null;if(v.g==T){B(v),Ko(v),v.g=null;var ee=2}else if(Ls(v.h,T))O=T.G,zo(v.h,T),ee=1;else return;if(v.I!=0){if(T.o)if(ee==1){O=T.u?T.u.length:0,T=Date.now()-T.F;var je=v.D;ee=Pn(),at(ee,new _t(ee,O)),bs(v)}else kl(v);else if(je=T.m,je==3||je==0&&T.X>0||!(ee==1&&go(v,T)||ee==2&&Ds(v)))switch(O&&O.length>0&&(T=v.h,T.i=T.i.concat(O)),je){case 1:Ae(v,5);break;case 4:Ae(v,10);break;case 3:Ae(v,6);break;default:Ae(v,2)}}}function ve(v,T){let O=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(O*=2),O*T}function Ae(v,T){if(v.j.info("Error code "+T),T==2){var O=f(v.bb,v),ee=v.Ua;const je=!ee;ee=new di(ee||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||mn(ee,"https"),qa(ee),je?ks(ee.toString(),O):ba(ee.toString(),O)}else St(2);v.I=0,v.l&&v.l.pa(T),He(v),Ys(v)}n.bb=function(v){v?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function He(v){if(v.I=0,v.ja=[],v.l){const T=Ho(v.h);(T.length!=0||v.i.length!=0)&&(E(v.ja,T),E(v.ja,v.i),v.h.i.length=0,b(v.i),v.i.length=0),v.l.oa()}}function Xe(v,T,O){var ee=O instanceof di?Er(O):new di(O);if(ee.g!="")T&&(ee.g=T+"."+ee.g),va(ee,ee.u);else{var je=c.location;ee=je.protocol,T=T?T+"."+je.hostname:je.hostname,je=+je.port;const De=new di(null);ee&&mn(De,ee),T&&(De.g=T),je&&va(De,je),O&&(De.h=O),ee=De}return O=v.G,T=v.wa,O&&T&&bn(ee,O,T),bn(ee,"VER",v.ka),ss(v,ee),ee}function ht(v,T,O){if(T&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=v.Aa&&!v.ma?new Vn(new Lt({ab:O})):new Vn(v.ma),T.Fa(v.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function gt(){}n=gt.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Mt(){}Mt.prototype.g=function(v,T){return new Ct(v,T)};function Ct(v,T){ze.call(this),this.g=new Gs(T),this.l=v,this.h=T&&T.messageUrlParams||null,v=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(v?v["X-WebChannel-Content-Type"]=T.messageContentType:v={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(v?v["X-WebChannel-Client-Profile"]=T.sa:v={"X-WebChannel-Client-Profile":T.sa}),this.g.U=v,(v=T&&T.Qb)&&!F(v)&&(this.g.u=v),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!F(T)&&(this.g.G=T,v=this.h,v!==null&&T in v&&(v=this.h,T in v&&delete v[T])),this.j=new Kn(this)}x(Ct,ze),Ct.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){za(this.g)},Ct.prototype.o=function(v){var T=this.g;if(typeof v=="string"){var O={};O.__data__=v,v=O}else this.v&&(O={},O.__data__=tn(v),v=O);T.i.push(new br(T.Ya++,v)),T.I==3&&bs(T)},Ct.prototype.N=function(){this.g.l=null,delete this.j,za(this.g),delete this.g,Ct.Z.N.call(this)};function pn(v){It.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var T=v.__sm__;if(T){e:{for(const O in T){v=O;break e}v=void 0}(this.i=v)&&(v=this.i,T=T!==null&&v in T?T[v]:void 0),this.data=T}else this.data=v}x(pn,It);function ar(){Bt.call(this),this.status=1}x(ar,Bt);function Kn(v){this.g=v}x(Kn,gt),Kn.prototype.ra=function(){at(this.g,"a")},Kn.prototype.qa=function(v){at(this.g,new pn(v))},Kn.prototype.pa=function(v){at(this.g,new ar)},Kn.prototype.oa=function(){at(this.g,"b")},Mt.prototype.createWebChannel=Mt.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,gA=function(){return new Mt},pA=function(){return Pn()},mA=Zt,Vv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ji.NO_ERROR=0,Ji.TIMEOUT=8,Ji.HTTP_ERROR=6,Bp=Ji,Mi.COMPLETE="complete",fA=Mi,xr.EventType=nn,nn.OPEN="a",nn.CLOSE="b",nn.ERROR="c",nn.MESSAGE="d",ze.prototype.listen=ze.prototype.J,Rf=xr,Vn.prototype.listenOnce=Vn.prototype.K,Vn.prototype.getLastError=Vn.prototype.Ha,Vn.prototype.getLastErrorCode=Vn.prototype.ya,Vn.prototype.getStatus=Vn.prototype.ca,Vn.prototype.getResponseJson=Vn.prototype.La,Vn.prototype.getResponseText=Vn.prototype.la,Vn.prototype.send=Vn.prototype.ea,Vn.prototype.setWithCredentials=Vn.prototype.Fa,hA=Vn}).apply(typeof wp<"u"?wp:typeof self<"u"?self:typeof window<"u"?window:{});const ew="@firebase/firestore",tw="4.9.2";let Cs=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cs.UNAUTHENTICATED=new Cs(null),Cs.GOOGLE_CREDENTIALS=new Cs("google-credentials-uid"),Cs.FIRST_PARTY=new Cs("first-party-uid"),Cs.MOCK_USER=new Cs("mock-user");let kh="12.3.0";const Ju=new Bg("@firebase/firestore");function Jd(){return Ju.logLevel}function ft(n,...e){if(Ju.logLevel<=Nn.DEBUG){const t=e.map(zy);Ju.debug(`Firestore (${kh}): ${n}`,...t)}}function mc(n,...e){if(Ju.logLevel<=Nn.ERROR){const t=e.map(zy);Ju.error(`Firestore (${kh}): ${n}`,...t)}}function xh(n,...e){if(Ju.logLevel<=Nn.WARN){const t=e.map(zy);Ju.warn(`Firestore (${kh}): ${n}`,...t)}}function zy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ut(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,vA(n,r,t)}function vA(n,e,t){let r=`FIRESTORE (${kh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw mc(r),new Error(r)}function kn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||vA(e,i,r)}function en(n,e){return n}const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends qo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class yA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cs.UNAUTHENTICATED)))}shutdown(){}}class v8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class y8{constructor(e){this.t=e,this.currentUser=Cs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){kn(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let a=new vl;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new vl,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},d=h=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new vl)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kn(typeof r.accessToken=="string",31837,{l:r}),new yA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kn(e===null||typeof e=="string",2055,{h:e}),new Cs(e)}}class x8{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Cs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class b8{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new x8(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w8{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,io(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){kn(this.o===void 0,3512);const r=a=>{a.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,ft("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new nw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(kn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _8(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Hy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=_8(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function An(n,e){return n<e?-1:n>e?1:0}function Uv(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return G1(i)===G1(a)?An(i,a):G1(i)?1:-1}return An(n.length,e.length)}const N8=55296,A8=57343;function G1(n){const e=n.charCodeAt(0);return e>=N8&&e<=A8}function bh(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}const rw="__name__";class hl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ut(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ut(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return hl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hl?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=hl.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return An(e.length,t.length)}static compareSegments(e,t){const r=hl.isNumericId(e),i=hl.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?hl.extractNumericId(e).compare(hl.extractNumericId(t)):Uv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lu.fromString(e.substring(4,e.length-2))}}class fr extends hl{construct(e,t,r){return new fr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new st(We.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new fr(t)}static emptyPath(){return new fr([])}}const S8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fs extends hl{construct(e,t,r){return new fs(e,t,r)}static isValidIdentifier(e){return S8.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rw}static keyField(){return new fs([rw])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new st(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new st(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new st(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(a(),i++)}if(a(),c)throw new st(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fs(t)}static emptyPath(){return new fs([])}}class Dt{constructor(e){this.path=e}static fromPath(e){return new Dt(fr.fromString(e))}static fromName(e){return new Dt(fr.fromString(e).popFirst(5))}static empty(){return new Dt(fr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return fr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Dt(new fr(e.slice()))}}function xA(n,e,t){if(!t)throw new st(We.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function E8(n,e,t,r){if(e===!0&&r===!0)throw new st(We.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iw(n){if(!Dt.isDocumentKey(n))throw new st(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sw(n){if(Dt.isDocumentKey(n))throw new st(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Gg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ut(12329,{type:typeof n})}function oo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new st(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gg(n);throw new st(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function xi(n,e){const t={typeString:n};return e&&(t.value=e),t}function pm(n,e){if(!bA(n))throw new st(We.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new st(We.INVALID_ARGUMENT,t);return!0}const aw=-62135596800,ow=1e6;class rr{static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ow);return new rr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new st(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new st(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<aw)throw new st(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new st(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ow}_compareTo(e){return this.seconds===e.seconds?An(this.nanoseconds,e.nanoseconds):An(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pm(e,rr._jsonSchema))return new rr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-aw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rr._jsonSchemaVersion="firestore/timestamp/1.0",rr._jsonSchema={type:xi("string",rr._jsonSchemaVersion),seconds:xi("number"),nanoseconds:xi("number")};class Gt{static fromTimestamp(e){return new Gt(e)}static min(){return new Gt(new rr(0,0))}static max(){return new Gt(new rr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Kf=-1;function j8(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Gt.fromTimestamp(r===1e9?new rr(t+1,0):new rr(t,r));return new hu(i,Dt.empty(),e)}function T8(n){return new hu(n.readTime,n.key,Kf)}class hu{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hu(Gt.min(),Dt.empty(),Kf)}static max(){return new hu(Gt.max(),Dt.empty(),Kf)}}function C8(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Dt.comparator(n.documentKey,e.documentKey),t!==0?t:An(n.largestBatchId,e.largestBatchId))}const I8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ph(n){if(n.code!==We.FAILED_PRECONDITION||n.message!==I8)throw n;ft("LocalStore","Unexpectedly lost primary lease")}class Je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ut(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Je(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Je?t:Je.resolve(t)}catch(t){return Je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Je.reject(t)}static resolve(e){return new Je(((t,r)=>{t(e)}))}static reject(e){return new Je(((t,r)=>{r(e)}))}static waitFor(e){return new Je(((t,r)=>{let i=0,a=0,c=!1;e.forEach((d=>{++i,d.next((()=>{++a,c&&a===i&&t()}),(h=>r(h)))})),c=!0,a===i&&t()}))}static or(e){let t=Je.resolve(!1);for(const r of e)t=t.next((i=>i?Je.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new Je(((r,i)=>{const a=e.length,c=new Array(a);let d=0;for(let h=0;h<a;h++){const f=h;t(e[f]).next((p=>{c[f]=p,++d,d===a&&r(c)}),(p=>i(p)))}}))}static doWhile(e,t){return new Je(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function L8(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Dh(n){return n.name==="IndexedDbTransactionError"}class Wg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wg.ce=-1;const $y=-1;function gm(n){return n==null}function fg(n){return n===0&&1/n==-1/0}function k8(n){return typeof n=="number"&&Number.isInteger(n)&&!fg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const wA="";function P8(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lw(e)),e=D8(n.get(t),e);return lw(e)}function D8(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case wA:t+="";break;default:t+=a}}return t}function lw(n){return n+wA+""}function cw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Nu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _A(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Br{constructor(e,t){this.comparator=e,this.root=t||hs.EMPTY}insert(e,t){return new Br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hs.BLACK,null,null))}remove(e){return new Br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _p(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _p(this.root,e,this.comparator,!1)}getReverseIterator(){return new _p(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _p(this.root,e,this.comparator,!0)}}class _p{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hs{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??hs.RED,this.left=i??hs.EMPTY,this.right=a??hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new hs(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return hs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ut(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ut(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ut(27949);return e+(this.isRed()?0:1)}}hs.EMPTY=null,hs.RED=!0,hs.BLACK=!1;hs.EMPTY=new class{constructor(){this.size=0}get key(){throw Ut(57766)}get value(){throw Ut(16141)}get color(){throw Ut(16727)}get left(){throw Ut(29726)}get right(){throw Ut(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new hs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pi{constructor(e){this.comparator=e,this.data=new Br(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uw(this.data.getIterator())}getIteratorFrom(e){return new uw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Pi)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pi(this.comparator);return t.data=e,t}}class uw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ka{constructor(e){this.fields=e,e.sort(fs.comparator)}static empty(){return new ka([])}unionWith(e){let t=new Pi(fs.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ka(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bh(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class NA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ps{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new NA("Invalid base64 string: "+a):a}})(e);return new ps(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a})(e);return new ps(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return An(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ps.EMPTY_BYTE_STRING=new ps("");const M8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fu(n){if(kn(!!n,39018),typeof n=="string"){let e=0;const t=M8.exec(n);if(kn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:si(n.seconds),nanos:si(n.nanos)}}function si(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mu(n){return typeof n=="string"?ps.fromBase64String(n):ps.fromUint8Array(n)}const AA="server_timestamp",SA="__type__",EA="__previous_value__",jA="__local_write_time__";function Gy(n){return(n?.mapValue?.fields||{})[SA]?.stringValue===AA}function Yg(n){const e=n.mapValue.fields[EA];return Gy(e)?Yg(e):e}function Qf(n){const e=fu(n.mapValue.fields[jA].timestampValue);return new rr(e.seconds,e.nanos)}class O8{constructor(e,t,r,i,a,c,d,h,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p}}const mg="(default)";class Xf{constructor(e,t){this.projectId=e,this.database=t||mg}static empty(){return new Xf("","")}get isDefaultDatabase(){return this.database===mg}isEqual(e){return e instanceof Xf&&e.projectId===this.projectId&&e.database===this.database}}const TA="__type__",F8="__max__",Np={mapValue:{}},CA="__vector__",pg="value";function pu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gy(n)?4:V8(n)?9007199254740991:q8(n)?10:11:Ut(28295,{value:n})}function Nl(n,e){if(n===e)return!0;const t=pu(n);if(t!==pu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qf(n).isEqual(Qf(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=fu(i.timestampValue),d=fu(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return mu(i.bytesValue).isEqual(mu(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return si(i.geoPointValue.latitude)===si(a.geoPointValue.latitude)&&si(i.geoPointValue.longitude)===si(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return si(i.integerValue)===si(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=si(i.doubleValue),d=si(a.doubleValue);return c===d?fg(c)===fg(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return bh(n.arrayValue.values||[],e.arrayValue.values||[],Nl);case 10:case 11:return(function(i,a){const c=i.mapValue.fields||{},d=a.mapValue.fields||{};if(cw(c)!==cw(d))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(d[h]===void 0||!Nl(c[h],d[h])))return!1;return!0})(n,e);default:return Ut(52216,{left:n})}}function Jf(n,e){return(n.values||[]).find((t=>Nl(t,e)))!==void 0}function wh(n,e){if(n===e)return 0;const t=pu(n),r=pu(e);if(t!==r)return An(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return An(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const d=si(a.integerValue||a.doubleValue),h=si(c.integerValue||c.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(n,e);case 3:return dw(n.timestampValue,e.timestampValue);case 4:return dw(Qf(n),Qf(e));case 5:return Uv(n.stringValue,e.stringValue);case 6:return(function(a,c){const d=mu(a),h=mu(c);return d.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const d=a.split("/"),h=c.split("/");for(let f=0;f<d.length&&f<h.length;f++){const p=An(d[f],h[f]);if(p!==0)return p}return An(d.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const d=An(si(a.latitude),si(c.latitude));return d!==0?d:An(si(a.longitude),si(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return hw(n.arrayValue,e.arrayValue);case 10:return(function(a,c){const d=a.fields||{},h=c.fields||{},f=d[pg]?.arrayValue,p=h[pg]?.arrayValue,x=An(f?.values?.length||0,p?.values?.length||0);return x!==0?x:hw(f,p)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===Np.mapValue&&c===Np.mapValue)return 0;if(a===Np.mapValue)return 1;if(c===Np.mapValue)return-1;const d=a.fields||{},h=Object.keys(d),f=c.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let x=0;x<h.length&&x<p.length;++x){const N=Uv(h[x],p[x]);if(N!==0)return N;const b=wh(d[h[x]],f[p[x]]);if(b!==0)return b}return An(h.length,p.length)})(n.mapValue,e.mapValue);default:throw Ut(23264,{he:t})}}function dw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return An(n,e);const t=fu(n),r=fu(e),i=An(t.seconds,r.seconds);return i!==0?i:An(t.nanos,r.nanos)}function hw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=wh(t[i],r[i]);if(a)return a}return An(t.length,r.length)}function _h(n){return Bv(n)}function Bv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=fu(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return mu(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Dt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Bv(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${Bv(t.fields[c])}`;return i+"}"})(n.mapValue):Ut(61005,{value:n})}function zp(n){switch(pu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yg(n);return e?16+zp(e):16;case 5:return 2*n.stringValue.length;case 6:return mu(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+zp(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Nu(r.fields,((a,c)=>{i+=a.length+zp(c)})),i})(n.mapValue);default:throw Ut(13486,{value:n})}}function fw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function zv(n){return!!n&&"integerValue"in n}function Wy(n){return!!n&&"arrayValue"in n}function mw(n){return!!n&&"nullValue"in n}function pw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hp(n){return!!n&&"mapValue"in n}function q8(n){return(n?.mapValue?.fields||{})[TA]?.stringValue===CA}function Of(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Nu(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Of(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Of(n.arrayValue.values[t]);return e}return{...n}}function V8(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===F8}class Bs{constructor(e){this.value=e}static empty(){return new Bs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Of(t)}setAll(e){let t=fs.emptyPath(),r={},i=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=d.popLast()}c?r[d.lastSegment()]=Of(c):i.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Hp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Hp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Nu(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Bs(Of(this.value))}}function IA(n){const e=[];return Nu(n.fields,((t,r)=>{const i=new fs([t]);if(Hp(r)){const a=IA(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)})),new ka(e)}class Xi{constructor(e,t,r,i,a,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Xi(e,0,Gt.min(),Gt.min(),Gt.min(),Bs.empty(),0)}static newFoundDocument(e,t,r,i){return new Xi(e,1,t,Gt.min(),r,i,0)}static newNoDocument(e,t){return new Xi(e,2,t,Gt.min(),Gt.min(),Bs.empty(),0)}static newUnknownDocument(e,t){return new Xi(e,3,t,Gt.min(),Gt.min(),Bs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gg{constructor(e,t){this.position=e,this.inclusive=t}}function gw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(a.field.isKeyField()?r=Dt.comparator(Dt.fromName(c.referenceValue),t.key):r=wh(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function vw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Nl(n.position[t],e.position[t]))return!1;return!0}class Zf{constructor(e,t="asc"){this.field=e,this.dir=t}}function U8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class RA{}class yi extends RA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new z8(e,t,r):t==="array-contains"?new G8(e,r):t==="in"?new W8(e,r):t==="not-in"?new Y8(e,r):t==="array-contains-any"?new K8(e,r):new yi(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new H8(e,r):new $8(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wh(t,this.value)):t!==null&&pu(this.value)===pu(t)&&this.matchesComparison(wh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ut(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oo extends RA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Oo(e,t)}matches(e){return LA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function LA(n){return n.op==="and"}function kA(n){return B8(n)&&LA(n)}function B8(n){for(const e of n.filters)if(e instanceof Oo)return!1;return!0}function Hv(n){if(n instanceof yi)return n.field.canonicalString()+n.op.toString()+_h(n.value);if(kA(n))return n.filters.map((e=>Hv(e))).join(",");{const e=n.filters.map((t=>Hv(t))).join(",");return`${n.op}(${e})`}}function PA(n,e){return n instanceof yi?(function(r,i){return i instanceof yi&&r.op===i.op&&r.field.isEqual(i.field)&&Nl(r.value,i.value)})(n,e):n instanceof Oo?(function(r,i){return i instanceof Oo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,c,d)=>a&&PA(c,i.filters[d])),!0):!1})(n,e):void Ut(19439)}function DA(n){return n instanceof yi?(function(t){return`${t.field.canonicalString()} ${t.op} ${_h(t.value)}`})(n):n instanceof Oo?(function(t){return t.op.toString()+" {"+t.getFilters().map(DA).join(" ,")+"}"})(n):"Filter"}class z8 extends yi{constructor(e,t,r){super(e,t,r),this.key=Dt.fromName(r.referenceValue)}matches(e){const t=Dt.comparator(e.key,this.key);return this.matchesComparison(t)}}class H8 extends yi{constructor(e,t){super(e,"in",t),this.keys=MA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $8 extends yi{constructor(e,t){super(e,"not-in",t),this.keys=MA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function MA(n,e){return(e.arrayValue?.values||[]).map((t=>Dt.fromName(t.referenceValue)))}class G8 extends yi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wy(t)&&Jf(t.arrayValue,this.value)}}class W8 extends yi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Jf(this.value.arrayValue,t)}}class Y8 extends yi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Jf(this.value.arrayValue,t)}}class K8 extends yi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Jf(this.value.arrayValue,r)))}}class Q8{constructor(e,t=null,r=[],i=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=d,this.Te=null}}function yw(n,e=null,t=[],r=[],i=null,a=null,c=null){return new Q8(n,e,t,r,i,a,c)}function Yy(n){const e=en(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Hv(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),gm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>_h(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>_h(r))).join(",")),e.Te=t}return e.Te}function Ky(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!U8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!PA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vw(n.startAt,e.startAt)&&vw(n.endAt,e.endAt)}function $v(n){return Dt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Mh{constructor(e,t=null,r=[],i=[],a=null,c="F",d=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function X8(n,e,t,r,i,a,c,d){return new Mh(n,e,t,r,i,a,c,d)}function Qy(n){return new Mh(n)}function xw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function OA(n){return n.collectionGroup!==null}function Ff(n){const e=en(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Pi(fs.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(d=d.add(f.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Zf(a,r))})),t.has(fs.keyField().canonicalString())||e.Ie.push(new Zf(fs.keyField(),r))}return e.Ie}function yl(n){const e=en(n);return e.Ee||(e.Ee=J8(e,Ff(n))),e.Ee}function J8(n,e){if(n.limitType==="F")return yw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Zf(i.field,a)}));const t=n.endAt?new gg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new gg(n.startAt.position,n.startAt.inclusive):null;return yw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Gv(n,e){const t=n.filters.concat([e]);return new Mh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wv(n,e,t){return new Mh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kg(n,e){return Ky(yl(n),yl(e))&&n.limitType===e.limitType}function FA(n){return`${Yy(yl(n))}|lt:${n.limitType}`}function Zd(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>DA(i))).join(", ")}]`),gm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>_h(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>_h(i))).join(",")),`Target(${r})`})(yl(n))}; limitType=${n.limitType})`}function Qg(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Dt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of Ff(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(c,d,h){const f=gw(c,d,h);return c.inclusive?f<=0:f<0})(r.startAt,Ff(r),i)||r.endAt&&!(function(c,d,h){const f=gw(c,d,h);return c.inclusive?f>=0:f>0})(r.endAt,Ff(r),i))})(n,e)}function Z8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qA(n){return(e,t)=>{let r=!1;for(const i of Ff(n)){const a=ek(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function ek(n,e,t){const r=n.field.isKeyField()?Dt.comparator(e.key,t.key):(function(a,c,d){const h=c.data.field(a),f=d.data.field(a);return h!==null&&f!==null?wh(h,f):Ut(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ut(19790,{direction:n.dir})}}class ld{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Nu(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return _A(this.inner)}size(){return this.innerSize}}const tk=new Br(Dt.comparator);function pc(){return tk}const VA=new Br(Dt.comparator);function Lf(...n){let e=VA;for(const t of n)e=e.insert(t.key,t);return e}function UA(n){let e=VA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Gu(){return qf()}function BA(){return qf()}function qf(){return new ld((n=>n.toString()),((n,e)=>n.isEqual(e)))}const nk=new Br(Dt.comparator),rk=new Pi(Dt.comparator);function Sn(...n){let e=rk;for(const t of n)e=e.add(t);return e}const ik=new Pi(An);function sk(){return ik}function Xy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fg(e)?"-0":e}}function zA(n){return{integerValue:""+n}}function ak(n,e){return k8(e)?zA(e):Xy(n,e)}class Xg{constructor(){this._=void 0}}function ok(n,e,t){return n instanceof vg?(function(i,a){const c={fields:{[SA]:{stringValue:AA},[jA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Gy(a)&&(a=Yg(a)),a&&(c.fields[EA]=a),{mapValue:c}})(t,e):n instanceof em?$A(n,e):n instanceof tm?GA(n,e):(function(i,a){const c=HA(i,a),d=bw(c)+bw(i.Ae);return zv(c)&&zv(i.Ae)?zA(d):Xy(i.serializer,d)})(n,e)}function lk(n,e,t){return n instanceof em?$A(n,e):n instanceof tm?GA(n,e):t}function HA(n,e){return n instanceof yg?(function(r){return zv(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class vg extends Xg{}class em extends Xg{constructor(e){super(),this.elements=e}}function $A(n,e){const t=WA(e);for(const r of n.elements)t.some((i=>Nl(i,r)))||t.push(r);return{arrayValue:{values:t}}}class tm extends Xg{constructor(e){super(),this.elements=e}}function GA(n,e){let t=WA(e);for(const r of n.elements)t=t.filter((i=>!Nl(i,r)));return{arrayValue:{values:t}}}class yg extends Xg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bw(n){return si(n.integerValue||n.doubleValue)}function WA(n){return Wy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ck(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof em&&i instanceof em||r instanceof tm&&i instanceof tm?bh(r.elements,i.elements,Nl):r instanceof yg&&i instanceof yg?Nl(r.Ae,i.Ae):r instanceof vg&&i instanceof vg})(n.transform,e.transform)}class uk{constructor(e,t){this.version=e,this.transformResults=t}}class ms{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ms}static exists(e){return new ms(void 0,e)}static updateTime(e){return new ms(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $p(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Jg{}function YA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zg(n.key,ms.none()):new vm(n.key,n.data,ms.none());{const t=n.data,r=Bs.empty();let i=new Pi(fs.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new Au(n.key,r,new ka(i.toArray()),ms.none())}}function dk(n,e,t){n instanceof vm?(function(i,a,c){const d=i.value.clone(),h=_w(i.fieldTransforms,a,c.transformResults);d.setAll(h),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Au?(function(i,a,c){if(!$p(i.precondition,a))return void a.convertToUnknownDocument(c.version);const d=_w(i.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(KA(i)),h.setAll(d),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):(function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Vf(n,e,t,r){return n instanceof vm?(function(a,c,d,h){if(!$p(a.precondition,c))return d;const f=a.value.clone(),p=Nw(a.fieldTransforms,h,c);return f.setAll(p),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Au?(function(a,c,d,h){if(!$p(a.precondition,c))return d;const f=Nw(a.fieldTransforms,h,c),p=c.data;return p.setAll(KA(a)),p.setAll(f),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((x=>x.field)))})(n,e,t,r):(function(a,c,d){return $p(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function hk(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=HA(r.transform,i||null);a!=null&&(t===null&&(t=Bs.empty()),t.set(r.field,a))}return t||null}function ww(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bh(r,i,((a,c)=>ck(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class vm extends Jg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Au extends Jg{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function KA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function _w(n,e,t){const r=new Map;kn(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,d=e.data.field(a.field);r.set(a.field,lk(c,d,t[i]))}return r}function Nw(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,ok(a,c,e))}return r}class Zg extends Jg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QA extends Jg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fk{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&dk(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Vf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=BA();return this.mutations.forEach((i=>{const a=e.get(i.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(i.key)?null:d;const h=YA(c,d);h!==null&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(Gt.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Sn())}isEqual(e){return this.batchId===e.batchId&&bh(this.mutations,e.mutations,((t,r)=>ww(t,r)))&&bh(this.baseMutations,e.baseMutations,((t,r)=>ww(t,r)))}}class Jy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){kn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return nk})();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new Jy(e,t,r,i)}}class mk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class pk{constructor(e,t){this.count=e,this.unchangedNames=t}}var vi,Ln;function XA(n){switch(n){case We.OK:return Ut(64938);case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0;default:return Ut(15467,{code:n})}}function JA(n){if(n===void 0)return mc("GRPC error has no .code"),We.UNKNOWN;switch(n){case vi.OK:return We.OK;case vi.CANCELLED:return We.CANCELLED;case vi.UNKNOWN:return We.UNKNOWN;case vi.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case vi.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case vi.INTERNAL:return We.INTERNAL;case vi.UNAVAILABLE:return We.UNAVAILABLE;case vi.UNAUTHENTICATED:return We.UNAUTHENTICATED;case vi.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case vi.NOT_FOUND:return We.NOT_FOUND;case vi.ALREADY_EXISTS:return We.ALREADY_EXISTS;case vi.PERMISSION_DENIED:return We.PERMISSION_DENIED;case vi.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case vi.ABORTED:return We.ABORTED;case vi.OUT_OF_RANGE:return We.OUT_OF_RANGE;case vi.UNIMPLEMENTED:return We.UNIMPLEMENTED;case vi.DATA_LOSS:return We.DATA_LOSS;default:return Ut(39323,{code:n})}}(Ln=vi||(vi={}))[Ln.OK=0]="OK",Ln[Ln.CANCELLED=1]="CANCELLED",Ln[Ln.UNKNOWN=2]="UNKNOWN",Ln[Ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ln[Ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ln[Ln.NOT_FOUND=5]="NOT_FOUND",Ln[Ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ln[Ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ln[Ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ln[Ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ln[Ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ln[Ln.ABORTED=10]="ABORTED",Ln[Ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ln[Ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ln[Ln.INTERNAL=13]="INTERNAL",Ln[Ln.UNAVAILABLE=14]="UNAVAILABLE",Ln[Ln.DATA_LOSS=15]="DATA_LOSS";function gk(){return new TextEncoder}const vk=new lu([4294967295,4294967295],0);function Aw(n){const e=gk().encode(n),t=new dA;return t.update(e),new Uint8Array(t.digest())}function Sw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new lu([t,r],0),new lu([i,a],0)]}class Zy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new kf(`Invalid padding: ${t}`);if(r<0)throw new kf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new kf(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new kf(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=lu.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(lu.fromNumber(r)));return i.compare(vk)===1&&(i=new lu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Aw(e),[r,i]=Sw(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Zy(a,i,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=Aw(e),[r,i]=Sw(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class kf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class e0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ym.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new e0(Gt.min(),i,new Br(An),pc(),Sn())}}class ym{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ym(r,t,Sn(),Sn(),Sn())}}class Gp{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class ZA{constructor(e,t){this.targetId=e,this.Ce=t}}class eS{constructor(e,t,r=ps.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ew{constructor(){this.ve=0,this.Fe=jw(),this.Me=ps.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Sn(),t=Sn(),r=Sn();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ut(38017,{changeType:a})}})),new ym(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=jw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,kn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yk{constructor(e){this.Ge=e,this.ze=new Map,this.je=pc(),this.Je=Ap(),this.He=Ap(),this.Ye=new Br(An)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ut(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if($v(a))if(r===0){const c=new Dt(a.path);this.et(t,c,Xi.newNoDocument(c,Gt.min()))}else kn(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),h=d?this.ct(d,e,c):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let c,d;try{c=mu(r).toUint8Array()}catch(h){if(h instanceof NA)return xh("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new Zy(c,i,a)}catch(h){return xh(h instanceof kf?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const d=this.ot(c);if(d){if(a.current&&$v(d.target)){const h=new Dt(d.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,Xi.newNoDocument(h,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let r=Sn();this.He.forEach(((a,c)=>{let d=!0;c.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const i=new e0(e,t,this.Ye,this.je,r);return this.je=pc(),this.Je=Ap(),this.He=Ap(),this.Ye=new Br(An),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ew,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Pi(An),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Pi(An),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ft("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ew),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ap(){return new Br(Dt.comparator)}function jw(){return new Br(Dt.comparator)}const xk={asc:"ASCENDING",desc:"DESCENDING"},bk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wk={and:"AND",or:"OR"};class _k{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yv(n,e){return n.useProto3Json||gm(e)?e:{value:e}}function xg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Nk(n,e){return xg(n,e.toTimestamp())}function Ma(n){return kn(!!n,49232),Gt.fromTimestamp((function(t){const r=fu(t);return new rr(r.seconds,r.nanos)})(n))}function ex(n,e){return Kv(n,e).canonicalString()}function Kv(n,e){const t=(function(i){return new fr(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function nS(n){const e=fr.fromString(n);return kn(lS(e),10190,{key:e.toString()}),e}function bg(n,e){return ex(n.databaseId,e.path)}function Uf(n,e){const t=nS(e);if(t.get(1)!==n.databaseId.projectId)throw new st(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new st(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Dt(iS(t))}function rS(n,e){return ex(n.databaseId,e)}function Ak(n){const e=nS(n);return e.length===4?fr.emptyPath():iS(e)}function Qv(n){return new fr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function iS(n){return kn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Tw(n,e,t){return{name:bg(n,e),fields:t.value.mapValue.fields}}function Sk(n,e){return"found"in e?(function(r,i){kn(!!i.found,43571),i.found.name,i.found.updateTime;const a=Uf(r,i.found.name),c=Ma(i.found.updateTime),d=i.found.createTime?Ma(i.found.createTime):Gt.min(),h=new Bs({mapValue:{fields:i.found.fields}});return Xi.newFoundDocument(a,c,d,h)})(n,e):"missing"in e?(function(r,i){kn(!!i.missing,3894),kn(!!i.readTime,22933);const a=Uf(r,i.missing),c=Ma(i.readTime);return Xi.newNoDocument(a,c)})(n,e):Ut(7234,{result:e})}function Ek(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ut(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(f,p){return f.useProto3Json?(kn(p===void 0||typeof p=="string",58123),ps.fromBase64String(p||"")):(kn(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ps.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(f){const p=f.code===void 0?We.UNKNOWN:JA(f.code);return new st(p,f.message||"")})(c);t=new eS(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Uf(n,r.document.name),a=Ma(r.document.updateTime),c=r.document.createTime?Ma(r.document.createTime):Gt.min(),d=new Bs({mapValue:{fields:r.document.fields}}),h=Xi.newFoundDocument(i,a,c,d),f=r.targetIds||[],p=r.removedTargetIds||[];t=new Gp(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Uf(n,r.document),a=r.readTime?Ma(r.readTime):Gt.min(),c=Xi.newNoDocument(i,a),d=r.removedTargetIds||[];t=new Gp([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Uf(n,r.document),a=r.removedTargetIds||[];t=new Gp([],a,i,null)}else{if(!("filter"in e))return Ut(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new pk(i,a),d=r.targetId;t=new ZA(d,c)}}return t}function sS(n,e){let t;if(e instanceof vm)t={update:Tw(n,e.key,e.value)};else if(e instanceof Zg)t={delete:bg(n,e.key)};else if(e instanceof Au)t={update:Tw(n,e.key,e.data),updateMask:Dk(e.fieldMask)};else{if(!(e instanceof QA))return Ut(16599,{Vt:e.type});t={verify:bg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,c){const d=c.transform;if(d instanceof vg)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof em)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof tm)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof yg)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ut(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Nk(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ut(27497)})(n,e.precondition)),t}function jk(n,e){return n&&n.length>0?(kn(e!==void 0,14353),n.map((t=>(function(i,a){let c=i.updateTime?Ma(i.updateTime):Ma(a);return c.isEqual(Gt.min())&&(c=Ma(a)),new uk(c,i.transformResults||[])})(t,e)))):[]}function Tk(n,e){return{documents:[rS(n,e.path)]}}function Ck(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=rS(n,i);const a=(function(f){if(f.length!==0)return oS(Oo.create(f,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(f){if(f.length!==0)return f.map((p=>(function(N){return{field:eh(N.field),direction:Lk(N.dir)}})(p)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Yv(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:i}}function Ik(n){let e=Ak(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){kn(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=(function(x){const N=aS(x);return N instanceof Oo&&kA(N)?N.getFilters():[N]})(t.where));let c=[];t.orderBy&&(c=(function(x){return x.map((N=>(function(E){return new Zf(th(E.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(N)))})(t.orderBy));let d=null;t.limit&&(d=(function(x){let N;return N=typeof x=="object"?x.value:x,gm(N)?null:N})(t.limit));let h=null;t.startAt&&(h=(function(x){const N=!!x.before,b=x.values||[];return new gg(b,N)})(t.startAt));let f=null;return t.endAt&&(f=(function(x){const N=!x.before,b=x.values||[];return new gg(b,N)})(t.endAt)),X8(e,i,c,a,d,"F",h,f)}function Rk(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ut(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=th(t.unaryFilter.field);return yi.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=th(t.unaryFilter.field);return yi.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=th(t.unaryFilter.field);return yi.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=th(t.unaryFilter.field);return yi.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ut(61313);default:return Ut(60726)}})(n):n.fieldFilter!==void 0?(function(t){return yi.create(th(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ut(58110);default:return Ut(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Oo.create(t.compositeFilter.filters.map((r=>aS(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ut(1026)}})(t.compositeFilter.op))})(n):Ut(30097,{filter:n})}function Lk(n){return xk[n]}function kk(n){return bk[n]}function Pk(n){return wk[n]}function eh(n){return{fieldPath:n.canonicalString()}}function th(n){return fs.fromServerFormat(n.fieldPath)}function oS(n){return n instanceof yi?(function(t){if(t.op==="=="){if(pw(t.value))return{unaryFilter:{field:eh(t.field),op:"IS_NAN"}};if(mw(t.value))return{unaryFilter:{field:eh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pw(t.value))return{unaryFilter:{field:eh(t.field),op:"IS_NOT_NAN"}};if(mw(t.value))return{unaryFilter:{field:eh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eh(t.field),op:kk(t.op),value:t.value}}})(n):n instanceof Oo?(function(t){const r=t.getFilters().map((i=>oS(i)));return r.length===1?r[0]:{compositeFilter:{op:Pk(t.op),filters:r}}})(n):Ut(54877,{filter:n})}function Dk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function lS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class iu{constructor(e,t,r,i,a=Gt.min(),c=Gt.min(),d=ps.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new iu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new iu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Mk{constructor(e){this.yt=e}}function Ok(n){const e=Ik({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wv(e,e.limit,"L"):e}class Fk{constructor(){this.Cn=new qk}addToCollectionParentIndex(e,t){return this.Cn.add(t),Je.resolve()}getCollectionParents(e,t){return Je.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Je.resolve()}deleteFieldIndex(e,t){return Je.resolve()}deleteAllFieldIndexes(e){return Je.resolve()}createTargetIndexes(e,t){return Je.resolve()}getDocumentsMatchingTarget(e,t){return Je.resolve(null)}getIndexType(e,t){return Je.resolve(0)}getFieldIndexes(e,t){return Je.resolve([])}getNextCollectionGroupToUpdate(e){return Je.resolve(null)}getMinOffset(e,t){return Je.resolve(hu.min())}getMinOffsetFromCollectionGroup(e,t){return Je.resolve(hu.min())}updateCollectionGroup(e,t,r){return Je.resolve()}updateIndexEntries(e,t){return Je.resolve()}}class qk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pi(fr.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pi(fr.comparator)).toArray()}}const Cw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cS=41943040;class da{static withCacheSize(e){return new da(e,da.DEFAULT_COLLECTION_PERCENTILE,da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}da.DEFAULT_COLLECTION_PERCENTILE=10,da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,da.DEFAULT=new da(cS,da.DEFAULT_COLLECTION_PERCENTILE,da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),da.DISABLED=new da(-1,0,0);class Nh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Nh(0)}static cr(){return new Nh(-1)}}const Iw="LruGarbageCollector",Vk=1048576;function Rw([n,e],[t,r]){const i=An(n,t);return i===0?An(e,r):i}class Uk{constructor(e){this.Ir=e,this.buffer=new Pi(Rw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Rw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Bk{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ft(Iw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Dh(t)?ft(Iw,"Ignoring IndexedDB error during garbage collection: ",t):await Ph(t)}await this.Vr(3e5)}))}}class zk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Je.resolve(Wg.ce);const r=new Uk(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),Je.resolve(Cw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,c,d,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,c=Date.now(),this.nthSequenceNumber(e,i)))).next((x=>(r=x,d=Date.now(),this.removeTargets(e,r,t)))).next((x=>(a=x,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((x=>(f=Date.now(),Jd()<=Nn.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${i} in `+(d-c)+`ms
	Removed ${a} targets in `+(h-d)+`ms
	Removed ${x} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),Je.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:x}))))}}function Hk(n,e){return new zk(n,e)}class $k{constructor(){this.changes=new ld((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Je.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Gk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Wk{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Vf(r.mutation,i,ka.empty(),rr.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Sn()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Sn()){const i=Gu();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let c=Lf();return a.forEach(((d,h)=>{c=c.insert(d,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Gu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Sn())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,i){let a=pc();const c=qf(),d=(function(){return qf()})();return t.forEach(((h,f)=>{const p=r.get(f.key);i.has(f.key)&&(p===void 0||p.mutation instanceof Au)?a=a.insert(f.key,f):p!==void 0?(c.set(f.key,p.mutation.getFieldMask()),Vf(p.mutation,f,p.mutation.getFieldMask(),rr.now())):c.set(f.key,ka.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((f,p)=>c.set(f,p))),t.forEach(((f,p)=>d.set(f,new Gk(p,c.get(f)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=qf();let i=new Br(((c,d)=>c-d)),a=Sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let p=r.get(h)||ka.empty();p=d.applyToLocalView(f,p),r.set(h,p);const x=(i.get(d.batchId)||Sn()).add(h);i=i.insert(d.batchId,x)}))})).next((()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),f=h.key,p=h.value,x=BA();p.forEach((N=>{if(!a.has(N)){const b=YA(t.get(N),r.get(N));b!==null&&x.set(N,b),a=a.add(N)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,x))}return Je.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(c){return Dt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):OA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):Je.resolve(Gu());let d=Kf,h=a;return c.next((f=>Je.forEach(f,((p,x)=>(d<x.largestBatchId&&(d=x.largestBatchId),a.get(p)?Je.resolve():this.remoteDocumentCache.getEntry(e,p).next((N=>{h=h.insert(p,N)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,h,f,Sn()))).next((p=>({batchId:d,changes:UA(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Dt(t)).next((r=>{let i=Lf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let c=Lf();return this.indexManager.getCollectionParents(e,a).next((d=>Je.forEach(d,(h=>{const f=(function(x,N){return new Mh(N,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((p=>{p.forEach(((x,N)=>{c=c.insert(x,N)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((c=>{a.forEach(((h,f)=>{const p=f.getKey();c.get(p)===null&&(c=c.insert(p,Xi.newInvalidDocument(p)))}));let d=Lf();return c.forEach(((h,f)=>{const p=a.get(h);p!==void 0&&Vf(p.mutation,f,ka.empty(),rr.now()),Qg(t,f)&&(d=d.insert(h,f))})),d}))}}class Yk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Je.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Ma(i.createTime)}})(t)),Je.resolve()}getNamedQuery(e,t){return Je.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:Ok(i.bundledQuery),readTime:Ma(i.readTime)}})(t)),Je.resolve()}}class Kk{constructor(){this.overlays=new Br(Dt.comparator),this.qr=new Map}getOverlay(e,t){return Je.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Gu();return Je.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),Je.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),Je.resolve()}getOverlaysForCollection(e,t,r){const i=Gu(),a=t.length+1,c=new Dt(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const h=d.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>r&&i.set(h.getKey(),h)}return Je.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Br(((f,p)=>f-p));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let p=a.get(f.largestBatchId);p===null&&(p=Gu(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const d=Gu(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,p)=>d.set(f,p))),!(d.size()>=i)););return Je.resolve(d)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new mk(t,r));let a=this.qr.get(t);a===void 0&&(a=Sn(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class Qk{constructor(){this.sessionToken=ps.EMPTY_BYTE_STRING}getSessionToken(e){return Je.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Je.resolve()}}class tx{constructor(){this.Qr=new Pi(Ki.$r),this.Ur=new Pi(Ki.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ki(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ki(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Dt(new fr([])),r=new Ki(t,e),i=new Ki(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Dt(new fr([])),r=new Ki(t,e),i=new Ki(t,e+1);let a=Sn();return this.Ur.forEachInRange([r,i],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new Ki(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ki{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Dt.comparator(e.key,t.key)||An(e.Yr,t.Yr)}static Kr(e,t){return An(e.Yr,t.Yr)||Dt.comparator(e.key,t.key)}}class Xk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Pi(Ki.$r)}checkEmpty(e){return Je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new fk(a,t,r,i);this.mutationQueue.push(c);for(const d of i)this.Zr=this.Zr.add(new Ki(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Je.resolve(c)}lookupMutationBatch(e,t){return Je.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return Je.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Je.resolve(this.mutationQueue.length===0?$y:this.tr-1)}getAllMutationBatches(e){return Je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ki(t,0),i=new Ki(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(c=>{const d=this.Xr(c.Yr);a.push(d)})),Je.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pi(An);return t.forEach((i=>{const a=new Ki(i,0),c=new Ki(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(d=>{r=r.add(d.Yr)}))})),Je.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Dt.isDocumentKey(a)||(a=a.child(""));const c=new Ki(new Dt(a),0);let d=new Pi(An);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(d=d.add(h.Yr)),!0)}),c),Je.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){kn(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Je.forEach(t.mutations,(i=>{const a=new Ki(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ki(t,0),i=this.Zr.firstAfterOrEqual(r);return Je.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Je.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Jk{constructor(e){this.ri=e,this.docs=(function(){return new Br(Dt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Je.resolve(r?r.document.mutableCopy():Xi.newInvalidDocument(t))}getEntries(e,t){let r=pc();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Xi.newInvalidDocument(i))})),Je.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=pc();const c=t.path,d=new Dt(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||C8(T8(p),r)<=0||(i.has(p.key)||Qg(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return Je.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Ut(9500)}ii(e,t){return Je.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Zk(this)}getSize(e){return Je.resolve(this.size)}}class Zk extends $k{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),Je.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class e7{constructor(e){this.persistence=e,this.si=new ld((t=>Yy(t)),Ky),this.lastRemoteSnapshotVersion=Gt.min(),this.highestTargetId=0,this.oi=0,this._i=new tx,this.targetCount=0,this.ai=Nh.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),Je.resolve()}getLastRemoteSnapshotVersion(e){return Je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Je.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Je.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Nh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Je.resolve()}updateTargetData(e,t){return this.Pr(t),Je.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Je.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),Je.waitFor(a).next((()=>i))}getTargetCount(e){return Je.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return Je.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Je.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((c=>{a.push(i.markPotentiallyOrphaned(e,c))})),Je.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Je.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return Je.resolve(r)}containsKey(e,t){return Je.resolve(this._i.containsKey(t))}}class uS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Wg(0),this.li=!1,this.li=!0,this.hi=new Qk,this.referenceDelegate=e(this),this.Pi=new e7(this),this.indexManager=new Fk,this.remoteDocumentCache=(function(i){return new Jk(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Mk(t),this.Ii=new Yk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Kk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Xk(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ft("MemoryPersistence","Starting transaction:",e);const i=new t7(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return Je.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class t7 extends R8{constructor(e){super(),this.currentSequenceNumber=e}}class nx{constructor(e){this.persistence=e,this.Ri=new tx,this.Vi=null}static mi(e){return new nx(e)}get fi(){if(this.Vi)return this.Vi;throw Ut(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Je.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Je.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Je.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Je.forEach(this.fi,(r=>{const i=Dt.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,Gt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Je.or([()=>Je.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class wg{constructor(e,t){this.persistence=e,this.pi=new ld((r=>P8(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=Hk(this,t)}static mi(e,t){return new wg(e,t)}Ei(){}di(e){return Je.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return Je.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?Je.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(c=>this.br(e,c,t).next((d=>{d||(r++,a.removeEntry(c,Gt.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Je.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Je.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Je.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Je.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zp(e.data.value)),t}br(e,t,r){return Je.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return Je.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class rx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Sn(),i=Sn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new rx(e,t.fromCache,r,i)}}class n7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class r7{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return PC()?8:L8(Is())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new n7;return this.Ss(e,t,c).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Jd()<=Nn.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",Zd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Je.resolve()):(Jd()<=Nn.DEBUG&&ft("QueryEngine","Query:",Zd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Jd()<=Nn.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",Zd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yl(t))):Je.resolve())}ys(e,t){if(xw(t))return Je.resolve(null);let r=yl(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Wv(t,null,"F"),r=yl(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const c=Sn(...a);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.Ds(t,d);return this.Cs(t,f,c,h.readTime)?this.ys(e,Wv(t,null,"F")):this.vs(e,f,t,h)}))))})))))}ws(e,t,r,i){return xw(t)||i.isEqual(Gt.min())?Je.resolve(null):this.ps.getDocuments(e,r).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,r,i)?Je.resolve(null):(Jd()<=Nn.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zd(t)),this.vs(e,c,t,j8(i,Kf)).next((d=>d)))}))}Ds(e,t){let r=new Pi(qA(e));return t.forEach(((i,a)=>{Qg(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Jd()<=Nn.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",Zd(t)),this.ps.getDocumentsMatchingQuery(e,t,hu.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}const ix="LocalStore",i7=3e8;class s7{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Br(An),this.xs=new ld((a=>Yy(a)),Ky),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function a7(n,e,t,r){return new s7(n,e,t,r)}async function dS(n,e){const t=en(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const c=[],d=[];let h=Sn();for(const f of i){c.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of a){d.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:d})))}))}))}function o7(n,e){const t=en(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,h,f,p){const x=f.batch,N=x.keys();let b=Je.resolve();return N.forEach((E=>{b=b.next((()=>p.getEntry(h,E))).next((C=>{const I=f.docVersions.get(E);kn(I!==null,48541),C.version.compareTo(I)<0&&(x.applyToRemoteDocument(C,f),C.isValidDocument()&&(C.setReadTime(f.commitVersion),p.addEntry(C)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(h,x)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let h=Sn();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(h=h.add(d.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function hS(n){const e=en(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function l7(n,e){const t=en(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const d=[];e.targetChanges.forEach(((p,x)=>{const N=i.get(x);if(!N)return;d.push(t.Pi.removeMatchingKeys(a,p.removedDocuments,x).next((()=>t.Pi.addMatchingKeys(a,p.addedDocuments,x))));let b=N.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(x)!==null?b=b.withResumeToken(ps.EMPTY_BYTE_STRING,Gt.min()).withLastLimboFreeSnapshotVersion(Gt.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),i=i.insert(x,b),(function(C,I,R){return C.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=i7?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(N,b,p)&&d.push(t.Pi.updateTargetData(a,b))}));let h=pc(),f=Sn();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))})),d.push(c7(a,c,e.documentUpdates).next((p=>{h=p.ks,f=p.qs}))),!r.isEqual(Gt.min())){const p=t.Pi.getLastRemoteSnapshotVersion(a).next((x=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(p)}return Je.waitFor(d).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,h,f))).next((()=>h))})).then((a=>(t.Ms=i,a)))}function c7(n,e,t){let r=Sn(),i=Sn();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let c=pc();return t.forEach(((d,h)=>{const f=a.get(d);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(d)),h.isNoDocument()&&h.version.isEqual(Gt.min())?(e.removeEntry(d,h.readTime),c=c.insert(d,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(d,h)):ft(ix,"Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",h.version)})),{ks:c,qs:i}}))}function u7(n,e){const t=en(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=$y),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function d7(n,e){const t=en(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,Je.resolve(i)):t.Pi.allocateTargetId(r).next((c=>(i=new iu(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Xv(n,e,t){const r=en(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Dh(c))throw c;ft(ix,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Lw(n,e,t){const r=en(n);let i=Gt.min(),a=Sn();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,f,p){const x=en(h),N=x.xs.get(p);return N!==void 0?Je.resolve(x.Ms.get(N)):x.Pi.getTargetData(f,p)})(r,c,yl(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((h=>{a=h}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:Gt.min(),t?a:Sn()))).next((d=>(h7(r,Z8(e),d),{documents:d,Qs:a})))))}function h7(n,e,t){let r=n.Os.get(e)||Gt.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class kw{constructor(){this.activeTargetIds=sk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f7{constructor(){this.Mo=new kw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new kw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class m7{Oo(e){}shutdown(){}}const Pw="ConnectivityMonitor";class Dw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ft(Pw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ft(Pw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Sp=null;function Jv(){return Sp===null?Sp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sp++,"0x"+Sp.toString(16)}const W1="RestConnection",p7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class g7{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===mg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const c=Jv(),d=this.zo(e,t.toUriEncodedString());ft(W1,`Sending RPC '${e}' ${c}:`,d,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,a);const{host:f}=new URL(d),p=Ih(f);return this.Jo(e,d,h,r,p).then((x=>(ft(W1,`Received RPC '${e}' ${c}: `,x),x)),(x=>{throw xh(W1,`RPC '${e}' ${c} failed with error: `,x,"url: ",d,"request:",r),x}))}Ho(e,t,r,i,a,c){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=p7[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class v7{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const As="WebChannelConnection";class y7 extends g7{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const c=Jv();return new Promise(((d,h)=>{const f=new hA;f.setWithCredentials(!0),f.listenOnce(fA.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Bp.NO_ERROR:const x=f.getResponseJson();ft(As,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(x)),d(x);break;case Bp.TIMEOUT:ft(As,`RPC '${e}' ${c} timed out`),h(new st(We.DEADLINE_EXCEEDED,"Request time out"));break;case Bp.HTTP_ERROR:const N=f.getStatus();if(ft(As,`RPC '${e}' ${c} failed with status:`,N,"response text:",f.getResponseText()),N>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const E=b?.error;if(E&&E.status&&E.message){const C=(function(R){const U=R.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(U)>=0?U:We.UNKNOWN})(E.status);h(new st(C,E.message))}else h(new st(We.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new st(We.UNAVAILABLE,"Connection failed."));break;default:Ut(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ft(As,`RPC '${e}' ${c} completed.`)}}));const p=JSON.stringify(i);ft(As,`RPC '${e}' ${c} sending request:`,i),f.send(t,"POST",p,r,15)}))}T_(e,t,r){const i=Jv(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=gA(),d=pA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const p=a.join("");ft(As,`Creating RPC '${e}' stream ${i}: ${p}`,h);const x=c.createWebChannel(p,h);this.I_(x);let N=!1,b=!1;const E=new v7({Yo:I=>{b?ft(As,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(N||(ft(As,`Opening RPC '${e}' stream ${i} transport.`),x.open(),N=!0),ft(As,`RPC '${e}' stream ${i} sending:`,I),x.send(I))},Zo:()=>x.close()}),C=(I,R,U)=>{I.listen(R,($=>{try{U($)}catch(z){setTimeout((()=>{throw z}),0)}}))};return C(x,Rf.EventType.OPEN,(()=>{b||(ft(As,`RPC '${e}' stream ${i} transport opened.`),E.o_())})),C(x,Rf.EventType.CLOSE,(()=>{b||(b=!0,ft(As,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(x))})),C(x,Rf.EventType.ERROR,(I=>{b||(b=!0,xh(As,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),E.a_(new st(We.UNAVAILABLE,"The operation could not be completed")))})),C(x,Rf.EventType.MESSAGE,(I=>{if(!b){const R=I.data[0];kn(!!R,16349);const U=R,$=U?.error||U[0]?.error;if($){ft(As,`RPC '${e}' stream ${i} received error:`,$);const z=$.status;let ue=(function(D){const k=vi[D];if(k!==void 0)return JA(k)})(z),ie=$.message;ue===void 0&&(ue=We.INTERNAL,ie="Unknown error status: "+z+" with message "+$.message),b=!0,E.a_(new st(ue,ie)),x.close()}else ft(As,`RPC '${e}' stream ${i} received:`,R),E.u_(R)}})),C(d,mA.STAT_EVENT,(I=>{I.stat===Vv.PROXY?ft(As,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===Vv.NOPROXY&&ft(As,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Y1(){return typeof document<"u"?document:null}function t0(n){return new _k(n,!0)}class sx{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ft("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Mw="PersistentStream";class fS{constructor(e,t,r,i,a,c,d,h){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sx(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===We.RESOURCE_EXHAUSTED?(mc(t.toString()),mc("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===We.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new st(We.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ft(Mw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ft(Mw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class x7 extends fS{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Ek(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Gt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Gt.min():c.readTime?Ma(c.readTime):Gt.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Qv(this.serializer),t.addTarget=(function(a,c){let d;const h=c.target;if(d=$v(h)?{documents:Tk(a,h)}:{query:Ck(a,h).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=tS(a,c.resumeToken);const f=Yv(a,c.expectedCount);f!==null&&(d.expectedCount=f)}else if(c.snapshotVersion.compareTo(Gt.min())>0){d.readTime=xg(a,c.snapshotVersion.toTimestamp());const f=Yv(a,c.expectedCount);f!==null&&(d.expectedCount=f)}return d})(this.serializer,e);const r=Rk(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Qv(this.serializer),t.removeTarget=e,this.q_(t)}}class b7 extends fS{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return kn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,kn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){kn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=jk(e.writeResults,e.commitTime),r=Ma(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Qv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>sS(this.serializer,r)))};this.q_(t)}}class w7{}class _7 extends w7{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new st(We.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,Kv(t,r),i,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new st(We.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Kv(t,r),i,c,d,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new st(We.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class N7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mc(t),this.aa=!1):ft("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Zu="RemoteStore";class A7{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{cd(this)&&(ft(Zu,"Restarting streams for network reachability change."),await(async function(h){const f=en(h);f.Ea.add(4),await xm(f),f.Ra.set("Unknown"),f.Ea.delete(4),await n0(f)})(this))}))})),this.Ra=new N7(r,i)}}async function n0(n){if(cd(n))for(const e of n.da)await e(!0)}async function xm(n){for(const e of n.da)await e(!1)}function mS(n,e){const t=en(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),cx(t)?lx(t):Oh(t).O_()&&ox(t,e))}function ax(n,e){const t=en(n),r=Oh(t);t.Ia.delete(e),r.O_()&&pS(t,e),t.Ia.size===0&&(r.O_()?r.L_():cd(t)&&t.Ra.set("Unknown"))}function ox(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Gt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Oh(n).Y_(e)}function pS(n,e){n.Va.Ue(e),Oh(n).Z_(e)}function lx(n){n.Va=new yk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Oh(n).start(),n.Ra.ua()}function cx(n){return cd(n)&&!Oh(n).x_()&&n.Ia.size>0}function cd(n){return en(n).Ea.size===0}function gS(n){n.Va=void 0}async function S7(n){n.Ra.set("Online")}async function E7(n){n.Ia.forEach(((e,t)=>{ox(n,e)}))}async function j7(n,e){gS(n),cx(n)?(n.Ra.ha(e),lx(n)):n.Ra.set("Unknown")}async function T7(n,e,t){if(n.Ra.set("Online"),e instanceof eS&&e.state===2&&e.cause)try{await(async function(i,a){const c=a.cause;for(const d of a.targetIds)i.Ia.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.Ia.delete(d),i.Va.removeTarget(d))})(n,e)}catch(r){ft(Zu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _g(n,r)}else if(e instanceof Gp?n.Va.Ze(e):e instanceof ZA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Gt.min()))try{const r=await hS(n.localStore);t.compareTo(r)>=0&&await(function(a,c){const d=a.Va.Tt(c);return d.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=a.Ia.get(f);p&&a.Ia.set(f,p.withResumeToken(h.resumeToken,c))}})),d.targetMismatches.forEach(((h,f)=>{const p=a.Ia.get(h);if(!p)return;a.Ia.set(h,p.withResumeToken(ps.EMPTY_BYTE_STRING,p.snapshotVersion)),pS(a,h);const x=new iu(p.target,h,f,p.sequenceNumber);ox(a,x)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){ft(Zu,"Failed to raise snapshot:",r),await _g(n,r)}}async function _g(n,e,t){if(!Dh(e))throw e;n.Ea.add(1),await xm(n),n.Ra.set("Offline"),t||(t=()=>hS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ft(Zu,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await n0(n)}))}function vS(n,e){return e().catch((t=>_g(n,t,e)))}async function r0(n){const e=en(n),t=gu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$y;for(;C7(e);)try{const i=await u7(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,I7(e,i)}catch(i){await _g(e,i)}yS(e)&&xS(e)}function C7(n){return cd(n)&&n.Ta.length<10}function I7(n,e){n.Ta.push(e);const t=gu(n);t.O_()&&t.X_&&t.ea(e.mutations)}function yS(n){return cd(n)&&!gu(n).x_()&&n.Ta.length>0}function xS(n){gu(n).start()}async function R7(n){gu(n).ra()}async function L7(n){const e=gu(n);for(const t of n.Ta)e.ea(t.mutations)}async function k7(n,e,t){const r=n.Ta.shift(),i=Jy.from(r,e,t);await vS(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await r0(n)}async function P7(n,e){e&&gu(n).X_&&await(async function(r,i){if((function(c){return XA(c)&&c!==We.ABORTED})(i.code)){const a=r.Ta.shift();gu(r).B_(),await vS(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await r0(r)}})(n,e),yS(n)&&xS(n)}async function Ow(n,e){const t=en(n);t.asyncQueue.verifyOperationInProgress(),ft(Zu,"RemoteStore received new credentials");const r=cd(t);t.Ea.add(3),await xm(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await n0(t)}async function D7(n,e){const t=en(n);e?(t.Ea.delete(2),await n0(t)):e||(t.Ea.add(2),await xm(t),t.Ra.set("Unknown"))}function Oh(n){return n.ma||(n.ma=(function(t,r,i){const a=en(t);return a.sa(),new x7(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:S7.bind(null,n),t_:E7.bind(null,n),r_:j7.bind(null,n),H_:T7.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),cx(n)?lx(n):n.Ra.set("Unknown")):(await n.ma.stop(),gS(n))}))),n.ma}function gu(n){return n.fa||(n.fa=(function(t,r,i){const a=en(t);return a.sa(),new b7(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:R7.bind(null,n),r_:P7.bind(null,n),ta:L7.bind(null,n),na:k7.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await r0(n)):(await n.fa.stop(),n.Ta.length>0&&(ft(Zu,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class ux{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new vl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,d=new ux(e,t,c,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dx(n,e){if(mc("AsyncQueue",`${e}: ${n}`),Dh(n))return new st(We.UNAVAILABLE,`${e}: ${n}`);throw n}class uh{static emptySet(e){return new uh(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Dt.comparator(t.key,r.key):(t,r)=>Dt.comparator(t.key,r.key),this.keyedMap=Lf(),this.sortedSet=new Br(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof uh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new uh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Fw{constructor(){this.ga=new Br(Dt.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ut(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ah{constructor(e,t,r,i,a,c,d,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Ah(e,t,uh.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class M7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class O7{constructor(){this.queries=qw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=en(t),a=i.queries;i.queries=qw(),a.forEach(((c,d)=>{for(const h of d.Sa)h.onError(r)}))})(this,new st(We.ABORTED,"Firestore shutting down"))}}function qw(){return new ld((n=>FA(n)),Kg)}async function bS(n,e){const t=en(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new M7,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const d=dx(c,`Initialization of query '${Zd(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&hx(t)}async function wS(n,e){const t=en(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function F7(n,e){const t=en(n);let r=!1;for(const i of e){const a=i.query,c=t.queries.get(a);if(c){for(const d of c.Sa)d.Fa(i)&&(r=!0);c.wa=i}}r&&hx(t)}function q7(n,e,t){const r=en(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function hx(n){n.Ca.forEach((e=>{e.next()}))}var Zv,Vw;(Vw=Zv||(Zv={})).Ma="default",Vw.Cache="cache";class _S{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ah(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ah.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zv.Cache}}class NS{constructor(e){this.key=e}}class AS{constructor(e){this.key=e}}class V7{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Sn(),this.mutatedKeys=Sn(),this.eu=qA(e),this.tu=new uh(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Fw,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,x)=>{const N=i.get(p),b=Qg(this.query,x)?x:null,E=!!N&&this.mutatedKeys.has(N.key),C=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let I=!1;N&&b?N.data.isEqual(b.data)?E!==C&&(r.track({type:3,doc:b}),I=!0):this.su(N,b)||(r.track({type:2,doc:b}),I=!0,(h&&this.eu(b,h)>0||f&&this.eu(b,f)<0)&&(d=!0)):!N&&b?(r.track({type:0,doc:b}),I=!0):N&&!b&&(r.track({type:1,doc:N}),I=!0,(h||f)&&(d=!0)),I&&(b?(c=c.add(b),a=C?a.add(p):a.delete(p)):(c=c.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{tu:c,iu:r,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((p,x)=>(function(b,E){const C=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ut(20277,{Rt:I})}};return C(b)-C(E)})(p.type,x.type)||this.eu(p.doc,x.doc))),this.ou(r),i=i??!1;const d=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,f=h!==this.Za;return this.Za=h,c.length!==0||f?{snapshot:new Ah(this.query,e.tu,a,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Sn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new AS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new NS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Sn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ah.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const fx="SyncEngine";class U7{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class B7{constructor(e){this.key=e,this.hu=!1}}class z7{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ld((d=>FA(d)),Kg),this.Iu=new Map,this.Eu=new Set,this.du=new Br(Dt.comparator),this.Au=new Map,this.Ru=new tx,this.Vu={},this.mu=new Map,this.fu=Nh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function H7(n,e,t=!0){const r=IS(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await SS(r,e,t,!0),i}async function $7(n,e){const t=IS(n);await SS(t,e,!0,!1)}async function SS(n,e,t,r){const i=await d7(n.localStore,yl(e)),a=i.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await G7(n,e,a,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&mS(n.remoteStore,i),d}async function G7(n,e,t,r,i){n.pu=(x,N,b)=>(async function(C,I,R,U){let $=I.view.ru(R);$.Cs&&($=await Lw(C.localStore,I.query,!1).then((({documents:V})=>I.view.ru(V,$))));const z=U&&U.targetChanges.get(I.targetId),ue=U&&U.targetMismatches.get(I.targetId)!=null,ie=I.view.applyChanges($,C.isPrimaryClient,z,ue);return Bw(C,I.targetId,ie.au),ie.snapshot})(n,x,N,b);const a=await Lw(n.localStore,e,!0),c=new V7(e,a.Qs),d=c.ru(a.documents),h=ym.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=c.applyChanges(d,n.isPrimaryClient,h);Bw(n,t,f.au);const p=new U7(e,t,c);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function W7(n,e,t){const r=en(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((c=>!Kg(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Xv(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ax(r.remoteStore,i.targetId),ey(r,i.targetId)})).catch(Ph)):(ey(r,i.targetId),await Xv(r.localStore,i.targetId,!0))}async function Y7(n,e){const t=en(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ax(t.remoteStore,r.targetId))}async function K7(n,e,t){const r=nP(n);try{const i=await(function(c,d){const h=en(c),f=rr.now(),p=d.reduce(((b,E)=>b.add(E.key)),Sn());let x,N;return h.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let E=pc(),C=Sn();return h.Ns.getEntries(b,p).next((I=>{E=I,E.forEach(((R,U)=>{U.isValidDocument()||(C=C.add(R))}))})).next((()=>h.localDocuments.getOverlayedDocuments(b,E))).next((I=>{x=I;const R=[];for(const U of d){const $=hk(U,x.get(U.key).overlayedDocument);$!=null&&R.push(new Au(U.key,$,IA($.value.mapValue),ms.exists(!0)))}return h.mutationQueue.addMutationBatch(b,f,R,d)})).next((I=>{N=I;const R=I.applyToLocalDocumentSet(x,C);return h.documentOverlayCache.saveOverlays(b,I.batchId,R)}))})).then((()=>({batchId:N.batchId,changes:UA(x)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,d,h){let f=c.Vu[c.currentUser.toKey()];f||(f=new Br(An)),f=f.insert(d,h),c.Vu[c.currentUser.toKey()]=f})(r,i.batchId,t),await bm(r,i.changes),await r0(r.remoteStore)}catch(i){const a=dx(i,"Failed to persist write");t.reject(a)}}async function ES(n,e){const t=en(n);try{const r=await l7(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const c=t.Au.get(a);c&&(kn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?kn(c.hu,14607):i.removedDocuments.size>0&&(kn(c.hu,42227),c.hu=!1))})),await bm(t,r,e)}catch(r){await Ph(r)}}function Uw(n,e,t){const r=en(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,c)=>{const d=c.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(c,d){const h=en(c);h.onlineState=d;let f=!1;h.queries.forEach(((p,x)=>{for(const N of x.Sa)N.va(d)&&(f=!0)})),f&&hx(h)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Q7(n,e,t){const r=en(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let c=new Br(Dt.comparator);c=c.insert(a,Xi.newNoDocument(a,Gt.min()));const d=Sn().add(a),h=new e0(Gt.min(),new Map,new Br(An),c,d);await ES(r,h),r.du=r.du.remove(a),r.Au.delete(e),mx(r)}else await Xv(r.localStore,e,!1).then((()=>ey(r,e,t))).catch(Ph)}async function X7(n,e){const t=en(n),r=e.batch.batchId;try{const i=await o7(t.localStore,e);TS(t,r,null),jS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await bm(t,i)}catch(i){await Ph(i)}}async function J7(n,e,t){const r=en(n);try{const i=await(function(c,d){const h=en(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return h.mutationQueue.lookupMutationBatch(f,d).next((x=>(kn(x!==null,37113),p=x.keys(),h.mutationQueue.removeMutationBatch(f,x)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>h.localDocuments.getDocuments(f,p)))}))})(r.localStore,e);TS(r,e,t),jS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await bm(r,i)}catch(i){await Ph(i)}}function jS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function TS(n,e,t){const r=en(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ey(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||CS(n,r)}))}function CS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ax(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),mx(n))}function Bw(n,e,t){for(const r of t)r instanceof NS?(n.Ru.addReference(r.key,e),Z7(n,r)):r instanceof AS?(ft(fx,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||CS(n,r.key)):Ut(19791,{wu:r})}function Z7(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ft(fx,"New document in limbo: "+t),n.Eu.add(r),mx(n))}function mx(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Dt(fr.fromString(e)),r=n.fu.next();n.Au.set(r,new B7(t)),n.du=n.du.insert(t,r),mS(n.remoteStore,new iu(yl(Qy(t.path)),r,"TargetPurposeLimboResolution",Wg.ce))}}async function bm(n,e,t){const r=en(n),i=[],a=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,h)=>{c.push(r.pu(h,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const p=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,p?"current":"not-current")}if(f){i.push(f);const p=rx.As(h.targetId,f);a.push(p)}})))})),await Promise.all(c),r.Pu.H_(i),await(async function(h,f){const p=en(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>Je.forEach(f,(N=>Je.forEach(N.Es,(b=>p.persistence.referenceDelegate.addReference(x,N.targetId,b))).next((()=>Je.forEach(N.ds,(b=>p.persistence.referenceDelegate.removeReference(x,N.targetId,b)))))))))}catch(x){if(!Dh(x))throw x;ft(ix,"Failed to update sequence numbers: "+x)}for(const x of f){const N=x.targetId;if(!x.fromCache){const b=p.Ms.get(N),E=b.snapshotVersion,C=b.withLastLimboFreeSnapshotVersion(E);p.Ms=p.Ms.insert(N,C)}}})(r.localStore,a))}async function eP(n,e){const t=en(n);if(!t.currentUser.isEqual(e)){ft(fx,"User change. New user:",e.toKey());const r=await dS(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((d=>{d.forEach((h=>{h.reject(new st(We.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bm(t,r.Ls)}}function tP(n,e){const t=en(n),r=t.Au.get(e);if(r&&r.hu)return Sn().add(r.key);{let i=Sn();const a=t.Iu.get(e);if(!a)return i;for(const c of a){const d=t.Tu.get(c);i=i.unionWith(d.view.nu)}return i}}function IS(n){const e=en(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ES.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q7.bind(null,e),e.Pu.H_=F7.bind(null,e.eventManager),e.Pu.yu=q7.bind(null,e.eventManager),e}function nP(n){const e=en(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=J7.bind(null,e),e}class Ng{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=t0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return a7(this.persistence,new r7,e.initialUser,this.serializer)}Cu(e){return new uS(nx.mi,this.serializer)}Du(e){return new f7}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ng.provider={build:()=>new Ng};class rP extends Ng{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){kn(this.persistence.referenceDelegate instanceof wg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Bk(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?da.withCacheSize(this.cacheSizeBytes):da.DEFAULT;return new uS((r=>wg.mi(r,t)),this.serializer)}}class ty{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Uw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eP.bind(null,this.syncEngine),await D7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new O7})()}createDatastore(e){const t=t0(e.databaseInfo.databaseId),r=(function(a){return new y7(a)})(e.databaseInfo);return(function(a,c,d,h){return new _7(a,c,d,h)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,c,d){return new A7(r,i,a,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Uw(this.syncEngine,t,0)),(function(){return Dw.v()?new Dw:new m7})())}createSyncEngine(e,t){return(function(i,a,c,d,h,f,p){const x=new z7(i,a,c,d,h,f);return p&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=en(t);ft(Zu,"RemoteStore shutting down."),r.Ea.add(5),await xm(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ty.provider={build:()=>new ty};class RS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mc("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class iP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new st(We.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,a){const c=en(i),d={documents:a.map((x=>bg(c.serializer,x)))},h=await c.Ho("BatchGetDocuments",c.serializer.databaseId,fr.emptyPath(),d,a.length),f=new Map;h.forEach((x=>{const N=Sk(c.serializer,x);f.set(N.key.toString(),N)}));const p=[];return a.forEach((x=>{const N=f.get(x.toString());kn(!!N,55234,{key:x}),p.push(N)})),p})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Dt.fromPath(r);this.mutations.push(new QA(i,this.precondition(i)))})),await(async function(r,i){const a=en(r),c={writes:i.map((d=>sS(a.serializer,d)))};await a.Go("Commit",a.serializer.databaseId,fr.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ut(50498,{Gu:e.constructor.name});t=Gt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new st(We.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gt.min())?ms.exists(!1):ms.updateTime(t):ms.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gt.min()))throw new st(We.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ms.updateTime(t)}return ms.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class sP{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new sx(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new iP(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!gm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!XA(t)}return!1}}const vu="FirestoreClient";class aP{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Cs.UNAUTHENTICATED,this.clientId=Hy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async c=>{ft(vu,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ft(vu,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=dx(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function K1(n,e){n.asyncQueue.verifyOperationInProgress(),ft(vu,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await dS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function zw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await oP(n);ft(vu,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Ow(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Ow(e.remoteStore,i))),n._onlineComponents=e}async function oP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ft(vu,"Using user provided OfflineComponentProvider");try{await K1(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===We.FAILED_PRECONDITION||i.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;xh("Error using user provided cache. Falling back to memory cache: "+t),await K1(n,new Ng)}}else ft(vu,"Using default OfflineComponentProvider"),await K1(n,new rP(void 0));return n._offlineComponents}async function px(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ft(vu,"Using user provided OnlineComponentProvider"),await zw(n,n._uninitializedComponentsProvider._online)):(ft(vu,"Using default OnlineComponentProvider"),await zw(n,new ty))),n._onlineComponents}function lP(n){return px(n).then((e=>e.syncEngine))}function cP(n){return px(n).then((e=>e.datastore))}async function LS(n){const e=await px(n),t=e.eventManager;return t.onListen=H7.bind(null,e.syncEngine),t.onUnlisten=W7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Y7.bind(null,e.syncEngine),t}function uP(n,e,t={}){const r=new vl;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,h,f){const p=new RS({next:N=>{p.Nu(),c.enqueueAndForget((()=>wS(a,x)));const b=N.docs.has(d);!b&&N.fromCache?f.reject(new st(We.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&N.fromCache&&h&&h.source==="server"?f.reject(new st(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(N)},error:N=>f.reject(N)}),x=new _S(Qy(d.path),p,{includeMetadataChanges:!0,qa:!0});return bS(a,x)})(await LS(n),n.asyncQueue,e,t,r))),r.promise}function dP(n,e,t={}){const r=new vl;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,h,f){const p=new RS({next:N=>{p.Nu(),c.enqueueAndForget((()=>wS(a,x))),N.fromCache&&h.source==="server"?f.reject(new st(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(N)},error:N=>f.reject(N)}),x=new _S(d,p,{includeMetadataChanges:!0,qa:!0});return bS(a,x)})(await LS(n),n.asyncQueue,e,t,r))),r.promise}function kS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Hw=new Map;const PS="firestore.googleapis.com",$w=!0;class Gw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new st(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PS,this.ssl=$w}else this.host=e.host,this.ssl=e.ssl??$w;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vk)throw new st(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}E8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new st(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new st(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new st(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class i0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new st(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new g8;switch(r.type){case"firstParty":return new b8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new st(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Hw.get(t);r&&(ft("ComponentProvider","Removing Datastore"),Hw.delete(t),r.terminate())})(this),Promise.resolve()}}function hP(n,e,t,r={}){n=oo(n,i0);const i=Ih(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;i&&(b4(`https://${d}`),w4("Firestore",!0)),a.host!==PS&&a.host!==d&&xh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...a,host:d,ssl:i,emulatorOptions:r};if(!du(h,c)&&(n._setSettings(h),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Cs.MOCK_USER;else{f=EC(r.mockUserToken,n._app?.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new st(We.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Cs(x)}n._authCredentials=new v8(new yA(f,p))}}class ud{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ud(this.firestore,e,this._query)}}class Zr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zr(this.firestore,e,this._key)}toJSON(){return{type:Zr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(pm(t,Zr._jsonSchema))return new Zr(e,r||null,new Dt(fr.fromString(t.referencePath)))}}Zr._jsonSchemaVersion="firestore/documentReference/1.0",Zr._jsonSchema={type:xi("string",Zr._jsonSchemaVersion),referencePath:xi("string")};class cu extends ud{constructor(e,t,r){super(e,t,Qy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zr(this.firestore,null,new Dt(e))}withConverter(e){return new cu(this.firestore,e,this._path)}}function Hn(n,e,...t){if(n=Pr(n),xA("collection","path",e),n instanceof i0){const r=fr.fromString(e,...t);return sw(r),new cu(n,null,r)}{if(!(n instanceof Zr||n instanceof cu))throw new st(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fr.fromString(e,...t));return sw(r),new cu(n.firestore,null,r)}}function Tn(n,e,...t){if(n=Pr(n),arguments.length===1&&(e=Hy.newId()),xA("doc","path",e),n instanceof i0){const r=fr.fromString(e,...t);return iw(r),new Zr(n,null,new Dt(r))}{if(!(n instanceof Zr||n instanceof cu))throw new st(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fr.fromString(e,...t));return iw(r),new Zr(n.firestore,n instanceof cu?n.converter:null,new Dt(r))}}const Ww="AsyncQueue";class Yw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sx(this,"async_queue_retry"),this._c=()=>{const r=Y1();r&&ft(Ww,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Y1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Y1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new vl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Dh(e))throw e;ft(Ww,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,mc("INTERNAL UNHANDLED ERROR: ",Kw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=ux.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Ut(47125,{Pc:Kw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Kw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Su extends i0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Yw,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yw(e),this._firestoreClient=void 0,await e}}}function fP(n,e){const t=typeof n=="object"?n:Py(),r=typeof n=="string"?n:mg,i=ad(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=AC("firestore");a&&hP(i,...a)}return i}function s0(n){if(n._terminated)throw new st(We.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mP(n),n._firestoreClient}function mP(n){const e=n._freezeSettings(),t=(function(i,a,c,d){return new O8(i,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,kS(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new aP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}class La{constructor(e){this._byteString=e}static fromBase64String(e){try{return new La(ps.fromBase64String(e))}catch(t){throw new st(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new La(ps.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:La._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pm(e,La._jsonSchema))return La.fromBase64String(e.bytes)}}La._jsonSchemaVersion="firestore/bytes/1.0",La._jsonSchema={type:xi("string",La._jsonSchemaVersion),bytes:xi("string")};class wm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new st(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gx{constructor(e){this._methodName=e}}class xl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new st(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new st(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return An(this._lat,e._lat)||An(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xl._jsonSchemaVersion}}static fromJSON(e){if(pm(e,xl._jsonSchema))return new xl(e.latitude,e.longitude)}}xl._jsonSchemaVersion="firestore/geoPoint/1.0",xl._jsonSchema={type:xi("string",xl._jsonSchemaVersion),latitude:xi("number"),longitude:xi("number")};class bl{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pm(e,bl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new bl(e.vectorValues);throw new st(We.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bl._jsonSchemaVersion="firestore/vectorValue/1.0",bl._jsonSchema={type:xi("string",bl._jsonSchemaVersion),vectorValues:xi("object")};const pP=/^__.*__$/;class gP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Au(e,this.data,this.fieldMask,t,this.fieldTransforms):new vm(e,this.data,t,this.fieldTransforms)}}class DS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Au(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ut(40011,{Ac:n})}}class vx{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ag(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(MS(this.Ac)&&pP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||t0(e)}Cc(e,t,r,i=!1){return new vx({Ac:e,methodName:t,Dc:r,path:fs.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _m(n){const e=n._freezeSettings(),t=t0(n._databaseId);return new vP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yx(n,e,t,r,i,a={}){const c=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);xx("Data must be an object, but it was:",c,r);const d=qS(r,c);let h,f;if(a.merge)h=new ka(c.fieldMask),f=c.fieldTransforms;else if(a.mergeFields){const p=[];for(const x of a.mergeFields){const N=ny(e,x,t);if(!c.contains(N))throw new st(We.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);US(p,N)||p.push(N)}h=new ka(p),f=c.fieldTransforms.filter((x=>h.covers(x.field)))}else h=null,f=c.fieldTransforms;return new gP(new Bs(d),h,f)}class a0 extends gx{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof a0}}function OS(n,e,t,r){const i=n.Cc(1,e,t);xx("Data must be an object, but it was:",i,r);const a=[],c=Bs.empty();Nu(r,((h,f)=>{const p=bx(e,h,t);f=Pr(f);const x=i.yc(p);if(f instanceof a0)a.push(p);else{const N=Nm(f,x);N!=null&&(a.push(p),c.set(p,N))}}));const d=new ka(a);return new DS(c,d,i.fieldTransforms)}function FS(n,e,t,r,i,a){const c=n.Cc(1,e,t),d=[ny(e,r,t)],h=[i];if(a.length%2!=0)throw new st(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)d.push(ny(e,a[N])),h.push(a[N+1]);const f=[],p=Bs.empty();for(let N=d.length-1;N>=0;--N)if(!US(f,d[N])){const b=d[N];let E=h[N];E=Pr(E);const C=c.yc(b);if(E instanceof a0)f.push(b);else{const I=Nm(E,C);I!=null&&(f.push(b),p.set(b,I))}}const x=new ka(f);return new DS(p,x,c.fieldTransforms)}function yP(n,e,t,r=!1){return Nm(t,n.Cc(r?4:3,e))}function Nm(n,e){if(VS(n=Pr(n)))return xx("Unsupported field value:",e,n),qS(n,e);if(n instanceof gx)return(function(r,i){if(!MS(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let c=0;for(const d of r){let h=Nm(d,i.wc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=Pr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ak(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=rr.fromDate(r);return{timestampValue:xg(i.serializer,a)}}if(r instanceof rr){const a=new rr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xg(i.serializer,a)}}if(r instanceof xl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof La)return{bytesValue:tS(i.serializer,r._byteString)};if(r instanceof Zr){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ex(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bl)return(function(c,d){return{mapValue:{fields:{[TA]:{stringValue:CA},[pg]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw d.Sc("VectorValues must only contain numeric values.");return Xy(d.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Gg(r)}`)})(n,e)}function qS(n,e){const t={};return _A(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nu(n,((r,i)=>{const a=Nm(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function VS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rr||n instanceof xl||n instanceof La||n instanceof Zr||n instanceof gx||n instanceof bl)}function xx(n,e,t){if(!VS(t)||!bA(t)){const r=Gg(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function ny(n,e,t){if((e=Pr(e))instanceof wm)return e._internalPath;if(typeof e=="string")return bx(n,e);throw Ag("Field path arguments must be of type string or ",n,!1,void 0,t)}const xP=new RegExp("[~\\*/\\[\\]]");function bx(n,e,t){if(e.search(xP)>=0)throw Ag(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wm(...e.split("."))._internalPath}catch{throw Ag(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ag(n,e,t,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new st(We.INVALID_ARGUMENT,d+n+h)}function US(n,e){return n.some((t=>t.isEqual(e)))}class Sg{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Zr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(o0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class bP extends Sg{data(){return super.data()}}function o0(n,e){return typeof e=="string"?bx(n,e):e instanceof wm?e._internalPath:e._delegate._internalPath}function wP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new st(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wx{}class BS extends wx{}function Pa(n,e,...t){let r=[];e instanceof wx&&r.push(e),r=r.concat(t),(function(a){const c=a.filter((h=>h instanceof _x)).length,d=a.filter((h=>h instanceof l0)).length;if(c>1||c>0&&d>0)throw new st(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class l0 extends BS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new l0(e,t,r)}_apply(e){const t=this._parse(e);return zS(e._query,t),new ud(e.firestore,e.converter,Gv(e._query,t))}_parse(e){const t=_m(e.firestore);return(function(a,c,d,h,f,p,x){let N;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new st(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Xw(x,p);const E=[];for(const C of x)E.push(Qw(h,a,C));N={arrayValue:{values:E}}}else N=Qw(h,a,x)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Xw(x,p),N=yP(d,c,x,p==="in"||p==="not-in");return yi.create(f,p,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function tr(n,e,t){const r=e,i=o0("where",n);return l0._create(i,r,t)}class _x extends wx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _x(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Oo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let c=i;const d=a.getFlattenedFilters();for(const h of d)zS(c,h),c=Gv(c,h)})(e._query,t),new ud(e.firestore,e.converter,Gv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Nx extends BS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Nx(e,t)}_apply(e){const t=(function(i,a,c){if(i.startAt!==null)throw new st(We.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new st(We.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zf(a,c)})(e._query,this._field,this._direction);return new ud(e.firestore,e.converter,(function(i,a){const c=i.explicitOrderBy.concat([a]);return new Mh(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function Eg(n,e="asc"){const t=e,r=o0("orderBy",n);return Nx._create(r,t)}function Qw(n,e,t){if(typeof(t=Pr(t))=="string"){if(t==="")throw new st(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OA(e)&&t.indexOf("/")!==-1)throw new st(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fr.fromString(t));if(!Dt.isDocumentKey(r))throw new st(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fw(n,new Dt(r))}if(t instanceof Zr)return fw(n,t._key);throw new st(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gg(t)}.`)}function Xw(n,e){if(!Array.isArray(n)||n.length===0)throw new st(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zS(n,e){const t=(function(i,a){for(const c of i)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new st(We.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new st(We.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class HS{convertValue(e,t="none"){switch(pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ut(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Nu(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[pg].arrayValue?.values?.map((r=>si(r.doubleValue)));return new bl(t)}convertGeoPoint(e){return new xl(si(e.latitude),si(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qf(e));default:return null}}convertTimestamp(e){const t=fu(e);return new rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fr.fromString(e);kn(lS(r),9688,{name:e});const i=new Xf(r.get(1),r.get(3)),a=new Dt(r.popFirst(5));return i.isEqual(t)||mc(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Ax(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class _P extends HS{constructor(e){super(),this.firestore=e}convertBytes(e){return new La(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zr(this.firestore,null,t)}}class sh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uu extends Sg{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(o0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new st(We.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=uu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}uu._jsonSchemaVersion="firestore/documentSnapshot/1.0",uu._jsonSchema={type:xi("string",uu._jsonSchemaVersion),bundleSource:xi("string","DocumentSnapshot"),bundleName:xi("string"),bundle:xi("string")};class Wp extends uu{data(e={}){return super.data(e)}}class dh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new sh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Wp(this._firestore,this._userDataWriter,r.key,r,new sh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new st(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((d=>{const h=new Wp(i._firestore,i._userDataWriter,d.doc.key,d.doc,new sh(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const h=new Wp(i._firestore,i._userDataWriter,d.doc.key,d.doc,new sh(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,p=-1;return d.type!==0&&(f=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),p=c.indexOf(d.doc.key)),{type:NP(d.type),doc:h,oldIndex:f,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new st(We.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=dh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ut(61501,{type:n})}}function ac(n){n=oo(n,Zr);const e=oo(n.firestore,Su);return uP(s0(e),n._key).then((t=>AP(e,n,t)))}dh._jsonSchemaVersion="firestore/querySnapshot/1.0",dh._jsonSchema={type:xi("string",dh._jsonSchemaVersion),bundleSource:xi("string","QuerySnapshot"),bundleName:xi("string"),bundle:xi("string")};class Sx extends HS{constructor(e){super(),this.firestore=e}convertBytes(e){return new La(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zr(this.firestore,null,t)}}function ha(n){n=oo(n,ud);const e=oo(n.firestore,Su),t=s0(e),r=new Sx(e);return wP(n._query),dP(t,n._query).then((i=>new dh(e,r,n,i)))}function fa(n,e,t){n=oo(n,Zr);const r=oo(n.firestore,Su),i=Ax(n.converter,e,t);return u0(r,[yx(_m(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ms.none())])}function Xc(n,e,t,...r){n=oo(n,Zr);const i=oo(n.firestore,Su),a=_m(i);let c;return c=typeof(e=Pr(e))=="string"||e instanceof wm?FS(a,"updateDoc",n._key,e,t,r):OS(a,"updateDoc",n._key,e),u0(i,[c.toMutation(n._key,ms.exists(!0))])}function c0(n){return u0(oo(n.firestore,Su),[new Zg(n._key,ms.none())])}function $S(n,e){const t=oo(n.firestore,Su),r=Tn(n),i=Ax(n.converter,e);return u0(t,[yx(_m(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ms.exists(!1))]).then((()=>r))}function u0(n,e){return(function(r,i){const a=new vl;return r.asyncQueue.enqueueAndForget((async()=>K7(await lP(r),i,a))),a.promise})(s0(n),e)}function AP(n,e,t){const r=t.docs.get(e._key),i=new Sx(n);return new uu(n,i,e._key,r,new sh(t.hasPendingWrites,t.fromCache),e.converter)}const SP={maxAttempts:5};function Pf(n,e){if((n=Pr(n)).firestore!==e)throw new st(We.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class EP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_m(e)}get(e){const t=Pf(e,this._firestore),r=new _P(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return Ut(24041);const a=i[0];if(a.isFoundDocument())return new Sg(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Sg(this._firestore,r,t._key,null,t.converter);throw Ut(18433,{doc:a})}))}set(e,t,r){const i=Pf(e,this._firestore),a=Ax(i.converter,t,r),c=yx(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Pf(e,this._firestore);let c;return c=typeof(t=Pr(t))=="string"||t instanceof wm?FS(this._dataReader,"Transaction.update",a._key,t,r,i):OS(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Pf(e,this._firestore);return this._transaction.delete(t._key),this}}class jP extends EP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pf(e,this._firestore),r=new Sx(this._firestore);return super.get(e).then((i=>new uu(this._firestore,r,t._key,i._document,new sh(!1,!1),t.converter)))}}function TP(n,e,t){n=oo(n,Su);const r={...SP,...t};return(function(a){if(a.maxAttempts<1)throw new st(We.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,c,d){const h=new vl;return a.asyncQueue.enqueueAndForget((async()=>{const f=await cP(a);new sP(a.asyncQueue,f,d,c,h).ju()})),h.promise})(s0(n),(i=>e(new jP(n,i))),r)}(function(e,t=!0){(function(i){kh=i})(Rh),_l(new Do("firestore",((r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),d=new Su(new y8(r.getProvider("auth-internal")),new w8(c,r.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new st(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xf(f.options.projectId,p)})(c,i),c);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),so(ew,tw,e),so(ew,tw,"esm2020")})();var CP="firebase",IP="12.6.0";so(CP,IP,"app");const GS="@firebase/installations",Ex="0.6.19";const WS=1e4,YS=`w:${Ex}`,KS="FIS_v2",RP="https://firebaseinstallations.googleapis.com/v1",LP=3600*1e3,kP="installations",PP="Installations";const DP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ed=new sd(kP,PP,DP);function QS(n){return n instanceof qo&&n.code.includes("request-failed")}function XS({projectId:n}){return`${RP}/projects/${n}/installations`}function JS(n){return{token:n.token,requestStatus:2,expiresIn:OP(n.expiresIn),creationTime:Date.now()}}async function ZS(n,e){const r=(await e.json()).error;return ed.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function e3({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function MP(n,{refreshToken:e}){const t=e3(n);return t.append("Authorization",FP(e)),t}async function t3(n){const e=await n();return e.status>=500&&e.status<600?n():e}function OP(n){return Number(n.replace("s","000"))}function FP(n){return`${KS} ${n}`}async function qP({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=XS(n),i=e3(n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const c={fid:t,authVersion:KS,appId:n.appId,sdkVersion:YS},d={method:"POST",headers:i,body:JSON.stringify(c)},h=await t3(()=>fetch(r,d));if(h.ok){const f=await h.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:JS(f.authToken)}}else throw await ZS("Create Installation",h)}function n3(n){return new Promise(e=>{setTimeout(e,n)})}function VP(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const UP=/^[cdef][\w-]{21}$/,ry="";function BP(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=zP(n);return UP.test(t)?t:ry}catch{return ry}}function zP(n){return VP(n).substr(0,22)}function d0(n){return`${n.appName}!${n.appId}`}const r3=new Map;function i3(n,e){const t=d0(n);s3(t,e),HP(t,e)}function s3(n,e){const t=r3.get(n);if(t)for(const r of t)r(e)}function HP(n,e){const t=$P();t&&t.postMessage({key:n,fid:e}),GP()}let Wu=null;function $P(){return!Wu&&"BroadcastChannel"in self&&(Wu=new BroadcastChannel("[Firebase] FID Change"),Wu.onmessage=n=>{s3(n.data.key,n.data.fid)}),Wu}function GP(){r3.size===0&&Wu&&(Wu.close(),Wu=null)}const WP="firebase-installations-database",YP=1,td="firebase-installations-store";let Q1=null;function jx(){return Q1||(Q1=j4(WP,YP,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(td)}}})),Q1}async function jg(n,e){const t=d0(n),i=(await jx()).transaction(td,"readwrite"),a=i.objectStore(td),c=await a.get(t);return await a.put(e,t),await i.done,(!c||c.fid!==e.fid)&&i3(n,e.fid),e}async function a3(n){const e=d0(n),r=(await jx()).transaction(td,"readwrite");await r.objectStore(td).delete(e),await r.done}async function h0(n,e){const t=d0(n),i=(await jx()).transaction(td,"readwrite"),a=i.objectStore(td),c=await a.get(t),d=e(c);return d===void 0?await a.delete(t):await a.put(d,t),await i.done,d&&(!c||c.fid!==d.fid)&&i3(n,d.fid),d}async function Tx(n){let e;const t=await h0(n.appConfig,r=>{const i=KP(r),a=QP(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===ry?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function KP(n){const e=n||{fid:BP(),registrationStatus:0};return o3(e)}function QP(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ed.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=XP(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:JP(n)}:{installationEntry:e}}async function XP(n,e){try{const t=await qP(n,e);return jg(n.appConfig,t)}catch(t){throw QS(t)&&t.customData.serverCode===409?await a3(n.appConfig):await jg(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function JP(n){let e=await Jw(n.appConfig);for(;e.registrationStatus===1;)await n3(100),e=await Jw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Tx(n);return r||t}return e}function Jw(n){return h0(n,e=>{if(!e)throw ed.create("installation-not-found");return o3(e)})}function o3(n){return ZP(n)?{fid:n.fid,registrationStatus:0}:n}function ZP(n){return n.registrationStatus===1&&n.registrationTime+WS<Date.now()}async function eD({appConfig:n,heartbeatServiceProvider:e},t){const r=tD(n,t),i=MP(n,t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}const c={installation:{sdkVersion:YS,appId:n.appId}},d={method:"POST",headers:i,body:JSON.stringify(c)},h=await t3(()=>fetch(r,d));if(h.ok){const f=await h.json();return JS(f)}else throw await ZS("Generate Auth Token",h)}function tD(n,{fid:e}){return`${XS(n)}/${e}/authTokens:generate`}async function Cx(n,e=!1){let t;const r=await h0(n.appConfig,a=>{if(!l3(a))throw ed.create("not-registered");const c=a.authToken;if(!e&&iD(c))return a;if(c.requestStatus===1)return t=nD(n,e),a;{if(!navigator.onLine)throw ed.create("app-offline");const d=aD(a);return t=rD(n,d),d}});return t?await t:r.authToken}async function nD(n,e){let t=await Zw(n.appConfig);for(;t.authToken.requestStatus===1;)await n3(100),t=await Zw(n.appConfig);const r=t.authToken;return r.requestStatus===0?Cx(n,e):r}function Zw(n){return h0(n,e=>{if(!l3(e))throw ed.create("not-registered");const t=e.authToken;return oD(t)?{...e,authToken:{requestStatus:0}}:e})}async function rD(n,e){try{const t=await eD(n,e),r={...e,authToken:t};return await jg(n.appConfig,r),t}catch(t){if(QS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await a3(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await jg(n.appConfig,r)}throw t}}function l3(n){return n!==void 0&&n.registrationStatus===2}function iD(n){return n.requestStatus===2&&!sD(n)}function sD(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+LP}function aD(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function oD(n){return n.requestStatus===1&&n.requestTime+WS<Date.now()}async function lD(n){const e=n,{installationEntry:t,registrationPromise:r}=await Tx(e);return r?r.catch(console.error):Cx(e).catch(console.error),t.fid}async function cD(n,e=!1){const t=n;return await uD(t),(await Cx(t,e)).token}async function uD(n){const{registrationPromise:e}=await Tx(n);e&&await e}function dD(n){if(!n||!n.options)throw X1("App Configuration");if(!n.name)throw X1("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw X1(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function X1(n){return ed.create("missing-app-config-values",{valueName:n})}const c3="installations",hD="installations-internal",fD=n=>{const e=n.getProvider("app").getImmediate(),t=dD(e),r=ad(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},mD=n=>{const e=n.getProvider("app").getImmediate(),t=ad(e,c3).getImmediate();return{getId:()=>lD(t),getToken:i=>cD(t,i)}};function pD(){_l(new Do(c3,fD,"PUBLIC")),_l(new Do(hD,mD,"PRIVATE"))}pD();so(GS,Ex);so(GS,Ex,"esm2020");const Tg="analytics",gD="firebase_id",vD="origin",yD=60*1e3,xD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ix="https://www.googletagmanager.com/gtag/js";const zs=new Bg("@firebase/analytics");const bD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Oa=new sd("analytics","Analytics",bD);function wD(n){if(!n.startsWith(Ix)){const e=Oa.create("invalid-gtag-resource",{gtagURL:n});return zs.warn(e.message),""}return n}function u3(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function _D(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function ND(n,e){const t=_D("firebase-js-sdk-policy",{createScriptURL:wD}),r=document.createElement("script"),i=`${Ix}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function AD(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function SD(n,e,t,r,i,a){const c=r[i];try{if(c)await e[c];else{const h=(await u3(t)).find(f=>f.measurementId===i);h&&await e[h.appId]}}catch(d){zs.error(d)}n("config",i,a)}async function ED(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let c=i.send_to;Array.isArray(c)||(c=[c]);const d=await u3(t);for(const h of c){const f=d.find(x=>x.measurementId===h),p=f&&e[f.appId];if(p)a.push(p);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){zs.error(a)}}function jD(n,e,t,r){async function i(a,...c){try{if(a==="event"){const[d,h]=c;await ED(n,e,t,d,h)}else if(a==="config"){const[d,h]=c;await SD(n,e,t,r,d,h)}else if(a==="consent"){const[d,h]=c;n("consent",d,h)}else if(a==="get"){const[d,h,f]=c;n("get",d,h,f)}else if(a==="set"){const[d]=c;n("set",d)}else n(a,...c)}catch(d){zs.error(d)}}return i}function TD(n,e,t,r,i){let a=function(...c){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=jD(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function CD(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ix)&&t.src.includes(n))return t;return null}const ID=30,RD=1e3;class LD{constructor(e={},t=RD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const d3=new LD;function kD(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function PD(n){const{appId:e,apiKey:t}=n,r={method:"GET",headers:kD(t)},i=xD.replace("{app-id}",e),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let c="";try{const d=await a.json();d.error?.message&&(c=d.error.message)}catch{}throw Oa.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function DD(n,e=d3,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Oa.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Oa.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new FD;return setTimeout(async()=>{d.abort()},yD),h3({appId:r,apiKey:i,measurementId:a},c,d,e)}async function h3(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=d3){const{appId:a,measurementId:c}=n;try{await MD(r,e)}catch(d){if(c)return zs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:a,measurementId:c};throw d}try{const d=await PD(n);return i.deleteThrottleMetadata(a),d}catch(d){const h=d;if(!OD(h)){if(i.deleteThrottleMetadata(a),c)return zs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:a,measurementId:c};throw d}const f=Number(h?.customData?.httpStatus)===503?S5(t,i.intervalMillis,ID):S5(t,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:t+1};return i.setThrottleMetadata(a,p),zs.debug(`Calling attemptFetch again in ${f} millis`),h3(n,p,r,i)}}function MD(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Oa.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function OD(n){if(!(n instanceof qo)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class FD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function qD(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,c={...r,send_to:a};n("event",t,c)}}async function VD(n,e,t,r){if(r&&r.global){const i={};for(const a of Object.keys(t))i[`user_properties.${a}`]=t[a];return n("set",i),Promise.resolve()}else{const i=await e;n("config",i,{update:!0,user_properties:t})}}async function UD(){if(N4())try{await A4()}catch(n){return zs.warn(Oa.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return zs.warn(Oa.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function BD(n,e,t,r,i,a,c){const d=DD(n);d.then(N=>{t[N.measurementId]=N.appId,n.options.measurementId&&N.measurementId!==n.options.measurementId&&zs.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>zs.error(N)),e.push(d);const h=UD().then(N=>{if(N)return r.getId()}),[f,p]=await Promise.all([d,h]);CD(a)||ND(a,f.measurementId),i("js",new Date);const x=c?.config??{};return x[vD]="firebase",x.update=!0,p!=null&&(x[gD]=p),i("config",f.measurementId,x),f.measurementId}class zD{constructor(e){this.app=e}_delete(){return delete hh[this.app.options.appId],Promise.resolve()}}let hh={},e_=[];const t_={};let J1="dataLayer",HD="gtag",n_,Rx,r_=!1;function $D(){const n=[];if(_4()&&n.push("This is a browser extension environment."),DC()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Oa.create("invalid-analytics-context",{errorInfo:e});zs.warn(t.message)}}function GD(n,e,t){$D();const r=n.options.appId;if(!r)throw Oa.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)zs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Oa.create("no-api-key");if(hh[r]!=null)throw Oa.create("already-exists",{id:r});if(!r_){AD(J1);const{wrappedGtag:a,gtagCore:c}=TD(hh,e_,t_,J1,HD);Rx=a,n_=c,r_=!0}return hh[r]=BD(n,e_,t_,e,n_,J1,t),new zD(n)}function WD(n=Py()){n=Pr(n);const e=ad(n,Tg);return e.isInitialized()?e.getImmediate():YD(n)}function YD(n,e={}){const t=ad(n,Tg);if(t.isInitialized()){const i=t.getImmediate();if(du(e,t.getOptions()))return i;throw Oa.create("already-initialized")}return t.initialize({options:e})}function KD(n,e,t){n=Pr(n),VD(Rx,hh[n.app.options.appId],e,t).catch(r=>zs.error(r))}function QD(n,e,t,r){n=Pr(n),qD(Rx,hh[n.app.options.appId],e,t,r).catch(i=>zs.error(i))}const i_="@firebase/analytics",s_="0.10.19";function XD(){_l(new Do(Tg,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return GD(r,i,t)},"PUBLIC")),_l(new Do("analytics-internal",n,"PRIVATE")),so(i_,s_),so(i_,s_,"esm2020");function n(e){try{const t=e.getProvider(Tg).getImmediate();return{logEvent:(r,i,a)=>QD(t,r,i,a),setUserProperties:(r,i)=>KD(t,r,i)}}catch(t){throw Oa.create("interop-component-reg-failed",{reason:t})}}}XD();const JD={apiKey:"AIzaSyBwaC_ySezVpfv9y9xHNromiTW77qJQlmA",authDomain:"boulangerie-da431.firebaseapp.com",projectId:"boulangerie-da431",storageBucket:"boulangerie-da431.firebasestorage.app",messagingSenderId:"324942492234",appId:"1:324942492234:web:afbc851e38b557a87f2cb3",measurementId:"G-3E7K2Y6N31"},Lx=ky(JD),iy=uA(Lx),bt=fP(Lx);WD(Lx);const a_=n=>{let e;const t=new Set,r=(f,p)=>{const x=typeof f=="function"?f(e):f;if(!Object.is(x,e)){const N=e;e=p??(typeof x!="object"||x===null)?x:Object.assign({},e,x),t.forEach(b=>b(e,N))}},i=()=>e,d={setState:r,getState:i,getInitialState:()=>h,subscribe:f=>(t.add(f),()=>t.delete(f))},h=e=n(r,i,d);return d},ZD=(n=>n?a_(n):a_),eM=n=>n;function tM(n,e=eM){const t=ru.useSyncExternalStore(n.subscribe,ru.useCallback(()=>e(n.getState()),[n,e]),ru.useCallback(()=>e(n.getInitialState()),[n,e]));return ru.useDebugValue(t),t}const o_=n=>{const e=ZD(n),t=r=>tM(e,r);return Object.assign(t,e),t},yc=(n=>n?o_(n):o_),Am=yc(n=>({user:null,isLoading:!0,isAuthenticated:!1,login:async(e,t)=>{n({isLoading:!0});try{await JR(iy,e,t),n({isLoading:!1})}catch(r){throw n({isLoading:!1}),r}},logout:async()=>{try{await iL(iy),n({user:null,isAuthenticated:!1})}catch(e){console.error("Logout error:",e)}},setUser:e=>{n({user:e,isAuthenticated:e!==null})},setLoading:e=>{n({isLoading:e})}})),Wd={clients:Hn(bt,"clients"),produits:Hn(bt,"produits"),livreurs:Hn(bt,"livreurs"),users:Hn(bt,"users"),productionPrograms:Hn(bt,"productionPrograms"),clientOrders:Hn(bt,"clientOrders"),shopStock:Hn(bt,"shopStock"),shopShifts:Hn(bt,"shopShifts"),shopSales:Hn(bt,"shopSales"),clientReturns:Hn(bt,"clientReturns"),dailyReports:Hn(bt,"dailyReports"),factures:Hn(bt,"factures"),parametres:Hn(bt,"parametres"),matieres:Hn(bt,"matieres"),mouvements:Hn(bt,"mouvements"),fournisseurs:Hn(bt,"fournisseurs")},ko=n=>rr.fromDate(n),Ia=n=>n.toDate(),On={async create(n,e){const t=Wd[n];return await $S(t,e)},async getById(n,e){const t=Tn(Wd[n],e),r=await ac(t);return r.exists()?{id:r.id,...r.data()}:null},async getAll(n){return(await ha(Wd[n])).docs.map(t=>({id:t.id,...t.data()}))},async getByQuery(n,e){const t=Pa(Wd[n],...e);return(await ha(t)).docs.map(i=>({id:i.id,...i.data()}))},async update(n,e,t){const r=Tn(Wd[n],e);return await Xc(r,t)},async delete(n,e){const t=Tn(Wd[n],e);return await c0(t)}},nM={async getProgrammeByDate(n){const e=new Date(n);e.setHours(0,0,0,0);const t=new Date(n);return t.setHours(23,59,59,999),await On.getByQuery("productionPrograms",[tr("date",">=",ko(e)),tr("date","<=",ko(t))])},async getLivraisonsByDate(n){const e=new Date(n);e.setHours(0,0,0,0);const t=new Date(n);return t.setHours(23,59,59,999),await On.getByQuery("clientReturns",[tr("dateLivraison",">=",ko(e)),tr("dateLivraison","<=",ko(t))])},async getStockBoutiqueByDate(n){const e=new Date(n);e.setHours(0,0,0,0);const t=new Date(n);return t.setHours(23,59,59,999),await On.getByQuery("shopStock",[tr("date",">=",ko(e)),tr("date","<=",ko(t))])},async getRapportByDate(n){const e=new Date(n);e.setHours(0,0,0,0);const t=new Date(n);return t.setHours(23,59,59,999),await On.getByQuery("dailyReports",[tr("date",">=",ko(e)),tr("date","<=",ko(t))])},async getClientsActifs(){return await On.getByQuery("clients",[tr("active","==",!0),Eg("nom")])},async getProduitsActifs(){return await On.getByQuery("produits",[tr("active","==",!0),Eg("nom")])}},Al=yc((n,e)=>({matieres:[],mouvements:[],fournisseurs:[],isLoading:!1,error:null,chargerDonnees:async()=>{n({isLoading:!0,error:null});try{const[t,r,i]=await Promise.all([On.getAll("matieres"),On.getAll("mouvements"),On.getAll("fournisseurs")]),a=c=>({...c,createdAt:c.createdAt instanceof rr?c.createdAt.toDate():new Date(c.createdAt),updatedAt:c.updatedAt instanceof rr?c.updatedAt.toDate():new Date(c.updatedAt||c.createdAt),...c.date?{date:c.date instanceof rr?c.date.toDate():new Date(c.date)}:{}});n({matieres:t.map(a),mouvements:r.map(a).sort((c,d)=>d.date.getTime()-c.date.getTime()),fournisseurs:i.map(a),isLoading:!1})}catch(t){console.error("Erreur chargement stock:",t),n({isLoading:!1,error:t.message})}},addMatiere:async t=>{n({isLoading:!0});try{const r={...t,createdAt:new Date,updatedAt:new Date},a={id:(await On.create("matieres",r)).id,...r};n(c=>({matieres:[...c.matieres,a],isLoading:!1}))}catch(r){console.error("Erreur ajout matire:",r),n({isLoading:!1,error:r.message})}},updateMatiere:async(t,r)=>{try{await On.update("matieres",t,{...r,updatedAt:new Date}),n(i=>({matieres:i.matieres.map(a=>a.id===t?{...a,...r,updatedAt:new Date}:a)}))}catch(i){console.error("Erreur modif matire:",i)}},deleteMatiere:async t=>{try{await On.delete("matieres",t),n(r=>({matieres:r.matieres.filter(i=>i.id!==t)}))}catch(r){console.error("Erreur suppression matire:",r)}},addMouvement:async t=>{n({isLoading:!0});try{await TP(bt,async r=>{const i=Tn(bt,"matieres",t.matiereId),a=await r.get(i);if(!a.exists())throw new Error("Matire premire introuvable !");const c=a.data();let d=c.stockActuel,h=c.prixMoyenPondere,f=c.valeurTotale;if(t.type==="achat"){const b=t.quantite,E=t.prixTotal||0;d+b>0&&(h=(f+E)/(d+b)),d+=b,f+=E}else{let b=Math.abs(t.quantite);["consommation","perte","retour_fournisseur"].includes(t.type)&&(b=-b),t.type==="correction"&&(b=t.quantite),d+=b,f=d*h}const p=Tn(Hn(bt,"mouvements"));let x=t.prixTotal;t.type!=="achat"&&!x&&(x=Math.abs(t.quantite)*h);const N={id:p.id,...t,prixTotal:x,createdAt:new Date,date:t.date||new Date};Object.keys(N).forEach(b=>{N[b]===void 0&&delete N[b]}),r.set(p,N),r.update(i,{stockActuel:d,prixMoyenPondere:h,valeurTotale:f,updatedAt:new Date})}),e().chargerDonnees()}catch(r){console.error("Erreur transaction stock:",r),n({isLoading:!1,error:r.message})}},addFournisseur:async t=>{n({isLoading:!0});try{const r={...t,createdAt:new Date,updatedAt:new Date},a={id:(await On.create("fournisseurs",r)).id,...r};n(c=>({fournisseurs:[...c.fournisseurs,a],isLoading:!1}))}catch(r){console.error("Erreur ajout fournisseur:",r),n({isLoading:!1,error:r.message})}},updateFournisseur:async(t,r)=>{try{await On.update("fournisseurs",t,{...r,updatedAt:new Date}),n(i=>({fournisseurs:i.fournisseurs.map(a=>a.id===t?{...a,...r,updatedAt:new Date}:a)}))}catch(i){console.error("Erreur modif fournisseur:",i)}},deleteFournisseur:async t=>{try{await On.delete("fournisseurs",t),n(r=>({fournisseurs:r.fournisseurs.filter(i=>i.id!==t)}))}catch(r){console.error("Erreur suppression fournisseur:",r)}},getMatiere:t=>e().matieres.find(r=>r.id===t),getMouvementsByMatiere:t=>e().mouvements.filter(r=>r.matiereId===t),getDepensesPeriode:(t,r)=>e().mouvements.filter(i=>{const a=new Date(i.date);return i.type==="achat"&&a>=t&&a<=r}).reduce((i,a)=>i+(a.prixTotal||0),0),getValeurConsommationPeriode:(t,r)=>{const{mouvements:i,matieres:a}=e();return i.filter(c=>{const d=new Date(c.date);return["consommation","perte"].includes(c.type)&&d>=t&&d<=r}).reduce((c,d)=>{if(d.prixTotal)return c+d.prixTotal;const f=a.find(p=>p.id===d.matiereId)?.prixMoyenPondere||0;return c+Math.abs(d.quantite)*f},0)}})),wl=yc((n,e)=>({programmeActuel:null,commandesClients:[],quantitesBoutique:[],produits:[],clients:[],isLoading:!1,showCommandeForm:!1,showQuantiteBoutiqueForm:!1,commandeEnEdition:null,formulaireCommande:{selectedClientId:"",dateLivraison:new Date().toISOString().split("T")[0],produitsCommandes:[],utiliserPrixClient:!0},creerNouveauProgramme:t=>{const r={id:`prog_${Date.now()}`,date:t,statut:"brouillon",commandesClients:[],quantitesBoutique:[],totauxParProduit:[],createdAt:new Date,updatedAt:new Date};n({programmeActuel:r,commandesClients:[],quantitesBoutique:[]}),e().calculerTotauxParProduit(),console.log(" Nouveau programme cr pour",t.toLocaleDateString("fr-FR"))},chargerProgramme:async t=>{console.log(" Chargement programme pour date:",t),n({isLoading:!0});try{const r=await nM.getProgrammeByDate(t);if(console.log(" Programmes trouvs dans Firebase:",r.length),r.length>0){console.log(" Programme existant trouv, chargement...");const i=r[0],a={...i,date:i.date instanceof Date?i.date:Ia(i.date),createdAt:i.createdAt instanceof Date?i.createdAt:Ia(i.createdAt),updatedAt:i.updatedAt instanceof Date?i.updatedAt:Ia(i.updatedAt),commandesClients:(i.commandesClients||[]).map(c=>({...c,dateCommande:c.dateCommande instanceof Date?c.dateCommande:Ia(c.dateCommande),dateLivraison:c.dateLivraison instanceof Date?c.dateLivraison:Ia(c.dateLivraison),createdAt:c.createdAt instanceof Date?c.createdAt:Ia(c.createdAt),updatedAt:c.updatedAt instanceof Date?c.updatedAt:Ia(c.updatedAt)}))};n({programmeActuel:a,commandesClients:a.commandesClients||[],quantitesBoutique:a.quantitesBoutique||[],isLoading:!1}),console.log(" Programme charg avec",a.commandesClients?.length||0,"commandes")}else{console.log(" Aucun programme trouv, cration automatique...");const i={id:`prog_${Date.now()}`,date:t,statut:"brouillon",commandesClients:[],quantitesBoutique:[],totauxParProduit:[],createdAt:new Date,updatedAt:new Date};n({programmeActuel:i,commandesClients:[],quantitesBoutique:[],isLoading:!1}),console.log(" Nouveau programme cr automatiquement pour",t.toLocaleDateString("fr-FR"))}}catch(r){throw console.error("Erreur lors du chargement du programme:",r),n({isLoading:!1}),r}},sauvegarderProgramme:async()=>{const{programmeActuel:t,commandesClients:r,quantitesBoutique:i}=e();if(t){n({isLoading:!0});try{const a={...t,commandesClients:r,quantitesBoutique:i,date:ko(t.date),createdAt:ko(t.createdAt),updatedAt:ko(new Date)};if(t.id.startsWith("prog_")){const{id:c,...d}=a,h=await On.create("productionPrograms",d);n(f=>({programmeActuel:f.programmeActuel?{...f.programmeActuel,id:h.id}:null,isLoading:!1}))}else{const{id:c,...d}=a;await On.update("productionPrograms",c,d),n({isLoading:!1})}}catch(a){throw console.error("Erreur lors de la sauvegarde:",a),n({isLoading:!1}),a}}},validerProduction:async()=>{const{programmeActuel:t,produits:r}=e();if(t){n({isLoading:!0});try{console.log(" Validation de la production et dduction des stocks...");const i=[];let a=[];t.totauxParProduit&&t.totauxParProduit.forEach(h=>{const f=r.find(p=>p.id===h.produitId);f?.recette&&f.recette.length>0&&(a.push(`Produit: ${f.nom} (Total: ${h.totalGlobal})`),f.recette.forEach(p=>{const x=Number((p.quantite*h.totalGlobal).toFixed(3));x>0&&(i.push({matiereId:p.matiereId,quantite:x,type:"consommation",motif:`Production: ${f.nom} (${h.totalGlobal} p.)`,auteur:"Systme",responsable:"Systme (Auto)",referenceDocument:`PROD-${new Date(t.date).toLocaleDateString()}`}),a.push(`  - Ingrdient ${p.matiereId}: ${x}`))}))}),console.log(" Mouvements  gnrer:",i.length),console.log(a.join(`
`));const c=Al.getState();for(const h of i)await c.addMouvement({...h,date:new Date,userId:"system"});const d={...t,statut:"produit",updatedAt:new Date};await On.update("productionPrograms",t.id,{statut:"produit",updatedAt:new Date}),n({programmeActuel:d,isLoading:!1}),console.log(" Production valide et stocks dduits !")}catch(i){throw console.error("Erreur validation production:",i),n({isLoading:!1}),i}}},envoyerAuBoulanger:async()=>{const{programmeActuel:t}=e();if(t)try{const r={...t,statut:"envoye",updatedAt:new Date};n({programmeActuel:r}),await e().sauvegarderProgramme()}catch(r){throw console.error("Erreur lors de l'envoi:",r),r}},ajouterCommandeClient:t=>{const r={...t,id:`cmd_${Date.now()}`,createdAt:new Date,updatedAt:new Date};n(i=>({commandesClients:[...i.commandesClients,r]})),setTimeout(()=>{e().calculerTotauxParProduit(),e().programmeActuel?.statut==="brouillon"&&e().sauvegarderProgramme().catch(i=>{console.warn("Auto-sauvegarde choue:",i)})},100)},modifierCommandeClient:(t,r)=>{n(i=>({commandesClients:i.commandesClients.map(a=>a.id===t?{...a,...r,updatedAt:new Date}:a)})),setTimeout(()=>{e().calculerTotauxParProduit(),e().programmeActuel?.statut==="brouillon"&&e().sauvegarderProgramme().catch(console.warn)},100)},supprimerCommandeClient:t=>{n(r=>({commandesClients:r.commandesClients.filter(i=>i.id!==t)})),setTimeout(()=>{e().calculerTotauxParProduit(),e().programmeActuel?.statut==="brouillon"&&e().sauvegarderProgramme().catch(console.warn)},0)},supprimerCommandesLivreur:t=>{const{clients:r}=e(),i=r.filter(c=>c.livreurId===t),a=i.map(c=>c.id);console.log(` Suppression des commandes pour le livreur ${t}:`,i.map(c=>c.nom)),n(c=>{const d=c.commandesClients.length,h=c.commandesClients.filter(p=>!a.includes(p.clientId)),f=h.length;return console.log(` ${d-f} commandes supprimes (${d} -> ${f})`),{commandesClients:h}}),setTimeout(()=>{e().calculerTotauxParProduit(),e().programmeActuel?.statut==="brouillon"&&e().sauvegarderProgramme().catch(console.warn)},0)},annulerCommandeClient:t=>{n(r=>({commandesClients:r.commandesClients.map(i=>i.id===t?{...i,statut:"annulee",updatedAt:new Date}:i)})),setTimeout(()=>e().calculerTotauxParProduit(),0)},supprimerProduitDeCommande:(t,r)=>{n(i=>({commandesClients:i.commandesClients.map(a=>{if(a.id===t){const c=[...a.produits];return c.splice(r,1),c.length===0?null:{...a,produits:c,updatedAt:new Date}}return a}).filter(a=>a!==null)})),setTimeout(()=>{e().calculerTotauxParProduit(),e().programmeActuel?.statut==="brouillon"&&e().sauvegarderProgramme().catch(console.warn)},100)},sauvegarderCommandeType:async(t,r)=>{try{await On.update("clients",t,{commandeType:r,updatedAt:new Date}),n(i=>({clients:i.clients.map(a=>a.id===t?{...a,commandeType:r,updatedAt:new Date}:a)})),console.log(" Commande type sauvegarde pour client",t)}catch(i){throw console.error("Erreur sauvegarde commande type:",i),i}},ajouterQuantiteBoutique:t=>{n(r=>{const i=r.quantitesBoutique.findIndex(a=>a.produitId===t.produitId);if(i>=0){const a=[...r.quantitesBoutique];return a[i]=t,{quantitesBoutique:a}}else return{quantitesBoutique:[...r.quantitesBoutique,t]}}),e().calculerTotauxParProduit(),setTimeout(()=>e().sauvegarderProgramme().catch(console.error),0)},modifierQuantiteBoutique:(t,r)=>{n(i=>({quantitesBoutique:i.quantitesBoutique.map(a=>a.produitId===t?{...a,quantite:r}:a)})),e().calculerTotauxParProduit(),setTimeout(()=>e().sauvegarderProgramme().catch(console.error),0)},supprimerQuantiteBoutique:t=>{n(r=>({quantitesBoutique:r.quantitesBoutique.filter(i=>i.produitId!==t)})),e().calculerTotauxParProduit(),setTimeout(()=>e().sauvegarderProgramme().catch(console.error),0)},calculerTotauxParProduit:()=>{const{commandesClients:t,quantitesBoutique:r,produits:i}=e(),a=new Map;t.filter(d=>d.statut!=="annulee").forEach(d=>{d.produits.forEach(h=>{const f=a.get(h.produitId)||{totalClient:0,totalBoutique:0,repartitionCar1Matin:0,repartitionCar2Matin:0,repartitionCarSoir:0},p=h.quantiteCommandee||(Number(h.repartitionCars?.car1_matin)||0)+(Number(h.repartitionCars?.car2_matin)||0)+(Number(h.repartitionCars?.car_soir)||0),x=Number(h.repartitionCars?.car1_matin)||0,N=Number(h.repartitionCars?.car2_matin)||0,b=Number(h.repartitionCars?.car_soir)||0;a.set(h.produitId,{totalClient:f.totalClient+p,totalBoutique:f.totalBoutique,repartitionCar1Matin:f.repartitionCar1Matin+x,repartitionCar2Matin:f.repartitionCar2Matin+N,repartitionCarSoir:f.repartitionCarSoir+b})})}),r.forEach(d=>{const h=a.get(d.produitId)||{totalClient:0,repartitionCar1Matin:0,repartitionCar2Matin:0,repartitionCarSoir:0};let f,p,x;d.repartitionCars?(f=d.repartitionCars.car1_matin,p=d.repartitionCars.car2_matin,x=d.repartitionCars.car_soir):(f=Math.ceil(d.quantite*.35),p=Math.ceil(d.quantite*.35),x=d.quantite-f-p),a.set(d.produitId,{totalClient:h.totalClient,totalBoutique:d.quantite,repartitionCar1Matin:h.repartitionCar1Matin+f,repartitionCar2Matin:h.repartitionCar2Matin+p,repartitionCarSoir:h.repartitionCarSoir+x})});const c=Array.from(a.entries()).map(([d,h])=>{const f=i.find(x=>x.id===d),p=h.totalClient+h.totalBoutique;return{produitId:d,produit:f,totalClient:h.totalClient,totalBoutique:h.totalBoutique,totalGlobal:p,repartitionCar1Matin:h.repartitionCar1Matin,repartitionCar2Matin:h.repartitionCar2Matin,repartitionCarSoir:h.repartitionCarSoir}});n(d=>({programmeActuel:d.programmeActuel?{...d.programmeActuel,totauxParProduit:c}:null}))},modifierRepartitionProduit:(t,r,i,a)=>{},chargerProduits:async()=>{try{const r=(await On.getAll("produits")).map(i=>({...i,createdAt:i.createdAt instanceof Date?i.createdAt:Ia(i.createdAt),updatedAt:i.updatedAt instanceof Date?i.updatedAt:Ia(i.updatedAt)}));n({produits:r.filter(i=>i.active)})}catch(t){throw console.error("Erreur lors du chargement des produits:",t),t}},chargerClients:async()=>{try{const r=(await On.getAll("clients")).map(i=>({...i,createdAt:i.createdAt instanceof Date?i.createdAt:Ia(i.createdAt),updatedAt:i.updatedAt instanceof Date?i.updatedAt:Ia(i.updatedAt)}));n({clients:r.filter(i=>i.active)})}catch(t){throw console.error("Erreur lors du chargement des clients:",t),t}},rafraichirDonnees:async()=>{try{await Promise.all([e().chargerProduits(),e().chargerClients()])}catch(t){throw console.error("Erreur lors du rafrachissement:",t),t}},setShowCommandeForm:t=>{n({showCommandeForm:t})},setShowQuantiteBoutiqueForm:t=>{n({showQuantiteBoutiqueForm:t})},setCommandeEnEdition:t=>{n({commandeEnEdition:t})},updateFormulaireCommande:t=>{n(r=>({formulaireCommande:{...r.formulaireCommande,...t}}))},resetFormulaireCommande:()=>{n({formulaireCommande:{selectedClientId:"",dateLivraison:new Date().toISOString().split("T")[0],produitsCommandes:[],utiliserPrixClient:!0}})},setLoading:t=>{n({isLoading:t})}})),nm=yc((n,e)=>({livraisonsJour:[],invendusClients:[],clients:[],produits:[],isLoading:!1,chargerLivraisonsDuJour:async t=>{n({isLoading:!0});try{console.log("Charger livraisons du jour:",t),n({isLoading:!1})}catch(r){throw n({isLoading:!1}),r}},chargerInvendusDuJour:async t=>{n({isLoading:!0});try{const r=t.toISOString().split("T")[0];console.log(` Chargement des invendus pour ${r}...`);const i=new Date(r+"T00:00:00.000Z"),a=new Date(r+"T23:59:59.999Z"),c=Pa(Hn(bt,"clientReturns"),tr("dateLivraison",">=",i),tr("dateLivraison","<=",a)),d=await ha(c);if(d.empty)console.log(" Aucun retour client trouv pour cette date"),n({invendusClients:[]});else{const h=d.docs.map(f=>{const p=f.data();return{...p,dateLivraison:p.dateLivraison.toDate(),createdAt:p.createdAt.toDate(),updatedAt:p.updatedAt.toDate()}});n({invendusClients:h}),console.log(` ${h.length} retours clients chargs depuis Firebase`)}n({isLoading:!1})}catch(r){n({isLoading:!1}),console.error(" Erreur lors du chargement des invendus:",r)}},commencerLivraison:t=>{n(r=>({livraisonsJour:r.livraisonsJour.map(i=>i.clientId===t?{...i,statut:"en_cours"}:i)}))},terminerLivraison:t=>{n(r=>({livraisonsJour:r.livraisonsJour.map(i=>i.clientId===t?{...i,statut:"termine"}:i)}))},saisirInvendusClient:(t,r,i)=>{const{livraisonsJour:a}=e(),c=a.find(f=>f.clientId===t);if(!c)return;const d=c.produits.find(f=>f.produitId===r);if(!d)return;const h=d.quantiteLivree-i;n(f=>({livraisonsJour:f.livraisonsJour.map(p=>p.clientId===t?{...p,produits:p.produits.map(x=>x.produitId===r?{...x,invendus:i,vendu:h}:x)}:p)})),n(f=>{if(f.invendusClients.find(x=>x.clientId===t))return{invendusClients:f.invendusClients.map(x=>x.clientId===t?{...x,produits:x.produits.map(N=>N.produitId===r?{...N,invendus:i,vendu:h,quantiteLivree:d.quantiteLivree}:N)}:x)};{const x={id:`inv_${t}_${Date.now()}`,clientId:t,client:c.client,dateLivraison:c.dateLivraison,produits:[{produitId:r,produit:d.produit,quantiteLivree:d.quantiteLivree,invendus:i,vendu:h}],createdAt:new Date,updatedAt:new Date};return{invendusClients:[...f.invendusClients,x]}}})},calculerVenduClient:(t,r)=>{const{livraisonsJour:i}=e(),a=i.find(d=>d.clientId===t);if(!a)return 0;const c=a.produits.find(d=>d.produitId===r);return c?c.quantiteLivree-c.invendus:0},sauvegarderInvendus:async()=>{const{invendusClients:t}=e();n({isLoading:!0});try{console.log(" Sauvegarde des invendus clients:",t);for(const r of t){const i=r.dateLivraison.toISOString().split("T")[0],a=`retours_${r.clientId}_${i}`,c={...r,dateLivraison:r.dateLivraison,createdAt:r.createdAt,updatedAt:new Date};console.log(` Sauvegarde retours client vers document ID: ${a}`);const d=Tn(bt,"clientReturns",a);await fa(d,c,{merge:!0})}console.log(" Tous les retours clients sauvegards avec succs"),n({isLoading:!1})}catch(r){throw n({isLoading:!1}),console.error(" Erreur lors de la sauvegarde des invendus:",r),r}},marquerAucunRetourClient:async(t,r)=>{n({isLoading:!0});try{console.log(' Marquage "aucun retour" pour client:',t,"date:",r.toISOString().split("T")[0]);const i=r.toISOString().split("T")[0],a=`retours_${t}_${i}`,c={clientId:t,dateLivraison:r,produits:[],retoursCompletes:!0,createdAt:new Date,updatedAt:new Date},d=Tn(bt,"clientReturns",a);await fa(d,c,{merge:!0}),n(h=>({invendusClients:[...h.invendusClients.filter(p=>!(p.clientId===t&&p.dateLivraison.toDateString()===r.toDateString())),c],isLoading:!1})),console.log(' "Aucun retour" marqu avec succs')}catch(i){throw n({isLoading:!1}),console.error(' Erreur lors du marquage "aucun retour":',i),i}},sauvegarderRetoursClient:async(t,r,i)=>{n({isLoading:!0});try{console.log(" Sauvegarde des retours pour client:",t,"date:",r.toISOString().split("T")[0]);const a=r.toISOString().split("T")[0],c=`retours_${t}_${a}`,d={clientId:t,dateLivraison:r,produits:i,retoursCompletes:!0,createdAt:new Date,updatedAt:new Date},h=Tn(bt,"clientReturns",c);await fa(h,d,{merge:!0}),n(f=>({invendusClients:[...f.invendusClients.filter(x=>!(x.clientId===t&&x.dateLivraison.toDateString()===r.toDateString())),d],isLoading:!1})),console.log(" Retours client sauvegards et finaliss avec succs")}catch(a){throw n({isLoading:!1}),console.error(" Erreur lors de la sauvegarde des retours client:",a),a}},getLivraisonByClientId:t=>{const{livraisonsJour:r}=e();return r.find(i=>i.clientId===t)},getInvendusByClientId:t=>{const{invendusClients:r}=e();return r.find(i=>i.clientId===t)},setLoading:t=>{n({isLoading:t})}}));let Yd=null;const Cg=yc((n,e)=>({stockJour:null,equipeMatin:null,equipeSoir:null,ventesJour:null,produits:[],isLoading:!1,creerStockJour:(t,r)=>{const i={id:`stock_${t.getTime()}`,date:t,produits:r.map(a=>({produitId:a.produitId,stockDebut:a.stockDebut})),createdAt:new Date,updatedAt:new Date};n({stockJour:i})},chargerStockJour:async t=>{n({isLoading:!0});try{const r=t.toISOString().split("T")[0];console.log("Recherche stock pour date:",r);const i=Pa(Hn(bt,"shopStock"),tr("date",">=",new Date(r)),tr("date","<",new Date(new Date(r).getTime()+1440*60*1e3))),a=await ha(i);if(console.log("Nombre de stocks trouvs:",a.docs.length),a.empty)console.log("Aucun stock existant trouv"),n({stockJour:null});else{const c=a.docs[0].data();console.log("Donnes stock brutes:",c);const d={...c,date:c.date.toDate(),createdAt:c.createdAt.toDate(),updatedAt:c.updatedAt.toDate()};n({stockJour:d}),console.log("Stock boutique charg:",d)}n({isLoading:!1})}catch(r){throw n({isLoading:!1}),console.error("Erreur lors du chargement du stock:",r),r}},creerStockDepuisProduction:async(t,r=!1)=>{n({isLoading:!0});try{const i=t.toISOString().split("T")[0];console.log("Recherche programme pour date:",i);const a=new Date(i+"T00:00:00.000Z"),c=new Date(i+"T23:59:59.999Z");console.log("Plage de recherche:",a,"",c);const d=Pa(Hn(bt,"productionPrograms"),tr("date",">=",a),tr("date","<=",c)),h=await ha(d);if(console.log("Programmes trouvs:",h.docs.length),h.empty){console.log("Aucun programme de production trouv pour cette date");const C=Pa(Hn(bt,"productionPrograms")),I=await ha(C);console.log("Total programmes en base:",I.docs.length),I.docs.forEach(R=>{const U=R.data();console.log("Programme trouv:",R.id,U.date)}),n({isLoading:!1,stockJour:null});return}const f=h.docs[0].data(),p=f.quantitesBoutique||[];if(console.log("Programme trouv:",f),console.log("Quantits boutique:",p),p.length===0){console.log("Aucune quantit boutique dfinie dans le programme"),n({isLoading:!1,stockJour:null});return}const x=await ha(Hn(bt,"produits")),N=new Map;x.docs.forEach(C=>{const I=C.data();N.set(C.id,I)}),console.log("Produits chargs:",Array.from(N.keys()));const b=p.map(C=>{console.log("Traitement quantit:",C);const I=N.get(C.produitId);return console.log("Produit trouv:",I),{produitId:C.produitId,stockDebut:C.quantite,produit:I||{nom:"Produit inconnu"}}}).filter(C=>C.stockDebut>0);if(console.log("Stock produits final:",b),b.length===0){console.log("Aucun produit avec quantit > 0 pour la boutique"),n({isLoading:!1,stockJour:null});return}const{stockJour:E}=e();if(r||!E){const C={id:`stock_${t.getTime()}`,date:t,produits:b,createdAt:new Date,updatedAt:new Date};if(E&&r){console.log("Suppression de l'ancien stock pour mise  jour");const I=Pa(Hn(bt,"shopStock"),tr("date",">=",a),tr("date","<=",c)),R=await ha(I);for(const U of R.docs)await c0(U.ref)}await $S(Hn(bt,"shopStock"),{...C,date:t,createdAt:new Date,updatedAt:new Date}),n({stockJour:C,isLoading:!1}),console.log("Stock boutique cr/mis  jour depuis les quantits dfinies:",C)}else n({isLoading:!1}),console.log("Stock existant conserv")}catch(i){n({isLoading:!1,stockJour:null}),console.error("Erreur lors de la cration du stock depuis production:",i)}},mettreAJourStockBoutique:async t=>{await e().creerStockDepuisProduction(t,!0)},commencerEquipeMatin:(t,r)=>{const{stockJour:i}=e();if(!i)return;const a={id:`equipe_matin_${r.getTime()}`,date:r,periode:"matin",vendeuse:t,produits:i.produits.map(c=>({produitId:c.produitId,stockDebut:c.stockDebut,vendu:0,reste:c.stockDebut,produit:c.produit})),statut:"en_cours",createdAt:new Date,updatedAt:new Date};n({equipeMatin:a})},commencerEquipeSoir:(t,r)=>{const{equipeMatin:i}=e();if(!i)return;const a={id:`equipe_soir_${r.getTime()}`,date:r,periode:"soir",vendeuse:t,produits:i.produits.map(c=>({produitId:c.produitId,stockDebut:c.reste,vendu:0,reste:c.reste,produit:c.produit})),statut:"en_cours",createdAt:new Date,updatedAt:new Date};n({equipeSoir:a})},saisirVenteMatin:(t,r)=>{n(i=>i.equipeMatin?{equipeMatin:{...i.equipeMatin,produits:i.equipeMatin.produits.map(a=>a.produitId===t?{...a,vendu:r,reste:a.stockDebut-r}:a),updatedAt:new Date}}:i),Yd&&clearTimeout(Yd),Yd=setTimeout(async()=>{try{console.log(" Sauvegarde automatique quipe matin..."),await e().sauvegarderEquipe("matin")}catch(i){console.error(" Erreur sauvegarde automatique matin:",i)}},2e3)},saisirVenteSoir:(t,r)=>{n(i=>i.equipeSoir?{equipeSoir:{...i.equipeSoir,produits:i.equipeSoir.produits.map(a=>a.produitId===t?{...a,vendu:r,reste:a.stockDebut-r}:a),updatedAt:new Date}}:i),Yd&&clearTimeout(Yd),Yd=setTimeout(async()=>{try{console.log(" Sauvegarde automatique quipe soir..."),await e().sauvegarderEquipe("soir")}catch(i){console.error(" Erreur sauvegarde automatique soir:",i)}},2e3)},terminerEquipeMatin:()=>{n(t=>({equipeMatin:t.equipeMatin?{...t.equipeMatin,statut:"termine",updatedAt:new Date}:null}))},terminerEquipeSoir:()=>{n(t=>({equipeSoir:t.equipeSoir?{...t.equipeSoir,statut:"termine",updatedAt:new Date}:null})),e().calculerVentesBoutique()},calculerVentesBoutique:()=>{const{stockJour:t,equipeMatin:r,equipeSoir:i}=e();if(!t||!r||!i)return;const a={id:`ventes_${t.date.getTime()}`,date:t.date,produits:t.produits.map(c=>{const d=r.produits.find(b=>b.produitId===c.produitId),h=i.produits.find(b=>b.produitId===c.produitId),f=d?.vendu||0,p=d?.reste||0,x=h?.vendu||0,N=h?.reste||0;return{produitId:c.produitId,produit:c.produit,stockDebut:c.stockDebut,venduMatin:f,resteMidi:p,venduSoir:x,invenduBoutique:N,venduTotal:f+x}}),createdAt:new Date,updatedAt:new Date};n({ventesJour:a})},calculerResteMidi:t=>{const{equipeMatin:r}=e();if(!r)return 0;const i=r.produits.find(a=>a.produitId===t);return i?i.stockDebut-i.vendu:0},calculerInvenduBoutique:t=>{const{equipeSoir:r}=e();if(!r)return 0;const i=r.produits.find(a=>a.produitId===t);return i?i.reste:0},sauvegarderEquipe:async t=>{const{equipeMatin:r,equipeSoir:i}=e(),a=t==="matin"?r:i;if(a){n({isLoading:!0});try{console.log(` Dbut sauvegarde quipe ${t}:`,a);const d=`${a.date.toISOString().split("T")[0]}_${t}`,h={...a,date:a.date,createdAt:a.createdAt,updatedAt:new Date};console.log(` Sauvegarde vers document ID: ${d}`);const f=Tn(bt,"shopShifts",d);await fa(f,h,{merge:!0}),console.log(` quipe ${t} sauvegarde avec succs - ID: ${d}`),n({isLoading:!1})}catch(c){throw n({isLoading:!1}),console.error(` Erreur lors de la sauvegarde de l'quipe ${t}:`,c),c}}},sauvegarderVentes:async()=>{const{ventesJour:t}=e();if(t){n({isLoading:!0});try{console.log(" Dbut sauvegarde ventes boutique:",t);const i=`ventes_${t.date.toISOString().split("T")[0]}`,a={...t,date:t.date,createdAt:t.createdAt,updatedAt:new Date};console.log(` Sauvegarde ventes vers document ID: ${i}`);const c=Tn(bt,"shopSales",i);await fa(c,a,{merge:!0}),console.log(` Ventes boutique sauvegardes avec succs - ID: ${i}`),n({isLoading:!1})}catch(r){throw n({isLoading:!1}),console.error(" Erreur lors de la sauvegarde des ventes:",r),r}}},chargerEquipe:async(t,r)=>{try{const i=t.toISOString().split("T")[0],a=`${i}_${r}`;console.log(` Chargement quipe ${r} pour ${i}...`);const c=Tn(bt,"shopShifts",a),d=await ac(c);if(d.exists()){const h=d.data(),f={...h,date:h.date.toDate(),createdAt:h.createdAt.toDate(),updatedAt:h.updatedAt.toDate()};n(r==="matin"?{equipeMatin:f}:{equipeSoir:f}),console.log(` quipe ${r} charge depuis Firebase`)}else console.log(` Aucune quipe ${r} trouve pour cette date`),n(r==="matin"?{equipeMatin:null}:{equipeSoir:null})}catch(i){console.error(` Erreur lors du chargement de l'quipe ${r}:`,i)}},chargerVentes:async t=>{try{const r=t.toISOString().split("T")[0],i=`ventes_${r}`;console.log(` Chargement ventes pour ${r}...`);const a=Tn(bt,"shopSales",i),c=await ac(a);if(c.exists()){const d=c.data(),h={...d,date:d.date.toDate(),createdAt:d.createdAt.toDate(),updatedAt:d.updatedAt.toDate()};n({ventesJour:h}),console.log(" Ventes charges depuis Firebase")}else console.log(" Aucunes ventes trouves pour cette date"),n({ventesJour:null})}catch(r){console.error(" Erreur lors du chargement des ventes:",r)}},setLoading:t=>{n({isLoading:t})}})),yu=yc((n,e)=>({produits:[],produitEnEdition:null,isLoadingProduits:!1,clients:[],clientEnEdition:null,isLoadingClients:!1,chargerProduits:async()=>{n({isLoadingProduits:!0});try{const t=await On.getAll("produits");n({produits:t,isLoadingProduits:!1})}catch(t){throw console.error("Erreur lors du chargement des produits:",t),n({isLoadingProduits:!1}),t}},ajouterProduit:async t=>{n({isLoadingProduits:!0});try{const r=new Date,i={...t,createdAt:r,updatedAt:r},c={id:(await On.create("produits",i)).id,...i};n(d=>({produits:[...d.produits,c],isLoadingProduits:!1}))}catch(r){throw console.error("Erreur lors de l'ajout du produit:",r),n({isLoadingProduits:!1}),r}},modifierProduit:async(t,r)=>{n({isLoadingProduits:!0});try{const i={...r,updatedAt:new Date};await On.update("produits",t,i),n(a=>({produits:a.produits.map(c=>c.id===t?{...c,...i}:c),isLoadingProduits:!1,produitEnEdition:null}))}catch(i){throw console.error("Erreur lors de la modification du produit:",i),n({isLoadingProduits:!1}),i}},supprimerProduit:async t=>{n({isLoadingProduits:!0});try{await On.delete("produits",t),n(r=>({produits:r.produits.filter(i=>i.id!==t),isLoadingProduits:!1}))}catch(r){throw console.error("Erreur lors de la suppression du produit:",r),n({isLoadingProduits:!1}),r}},setProduitEnEdition:t=>{n({produitEnEdition:t})},chargerClients:async()=>{n({isLoadingClients:!0});try{const t=await On.getAll("clients");n({clients:t,isLoadingClients:!1})}catch(t){throw console.error("Erreur lors du chargement des clients:",t),n({isLoadingClients:!1}),t}},ajouterClient:async t=>{n({isLoadingClients:!0});try{const r=new Date,i={...t,createdAt:r,updatedAt:r},c={id:(await On.create("clients",i)).id,...i};n(d=>({clients:[...d.clients,c],isLoadingClients:!1}))}catch(r){throw console.error("Erreur lors de l'ajout du client:",r),n({isLoadingClients:!1}),r}},modifierClient:async(t,r)=>{n({isLoadingClients:!0});try{const i={...r,updatedAt:new Date};await On.update("clients",t,i),n(a=>({clients:a.clients.map(c=>c.id===t?{...c,...i}:c),isLoadingClients:!1,clientEnEdition:null}))}catch(i){throw console.error("Erreur lors de la modification du client:",i),n({isLoadingClients:!1}),i}},supprimerClient:async t=>{n({isLoadingClients:!0});try{await On.delete("clients",t),n(r=>({clients:r.clients.filter(i=>i.id!==t),isLoadingClients:!1}))}catch(r){throw console.error("Erreur lors de la suppression du client:",r),n({isLoadingClients:!1}),r}},setClientEnEdition:t=>{n({clientEnEdition:t})},getProduitById:t=>{const{produits:r}=e();return r.find(i=>i.id===t)},getClientById:t=>{const{clients:r}=e();return r.find(i=>i.id===t)},getProduitsActifs:()=>{const{produits:t}=e();return t.filter(r=>r.active)},getClientsActifs:()=>{const{clients:t}=e();return t.filter(r=>r.active)},initialiserProduitsParDefaut:async()=>{console.log(" Initialisation automatique dsactive - charger manuellement les produits"),await e().chargerProduits()},initialiserClientsParDefaut:async()=>{console.log(" Initialisation automatique dsactive - charger manuellement les clients"),await e().chargerClients()}})),rM=yc((n,e)=>({rapportJour:null,historiqueRapports:[],indicateurs:null,isLoading:!1,genererRapportJour:async t=>{n({isLoading:!0});try{console.log(" Gnration rapport pour:",t.toISOString().split("T")[0]);const r=wl.getState(),i=Cg.getState(),a=nm.getState(),c=yu.getState();console.log(" Chargement des donnes depuis les stores...");try{console.log(" Test direct Firebase...");const z=Pa(Hn(bt,"productionPrograms"),tr("date",">=",new Date(t.toISOString().split("T")[0]+"T00:00:00.000Z")),tr("date","<=",new Date(t.toISOString().split("T")[0]+"T23:59:59.999Z"))),ue=await ha(z);console.log(" Documents trouvs dans productionPrograms:",ue.docs.length),ue.docs.forEach((ie,V)=>{console.log(` Document ${V+1}:`,ie.id,ie.data())})}catch(z){console.error(" Erreur test Firebase:",z)}console.log(" Chargement programme production..."),console.log(" Date recherche:",t,t.toISOString().split("T")[0]),await r.chargerProgramme(t),console.log(" Programme production charg");const d=wl.getState().programmeActuel;console.log(" Programme aprs chargement:",d),console.log(" Chargement ventes boutique..."),await i.chargerVentes(t),console.log(" Ventes boutique charges"),console.log(" Chargement retours clients..."),await a.chargerInvendusDuJour(t),console.log(" Retours clients chargs"),console.log(" Chargement donnes de rfrence..."),c.produits.length===0&&await c.chargerProduits(),console.log(" Donnes de rfrence charges");const h=wl.getState(),f=Cg.getState(),p=nm.getState(),x=yu.getState(),N=h.programmeActuel,b=f.ventesJour,E=p.invendusClients,C=N?.commandesClients||h.commandesClients,I=x.produits;if(console.log(" Debug - Donnes rcupres:",{programme:N,ventesJour:b,invendusClients:E,commandesClients:C,produits:I,productionState:h}),N&&console.log(" Structure dtaille du programme:",{"programme.id":N.id,"programme.date":N.date,"programme keys":Object.keys(N),"programme complet":JSON.stringify(N,null,2)}),!N||!N.totauxParProduit||N.totauxParProduit.length===0){console.warn(" Aucun programme de production trouv pour cette date. Gnration d'un rapport vide...");const z={id:`rapport_${t.getTime()}`,date:t,produits:[],totaux:{quantitePrevue:0,quantiteProduite:0,quantiteVendueTotal:0,invendusTotal:0,tauxVenteGlobal:0,pertesTotales:0},statut:"genere",createdAt:new Date,updatedAt:new Date};n({rapportJour:z,isLoading:!1}),console.log(" Rapport vide gnr:",z);try{const ie=`rapport_${t.toISOString().split("T")[0]}`,V=Tn(bt,"dailyReports",ie);await fa(V,z,{merge:!0}),console.log(" Rapport vide sauvegard en Firebase")}catch(ue){console.error(" Erreur lors de la sauvegarde du rapport vide:",ue)}return}console.log(" Donnes charges:",{programme:!!N,"programme.totauxParProduit":N?.totauxParProduit,ventesJour:!!b,invendusClients:E.length,commandesClients:C.length,"commandesClients dtail":C});const R=N.totauxParProduit.map(z=>{const ue=I.find(X=>X.id===z.produitId),ie=z.totalGlobal,V=z.totalBoutique||0,D=C.flatMap(X=>X.produits).filter(X=>X.produitId===z.produitId).reduce((X,q)=>{const J=Object.values(q.repartitionCars||{}).reduce((re,fe)=>re+(Number(fe)||0),0);return X+J},0),k=b?.produits.find(X=>X.produitId===z.produitId),G=k?.venduTotal||0,S=k?.invenduBoutique||0,L=E.flatMap(X=>X.produits).filter(X=>X.produitId===z.produitId).reduce((X,q)=>X+q.invendus,0),F=D-L,se=D+V,ye=F+G,Q=L+S,ce=(X,q)=>q>0?Math.round(X/q*1e4)/100:0,me=ce(F,D),Se=ce(G,V),Fe=ce(ye,se);return{produitId:z.produitId,produit:ue,quantitePrevue:ie,quantiteProduite:se,quantiteVendueClients:F,quantiteVendueBoutique:G,quantiteVendueTotal:ye,invendusClients:L,invendusBoutique:S,invendusTotal:Q,tauxVenteClients:me,tauxVenteBoutique:Se,tauxVenteGlobal:Fe,ecartPrevuProduit:se-ie,ecartProduitVendu:se-ye}}),U=R.reduce((z,ue)=>({quantitePrevue:z.quantitePrevue+ue.quantitePrevue,quantiteProduite:z.quantiteProduite+ue.quantiteProduite,quantiteVendueTotal:z.quantiteVendueTotal+ue.quantiteVendueTotal,invendusTotal:z.invendusTotal+ue.invendusTotal,tauxVenteGlobal:0,pertesTotales:z.pertesTotales+ue.invendusTotal}),{quantitePrevue:0,quantiteProduite:0,quantiteVendueTotal:0,invendusTotal:0,tauxVenteGlobal:0,pertesTotales:0});U.tauxVenteGlobal=U.quantiteProduite>0?Math.round(U.quantiteVendueTotal/U.quantiteProduite*1e4)/100:0;const $={id:`rapport_${t.getTime()}`,date:t,produits:R,totaux:U,statut:"genere",createdAt:new Date,updatedAt:new Date};n({rapportJour:$,isLoading:!1}),e().calculerIndicateursPerformance(t),console.log(" Rapport gnr avec succs:",$),console.log(" Sauvegarde automatique du rapport en Firebase...");try{const ue=`rapport_${t.toISOString().split("T")[0]}`,ie=Tn(bt,"dailyReports",ue);await fa(ie,$,{merge:!0}),console.log(" Rapport sauvegard automatiquement en Firebase")}catch(z){console.error(" Erreur lors de la sauvegarde automatique:",z)}}catch(r){throw n({isLoading:!1}),console.error(" Erreur lors de la gnration du rapport:",r),r}},chargerRapport:async t=>{n({isLoading:!0});try{const r=t.toISOString().split("T")[0];console.log(` Chargement rapport pour ${r}...`);const i=`rapport_${r}`,a=Tn(bt,"dailyReports",i),c=await ac(a);if(c.exists()){const d=c.data(),h={...d,date:d.date.toDate(),createdAt:d.createdAt.toDate(),updatedAt:d.updatedAt.toDate()};n({rapportJour:h}),console.log(" Rapport charg depuis Firebase"),e().calculerIndicateursPerformance(t)}else console.log(" Aucun rapport trouv pour cette date"),n({rapportJour:null,indicateurs:null});n({isLoading:!1})}catch(r){n({isLoading:!1}),console.error(" Erreur lors du chargement du rapport:",r)}},validerRapport:async()=>{const{rapportJour:t}=e();if(t)try{const r={...t,statut:"valide",updatedAt:new Date},a=`rapport_${r.date.toISOString().split("T")[0]}`;console.log(` Sauvegarde du rapport valid vers document ID: ${a}`);const c=Tn(bt,"dailyReports",a);await fa(c,r,{merge:!0}),n({rapportJour:r}),console.log(" Rapport valid et sauvegard avec succs")}catch(r){throw console.error(" Erreur lors de la validation du rapport:",r),r}},chargerHistorique:async(t,r)=>{n({isLoading:!0});try{console.log(` Chargement de l'historique du ${t.toISOString().split("T")[0]} au ${r.toISOString().split("T")[0]}`);const i=Pa(Hn(bt,"dailyReports"),tr("date",">=",t),tr("date","<=",r)),a=await ha(i);if(a.empty)console.log(" Aucun rapport trouv pour cette priode"),n({historiqueRapports:[],isLoading:!1});else{const c=a.docs.map(d=>{const h=d.data();return{...h,date:h.date.toDate(),createdAt:h.createdAt.toDate(),updatedAt:h.updatedAt.toDate()}});c.sort((d,h)=>h.date.getTime()-d.date.getTime()),n({historiqueRapports:c,isLoading:!1}),console.log(` ${c.length} rapport(s) charg(s) depuis Firebase`)}}catch(i){throw n({isLoading:!1}),console.error(" Erreur lors du chargement de l'historique:",i),i}},calculerIndicateursPerformance:t=>{const{rapportJour:r}=e();if(!r)return;const i=r.produits.reduce((d,h)=>({vendu:d.vendu+h.quantiteVendueClients,invendus:d.invendus+h.invendusClients}),{vendu:0,invendus:0}),a=r.produits.reduce((d,h)=>({vendu:d.vendu+h.quantiteVendueBoutique,invendus:d.invendus+h.invendusBoutique}),{vendu:0,invendus:0}),c={date:t,tauxVenteClients:e().calculerTauxVente(i.vendu,i.vendu+i.invendus),tauxVenteBoutique:e().calculerTauxVente(a.vendu,a.vendu+a.invendus),tauxVenteGlobal:r.totaux.tauxVenteGlobal,pertesClients:i.invendus,pertesBoutique:a.invendus,pertesTotales:r.totaux.pertesTotales};n({indicateurs:c})},calculerTauxVente:(t,r)=>r===0?0:Math.round(t/r*100*100)/100,calculerEcart:(t,r)=>t-r,setLoading:t=>{n({isLoading:t})}})),rm=yc((n,e)=>({factures:[],factureActive:null,parametres:null,isLoading:!1,genererFacturesDepuisLivraisons:async(t,r,i)=>{n({isLoading:!0});try{const{parametres:a}=e();if(!a)throw new Error("Paramtres de facturation non configurs");if(!r||r.length===0){n({isLoading:!1});return}const c=[],{factures:d}=e(),h=t.toISOString().split("T")[0],f=d.filter(x=>x.dateLivraison.toISOString().split("T")[0]===h);if(f.length>0){for(const x of f)e().verifierRetoursCompletes(x.clientId,t,i)&&x.statut==="en_attente_retours"&&(await Xc(Tn(bt,"factures",x.id),{statut:"validee",retoursCompletes:!0,validatedAt:new Date,updatedAt:new Date}),n(b=>({factures:b.factures.map(E=>E.id===x.id?{...E,statut:"validee",retoursCompletes:!0,validatedAt:new Date,updatedAt:new Date}:E)})));n({isLoading:!1});return}const p=new Map;r.forEach(x=>{const N=x.clientId;p.has(N)||p.set(N,[]),p.get(N).push(x)});for(const[x,N]of p){let b=N[0]?.client;if(!b)try{const R=await ac(Tn(bt,"clients",x));R.exists()&&(b={id:R.id,...R.data()})}catch(R){console.warn(" Impossible de rcuprer les infos client:",R)}const E=i.find(R=>R.clientId===x),C=e().verifierRetoursCompletes(x,t,i),I=[];for(const R of N)for(const U of R.produits){if(!U.produit&&U.produitId)try{const z=await ac(Tn(bt,"produits",U.produitId));z.exists()?U.produit={id:z.id,...z.data(),createdAt:z.data().createdAt?.toDate(),updatedAt:z.data().updatedAt?.toDate()}:console.warn(` Produit ${U.produitId} non trouv dans Firebase`)}catch(z){console.error(` Erreur rcupration produit ${U.produitId}:`,z)}const $=Object.values(U.repartitionCars||{}).reduce((z,ue)=>z+(Number(ue)||0),0);if($>0){const z=E?.produits.find(k=>k.produitId===U.produitId),ue=z?.invendus||0,ie=$-ue;console.log(` Calcul facture pour ${U.produit?.nom||U.produitId}:`,{clientId:x,clientNom:b?.nom,produitId:U.produitId,quantiteLivree:$,quantiteRetournee:ue,quantiteFacturee:ie,retoursClientTrouve:!!E,produitRetourTrouve:!!z,produitsRetours:E?.produits.map(k=>({id:k.produitId,invendus:k.invendus}))});const V=b?.typeClient==="client"||R.client?.typeClient==="client"?U.produit?.prixClient||U.produit?.prixUnitaire||0:U.produit?.prixBoutique||U.produit?.prixUnitaire||0,D=ie*V;I.push({produitId:U.produitId,produit:U.produit,quantiteLivree:$,quantiteRetournee:ue,quantiteFacturee:ie,prixUnitaire:V,montantLigne:D})}}if(I.length>0){const R=e().calculerTotauxFacture(I,a.tauxTVADefaut),U={id:`facture_${x}_${Date.now()}`,numeroFacture:e().genererNumeroFacture(t),clientId:x,client:b,dateLivraison:t,dateFacture:new Date,lignes:I,...R,tauxTVA:a.tauxTVADefaut,statut:C?"validee":"en_attente_retours",retoursCompletes:C,conditionsPaiement:b?.conditionsPaiement||a.conditionsPaiementDefaut,createdAt:new Date,updatedAt:new Date};c.push(U);const $=U.lignes.map(ie=>{const V={produitId:ie.produitId,quantiteLivree:ie.quantiteLivree,quantiteRetournee:ie.quantiteRetournee,quantiteFacturee:ie.quantiteFacturee,prixUnitaire:ie.prixUnitaire,montantLigne:ie.montantLigne};return ie.produit&&(V.produit={id:ie.produit.id,nom:ie.produit.nom,description:ie.produit.description||"",unite:ie.produit.unite,prixClient:ie.produit.prixClient||0,prixBoutique:ie.produit.prixBoutique||0,prixUnitaire:ie.produit.prixUnitaire||0,active:ie.produit.active!==!1}),V}),z={id:U.id,numeroFacture:U.numeroFacture,clientId:U.clientId,dateLivraison:U.dateLivraison,dateFacture:U.dateFacture,lignes:$,totalHT:U.totalHT,tauxTVA:U.tauxTVA,montantTVA:U.montantTVA,totalTTC:U.totalTTC,statut:U.statut,retoursCompletes:U.retoursCompletes,conditionsPaiement:U.conditionsPaiement,createdAt:U.createdAt,updatedAt:U.updatedAt};if(U.client){const ie={id:U.client.id,nom:U.client.nom,adresse:U.client.adresse||"",telephone:U.client.telephone||"",email:U.client.email||"",typeClient:U.client.typeClient,active:U.client.active};z.client=ie}const ue=Tn(bt,"factures",U.id);await fa(ue,z,{merge:!0})}}n(x=>({factures:[...x.factures,...c],isLoading:!1}))}catch(a){throw n({isLoading:!1}),console.error(" Erreur lors de la gnration des factures:",a),a}},chargerFactures:async(t,r)=>{n({isLoading:!0});try{let i=Hn(bt,"factures");t&&r?i=Pa(Hn(bt,"factures"),tr("dateLivraison",">=",t),tr("dateLivraison","<=",r),Eg("dateFacture","desc")):i=Pa(Hn(bt,"factures"),Eg("dateFacture","desc"));const a=await ha(i);if(a.empty)n({factures:[]});else{const c=a.docs.map(d=>{const h=d.data();return{...h,dateLivraison:h.dateLivraison.toDate(),dateFacture:h.dateFacture.toDate(),createdAt:h.createdAt.toDate(),updatedAt:h.updatedAt.toDate(),validatedAt:h.validatedAt?h.validatedAt.toDate():void 0,paidAt:h.paidAt?h.paidAt.toDate():void 0}});n({factures:c})}n({isLoading:!1})}catch(i){throw n({isLoading:!1}),console.error(" Erreur lors du chargement des factures:",i),i}},chargerFacture:async t=>{n({isLoading:!0});try{const r=Tn(bt,"factures",t),i=await ac(r);if(i.exists()){const a=i.data(),c={...a,dateLivraison:a.dateLivraison.toDate(),dateFacture:a.dateFacture.toDate(),createdAt:a.createdAt.toDate(),updatedAt:a.updatedAt.toDate(),validatedAt:a.validatedAt?a.validatedAt.toDate():void 0,paidAt:a.paidAt?a.paidAt.toDate():void 0};n({factureActive:c})}else throw new Error("Facture non trouve");n({isLoading:!1})}catch(r){throw n({isLoading:!1}),console.error(" Erreur lors du chargement de la facture:",r),r}},validerFacture:async t=>{try{const r=Tn(bt,"factures",t),i={statut:"validee",validatedAt:new Date,updatedAt:new Date};await Xc(r,i),n(a=>({factures:a.factures.map(c=>c.id===t?{...c,...i}:c),factureActive:a.factureActive?.id===t?{...a.factureActive,...i}:a.factureActive}))}catch(r){throw console.error(" Erreur lors de la validation:",r),r}},envoyerFacture:async t=>{try{const r={statut:"envoyee",updatedAt:new Date};await Xc(Tn(bt,"factures",t),r),n(i=>({factures:i.factures.map(a=>a.id===t?{...a,...r}:a),factureActive:i.factureActive?.id===t?{...i.factureActive,...r}:i.factureActive}))}catch(r){throw console.error(" Erreur lors de l'envoi:",r),r}},marquerPayee:async(t,r=new Date)=>{try{const i={statut:"payee",paidAt:r,updatedAt:new Date};await Xc(Tn(bt,"factures",t),i),n(a=>({factures:a.factures.map(c=>c.id===t?{...c,...i}:c),factureActive:a.factureActive?.id===t?{...a.factureActive,...i}:a.factureActive}))}catch(i){throw console.error(" Erreur lors du marquage du paiement:",i),i}},annulerFacture:async(t,r)=>{try{const i={statut:"annulee",notes:r||"Facture annule",updatedAt:new Date};await Xc(Tn(bt,"factures",t),i),n(a=>({factures:a.factures.map(c=>c.id===t?{...c,...i}:c)}))}catch(i){throw console.error(" Erreur lors de l'annulation:",i),i}},supprimerFacture:async t=>{try{await c0(Tn(bt,"factures",t)),n(r=>({factures:r.factures.filter(i=>i.id!==t),factureActive:r.factureActive?.id===t?null:r.factureActive}))}catch(r){throw console.error(" Erreur lors de la suppression:",r),r}},chargerParametres:async()=>{try{const t=Tn(bt,"parametres","facturation"),r=await ac(t);if(r.exists()){const i=r.data();i.tauxTVADefaut===18&&(i.tauxTVADefaut=0,await fa(t,i)),n({parametres:i})}else{const i={id:"facturation",tauxTVADefaut:0,conditionsPaiementDefaut:"Payable  30 jours",mentionsLegales:"Boulangerie Chez MINA - Dakar, Sngal - RC: XXXXX - NINEA: XXXXX",numeroFactureProchain:1,prefixeFacture:"FACT"};await fa(t,i),n({parametres:i})}}catch(t){throw console.error(" Erreur lors du chargement des paramtres:",t),t}},sauvegarderParametres:async t=>{try{const{parametres:r}=e();if(!r)return;const i={...r,...t},a=Tn(bt,"parametres","facturation");await fa(a,i,{merge:!0}),n({parametres:i})}catch(r){throw console.error(" Erreur lors de la sauvegarde des paramtres:",r),r}},calculerTotauxFacture:(t,r)=>{const i=t.reduce((d,h)=>d+h.montantLigne,0),a=Math.round(i*(r/100)*100)/100,c=Math.round((i+a)*100)/100;return{totalHT:Math.round(i*100)/100,montantTVA:a,totalTTC:c}},genererNumeroFacture:t=>{const{parametres:r}=e();if(!r)return"FACT-001";const i=t.getFullYear(),a=(t.getMonth()+1).toString().padStart(2,"0"),c=t.getDate().toString().padStart(2,"0"),d=r.numeroFactureProchain.toString().padStart(3,"0");return`${r.prefixeFacture}-${i}${a}${c}-${d}`},verifierRetoursCompletes:(t,r,i)=>i.some(a=>a.clientId===t&&a.dateLivraison.toDateString()===r.toDateString()&&a.retoursCompletes===!0),setLoading:t=>{n({isLoading:t})},setFactureActive:t=>{n({factureActive:t})},actualiserStatutsFactures:async()=>{try{const{factures:t}=e(),r=t.filter(i=>i.statut==="en_attente_retours");if(r.length===0)return;for(const i of r){const a=new Date(i.dateLivraison);a.setHours(0,0,0,0);const c=new Date(i.dateLivraison);c.setHours(23,59,59,999),(await ha(Pa(Hn(bt,"clientReturns"),tr("clientId","==",i.clientId),tr("dateLivraison",">=",a),tr("dateLivraison","<=",c)))).docs.map(p=>({id:p.id,...p.data(),dateLivraison:p.data().dateLivraison.toDate(),createdAt:p.data().createdAt.toDate(),updatedAt:p.data().updatedAt.toDate()})).some(p=>p.retoursCompletes===!0)&&(await Xc(Tn(bt,"factures",i.id),{statut:"validee",retoursCompletes:!0,validatedAt:new Date,updatedAt:new Date}),n(p=>({factures:p.factures.map(x=>x.id===i.id?{...x,statut:"validee",retoursCompletes:!0,validatedAt:new Date,updatedAt:new Date}:x)})))}}catch(t){console.error(" Erreur lors de l'actualisation des statuts:",t)}},modifierTauxTVA:async(t,r)=>{try{const i=e().factures.find(d=>d.id===t);if(!i)throw new Error("Facture non trouve");const a=e().calculerTotauxFacture(i.lignes,r),c={tauxTVA:r,montantTVA:a.montantTVA,totalTTC:a.totalTTC,updatedAt:new Date};await Xc(Tn(bt,"factures",t),c),n(d=>({factures:d.factures.map(h=>h.id===t?{...h,...c}:h),factureActive:d.factureActive?.id===t?{...d.factureActive,...c}:d.factureActive}))}catch(i){throw console.error(" Erreur lors de la modification du taux TVA:",i),i}}})),iM=()=>{const{user:n,logout:e}=Am();return l.jsx("header",{className:"bg-white border-b border-gray-200",children:l.jsx("div",{className:"px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Dashboard"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grez votre boulangerie efficacement"})]}),l.jsx("div",{className:"flex items-center space-x-4",children:n&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center border border-orange-200",children:l.jsxs("span",{className:"text-sm font-bold text-orange-700",children:[(n.nom||n.email||"U").charAt(0).toUpperCase(),(n.prenom||"").charAt(0).toUpperCase()]})}),l.jsxs("div",{className:"text-sm hidden md:block",children:[l.jsx("div",{className:"font-medium text-gray-900",children:n.nom?`${n.nom} ${n.prenom}`:n.email}),l.jsx("div",{className:"text-gray-500 text-xs capitalize bg-gray-100 px-2 py-0.5 rounded-full inline-block mt-0.5",children:n.role})]})]}),l.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Dconnexion",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})})]})})})};function sM(n,e){const t=n.icons,r=n.aliases||Object.create(null),i=Object.create(null);function a(c){if(t[c])return i[c]=[];if(!(c in i)){i[c]=null;const d=r[c]&&r[c].parent,h=d&&a(d);h&&(i[c]=[d].concat(h))}return i[c]}return Object.keys(t).concat(Object.keys(r)).forEach(a),i}const f3=Object.freeze({left:0,top:0,width:16,height:16}),Ig=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),kx=Object.freeze({...f3,...Ig}),sy=Object.freeze({...kx,body:"",hidden:!1});function aM(n,e){const t={};!n.hFlip!=!e.hFlip&&(t.hFlip=!0),!n.vFlip!=!e.vFlip&&(t.vFlip=!0);const r=((n.rotate||0)+(e.rotate||0))%4;return r&&(t.rotate=r),t}function l_(n,e){const t=aM(n,e);for(const r in sy)r in Ig?r in n&&!(r in t)&&(t[r]=Ig[r]):r in e?t[r]=e[r]:r in n&&(t[r]=n[r]);return t}function oM(n,e,t){const r=n.icons,i=n.aliases||Object.create(null);let a={};function c(d){a=l_(r[d]||i[d],a)}return c(e),t.forEach(c),l_(n,a)}function m3(n,e){const t=[];if(typeof n!="object"||typeof n.icons!="object")return t;n.not_found instanceof Array&&n.not_found.forEach(i=>{e(i,null),t.push(i)});const r=sM(n);for(const i in r){const a=r[i];a&&(e(i,oM(n,i,a)),t.push(i))}return t}const lM={provider:"",aliases:{},not_found:{},...f3};function Z1(n,e){for(const t in e)if(t in n&&typeof n[t]!=typeof e[t])return!1;return!0}function p3(n){if(typeof n!="object"||n===null)return null;const e=n;if(typeof e.prefix!="string"||!n.icons||typeof n.icons!="object"||!Z1(n,lM))return null;const t=e.icons;for(const i in t){const a=t[i];if(!i||typeof a.body!="string"||!Z1(a,sy))return null}const r=e.aliases||Object.create(null);for(const i in r){const a=r[i],c=a.parent;if(!i||typeof c!="string"||!t[c]&&!r[c]||!Z1(a,sy))return null}return e}const c_=Object.create(null);function cM(n,e){return{provider:n,prefix:e,icons:Object.create(null),missing:new Set}}function Sh(n,e){const t=c_[n]||(c_[n]=Object.create(null));return t[e]||(t[e]=cM(n,e))}function g3(n,e){return p3(e)?m3(e,(t,r)=>{r?n.icons[t]=r:n.missing.add(t)}):[]}function uM(n,e,t){try{if(typeof t.body=="string")return n.icons[e]={...t},!0}catch{}return!1}const v3=/^[a-z0-9]+(-[a-z0-9]+)*$/,f0=(n,e,t,r="")=>{const i=n.split(":");if(n.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const d=i.pop(),h=i.pop(),f={provider:i.length>0?i[0]:r,prefix:h,name:d};return e&&!Yp(f)?null:f}const a=i[0],c=a.split("-");if(c.length>1){const d={provider:r,prefix:c.shift(),name:c.join("-")};return e&&!Yp(d)?null:d}if(t&&r===""){const d={provider:r,prefix:"",name:a};return e&&!Yp(d,t)?null:d}return null},Yp=(n,e)=>n?!!((e&&n.prefix===""||n.prefix)&&n.name):!1;let im=!1;function y3(n){return typeof n=="boolean"&&(im=n),im}function u_(n){const e=typeof n=="string"?f0(n,!0,im):n;if(e){const t=Sh(e.provider,e.prefix),r=e.name;return t.icons[r]||(t.missing.has(r)?null:void 0)}}function dM(n,e){const t=f0(n,!0,im);if(!t)return!1;const r=Sh(t.provider,t.prefix);return e?uM(r,t.name,e):(r.missing.add(t.name),!0)}function hM(n,e){if(typeof n!="object")return!1;if(typeof e!="string"&&(e=n.provider||""),im&&!e&&!n.prefix){let i=!1;return p3(n)&&(n.prefix="",m3(n,(a,c)=>{dM(a,c)&&(i=!0)})),i}const t=n.prefix;if(!Yp({prefix:t,name:"a"}))return!1;const r=Sh(e,t);return!!g3(r,n)}const x3=Object.freeze({width:null,height:null}),b3=Object.freeze({...x3,...Ig}),fM=/(-?[0-9.]*[0-9]+[0-9.]*)/g,mM=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function d_(n,e,t){if(e===1)return n;if(t=t||100,typeof n=="number")return Math.ceil(n*e*t)/t;if(typeof n!="string")return n;const r=n.split(fM);if(r===null||!r.length)return n;const i=[];let a=r.shift(),c=mM.test(a);for(;;){if(c){const d=parseFloat(a);isNaN(d)?i.push(a):i.push(Math.ceil(d*e*t)/t)}else i.push(a);if(a=r.shift(),a===void 0)return i.join("");c=!c}}function pM(n,e="defs"){let t="";const r=n.indexOf("<"+e);for(;r>=0;){const i=n.indexOf(">",r),a=n.indexOf("</"+e);if(i===-1||a===-1)break;const c=n.indexOf(">",a);if(c===-1)break;t+=n.slice(i+1,a).trim(),n=n.slice(0,r).trim()+n.slice(c+1)}return{defs:t,content:n}}function gM(n,e){return n?"<defs>"+n+"</defs>"+e:e}function vM(n,e,t){const r=pM(n);return gM(r.defs,e+r.content+t)}const yM=n=>n==="unset"||n==="undefined"||n==="none";function xM(n,e){const t={...kx,...n},r={...b3,...e},i={left:t.left,top:t.top,width:t.width,height:t.height};let a=t.body;[t,r].forEach(C=>{const I=[],R=C.hFlip,U=C.vFlip;let $=C.rotate;R?U?$+=2:(I.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),I.push("scale(-1 1)"),i.top=i.left=0):U&&(I.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),I.push("scale(1 -1)"),i.top=i.left=0);let z;switch($<0&&($-=Math.floor($/4)*4),$=$%4,$){case 1:z=i.height/2+i.top,I.unshift("rotate(90 "+z.toString()+" "+z.toString()+")");break;case 2:I.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:z=i.width/2+i.left,I.unshift("rotate(-90 "+z.toString()+" "+z.toString()+")");break}$%2===1&&(i.left!==i.top&&(z=i.left,i.left=i.top,i.top=z),i.width!==i.height&&(z=i.width,i.width=i.height,i.height=z)),I.length&&(a=vM(a,'<g transform="'+I.join(" ")+'">',"</g>"))});const c=r.width,d=r.height,h=i.width,f=i.height;let p,x;c===null?(x=d===null?"1em":d==="auto"?f:d,p=d_(x,h/f)):(p=c==="auto"?h:c,x=d===null?d_(p,f/h):d==="auto"?f:d);const N={},b=(C,I)=>{yM(I)||(N[C]=I.toString())};b("width",p),b("height",x);const E=[i.left,i.top,h,f];return N.viewBox=E.join(" "),{attributes:N,viewBox:E,body:a}}const bM=/\sid="(\S+)"/g,wM="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let _M=0;function NM(n,e=wM){const t=[];let r;for(;r=bM.exec(n);)t.push(r[1]);if(!t.length)return n;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(a=>{const c=typeof e=="function"?e(a):e+(_M++).toString(),d=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n=n.replace(new RegExp('([#;"])('+d+')([")]|\\.[a-z])',"g"),"$1"+c+i+"$3")}),n=n.replace(new RegExp(i,"g"),""),n}const ay=Object.create(null);function AM(n,e){ay[n]=e}function oy(n){return ay[n]||ay[""]}function Px(n){let e;if(typeof n.resources=="string")e=[n.resources];else if(e=n.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:n.path||"/",maxURL:n.maxURL||500,rotate:n.rotate||750,timeout:n.timeout||5e3,random:n.random===!0,index:n.index||0,dataAfterTimeout:n.dataAfterTimeout!==!1}}const Dx=Object.create(null),Af=["https://api.simplesvg.com","https://api.unisvg.com"],Kp=[];for(;Af.length>0;)Af.length===1||Math.random()>.5?Kp.push(Af.shift()):Kp.push(Af.pop());Dx[""]=Px({resources:["https://api.iconify.design"].concat(Kp)});function SM(n,e){const t=Px(e);return t===null?!1:(Dx[n]=t,!0)}function Mx(n){return Dx[n]}const EM=()=>{let n;try{if(n=fetch,typeof n=="function")return n}catch{}};let h_=EM();function jM(n,e){const t=Mx(n);if(!t)return 0;let r;if(!t.maxURL)r=0;else{let i=0;t.resources.forEach(c=>{i=Math.max(i,c.length)});const a=e+".json?icons=";r=t.maxURL-i-t.path.length-a.length}return r}function TM(n){return n===404}const CM=(n,e,t)=>{const r=[],i=jM(n,e),a="icons";let c={type:a,provider:n,prefix:e,icons:[]},d=0;return t.forEach((h,f)=>{d+=h.length+1,d>=i&&f>0&&(r.push(c),c={type:a,provider:n,prefix:e,icons:[]},d=h.length),c.icons.push(h)}),r.push(c),r};function IM(n){if(typeof n=="string"){const e=Mx(n);if(e)return e.path}return"/"}const RM=(n,e,t)=>{if(!h_){t("abort",424);return}let r=IM(e.provider);switch(e.type){case"icons":{const a=e.prefix,d=e.icons.join(","),h=new URLSearchParams({icons:d});r+=a+".json?"+h.toString();break}case"custom":{const a=e.uri;r+=a.slice(0,1)==="/"?a.slice(1):a;break}default:t("abort",400);return}let i=503;h_(n+r).then(a=>{const c=a.status;if(c!==200){setTimeout(()=>{t(TM(c)?"abort":"next",c)});return}return i=501,a.json()}).then(a=>{if(typeof a!="object"||a===null){setTimeout(()=>{a===404?t("abort",a):t("next",i)});return}setTimeout(()=>{t("success",a)})}).catch(()=>{t("next",i)})},LM={prepare:CM,send:RM};function w3(n,e){n.forEach(t=>{const r=t.loaderCallbacks;r&&(t.loaderCallbacks=r.filter(i=>i.id!==e))})}function kM(n){n.pendingCallbacksFlag||(n.pendingCallbacksFlag=!0,setTimeout(()=>{n.pendingCallbacksFlag=!1;const e=n.loaderCallbacks?n.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const r=n.provider,i=n.prefix;e.forEach(a=>{const c=a.icons,d=c.pending.length;c.pending=c.pending.filter(h=>{if(h.prefix!==i)return!0;const f=h.name;if(n.icons[f])c.loaded.push({provider:r,prefix:i,name:f});else if(n.missing.has(f))c.missing.push({provider:r,prefix:i,name:f});else return t=!0,!0;return!1}),c.pending.length!==d&&(t||w3([n],a.id),a.callback(c.loaded.slice(0),c.missing.slice(0),c.pending.slice(0),a.abort))})}))}let PM=0;function DM(n,e,t){const r=PM++,i=w3.bind(null,t,r);if(!e.pending.length)return i;const a={id:r,icons:e,callback:n,abort:i};return t.forEach(c=>{(c.loaderCallbacks||(c.loaderCallbacks=[])).push(a)}),i}function MM(n){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);n.sort((i,a)=>i.provider!==a.provider?i.provider.localeCompare(a.provider):i.prefix!==a.prefix?i.prefix.localeCompare(a.prefix):i.name.localeCompare(a.name));let r={provider:"",prefix:"",name:""};return n.forEach(i=>{if(r.name===i.name&&r.prefix===i.prefix&&r.provider===i.provider)return;r=i;const a=i.provider,c=i.prefix,d=i.name,h=t[a]||(t[a]=Object.create(null)),f=h[c]||(h[c]=Sh(a,c));let p;d in f.icons?p=e.loaded:c===""||f.missing.has(d)?p=e.missing:p=e.pending;const x={provider:a,prefix:c,name:d};p.push(x)}),e}function OM(n,e=!0,t=!1){const r=[];return n.forEach(i=>{const a=typeof i=="string"?f0(i,e,t):i;a&&r.push(a)}),r}const FM={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function qM(n,e,t,r){const i=n.resources.length,a=n.random?Math.floor(Math.random()*i):n.index;let c;if(n.random){let ie=n.resources.slice(0);for(c=[];ie.length>1;){const V=Math.floor(Math.random()*ie.length);c.push(ie[V]),ie=ie.slice(0,V).concat(ie.slice(V+1))}c=c.concat(ie)}else c=n.resources.slice(a).concat(n.resources.slice(0,a));const d=Date.now();let h="pending",f=0,p,x=null,N=[],b=[];typeof r=="function"&&b.push(r);function E(){x&&(clearTimeout(x),x=null)}function C(){h==="pending"&&(h="aborted"),E(),N.forEach(ie=>{ie.status==="pending"&&(ie.status="aborted")}),N=[]}function I(ie,V){V&&(b=[]),typeof ie=="function"&&b.push(ie)}function R(){return{startTime:d,payload:e,status:h,queriesSent:f,queriesPending:N.length,subscribe:I,abort:C}}function U(){h="failed",b.forEach(ie=>{ie(void 0,p)})}function $(){N.forEach(ie=>{ie.status==="pending"&&(ie.status="aborted")}),N=[]}function z(ie,V,D){const k=V!=="success";switch(N=N.filter(G=>G!==ie),h){case"pending":break;case"failed":if(k||!n.dataAfterTimeout)return;break;default:return}if(V==="abort"){p=D,U();return}if(k){p=D,N.length||(c.length?ue():U());return}if(E(),$(),!n.random){const G=n.resources.indexOf(ie.resource);G!==-1&&G!==n.index&&(n.index=G)}h="completed",b.forEach(G=>{G(D)})}function ue(){if(h!=="pending")return;E();const ie=c.shift();if(ie===void 0){if(N.length){x=setTimeout(()=>{E(),h==="pending"&&($(),U())},n.timeout);return}U();return}const V={status:"pending",resource:ie,callback:(D,k)=>{z(V,D,k)}};N.push(V),f++,x=setTimeout(ue,n.rotate),t(ie,e,V.callback)}return setTimeout(ue),R}function _3(n){const e={...FM,...n};let t=[];function r(){t=t.filter(d=>d().status==="pending")}function i(d,h,f){const p=qM(e,d,h,(x,N)=>{r(),f&&f(x,N)});return t.push(p),p}function a(d){return t.find(h=>d(h))||null}return{query:i,find:a,setIndex:d=>{e.index=d},getIndex:()=>e.index,cleanup:r}}function f_(){}const ev=Object.create(null);function VM(n){if(!ev[n]){const e=Mx(n);if(!e)return;const t=_3(e),r={config:e,redundancy:t};ev[n]=r}return ev[n]}function UM(n,e,t){let r,i;if(typeof n=="string"){const a=oy(n);if(!a)return t(void 0,424),f_;i=a.send;const c=VM(n);c&&(r=c.redundancy)}else{const a=Px(n);if(a){r=_3(a);const c=n.resources?n.resources[0]:"",d=oy(c);d&&(i=d.send)}}return!r||!i?(t(void 0,424),f_):r.query(e,i,t)().abort}function m_(){}function BM(n){n.iconsLoaderFlag||(n.iconsLoaderFlag=!0,setTimeout(()=>{n.iconsLoaderFlag=!1,kM(n)}))}function zM(n){const e=[],t=[];return n.forEach(r=>{(r.match(v3)?e:t).push(r)}),{valid:e,invalid:t}}function Sf(n,e,t){function r(){const i=n.pendingIcons;e.forEach(a=>{i&&i.delete(a),n.icons[a]||n.missing.add(a)})}if(t&&typeof t=="object")try{if(!g3(n,t).length){r();return}}catch(i){console.error(i)}r(),BM(n)}function p_(n,e){n instanceof Promise?n.then(t=>{e(t)}).catch(()=>{e(null)}):e(n)}function HM(n,e){n.iconsToLoad?n.iconsToLoad=n.iconsToLoad.concat(e).sort():n.iconsToLoad=e,n.iconsQueueFlag||(n.iconsQueueFlag=!0,setTimeout(()=>{n.iconsQueueFlag=!1;const{provider:t,prefix:r}=n,i=n.iconsToLoad;if(delete n.iconsToLoad,!i||!i.length)return;const a=n.loadIcon;if(n.loadIcons&&(i.length>1||!a)){p_(n.loadIcons(i,r,t),p=>{Sf(n,i,p)});return}if(a){i.forEach(p=>{const x=a(p,r,t);p_(x,N=>{const b=N?{prefix:r,icons:{[p]:N}}:null;Sf(n,[p],b)})});return}const{valid:c,invalid:d}=zM(i);if(d.length&&Sf(n,d,null),!c.length)return;const h=r.match(v3)?oy(t):null;if(!h){Sf(n,c,null);return}h.prepare(t,r,c).forEach(p=>{UM(t,p,x=>{Sf(n,p.icons,x)})})}))}const $M=(n,e)=>{const t=OM(n,!0,y3()),r=MM(t);if(!r.pending.length){let h=!0;return e&&setTimeout(()=>{h&&e(r.loaded,r.missing,r.pending,m_)}),()=>{h=!1}}const i=Object.create(null),a=[];let c,d;return r.pending.forEach(h=>{const{provider:f,prefix:p}=h;if(p===d&&f===c)return;c=f,d=p,a.push(Sh(f,p));const x=i[f]||(i[f]=Object.create(null));x[p]||(x[p]=[])}),r.pending.forEach(h=>{const{provider:f,prefix:p,name:x}=h,N=Sh(f,p),b=N.pendingIcons||(N.pendingIcons=new Set);b.has(x)||(b.add(x),i[f][p].push(x))}),a.forEach(h=>{const f=i[h.provider][h.prefix];f.length&&HM(h,f)}),e?DM(e,r,a):m_};function GM(n,e){const t={...n};for(const r in e){const i=e[r],a=typeof i;r in x3?(i===null||i&&(a==="string"||a==="number"))&&(t[r]=i):a===typeof t[r]&&(t[r]=r==="rotate"?i%4:i)}return t}const WM=/[\s,]+/;function YM(n,e){e.split(WM).forEach(t=>{switch(t.trim()){case"horizontal":n.hFlip=!0;break;case"vertical":n.vFlip=!0;break}})}function KM(n,e=0){const t=n.replace(/^-?[0-9.]*/,"");function r(i){for(;i<0;)i+=4;return i%4}if(t===""){const i=parseInt(n);return isNaN(i)?0:r(i)}else if(t!==n){let i=0;switch(t){case"%":i=25;break;case"deg":i=90}if(i){let a=parseFloat(n.slice(0,n.length-t.length));return isNaN(a)?0:(a=a/i,a%1===0?r(a):0)}}return e}function QM(n,e){let t=n.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)t+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+n+"</svg>"}function XM(n){return n.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function JM(n){return"data:image/svg+xml,"+XM(n)}function ZM(n){return'url("'+JM(n)+'")'}let Bf;function e9(){try{Bf=window.trustedTypes.createPolicy("iconify",{createHTML:n=>n})}catch{Bf=null}}function t9(n){return Bf===void 0&&e9(),Bf?Bf.createHTML(n):n}const N3={...b3,inline:!1},n9={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},r9={display:"inline-block"},ly={backgroundColor:"currentColor"},A3={backgroundColor:"transparent"},g_={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},v_={WebkitMask:ly,mask:ly,background:A3};for(const n in v_){const e=v_[n];for(const t in g_)e[n+t]=g_[t]}const i9={...N3,inline:!0};function y_(n){return n+(n.match(/^[-0-9.]+$/)?"px":"")}const s9=(n,e,t)=>{const r=e.inline?i9:N3,i=GM(r,e),a=e.mode||"svg",c={},d=e.style||{},h={...a==="svg"?n9:{}};if(t){const I=f0(t,!1,!0);if(I){const R=["iconify"],U=["provider","prefix"];for(const $ of U)I[$]&&R.push("iconify--"+I[$]);h.className=R.join(" ")}}for(let I in e){const R=e[I];if(R!==void 0)switch(I){case"icon":case"style":case"children":case"onLoad":case"mode":case"ssr":case"fallback":break;case"_ref":h.ref=R;break;case"className":h[I]=(h[I]?h[I]+" ":"")+R;break;case"inline":case"hFlip":case"vFlip":i[I]=R===!0||R==="true"||R===1;break;case"flip":typeof R=="string"&&YM(i,R);break;case"color":c.color=R;break;case"rotate":typeof R=="string"?i[I]=KM(R):typeof R=="number"&&(i[I]=R);break;case"ariaHidden":case"aria-hidden":R!==!0&&R!=="true"&&delete h["aria-hidden"];break;default:r[I]===void 0&&(h[I]=R)}}const f=xM(n,i),p=f.attributes;if(i.inline&&(c.verticalAlign="-0.125em"),a==="svg"){h.style={...c,...d},Object.assign(h,p);let I=0,R=e.id;return typeof R=="string"&&(R=R.replace(/-/g,"_")),h.dangerouslySetInnerHTML={__html:t9(NM(f.body,R?()=>R+"ID"+I++:"iconifyReact"))},he.createElement("svg",h)}const{body:x,width:N,height:b}=n,E=a==="mask"||(a==="bg"?!1:x.indexOf("currentColor")!==-1),C=QM(x,{...p,width:N+"",height:b+""});return h.style={...c,"--svg":ZM(C),width:y_(p.width),height:y_(p.height),...r9,...E?ly:A3,...d},he.createElement("span",h)};y3(!0);AM("",LM);if(typeof document<"u"&&typeof window<"u"){const n=window;if(n.IconifyPreload!==void 0){const e=n.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!hM(r))&&console.error(t)}catch{console.error(t)}})}if(n.IconifyProviders!==void 0){const e=n.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const r="IconifyProviders["+t+"] is invalid.";try{const i=e[t];if(typeof i!="object"||!i||i.resources===void 0)continue;SM(t,i)||console.error(r)}catch{console.error(r)}}}}function S3(n){const[e,t]=he.useState(!!n.ssr),[r,i]=he.useState({});function a(b){if(b){const E=n.icon;if(typeof E=="object")return{name:"",data:E};const C=u_(E);if(C)return{name:E,data:C}}return{name:""}}const[c,d]=he.useState(a(!!n.ssr));function h(){const b=r.callback;b&&(b(),i({}))}function f(b){if(JSON.stringify(c)!==JSON.stringify(b))return h(),d(b),!0}function p(){var b;const E=n.icon;if(typeof E=="object"){f({name:"",data:E});return}const C=u_(E);if(f({name:E,data:C}))if(C===void 0){const I=$M([E],p);i({callback:I})}else C&&((b=n.onLoad)===null||b===void 0||b.call(n,E))}he.useEffect(()=>(t(!0),h),[]),he.useEffect(()=>{e&&p()},[n.icon,e]);const{name:x,data:N}=c;return N?s9({...kx,...N},n,x):n.children?n.children:n.fallback?n.fallback:he.createElement("span",{})}const de=he.forwardRef((n,e)=>S3({...n,_ref:e}));he.forwardRef((n,e)=>S3({inline:!0,...n,_ref:e}));const m0="/assets/logo-DFYokJ1h.png",a9=[{name:"Programme Production",href:"/production",roles:["admin","gestionnaire"]},{name:"Vue Boulanger",href:"/boulanger",roles:["admin","boulanger"]},{name:"Livraisons",href:"/livraison",roles:["admin","livreur"]},{name:"Retours Clients",href:"/retours",roles:["admin","livreur"]},{name:"Boutique",href:"/boutique",roles:["admin","vendeuse"]},{name:"Facturation",href:"/facturation",roles:["admin","gestionnaire"]},{name:"Stocks",href:"/stocks",roles:["admin","gestionnaire"]},{name:"Rapport Journalier",href:"/rapport",roles:["admin","gestionnaire"]},{name:"Gestion Produits",href:"/admin/produits",roles:["admin"]},{name:"Gestion Clients",href:"/admin/clients",roles:["admin"]},{name:"Gestion Livreurs",href:"/admin/livreurs",roles:["admin"]},{name:"Gestion Utilisateurs",href:"/admin/users",roles:["admin"]}],o9={"Programme Production":"mdi:clipboard-text","Vue Boulanger":"ph:chef-hat-bold",Livraisons:"lucide:truck","Retours Clients":"mdi:keyboard-return",Boutique:"mdi:store",Facturation:"mdi:file-document",Stocks:"mdi:warehouse","Rapport Journalier":"mdi:chart-bar","Gestion Produits":"mdi:bread-slice","Gestion Clients":"mdi:account-group","Gestion Livreurs":"mdi:motorbike","Gestion Utilisateurs":"mdi:account-key"},l9=()=>{const{user:n}=Am(),e=a9.filter(t=>!n||t.roles.includes(n.role));return l.jsxs("div",{className:"fixed inset-y-0 left-0 w-64 bg-white border-r border-gray-200 z-30",children:[l.jsx("div",{className:"flex justify-center h-28 px-6 border-b border-gray-100 py-4",children:l.jsx("div",{className:"w-40 h-24  rounded-lg flex items-center justify-center text-white text-lg font-bold overflow-hidden",children:l.jsx("img",{src:m0,alt:"Logo Boulangerie",className:"w-full h-full object-contain"})})}),l.jsx("nav",{className:"mt-6 px-3",children:l.jsx("div",{className:"space-y-1",children:e.map(t=>l.jsxs(h4,{to:t.href,className:({isActive:r})=>`group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-150 ${r?"bg-orange-50 text-orange-700 border-l-4 border-orange-500":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[l.jsx(de,{icon:o9[t.name],className:"mr-3 text-lg"}),t.name]},t.name))})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-100",children:l.jsx("div",{className:"text-xs text-gray-500 text-center",children:l.jsx("p",{children:"Version 1.0.0"})})})]})},c9=({children:n})=>l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(l9,{}),l.jsxs("div",{className:"ml-64",children:[l.jsx(iM,{}),l.jsx("main",{className:"p-6",children:l.jsx("div",{className:"max-w-7xl mx-auto",children:n})})]})]}),E3=()=>{const[n,e]=he.useState(""),[t,r]=he.useState(""),[i,a]=he.useState(!1),{login:c,isLoading:d}=Am(),h=async f=>{f.preventDefault();try{await c(n,t)}catch(p){console.error("Erreur de connexion:",p)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-md w-full space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto w-50 h-50 flex items-center justify-center transform hover:scale-105 transition-transform -mb-8",children:l.jsx("img",{src:m0,alt:"Logo Boulangerie",className:"w-full h-full object-contain"})}),l.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-amber-600 to-orange-600 mx-auto rounded-full"})]}),l.jsxs("div",{className:"bg-white shadow-2xl rounded-3xl p-8 border border-gray-100 backdrop-blur-sm",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center gap-3 justify-center mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-amber-600 to-orange-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-circle",className:"text-white text-lg"})}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Connexion"})]}),l.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Accdez  votre espace de gestion"})]}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse email"}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(de,{icon:"mdi:email",className:"h-5 w-5 text-gray-400"})}),l.jsx("input",{type:"email",value:n,onChange:f=>e(f.target.value),required:!0,autoComplete:"email",placeholder:"votre@email.com",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all bg-gray-50 focus:bg-white"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(de,{icon:"mdi:lock",className:"h-5 w-5 text-gray-400"})}),l.jsx("input",{type:i?"text":"password",value:t,onChange:f=>r(f.target.value),required:!0,autoComplete:"current-password",placeholder:"",className:"w-full pl-10 pr-10 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all bg-gray-50 focus:bg-white"}),l.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer text-gray-400 hover:text-gray-600",children:l.jsx(de,{icon:i?"mdi:eye-off":"mdi:eye",className:"h-5 w-5"})})]})]}),l.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg transform transition-all hover:scale-105 focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:l.jsx("div",{className:"flex items-center justify-center gap-2",children:d?l.jsxs(l.Fragment,{children:[l.jsx(de,{icon:"mdi:loading",className:"text-lg animate-spin"}),l.jsx("span",{children:"Connexion..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(de,{icon:"mdi:login",className:"text-lg"}),l.jsx("span",{children:"Se connecter"})]})})})]})]})]})})},Yu=({isOpen:n,onClose:e,title:t,children:r,size:i="md",inline:a=!1,position:c="center"})=>{if(he.useEffect(()=>{const h=f=>{f.key==="Escape"&&e()};return n&&document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h),document.body.style.overflow="unset"}},[n,e]),!n)return null;const d={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return c==="relative"?l.jsxs("div",{className:"absolute top-full right-0 mt-3 w-96 bg-gradient-to-br from-white to-gray-50 rounded-xl border border-gray-200 shadow-xl hover:shadow-2xl transition-all duration-300 z-50 animate-in slide-in-from-top-2 fade-in",children:[l.jsx("div",{className:"absolute -top-2 right-6 w-4 h-4 bg-white border-l border-t border-gray-200 transform rotate-45"}),l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white rounded-t-xl",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full"}),t]}),l.jsx("button",{onClick:e,className:"rounded-lg p-2 hover:bg-gray-100 hover:scale-105 transition-all duration-200 group",title:"Fermer",children:l.jsx(de,{icon:"mdi:close",className:"text-gray-500 group-hover:text-gray-700 text-xl transition-colors"})})]}),l.jsx("div",{className:"px-6 py-5",children:r})]}):a?l.jsxs("div",{className:"w-full bg-white rounded-xl border border-gray-200 shadow-lg mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),l.jsx("button",{onClick:e,className:"rounded-md p-1 hover:bg-gray-100 transition-colors",children:l.jsx(de,{icon:"mdi:close",className:"text-gray-500 text-xl"})})]}),l.jsx("div",{className:"px-6 py-4",children:r})]}):l.jsxs("div",{className:"fixed inset-0 z-40 flex items-center justify-center",children:[l.jsx("div",{className:"fixed inset-0 bg-transparent"}),l.jsxs("div",{className:`relative w-full ${d[i]} mx-4 bg-gray-100 rounded-xl shadow-2xl max-h-[80vh] overflow-y-auto border border-gray-200 animate-in zoom-in-95 fade-in duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white rounded-t-xl",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full"}),t]}),l.jsx("button",{onClick:e,className:"rounded-lg p-2 hover:bg-gray-100 hover:scale-105 transition-all duration-200 group",children:l.jsx(de,{icon:"mdi:close",className:"text-gray-500 group-hover:text-gray-700 text-xl transition-colors"})})]}),l.jsx("div",{className:"px-6 py-5",children:r})]})]})},p0=({isOpen:n,onClose:e,onConfirm:t,title:r,message:i,confirmText:a="Confirmer",cancelText:c="Annuler",type:d="info",inline:h=!1,position:f="center"})=>{const p=()=>{t(),e()},N=(()=>{switch(d){case"warning":return{icon:"mdi:alert-circle",iconColor:"text-amber-600",confirmBg:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700"};case"danger":return{icon:"mdi:alert-circle",iconColor:"text-red-600",confirmBg:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700"};case"success":return{icon:"mdi:check-circle",iconColor:"text-green-600",confirmBg:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"};default:return{icon:"mdi:help-circle",iconColor:"text-purple-600",confirmBg:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700"}}})();return l.jsx(Yu,{isOpen:n,onClose:e,title:r,size:"sm",inline:h,position:f,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(de,{icon:N.icon,className:`text-3xl ${N.iconColor}`})}),l.jsx("div",{className:"flex-1",children:l.jsx("div",{className:"text-gray-700 whitespace-pre-line",children:i})})]}),l.jsxs("div",{className:"flex gap-3 pt-6",children:[l.jsx("button",{onClick:e,className:"flex-1 px-5 py-3 text-sm font-semibold text-gray-700 bg-white hover:bg-gray-50 border border-gray-300 rounded-lg hover:shadow-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:c}),l.jsx("button",{onClick:p,className:`flex-1 px-5 py-3 text-sm font-bold text-white ${N.confirmBg} border border-transparent rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2`,children:a})]})]})})},Qp=({children:n,onConfirm:e,title:t,message:r,confirmText:i="Confirmer",cancelText:a="Annuler",type:c="info",className:d="",disabled:h=!1,...f})=>{const[p,x]=he.useState(!1),N=()=>{x(!0)},b=async()=>{await e(),x(!1)},E=()=>{x(!1)};return l.jsxs("div",{className:"relative",children:[l.jsx("button",{...f,className:d,onClick:N,disabled:h,children:n}),l.jsx(p0,{isOpen:p,onClose:E,onConfirm:b,title:t,message:r,confirmText:i,cancelText:a,type:c,position:"relative"})]})},u9=({size:n="md",message:e="Chargement...",fullScreen:t=!1,className:r=""})=>{const i={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"},a={sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl"},c=()=>l.jsxs("div",{className:`flex flex-col items-center justify-center gap-3 ${r}`,children:[l.jsx("div",{className:"animate-spin",children:l.jsx(de,{icon:"mdi:loading",className:`${i[n]} text-orange-600`})}),e&&l.jsx("p",{className:`${a[n]} text-gray-600 font-medium`,children:e})]});return t?l.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-80 backdrop-blur-sm z-50 flex items-center justify-center",children:l.jsx("div",{className:"bg-white rounded-lg p-8 shadow-lg border",children:l.jsx(c,{})})}):l.jsx(c,{})},d9=()=>l.jsx(de,{icon:"mdi:loading",className:"animate-spin h-4 w-4"}),Ox=({message:n="Chargement des donnes..."})=>l.jsx("div",{className:"text-center py-12",children:l.jsx(u9,{size:"md",message:n})}),Ur=({children:n,variant:e="primary",size:t="md",isLoading:r=!1,className:i="",disabled:a,...c})=>{const d="inline-flex items-center justify-center font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",h={primary:"bg-orange-500 hover:bg-orange-600 text-white focus:ring-orange-500 shadow-sm",secondary:"bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-500 shadow-sm",danger:"bg-red-500 hover:bg-red-600 text-white focus:ring-red-500 shadow-sm",outline:"border border-gray-300 hover:bg-gray-50 text-gray-700 focus:ring-orange-500"},f={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},p=`${d} ${h[e]} ${f[t]} ${i}`;return l.jsxs("button",{className:p,disabled:a||r,...c,children:[r&&l.jsx("span",{className:"-ml-1 mr-3",children:l.jsx(d9,{})}),n]})},ir=({label:n,error:e,helperText:t,className:r="",id:i,type:a="text",...c})=>{const d=i||`input-${Math.random().toString(36).substr(2,9)}`,[h,f]=he.useState(!1),p=a==="password",x=p?h?"text":"password":a;return l.jsxs("div",{className:"w-full",children:[n&&l.jsx("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{id:d,type:x,className:`
            block w-full rounded-lg border border-gray-300 px-3 py-2
            focus:border-orange-500 focus:ring-orange-500 focus:ring-1 sm:text-sm
            transition-colors
            ${e?"border-red-300 focus:border-red-500 focus:ring-red-500":""}
            ${r}
            ${p?"pr-10":""}
          `,...c}),p&&l.jsx("button",{type:"button",onClick:()=>f(!h),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none",tabIndex:-1,children:l.jsx(de,{icon:h?"mdi:eye-off":"mdi:eye",className:"h-5 w-5"})})]}),e&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:e}),t&&!e&&l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t})]})},Eh=({label:n,error:e,helperText:t,options:r,className:i="",id:a,...c})=>{const d=a||`select-${Math.random().toString(36).substr(2,9)}`;return l.jsxs("div",{className:"w-full",children:[n&&l.jsx("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),l.jsx("select",{id:d,className:`
          block w-full rounded-lg border border-gray-300 px-3 py-2
          focus:border-orange-500 focus:ring-orange-500 focus:ring-1 sm:text-sm
          transition-colors bg-white
          ${e?"border-red-300 focus:border-red-500 focus:ring-red-500":""}
          ${i}
        `,...c,children:r.map(h=>l.jsx("option",{value:h.value,disabled:h.disabled,children:h.label},h.value))}),e&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:e}),t&&!e&&l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t})]})},h9=({produits:n,clients:e,commande:t,mode:r="create",onSave:i,onCancel:a,isLoading:c=!1,formulaireState:d,onUpdateFormulaire:h})=>{const[f,p]=he.useState(d?.selectedClientId||""),[x,N]=he.useState(d?.dateLivraison||new Date().toISOString().split("T")[0]),[b,E]=he.useState(d?.produitsCommandes||[]),[C,I]=he.useState(d?.utiliserPrixClient??!0);he.useEffect(()=>{h&&h({selectedClientId:f,dateLivraison:x,produitsCommandes:b,utiliserPrixClient:C})},[f,x,b,C,h]),he.useEffect(()=>{if(t){p(t.clientId);try{const S=t.dateLivraison instanceof Date?t.dateLivraison:new Date(t.dateLivraison);isNaN(S.getTime())?N(new Date().toISOString().split("T")[0]):N(S.toISOString().split("T")[0])}catch(S){console.error("Erreur de conversion de date:",S),N(new Date().toISOString().split("T")[0])}E(r==="edit"||r==="editSpecific"?t.produits.map(S=>({produitId:S.produitId,quantiteCommandee:S.quantiteCommandee,prixUnitaire:S.prixUnitaire,repartitionCars:S.repartitionCars||{car1_matin:"",car2_matin:"",car_soir:""}})):[])}else p(""),N(new Date().toISOString().split("T")[0]),E([])},[t]);const{sauvegarderCommandeType:R}=wl();he.useEffect(()=>{if(f&&r==="create"&&b.length===0){const S=e.find(L=>L.id===f);S?.commandeType&&S.commandeType.length>0&&(E(S.commandeType.map(L=>{let F=L.prixUnitaire;if(!F){const ye=n.find(Q=>Q.id===L.produitId);F=S.typeClient==="boutique"?ye?.prixBoutique:ye?.prixClient}let se=L.repartitionCars;return!se&&L.quantiteCommandee>0&&(se={car1_matin:L.quantiteCommandee,car2_matin:"",car_soir:""}),{...L,prixUnitaire:F||0,repartitionCars:se||{car1_matin:"",car2_matin:"",car_soir:""}}})),Pt.success(" Commande type charge !"))}},[f]);const U=async()=>{if(!(!f||b.length===0))try{const S=b.map(L=>({produitId:L.produitId,quantiteCommandee:L.quantiteCommandee,repartitionCars:{car1_matin:Number(L.repartitionCars?.car1_matin)||0,car2_matin:Number(L.repartitionCars?.car2_matin)||0,car_soir:Number(L.repartitionCars?.car_soir)||0}}));await R(f,S),Pt.success(" Commande type sauvegarde pour ce client !")}catch{Pt.error("Erreur lors de la sauvegarde de la commande type")}};he.useEffect(()=>{const S=b.map(L=>{const F=n.find(se=>se.id===L.produitId);if(F){const se=C?F.prixClient:F.prixBoutique;return{...L,prixUnitaire:se}}return L});E(S)},[C,n]);const $=[{value:"",label:"Slectionnez un client"},...e.map(S=>({value:S.id,label:S.nom}))],z=[{value:"",label:"Slectionnez un produit"},...n.filter(S=>S.active).map(S=>{const L=C?S.prixClient:S.prixBoutique;return{value:S.id,label:`${S.nom} (${L?.toLocaleString("fr-FR")} FCFA)`}})],ue=()=>{E([...b,{produitId:"",quantiteCommandee:0,repartitionCars:{car1_matin:"",car2_matin:"",car_soir:""}}])},ie=S=>{E(b.filter((L,F)=>F!==S))},V=(S,L,F)=>{const se=[...b];if(se[S]={...se[S],[L]:F},L==="produitId"){const ye=n.find(Q=>Q.id===F);if(ye){const Q=C?ye.prixClient:ye.prixBoutique;se[S].prixUnitaire=Q}}if(L==="repartitionCars"){const ye=F,Q=(Number(ye?.car1_matin)||0)+(Number(ye?.car2_matin)||0)+(Number(ye?.car_soir)||0);se[S].quantiteCommandee=Q}E(se)},D=(S,L,F)=>{const se=[...b],Q={...se[S].repartitionCars||{car1_matin:"",car2_matin:"",car_soir:""},[L]:F},ce=(Number(Q.car1_matin)||0)+(Number(Q.car2_matin)||0)+(Number(Q.car_soir)||0);se[S]={...se[S],repartitionCars:Q,quantiteCommandee:ce},E(se)},k=S=>{if(S.preventDefault(),!f||b.length===0){alert("Veuillez slectionner un client et au moins un produit");return}const L=b.filter(ye=>{const Q=(Number(ye.repartitionCars?.car1_matin)||0)+(Number(ye.repartitionCars?.car2_matin)||0)+(Number(ye.repartitionCars?.car_soir)||0);return ye.produitId&&Q>0});if(L.length===0){alert("Veuillez saisir des quantits valides");return}const F=L.map(ye=>{let Q=ye.prixUnitaire;if(!Q){const ce=n.find(Se=>Se.id===ye.produitId);Q=e.find(Se=>Se.id===f)?.typeClient==="boutique"?ce?.prixBoutique:ce?.prixClient}return{...ye,prixUnitaire:Q||0,repartitionCars:{car1_matin:Number(ye.repartitionCars?.car1_matin)||0,car2_matin:Number(ye.repartitionCars?.car2_matin)||0,car_soir:Number(ye.repartitionCars?.car_soir)||0}}}),se={clientId:f,dateLivraison:new Date(x),dateCommande:new Date,statut:"prevue",produits:F};i(se),p(""),N(new Date().toISOString().split("T")[0]),E([])},G=()=>b.reduce((S,L)=>{const F=L.prixUnitaire||n.find(se=>se.id===L.produitId)?.prixUnitaire||0;return S+F*(L.quantiteCommandee||0)},0);return l.jsxs("div",{children:[l.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:l.jsx("p",{className:"text-gray-700 text-sm",children:r==="addProducts"?"Ajoutez des produits  la commande existante. Les quantits seront fusionnes avec les produits dj commands.":r==="edit"?"Modifiez les dtails de la commande. Cette action remplacera tous les produits actuels.":r==="editSpecific"?"Modifiez les dtails de ce produit spcifique dans la commande.":"Crez une nouvelle commande pour le client slectionn."})}),r==="addProducts"&&t&&l.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[l.jsxs("h4",{className:"text-sm font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:information"}),"Produits actuellement commands"]}),l.jsx("div",{className:"grid gap-2",children:t.produits.map((S,L)=>{const F=n.find(se=>se.id===S.produitId);return l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-blue-700",children:F?.nom||"Produit inconnu"}),l.jsxs("span",{className:"font-medium text-blue-800",children:["x",S.quantiteCommandee]})]},L)})})]}),r==="editSpecific"&&t&&l.jsxs("div",{className:"mb-6 p-4 bg-amber-50 rounded-lg border border-amber-200",children:[l.jsxs("h4",{className:"text-sm font-semibold text-amber-800 mb-2 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:pencil-outline"}),"Mode dition produit spcifique"]}),l.jsx("p",{className:"text-sm text-amber-700",children:"Vous modifiez uniquement le produit slectionn. Les autres produits de la commande ne seront pas affects."})]}),l.jsxs("form",{onSubmit:k,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Eh,{label:"Client *",value:f,onChange:S=>p(S.target.value),options:$,required:!0,disabled:r==="addProducts"||r==="editSpecific"}),l.jsx(ir,{label:"Date de livraison *",type:"date",value:x,onChange:S=>N(S.target.value),required:!0,disabled:r==="addProducts"||r==="editSpecific"})]}),l.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[l.jsxs("label",{className:"flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:C,onChange:S=>I(S.target.checked),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),l.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Utiliser les prix client"})]}),l.jsx("span",{className:"text-sm text-gray-600",children:C?"(Prix rduits pour les clients)":"(Prix boutique standard)"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-medium text-gray-900",children:r==="addProducts"?"Nouveaux produits  ajouter":r==="editSpecific"?"Produit  modifier":"Produits commands"}),r==="edit"&&l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Vous pouvez modifier les quantits ou ajouter de nouveaux produits"}),r==="create"&&l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Une seule commande par client et par date - Les produits ultrieurs s'ajouteront  cette commande"})]}),l.jsx(Ur,{type:"button",variant:"outline",onClick:ue,className:"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-300",children:"+ Ajouter un produit"})]}),b.length===0?l.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-gray-500",children:"Aucun produit ajout"}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Cliquez sur "Ajouter un produit" pour commencer'})]}):l.jsxs("div",{className:"space-y-4",children:[b.map((S,L)=>{const F=n.find(ye=>ye.id===S.produitId),se=(Number(S.repartitionCars?.car1_matin)||0)+(Number(S.repartitionCars?.car2_matin)||0)+(Number(S.repartitionCars?.car_soir)||0);return l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Produit"}),l.jsx(Eh,{options:z,value:S.produitId,onChange:ye=>V(L,"produitId",ye.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantit totale"}),l.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-sm font-bold text-gray-900",children:[se||0," pice(s)"]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Calcul automatiquement"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Prix unitaire"}),l.jsx(ir,{type:"number",step:"1",placeholder:"Prix",value:S.prixUnitaire||F?.prixUnitaire||"",onChange:ye=>V(L,"prixUnitaire",parseFloat(ye.target.value)||0),className:"bg-gray-50"})]})]}),l.jsx("button",{type:"button",onClick:()=>ie(L),className:"ml-3 text-red-500 hover:text-red-700 text-sm",title:"Supprimer ce produit",children:""})]}),l.jsxs("div",{className:"border-t pt-3",children:[l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Rpartition par car de livraison"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Saisissez les quantits pour chaque car"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded p-2",children:[l.jsxs("label",{className:"block text-xs font-medium text-orange-700 mb-1 flex items-center gap-1",children:[l.jsx(de,{icon:"lucide:truck",className:"text-xs"}),"Car 1 - Matin"]}),l.jsx(ir,{type:"number",min:"0",value:S.repartitionCars?.car1_matin||"",onChange:ye=>{D(L,"car1_matin",ye.target.value)},className:"text-center font-bold text-orange-700"})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:[l.jsxs("label",{className:"block text-xs font-medium text-blue-700 mb-1 flex items-center gap-1",children:[l.jsx(de,{icon:"lucide:truck",className:"text-xs"}),"Car 2 - Matin"]}),l.jsx(ir,{type:"number",min:"0",value:S.repartitionCars?.car2_matin||"",onChange:ye=>{D(L,"car2_matin",ye.target.value)},className:"text-center font-bold text-blue-700"})]}),l.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded p-2",children:[l.jsxs("label",{className:"block text-xs font-medium text-indigo-700 mb-1 flex items-center gap-1",children:[l.jsx(de,{icon:"lucide:truck",className:"text-xs"}),"Car 1 - Soir"]}),l.jsx(ir,{type:"number",min:"0",value:S.repartitionCars?.car_soir||"",onChange:ye=>{D(L,"car_soir",ye.target.value)},className:"text-center font-bold text-indigo-700"})]})]})]}),l.jsx("div",{className:"flex justify-end mt-3 pt-2 border-t",children:l.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["Total: ",se&&(S.prixUnitaire||F?.prixUnitaire)?`${(se*(S.prixUnitaire||F?.prixUnitaire||0)).toLocaleString("fr-FR")} FCFA`:"0 FCFA"]})})]},L)}),l.jsx("div",{className:"flex justify-center py-3",children:l.jsxs(Ur,{type:"button",variant:"outline",onClick:ue,className:"bg-green-50 hover:bg-green-100 text-green-700 border-green-300 border-dashed",children:[l.jsx(de,{icon:"mdi:plus",className:"mr-2"}),"Ajouter un autre produit"]})}),l.jsx("div",{className:"pt-4 border-t border-gray-200",children:l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["Total: ",G().toLocaleString("fr-FR")," FCFA"]})})})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[l.jsx(Ur,{type:"button",variant:"outline",onClick:a,children:"Annuler"}),l.jsx(Ur,{type:"submit",isLoading:c,disabled:!f||b.length===0,children:r==="addProducts"?"Ajouter les produits":r==="edit"?"Modifier la commande":r==="editSpecific"?"Modifier le produit":"Crer la commande"})]}),r!=="editSpecific"&&b.length>0&&f&&l.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-blue-900",children:"Commande Type"}),l.jsx("p",{className:"text-xs text-blue-700",children:"Sauvegarder cette configuration pour ce client ?"})]}),l.jsxs("button",{type:"button",onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all shadow-sm hover:shadow-md text-sm font-medium",children:[l.jsx(de,{icon:"mdi:content-save-settings",className:"text-lg"}),"Dfinir comme commande type"]})]})})]})]})},nd=({children:n,className:e="",title:t,subtitle:r})=>l.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow ${e}`,children:[(t||r)&&l.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t&&l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:t}),r&&l.jsx("div",{className:"mt-1 text-sm text-gray-600",children:r})]}),l.jsx("div",{className:"px-6 py-4",children:n})]}),f9=({commande:n,produitIndex:e,onSave:t,onCancel:r,isLoading:i=!1})=>{const a=n.produits[e],[c,d]=he.useState(a.prixUnitaire||0),[h,f]=he.useState({car1_matin:a.repartitionCars?.car1_matin||"",car2_matin:a.repartitionCars?.car2_matin||"",car_soir:a.repartitionCars?.car_soir||""}),p=(Number(h.car1_matin)||0)+(Number(h.car2_matin)||0)+(Number(h.car_soir)||0),x=p>0&&c>=0,N=E=>{if(E.preventDefault(),!x)return;const C={produitId:a.produitId,quantiteCommandee:p,prixUnitaire:c,repartitionCars:{car1_matin:Number(h.car1_matin)||0,car2_matin:Number(h.car2_matin)||0,car_soir:Number(h.car_soir)||0}};t(C)},b=(E,C)=>{f(I=>({...I,[E]:C}))};return l.jsx("div",{className:"space-y-6",children:l.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantit totale (Calcule)"}),l.jsx("div",{className:"px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-500 font-medium select-none",children:p})]}),l.jsx(ir,{label:"Prix unitaire (F CFA) *",type:"number",min:"0",value:c,onChange:E=>d(Number(E.target.value)),required:!0})]}),l.jsxs(nd,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-lg text-gray-600"}),l.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Rpartition par car de livraison"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsx(ir,{label:"Car 1 - Matin",type:"number",min:"0",value:h.car1_matin,onChange:E=>b("car1_matin",E.target.value)}),l.jsx(ir,{label:"Car 2 - Matin",type:"number",min:"0",value:h.car2_matin,onChange:E=>b("car2_matin",E.target.value)}),l.jsx(ir,{label:"Car - Soir",type:"number",min:"0",value:h.car_soir,onChange:E=>b("car_soir",E.target.value)})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total distribu:"}),l.jsx("span",{className:"text-sm font-bold text-green-600",children:p})]}),l.jsx("div",{className:"text-xs text-gray-500",children:"La quantit totale est mise  jour automatiquement."})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["Total: ",(p*c).toLocaleString("fr-FR")," F CFA"]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs(Ur,{type:"button",variant:"outline",onClick:r,disabled:i,children:[l.jsx(de,{icon:"mdi:close",className:"text-lg mr-2"}),"Annuler"]}),l.jsxs(Ur,{type:"submit",disabled:!x||i,isLoading:i,children:[l.jsx(de,{icon:"mdi:content-save",className:"text-lg mr-2"}),"Modifier le produit"]})]})]})]})})},m9=({produits:n,quantitesActuelles:e,onSave:t,onCancel:r})=>{const[i,a]=he.useState(""),[c,d]=he.useState(0),[h,f]=he.useState(0),[p,x]=he.useState(0),[N,b]=he.useState(0),E=n.filter(U=>!e.some($=>$.produitId===U.id)),C=[{value:"",label:"Slectionnez un produit"},...E.map(U=>({value:U.id,label:U.nom}))],I=h+p+N,R=U=>{if(U.preventDefault(),!i||c<=0){alert("Veuillez slectionner un produit et saisir une quantit valide");return}if(I!==c){alert(`La somme de la rpartition (${I}) doit tre gale  la quantit totale (${c})`);return}const $=n.find(z=>z.id===i);$&&(t({produitId:i,produit:$,quantite:c,repartitionCars:{car1_matin:h,car2_matin:p,car_soir:N}}),a(""),d(0),f(0),x(0),b(0))};return E.length===0?l.jsx(nd,{title:"Ajouter quantit boutique",children:l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-gray-500",children:"Tous les produits ont dj t ajouts"}),l.jsx(Ur,{variant:"outline",onClick:r,className:"mt-4",children:"Fermer"})]})}):l.jsx(nd,{title:"Ajouter quantit boutique",subtitle:"Dfinissez les quantits  envoyer en boutique",children:l.jsxs("form",{onSubmit:R,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Eh,{label:"Produit *",value:i,onChange:U=>a(U.target.value),options:C,required:!0}),l.jsx(ir,{label:"Quantit Totale *",type:"number",min:"1",value:c||"",onChange:U=>d(parseInt(U.target.value)||0),placeholder:"Quantit totale pour la boutique",required:!0})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Rpartition par Cars"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Dfinissez comment rpartir les quantits boutique entre les cars de livraison"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(de,{icon:"mdi:truck",className:"text-orange-600"}),l.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Car 1 - Matin"})]}),l.jsx(ir,{type:"number",min:"0",value:h||"",onChange:U=>f(parseInt(U.target.value)||0),placeholder:"Quantit Car 1",className:"text-center"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1 text-center",children:"06:00 - 10:00"})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(de,{icon:"mdi:truck-outline",className:"text-blue-600"}),l.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Car 2 - Matin"})]}),l.jsx(ir,{type:"number",min:"0",value:p||"",onChange:U=>x(parseInt(U.target.value)||0),placeholder:"Quantit Car 2",className:"text-center"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1 text-center",children:"08:00 - 12:00"})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(de,{icon:"mdi:truck-fast",className:"text-purple-600"}),l.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Car - Soir"})]}),l.jsx(ir,{type:"number",min:"0",value:N||"",onChange:U=>b(parseInt(U.target.value)||0),placeholder:"Quantit Car Soir",className:"text-center"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1 text-center",children:"15:00 - 19:00"})]})]}),l.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border border-gray-200",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total rparti:"}),l.jsxs("div",{className:`text-lg font-bold ${I===c?"text-green-600":I>c?"text-red-600":"text-orange-600"}`,children:[I," / ",c]})]}),I!==c&&c>0&&l.jsx("p",{className:`text-xs mt-1 ${I>c?"text-red-600":"text-orange-600"}`,children:I>c?`Excdent de ${I-c} pice(s)`:`Reste ${c-I} pice(s)  rpartir`})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[l.jsx(Ur,{type:"button",variant:"outline",onClick:r,children:"Annuler"}),l.jsx(Ur,{type:"submit",disabled:!i||c<=0||I!==c,children:"Ajouter"})]})]})})},Fx=()=>{const[n,e]=he.useState({isOpen:!1,title:"",message:""}),t=he.useCallback(a=>new Promise(c=>{e({...a,isOpen:!0,resolve:c})}),[]),r=he.useCallback(()=>{n.resolve&&n.resolve(!0),e(a=>({...a,isOpen:!1,resolve:void 0}))},[n.resolve]),i=he.useCallback(()=>{n.resolve&&n.resolve(!1),e(a=>({...a,isOpen:!1,resolve:void 0}))},[n.resolve]);return{isOpen:n.isOpen,title:n.title,message:n.message,confirmText:n.confirmText,cancelText:n.cancelText,type:n.type,confirm:t,handleConfirm:r,handleCancel:i}},p9=()=>{const{programmeActuel:n,commandesClients:e,quantitesBoutique:t,produits:r,clients:i,showCommandeForm:a,showQuantiteBoutiqueForm:c,commandeEnEdition:d,formulaireCommande:h,creerNouveauProgramme:f,chargerProgramme:p,sauvegarderProgramme:x,envoyerAuBoulanger:N,ajouterCommandeClient:b,modifierCommandeClient:E,supprimerCommandeClient:C,annulerCommandeClient:I,supprimerProduitDeCommande:R,ajouterQuantiteBoutique:U,supprimerQuantiteBoutique:$,chargerProduits:z,chargerClients:ue,rafraichirDonnees:ie,setShowCommandeForm:V,setShowQuantiteBoutiqueForm:D,setCommandeEnEdition:k,updateFormulaireCommande:G,resetFormulaireCommande:S,validerProduction:L,isLoading:F}=wl(),se=Fx(),[ye,Q]=he.useState(new Date().toISOString().split("T")[0]),[ce,me]=he.useState("create"),[Se,Fe]=he.useState(null),[X,q]=he.useState(!1);he.useEffect(()=>{(async()=>{try{await z(),await ue();const Be=new Date(ye);await p(Be)}catch(Be){console.error("Erreur lors de l'initialisation:",Be);const te=new Date(ye);f(te)}})()},[ye,z,ue,p,f]),he.useEffect(()=>{const Ne=()=>{document.hidden||ie().catch(console.error)};return document.addEventListener("visibilitychange",Ne),()=>document.removeEventListener("visibilitychange",Ne)},[ie]);const J=async Ne=>{Q(Ne);try{const Be=new Date(Ne);await p(Be)}catch(Be){console.error("Erreur lors du changement de date:",Be)}},re=Ne=>{if(Ne){const Be=e.find(te=>te.clientId===Ne&&new Date(te.dateLivraison).toDateString()===new Date(ye).toDateString());Be?(k(Be),me("addProducts")):(k(null),me("create"),G({selectedClientId:Ne}))}else k(null),me("create");V(!0)},fe=(Ne,Be)=>{const te=e.find(Ze=>Ze.id===Ne);te&&(k(te),Fe(Be),q(!0))},pe=Ne=>{if(d&&Se!==null){const Be=[...d.produits];Be[Se]=Ne,E(d.id,{...d,produits:Be}),q(!1),k(null),Fe(null),Pt.success(" Produit modifi avec succs !")}},we=()=>{q(!1),k(null),Fe(null)},Pe=Ne=>{if(ce==="addProducts"&&d){const Be=[...d.produits];Ne.produits.forEach(te=>{const Ze=Be.findIndex(ct=>ct.produitId===te.produitId);Ze>=0?Be[Ze]=te:Be.push(te)}),E(d.id,{...d,produits:Be})}else if(ce==="edit"&&d)E(d.id,Ne);else{const Be=e.find(te=>te.clientId===Ne.clientId&&new Date(te.dateLivraison).toDateString()===new Date(Ne.dateLivraison).toDateString());if(Be){const te=[...Be.produits];Ne.produits.forEach(Ze=>{const ct=te.findIndex(ot=>ot.produitId===Ze.produitId);ct>=0?te[ct]=Ze:te.push(Ze)}),E(Be.id,{...Be,produits:te})}else b(Ne)}V(!1),k(null),Fe(null),me("create"),S(),ce==="addProducts"?Pt.success(" Produits ajouts  la commande avec succs !"):ce==="edit"?Pt.success(" Commande modifie avec succs !"):Pt.success(" Nouvelle commande cre avec succs !")},Re=()=>{V(!1),k(null),Fe(null),me("create"),S()},Ue=async()=>{try{await x(),Pt.success(" Programme de production sauvegard avec succs")}catch(Ne){console.log(Ne),Pt.error(" Erreur lors de la sauvegarde du programme")}},et=async()=>{if(!n){Pt.error(" Aucun programme  envoyer");return}const Ne=[];e.length===0&&Ne.push(" Aucune commande client dfinie"),n.totauxParProduit.length===0&&Ne.push(" Aucun produit dans le programme");const Be=e.filter(te=>te.statut!=="annulee");Be.length===0&&Ne.push(" Toutes les commandes sont annules");for(const te of n.totauxParProduit)te.totalGlobal<=0&&Ne.push(` Le produit "${te.produit?.nom}" a une quantit totale de 0`);if(Ne.length>0){if(!await se.confirm({title:"Validation du programme",message:` Des problmes ont t dtects :

${Ne.join(`
`)}

Voulez-vous tout de mme envoyer le programme ?`,confirmText:"Envoyer malgr tout",cancelText:"Annuler",type:"warning"}))return}else if(!await se.confirm({title:"Confirmer l'envoi",message:` tes-vous sr de vouloir envoyer ce programme au boulanger ?

 ${Be.length} commande(s) client(s)
 ${n.totauxParProduit.length} produit(s) diffrent(s)
 ${t.length} produit(s) pour la boutique

 Une fois envoy, le programme ne pourra plus tre modifi.`,confirmText:"Envoyer au Boulanger",cancelText:"Annuler",type:"info"}))return;try{await N(),Pt.success(" Programme envoy au boulanger avec succs !")}catch{Pt.error(" Erreur lors de l'envoi du programme")}},it=async()=>{if(await se.confirm({title:"Valider la production",message:` tes-vous sr de vouloir valider la production ?

Cela va :
1. Changer le statut en "Produit"
2.  Dduire AUTOMATIQUEMENT les matires premires du stock selon les recettes.

Assurez-vous que les quantits produites sont correctes.`,confirmText:"Valider et Dduire Stock",cancelText:"Annuler",type:"warning"}))try{await L(),Pt.success(" Production valide et stocks mis  jour !")}catch{Pt.error(" Erreur lors de la validation")}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-linear-to-r from-purple-600 to-blue-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:clipboard-text",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Programme de Production"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Gestion des commandes clients et quantits boutique"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:Ue,disabled:F,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:content-save",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Sauvegarder"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:et,disabled:!n||F,className:`flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md ${n?.statut==="envoye"?"opacity-50":""}`,children:[l.jsx(de,{icon:n?.statut==="envoye"?"mdi:check":"mdi:send",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:n?.statut==="envoye"?"Envoy au boulanger":"Envoyer au Boulanger"})]}),n?.statut==="envoye"&&l.jsxs("button",{onClick:it,disabled:F,className:"ml-2 flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 shadow-md hover:shadow-lg animate-pulse",children:[l.jsx(de,{icon:"mdi:factory",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Valider Production (& Stock)"})]}),l.jsx(p0,{isOpen:se.isOpen,onClose:se.handleCancel,onConfirm:se.handleConfirm,title:se.title,message:se.message,confirmText:se.confirmText,cancelText:se.cancelText,type:se.type,position:"relative"})]})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:calendar",className:"text-lg text-blue-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Date de production"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("input",{type:"date",value:ye,onChange:Ne=>J(Ne.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 font-medium"}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Programme pour ",new Date(ye).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),l.jsx(Yu,{isOpen:a,onClose:Re,title:ce==="addProducts"&&d?`Ajouter des Produits - ${i.find(Ne=>Ne.id===d.clientId)?.nom||"Client"}`:ce==="edit"&&d?`Modifier la Commande - ${i.find(Ne=>Ne.id===d.clientId)?.nom||"Client"}`:"Nouvelle Commande Client",size:"xl",position:"center",children:l.jsx(h9,{produits:r,clients:i,commande:d,mode:ce,onSave:Pe,onCancel:Re,isLoading:F,formulaireState:h,onUpdateFormulaire:G})}),X&&d&&Se!==null&&l.jsx(Yu,{isOpen:X,onClose:we,title:`Modifier le Produit - ${i.find(Ne=>Ne.id===d.clientId)?.nom||"Client"}`,size:"xl",position:"center",children:l.jsx(f9,{produits:r,commande:d,produitIndex:Se,client:i.find(Ne=>Ne.id===d.clientId),onSave:pe,onCancel:we,isLoading:F})}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-group",className:"text-lg text-green-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Commandes Clients"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Ajoutez les commandes des clients pour le jour slectionn"})]})]}),l.jsxs("button",{onClick:()=>re(),disabled:a,className:"flex items-center gap-2 px-4 py-2 bg-linear-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouvelle commande"})]})]})}),l.jsx("div",{className:"p-6",children:e.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:clipboard-outline",className:"text-3xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune commande client"}),l.jsx("p",{className:"text-gray-500 mb-6",children:"Commencez par ajouter une commande client pour ce jour de production"}),l.jsxs("button",{onClick:()=>re(),className:"inline-flex items-center gap-2 px-6 py-3 bg-linear-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter la premire commande"})]})]}):l.jsxs("div",{className:"space-y-4",children:[e.map(Ne=>{const Be=i.find(ct=>ct.id===Ne.clientId),te=Ne.produits.reduce((ct,ot)=>ct+(ot.prixUnitaire||0)*ot.quantiteCommandee,0),Ze=ct=>{const ot=ct?.toLowerCase()||"";return ot.includes("baguette")?"mdi:baguette":ot.includes("pain")?"mdi:bread-slice":ot.includes("croissant")?"mdi:croissant":ot.includes("brioche")?"mdi:muffin":ot.includes("tarte")?"mdi:pie":ot.includes("gateau")||ot.includes("gteau")?"mdi:cake":ot.includes("sandwich")?"mdi:food":ot.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"bg-linear-to-br from-white to-gray-50 border border-gray-200 rounded-xl p-6 hover:border-green-300 hover:shadow-xl transition-all duration-300 group",children:[l.jsxs("div",{className:"flex items-start justify-between mb-6",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-gray-600 to-gray-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx(de,{icon:"mdi:account",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-1",children:Be?.nom||"Client inconnu"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded-lg",children:[l.jsx(de,{icon:"mdi:calendar-clock",className:"text-gray-500"}),l.jsx("span",{children:new Date(Ne.dateLivraison).toLocaleDateString("fr-FR")})]}),Ne.statut==="annulee"&&l.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 text-xs font-semibold rounded-full",children:[l.jsx(de,{icon:"mdi:cancel",className:"text-red-600"}),"ANNULE"]})]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:te.toLocaleString("fr-FR")}),l.jsx("div",{className:"text-xs text-gray-400 font-medium",children:"FCFA"}),l.jsxs("div",{className:"flex items-center justify-end gap-1 text-sm text-gray-500 mt-1",children:[l.jsx(de,{icon:"mdi:package-variant-closed",className:"text-gray-400"}),Ne.produits.length," article",Ne.produits.length>1?"s":""]})]})]}),Ne.statut!=="annulee"&&l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-6",children:[l.jsxs("button",{onClick:()=>re(Ne.clientId),className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:border-gray-400 rounded-lg transition-all shadow-sm hover:shadow-md",title:"Ajouter des produits  cette commande",children:[l.jsx(de,{icon:"mdi:plus-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter des produits"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(Qp,{onConfirm:()=>{I(Ne.id),Pt.success(`Commande de ${Be?.nom||"le client"} annule`)},title:"Annuler la commande",message:`tes-vous sr de vouloir annuler la commande de "${Be?.nom||"Client inconnu"}" ?

Cette action supprimera la commande du programme.`,confirmText:"Annuler la commande",cancelText:"Conserver",type:"warning",className:"flex items-center gap-1.5 px-3 py-2 text-amber-700 bg-amber-50 hover:bg-amber-100 border border-amber-200 hover:border-amber-300 rounded-lg transition-all shadow-sm hover:shadow-md text-sm",children:[l.jsx(de,{icon:"mdi:pause-circle",className:"text-base"}),l.jsx("span",{className:"font-medium",children:"Annuler"})]}),l.jsxs(Qp,{onConfirm:()=>{C(Ne.id),Pt.success(`Commande de ${Be?.nom||"le client"} supprime`)},message:`tes-vous sr de vouloir supprimer dfinitivement la commande de "${Be?.nom||"Client inconnu"}" ?

Cette action est irrversible.`,confirmText:"Supprimer dfinitivement",cancelText:"Annuler",type:"danger",className:"flex items-center gap-1.5 px-3 py-2 text-red-700 bg-red-50 hover:bg-red-100 border border-red-200 hover:border-red-300 rounded-lg transition-all shadow-sm hover:shadow-md text-sm",title:"Supprimer dfinitivement la commande",children:[l.jsx(de,{icon:"mdi:delete-outline",className:"text-base"}),l.jsx("span",{className:"font-medium",children:"Supprimer"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-list",className:"text-gray-500"}),l.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Produits commands"}),l.jsxs("span",{className:"ml-auto text-sm font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:[Ne.produits.length," item",Ne.produits.length>1?"s":""]})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Ne.produits.map((ct,ot)=>{const ze=r.find(at=>at.id===ct.produitId);return l.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-xl p-4 hover:border-gray-300 hover:shadow-md transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-600 to-gray-700 rounded-lg flex items-center justify-center shadow-md",children:l.jsx(de,{icon:Ze(ze?.nom||""),className:"text-lg text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h5",{className:"font-semibold text-gray-900",children:ze?.nom||"Produit inconnu"}),l.jsxs("div",{className:"flex items-center justify-between mt-1",children:[l.jsxs("span",{className:"text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded-lg font-medium",children:["x",ct.quantiteCommandee]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"text-lg font-bold text-gray-800",children:[((ct.prixUnitaire||0)*ct.quantiteCommandee).toLocaleString("fr-FR")," F"]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:at=>{at.stopPropagation(),fe(Ne.id,ot)},className:"p-1 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded",title:"Modifier ce produit",children:l.jsx(de,{icon:"mdi:pencil",className:"text-lg"})}),l.jsx(Qp,{onConfirm:()=>{R(Ne.id,ot),Pt.success(`Produit "${ze?.nom||"Produit"}" supprim de la commande`)},message:`tes-vous sr de vouloir supprimer "${ze?.nom||"ce produit"}" de cette commande ?

${Ne?.produits.length===1?" Cette action supprimera compltement la commande car c'est le seul produit.":"Les autres produits de la commande seront conservs."}`,confirmText:"Supprimer le produit",cancelText:"Annuler",type:"warning",className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 rounded",onClick:at=>at.stopPropagation(),title:"Supprimer ce produit de la commande",children:l.jsx(de,{icon:"mdi:close",className:"text-lg"})})]})]})]})]})]}),ct.repartitionCars&&l.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[l.jsxs("div",{className:"text-xs font-medium text-gray-600 mb-2 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-gray-500"}),"Livraisons programmes"]}),l.jsxs("div",{className:"flex gap-2 flex-wrap",children:[ct.repartitionCars.car1_matin&&Number(ct.repartitionCars.car1_matin)>0&&l.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-linear-to-r from-orange-100 to-orange-200 text-orange-800 text-xs font-semibold rounded-full shadow-sm",children:[l.jsx(de,{icon:"mdi:truck",className:"text-sm"}),l.jsxs("span",{children:["Car 1M: ",ct.repartitionCars.car1_matin]})]}),ct.repartitionCars.car2_matin&&Number(ct.repartitionCars.car2_matin)>0&&l.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-linear-to-r from-blue-100 to-blue-200 text-blue-800 text-xs font-semibold rounded-full shadow-sm",children:[l.jsx(de,{icon:"mdi:truck-outline",className:"text-sm"}),l.jsxs("span",{children:["Car 2M: ",ct.repartitionCars.car2_matin]})]}),ct.repartitionCars.car_soir&&Number(ct.repartitionCars.car_soir)>0&&l.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-linear-to-r from-purple-100 to-purple-200 text-purple-800 text-xs font-semibold rounded-full shadow-sm",children:[l.jsx(de,{icon:"mdi:truck-fast",className:"text-sm"}),l.jsxs("span",{children:["Car S: ",ct.repartitionCars.car_soir]})]})]})]})]},ot)})})]})]},Ne.id)}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mt-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.length}),l.jsx("div",{className:"text-sm text-gray-500",children:"Commandes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.reduce((Ne,Be)=>Ne+Be.produits.length,0)}),l.jsx("div",{className:"text-sm text-gray-500",children:"Articles"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[e.reduce((Ne,Be)=>Ne+Be.produits.reduce((te,Ze)=>te+(Ze.prixUnitaire||0)*Ze.quantiteCommandee,0),0).toLocaleString("fr-FR")," FCFA"]}),l.jsx("div",{className:"text-sm text-gray-500",children:"Total"})]})]})})]})})]}),l.jsx(Yu,{isOpen:c,onClose:()=>D(!1),title:"Ajouter un Produit pour la Boutique",size:"lg",inline:!0,children:l.jsx(m9,{produits:r,quantitesActuelles:t,onSave:Ne=>{U(Ne),D(!1)},onCancel:()=>D(!1)})}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:storefront",className:"text-lg text-amber-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Quantits Boutique"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Dfinissez les quantits  envoyer en boutique"})]})]}),l.jsxs("button",{onClick:()=>D(!0),disabled:c,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:border-gray-400 rounded-lg transition-all disabled:opacity-50 shadow-sm hover:shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter produit"})]})]})}),l.jsx("div",{className:"p-6",children:t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:storefront-outline",className:"text-3xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune quantit boutique"}),l.jsx("p",{className:"text-gray-500 mb-6",children:"Dfinissez les produits  envoyer directement en boutique"}),l.jsxs("button",{onClick:()=>D(!0),className:"inline-flex items-center gap-2 px-6 py-3 text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 hover:border-gray-400 rounded-lg transition-all shadow-sm hover:shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter le premier produit"})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(Ne=>{const Be=r.find(te=>te.id===Ne.produitId);return l.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-xl p-4 hover:border-gray-300 hover:shadow-md transition-all group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-600 to-gray-700 rounded-lg flex items-center justify-center shadow-md",children:l.jsx(de,{icon:"mdi:storefront",className:"text-lg text-white"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-900",children:Be?.nom||"Produit inconnu"}),l.jsx("div",{className:"flex items-center gap-2 mt-1",children:l.jsxs("span",{className:"text-sm text-gray-700 bg-gray-100 px-2 py-1 rounded-lg font-medium",children:[Ne.quantite," pice",Ne.quantite>1?"s":""]})})]})]}),l.jsx("button",{onClick:()=>$(Ne.produitId),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-100 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:l.jsx(de,{icon:"mdi:delete-outline",className:"text-lg"})})]}),Ne.repartitionCars&&l.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[l.jsxs("div",{className:"text-xs font-medium text-gray-600 mb-2 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-gray-500"}),"Rpartition par cars"]}),l.jsxs("div",{className:"space-y-2",children:[Ne.repartitionCars.car1_matin>0&&l.jsxs("div",{className:"flex items-center justify-between p-2 bg-orange-50 border border-orange-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:truck",className:"text-orange-600 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-orange-800",children:"Car 1M"})]}),l.jsx("span",{className:"text-xs font-bold text-orange-800",children:Ne.repartitionCars.car1_matin})]}),Ne.repartitionCars.car2_matin>0&&l.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 border border-blue-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:truck-outline",className:"text-blue-600 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-blue-800",children:"Car 2M"})]}),l.jsx("span",{className:"text-xs font-bold text-blue-800",children:Ne.repartitionCars.car2_matin})]}),Ne.repartitionCars.car_soir>0&&l.jsxs("div",{className:"flex items-center justify-between p-2 bg-purple-50 border border-purple-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:truck-fast",className:"text-purple-600 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-purple-800",children:"Car S"})]}),l.jsx("span",{className:"text-xs font-bold text-purple-800",children:Ne.repartitionCars.car_soir})]})]})]})]},Ne.produitId)})}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mt-6",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.length}),l.jsx("div",{className:"text-sm text-gray-500",children:"Produits boutique"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-amber-600",children:t.reduce((Ne,Be)=>Ne+Be.quantite,0)}),l.jsx("div",{className:"text-sm text-gray-500",children:"Total pices"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-bold text-orange-600",children:t.reduce((Ne,Be)=>Ne+(Be.repartitionCars?.car1_matin||0),0)}),l.jsx("div",{className:"text-xs text-gray-500",children:"Car 1M"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-bold text-blue-600",children:t.reduce((Ne,Be)=>Ne+(Be.repartitionCars?.car2_matin||0),0)}),l.jsx("div",{className:"text-xs text-gray-500",children:"Car 2M"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-bold text-purple-600",children:t.reduce((Ne,Be)=>Ne+(Be.repartitionCars?.car_soir||0),0)}),l.jsx("div",{className:"text-xs text-gray-500",children:"Car S"})]})]})})]})})]}),n?.totauxParProduit&&n.totauxParProduit.length>0&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:chart-pie",className:"text-lg text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Programme de Production"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Rpartition des quantits par produit et par car de livraison"})]})]})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.totauxParProduit.reduce((Ne,Be)=>Ne+(Be.repartitionCar1Matin||0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Car 1 - Matin"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[l.jsx(de,{icon:"mdi:clock-time-eight",className:"text-sm"}),l.jsx("span",{className:"text-sm",children:"06:00 - 10:00"})]})]})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:truck-delivery-outline",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.totauxParProduit.reduce((Ne,Be)=>Ne+(Be.repartitionCar2Matin||0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Car 2 - Matin"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[l.jsx(de,{icon:"mdi:clock-time-nine",className:"text-sm"}),l.jsx("span",{className:"text-sm",children:"08:00 - 12:00"})]})]})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:truck-fast",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.totauxParProduit.reduce((Ne,Be)=>Ne+(Be.repartitionCarSoir||0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Car - Soir"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[l.jsx(de,{icon:"mdi:clock-time-five",className:"text-sm"}),l.jsx("span",{className:"text-sm",children:"15:00 - 19:00"})]})]})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.totauxParProduit.reduce((Ne,Be)=>Ne+Be.totalGlobal,0)}),l.jsx("div",{className:"text-gray-100 text-xs",children:"pices"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Total Gnral"}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-200",children:[l.jsx(de,{icon:"mdi:sigma",className:"text-sm"}),l.jsx("span",{className:"text-sm",children:"Toutes livraisons"})]})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Dtail par produit"}),l.jsxs("span",{className:"ml-auto text-sm font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[n.totauxParProduit.length," produit",n.totauxParProduit.length>1?"s":""]})]}),l.jsx("div",{className:"grid gap-6 lg:grid-cols-2 xl:grid-cols-3",children:n.totauxParProduit.map(Ne=>{const Be=te=>{const Ze=te?.toLowerCase()||"";return Ze.includes("baguette")?"mdi:baguette":Ze.includes("pain")?"mdi:bread-slice":Ze.includes("croissant")?"mdi:croissant":Ze.includes("brioche")?"mdi:muffin":Ze.includes("tarte")?"mdi:pie":Ze.includes("gateau")||Ze.includes("gteau")?"mdi:cake":Ze.includes("sandwich")?"mdi:food":Ze.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"bg-linear-to-br from-white to-gray-50 border border-gray-200 rounded-2xl p-6 hover:border-purple-300 hover:shadow-2xl transition-all duration-300 group",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-slate-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx(de,{icon:Be(Ne.produit?.nom||""),className:"text-2xl text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-bold text-xl text-gray-900 mb-1",children:Ne.produit?.nom||Ne.produitId}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl font-bold text-gray-800",children:Ne.totalGlobal}),l.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:"pices"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center border border-gray-200 group-hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-group",className:"text-white text-sm"})}),l.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Clients"})]}),l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:Ne.totalClient})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center border border-gray-200 group-hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:storefront",className:"text-white text-sm"})}),l.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Boutique"})]}),l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:Ne.totalBoutique})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-gray-500"}),l.jsx("h5",{className:"text-sm font-semibold text-gray-700",children:"Planning de livraison"})]}),l.jsxs("div",{className:"space-y-2",children:[(Ne.repartitionCar1Matin||0)>0&&l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck",className:"text-white"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-800",children:"Car 1 - Matin"}),l.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:clock-time-eight",className:"text-xs"}),"06:00 - 10:00"]})]})]}),l.jsx("div",{className:"text-xl font-bold text-gray-800",children:Ne.repartitionCar1Matin})]}),(Ne.repartitionCar2Matin||0)>0&&l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-outline",className:"text-white"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-800",children:"Car 2 - Matin"}),l.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:clock-time-nine",className:"text-xs"}),"08:00 - 12:00"]})]})]}),l.jsx("div",{className:"text-xl font-bold text-gray-800",children:Ne.repartitionCar2Matin})]}),(Ne.repartitionCarSoir||0)>0&&l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-fast",className:"text-white"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-800",children:"Car - Soir"}),l.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:clock-time-five",className:"text-xs"}),"15:00 - 19:00"]})]})]}),l.jsx("div",{className:"text-xl font-bold text-gray-800",children:Ne.repartitionCarSoir})]})]})]})]},Ne.produitId)})})]})]})]})]})]})},g9=()=>{const{programmeActuel:n,chargerProgramme:e}=wl();he.useEffect(()=>{e(new Date)},[e]);const t=n?.totauxParProduit||[],r=i=>{const a=i?.toLowerCase()||"";return a.includes("baguette")?"mdi:baguette":a.includes("pain")?"mdi:bread-slice":a.includes("croissant")?"mdi:croissant":a.includes("brioche")?"mdi:muffin":a.includes("tarte")?"mdi:pie":a.includes("gateau")||a.includes("gteau")?"mdi:cake":a.includes("sandwich")?"mdi:food":a.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:chef-hat",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Vue Boulanger"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Programme de production journalier"})]})]}),n&&l.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium border ${n.statut==="envoye"?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:[l.jsx(de,{icon:n.statut==="envoye"?"mdi:check-circle":"mdi:clock-outline",className:"text-sm"}),n.statut==="envoye"?"Confirm":"En attente"]})]})}),l.jsx("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:!n||t.length===0?l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-12 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:bread-slice",className:"text-3xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Pas de production"}),l.jsx("p",{className:"text-gray-500",children:"Aucun programme n'a t dfini pour le moment."}),l.jsxs("button",{onClick:()=>{e(new Date)},className:"mt-6 inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[l.jsx(de,{icon:"mdi:refresh",className:"text-lg"}),l.jsx("span",{children:"Actualiser"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-gray-700 text-white rounded-xl p-6 shadow-sm flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-gray-600 rounded-lg",children:l.jsx(de,{icon:"mdi:sigma",className:"text-2xl"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold",children:"Total Journe"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"Production globale (Matin + Soir)"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-4xl font-bold",children:t.reduce((i,a)=>i+(a.repartitionCar1Matin||0)+(a.repartitionCar2Matin||0)+(a.repartitionCarSoir||0),0)}),l.jsx("div",{className:"text-gray-400 text-sm font-medium",children:"pices"})]})]}),t.some(i=>i.repartitionCar1Matin+i.repartitionCar2Matin>0)&&l.jsxs("section",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunrise",className:"text-xl text-gray-500"})}),l.jsx("h2",{className:"text-2xl font-bold text-gray-700",children:"Production du Matin"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.filter(i=>i.repartitionCar1Matin+i.repartitionCar2Matin>0).map(i=>{const a=i.repartitionCar1Matin,c=i.repartitionCar2Matin,d=a+c;return l.jsxs("div",{className:"relative bg-white border border-gray-200 border-t-4 border-t-gray-600 rounded-xl p-6 hover:border-gray-300 hover:shadow-md transition-all",children:[l.jsx("div",{className:"absolute top-3 right-4 text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Matin"}),l.jsxs("div",{className:"flex items-center gap-4 mb-6 pt-2",children:[l.jsx("div",{className:"w-14 h-14 bg-gray-600 rounded-xl flex items-center justify-center shadow-sm flex-shrink-0",children:l.jsx(de,{icon:r(i.produit?.nom||""),className:"text-2xl text-white"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:i.produit?.nom||"Produit"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center border border-gray-100",children:[l.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-1",children:"Car 1"}),l.jsx("div",{className:"text-3xl font-bold text-gray-700",children:a})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center border border-gray-100",children:[l.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase mb-1",children:"Car 2"}),l.jsx("div",{className:"text-3xl font-bold text-gray-700",children:c})]})]}),l.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Total Matin"}),l.jsxs("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:"text-2xl font-bold text-gray-800",children:d}),l.jsx("span",{className:"text-sm text-gray-500",children:"pc"})]})]})]},`matin-${i.produitId}`)})})]}),t.some(i=>i.repartitionCarSoir>0)&&l.jsxs("section",{className:"pt-8 border-t border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunset",className:"text-xl text-gray-600"})}),l.jsx("h2",{className:"text-2xl font-bold text-gray-600",children:"Production du Soir"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.filter(i=>i.repartitionCarSoir>0).map(i=>{const a=i.repartitionCarSoir;return l.jsxs("div",{className:"relative bg-white border border-gray-200 border-t-4 border-t-gray-300 rounded-xl p-6 hover:border-gray-300 hover:shadow-md transition-all",children:[l.jsx("div",{className:"absolute top-3 right-4 text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Soir"}),l.jsxs("div",{className:"flex items-center gap-4 mb-8 pt-2",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-400 rounded-xl flex items-center justify-center shadow-sm flex-shrink-0",children:l.jsx(de,{icon:r(i.produit?.nom||""),className:"text-3xl text-white"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:i.produit?.nom||"Produit"})]}),l.jsxs("div",{className:"text-center mb-2",children:[l.jsx("div",{className:"text-7xl font-bold text-gray-800 tracking-tight leading-none",children:a}),l.jsx("div",{className:"text-lg text-gray-500 font-medium mt-1",children:"pices"})]})]},`soir-${i.produitId}`)})})]}),!t.some(i=>i.repartitionCar1Matin+i.repartitionCar2Matin>0)&&!t.some(i=>i.repartitionCarSoir>0)&&l.jsx("div",{className:"text-center py-12 text-gray-500",children:l.jsx("p",{children:"Aucune quantit  produire trouve dans le programme."})})]})})]})},g0=yc((n,e)=>({livreurs:[],livreurEnEdition:null,isLoadingLivreurs:!1,chargerLivreurs:async()=>{n({isLoadingLivreurs:!0});try{const r=(await On.getAll("livreurs")).map(i=>({...i,createdAt:i.createdAt instanceof Date?i.createdAt:Ia(i.createdAt),updatedAt:i.updatedAt instanceof Date?i.updatedAt:Ia(i.updatedAt)}));n({livreurs:r,isLoadingLivreurs:!1})}catch(t){throw console.error("Erreur lors du chargement des livreurs:",t),n({isLoadingLivreurs:!1}),t}},ajouterLivreur:async t=>{n({isLoadingLivreurs:!0});try{const r=new Date,i={...t,createdAt:r,updatedAt:r},c={id:(await On.create("livreurs",i)).id,...i};n(d=>({livreurs:[...d.livreurs,c],isLoadingLivreurs:!1}))}catch(r){throw console.error("Erreur lors de l'ajout du livreur:",r),n({isLoadingLivreurs:!1}),r}},modifierLivreur:async(t,r)=>{n({isLoadingLivreurs:!0});try{const i={...r,updatedAt:new Date};await On.update("livreurs",t,i),n(a=>({livreurs:a.livreurs.map(c=>c.id===t?{...c,...i}:c),isLoadingLivreurs:!1,livreurEnEdition:null}))}catch(i){throw console.error("Erreur lors de la modification du livreur:",i),n({isLoadingLivreurs:!1}),i}},supprimerLivreur:async t=>{n({isLoadingLivreurs:!0});try{await On.delete("livreurs",t),n(r=>({livreurs:r.livreurs.filter(i=>i.id!==t),isLoadingLivreurs:!1}))}catch(r){throw console.error("Erreur lors de la suppression du livreur:",r),n({isLoadingLivreurs:!1}),r}},setLivreurEnEdition:t=>{n({livreurEnEdition:t})},getLivreurById:t=>{const{livreurs:r}=e();return r.find(i=>i.id===t)},getLivreursActifs:()=>{const{livreurs:t}=e();return t.filter(r=>r.active)}})),rc={car1_matin:"Car 1 - Matin",car2_matin:"Car 2 - Matin",car_soir:"Car - Soir"};class v9{formatDate(e){return new Date(e).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}getCarColor(e){switch(e){case"car1_matin":return"#374151";case"car2_matin":return"#4b5563";case"car_soir":return"#1f2937";default:return"#4b5563"}}getSigleProduit(e){const t=e.toLowerCase().trim(),r={"pain au lait":"PAL","pain de mie":"PDM","pain complet":"PC","pain blanc":"PB","pain de campagne":"PDC",baguette:"BAG","baguette tradition":"BAG-T",croissant:"CRO","pain au chocolat":"PAC",chocolatine:"CHO",brioche:"BRI",viennoiserie:"VIE",tarte:"TAR",gteau:"GAT",sandwich:"SAN"};if(r[t])return r[t];const i=t.split(/\s+/);return i.length===1?t.substring(0,3).toUpperCase():i.map(a=>a[0]).join("").toUpperCase()}generateStyles(){return`
      <style>
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
          font-size: 10px;
          line-height: 1.3;
          color: #1f2937;
          background: white;
          padding: 8px;
        }
        
        .container {
          max-width: 100%;
          margin: 0 auto;
        }
        
        .header {
          text-align: center;
          margin-bottom: 8px;
          padding-bottom: 6px;
          border-bottom: 1px solid #e5e7eb;
        }
        
        .header h1 {
          font-size: 16px;
          font-weight: 700;
          color: #111827;
          margin-bottom: 2px;
        }
        
        .header .date {
          font-size: 11px;
          color: #6b7280;
          font-weight: 500;
        }
        
        .livreur-section {
          margin-bottom: 12px;
          page-break-inside: avoid;
        }
        
        .livreur-header {
          background: #f9fafb;
          padding: 6px 8px;
          border-left: 3px solid #4b5563;
          margin-bottom: 8px;
        }
        
        .livreur-header h2 {
          font-size: 13px;
          font-weight: 600;
          color: #111827;
          margin-bottom: 2px;
        }
        
        .livreur-header .info {
          font-size: 10px;
          color: #6b7280;
        }
        
        .car-section {
          margin-bottom: 10px;
          border: 1px solid #d1d5db;
          border-radius: 4px;
          overflow: hidden;
          page-break-inside: avoid;
        }
        
        .car-header {
          color: white;
          padding: 5px 8px;
          font-weight: 600;
          font-size: 11px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        
        .car-body {
          background: white;
        }
        
        table {
          width: 100%;
          border-collapse: collapse;
        }
        
        th {
          background: #f3f4f6;
          padding: 4px 6px;
          text-align: left;
          font-weight: 600;
          font-size: 9px;
          color: #374151;
          border-bottom: 1px solid #d1d5db;
        }
        
        td {
          padding: 4px 6px;
          border-bottom: 1px solid #e5e7eb;
          font-size: 9px;
          vertical-align: top;
        }
        
        tr:last-child td {
          border-bottom: none;
        }
        
        tr:hover {
          background: #f9fafb;
        }
        
        .summary {
          background: #374151;
          color: white;
          padding: 6px 8px;
          margin-top: 0;
          border-top: 1px solid #d1d5db;
        }
        
        .summary h4 {
          font-size: 10px;
          font-weight: 600;
          margin-bottom: 4px;
        }
        
        .summary-items {
          display: flex;
          flex-wrap: wrap;
          gap: 4px;
        }
        
        .summary-item {
          background: white;
          color: #111827;
          padding: 3px 6px;
          border-radius: 3px;
          font-size: 9px;
          font-weight: 500;
          display: inline-flex;
          align-items: center;
          gap: 4px;
        }
        
        .summary-item .count {
          background: #f3f4f6;
          padding: 1px 5px;
          border-radius: 8px;
          font-weight: 700;
        }
        
        .retours-column {
          width: 80px;
          min-height: 20px;
          border: 1px solid #d1d5db;
          border-radius: 3px;
          background: #fafafa;
        }
        
        .stats {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 8px;
          margin-bottom: 10px;
        }
        
        .stat-card {
          background: #f9fafb;
          padding: 6px 8px;
          border-radius: 4px;
          border-left: 3px solid #4b5563;
        }
        
        .stat-card .label {
          font-size: 8px;
          color: #6b7280;
          font-weight: 500;
          text-transform: uppercase;
          letter-spacing: 0.3px;
        }
        
        .stat-card .value {
          font-size: 18px;
          font-weight: 700;
          color: #111827;
          margin-top: 2px;
        }
        
        @media print {
          body {
            padding: 0;
            font-size: 9px;
          }
          
          .no-print {
            display: none !important;
          }
          
          .livreur-section {
            page-break-after: always;
          }
          
          .car-section {
            page-break-inside: avoid;
          }
          
          th {
            font-size: 8px;
            padding: 3px 5px;
          }
          
          td {
            font-size: 8px;
            padding: 3px 5px;
          }
          
          @page {
            margin: 8mm;
            size: A4;
          }
        }
      </style>
    `}generateDeliveryReportHTML(e,t){const r=e.livreur?.nom||"Clients non assigns";let i=`
      <!DOCTYPE html>
      <html lang="fr">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Programme de Livraison - ${r}</title>
        ${this.generateStyles()}
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1> Programme de Livraison</h1>
            <div class="date">${this.formatDate(t)}</div>
          </div>
          
          <div class="livreur-section">
            <div class="livreur-header">
              <h2>${r}</h2>
              ${e.livreur?.telephone?`<div class="info"> ${e.livreur.telephone}</div>`:""}
              ${e.livreur?.vehicule?`<div class="info"> ${e.livreur.vehicule}</div>`:""}
            </div>
    `;const a=["car1_matin","car2_matin","car_soir"];Array.from(e.commandesParCar.entries()).sort(([f],[p])=>a.indexOf(f)-a.indexOf(p)).forEach(([f,p])=>{const x=this.getCarColor(f),N=new Map;p.forEach(C=>{const I=C.client?.id||"inconnu";N.has(I)||N.set(I,{client:C.client,produits:new Map});const R=N.get(I),U=C.produit?.nom||"Produit inconnu",$=R.produits.get(U)||0,z=Number(C.quantite)||0;R.produits.set(U,$+z)});const b=Array.from(new Set(p.map(C=>C.produit?.nom||"Produit inconnu"))).sort();i+=`
            <div class="car-section">
              <div class="car-header" style="background-color: ${x};">
                <span> ${rc[f]}</span>
                <span>${N.size} client(s)</span>
              </div>
              
              <div class="car-body">
                <table>
                  <thead>
                    <tr>
                      <th style="width: 20%;">Client</th>
      `,b.forEach(C=>{const I=this.getSigleProduit(C);i+=`<th style="text-align: center; width: ${70/b.length}%;" title="${C}">${I}</th>`}),i+=`
                      <th style="width: 10%;">Retours</th>
                    </tr>
                  </thead>
                  <tbody>
      `,Array.from(N.values()).forEach(C=>{i+=`
                    <tr>
                      <td><strong>${C.client?.nom||"Client inconnu"}</strong></td>
        `,b.forEach(I=>{const R=C.produits.get(I)||0;R>0?i+=`<td style="text-align: center; font-weight: 700;">${R}</td>`:i+='<td style="text-align: center; color: #d1d5db;">-</td>'}),i+=`
                      <td><div class="retours-column"></div></td>
                    </tr>
        `});const E={};Array.from(N.values()).forEach(C=>{C.produits.forEach((I,R)=>{E[R]=(E[R]||0)+I})}),i+=`
                  </tbody>
                </table>
              </div>
              
              <div class="summary" style="background-color: ${x};">
                <h4> Rsum ${rc[f]}</h4>
                <div class="summary-items">
      `,Object.entries(E).forEach(([C,I])=>{const R=this.getSigleProduit(C);i+=`
                  <div class="summary-item">
                    <span><strong>${R}</strong> - ${C}</span>
                    <span class="count">${I}</span>
                  </div>
        `}),i+=`
                </div>
              </div>
            </div>
      `}),i+=`
          </div>
          
          <div class="no-print" style="text-align: center; margin-top: 30px; padding: 20px; background: #f3f4f6; border-radius: 8px;">
            <button onclick="window.print()" style="background: #4b5563; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer;">
               Imprimer ce document
            </button>
            <button onclick="window.close()" style="background: #9ca3af; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; margin-left: 12px;">
               Fermer
            </button>
          </div>
        </div>
      </body>
      </html>
    `;const h=window.open("","_blank");h&&(h.document.write(i),h.document.close())}generateGlobalReportHTML(e,t){const r=e.length,i=e.reduce((h,[,f])=>h+Array.from(f.commandesParCar.values()).reduce((p,x)=>p+x.length,0),0),a=Array.from(new Set(e.flatMap(([,h])=>Array.from(h.commandesParCar.values()).flat().map(f=>f.client?.id)))).length;let c=`
      <!DOCTYPE html>
      <html lang="fr">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Rapport Global de Livraison</title>
        ${this.generateStyles()}
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1> Rapport Global de Livraison</h1>
            <div class="date">${this.formatDate(t)}</div>
          </div>
          
          <div class="stats">
            <div class="stat-card">
              <div class="label">Livreurs Actifs</div>
              <div class="value">${r}</div>
            </div>
            <div class="stat-card">
              <div class="label">Total Livraisons</div>
              <div class="value">${i}</div>
            </div>
            <div class="stat-card">
              <div class="label">Clients  Livrer</div>
              <div class="value">${a}</div>
            </div>
          </div>
    `;e.forEach(([,h])=>{const f=h.livreur?.nom||"Clients non assigns";c+=`
          <div class="livreur-section">
            <div class="livreur-header">
              <h2>${f}</h2>
              ${h.livreur?.telephone?`<div class="info"> ${h.livreur.telephone}</div>`:""}
              ${h.livreur?.vehicule?`<div class="info"> ${h.livreur.vehicule}</div>`:""}
            </div>
      `;const p=["car1_matin","car2_matin","car_soir"];Array.from(h.commandesParCar.entries()).sort(([b],[E])=>p.indexOf(b)-p.indexOf(E)).forEach(([b,E])=>{const C=this.getCarColor(b),I=new Map;E.forEach($=>{const z=$.client?.id||"inconnu";I.has(z)||I.set(z,{client:$.client,produits:new Map});const ue=I.get(z),ie=$.produit?.nom||"Produit inconnu",V=ue.produits.get(ie)||0,D=Number($.quantite)||0;ue.produits.set(ie,V+D)});const R=Array.from(new Set(E.map($=>$.produit?.nom||"Produit inconnu"))).sort();c+=`
            <div class="car-section">
              <div class="car-header" style="background-color: ${C};">
                <span> ${rc[b]}</span>
                <span>${I.size} client(s)</span>
              </div>
              
              <div class="car-body">
                <table>
                  <thead>
                    <tr>
                      <th style="width: 20%;">Client</th>
        `,R.forEach($=>{const z=this.getSigleProduit($);c+=`<th style="text-align: center; width: ${70/R.length}%;" title="${$}">${z}</th>`}),c+=`
                      <th style="width: 10%;">Retours</th>
                    </tr>
                  </thead>
                  <tbody>
        `,Array.from(I.values()).forEach($=>{c+=`
                    <tr>
                      <td><strong>${$.client?.nom||"Client inconnu"}</strong></td>
          `,R.forEach(z=>{const ue=$.produits.get(z)||0;ue>0?c+=`<td style="text-align: center; font-weight: 700;">${ue}</td>`:c+='<td style="text-align: center; color: #d1d5db;">-</td>'}),c+=`
                      <td><div class="retours-column"></div></td>
                    </tr>
          `});const U={};Array.from(I.values()).forEach($=>{$.produits.forEach((z,ue)=>{U[ue]=(U[ue]||0)+z})}),c+=`
                  </tbody>
                </table>
              </div>
              
              <div class="summary" style="background-color: ${C};">
                <h4> Rsum ${rc[b]}</h4>
                <div class="summary-items">
        `,Object.entries(U).forEach(([$,z])=>{const ue=this.getSigleProduit($);c+=`
                  <div class="summary-item">
                    <span><strong>${ue}</strong> - ${$}</span>
                    <span class="count">${z}</span>
                  </div>
          `}),c+=`
                </div>
              </div>
            </div>
        `}),c+=`
          </div>
      `}),c+=`
          <div class="no-print" style="text-align: center; margin-top: 30px; padding: 20px; background: #f3f4f6; border-radius: 8px;">
            <button onclick="window.print()" style="background: #4b5563; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer;">
               Imprimer ce document
            </button>
            <button onclick="window.close()" style="background: #9ca3af; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; margin-left: 12px;">
               Fermer
            </button>
          </div>
        </div>
      </body>
      </html>
    `;const d=window.open("","_blank");d&&(d.document.write(c),d.document.close())}}const x_=new v9,y9=()=>{const{commandesClients:n,chargerProgramme:e,supprimerCommandesLivreur:t}=wl(),{livreurs:r,chargerLivreurs:i}=g0(),{clients:a,produits:c,chargerProduits:d,chargerClients:h}=yu(),[f,p]=he.useState(new Date().toISOString().split("T")[0]),[x,N]=he.useState("tous");he.useEffect(()=>{(async()=>{try{await Promise.all([d(),h(),i()]),await e(new Date(f))}catch(z){console.error("Erreur lors de l'initialisation:",z)}})()},[f,e,d,h,i]);const E=(()=>{const $=new Map;return console.log("Debug livraisons:"),console.log("Nombre de commandes clients:",n.length),console.log("Nombre de clients:",a.length),n.forEach(z=>{const ue=a.find(D=>D.id===z.clientId);ue||console.warn(" Client non trouv pour commande:",{commandeClientId:z.clientId,clientsDisponibles:a.map(D=>({id:D.id,nom:D.nom}))});const ie=ue?.livreurId||"non-assigne";$.has(ie)||$.set(ie,{livreur:r.find(D=>D.id===ie),commandesParCar:new Map});const V=$.get(ie);z.produits.forEach(D=>{D.repartitionCars&&Object.entries(D.repartitionCars).forEach(([k,G])=>{if(G&&G>0){const S=k;V.commandesParCar.has(S)||V.commandesParCar.set(S,[]),V.commandesParCar.get(S).push({commande:z,client:ue,produit:c.find(L=>L.id===D.produitId),quantite:G})}})})}),Array.from($.entries())})(),C=$=>{try{x_.generateDeliveryReportHTML($,f),Pt.success("Rapport ouvert dans une nouvelle fentre !")}catch(z){console.error("Erreur lors de la gnration du rapport:",z),Pt.error("Erreur lors de la gnration du rapport")}},I=()=>{try{x_.generateGlobalReportHTML(E,f),Pt.success("Rapport global ouvert dans une nouvelle fentre !")}catch($){console.error("Erreur lors de la gnration du rapport:",$),Pt.error("Erreur lors de la gnration du rapport")}},R=$=>{const z=$?.toLowerCase()||"";return z.includes("baguette")?"mdi:baguette":z.includes("pain")?"mdi:bread-slice":z.includes("croissant")?"mdi:croissant":z.includes("brioche")?"mdi:muffin":z.includes("tarte")?"mdi:pie":z.includes("gateau")||z.includes("gteau")?"mdi:cake":z.includes("sandwich")?"mdi:food":z.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"},U=()=>({headerBg:"bg-slate-600",bg:"bg-gray-50",summaryBg:"bg-slate-600",border:"border-gray-200",text:"text-gray-700",badgeBg:"bg-gray-100",badgeText:"text-gray-600",accent:"bg-slate-600"});return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Programme de Livraison"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Vue dtaille par livreur et par car de livraison"})]})]}),l.jsx("div",{className:"flex items-center gap-3",children:l.jsxs("button",{onClick:I,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200",disabled:E.length===0,children:[l.jsx(de,{icon:"mdi:printer",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Rapport Global Imprimable"})]})})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:filter",className:"text-lg text-blue-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filtres"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de livraison"}),l.jsx("input",{type:"date",value:f,onChange:$=>p($.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 font-medium w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Car de livraison"}),l.jsxs("select",{value:x,onChange:$=>N($.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 font-medium w-full",children:[l.jsx("option",{value:"tous",children:"Tous les cars"}),l.jsx("option",{value:"car1_matin",children:rc.car1_matin}),l.jsx("option",{value:"car2_matin",children:rc.car2_matin}),l.jsx("option",{value:"car_soir",children:rc.car_soir})]})]})]})]}),E.length===0?l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:package-variant-closed",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune livraison prvue"}),l.jsx("p",{className:"text-gray-500",children:"Aucune commande client pour cette date"})]})})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-blue-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:account-group",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:E.length}),l.jsx("div",{className:"text-blue-200 text-xs",children:"livreurs"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Livreurs Actifs"})]}),l.jsxs("div",{className:"bg-green-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:n.length}),l.jsx("div",{className:"text-green-200 text-xs",children:"commandes"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Commandes"})]}),l.jsxs("div",{className:"bg-orange-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:E.reduce(($,[,z])=>$+z.commandesParCar.size,0)}),l.jsx("div",{className:"text-orange-200 text-xs",children:"tournes"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Tournes Prvues"})]}),l.jsxs("div",{className:"bg-gray-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:map-marker",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:Array.from(new Set(E.flatMap(([,$])=>Array.from($.commandesParCar.values()).flat().map(z=>z.client?.id)))).length}),l.jsx("div",{className:"text-gray-200 text-xs",children:"adresses"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Points de Livraison"})]})]}),E.map(([$,z])=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:z.livreur?"mdi:truck":"mdi:help-circle",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:z.livreur?`${z.livreur.nom} ${z.livreur.vehicule?`(${z.livreur.vehicule})`:""}`:"Clients non assigns"}),l.jsx("p",{className:"text-sm text-gray-500",children:z.livreur?.telephone?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:phone",className:"text-sm"}),z.livreur.telephone]}):"Clients sans livreur assign"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:()=>C(z),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all duration-200",title:"Gnrer le rapport imprimable pour ce livreur",children:[l.jsx(de,{icon:"mdi:printer",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Imprimer"})]}),z.livreur&&l.jsxs(Qp,{onConfirm:()=>{t($),Pt.success(` Toutes les commandes de "${z.livreur?.nom}" ont t supprimes dfinitivement.`)},title:"Supprimer le programme de livraison",message:`Supprimer dfinitivement toutes les commandes de "${z.livreur?.nom}" pour le ${f} ?`,confirmText:"Supprimer dfinitivement",cancelText:"Annuler",type:"danger",className:"inline-flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all duration-200",children:[l.jsx(de,{icon:"mdi:delete-forever",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Supprimer Programme"})]})]})]})}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"space-y-8",children:Array.from(z.commandesParCar.entries()).filter(([ue])=>x==="tous"||x===ue).map(([ue,ie])=>{const V=U();return l.jsxs("div",{className:`relative bg-white border ${V.border} rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all duration-200`,children:[l.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${V.accent}`}),l.jsx("div",{className:`${V.headerBg} p-4 mb-4`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-xl text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:rc[ue]}),l.jsxs("p",{className:"text-white/70 text-sm",children:[ie.length," livraison(s) programme(s)"]})]})]}),l.jsx("div",{className:"bg-white/10 px-3 py-1.5 rounded-md",children:l.jsxs("span",{className:"text-white text-sm font-medium",children:[ie.length," stop",ie.length>1?"s":""]})})]})}),l.jsxs("div",{className:"px-6 pb-6",children:[l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:(()=>{const D=new Map;return ie.forEach(k=>{const G=k.client?.id||"inconnu";D.has(G)||D.set(G,{client:k.client,produits:[]}),D.get(G).produits.push({produit:k.produit,quantite:Number(k.quantite)||0})}),Array.from(D.values()).map((k,G)=>l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 hover:shadow-sm transition-all",children:[l.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[l.jsx("div",{className:`w-10 h-10 ${V.accent} rounded-lg flex items-center justify-center`,children:l.jsx(de,{icon:"mdi:account",className:"text-white text-lg"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:k.client?.nom||"Client inconnu"}),l.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:k.client?.adresse||"Adresse non dfinie"})]})]}),l.jsx("div",{className:"border-t border-gray-100 pt-3 space-y-2",children:k.produits.map((S,L)=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:R(S.produit?.nom||""),className:"text-gray-600 text-sm"})}),l.jsx("div",{className:"flex-1",children:l.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.produit?.nom||"Produit inconnu"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg font-bold text-gray-800",children:S.quantite}),l.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:"pcs"})]})]},L))})]},G))})()}),l.jsxs("div",{className:`mt-4 ${V.summaryBg} border-l-4 ${V.accent} rounded-lg p-4`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(de,{icon:"mdi:chart-box",className:"text-white"}),l.jsxs("h4",{className:"font-medium text-white",children:["Rsum ",rc[ue]]})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{const D=ie.reduce((k,G)=>{const S=G.produit?.nom||"Inconnu",L=Number(G.quantite)||0;return k[S]=(k[S]||0)+L,k},{});return Object.entries(D).map(([k,G])=>l.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg border border-gray-200 shadow-sm",children:[l.jsx(de,{icon:R(k),className:"text-gray-600 text-sm"}),l.jsx("span",{className:"text-sm font-medium text-gray-900",children:k}),l.jsx("span",{className:"text-sm font-bold text-gray-900 bg-gray-100 px-2 py-1 rounded-full",children:G})]},k))})()})]})]})]},ue)})})})]},$))]})]})]})},x9=()=>{const{invendusClients:n,chargerInvendusDuJour:e,marquerAucunRetourClient:t,sauvegarderRetoursClient:r,isLoading:i}=nm(),{commandesClients:a,chargerProgramme:c}=wl(),{clients:d,produits:h,chargerClients:f,chargerProduits:p}=yu(),x=Fx(),[N,b]=he.useState(new Date().toISOString().split("T")[0]),[E,C]=he.useState({});he.useEffect(()=>{(async()=>{try{await Promise.all([f(),p(),c(new Date(N))]),await e(new Date(N))}catch(V){console.error("Erreur lors de l'initialisation:",V)}})()},[N,f,p,c,e]);const I=a.map(ie=>{const V=d.find(k=>k.id===ie.clientId);if(!V)return null;const D=ie.produits.map(k=>{const G=h.find(me=>me.id===k.produitId),L=Object.values(k.repartitionCars||{}).reduce((me,Se)=>{const Fe=typeof Se=="number"?Se:parseInt(String(Se))||0,X=isNaN(Fe)?0:Math.min(Fe,9999);return me+X},0),ye=n.find(me=>me.clientId===ie.clientId)?.produits.find(me=>me.produitId===k.produitId)?.invendus||0,Q=E[ie.clientId]?.[k.produitId],ce=Q!==void 0?Q:ye;return{produitId:k.produitId,produit:G,quantiteLivree:L,invendus:ce,vendu:L-ce}}).filter(k=>k.quantiteLivree>0);return{...V,commande:ie,produits:D}}).filter(ie=>ie!==null),R=(ie,V,D)=>{const k=parseInt(D)||0;C(G=>({...G,[ie]:{...G[ie],[V]:k}}))},U=async ie=>{const V=d.find(D=>D.id===ie);try{await x.confirm({title:"Confirmer aucun retour",message:`Confirmer qu'il n'y a aucun retour pour le client "${V?.nom||"Inconnu"}" ?

Cela finalisera les retours pour la facturation.`,confirmText:"Confirmer",cancelText:"Annuler",type:"info"})&&(await t(ie,new Date(N)),await e(new Date(N)),Pt.success(` Aucun retour confirm pour ${V?.nom||"le client"}`))}catch(D){console.error('Erreur lors du marquage "aucun retour":',D),Pt.error(' Erreur lors du marquage "aucun retour"')}},$=ie=>n.some(V=>V.clientId===ie&&V.dateLivraison.toDateString()===new Date(N).toDateString()&&V.retoursCompletes),z=async ie=>{const V=d.find(k=>k.id===ie),D=I.find(k=>k.id===ie);if(!D){Pt.error("Client non trouv");return}try{if(await x.confirm({title:"Enregistrer les retours",message:`Confirmer l'enregistrement des retours pour le client "${V?.nom||"Inconnu"}" ?

Cela finalisera les retours pour la facturation.`,confirmText:"Enregistrer",cancelText:"Annuler",type:"info"})){const G=D.produits.map(S=>({produitId:S.produitId,produit:S.produit,quantiteLivree:S.quantiteLivree,invendus:S.invendus,vendu:S.vendu}));await r(ie,new Date(N),G),await e(new Date(N)),C(S=>{const L={...S};return delete L[ie],L}),Pt.success(` Retours enregistrs pour ${V?.nom||"le client"}`)}}catch(k){console.error("Erreur lors de l'enregistrement des retours:",k),Pt.error(" Erreur lors de l'enregistrement des retours")}},ue=ie=>{const V=ie?.toLowerCase()||"";return V.includes("baguette")?"mdi:baguette":V.includes("pain")?"mdi:bread-slice":V.includes("croissant")?"mdi:croissant":V.includes("brioche")?"mdi:muffin":V.includes("tarte")?"mdi:pie":V.includes("gateau")||V.includes("gteau")?"mdi:cake":V.includes("sandwich")?"mdi:food":V.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-linear-to-r from-red-600 to-rose-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:keyboard-return",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Saisie des Retours Clients"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Enregistrez les invendus de chaque client pour la facturation"})]})]}),l.jsx("div",{className:"flex gap-3",children:l.jsxs("button",{onClick:async()=>{await Promise.all([f(),p(),c(new Date(N))]),await e(new Date(N)),Pt.success("Donnes recharges depuis la base !")},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all shadow-md",disabled:i,children:[l.jsx(de,{icon:"mdi:refresh",className:"text-lg"}),l.jsx("span",{children:"Recharger"})]})})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:calendar",className:"text-lg text-red-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Date de livraison"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("input",{type:"date",value:N,onChange:ie=>b(ie.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900 font-medium"}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Retours pour ",new Date(N).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),I.length===0?l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:package-variant-closed",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune livraison prvue"}),l.jsx("p",{className:"text-gray-500 mb-6",children:"Aucune commande client pour cette date"}),l.jsxs("button",{className:"inline-flex items-center gap-2 px-6 py-3 bg-linear-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Crer une commande"})]})]})})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:account-group",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:I.length}),l.jsx("div",{className:"text-gray-300 text-xs",children:"clients"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Clients Livrs"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:I.reduce((ie,V)=>ie+V.produits.reduce((D,k)=>D+k.quantiteLivree,0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Livr"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-down",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:I.reduce((ie,V)=>ie+V.produits.reduce((D,k)=>D+k.invendus,0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Invendus"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:chart-line",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:I.reduce((ie,V)=>ie+V.produits.reduce((D,k)=>D+k.vendu,0),0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Vendu"})]})]}),I.map(ie=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 ${$(ie.id)?"bg-green-100":"bg-orange-100"} rounded-lg flex items-center justify-center`,children:l.jsx(de,{icon:$(ie.id)?"mdi:check":"mdi:account",className:`text-lg ${$(ie.id)?"text-green-600":"text-orange-600"}`})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:ie.nom}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:map-marker",className:"text-sm"}),ie.adresse]}),ie.telephone&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(de,{icon:"mdi:phone",className:"text-sm"}),ie.telephone]})]})]})]}),$(ie.id)?l.jsxs("div",{className:"flex items-center gap-2 bg-green-100 text-green-700 px-3 py-1 rounded-full",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-sm"}),l.jsx("span",{className:"text-sm font-medium",children:"Retours finaliss"})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>z(ie.id),disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-linear-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 shadow-md",children:[l.jsx(de,{icon:"mdi:content-save-check",className:"text-sm"}),l.jsx("span",{className:"text-sm font-medium",children:"Enregistrer les retours"})]}),l.jsxs("button",{onClick:()=>U(ie.id),disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-linear-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all disabled:opacity-50 shadow-md",children:[l.jsx(de,{icon:"mdi:check-bold",className:"text-sm"}),l.jsx("span",{className:"text-sm font-medium",children:"Aucun retour"})]})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Produits livrs"}),l.jsxs("span",{className:"ml-auto text-sm font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:[ie.produits.length," produit",ie.produits.length>1?"s":""]})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:ie.produits.map(V=>l.jsxs("div",{className:`bg-linear-to-br ${V.invendus>0?"from-red-50 to-rose-50 border-red-200":"from-green-50 to-emerald-50 border-green-200"} border rounded-xl p-4 hover:shadow-md transition-all`,children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:`w-12 h-12 bg-linear-to-br ${V.invendus>0?"from-red-500 to-rose-500":"from-green-500 to-emerald-500"} rounded-xl flex items-center justify-center shadow-md`,children:l.jsx(de,{icon:ue(V.produit?.nom||""),className:"text-xl text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:V.produit?.nom||"Produit inconnu"}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Livr: ",l.jsxs("span",{className:"font-bold",children:[V.quantiteLivree," pices"]})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invendus retour:"}),l.jsx("input",{type:"number",min:"0",max:V.quantiteLivree,value:(()=>{const D=E[ie.id]?.[V.produitId]??V.invendus;return D===0?"":D})(),onChange:D=>R(ie.id,V.produitId,D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"0"})]}),l.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Vendu final:"}),l.jsxs("span",{className:`text-lg font-bold ${V.vendu>0?"text-green-600":"text-gray-600"}`,children:[V.vendu," pices"]})]}),V.invendus>0&&l.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:package-variant-closed",className:"text-red-500 text-sm"}),l.jsxs("span",{className:"text-xs text-red-600 font-medium",children:[V.invendus," invendu",V.invendus>1?"s":""]})]})]})]})]},V.produitId))}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mt-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(de,{icon:"mdi:chart-box",className:"text-gray-600"}),l.jsx("h4",{className:"font-semibold text-gray-800",children:"Rsum client"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ie.produits.reduce((V,D)=>V+D.quantiteLivree,0)}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total livr"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:ie.produits.reduce((V,D)=>V+D.invendus,0)}),l.jsx("div",{className:"text-sm text-gray-600",children:"Invendus"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:ie.produits.reduce((V,D)=>V+D.vendu,0)}),l.jsx("div",{className:"text-sm text-gray-600",children:"Vendu"})]})]})]})]})})]},ie.id))]})]}),l.jsx(p0,{isOpen:x.isOpen,onClose:x.handleCancel,onConfirm:x.handleConfirm,title:x.title,message:x.message,confirmText:x.confirmText,cancelText:x.cancelText,type:x.type})]})},b9=()=>{const{stockJour:n,equipeMatin:e,equipeSoir:t,ventesJour:r,isLoading:i,chargerStockJour:a,creerStockDepuisProduction:c,mettreAJourStockBoutique:d,commencerEquipeMatin:h,commencerEquipeSoir:f,saisirVenteMatin:p,saisirVenteSoir:x,terminerEquipeMatin:N,terminerEquipeSoir:b,sauvegarderEquipe:E,calculerVentesBoutique:C,sauvegarderVentes:I,chargerEquipe:R,chargerVentes:U}=Cg(),[$,z]=he.useState(""),[ue,ie]=he.useState(""),[V,D]=he.useState(new Date().toISOString().split("T")[0]),k=new Date(V);ru.useEffect(()=>{(async()=>{try{console.log(" Chargement des donnes pour",k.toISOString().split("T")[0]),await a(k),await new Promise(F=>setTimeout(F,100));const L=Cg.getState();!L.stockJour&&!L.isLoading&&await c(k),await R(k,"matin"),await R(k,"soir"),await U(k),console.log(" Toutes les donnes charges")}catch(L){console.error(" Erreur lors du chargement automatique:",L)}})()},[V]);const G=S=>{const L=S?.toLowerCase()||"";return L.includes("baguette")?"mdi:baguette":L.includes("pain")?"mdi:bread-slice":L.includes("croissant")?"mdi:croissant":L.includes("brioche")?"mdi:muffin":L.includes("tarte")?"mdi:pie":L.includes("gateau")||L.includes("gteau")?"mdi:cake":L.includes("sandwich")?"mdi:food":L.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-amber-600 to-orange-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:store",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion Boutique"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Suivi des ventes matin et soir"})]})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:calendar",className:"text-lg text-amber-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Date de service"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("input",{type:"date",value:V,onChange:S=>D(S.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent text-gray-900 font-medium"}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Service boutique pour ",new Date(V).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),!n&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Stock de dpart"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Chargement automatique des produits destins  la boutique"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"text-center py-12",children:i?l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),l.jsx("p",{className:"text-gray-600 font-medium",children:"Chargement du stock de production..."})]}):l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:calendar-clock",className:"text-4xl text-gray-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Stock non disponible"}),l.jsxs("p",{className:"text-gray-500 mb-6",children:["Aucune quantit boutique dfinie pour le ",new Date(V).toLocaleDateString("fr-FR")]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-sm text-gray-700 space-y-1",children:[l.jsx("p",{className:"font-semibold text-blue-800 mb-2",children:"Pour activer la boutique :"}),l.jsx("p",{children:"1. Crez un programme de production"}),l.jsx("p",{children:"2. Ajoutez des quantits  envoyer en boutique"}),l.jsx("p",{children:"3. Le stock apparatra automatiquement ici"})]})]})]})})})]}),n&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:package-check",className:"text-lg text-green-600"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Stock de dpart - ",new Date(n.date).toLocaleDateString("fr-FR")]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[n.produits.length," produit(s) reu(s) de la production"]})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"text-sm text-gray-600",children:["Stock cr le ",n.createdAt.toLocaleString("fr-FR"),n.updatedAt.getTime()!==n.createdAt.getTime()&&l.jsxs("span",{className:"text-blue-600",children:["  Mis  jour le "," ",n.updatedAt.toLocaleString("fr-FR")]})]}),l.jsxs("button",{onClick:()=>d(k),disabled:i,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:[!i&&l.jsx(de,{icon:"mdi:refresh",className:"text-sm"}),i?"Mise  jour...":"Actualiser stock"]})]}),l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0",children:l.jsx(de,{icon:"mdi:information",className:"text-white"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-blue-800 font-semibold mb-1",children:"Actualisation du stock :"}),l.jsx("p",{className:"text-blue-700 text-sm",children:'Si vous avez ajout de nouveaux produits dans le programme de production aprs avoir cr ce stock, cliquez sur "Actualiser stock" pour rcuprer les nouveaux produits.'})]})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.produits.map(S=>l.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4 hover:border-green-300 hover:shadow-md transition-all",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-md",children:l.jsx(de,{icon:G(S.produit?.nom||""),className:"text-xl text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:S.produit?.nom||S.produitId}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg font-bold text-green-600",children:S.stockDebut}),l.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:"pices"})]})]})]})},S.produitId))})]})})]}),n&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:timeline",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Flux Journalier Boutique"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Suivi des quipes matin et soir avec passage de relais"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium ${e?e.statut==="en_cours"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:[l.jsx(de,{icon:"wi:sunrise",className:"text-sm"}),"Matin",e?.statut==="en_cours"&&l.jsx(de,{icon:"mdi:clock-outline",className:"text-sm animate-pulse"}),e?.statut==="termine"&&l.jsx(de,{icon:"mdi:check",className:"text-sm"})]}),l.jsx(de,{icon:"mdi:arrow-right",className:"text-gray-400"}),l.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium ${t?t.statut==="en_cours"?"bg-indigo-100 text-indigo-700":"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:[l.jsx(de,{icon:"wi:sunset",className:"text-sm"}),"Soir",t?.statut==="en_cours"&&l.jsx(de,{icon:"mdi:clock-outline",className:"text-sm animate-pulse"}),t?.statut==="termine"&&l.jsx(de,{icon:"mdi:check",className:"text-sm"})]})]}),r&&l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Journe termine"}),l.jsxs("p",{className:"text-lg font-bold text-green-600",children:[r.produits.reduce((S,L)=>S+L.venduTotal,0)," ventes totales"]})]})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunrise",className:"text-lg text-orange-600"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["quipe Matin - Vendeuse #",e?e.vendeuse:" dfinir"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Service du matin (jusqu' 14h) - Stock initial de la production"})]})]})}),l.jsx("div",{className:"p-6",children:e?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-medium",children:["Vendeuse: ",e.vendeuse]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Statut: ",e.statut==="termine"?l.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-sm"}),"Termin"]}):l.jsxs("span",{className:"flex items-center gap-1 text-orange-600",children:[l.jsx(de,{icon:"mdi:clock-outline",className:"text-sm"}),"En cours"]})]})]}),e.statut==="en_cours"&&l.jsxs("button",{onClick:async()=>{try{N(),await E("matin")}catch(S){console.error("Erreur lors de la sauvegarde matin:",S)}},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Terminer l'quipe matin"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Saisie des ventes matinales"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.produits.map(S=>l.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border border-orange-200 rounded-xl p-4 hover:border-orange-300 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-center shadow-md",children:l.jsx(de,{icon:G(S.produit?.nom||""),className:"text-xl text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:S.produit?.nom||S.produitId}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Stock: ",S.stockDebut," pices"]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Vendu matin:"}),l.jsx("input",{type:"number",min:"0",max:S.stockDebut,value:S.vendu,onChange:L=>p(S.produitId,parseInt(L.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:e.statut==="termine"})]}),l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Reste midi: "}),l.jsxs("span",{className:"font-bold text-blue-600",children:[S.reste," pices"]})]})]})]},S.produitId))})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"text",placeholder:"Entrez le nom de la vendeuse du matin",value:$,onChange:S=>z(S.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),l.jsxs("button",{onClick:()=>{$.trim()&&h($,k)},disabled:!$.trim(),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx(de,{icon:"mdi:play-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Commencer l'quipe matin"})]})]})})]}),e?.statut==="termine"&&!t&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:handshake",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Passage de Relais Matin  Soir"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Transmission du stock restant du matin  l'quipe soir"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-switch",className:"text-white"})}),l.jsxs("h3",{className:"font-semibold text-blue-800 text-lg",children:["Stock transmis par ",e.vendeuse]})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e.produits.map(S=>l.jsxs("div",{className:"bg-white rounded-xl p-4 border border-blue-200 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:G(S.produit?.nom||""),className:"text-white text-sm"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium text-sm text-gray-900",children:S.produit?.nom||S.produitId}),l.jsx("p",{className:"text-xs text-gray-500",children:"Stock pour le soir"})]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-lg font-bold text-blue-600",children:S.reste}),l.jsx("p",{className:"text-xs text-gray-500",children:"pices"})]})]},S.produitId))})]})})]}),e?.statut==="termine"&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunset",className:"text-lg text-indigo-600"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["quipe Soir - Vendeuse #",t?t.vendeuse:" dfinir"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Service du soir (aprs 14h) - Stock = Reste du matin"})]})]})}),l.jsx("div",{className:"p-6",children:t?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-medium",children:["Vendeuse: ",t.vendeuse]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Statut: ",t.statut==="termine"?l.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-sm"}),"Termin"]}):l.jsxs("span",{className:"flex items-center gap-1 text-orange-600",children:[l.jsx(de,{icon:"mdi:clock-outline",className:"text-sm"}),"En cours"]})]})]}),t.statut==="en_cours"&&l.jsxs("button",{onClick:async()=>{try{b(),C(),await E("soir"),await new Promise(S=>setTimeout(S,100)),await I()}catch(S){console.error("Erreur lors de la finalisation:",S)}},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Terminer l'quipe soir"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Saisie des ventes du soir"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.produits.map(S=>l.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-4 hover:border-indigo-300 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-xl flex items-center justify-center shadow-md",children:l.jsx(de,{icon:G(S.produit?.nom||""),className:"text-xl text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:S.produit?.nom||S.produitId}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Stock dbut: ",S.stockDebut," pices"]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Vendu soir:"}),l.jsx("input",{type:"number",min:"0",max:S.stockDebut,value:S.vendu,onChange:L=>x(S.produitId,parseInt(L.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",disabled:t.statut==="termine"})]}),l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Invendu: "}),l.jsxs("span",{className:"font-bold text-red-600",children:[S.reste," pices"]})]})]})]},S.produitId))})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"text",placeholder:"Entrez le nom de la vendeuse du soir",value:ue,onChange:S=>ie(S.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),l.jsxs("button",{onClick:()=>{ue.trim()&&f(ue,k)},disabled:!ue.trim(),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx(de,{icon:"mdi:play-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Commencer l'quipe soir"})]})]})})]}),r&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:chart-timeline",className:"text-lg text-green-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Bilan Journalier - Performance des 2 Vendeuses"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Rcapitulatif complet des ventes matin et soir"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-variant",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:r.produits.reduce((S,L)=>S+L.stockDebut,0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Stock Initial"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:chart-line",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:r.produits.reduce((S,L)=>S+L.venduTotal,0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Vendu"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-down",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:r.produits.reduce((S,L)=>S+L.invenduBoutique,0)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Invendus"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:percent",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-3xl font-bold",children:[Math.round(r.produits.reduce((S,L)=>S+L.venduTotal,0)/r.produits.reduce((S,L)=>S+L.stockDebut,0)*100),"%"]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"taux"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Taux de Vente"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6",children:[l.jsxs("h4",{className:"flex items-center gap-3 font-semibold text-orange-800 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunrise",className:"text-white"})}),e?.vendeuse," - quipe Matin"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Ventes totales :"}),l.jsxs("span",{className:"font-bold text-orange-700",children:[r.produits.reduce((S,L)=>S+L.venduMatin,0)," pcs"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Transmis au soir :"}),l.jsxs("span",{className:"font-medium text-blue-600",children:[r.produits.reduce((S,L)=>S+L.resteMidi,0)," pcs"]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6",children:[l.jsxs("h4",{className:"flex items-center gap-3 font-semibold text-indigo-800 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"wi:sunset",className:"text-white"})}),t?.vendeuse," - quipe Soir"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Ventes totales :"}),l.jsxs("span",{className:"font-bold text-indigo-700",children:[r.produits.reduce((S,L)=>S+L.venduSoir,0)," pcs"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Invendus finaux :"}),l.jsxs("span",{className:"font-medium text-red-600",children:[r.produits.reduce((S,L)=>S+L.invenduBoutique,0)," pcs"]})]})]})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-4 border-b border-gray-200 mb-6",children:[l.jsx(de,{icon:"mdi:table-large",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dtail par produit"})]}),l.jsx("div",{className:"grid gap-4",children:r.produits.map(S=>l.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200 hover:shadow-md transition-all",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-7 gap-4 items-center",children:[l.jsx("div",{className:"md:col-span-1",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-gray-500 to-gray-700 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:G(S.produit?.nom||""),className:"text-white text-sm"})}),l.jsx("span",{className:"font-medium text-gray-900 text-sm",children:S.produit?.nom||S.produitId})]})}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-gray-800",children:S.stockDebut}),l.jsx("div",{className:"text-xs text-gray-500",children:"Stock initial"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-orange-600",children:S.venduMatin}),l.jsx("div",{className:"text-xs text-gray-500",children:"Vendu matin"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-blue-600",children:S.resteMidi}),l.jsx("div",{className:"text-xs text-gray-500",children:"Transmis soir"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-indigo-600",children:S.venduSoir}),l.jsx("div",{className:"text-xs text-gray-500",children:"Vendu soir"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-red-600",children:S.invenduBoutique}),l.jsx("div",{className:"text-xs text-gray-500",children:"Invendu final"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-bold text-green-600",children:S.venduTotal}),l.jsx("div",{className:"text-xs text-gray-500",children:"Total vendu"})]})]})},S.produitId))})]})]})})]})]})]})]})},w9=()=>{const{rapportJour:n,indicateurs:e,historiqueRapports:t,genererRapportJour:r,validerRapport:i,chargerRapport:a,chargerHistorique:c,isLoading:d}=rM(),[h,f]=he.useState(new Date().toISOString().split("T")[0]),[p,x]=he.useState("jour"),N=async()=>{try{console.log(" Dbut gnration rapport pour:",h),await r(new Date(h)),console.log(" Rapport gnr avec succs")}catch(C){console.error(" Erreur lors de la gnration du rapport:",C),alert("Erreur lors de la gnration du rapport: "+C)}},b=()=>{const C=new Date,I=new Date;I.setDate(C.getDate()-7),c(I,C)};he.useEffect(()=>{a(new Date(h))},[h,a]);const E=C=>C>=90?"bg-green-100 text-green-800":C>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:chart-bar",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Rapport Journalier"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Bilan complet des activits de la journe"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:()=>x(p==="jour"?"historique":"jour"),className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx(de,{icon:p==="jour"?"mdi:history":"mdi:calendar-today",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:p==="jour"?"Historique":"Rapport du jour"})]}),p==="jour"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:N,disabled:d,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:cogs",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Gnrer le rapport"})]}),n&&n.statut==="genere"&&l.jsxs("button",{onClick:()=>i(),className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg",children:[l.jsx(de,{icon:"mdi:check-circle",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Valider le rapport"})]})]}),p==="historique"&&l.jsxs("button",{onClick:b,disabled:d,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:download",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Charger les 7 derniers jours"})]})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[p==="jour"&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:calendar",className:"text-lg text-purple-600"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Date du rapport"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("input",{type:"date",value:h,onChange:C=>f(C.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 font-medium"}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Rapport pour ",new Date(h).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),p==="jour"&&e&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:chart-line",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-3xl font-bold",children:[e.tauxVenteGlobal.toFixed(1),"%"]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"global"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Taux de Vente Global"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:account-group",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-3xl font-bold",children:[e.tauxVenteClients.toFixed(1),"%"]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"clients"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Taux Vente Clients"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:storefront",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-3xl font-bold",children:[e.tauxVenteBoutique.toFixed(1),"%"]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"boutique"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Taux Vente Boutique"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:package-down",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:e.pertesTotales}),l.jsx("div",{className:"text-gray-300 text-xs",children:"pices"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Pertes Totales"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:account-cancel",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:e.pertesClients}),l.jsx("div",{className:"text-gray-300 text-xs",children:"clients"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Invendus Clients"})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:storefront-outline",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:e.pertesBoutique}),l.jsx("div",{className:"text-gray-300 text-xs",children:"boutique"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Invendus Boutique"})]})]})]}),p==="historique"&&l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:history",className:"text-lg text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Historique des Rapports"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Rapports des derniers jours"})]})]})}),l.jsx("div",{className:"p-6",children:t.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:file-document-outline",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun rapport trouv"}),l.jsx("p",{className:"text-gray-500 mb-6",children:`Cliquez sur "Charger les 7 derniers jours" pour voir l'historique`})]}):l.jsx("div",{className:"grid gap-4",children:t.map(C=>l.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-xl p-6 hover:border-purple-300 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:file-document",className:"text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:new Date(C.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.statut==="valide"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:C.statut})})]})]}),l.jsx("div",{className:"text-right",children:l.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${E(C.totaux.tauxVenteGlobal)}`,children:[C.totaux.tauxVenteGlobal.toFixed(1),"%"]})})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-gray-800",children:C.totaux.quantiteProduite}),l.jsx("div",{className:"text-xs text-gray-600",children:"Produite"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-green-600",children:C.totaux.quantiteVendueTotal}),l.jsx("div",{className:"text-xs text-gray-600",children:"Vendue"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg font-bold text-red-600",children:C.totaux.pertesTotales}),l.jsx("div",{className:"text-xs text-gray-600",children:"Pertes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[C.totaux.tauxVenteGlobal.toFixed(1),"%"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Taux vente"})]})]})]},C.id))})})]}),p==="jour"&&n?l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:clipboard-list",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Rapport Dtaill par Produit"}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Rapport du ",new Date(n.date).toLocaleDateString("fr-FR")," - Statut: ",n.statut]})]})]})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(de,{icon:"mdi:chart-box",className:"text-gray-600"}),l.jsx("h3",{className:"font-semibold text-gray-800",children:"Totaux de la journe"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:n.totaux.quantitePrevue}),l.jsx("div",{className:"text-sm text-gray-600",children:"Prvu"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.totaux.quantiteProduite}),l.jsx("div",{className:"text-sm text-gray-600",children:"Produite"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.totaux.quantiteVendueTotal}),l.jsx("div",{className:"text-sm text-gray-600",children:"Vendue"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.totaux.invendusTotal}),l.jsx("div",{className:"text-sm text-gray-600",children:"Invendus"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[l.jsx(de,{icon:"mdi:view-grid",className:"text-gray-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Dtail par produit"}),l.jsxs("span",{className:"ml-auto text-sm font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-lg",children:[n.produits.length," produit",n.produits.length>1?"s":""]})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.produits.map(C=>l.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-xl p-6 hover:border-blue-300 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:food-variant",className:"text-white"})}),l.jsx("div",{children:l.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:C.produit?.nom||C.produitId})})]}),l.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E(C.tauxVenteGlobal)}`,children:[C.tauxVenteGlobal.toFixed(1),"%"]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-gray-800",children:C.quantitePrevue}),l.jsx("div",{className:"text-xs text-gray-600",children:"Prvu"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-bold text-blue-600",children:C.quantiteProduite}),l.jsx("div",{className:"text-xs text-gray-600",children:"Produite"})]})]}),l.jsx("div",{className:"border-t border-gray-200 pt-3",children:l.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-bold text-green-600",children:C.quantiteVendueTotal}),l.jsx("div",{className:"text-xs text-gray-600",children:"Total vendu"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-bold text-green-500",children:C.quantiteVendueClients}),l.jsx("div",{className:"text-xs text-gray-600",children:"Clients"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-bold text-green-400",children:C.quantiteVendueBoutique}),l.jsx("div",{className:"text-xs text-gray-600",children:"Boutique"})]})]})}),l.jsxs("div",{className:"bg-red-50 rounded-lg p-3 text-center",children:[l.jsx("div",{className:"text-lg font-bold text-red-600",children:C.invendusTotal}),l.jsx("div",{className:"text-xs text-gray-600",children:"Invendus total"})]})]})]},C.produitId))})]})]})]}):p==="jour"&&l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(de,{icon:"mdi:chart-bar",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun rapport gnr"}),l.jsx("p",{className:"text-gray-500 mb-6",children:'Cliquez sur "Gnrer le rapport" pour crer le rapport de la journe'}),l.jsxs("button",{onClick:N,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:cogs",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Gnrer le rapport"})]})]})})})]})]})},_9=({produit:n,onSave:e,onCancel:t,isLoading:r=!1})=>{const{matieres:i,chargerDonnees:a}=Al(),[c,d]=he.useState({nom:"",prixClient:0,prixBoutique:0,active:!0,recette:[]});he.useEffect(()=>{a()},[]);const[h,f]=he.useState({matiereId:"",quantite:""});he.useEffect(()=>{n&&d({nom:n.nom,prixClient:n.prixClient||0,prixBoutique:n.prixBoutique||0,active:n.active,recette:n.recette||[]})},[n]);const p=()=>{if(h.matiereId&&h.quantite){const b=c.recette.findIndex(C=>C.matiereId===h.matiereId);let E=[...c.recette];b>=0?E[b].quantite=Number(h.quantite):E.push({matiereId:h.matiereId,quantite:Number(h.quantite)}),d({...c,recette:E}),f({matiereId:"",quantite:""})}},x=b=>{const E=[...c.recette];E.splice(b,1),d({...c,recette:E})},N=async b=>{b.preventDefault();try{const E={nom:c.nom,prixClient:c.prixClient,prixBoutique:c.prixBoutique,active:c.active,recette:c.recette,description:"",unite:"piece",prixUnitaire:c.prixBoutique};await e(E),n||d({nom:"",prixClient:0,prixBoutique:0,active:!0,recette:[]})}catch(E){console.error("Erreur lors de la sauvegarde:",E)}};return l.jsx(nd,{title:n?"Modifier le produit":"Ajouter un produit",subtitle:"Remplissez les informations du produit",children:l.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-medium text-gray-900 border-b pb-2",children:"Informations Gnrales"}),l.jsx(ir,{label:"Nom du produit *",value:c.nom,onChange:b=>d({...c,nom:b.target.value}),placeholder:"ex: Pain de campagne",required:!0}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(ir,{label:"Prix client (FCFA) *",type:"number",step:"1",min:"0",value:c.prixClient,onChange:b=>d({...c,prixClient:parseFloat(b.target.value)||0}),placeholder:"0",required:!0}),l.jsx(ir,{label:"Prix boutique (FCFA) *",type:"number",step:"1",min:"0",value:c.prixBoutique,onChange:b=>d({...c,prixBoutique:parseFloat(b.target.value)||0}),placeholder:"0",required:!0})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"active",type:"checkbox",checked:c.active,onChange:b=>d({...c,active:b.target.checked}),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Produit actif (visible pour la production)"})]})]}),l.jsxs("div",{className:"space-y-4 pt-2",children:[l.jsxs("h4",{className:"font-medium text-gray-900 border-b pb-2 flex items-center justify-between",children:[l.jsx("span",{children:"Recette Technique (Ingrdients)"}),l.jsx("span",{className:"text-xs text-gray-500 font-normal",children:"Optionnel"})]}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3 items-end",children:[l.jsxs("div",{className:"md:col-span-1",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Matire Premire"}),l.jsxs("select",{value:h.matiereId,onChange:b=>f({...h,matiereId:b.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-orange-500 outline-none",children:[l.jsx("option",{value:"",children:"Choisir un ingrdient..."}),i.map(b=>l.jsxs("option",{value:b.id,children:[b.nom," (",b.unite,")"]},b.id))]})]}),l.jsxs("div",{className:"md:col-span-1",children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Quantit par unit"}),l.jsx("input",{type:"number",step:"0.001",min:"0",placeholder:"Ex: 0.250",value:h.quantite,onChange:b=>f({...h,quantite:parseFloat(b.target.value)||""}),className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-orange-500 outline-none"})]}),l.jsx("div",{className:"md:col-span-1",children:l.jsxs("button",{type:"button",onClick:p,disabled:!h.matiereId||!h.quantite,className:"w-full py-2 px-3 bg-gray-800 text-white text-sm rounded-md hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[l.jsx(de,{icon:"mdi:plus-circle"}),"Ajouter"]})})]}),c.recette.length>0?l.jsx("div",{className:"space-y-2 mt-4 max-h-40 overflow-y-auto",children:c.recette.map((b,E)=>{const C=i.find(I=>I.id===b.matiereId);return l.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border border-gray-200 shadow-sm",children:[l.jsx("span",{className:"text-sm font-medium text-gray-800",children:C?C.nom:"Matire inconnue"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-sm text-gray-600 font-mono bg-gray-100 px-2 py-0.5 rounded",children:[b.quantite," ",C?.unite]}),l.jsx("button",{type:"button",onClick:()=>x(E),className:"text-red-500 hover:text-red-700 p-1",children:l.jsx(de,{icon:"mdi:close",className:"text-lg"})})]})]},E)})}):l.jsx("div",{className:"text-center py-4 text-gray-400 text-sm italic",children:"Aucun ingrdient dfini pour cette recette."})]}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Dfinissez la quantit ncessaire pour fabriquer ",l.jsx("b",{children:"1 seule pice"})," de ce produit."]})]}),c.recette.length>0&&l.jsxs("div",{className:"space-y-4 pt-2 border-t border-gray-100",children:[l.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:finance",className:"text-orange-600"}),"Analyse de Rentabilit (Estime)"]}),l.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-xs space-y-4",children:(()=>{const b=c.recette.reduce((U,$)=>{const z=i.find(ue=>ue.id===$.matiereId);return U+$.quantite*(z?.prixMoyenPondere||0)},0),E=c.prixBoutique-b,C=c.prixBoutique>0?E/c.prixBoutique*100:0,I=c.prixClient-b,R=c.prixClient>0?I/c.prixClient*100:0;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[l.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Cot de Revient Matires"}),l.jsxs("span",{className:"font-bold text-gray-900",children:[Math.round(b).toLocaleString()," FCFA"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-3 border rounded-md border-gray-100",children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Marge Boutique"}),l.jsxs("div",{className:"flex items-end justify-between",children:[l.jsxs("span",{className:`text-xl font-bold ${E>=0?"text-green-600":"text-red-600"}`,children:[Math.round(E).toLocaleString()," FCFA"]}),l.jsxs("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${C>=50?"bg-green-100 text-green-700":C>=30?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:[C.toFixed(1),"%"]})]})]}),l.jsxs("div",{className:"p-3 border rounded-md border-gray-100",children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Marge Client"}),l.jsxs("div",{className:"flex items-end justify-between",children:[l.jsxs("span",{className:`text-xl font-bold ${I>=0?"text-blue-600":"text-red-600"}`,children:[Math.round(I).toLocaleString()," FCFA"]}),l.jsxs("span",{className:`text-sm font-medium px-2 py-0.5 rounded ${R>=50?"bg-blue-100 text-blue-700":R>=30?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:[R.toFixed(1),"%"]})]})]})]})]})})()})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-100",children:[l.jsx(Ur,{type:"button",variant:"outline",onClick:t,children:"Annuler"}),l.jsx(Ur,{type:"submit",isLoading:r,disabled:!c.nom.trim()||c.prixClient<=0||c.prixBoutique<=0,children:n?"Enregistrer les modifications":"Crer le produit"})]})]})})},N9=()=>{const{produits:n,produitEnEdition:e,isLoadingProduits:t,chargerProduits:r,ajouterProduit:i,modifierProduit:a,supprimerProduit:c,setProduitEnEdition:d}=yu(),[h,f]=he.useState(!1),{chargerDonnees:p}=Al();he.useEffect(()=>{r(),p()},[r,p]);const x=async R=>{await i(R),f(!1)},N=async R=>{e&&(await a(e.id,R),d(null),f(!1))},b=async R=>{window.confirm(`tes-vous sr de vouloir supprimer "${R.nom}" ?`)&&await c(R.id)},E=()=>{d(null),f(!1)},C=R=>{d(R),f(!0)},I=R=>{const U=R?.toLowerCase()||"";return U.includes("baguette")?"mdi:baguette":U.includes("pain")?"mdi:bread-slice":U.includes("croissant")?"mdi:croissant":U.includes("brioche")?"mdi:muffin":U.includes("tarte")?"mdi:pie":U.includes("gateau")||U.includes("gteau")?"mdi:cake":U.includes("sandwich")?"mdi:food":U.includes("viennoiserie")?"mdi:pretzel":"mdi:food-variant"};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-600 to-red-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:bread-slice",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Produits"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grez votre catalogue de produits de boulangerie"})]})]}),l.jsxs("button",{onClick:()=>f(!0),disabled:h,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouveau produit"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[h&&l.jsx(_9,{produit:e,onSave:e?N:x,onCancel:E,isLoading:t}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:format-list-bulleted",className:"text-lg text-orange-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Catalogue produits"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," produit(s) enregistr(s)"]})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium",children:n.filter(R=>R.active).length})," actifs",l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium",children:n.filter(R=>!R.active).length})," inactifs"]})})]})}),l.jsx("div",{className:"p-6",children:t?l.jsx(Ox,{message:"Chargement des produits..."}):n.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(de,{icon:"mdi:bread-slice-outline",className:"text-4xl text-orange-500"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Aucun produit enregistr"}),l.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Commencez par ajouter vos premiers produits de boulangerie pour constituer votre catalogue"}),l.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter le premier produit"})]})]}):l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:n.map(R=>l.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-2xl p-6 hover:border-orange-300 hover:shadow-2xl transition-all duration-300 group",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx(de,{icon:I(R.nom),className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-1",children:R.nom}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full ${R.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.jsx(de,{icon:R.active?"mdi:check-circle":"mdi:pause-circle",className:"text-xs"}),R.active?"Actif":"Inactif"]})})]})]})}),l.jsx("div",{className:"space-y-3 mb-6",children:l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(de,{icon:"mdi:account-group",className:"text-blue-500 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Prix Client"})]}),l.jsx("div",{className:"text-xl font-bold text-blue-800",children:R.prixClient?`${R.prixClient.toLocaleString("fr-FR")} F`:"Non dfini"})]}),l.jsxs("div",{className:"bg-purple-50 rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(de,{icon:"mdi:storefront",className:"text-purple-500 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-purple-700",children:"Prix Boutique"})]}),l.jsx("div",{className:"text-xl font-bold text-purple-800",children:R.prixBoutique?`${R.prixBoutique.toLocaleString("fr-FR")} F`:"Non dfini"})]})]})}),(()=>{const{matieres:U}=Al.getState();if(!R.recette||R.recette.length===0)return null;const $=R.recette.reduce((ie,V)=>{const D=U.find(k=>k.id===V.matiereId);return ie+V.quantite*(D?.prixMoyenPondere||0)},0),z=R.prixBoutique?R.prixBoutique-$:0,ue=R.prixBoutique?z/R.prixBoutique*100:0;return l.jsxs("div",{className:"mb-4 bg-gray-50 rounded-lg p-2 flex items-center justify-between border border-gray-100",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(de,{icon:"mdi:finance",className:"text-orange-500 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Marge Est."})]}),l.jsxs("div",{className:`text-sm font-bold ${ue>=50?"text-green-600":ue>=30?"text-orange-600":"text-red-600"}`,children:[Math.round(z).toLocaleString()," F ",l.jsxs("span",{className:"text-xs font-normal opacity-80",children:["(",ue.toFixed(0),"%)"]})]})]})})(),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>C(R),disabled:h,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-orange-600 hover:text-orange-700 bg-orange-50 hover:bg-orange-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:pencil",className:"text-lg"}),l.jsx("span",{children:"Modifier"})]}),l.jsx("button",{onClick:()=>b(R),disabled:t,className:"flex items-center justify-center gap-2 px-4 py-2 text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50",children:l.jsx(de,{icon:"mdi:delete-outline",className:"text-lg"})})]})]},R.id))})})]})]})]})},A9=({client:n,onSave:e,onCancel:t,isLoading:r=!1})=>{const{chargerLivreurs:i,getLivreursActifs:a}=g0(),[c,d]=he.useState({nom:"",adresse:"",telephone:"",email:"",typeClient:"client",livreurId:"",conditionsPaiement:"",eligibleRistourne:!1,active:!0});he.useEffect(()=>{i().catch(console.error)},[i]),he.useEffect(()=>{n&&d({nom:n.nom,adresse:n.adresse,telephone:n.telephone||"",email:n.email||"",typeClient:n.typeClient,livreurId:n.livreurId||"",conditionsPaiement:n.conditionsPaiement||"",eligibleRistourne:n.eligibleRistourne||!1,active:n.active})},[n]);const h=async f=>{f.preventDefault();try{await e(c),n||d({nom:"",adresse:"",telephone:"",email:"",typeClient:"client",livreurId:"",conditionsPaiement:"",eligibleRistourne:!1,active:!0})}catch(p){console.error("Erreur lors de la sauvegarde:",p)}};return l.jsx(nd,{title:n?"Modifier le client":"Ajouter un client",subtitle:"Remplissez les informations du client",children:l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsx(ir,{label:"Nom du client *",value:c.nom,onChange:f=>d({...c,nom:f.target.value}),placeholder:"ex: Restaurant Central",required:!0}),l.jsx(ir,{label:"Adresse *",value:c.adresse,onChange:f=>d({...c,adresse:f.target.value}),placeholder:"Adresse complte",required:!0}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(ir,{label:"Tlphone",value:c.telephone,onChange:f=>d({...c,telephone:f.target.value}),placeholder:"ex: +221 33 123 45 67"}),l.jsx(ir,{label:"Email",type:"email",value:c.email,onChange:f=>d({...c,email:f.target.value}),placeholder:"ex: contact@restaurant.sn"})]}),l.jsx(ir,{label:"Conditions de paiement",value:c.conditionsPaiement,onChange:f=>d({...c,conditionsPaiement:f.target.value}),placeholder:"ex: Payable  15 jours, Comptant, Fin de mois"}),l.jsx("p",{className:"text-xs text-gray-500 -mt-3",children:"Conditions spcifiques  ce client. Si vide, les conditions par dfaut seront utilises."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de client *"}),l.jsxs("select",{value:c.typeClient,onChange:f=>d({...c,typeClient:f.target.value}),className:"block w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-orange-500 focus:ring-1 sm:text-sm transition-colors bg-white",required:!0,children:[l.jsx("option",{value:"client",children:"Client (prix rduit)"}),l.jsx("option",{value:"boutique",children:"Boutique (prix normal)"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dfinit le type de tarification"}),c.typeClient==="boutique"&&l.jsxs("div",{className:"mt-3 flex items-start",children:[l.jsx("div",{className:"flex items-center h-5",children:l.jsx("input",{id:"eligibleRistourne",type:"checkbox",checked:c.eligibleRistourne,onChange:f=>d({...c,eligibleRistourne:f.target.checked}),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"})}),l.jsxs("div",{className:"ml-3 text-sm",children:[l.jsx("label",{htmlFor:"eligibleRistourne",className:"font-medium text-gray-700",children:"ligible  la Ristourne (Cashback)"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Le client paie le prix boutique, mais cumule la diffrence avec le prix client."})]})]})]}),l.jsxs("div",{children:[l.jsx(Eh,{label:"Livreur assign",value:c.livreurId,onChange:f=>d({...c,livreurId:f.target.value}),options:[{value:"",label:"Aucun livreur ( assigner plus tard)"},...a().map(f=>({value:f.id,label:`${f.nom} ${f.vehicule?`(${f.vehicule})`:""}`}))]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Livreur responsable des livraisons de ce client"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"active",type:"checkbox",checked:c.active,onChange:f=>d({...c,active:f.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Client actif"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(Ur,{type:"button",variant:"outline",onClick:t,children:"Annuler"}),l.jsx(Ur,{type:"submit",isLoading:r,disabled:!c.nom.trim()||!c.adresse.trim(),children:n?"Modifier":"Ajouter"})]})]})})},S9=()=>{const{clients:n,clientEnEdition:e,isLoadingClients:t,chargerClients:r,ajouterClient:i,modifierClient:a,supprimerClient:c,setClientEnEdition:d}=yu(),{chargerLivreurs:h,getLivreurById:f}=g0(),[p,x]=he.useState(!1);he.useEffect(()=>{r(),h()},[r,h]);const N=async U=>{await i(U),x(!1)},b=async U=>{e&&(await a(e.id,U),d(null),x(!1))},E=async U=>{window.confirm(`tes-vous sr de vouloir supprimer "${U.nom}" ?`)&&await c(U.id)},C=()=>{d(null),x(!1)},I=U=>{d(U),x(!0)},R=U=>U==="client"?"Client (prix rduit)":"Boutique (prix normal)";return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account-group",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Clients"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grez votre base de clients et dfinissez les types de tarification"})]})]}),l.jsxs("button",{onClick:()=>x(!0),disabled:p,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouveau client"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[p&&l.jsx(A9,{client:e,onSave:e?b:N,onCancel:C,isLoading:t}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:format-list-bulleted",className:"text-lg text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Liste des clients"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," client(s) enregistr(s)"]})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium",children:n.filter(U=>U.active).length})," actifs",l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium",children:n.filter(U=>!U.active).length})," inactifs"]})})]})}),l.jsx("div",{className:"p-6",children:t?l.jsx(Ox,{message:"Chargement des clients..."}):n.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(de,{icon:"mdi:account-group-outline",className:"text-4xl text-gray-400"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Aucun client enregistr"}),l.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Commencez par ajouter vos premiers clients pour grer votre base de donnes client"}),l.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter le premier client"})]})]}):l.jsx("div",{className:"grid gap-6 lg:grid-cols-2 xl:grid-cols-3",children:n.map(U=>{const $=U.livreurId?f(U.livreurId):null;return l.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-2xl p-6 hover:border-blue-300 hover:shadow-2xl transition-all duration-300 group",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx(de,{icon:"mdi:account",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-1",children:U.nom}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 text-xs font-semibold rounded-full ${U.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.jsx(de,{icon:U.active?"mdi:check-circle":"mdi:pause-circle",className:"text-xs"}),U.active?"Actif":"Inactif"]})})]})]})}),l.jsxs("div",{className:"space-y-3 mb-6",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(de,{icon:"mdi:map-marker",className:"text-gray-400 mt-0.5"}),l.jsx("span",{className:"text-sm text-gray-700",children:U.adresse})]}),U.telephone&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:phone",className:"text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-700",children:U.telephone})]}),U.email&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:email",className:"text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-700",children:U.email})]})]}),l.jsx("div",{className:"grid grid-cols-1 gap-3 mb-6",children:l.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(de,{icon:"mdi:tag",className:"text-gray-500 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Type de client"})]}),l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-lg ${U.typeClient==="client"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:[l.jsx(de,{icon:U.typeClient==="client"?"mdi:account-heart":"mdi:storefront",className:"text-xs"}),R(U.typeClient)]})]})}),$?l.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-3 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(de,{icon:"mdi:truck-delivery",className:"text-green-600 text-sm"}),l.jsx("span",{className:"text-xs font-medium text-green-700",children:"Livreur assign"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:account",className:"text-white text-xs"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-green-800",children:$.nom}),$.vehicule&&l.jsx("div",{className:"text-xs text-green-600",children:$.vehicule})]})]})]}):l.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-6",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:alert",className:"text-amber-600"}),l.jsx("span",{className:"text-sm text-amber-700 font-medium",children:"Aucun livreur assign"})]})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>I(U),disabled:p,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-blue-600 hover:text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50",children:[l.jsx(de,{icon:"mdi:pencil",className:"text-lg"}),l.jsx("span",{children:"Modifier"})]}),l.jsx("button",{onClick:()=>E(U),disabled:t,className:"flex items-center justify-center gap-2 px-4 py-2 text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md disabled:opacity-50",children:l.jsx(de,{icon:"mdi:delete-outline",className:"text-lg"})})]})]},U.id)})})})]})]})]})},E9=({livreur:n,onSave:e,onCancel:t,isLoading:r=!1})=>{const[i,a]=he.useState({nom:"",telephone:"",vehicule:"",active:!0});he.useEffect(()=>{n&&a({nom:n.nom,telephone:n.telephone||"",vehicule:n.vehicule||"",active:n.active})},[n]);const c=async d=>{d.preventDefault();try{await e(i),n||a({nom:"",telephone:"",vehicule:"",active:!0})}catch(h){console.error("Erreur lors de la sauvegarde:",h)}};return l.jsx(nd,{title:n?"Modifier le livreur":"Ajouter un livreur",subtitle:"Remplissez les informations du livreur",children:l.jsxs("form",{onSubmit:c,className:"space-y-4",children:[l.jsx(ir,{label:"Nom du livreur *",value:i.nom,onChange:d=>a({...i,nom:d.target.value}),placeholder:"ex: Jean Dupont",required:!0}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(ir,{label:"Tlphone",value:i.telephone,onChange:d=>a({...i,telephone:d.target.value}),placeholder:"ex: +226 70 12 34 56"}),l.jsx(ir,{label:"Vhicule / Plaque",value:i.vehicule,onChange:d=>a({...i,vehicule:d.target.value}),placeholder:"ex: Moto 125cc - AB123CD"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"active",type:"checkbox",checked:i.active,onChange:d=>a({...i,active:d.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-900",children:"Livreur actif"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(Ur,{type:"button",variant:"outline",onClick:t,children:"Annuler"}),l.jsx(Ur,{type:"submit",isLoading:r,disabled:!i.nom.trim(),children:n?"Modifier":"Ajouter"})]})]})})},j9=()=>{const{livreurs:n,livreurEnEdition:e,isLoadingLivreurs:t,chargerLivreurs:r,ajouterLivreur:i,modifierLivreur:a,supprimerLivreur:c,setLivreurEnEdition:d}=g0(),[h,f]=he.useState(!1);he.useEffect(()=>{r()},[r]);const p=async I=>{await i(I),f(!1)},x=async I=>{e&&(await a(e.id,I),d(null),f(!1))},N=async I=>{window.confirm(`tes-vous sr de vouloir supprimer "${I.nom}" ?`)&&await c(I.id)},b=()=>{d(null),f(!1)},E=I=>{d(I),f(!0)},C=()=>{d(null),f(!0)};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:truck-delivery",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Livreurs"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grez les livreurs et leurs assignations clients"})]})]}),l.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Nouveau livreur"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[h&&l.jsx(E9,{livreur:e,onSave:e?x:p,onCancel:b,isLoading:t}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:format-list-bulleted",className:"text-lg text-green-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"quipe de livraison"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," livreur(s) enregistr(s)"]})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium",children:n.filter(I=>I.active).length})," actifs",l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium",children:n.filter(I=>!I.active).length})," inactifs"]})})]})}),l.jsx("div",{className:"p-6",children:n.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(de,{icon:"mdi:truck-delivery-outline",className:"text-4xl text-green-500"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Aucun livreur enregistr"}),l.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Commencez par ajouter vos livreurs pour organiser et grer les livraisons"}),l.jsxs("button",{onClick:C,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md",children:[l.jsx(de,{icon:"mdi:plus",className:"text-lg"}),l.jsx("span",{className:"font-medium",children:"Ajouter le premier livreur"})]})]}):l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(I=>l.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-2xl p-6 hover:border-green-300 hover:shadow-2xl transition-all duration-300 group",children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:l.jsx("span",{className:"text-white font-bold text-xl",children:I.nom.charAt(0).toUpperCase()})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-1",children:I.nom}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 text-xs font-semibold rounded-full ${I.active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.jsx(de,{icon:I.active?"mdi:check-circle":"mdi:pause-circle",className:"text-xs"}),I.active?"Actif":"Inactif"]})})]})]})}),l.jsxs("div",{className:"space-y-3 mb-6",children:[I.telephone&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:phone",className:"text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-700",children:I.telephone})]}),I.vehicule&&l.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:car",className:"text-green-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium text-green-700 mb-1",children:"Vhicule"}),l.jsx("div",{className:"font-semibold text-green-800",children:I.vehicule})]})]})})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>E(I),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-green-600 hover:text-green-700 bg-green-50 hover:bg-green-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md",children:[l.jsx(de,{icon:"mdi:pencil",className:"text-lg"}),l.jsx("span",{children:"Modifier"})]}),l.jsx("button",{onClick:()=>N(I),className:"flex items-center justify-center gap-2 px-4 py-2 text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 rounded-xl transition-all font-medium shadow-sm hover:shadow-md",children:l.jsx(de,{icon:"mdi:delete-outline",className:"text-lg"})})]})]},I.id))})})]})]})]})},T9={apiKey:"AIzaSyBwaC_ySezVpfv9y9xHNromiTW77qJQlmA",authDomain:"boulangerie-da431.firebaseapp.com",projectId:"boulangerie-da431",storageBucket:"boulangerie-da431.firebasestorage.app",messagingSenderId:"324942492234",appId:"1:324942492234:web:afbc851e38b557a87f2cb3",measurementId:"G-3E7K2Y6N31"},C9=()=>{const[n,e]=he.useState([]),[t,r]=he.useState(!1),[i,a]=he.useState({email:"",password:"",nom:"",prenom:"",role:"livreur"}),[c,d]=he.useState(!1),[h,f]=he.useState(null);he.useEffect(()=>{p()},[]);const p=async()=>{try{const E=Pa(Hn(bt,"users")),I=(await ha(E)).docs.map(R=>({id:R.id,...R.data()}));e(I)}catch(E){console.error("Error fetching users:",E)}},x=E=>{E?(f(E),a({email:E.email,password:"",nom:E.nom,prenom:E.prenom,role:E.role})):(f(null),a({email:"",password:"",nom:"",prenom:"",role:"livreur"})),r(!0)},N=async()=>{d(!0);try{if(h){const E=Tn(bt,"users",h.id);await fa(E,{...h,nom:i.nom,prenom:i.prenom,role:i.role,updatedAt:new Date},{merge:!0}),Pt.success("Utilisateur modifi avec succs")}else{const E=ky(T9,"Secondary"),C=uA(E),R=(await XR(C,i.email,i.password)).user;await eL(R,{displayName:`${i.nom} ${i.prenom}`}),await fa(Tn(bt,"users",R.uid),{email:i.email,nom:i.nom,prenom:i.prenom,role:i.role,active:!0,createdAt:new Date,updatedAt:new Date}),Pt.success("Utilisateur cr avec succs")}r(!1),f(null),a({email:"",password:"",nom:"",prenom:"",role:"livreur"}),p()}catch(E){console.error("Error saving user:",E),Pt.error(`Erreur: ${E.message}`)}finally{d(!1)}},b=async E=>{if(window.confirm("tes-vous sr de vouloir supprimer cet utilisateur ?"))try{await c0(Tn(bt,"users",E)),Pt.success("Utilisateur supprim (Firestore uniquement)"),p()}catch{Pt.error("Erreur lors de la suppression")}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Utilisateurs"}),l.jsxs(Ur,{onClick:()=>x(),children:[l.jsx(de,{icon:"mdi:account-plus",className:"mr-2"}),"Nouvel Utilisateur"]})]}),l.jsx(nd,{children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Utilisateur"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rle"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(E=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[E.nom," ",E.prenom]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E.role==="admin"?"bg-purple-100 text-purple-800":E.role==="livreur"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:E.role})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[l.jsx("button",{onClick:()=>x(E),className:"text-blue-600 hover:text-blue-900 mr-3",title:"Modifier",children:l.jsx(de,{icon:"mdi:pencil",className:"text-xl"})}),l.jsx("button",{onClick:()=>b(E.id),className:"text-red-600 hover:text-red-900",title:"Supprimer",children:l.jsx(de,{icon:"mdi:trash-can",className:"text-xl"})})]})]},E.id))})]})})}),l.jsx(Yu,{isOpen:t,onClose:()=>r(!1),title:h?"Modifier l'utilisateur":"Ajouter un utilisateur",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(ir,{label:"Nom",value:i.nom,onChange:E=>a({...i,nom:E.target.value})}),l.jsx(ir,{label:"Prnom",value:i.prenom,onChange:E=>a({...i,prenom:E.target.value})})]}),l.jsx(ir,{label:"Email",type:"email",value:i.email,onChange:E=>a({...i,email:E.target.value}),disabled:!!h,className:h?"bg-gray-100":""}),!h&&l.jsx(ir,{label:"Mot de passe",type:"password",value:i.password,onChange:E=>a({...i,password:E.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rle"}),l.jsxs("select",{value:i.role,onChange:E=>a({...i,role:E.target.value}),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500",children:[l.jsx("option",{value:"admin",children:"Administrateur"}),l.jsx("option",{value:"livreur",children:"Livreur"}),l.jsx("option",{value:"boulanger",children:"Boulanger"}),l.jsx("option",{value:"vendeuse",children:"Vendeuse"}),l.jsx("option",{value:"gestionnaire",children:"Gestionnaire"})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx(Ur,{onClick:N,isLoading:c,children:h?"Enregistrer les modifications":"Crer l'utilisateur"})})]})})]})},Ra=n=>`${Math.round(n).toLocaleString("fr-FR")} FCFA`,Ef=n=>`${Math.round(n)} FCFA`,I9="modulepreload",R9=function(n){return"/"+n},b_={},tv=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");i=h(t.map(f=>{if(f=R9(f),f in b_)return;b_[f]=!0;const p=f.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${x}`))return;const N=document.createElement("link");if(N.rel=p?"stylesheet":I9,p||(N.as="script"),N.crossOrigin="",N.href=f,d&&N.setAttribute("nonce",d),document.head.appendChild(N),p)return new Promise((b,E)=>{N.addEventListener("load",b),N.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};function nr(n){"@babel/helpers - typeof";return nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(n)}var Fo=Uint8Array,Da=Uint16Array,qx=Int32Array,Vx=new Fo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ux=new Fo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),w_=new Fo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),j3=function(n,e){for(var t=new Da(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new qx(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return{b:t,r:i}},T3=j3(Vx,2),L9=T3.b,cy=T3.r;L9[28]=258,cy[258]=28;var k9=j3(Ux,0),__=k9.r,uy=new Da(32768);for(var Sr=0;Sr<32768;++Sr){var Kc=(Sr&43690)>>1|(Sr&21845)<<1;Kc=(Kc&52428)>>2|(Kc&13107)<<2,Kc=(Kc&61680)>>4|(Kc&3855)<<4,uy[Sr]=((Kc&65280)>>8|(Kc&255)<<8)>>1}var zf=(function(n,e,t){for(var r=n.length,i=0,a=new Da(e);i<r;++i)n[i]&&++a[n[i]-1];var c=new Da(e);for(i=1;i<e;++i)c[i]=c[i-1]+a[i-1]<<1;var d;if(t){d=new Da(1<<e);var h=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],p=e-n[i],x=c[n[i]-1]++<<p,N=x|(1<<p)-1;x<=N;++x)d[uy[x]>>h]=f}else for(d=new Da(r),i=0;i<r;++i)n[i]&&(d[i]=uy[c[n[i]-1]++]>>15-n[i]);return d}),rd=new Fo(288);for(var Sr=0;Sr<144;++Sr)rd[Sr]=8;for(var Sr=144;Sr<256;++Sr)rd[Sr]=9;for(var Sr=256;Sr<280;++Sr)rd[Sr]=7;for(var Sr=280;Sr<288;++Sr)rd[Sr]=8;var Rg=new Fo(32);for(var Sr=0;Sr<32;++Sr)Rg[Sr]=5;var P9=zf(rd,9,0),D9=zf(Rg,5,0),C3=function(n){return(n+7)/8|0},M9=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Fo(n.subarray(e,t))},ec=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},jf=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},nv=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,a=t.slice();if(!i)return{t:R3,l:0};if(i==1){var c=new Fo(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(ue,ie){return ue.f-ie.f}),t.push({s:-1,f:25001});var d=t[0],h=t[1],f=0,p=1,x=2;for(t[0]={s:-1,f:d.f+h.f,l:d,r:h};p!=i-1;)d=t[t[f].f<t[x].f?f++:x++],h=t[f!=p&&t[f].f<t[x].f?f++:x++],t[p++]={s:-1,f:d.f+h.f,l:d,r:h};for(var N=a[0].s,r=1;r<i;++r)a[r].s>N&&(N=a[r].s);var b=new Da(N+1),E=dy(t[p-1],b,0);if(E>e){var r=0,C=0,I=E-e,R=1<<I;for(a.sort(function(ie,V){return b[V.s]-b[ie.s]||ie.f-V.f});r<i;++r){var U=a[r].s;if(b[U]>e)C+=R-(1<<E-b[U]),b[U]=e;else break}for(C>>=I;C>0;){var $=a[r].s;b[$]<e?C-=1<<e-b[$]++-1:++r}for(;r>=0&&C;--r){var z=a[r].s;b[z]==e&&(--b[z],++C)}E=e}return{t:new Fo(b),l:E}},dy=function(n,e,t){return n.s==-1?Math.max(dy(n.l,e,t+1),dy(n.r,e,t+1)):e[n.s]=t},N_=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Da(++e),r=0,i=n[0],a=1,c=function(h){t[r++]=h},d=1;d<=e;++d)if(n[d]==i&&d!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)c(32754);a>2&&(c(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(c(i),--a;a>6;a-=6)c(8304);a>2&&(c(a-3<<5|8208),a=0)}for(;a--;)c(i);a=1,i=n[d]}return{c:t.subarray(0,r),n:e}},Tf=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},I3=function(n,e,t){var r=t.length,i=C3(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var a=0;a<r;++a)n[i+a+4]=t[a];return(i+4+r)*8},A_=function(n,e,t,r,i,a,c,d,h,f,p){ec(e,p++,t),++i[256];for(var x=nv(i,15),N=x.t,b=x.l,E=nv(a,15),C=E.t,I=E.l,R=N_(N),U=R.c,$=R.n,z=N_(C),ue=z.c,ie=z.n,V=new Da(19),D=0;D<U.length;++D)++V[U[D]&31];for(var D=0;D<ue.length;++D)++V[ue[D]&31];for(var k=nv(V,7),G=k.t,S=k.l,L=19;L>4&&!G[w_[L-1]];--L);var F=f+5<<3,se=Tf(i,rd)+Tf(a,Rg)+c,ye=Tf(i,N)+Tf(a,C)+c+14+3*L+Tf(V,G)+2*V[16]+3*V[17]+7*V[18];if(h>=0&&F<=se&&F<=ye)return I3(e,p,n.subarray(h,h+f));var Q,ce,me,Se;if(ec(e,p,1+(ye<se)),p+=2,ye<se){Q=zf(N,b,0),ce=N,me=zf(C,I,0),Se=C;var Fe=zf(G,S,0);ec(e,p,$-257),ec(e,p+5,ie-1),ec(e,p+10,L-4),p+=14;for(var D=0;D<L;++D)ec(e,p+3*D,G[w_[D]]);p+=3*L;for(var X=[U,ue],q=0;q<2;++q)for(var J=X[q],D=0;D<J.length;++D){var re=J[D]&31;ec(e,p,Fe[re]),p+=G[re],re>15&&(ec(e,p,J[D]>>5&127),p+=J[D]>>12)}}else Q=P9,ce=rd,me=D9,Se=Rg;for(var D=0;D<d;++D){var fe=r[D];if(fe>255){var re=fe>>18&31;jf(e,p,Q[re+257]),p+=ce[re+257],re>7&&(ec(e,p,fe>>23&31),p+=Vx[re]);var pe=fe&31;jf(e,p,me[pe]),p+=Se[pe],pe>3&&(jf(e,p,fe>>5&8191),p+=Ux[pe])}else jf(e,p,Q[fe]),p+=ce[fe]}return jf(e,p,Q[256]),p+ce[256]},O9=new qx([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),R3=new Fo(0),F9=function(n,e,t,r,i,a){var c=a.z||n.length,d=new Fo(r+c+5*(1+Math.ceil(c/7e3))+i),h=d.subarray(r,d.length-i),f=a.l,p=(a.r||0)&7;if(e){p&&(h[0]=a.r>>3);for(var x=O9[e-1],N=x>>13,b=x&8191,E=(1<<t)-1,C=a.p||new Da(32768),I=a.h||new Da(E+1),R=Math.ceil(t/3),U=2*R,$=function(Be){return(n[Be]^n[Be+1]<<R^n[Be+2]<<U)&E},z=new qx(25e3),ue=new Da(288),ie=new Da(32),V=0,D=0,k=a.i||0,G=0,S=a.w||0,L=0;k+2<c;++k){var F=$(k),se=k&32767,ye=I[F];if(C[se]=ye,I[F]=se,S<=k){var Q=c-k;if((V>7e3||G>24576)&&(Q>423||!f)){p=A_(n,h,0,z,ue,ie,D,G,L,k-L,p),G=V=D=0,L=k;for(var ce=0;ce<286;++ce)ue[ce]=0;for(var ce=0;ce<30;++ce)ie[ce]=0}var me=2,Se=0,Fe=b,X=se-ye&32767;if(Q>2&&F==$(k-X))for(var q=Math.min(N,Q)-1,J=Math.min(32767,k),re=Math.min(258,Q);X<=J&&--Fe&&se!=ye;){if(n[k+me]==n[k+me-X]){for(var fe=0;fe<re&&n[k+fe]==n[k+fe-X];++fe);if(fe>me){if(me=fe,Se=X,fe>q)break;for(var pe=Math.min(X,fe-2),we=0,ce=0;ce<pe;++ce){var Pe=k-X+ce&32767,Re=C[Pe],Ue=Pe-Re&32767;Ue>we&&(we=Ue,ye=Pe)}}}se=ye,ye=C[se],X+=se-ye&32767}if(Se){z[G++]=268435456|cy[me]<<18|__[Se];var et=cy[me]&31,it=__[Se]&31;D+=Vx[et]+Ux[it],++ue[257+et],++ie[it],S=k+me,++V}else z[G++]=n[k],++ue[n[k]]}}for(k=Math.max(k,S);k<c;++k)z[G++]=n[k],++ue[n[k]];p=A_(n,h,f,z,ue,ie,D,G,L,k-L,p),f||(a.r=p&7|h[p/8|0]<<3,p-=7,a.h=I,a.p=C,a.i=k,a.w=S)}else{for(var k=a.w||0;k<c+f;k+=65535){var Ne=k+65535;Ne>=c&&(h[p/8|0]=f,Ne=c),p=I3(h,p+1,n.subarray(k,Ne))}a.i=c}return M9(d,0,r+C3(p)+i)},L3=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,a=t.length|0,c=0;c!=a;){for(var d=Math.min(c+2655,a);c<d;++c)i+=r+=t[c];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},q9=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),c=new Fo(a.length+n.length);c.set(a),c.set(n,a.length),n=c,i.w=a.length}return F9(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},k3=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},V9=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=L3();i.p(e.dictionary),k3(n,2,i.d())}};function hy(n,e){e||(e={});var t=L3();t.p(n);var r=q9(n,e,e.dictionary?6:2,4);return V9(r,e),k3(r,r.length-4,t.d()),r}var U9=typeof TextDecoder<"u"&&new TextDecoder,B9=0;try{U9.decode(R3,{stream:!0}),B9=1}catch{}function z9(n){if(Array.isArray(n))return n}function H9(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,c,d=[],h=!0,f=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(h=(r=a.call(t)).done)&&(d.push(r.value),d.length!==e);h=!0);}catch(p){f=!0,i=p}finally{try{if(!h&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(f)throw i}}return d}}function S_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function $9(n,e){if(n){if(typeof n=="string")return S_(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S_(n,e):void 0}}function G9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E_(n,e){return z9(n)||H9(n,e)||$9(n,e)||G9()}function j_(n,e="utf8"){return new TextDecoder(e).decode(n)}const W9=new TextEncoder;function Y9(n){return W9.encode(n)}const K9=1024*8,Q9=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),rv={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Bx{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=K9,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,a=e.byteLength-i;let c=i;(ArrayBuffer.isView(e)||e instanceof Bx)&&(e.byteLength!==e.buffer.byteLength&&(c=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=rv[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+r);if(this.littleEndian===Q9&&t!=="uint8"&&t!=="int8"){const d=new Uint8Array(this.buffer.slice(i,i+r));d.reverse();const h=new rv[t](d.buffer);return this.offset+=r,h.reverse(),h}const c=new rv[t](a);return this.offset+=r,c}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return j_(this.readBytes(e))}decodeText(e=1,t="utf8"){return j_(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(Y9(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Fh(n){let e=n.length;for(;--e>=0;)n[e]=0}const X9=3,J9=258,P3=29,Z9=256,eO=Z9+1+P3,D3=30,tO=512,nO=new Array((eO+2)*2);Fh(nO);const rO=new Array(D3*2);Fh(rO);const iO=new Array(tO);Fh(iO);const sO=new Array(J9-X9+1);Fh(sO);const aO=new Array(P3);Fh(aO);const oO=new Array(D3);Fh(oO);const lO=(n,e,t,r)=>{let i=n&65535|0,a=n>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do i=i+e[r++]|0,a=a+i|0;while(--c);i%=65521,a%=65521}return i|a<<16|0};var fy=lO;const cO=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},uO=new Uint32Array(cO()),dO=(n,e,t,r)=>{const i=uO,a=r+t;n^=-1;for(let c=r;c<a;c++)n=n>>>8^i[(n^e[c])&255];return n^-1};var ul=dO,my={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},M3={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const hO=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var fO=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)hO(t,r)&&(n[r]=t[r])}}return n},mO=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,i=0,a=n.length;r<a;r++){let c=n[r];t.set(c,i),i+=c.length}return t},O3={assign:fO,flattenChunks:mO};let F3=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{F3=!1}const sm=new Uint8Array(256);for(let n=0;n<256;n++)sm[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;sm[254]=sm[254]=1;var pO=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,a,c=n.length,d=0;for(i=0;i<c;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<c&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),a=0,i=0;a<d;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<c&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|t&63):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|t&63):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|t&63);return e};const gO=(n,e)=>{if(e<65534&&n.subarray&&F3)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t};var vO=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i;const a=new Array(t*2);for(i=0,r=0;r<t;){let c=n[r++];if(c<128){a[i++]=c;continue}let d=sm[c];if(d>4){a[i++]=65533,r+=d-1;continue}for(c&=d===2?31:d===3?15:7;d>1&&r<t;)c=c<<6|n[r++]&63,d--;if(d>1){a[i++]=65533;continue}c<65536?a[i++]=c:(c-=65536,a[i++]=55296|c>>10&1023,a[i++]=56320|c&1023)}return gO(a,i)},yO=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+sm[n[t]]>e?t:e},py={string2buf:pO,buf2string:vO,utf8border:yO};function xO(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var bO=xO;const Ep=16209,wO=16191;var _O=function(e,t){let r,i,a,c,d,h,f,p,x,N,b,E,C,I,R,U,$,z,ue,ie,V,D,k,G;const S=e.state;r=e.next_in,k=e.input,i=r+(e.avail_in-5),a=e.next_out,G=e.output,c=a-(t-e.avail_out),d=a+(e.avail_out-257),h=S.dmax,f=S.wsize,p=S.whave,x=S.wnext,N=S.window,b=S.hold,E=S.bits,C=S.lencode,I=S.distcode,R=(1<<S.lenbits)-1,U=(1<<S.distbits)-1;e:do{E<15&&(b+=k[r++]<<E,E+=8,b+=k[r++]<<E,E+=8),$=C[b&R];t:for(;;){if(z=$>>>24,b>>>=z,E-=z,z=$>>>16&255,z===0)G[a++]=$&65535;else if(z&16){ue=$&65535,z&=15,z&&(E<z&&(b+=k[r++]<<E,E+=8),ue+=b&(1<<z)-1,b>>>=z,E-=z),E<15&&(b+=k[r++]<<E,E+=8,b+=k[r++]<<E,E+=8),$=I[b&U];n:for(;;){if(z=$>>>24,b>>>=z,E-=z,z=$>>>16&255,z&16){if(ie=$&65535,z&=15,E<z&&(b+=k[r++]<<E,E+=8,E<z&&(b+=k[r++]<<E,E+=8)),ie+=b&(1<<z)-1,ie>h){e.msg="invalid distance too far back",S.mode=Ep;break e}if(b>>>=z,E-=z,z=a-c,ie>z){if(z=ie-z,z>p&&S.sane){e.msg="invalid distance too far back",S.mode=Ep;break e}if(V=0,D=N,x===0){if(V+=f-z,z<ue){ue-=z;do G[a++]=N[V++];while(--z);V=a-ie,D=G}}else if(x<z){if(V+=f+x-z,z-=x,z<ue){ue-=z;do G[a++]=N[V++];while(--z);if(V=0,x<ue){z=x,ue-=z;do G[a++]=N[V++];while(--z);V=a-ie,D=G}}}else if(V+=x-z,z<ue){ue-=z;do G[a++]=N[V++];while(--z);V=a-ie,D=G}for(;ue>2;)G[a++]=D[V++],G[a++]=D[V++],G[a++]=D[V++],ue-=3;ue&&(G[a++]=D[V++],ue>1&&(G[a++]=D[V++]))}else{V=a-ie;do G[a++]=G[V++],G[a++]=G[V++],G[a++]=G[V++],ue-=3;while(ue>2);ue&&(G[a++]=G[V++],ue>1&&(G[a++]=G[V++]))}}else if((z&64)===0){$=I[($&65535)+(b&(1<<z)-1)];continue n}else{e.msg="invalid distance code",S.mode=Ep;break e}break}}else if((z&64)===0){$=C[($&65535)+(b&(1<<z)-1)];continue t}else if(z&32){S.mode=wO;break e}else{e.msg="invalid literal/length code",S.mode=Ep;break e}break}}while(r<i&&a<d);ue=E>>3,r-=ue,E-=ue<<3,b&=(1<<E)-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=a<d?257+(d-a):257-(a-d),S.hold=b,S.bits=E};const Kd=15,T_=852,C_=592,I_=0,iv=1,R_=2,NO=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),AO=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),SO=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),EO=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),jO=(n,e,t,r,i,a,c,d)=>{const h=d.bits;let f=0,p=0,x=0,N=0,b=0,E=0,C=0,I=0,R=0,U=0,$,z,ue,ie,V,D=null,k;const G=new Uint16Array(Kd+1),S=new Uint16Array(Kd+1);let L=null,F,se,ye;for(f=0;f<=Kd;f++)G[f]=0;for(p=0;p<r;p++)G[e[t+p]]++;for(b=h,N=Kd;N>=1&&G[N]===0;N--);if(b>N&&(b=N),N===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,d.bits=1,0;for(x=1;x<N&&G[x]===0;x++);for(b<x&&(b=x),I=1,f=1;f<=Kd;f++)if(I<<=1,I-=G[f],I<0)return-1;if(I>0&&(n===I_||N!==1))return-1;for(S[1]=0,f=1;f<Kd;f++)S[f+1]=S[f]+G[f];for(p=0;p<r;p++)e[t+p]!==0&&(c[S[e[t+p]]++]=p);if(n===I_?(D=L=c,k=20):n===iv?(D=NO,L=AO,k=257):(D=SO,L=EO,k=0),U=0,p=0,f=x,V=a,E=b,C=0,ue=-1,R=1<<b,ie=R-1,n===iv&&R>T_||n===R_&&R>C_)return 1;for(;;){F=f-C,c[p]+1<k?(se=0,ye=c[p]):c[p]>=k?(se=L[c[p]-k],ye=D[c[p]-k]):(se=96,ye=0),$=1<<f-C,z=1<<E,x=z;do z-=$,i[V+(U>>C)+z]=F<<24|se<<16|ye|0;while(z!==0);for($=1<<f-1;U&$;)$>>=1;if($!==0?(U&=$-1,U+=$):U=0,p++,--G[f]===0){if(f===N)break;f=e[t+c[p]]}if(f>b&&(U&ie)!==ue){for(C===0&&(C=b),V+=x,E=f-C,I=1<<E;E+C<N&&(I-=G[E+C],!(I<=0));)E++,I<<=1;if(R+=1<<E,n===iv&&R>T_||n===R_&&R>C_)return 1;ue=U&ie,i[ue]=b<<24|E<<16|V-a|0}}return U!==0&&(i[V+U]=f-C<<24|64<<16|0),d.bits=b,0};var Hf=jO;const TO=0,q3=1,V3=2,{Z_FINISH:L_,Z_BLOCK:CO,Z_TREES:jp,Z_OK:id,Z_STREAM_END:IO,Z_NEED_DICT:RO,Z_STREAM_ERROR:lo,Z_DATA_ERROR:U3,Z_MEM_ERROR:B3,Z_BUF_ERROR:LO,Z_DEFLATED:k_}=M3,v0=16180,P_=16181,D_=16182,M_=16183,O_=16184,F_=16185,q_=16186,V_=16187,U_=16188,B_=16189,Lg=16190,tc=16191,sv=16192,z_=16193,av=16194,H_=16195,$_=16196,G_=16197,W_=16198,Tp=16199,Cp=16200,Y_=16201,K_=16202,Q_=16203,X_=16204,J_=16205,ov=16206,Z_=16207,eN=16208,Lr=16209,z3=16210,H3=16211,kO=852,PO=592,DO=15,MO=DO,tN=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function OO(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const dd=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<v0||e.mode>H3?1:0},$3=n=>{if(dd(n))return lo;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=v0,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(kO),e.distcode=e.distdyn=new Int32Array(PO),e.sane=1,e.back=-1,id},G3=n=>{if(dd(n))return lo;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,$3(n)},W3=(n,e)=>{let t;if(dd(n))return lo;const r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?lo:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,G3(n))},Y3=(n,e)=>{if(!n)return lo;const t=new OO;n.state=t,t.strm=n,t.window=null,t.mode=v0;const r=W3(n,e);return r!==id&&(n.state=null),r},FO=n=>Y3(n,MO);let nN=!0,lv,cv;const qO=n=>{if(nN){lv=new Int32Array(512),cv=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Hf(q3,n.lens,0,288,lv,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Hf(V3,n.lens,0,32,cv,0,n.work,{bits:5}),nN=!1}n.lencode=lv,n.lenbits=9,n.distcode=cv,n.distbits=5},K3=(n,e,t,r)=>{let i;const a=n.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(e.subarray(t-r,t-r+i),a.wnext),r-=i,r?(a.window.set(e.subarray(t-r,t),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},VO=(n,e)=>{let t,r,i,a,c,d,h,f,p,x,N,b,E,C,I=0,R,U,$,z,ue,ie,V,D;const k=new Uint8Array(4);let G,S;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(dd(n)||!n.output||!n.input&&n.avail_in!==0)return lo;t=n.state,t.mode===tc&&(t.mode=sv),c=n.next_out,i=n.output,h=n.avail_out,a=n.next_in,r=n.input,d=n.avail_in,f=t.hold,p=t.bits,x=d,N=h,D=id;e:for(;;)switch(t.mode){case v0:if(t.wrap===0){t.mode=sv;break}for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,k[0]=f&255,k[1]=f>>>8&255,t.check=ul(t.check,k,2,0),f=0,p=0,t.mode=P_;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){n.msg="incorrect header check",t.mode=Lr;break}if((f&15)!==k_){n.msg="unknown compression method",t.mode=Lr;break}if(f>>>=4,p-=4,V=(f&15)+8,t.wbits===0&&(t.wbits=V),V>15||V>t.wbits){n.msg="invalid window size",t.mode=Lr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=f&512?B_:tc,f=0,p=0;break;case P_:for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.flags=f,(t.flags&255)!==k_){n.msg="unknown compression method",t.mode=Lr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Lr;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=ul(t.check,k,2,0)),f=0,p=0,t.mode=D_;case D_:for(;p<32;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,k[2]=f>>>16&255,k[3]=f>>>24&255,t.check=ul(t.check,k,4,0)),f=0,p=0,t.mode=M_;case M_:for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=ul(t.check,k,2,0)),f=0,p=0,t.mode=O_;case O_:if(t.flags&1024){for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=ul(t.check,k,2,0)),f=0,p=0}else t.head&&(t.head.extra=null);t.mode=F_;case F_:if(t.flags&1024&&(b=t.length,b>d&&(b=d),b&&(t.head&&(V=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(a,a+b),V)),t.flags&512&&t.wrap&4&&(t.check=ul(t.check,r,b,a)),d-=b,a+=b,t.length-=b),t.length))break e;t.length=0,t.mode=q_;case q_:if(t.flags&2048){if(d===0)break e;b=0;do V=r[a+b++],t.head&&V&&t.length<65536&&(t.head.name+=String.fromCharCode(V));while(V&&b<d);if(t.flags&512&&t.wrap&4&&(t.check=ul(t.check,r,b,a)),d-=b,a+=b,V)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=V_;case V_:if(t.flags&4096){if(d===0)break e;b=0;do V=r[a+b++],t.head&&V&&t.length<65536&&(t.head.comment+=String.fromCharCode(V));while(V&&b<d);if(t.flags&512&&t.wrap&4&&(t.check=ul(t.check,r,b,a)),d-=b,a+=b,V)break e}else t.head&&(t.head.comment=null);t.mode=U_;case U_:if(t.flags&512){for(;p<16;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.wrap&4&&f!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Lr;break}f=0,p=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=tc;break;case B_:for(;p<32;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}n.adler=t.check=tN(f),f=0,p=0,t.mode=Lg;case Lg:if(t.havedict===0)return n.next_out=c,n.avail_out=h,n.next_in=a,n.avail_in=d,t.hold=f,t.bits=p,RO;n.adler=t.check=1,t.mode=tc;case tc:if(e===CO||e===jp)break e;case sv:if(t.last){f>>>=p&7,p-=p&7,t.mode=ov;break}for(;p<3;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}switch(t.last=f&1,f>>>=1,p-=1,f&3){case 0:t.mode=z_;break;case 1:if(qO(t),t.mode=Tp,e===jp){f>>>=2,p-=2;break e}break;case 2:t.mode=$_;break;case 3:n.msg="invalid block type",t.mode=Lr}f>>>=2,p-=2;break;case z_:for(f>>>=p&7,p-=p&7;p<32;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if((f&65535)!==(f>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Lr;break}if(t.length=f&65535,f=0,p=0,t.mode=av,e===jp)break e;case av:t.mode=H_;case H_:if(b=t.length,b){if(b>d&&(b=d),b>h&&(b=h),b===0)break e;i.set(r.subarray(a,a+b),c),d-=b,a+=b,h-=b,c+=b,t.length-=b;break}t.mode=tc;break;case $_:for(;p<14;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.nlen=(f&31)+257,f>>>=5,p-=5,t.ndist=(f&31)+1,f>>>=5,p-=5,t.ncode=(f&15)+4,f>>>=4,p-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Lr;break}t.have=0,t.mode=G_;case G_:for(;t.have<t.ncode;){for(;p<3;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.lens[L[t.have++]]=f&7,f>>>=3,p-=3}for(;t.have<19;)t.lens[L[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,G={bits:t.lenbits},D=Hf(TO,t.lens,0,19,t.lencode,0,t.work,G),t.lenbits=G.bits,D){n.msg="invalid code lengths set",t.mode=Lr;break}t.have=0,t.mode=W_;case W_:for(;t.have<t.nlen+t.ndist;){for(;I=t.lencode[f&(1<<t.lenbits)-1],R=I>>>24,U=I>>>16&255,$=I&65535,!(R<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if($<16)f>>>=R,p-=R,t.lens[t.have++]=$;else{if($===16){for(S=R+2;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(f>>>=R,p-=R,t.have===0){n.msg="invalid bit length repeat",t.mode=Lr;break}V=t.lens[t.have-1],b=3+(f&3),f>>>=2,p-=2}else if($===17){for(S=R+3;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}f>>>=R,p-=R,V=0,b=3+(f&7),f>>>=3,p-=3}else{for(S=R+7;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}f>>>=R,p-=R,V=0,b=11+(f&127),f>>>=7,p-=7}if(t.have+b>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Lr;break}for(;b--;)t.lens[t.have++]=V}}if(t.mode===Lr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Lr;break}if(t.lenbits=9,G={bits:t.lenbits},D=Hf(q3,t.lens,0,t.nlen,t.lencode,0,t.work,G),t.lenbits=G.bits,D){n.msg="invalid literal/lengths set",t.mode=Lr;break}if(t.distbits=6,t.distcode=t.distdyn,G={bits:t.distbits},D=Hf(V3,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,G),t.distbits=G.bits,D){n.msg="invalid distances set",t.mode=Lr;break}if(t.mode=Tp,e===jp)break e;case Tp:t.mode=Cp;case Cp:if(d>=6&&h>=258){n.next_out=c,n.avail_out=h,n.next_in=a,n.avail_in=d,t.hold=f,t.bits=p,_O(n,N),c=n.next_out,i=n.output,h=n.avail_out,a=n.next_in,r=n.input,d=n.avail_in,f=t.hold,p=t.bits,t.mode===tc&&(t.back=-1);break}for(t.back=0;I=t.lencode[f&(1<<t.lenbits)-1],R=I>>>24,U=I>>>16&255,$=I&65535,!(R<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(U&&(U&240)===0){for(z=R,ue=U,ie=$;I=t.lencode[ie+((f&(1<<z+ue)-1)>>z)],R=I>>>24,U=I>>>16&255,$=I&65535,!(z+R<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}f>>>=z,p-=z,t.back+=z}if(f>>>=R,p-=R,t.back+=R,t.length=$,U===0){t.mode=J_;break}if(U&32){t.back=-1,t.mode=tc;break}if(U&64){n.msg="invalid literal/length code",t.mode=Lr;break}t.extra=U&15,t.mode=Y_;case Y_:if(t.extra){for(S=t.extra;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=K_;case K_:for(;I=t.distcode[f&(1<<t.distbits)-1],R=I>>>24,U=I>>>16&255,$=I&65535,!(R<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if((U&240)===0){for(z=R,ue=U,ie=$;I=t.distcode[ie+((f&(1<<z+ue)-1)>>z)],R=I>>>24,U=I>>>16&255,$=I&65535,!(z+R<=p);){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}f>>>=z,p-=z,t.back+=z}if(f>>>=R,p-=R,t.back+=R,U&64){n.msg="invalid distance code",t.mode=Lr;break}t.offset=$,t.extra=U&15,t.mode=Q_;case Q_:if(t.extra){for(S=t.extra;p<S;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Lr;break}t.mode=X_;case X_:if(h===0)break e;if(b=N-h,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Lr;break}b>t.wnext?(b-=t.wnext,E=t.wsize-b):E=t.wnext-b,b>t.length&&(b=t.length),C=t.window}else C=i,E=c-t.offset,b=t.length;b>h&&(b=h),h-=b,t.length-=b;do i[c++]=C[E++];while(--b);t.length===0&&(t.mode=Cp);break;case J_:if(h===0)break e;i[c++]=t.length,h--,t.mode=Cp;break;case ov:if(t.wrap){for(;p<32;){if(d===0)break e;d--,f|=r[a++]<<p,p+=8}if(N-=h,n.total_out+=N,t.total+=N,t.wrap&4&&N&&(n.adler=t.check=t.flags?ul(t.check,i,N,c-N):fy(t.check,i,N,c-N)),N=h,t.wrap&4&&(t.flags?f:tN(f))!==t.check){n.msg="incorrect data check",t.mode=Lr;break}f=0,p=0}t.mode=Z_;case Z_:if(t.wrap&&t.flags){for(;p<32;){if(d===0)break e;d--,f+=r[a++]<<p,p+=8}if(t.wrap&4&&f!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Lr;break}f=0,p=0}t.mode=eN;case eN:D=IO;break e;case Lr:D=U3;break e;case z3:return B3;case H3:default:return lo}return n.next_out=c,n.avail_out=h,n.next_in=a,n.avail_in=d,t.hold=f,t.bits=p,(t.wsize||N!==n.avail_out&&t.mode<Lr&&(t.mode<ov||e!==L_))&&K3(n,n.output,n.next_out,N-n.avail_out),x-=n.avail_in,N-=n.avail_out,n.total_in+=x,n.total_out+=N,t.total+=N,t.wrap&4&&N&&(n.adler=t.check=t.flags?ul(t.check,i,N,n.next_out-N):fy(t.check,i,N,n.next_out-N)),n.data_type=t.bits+(t.last?64:0)+(t.mode===tc?128:0)+(t.mode===Tp||t.mode===av?256:0),(x===0&&N===0||e===L_)&&D===id&&(D=LO),D},UO=n=>{if(dd(n))return lo;let e=n.state;return e.window&&(e.window=null),n.state=null,id},BO=(n,e)=>{if(dd(n))return lo;const t=n.state;return(t.wrap&2)===0?lo:(t.head=e,e.done=!1,id)},zO=(n,e)=>{const t=e.length;let r,i,a;return dd(n)||(r=n.state,r.wrap!==0&&r.mode!==Lg)?lo:r.mode===Lg&&(i=1,i=fy(i,e,t,0),i!==r.check)?U3:(a=K3(n,e,t,t),a?(r.mode=z3,B3):(r.havedict=1,id))};var HO=G3,$O=W3,GO=$3,WO=FO,YO=Y3,KO=VO,QO=UO,XO=BO,JO=zO,ZO="pako inflate (from Nodeca project)",nc={inflateReset:HO,inflateReset2:$O,inflateResetKeep:GO,inflateInit:WO,inflateInit2:YO,inflate:KO,inflateEnd:QO,inflateGetHeader:XO,inflateSetDictionary:JO,inflateInfo:ZO};function eF(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var tF=eF;const Q3=Object.prototype.toString,{Z_NO_FLUSH:nF,Z_FINISH:rF,Z_OK:am,Z_STREAM_END:uv,Z_NEED_DICT:dv,Z_STREAM_ERROR:iF,Z_DATA_ERROR:rN,Z_MEM_ERROR:sF}=M3;function Sm(n){this.options=O3.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new bO,this.strm.avail_out=0;let t=nc.inflateInit2(this.strm,e.windowBits);if(t!==am)throw new Error(my[t]);if(this.header=new tF,nc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=py.string2buf(e.dictionary):Q3.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=nc.inflateSetDictionary(this.strm,e.dictionary),t!==am)))throw new Error(my[t])}Sm.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,c,d;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?rF:nF,Q3.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),a=nc.inflate(t,c),a===dv&&i&&(a=nc.inflateSetDictionary(t,i),a===am?a=nc.inflate(t,c):a===rN&&(a=dv));t.avail_in>0&&a===uv&&t.state.wrap>0&&n[t.next_in]!==0;)nc.inflateReset(t),a=nc.inflate(t,c);switch(a){case iF:case rN:case dv:case sF:return this.onEnd(a),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||a===uv))if(this.options.to==="string"){let h=py.utf8border(t.output,t.next_out),f=t.next_out-h,p=py.buf2string(t.output,h);t.next_out=f,t.avail_out=r-f,f&&t.output.set(t.output.subarray(h,h+f),0),this.onData(p)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===am&&d===0)){if(a===uv)return a=nc.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Sm.prototype.onData=function(n){this.chunks.push(n)};Sm.prototype.onEnd=function(n){n===am&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=O3.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function aF(n,e){const t=new Sm(e);if(t.push(n),t.err)throw t.msg||my[t.err];return t.result}var oF=Sm,lF=aF,cF={Inflate:oF,inflate:lF};const{Inflate:uF,inflate:dF}=cF;var iN=uF,hF=dF;const X3=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;X3[n]=e}const sN=4294967295;function fF(n,e,t){let r=n;for(let i=0;i<t;i++)r=X3[(r^e[i])&255]^r>>>8;return r}function mF(n,e){return(fF(sN,n,e)^sN)>>>0}function aN(n,e,t){const r=n.readUint32(),i=mF(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function J3(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function Z3(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function eE(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function tE(n,e,t,r,i){let a=0;if(t.length===0){for(;a<i;a++)e[a]=n[a];for(;a<r;a++)e[a]=n[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=n[a]+(t[a]>>1)&255;for(;a<r;a++)e[a]=n[a]+(e[a-i]+t[a]>>1)&255}}function nE(n,e,t,r,i){let a=0;if(t.length===0){for(;a<i;a++)e[a]=n[a];for(;a<r;a++)e[a]=n[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=n[a]+t[a]&255;for(;a<r;a++)e[a]=n[a]+pF(e[a-i],t[a],t[a-i])&255}}function pF(n,e,t){const r=n+e-t,i=Math.abs(r-n),a=Math.abs(r-e),c=Math.abs(r-t);return i<=a&&i<=c?n:a<=c?e:t}function gF(n,e,t,r,i,a){switch(n){case 0:J3(e,t,i);break;case 1:Z3(e,t,i,a);break;case 2:eE(e,t,r,i);break;case 3:tE(e,t,r,i,a);break;case 4:nE(e,t,r,i,a);break;default:throw new Error(`Unsupported filter: ${n}`)}}const vF=new Uint16Array([255]),yF=new Uint8Array(vF.buffer),xF=yF[0]===255;function bF(n){const{data:e,width:t,height:r,channels:i,depth:a}=n,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(a/8)*i,h=new Uint8Array(r*t*d);let f=0;for(let p=0;p<7;p++){const x=c[p],N=Math.ceil((t-x.x)/x.xStep),b=Math.ceil((r-x.y)/x.yStep);if(N<=0||b<=0)continue;const E=N*d,C=new Uint8Array(E);for(let I=0;I<b;I++){const R=e[f++],U=e.subarray(f,f+E);f+=E;const $=new Uint8Array(E);gF(R,U,$,C,E,d),C.set($);for(let z=0;z<N;z++){const ue=x.x+z*x.xStep,ie=x.y+I*x.yStep;if(!(ue>=t||ie>=r))for(let V=0;V<d;V++)h[(ie*t+ue)*d+V]=$[z*d+V]}}}if(a===16){const p=new Uint16Array(h.buffer);if(xF)for(let x=0;x<p.length;x++)p[x]=wF(p[x]);return p}else return h}function wF(n){return(n&255)<<8|n>>8&255}const _F=new Uint16Array([255]),NF=new Uint8Array(_F.buffer),AF=NF[0]===255,SF=new Uint8Array(0);function oN(n){const{data:e,width:t,height:r,channels:i,depth:a}=n,c=Math.ceil(a/8)*i,d=Math.ceil(a/8*i*t),h=new Uint8Array(r*d);let f=SF,p=0,x,N;for(let b=0;b<r;b++){switch(x=e.subarray(p+1,p+1+d),N=h.subarray(b*d,(b+1)*d),e[p]){case 0:J3(x,N,d);break;case 1:Z3(x,N,d,c);break;case 2:eE(x,N,f,d);break;case 3:tE(x,N,f,d,c);break;case 4:nE(x,N,f,d,c);break;default:throw new Error(`Unsupported filter: ${e[p]}`)}f=N,p+=d+1}if(a===16){const b=new Uint16Array(h.buffer);if(AF)for(let E=0;E<b.length;E++)b[E]=EF(b[E]);return b}else return h}function EF(n){return(n&255)<<8|n>>8&255}const Xp=Uint8Array.of(137,80,78,71,13,10,26,10);function lN(n){if(!jF(n.readBytes(Xp.length)))throw new Error("wrong PNG signature")}function jF(n){if(n.length<Xp.length)return!1;for(let e=0;e<Xp.length;e++)if(n[e]!==Xp[e])return!1;return!0}const TF="tEXt",CF=0,rE=new TextDecoder("latin1");function IF(n){if(LF(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const RF=/^[\u0000-\u00FF]*$/;function LF(n){if(!RF.test(n))throw new Error("invalid latin1 text")}function kF(n,e,t){const r=iE(e);n[r]=PF(e,t-r.length-1)}function iE(n){for(n.mark();n.readByte()!==CF;);const e=n.offset;n.reset();const t=rE.decode(n.readBytes(e-n.offset-1));return n.skip(1),IF(t),t}function PF(n,e){return rE.decode(n.readBytes(e))}const Ca={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},hv={UNKNOWN:-1,DEFLATE:0},cN={UNKNOWN:-1,ADAPTIVE:0},fv={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Ip={NONE:0,BACKGROUND:1,PREVIOUS:2},mv={SOURCE:0,OVER:1};class DF extends Bx{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new iN,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=hv.UNKNOWN,this._filterMethod=cN.UNKNOWN,this._interlaceMethod=fv.UNKNOWN,this._colorType=Ca.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(lN(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(lN(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case TF:kF(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?aN(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?aN(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=MF(this.readUint8());const t=this.readUint8();this._colorType=t;let r;switch(t){case Ca.GREYSCALE:r=1;break;case Ca.TRUECOLOUR:r=3;break;case Ca.INDEXED_COLOUR:r=1;break;case Ca.GREYSCALE_ALPHA:r=2;break;case Ca.TRUECOLOUR_ALPHA:r=4;break;case Ca.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==hv.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Ca.GREYSCALE:case Ca.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case Ca.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case Ca.UNKNOWN:case Ca.GREYSCALE_ALPHA:case Ca.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=iE(this),r=this.readUint8();if(r!==hv.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:hF(i)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=oN({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case Ip.NONE:break;case Ip.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let a=0;a<this._png.width;a++){const c=(i*e.width+a)*this._png.channels;for(let d=0;d<this._png.channels;d++)r.data[c+d]=0}break;case Ip.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const r=1<<this._png.depth,i=(a,c)=>{const d=((a+t.yOffset)*this._png.width+t.xOffset+c)*this._png.channels,h=(a*t.width+c)*this._png.channels;return{index:d,frameIndex:h}};switch(t.blendOp){case mv.SOURCE:for(let a=0;a<t.height;a++)for(let c=0;c<t.width;c++){const{index:d,frameIndex:h}=i(a,c);for(let f=0;f<this._png.channels;f++)e.data[d+f]=t.data[h+f]}break;case mv.OVER:for(let a=0;a<t.height;a++)for(let c=0;c<t.width;c++){const{index:d,frameIndex:h}=i(a,c);for(let f=0;f<this._png.channels;f++){const p=t.data[h+this._png.channels-1]/r,x=f%(this._png.channels-1)===0?1:t.data[h+f],N=Math.floor(p*x+(1-p)*e.data[d+f]);e.data[d+f]+=N}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==cN.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===fv.NO_INTERLACE)this._png.data=oN({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===fv.ADAM7)this._png.data=bF({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Ip.NONE,blendOp:mv.SOURCE,data:e}),this._inflator=new iN,this._writingDataChunks=!1}}function MF(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var uN;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(uN||(uN={}));function OF(n,e){return new DF(n,e).decode()}var Xt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function pv(){Xt.console&&typeof Xt.console.log=="function"&&Xt.console.log.apply(Xt.console,arguments)}var yr={log:pv,warn:function(n){Xt.console&&(typeof Xt.console.warn=="function"?Xt.console.warn.apply(Xt.console,arguments):pv.call(null,arguments))},error:function(n){Xt.console&&(typeof Xt.console.error=="function"?Xt.console.error.apply(Xt.console,arguments):pv(n))}};function gv(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Hu(r.response,e,t)},r.onerror=function(){yr.error("could not download file")},r.send()}function dN(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Rp(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Hu=Xt.saveAs||((typeof window>"u"?"undefined":nr(window))!=="object"||window!==Xt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Xt.URL||Xt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?dN(i.href)?gv(n,e,t):Rp(i,i.target="_blank"):Rp(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Rp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(dN(n))gv(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Rp(r)})}else navigator.msSaveOrOpenBlob((function(i,a){return a===void 0?a={autoBom:!1}:nr(a)!=="object"&&(yr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return gv(n,e,t);var i=n.type==="application/octet-stream",a=/constructor/i.test(Xt.HTMLElement)||Xt.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&a)&&(typeof FileReader>"u"?"undefined":nr(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var p=d.result;p=c?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},d.readAsDataURL(n)}else{var h=Xt.URL||Xt.webkitURL,f=h.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});function sE(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,a=t[r].process,c=i.exec(n);c&&(e=a(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+d+h+f}}var Jp=Xt.atob.bind(Xt),hN=Xt.btoa.bind(Xt);function vv(n,e){var t=n[0],r=n[1],i=n[2],a=n[3];t=Ss(t,r,i,a,e[0],7,-680876936),a=Ss(a,t,r,i,e[1],12,-389564586),i=Ss(i,a,t,r,e[2],17,606105819),r=Ss(r,i,a,t,e[3],22,-1044525330),t=Ss(t,r,i,a,e[4],7,-176418897),a=Ss(a,t,r,i,e[5],12,1200080426),i=Ss(i,a,t,r,e[6],17,-1473231341),r=Ss(r,i,a,t,e[7],22,-45705983),t=Ss(t,r,i,a,e[8],7,1770035416),a=Ss(a,t,r,i,e[9],12,-1958414417),i=Ss(i,a,t,r,e[10],17,-42063),r=Ss(r,i,a,t,e[11],22,-1990404162),t=Ss(t,r,i,a,e[12],7,1804603682),a=Ss(a,t,r,i,e[13],12,-40341101),i=Ss(i,a,t,r,e[14],17,-1502002290),t=Es(t,r=Ss(r,i,a,t,e[15],22,1236535329),i,a,e[1],5,-165796510),a=Es(a,t,r,i,e[6],9,-1069501632),i=Es(i,a,t,r,e[11],14,643717713),r=Es(r,i,a,t,e[0],20,-373897302),t=Es(t,r,i,a,e[5],5,-701558691),a=Es(a,t,r,i,e[10],9,38016083),i=Es(i,a,t,r,e[15],14,-660478335),r=Es(r,i,a,t,e[4],20,-405537848),t=Es(t,r,i,a,e[9],5,568446438),a=Es(a,t,r,i,e[14],9,-1019803690),i=Es(i,a,t,r,e[3],14,-187363961),r=Es(r,i,a,t,e[8],20,1163531501),t=Es(t,r,i,a,e[13],5,-1444681467),a=Es(a,t,r,i,e[2],9,-51403784),i=Es(i,a,t,r,e[7],14,1735328473),t=js(t,r=Es(r,i,a,t,e[12],20,-1926607734),i,a,e[5],4,-378558),a=js(a,t,r,i,e[8],11,-2022574463),i=js(i,a,t,r,e[11],16,1839030562),r=js(r,i,a,t,e[14],23,-35309556),t=js(t,r,i,a,e[1],4,-1530992060),a=js(a,t,r,i,e[4],11,1272893353),i=js(i,a,t,r,e[7],16,-155497632),r=js(r,i,a,t,e[10],23,-1094730640),t=js(t,r,i,a,e[13],4,681279174),a=js(a,t,r,i,e[0],11,-358537222),i=js(i,a,t,r,e[3],16,-722521979),r=js(r,i,a,t,e[6],23,76029189),t=js(t,r,i,a,e[9],4,-640364487),a=js(a,t,r,i,e[12],11,-421815835),i=js(i,a,t,r,e[15],16,530742520),t=Ts(t,r=js(r,i,a,t,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Ts(a,t,r,i,e[7],10,1126891415),i=Ts(i,a,t,r,e[14],15,-1416354905),r=Ts(r,i,a,t,e[5],21,-57434055),t=Ts(t,r,i,a,e[12],6,1700485571),a=Ts(a,t,r,i,e[3],10,-1894986606),i=Ts(i,a,t,r,e[10],15,-1051523),r=Ts(r,i,a,t,e[1],21,-2054922799),t=Ts(t,r,i,a,e[8],6,1873313359),a=Ts(a,t,r,i,e[15],10,-30611744),i=Ts(i,a,t,r,e[6],15,-1560198380),r=Ts(r,i,a,t,e[13],21,1309151649),t=Ts(t,r,i,a,e[4],6,-145523070),a=Ts(a,t,r,i,e[11],10,-1120210379),i=Ts(i,a,t,r,e[2],15,718787259),r=Ts(r,i,a,t,e[9],21,-343485551),n[0]=su(t,n[0]),n[1]=su(r,n[1]),n[2]=su(i,n[2]),n[3]=su(a,n[3])}function y0(n,e,t,r,i,a){return e=su(su(e,n),su(r,a)),su(e<<i|e>>>32-i,t)}function Ss(n,e,t,r,i,a,c){return y0(e&t|~e&r,n,e,i,a,c)}function Es(n,e,t,r,i,a,c){return y0(e&r|t&~r,n,e,i,a,c)}function js(n,e,t,r,i,a,c){return y0(e^t^r,n,e,i,a,c)}function Ts(n,e,t,r,i,a,c){return y0(t^(e|~r),n,e,i,a,c)}function aE(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)vv(r,FF(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(vv(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,vv(r,i),r}function FF(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var fN="0123456789abcdef".split("");function qF(n){for(var e="",t=0;t<4;t++)e+=fN[n>>8*t+4&15]+fN[n>>8*t&15];return e}function VF(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function gy(n){return aE(n).map(VF).join("")}var UF=(function(n){for(var e=0;e<n.length;e++)n[e]=qF(n[e]);return n.join("")})(aE("hello"))!="5d41402abc4b2a76b9719d911017c592";function su(n,e){if(UF){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function vy(n,e){var t,r,i,a;if(n!==t){for(var c=(i=n,a=1+(256/n.length|0),new Array(a+1).join(i)),d=[],h=0;h<256;h++)d[h]=h;var f=0;for(h=0;h<256;h++){var p=d[h];f=(f+p+c.charCodeAt(h))%256,d[h]=d[f],d[f]=p}t=n,r=d}else d=r;var x=e.length,N=0,b=0,E="";for(h=0;h<x;h++)b=(b+(p=d[N=(N+1)%256]))%256,d[N]=d[b],d[b]=p,c=d[(d[N]+d[b])%256],E+=String.fromCharCode(e.charCodeAt(h)^c);return E}var mN={print:4,modify:8,copy:16,"annot-forms":32};function nh(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(d){if(mN.perm!==void 0)throw new Error("Invalid permission: "+d);i+=mN[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,c),this.P=-(1+(255^i)),this.encryptionKey=gy(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=vy(this.encryptionKey,this.padding)}function rh(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function pN(n){if(nr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[r,!!i],a},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[t]){var c=e[t][a];try{c[0].apply(n,r)}catch(d){Xt.console&&yr.error("jsPDF PubSub Error",d.message,d)}c[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function kg(n){if(!(this instanceof kg))return new kg(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function oE(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function $u(n,e,t,r,i){if(!(this instanceof $u))return new $u(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,oE.call(this,r,i)}function ah(n,e,t,r,i){if(!(this instanceof ah))return new ah(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,oE.call(this,r,i)}function Et(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],c=[],d=1,h=16,f="S",p=null;nr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,a=n.compress||n.compressPdf||a,(p=n.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),d=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(h=n.floatPrecision),f=n.defaultPathOperation||"S"),c=n.filters||(a===!0?["FlateEncode"]:c),r=r||"mm",t=(""+(t||"P")).toLowerCase();var x=n.putOnlyUsedFonts||!1,N={},b={internal:{},__private__:{}};b.__private__.PubSub=pN;var E="1.3",C=b.__private__.getPdfVersion=function(){return E};b.__private__.setPdfVersion=function(A){E=A};var I={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return I};var R=b.__private__.getPageFormat=function(A){return I[A]};i=i||"a4";var U="compat",$="advanced",z=U;function ue(){this.saveGraphicsState(),te(new Tt(Kt,0,0,-Kt,0,Ds()*Kt).toString()+" cm"),this.setFontSize(this.getFontSize()/Kt),f="n",z=$}function ie(){this.restoreGraphicsState(),f="S",z=U}var V=b.__private__.combineFontStyleAndFontWeight=function(A,B){if(A=="bold"&&B=="normal"||A=="bold"&&B==400||A=="normal"&&B=="italic"||A=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(A=B==400||B==="normal"?A==="italic"?"italic":"normal":B!=700&&B!=="bold"||A!=="normal"?(B==700?"bold":B)+""+A:"bold"),A};b.advancedAPI=function(A){var B=z===U;return B&&ue.call(this),typeof A!="function"||(A(this),B&&ie.call(this)),this},b.compatAPI=function(A){var B=z===$;return B&&ie.call(this),typeof A!="function"||(A(this),B&&ue.call(this)),this},b.isAdvancedAPI=function(){return z===$};var D,k=function(A){if(z!==$)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},G=b.roundToPrecision=b.__private__.roundToPrecision=function(A,B){var oe=e||B;if(isNaN(A)||isNaN(oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(oe).replace(/0+$/,"")};D=b.hpf=b.__private__.hpf=typeof h=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return G(A,h)}:h==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return G(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return G(A,16)};var S=b.f2=b.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return G(A,2)},L=b.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return G(A,3)},F=b.scale=b.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return z===U?A*Kt:z===$?A:void 0},se=function(A){return F((function(B){return z===U?Ds()-B:z===$?B:void 0})(A))};b.__private__.setPrecision=b.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var ye,Q="00000000000000000000000000000000",ce=b.__private__.getFileId=function(){return Q},me=b.__private__.setFileId=function(A){return Q=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(mr=new nh(p.userPermissions,p.userPassword,p.ownerPassword,Q)),Q};b.setFileId=function(A){return me(A),this},b.getFileId=function(){return ce()};var Se=b.__private__.convertDateToPDFDate=function(A){var B=A.getTimezoneOffset(),oe=B<0?"+":"-",ve=Math.floor(Math.abs(B/60)),Ae=Math.abs(B%60),He=[oe,re(ve),"'",re(Ae),"'"].join("");return["D:",A.getFullYear(),re(A.getMonth()+1),re(A.getDate()),re(A.getHours()),re(A.getMinutes()),re(A.getSeconds()),He].join("")},Fe=b.__private__.convertPDFDateToDate=function(A){var B=parseInt(A.substr(2,4),10),oe=parseInt(A.substr(6,2),10)-1,ve=parseInt(A.substr(8,2),10),Ae=parseInt(A.substr(10,2),10),He=parseInt(A.substr(12,2),10),Xe=parseInt(A.substr(14,2),10);return new Date(B,oe,ve,Ae,He,Xe,0)},X=b.__private__.setCreationDate=function(A){var B;if(A===void 0&&(A=new Date),A instanceof Date)B=Se(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=A}return ye=B},q=b.__private__.getCreationDate=function(A){var B=ye;return A==="jsDate"&&(B=Fe(ye)),B};b.setCreationDate=function(A){return X(A),this},b.getCreationDate=function(A){return q(A)};var J,re=b.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},fe=b.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},pe=0,we=[],Pe=[],Re=0,Ue=[],et=[],it=!1,Ne=Pe;b.__private__.setCustomOutputDestination=function(A){it=!0,Ne=A};var Be=function(A){it||(Ne=A)};b.__private__.resetCustomOutputDestination=function(){it=!1,Ne=Pe};var te=b.__private__.out=function(A){return A=A.toString(),Re+=A.length+1,Ne.push(A),Ne},Ze=b.__private__.write=function(A){return te(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},ct=b.__private__.getArrayBuffer=function(A){for(var B=A.length,oe=new ArrayBuffer(B),ve=new Uint8Array(oe);B--;)ve[B]=A.charCodeAt(B);return oe},ot=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return ot};var ze=n.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(A){return ze=z===$?A/Kt:A,this};var at,lt=b.__private__.getFontSize=b.getFontSize=function(){return z===U?ze:ze*Kt},Rt=n.R2L||!1;b.__private__.setR2L=b.setR2L=function(A){return Rt=A,this},b.__private__.getR2L=b.getR2L=function(){return Rt};var At,Jt=b.__private__.setZoomMode=function(A){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))at=A;else if(isNaN(A)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');at=A}else at=parseInt(A,10)};b.__private__.getZoomMode=function(){return at};var rn,$t=b.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');At=A};b.__private__.getPageMode=function(){return At};var cn=b.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');rn=A};b.__private__.getLayoutMode=function(){return rn},b.__private__.setDisplayMode=b.setDisplayMode=function(A,B,oe){return Jt(A),cn(B),$t(oe),this};var tn={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(A){if(Object.keys(tn).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return tn[A]},b.__private__.getDocumentProperties=function(){return tn},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(A){for(var B in tn)tn.hasOwnProperty(B)&&A[B]&&(tn[B]=A[B]);return this},b.__private__.setDocumentProperty=function(A,B){if(Object.keys(tn).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return tn[A]=B};var xt,Kt,wt,xr,nn,It={},Bt={},Zt=[],jt={},Pn={},qt={},Vt={},Fn=null,St=0,_t=[],un=new pN(b),bi=n.hotfixes||[],ci={},Hs={},ei=[],Tt=function A(B,oe,ve,Ae,He,Xe){if(!(this instanceof A))return new A(B,oe,ve,Ae,He,Xe);isNaN(B)&&(B=1),isNaN(oe)&&(oe=0),isNaN(ve)&&(ve=0),isNaN(Ae)&&(Ae=1),isNaN(He)&&(He=0),isNaN(Xe)&&(Xe=0),this._matrix=[B,oe,ve,Ae,He,Xe]};Object.defineProperty(Tt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Tt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Tt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Tt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Tt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Tt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Tt.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Tt.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Tt.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Tt.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Tt.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Tt.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Tt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Tt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Tt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Tt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Tt.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(A)},Tt.prototype.multiply=function(A){var B=A.sx*this.sx+A.shy*this.shx,oe=A.sx*this.shy+A.shy*this.sy,ve=A.shx*this.sx+A.sy*this.shx,Ae=A.shx*this.shy+A.sy*this.sy,He=A.tx*this.sx+A.ty*this.shx+this.tx,Xe=A.tx*this.shy+A.ty*this.sy+this.ty;return new Tt(B,oe,ve,Ae,He,Xe)},Tt.prototype.decompose=function(){var A=this.sx,B=this.shy,oe=this.shx,ve=this.sy,Ae=this.tx,He=this.ty,Xe=Math.sqrt(A*A+B*B),ht=(A/=Xe)*oe+(B/=Xe)*ve;oe-=A*ht,ve-=B*ht;var gt=Math.sqrt(oe*oe+ve*ve);return ht/=gt,A*(ve/=gt)<B*(oe/=gt)&&(A=-A,B=-B,ht=-ht,Xe=-Xe),{scale:new Tt(Xe,0,0,gt,0,0),translate:new Tt(1,0,0,1,Ae,He),rotate:new Tt(A,B,-B,A,0,0),skew:new Tt(1,0,ht,1,0,0)}},Tt.prototype.toString=function(A){return this.join(" ")},Tt.prototype.inversed=function(){var A=this.sx,B=this.shy,oe=this.shx,ve=this.sy,Ae=this.tx,He=this.ty,Xe=1/(A*ve-B*oe),ht=ve*Xe,gt=-B*Xe,Mt=-oe*Xe,Ct=A*Xe;return new Tt(ht,gt,Mt,Ct,-ht*Ae-Mt*He,-gt*Ae-Ct*He)},Tt.prototype.applyToPoint=function(A){var B=A.x*this.sx+A.y*this.shx+this.tx,oe=A.x*this.shy+A.y*this.sy+this.ty;return new hi(B,oe)},Tt.prototype.applyToRectangle=function(A){var B=this.applyToPoint(A),oe=this.applyToPoint(new hi(A.x+A.w,A.y+A.h));return new Gs(B.x,B.y,oe.x-B.x,oe.y-B.y)},Tt.prototype.clone=function(){var A=this.sx,B=this.shy,oe=this.shx,ve=this.sy,Ae=this.tx,He=this.ty;return new Tt(A,B,oe,ve,Ae,He)},b.Matrix=Tt;var pa=b.matrixMult=function(A,B){return B.multiply(A)},Ji=new Tt(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Ji;var Mi=function(A,B){if(!Pn[A]){var oe=(B instanceof $u?"Sh":"P")+(Object.keys(jt).length+1).toString(10);B.id=oe,Pn[A]=oe,jt[oe]=B,un.publish("addPattern",B)}};b.ShadingPattern=$u,b.TilingPattern=ah,b.addShadingPattern=function(A,B){return k("addShadingPattern()"),Mi(A,B),this},b.beginTilingPattern=function(A){k("beginTilingPattern()"),Ws(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},b.endTilingPattern=function(A,B){k("endTilingPattern()"),B.stream=et[J].join(`
`),Mi(A,B),un.publish("endTilingPattern",B),ei.pop().restore()};var Oi,Yn=b.__private__.newObject=function(){var A=sr();return zr(A,!0),A},sr=b.__private__.newObjectDeferred=function(){return pe++,we[pe]=function(){return Re},pe},zr=function(A,B){return B=typeof B=="boolean"&&B,we[A]=Re,B&&te(A+" 0 obj"),A},wi=b.__private__.newAdditionalObject=function(){var A={objId:sr(),content:""};return Ue.push(A),A},ui=sr(),qn=sr(),Qn=b.__private__.decodeColorString=function(A){var B=A.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length!==5||B[4]!=="k"&&B[4]!=="K"||(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var oe=parseFloat(B[0]);B=[oe,oe,oe,"r"]}for(var ve="#",Ae=0;Ae<3;Ae++)ve+=("0"+Math.floor(255*parseFloat(B[Ae])).toString(16)).slice(-2);return ve},Hr=b.__private__.encodeColorString=function(A){var B;typeof A=="string"&&(A={ch1:A});var oe=A.ch1,ve=A.ch2,Ae=A.ch3,He=A.ch4,Xe=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof oe=="string"&&oe.charAt(0)!=="#"){var ht=new sE(oe);if(ht.ok)oe=ht.toHex();else if(!/^\d*\.?\d*$/.test(oe))throw new Error('Invalid color "'+oe+'" passed to jsPDF.encodeColorString.')}if(typeof oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(oe)&&(oe="#"+oe[1]+oe[1]+oe[2]+oe[2]+oe[3]+oe[3]),typeof oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(oe)){var gt=parseInt(oe.substr(1),16);oe=gt>>16&255,ve=gt>>8&255,Ae=255&gt}if(ve===void 0||He===void 0&&oe===ve&&ve===Ae)B=typeof oe=="string"?oe+" "+Xe[0]:A.precision===2?S(oe/255)+" "+Xe[0]:L(oe/255)+" "+Xe[0];else if(He===void 0||nr(He)==="object"){if(He&&!isNaN(He.a)&&He.a===0)return["1.","1.","1.",Xe[1]].join(" ");B=typeof oe=="string"?[oe,ve,Ae,Xe[1]].join(" "):A.precision===2?[S(oe/255),S(ve/255),S(Ae/255),Xe[1]].join(" "):[L(oe/255),L(ve/255),L(Ae/255),Xe[1]].join(" ")}else B=typeof oe=="string"?[oe,ve,Ae,He,Xe[2]].join(" "):A.precision===2?[S(oe),S(ve),S(Ae),S(He),Xe[2]].join(" "):[L(oe),L(ve),L(Ae),L(He),Xe[2]].join(" ");return B},Fi=b.__private__.getFilters=function(){return c},gs=b.__private__.putStream=function(A){var B=(A=A||{}).data||"",oe=A.filters||Fi(),ve=A.alreadyAppliedFilters||[],Ae=A.addLength1||!1,He=B.length,Xe=A.objectId,ht=function(T){return T};if(p!==null&&Xe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(ht=mr.encryptor(Xe,0));var gt={};oe===!0&&(oe=["FlateEncode"]);var Mt=A.additionalKeyValues||[],Ct=(gt=Et.API.processDataByFilters!==void 0?Et.API.processDataByFilters(B,oe):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(ve)?ve.join(" "):ve.toString());if(gt.data.length!==0&&(Mt.push({key:"Length",value:gt.data.length}),Ae===!0&&Mt.push({key:"Length1",value:He})),Ct.length!=0)if(Ct.split("/").length-1==1)Mt.push({key:"Filter",value:Ct});else{Mt.push({key:"Filter",value:"["+Ct+"]"});for(var pn=0;pn<Mt.length;pn+=1)if(Mt[pn].key==="DecodeParms"){for(var ar=[],Kn=0;Kn<gt.reverseChain.split("/").length-1;Kn+=1)ar.push("null");ar.push(Mt[pn].value),Mt[pn].value="["+ar.join(" ")+"]"}}te("<<");for(var v=0;v<Mt.length;v++)te("/"+Mt[v].key+" "+Mt[v].value);te(">>"),gt.data.length!==0&&(te("stream"),te(ht(gt.data)),te("endstream"))},Fa=b.__private__.putPage=function(A){var B=A.number,oe=A.data,ve=A.objId,Ae=A.contentsObjId;zr(ve,!0),te("<</Type /Page"),te("/Parent "+A.rootDictionaryObjId+" 0 R"),te("/Resources "+A.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(D(A.mediaBox.bottomLeftX))+" "+parseFloat(D(A.mediaBox.bottomLeftY))+" "+D(A.mediaBox.topRightX)+" "+D(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&te("/CropBox ["+D(A.cropBox.bottomLeftX)+" "+D(A.cropBox.bottomLeftY)+" "+D(A.cropBox.topRightX)+" "+D(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&te("/BleedBox ["+D(A.bleedBox.bottomLeftX)+" "+D(A.bleedBox.bottomLeftY)+" "+D(A.bleedBox.topRightX)+" "+D(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&te("/TrimBox ["+D(A.trimBox.bottomLeftX)+" "+D(A.trimBox.bottomLeftY)+" "+D(A.trimBox.topRightX)+" "+D(A.trimBox.topRightY)+"]"),A.artBox!==null&&te("/ArtBox ["+D(A.artBox.bottomLeftX)+" "+D(A.artBox.bottomLeftY)+" "+D(A.artBox.topRightX)+" "+D(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&te("/UserUnit "+A.userUnit),un.publish("putPage",{objId:ve,pageContext:_t[B],pageNumber:B,page:oe}),te("/Contents "+Ae+" 0 R"),te(">>"),te("endobj");var He=oe.join(`
`);return z===$&&(He+=`
Q`),zr(Ae,!0),gs({data:He,filters:Fi(),objectId:Ae}),te("endobj"),ve},Rs=b.__private__.putPages=function(){var A,B,oe=[];for(A=1;A<=St;A++)_t[A].objId=sr(),_t[A].contentsObjId=sr();for(A=1;A<=St;A++)oe.push(Fa({number:A,data:et[A],objId:_t[A].objId,contentsObjId:_t[A].contentsObjId,mediaBox:_t[A].mediaBox,cropBox:_t[A].cropBox,bleedBox:_t[A].bleedBox,trimBox:_t[A].trimBox,artBox:_t[A].artBox,userUnit:_t[A].userUnit,rootDictionaryObjId:ui,resourceDictionaryObjId:qn}));zr(ui,!0),te("<</Type /Pages");var ve="/Kids [";for(B=0;B<St;B++)ve+=oe[B]+" 0 R ";te(ve+"]"),te("/Count "+St),te(">>"),te("endobj"),un.publish("postPutPages")},qi=function(A){un.publish("putFont",{font:A,out:te,newObject:Yn,putStream:gs}),A.isAlreadyPutted!==!0&&(A.objectNumber=Yn(),te("<<"),te("/Type /Font"),te("/BaseFont /"+rh(A.postScriptName)),te("/Subtype /Type1"),typeof A.encoding=="string"&&te("/Encoding /"+A.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},ga=function(A){A.objectNumber=Yn();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[D(A.x),D(A.y),D(A.x+A.width),D(A.y+A.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var oe=A.pages[1].join(`
`);gs({data:oe,additionalKeyValues:B,objectId:A.objectNumber}),te("endobj")},Zi=function(A,B){B||(B=21);var oe=Yn(),ve=(function(Xe,ht){var gt,Mt=[],Ct=1/(ht-1);for(gt=0;gt<1;gt+=Ct)Mt.push(gt);if(Mt.push(1),Xe[0].offset!=0){var pn={offset:0,color:Xe[0].color};Xe.unshift(pn)}if(Xe[Xe.length-1].offset!=1){var ar={offset:1,color:Xe[Xe.length-1].color};Xe.push(ar)}for(var Kn="",v=0,T=0;T<Mt.length;T++){for(gt=Mt[T];gt>Xe[v+1].offset;)v++;var O=Xe[v].offset,ee=(gt-O)/(Xe[v+1].offset-O),je=Xe[v].color,De=Xe[v+1].color;Kn+=fe(Math.round((1-ee)*je[0]+ee*De[0]).toString(16))+fe(Math.round((1-ee)*je[1]+ee*De[1]).toString(16))+fe(Math.round((1-ee)*je[2]+ee*De[2]).toString(16))}return Kn.trim()})(A.colors,B),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+B+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gs({data:ve,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:oe}),te("endobj"),A.objectNumber=Yn(),te("<< /ShadingType "+A.type),te("/ColorSpace /DeviceRGB");var He="/Coords ["+D(parseFloat(A.coords[0]))+" "+D(parseFloat(A.coords[1]))+" ";A.type===2?He+=D(parseFloat(A.coords[2]))+" "+D(parseFloat(A.coords[3])):He+=D(parseFloat(A.coords[2]))+" "+D(parseFloat(A.coords[3]))+" "+D(parseFloat(A.coords[4]))+" "+D(parseFloat(A.coords[5])),te(He+="]"),A.matrix&&te("/Matrix ["+A.matrix.toString()+"]"),te("/Function "+oe+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},_i=function(A,B){var oe=sr(),ve=Yn();B.push({resourcesOid:oe,objectOid:ve}),A.objectNumber=ve;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+A.boundingBox.map(D).join(" ")+"]"}),Ae.push({key:"XStep",value:D(A.xStep)}),Ae.push({key:"YStep",value:D(A.yStep)}),Ae.push({key:"Resources",value:oe+" 0 R"}),A.matrix&&Ae.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),gs({data:A.stream,additionalKeyValues:Ae,objectId:A.objectNumber}),te("endobj")},es=function(A){for(var B in A.objectNumber=Yn(),te("<<"),A)switch(B){case"opacity":te("/ca "+S(A[B]));break;case"stroke-opacity":te("/CA "+S(A[B]))}te(">>"),te("endobj")},vs=function(A){zr(A.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var B in te("/Font <<"),It)It.hasOwnProperty(B)&&(x===!1||x===!0&&N.hasOwnProperty(B))&&te("/"+B+" "+It[B].objectNumber+" 0 R");te(">>")})(),(function(){if(Object.keys(jt).length>0){for(var B in te("/Shading <<"),jt)jt.hasOwnProperty(B)&&jt[B]instanceof $u&&jt[B].objectNumber>=0&&te("/"+B+" "+jt[B].objectNumber+" 0 R");un.publish("putShadingPatternDict"),te(">>")}})(),(function(B){if(Object.keys(jt).length>0){for(var oe in te("/Pattern <<"),jt)jt.hasOwnProperty(oe)&&jt[oe]instanceof b.TilingPattern&&jt[oe].objectNumber>=0&&jt[oe].objectNumber<B&&te("/"+oe+" "+jt[oe].objectNumber+" 0 R");un.publish("putTilingPatternDict"),te(">>")}})(A.objectOid),(function(){if(Object.keys(qt).length>0){var B;for(B in te("/ExtGState <<"),qt)qt.hasOwnProperty(B)&&qt[B].objectNumber>=0&&te("/"+B+" "+qt[B].objectNumber+" 0 R");un.publish("putGStateDict"),te(">>")}})(),(function(){for(var B in te("/XObject <<"),ci)ci.hasOwnProperty(B)&&ci[B].objectNumber>=0&&te("/"+B+" "+ci[B].objectNumber+" 0 R");un.publish("putXobjectDict"),te(">>")})(),te(">>"),te("endobj")},br=function(A){Bt[A.fontName]=Bt[A.fontName]||{},Bt[A.fontName][A.fontStyle]=A.id},Bo=function(A,B,oe,ve,Ae){var He={id:"F"+(Object.keys(It).length+1).toString(10),postScriptName:A,fontName:B,fontStyle:oe,encoding:ve,isStandardFont:Ae||!1,metadata:{}};return un.publish("addFont",{font:He,instance:this}),It[He.id]=He,br(He),He.id},Vi=b.__private__.pdfEscape=b.pdfEscape=function(A,B){return(function(oe,ve){var Ae,He,Xe,ht,gt,Mt,Ct,pn,ar;if(Xe=(ve=ve||{}).sourceEncoding||"Unicode",gt=ve.outputEncoding,(ve.autoencode||gt)&&It[xt].metadata&&It[xt].metadata[Xe]&&It[xt].metadata[Xe].encoding&&(ht=It[xt].metadata[Xe].encoding,!gt&&It[xt].encoding&&(gt=It[xt].encoding),!gt&&ht.codePages&&(gt=ht.codePages[0]),typeof gt=="string"&&(gt=ht[gt]),gt)){for(Ct=!1,Mt=[],Ae=0,He=oe.length;Ae<He;Ae++)(pn=gt[oe.charCodeAt(Ae)])?Mt.push(String.fromCharCode(pn)):Mt.push(oe[Ae]),Mt[Ae].charCodeAt(0)>>8&&(Ct=!0);oe=Mt.join("")}for(Ae=oe.length;Ct===void 0&&Ae!==0;)oe.charCodeAt(Ae-1)>>8&&(Ct=!0),Ae--;if(!Ct)return oe;for(Mt=ve.noBOM?[]:[254,255],Ae=0,He=oe.length;Ae<He;Ae++){if((ar=(pn=oe.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+oe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Mt.push(ar),Mt.push(pn-(ar<<8))}return String.fromCharCode.apply(void 0,Mt)})(A,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ys=b.__private__.beginPage=function(A){et[++St]=[],_t[St]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},zo(St),Be(et[J])},Ls=function(A,B){var oe,ve,Ae;switch(t=B||t,typeof A=="string"&&(oe=R(A.toLowerCase()),Array.isArray(oe)&&(ve=oe[0],Ae=oe[1])),Array.isArray(A)&&(ve=A[0]*Kt,Ae=A[1]*Kt),isNaN(ve)&&(ve=i[0],Ae=i[1]),(ve>14400||Ae>14400)&&(yr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ve=Math.min(14400,ve),Ae=Math.min(14400,Ae)),i=[ve,Ae],t.substr(0,1)){case"l":Ae>ve&&(i=[Ae,ve]);break;case"p":ve>Ae&&(i=[Ae,ve])}ys(i),Lt(Bi),te(ns),is!==0&&te(is+" J"),Mr!==0&&te(Mr+" j"),un.publish("addPage",{pageNumber:St})},uo=function(A){A>0&&A<=St&&(et.splice(A,1),_t.splice(A,1),St--,J>St&&(J=St),this.setPage(J))},zo=function(A){A>0&&A<=St&&(J=A)},Ho=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return et.length-1},jl=function(A,B,oe){var ve,Ae=void 0;return oe=oe||{},A=A!==void 0?A:It[xt].fontName,B=B!==void 0?B:It[xt].fontStyle,ve=A.toLowerCase(),Bt[ve]!==void 0&&Bt[ve][B]!==void 0?Ae=Bt[ve][B]:Bt[A]!==void 0&&Bt[A][B]!==void 0?Ae=Bt[A][B]:oe.disableWarning===!1&&yr.warn("Unable to look up font label for font '"+A+"', '"+B+"'. Refer to getFontList() for available fonts."),Ae||oe.noFallback||(Ae=Bt.times[B])==null&&(Ae=Bt.times.normal),Ae},ts=b.__private__.putInfo=function(){var A=Yn(),B=function(ve){return ve};for(var oe in p!==null&&(B=mr.encryptor(A,0)),te("<<"),te("/Producer ("+Vi(B("jsPDF "+Et.version))+")"),tn)tn.hasOwnProperty(oe)&&tn[oe]&&te("/"+oe.substr(0,1).toUpperCase()+oe.substr(1)+" ("+Vi(B(tn[oe]))+")");te("/CreationDate ("+Vi(B(ye))+")"),te(">>"),te("endobj")},di=b.__private__.putCatalog=function(A){var B=(A=A||{}).rootDictionaryObjId||ui;switch(Yn(),te("<<"),te("/Type /Catalog"),te("/Pages "+B+" 0 R"),at||(at="fullwidth"),at){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var oe=""+at;oe.substr(oe.length-1)==="%"&&(at=parseInt(at)/100),typeof at=="number"&&te("/OpenAction [3 0 R /XYZ null null "+S(at)+"]")}switch(rn||(rn="continuous"),rn){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}At&&te("/PageMode /"+At),un.publish("putCatalog"),te(">>"),te("endobj")},Er=b.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(pe+1)),te("/Root "+pe+" 0 R"),te("/Info "+(pe-1)+" 0 R"),p!==null&&te("/Encrypt "+mr.oid+" 0 R"),te("/ID [ <"+Q+"> <"+Q+"> ]"),te(">>")},mn=b.__private__.putHeader=function(){te("%PDF-"+E),te("%")},va=b.__private__.putXRef=function(){var A="0000000000";te("xref"),te("0 "+(pe+1)),te("0000000000 65535 f ");for(var B=1;B<=pe;B++)typeof we[B]=="function"?te((A+we[B]()).slice(-10)+" 00000 n "):we[B]!==void 0?te((A+we[B]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},xs=b.__private__.buildDocument=function(){var A;pe=0,Re=0,Pe=[],we=[],Ue=[],ui=sr(),qn=sr(),Be(Pe),un.publish("buildDocument"),mn(),Rs(),(function(){un.publish("putAdditionalObjects");for(var oe=0;oe<Ue.length;oe++){var ve=Ue[oe];zr(ve.objId,!0),te(ve.content),te("endobj")}un.publish("postPutAdditionalObjects")})(),A=[],(function(){for(var oe in It)It.hasOwnProperty(oe)&&(x===!1||x===!0&&N.hasOwnProperty(oe))&&qi(It[oe])})(),(function(){var oe;for(oe in qt)qt.hasOwnProperty(oe)&&es(qt[oe])})(),(function(){for(var oe in ci)ci.hasOwnProperty(oe)&&ga(ci[oe])})(),(function(oe){var ve;for(ve in jt)jt.hasOwnProperty(ve)&&(jt[ve]instanceof $u?Zi(jt[ve]):jt[ve]instanceof ah&&_i(jt[ve],oe))})(A),un.publish("putResources"),A.forEach(vs),vs({resourcesOid:qn,objectOid:Number.MAX_SAFE_INTEGER}),un.publish("postPutResources"),p!==null&&(mr.oid=Yn(),te("<<"),te("/Filter /Standard"),te("/V "+mr.v),te("/R "+mr.r),te("/U <"+mr.toHexString(mr.U)+">"),te("/O <"+mr.toHexString(mr.O)+">"),te("/P "+mr.P),te(">>"),te("endobj")),ts(),di();var B=Re;return va(),Er(),te("startxref"),te(""+B),te("%%EOF"),Be(et[J]),Pe.join(`
`)},bn=b.__private__.getBlob=function(A){return new Blob([ct(A)],{type:"application/pdf"})},qa=b.output=b.__private__.output=(Oi=function(A,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",A){case void 0:return xs();case"save":b.save(B.filename);break;case"arraybuffer":return ct(xs());case"blob":return bn(xs());case"bloburi":case"bloburl":if(Xt.URL!==void 0&&typeof Xt.URL.createObjectURL=="function")return Xt.URL&&Xt.URL.createObjectURL(bn(xs()))||void 0;yr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var oe="",ve=xs();try{oe=hN(ve)}catch{oe=hN(unescape(encodeURIComponent(ve)))}return"data:application/pdf;filename="+B.filename+";base64,"+oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Xt)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",He=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(Ae=B.pdfObjectUrl,He="");var Xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+He+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",ht=Xt.open();return ht!==null&&ht.document.write(Xe),ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Xt)==="[object Window]"){var gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',Mt=Xt.open();if(Mt!==null){Mt.document.write(gt);var Ct=this;Mt.document.documentElement.querySelector("#pdfViewer").onload=function(){Mt.document.title=B.filename,Mt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ct.output("bloburl"))}}return Mt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Xt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',ar=Xt.open();if(ar!==null&&(ar.document.write(pn),ar.document.title=B.filename),ar||typeof safari>"u")return ar;break;case"datauri":case"dataurl":return Xt.document.location.href=this.output("datauristring",B);default:return null}},Oi.foo=function(){try{return Oi.apply(this,arguments)}catch(oe){var A=oe.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var B="Error in function "+A.split(`
`)[0].split("<")[0]+": "+oe.message;if(!Xt.console)throw new Error(B);Xt.console.error(B,oe),Xt.alert&&alert(B)}},Oi.foo.bar=Oi,Oi.foo),Dr=function(A){return Array.isArray(bi)===!0&&bi.indexOf(A)>-1};switch(r){case"pt":Kt=1;break;case"mm":Kt=72/25.4;break;case"cm":Kt=72/2.54;break;case"in":Kt=72;break;case"px":Kt=Dr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Kt=12;break;case"ex":Kt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Kt=r}var mr=null;X(),me();var jr=b.__private__.getPageInfo=b.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:_t[A].objId,pageNumber:A,pageContext:_t[A]}},ho=b.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in _t)if(_t[B].objId===A)break;return jr(B)},xc=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:_t[J].objId,pageNumber:J,pageContext:_t[J]}};b.addPage=function(){return Ls.apply(this,arguments),this},b.setPage=function(){return zo.apply(this,arguments),Be.call(this,et[J]),this},b.insertPage=function(A){return this.addPage(),this.movePage(J,A),this},b.movePage=function(A,B){var oe,ve;if(A>B){oe=et[A],ve=_t[A];for(var Ae=A;Ae>B;Ae--)et[Ae]=et[Ae-1],_t[Ae]=_t[Ae-1];et[B]=oe,_t[B]=ve,this.setPage(B)}else if(A<B){oe=et[A],ve=_t[A];for(var He=A;He<B;He++)et[He]=et[He+1],_t[He]=_t[He+1];et[B]=oe,_t[B]=ve,this.setPage(B)}return this},b.deletePage=function(){return uo.apply(this,arguments),this},b.__private__.text=b.text=function(A,B,oe,ve,Ae){var He,Xe,ht,gt,Mt,Ct,pn,ar,Kn,v=(ve=ve||{}).scope||this;if(typeof A=="number"&&typeof B=="number"&&(typeof oe=="string"||Array.isArray(oe))){var T=oe;oe=B,B=A,A=T}if(arguments[3]instanceof Tt==0?(ht=arguments[4],gt=arguments[5],nr(pn=arguments[3])==="object"&&pn!==null||(typeof ht=="string"&&(gt=ht,ht=null),typeof pn=="string"&&(gt=pn,pn=null),typeof pn=="number"&&(ht=pn,pn=null),ve={flags:pn,angle:ht,align:gt})):(k("The transform parameter of text() with a Matrix value"),Kn=Ae),isNaN(B)||isNaN(oe)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return v;var O,ee="",je=typeof ve.lineHeightFactor=="number"?ve.lineHeightFactor:ba,De=v.internal.scaleFactor;function nt(Dn){return Dn=Dn.split("	").join(Array(ve.TabLen||9).join(" ")),Vi(Dn,pn)}function Yt(Dn){for(var En,lr=Dn.concat(),Fr=[],Xa=lr.length;Xa--;)typeof(En=lr.shift())=="string"?Fr.push(En):Array.isArray(Dn)&&(En.length===1||En[1]===void 0&&En[2]===void 0)?Fr.push(En[0]):Fr.push([En[0],En[1],En[2]]);return Fr}function or(Dn,En){var lr;if(typeof Dn=="string")lr=En(Dn)[0];else if(Array.isArray(Dn)){for(var Fr,Xa,Aa=Dn.concat(),Dl=[],Tu=Aa.length;Tu--;)typeof(Fr=Aa.shift())=="string"?Dl.push(En(Fr)[0]):Array.isArray(Fr)&&typeof Fr[0]=="string"&&(Xa=En(Fr[0],Fr[1],Fr[2]),Dl.push([Xa[0],Xa[1],Xa[2]]));lr=Dl}return lr}var hn=!1,Un=!0;if(typeof A=="string")hn=!0;else if(Array.isArray(A)){var fi=A.concat();Xe=[];for(var Ai,Xn=fi.length;Xn--;)(typeof(Ai=fi.shift())!="string"||Array.isArray(Ai)&&typeof Ai[0]!="string")&&(Un=!1);hn=Un}if(hn===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var Si=ze/v.internal.scaleFactor,Ms=Si*(je-1);switch(ve.baseline){case"bottom":oe-=Ms;break;case"top":oe+=Si-Ms;break;case"hanging":oe+=Si-2*Ms;break;case"middle":oe+=Si/2-Ms}if((Ct=ve.maxWidth||0)>0&&(typeof A=="string"?A=v.splitTextToSize(A,Ct):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(Dn,En){return Dn.concat(v.splitTextToSize(En,Ct))},[]))),He={text:A,x:B,y:oe,options:ve,mutex:{pdfEscape:Vi,activeFontKey:xt,fonts:It,activeFontSize:ze}},un.publish("preProcessText",He),A=He.text,ht=(ve=He.options).angle,Kn instanceof Tt==0&&ht&&typeof ht=="number"){ht*=Math.PI/180,ve.rotationDirection===0&&(ht=-ht),z===$&&(ht=-ht);var Ha=Math.cos(ht),$a=Math.sin(ht);Kn=new Tt(Ha,$a,-$a,Ha,0,0)}else ht&&ht instanceof Tt&&(Kn=ht);z!==$||Kn||(Kn=Ji),(Mt=ve.charSpace||rs)!==void 0&&(ee+=D(F(Mt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ar=ve.horizontalScale)!==void 0&&(ee+=D(100*ar)+` Tz
`),ve.lang;var as=-1,vo=ve.renderingMode!==void 0?ve.renderingMode:ve.stroke,bc=v.internal.getCurrentPageInfo().pageContext;switch(vo){case 0:case!1:case"fill":as=0;break;case 1:case!0:case"stroke":as=1;break;case 2:case"fillThenStroke":as=2;break;case 3:case"invisible":as=3;break;case 4:case"fillAndAddForClipping":as=4;break;case 5:case"strokeAndAddPathForClipping":as=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":as=6;break;case 7:case"addToPathForClipping":as=7}var Eu=bc.usedRenderingMode!==void 0?bc.usedRenderingMode:-1;as!==-1?ee+=as+` Tr
`:Eu!==-1&&(ee+=`0 Tr
`),as!==-1&&(bc.usedRenderingMode=as),gt=ve.align||"left";var Os,_a=ze*je,yo=v.internal.pageSize.getWidth(),ju=It[xt];Mt=ve.charSpace||rs,Ct=ve.maxWidth||0,pn=Object.assign({autoencode:!0,noBOM:!0},ve.flags);var Na=[],Qo=function(Dn){return v.getStringUnitWidth(Dn,{font:ju,charSpace:Mt,fontSize:ze,doKerning:!1})*ze/De};if(Object.prototype.toString.call(A)==="[object Array]"){var ws;Xe=Yt(A),gt!=="left"&&(Os=Xe.map(Qo));var os,Ga=0;if(gt==="right"){B-=Os[0],A=[],Xn=Xe.length;for(var Wa=0;Wa<Xn;Wa++)Wa===0?(os=ni(B),ws=$r(oe)):(os=F(Ga-Os[Wa]),ws=-_a),A.push([Xe[Wa],os,ws]),Ga=Os[Wa]}else if(gt==="center"){B-=Os[0]/2,A=[],Xn=Xe.length;for(var xo=0;xo<Xn;xo++)xo===0?(os=ni(B),ws=$r(oe)):(os=F((Ga-Os[xo])/2),ws=-_a),A.push([Xe[xo],os,ws]),Ga=Os[xo]}else if(gt==="left"){A=[],Xn=Xe.length;for(var wc=0;wc<Xn;wc++)A.push(Xe[wc])}else if(gt==="justify"&&ju.encoding==="Identity-H"){A=[],Xn=Xe.length,Ct=Ct!==0?Ct:yo;for(var _c=0,Or=0;Or<Xn;Or++)if(ws=Or===0?$r(oe):-_a,os=Or===0?ni(B):_c,Or<Xn-1){var fd=F((Ct-Os[Or])/(Xe[Or].split(" ").length-1)),Ya=Xe[Or].split(" ");A.push([Ya[0]+" ",os,ws]),_c=0;for(var Ka=1;Ka<Ya.length;Ka++){var Ei=(Qo(Ya[Ka-1]+" "+Ya[Ka])-Qo(Ya[Ka]))*De+fd;Ka==Ya.length-1?A.push([Ya[Ka],Ei,0]):A.push([Ya[Ka]+" ",Ei,0]),_c-=Ei}}else A.push([Xe[Or],os,ws]);A.push(["",_c,0])}else{if(gt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],Xn=Xe.length,Ct=Ct!==0?Ct:yo,Or=0;Or<Xn;Or++){ws=Or===0?$r(oe):-_a,os=Or===0?ni(B):0;var bo=Xe[Or].split(" ").length-1,Nc=bo>0?(Ct-Os[Or])/bo:0;Or<Xn-1?Na.push(D(F(Nc))):Na.push(0),A.push([Xe[Or],os,ws])}}}(typeof ve.R2L=="boolean"?ve.R2L:Rt)===!0&&(A=or(A,function(Dn,En,lr){return[Dn.split("").reverse().join(""),En,lr]})),He={text:A,x:B,y:oe,options:ve,mutex:{pdfEscape:Vi,activeFontKey:xt,fonts:It,activeFontSize:ze}},un.publish("postProcessText",He),A=He.text,O=He.mutex.isHex||!1;var Ac=It[xt].encoding;Ac!=="WinAnsiEncoding"&&Ac!=="StandardEncoding"||(A=or(A,function(Dn,En,lr){return[nt(Dn),En,lr]})),Xe=Yt(A),A=[];for(var wo,_o,Qa,Pl=Array.isArray(Xe[0])?1:0,Fs="",No=function(Dn,En,lr){var Fr="";return lr instanceof Tt?(lr=typeof ve.angle=="number"?pa(lr,new Tt(1,0,0,1,Dn,En)):pa(new Tt(1,0,0,1,Dn,En),lr),z===$&&(lr=pa(new Tt(1,0,0,-1,0,0),lr)),Fr=lr.join(" ")+` Tm
`):Fr=D(Dn)+" "+D(En)+` Td
`,Fr},zi=0;zi<Xe.length;zi++){switch(Fs="",Pl){case 1:Qa=(O?"<":"(")+Xe[zi][0]+(O?">":")"),wo=parseFloat(Xe[zi][1]),_o=parseFloat(Xe[zi][2]);break;case 0:Qa=(O?"<":"(")+Xe[zi]+(O?">":")"),wo=ni(B),_o=$r(oe)}Na!==void 0&&Na[zi]!==void 0&&(Fs=Na[zi]+` Tw
`),zi===0?A.push(Fs+No(wo,_o,Kn)+Qa):Pl===0?A.push(Fs+Qa):Pl===1&&A.push(Fs+No(wo,_o,Kn)+Qa)}A=Pl===0?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var Qs=`BT
/`;return Qs+=xt+" "+ze+` Tf
`,Qs+=D(ze*je)+` TL
`,Qs+=Ps+`
`,Qs+=ee,Qs+=A,te(Qs+="ET"),N[xt]=!0,v};var Tl=b.__private__.clip=b.clip=function(A){return te(A==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return Tl("evenodd")},b.__private__.discardPath=b.discardPath=function(){return te("n"),this};var Ni=b.__private__.isValidStyle=function(A){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(B=!0),B};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(A){return Ni(A)&&(f=A),this};var Cl=b.__private__.getStyle=b.getStyle=function(A){var B=f;switch(A){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=A}return B},ya=b.close=function(){return te("h"),this};b.stroke=function(){return te("S"),this},b.fill=function(A){return ti("f",A),this},b.fillEvenOdd=function(A){return ti("f*",A),this},b.fillStroke=function(A){return ti("B",A),this},b.fillStrokeEvenOdd=function(A){return ti("B*",A),this};var ti=function(A,B){nr(B)==="object"?Rl(B,A):te(A)},Va=function(A){A===null||z===$&&A===void 0||(A=Cl(A),te(A))};function Il(A,B,oe,ve,Ae){var He=new ah(B||this.boundingBox,oe||this.xStep,ve||this.yStep,this.gState,Ae||this.matrix);He.stream=this.stream;var Xe=A+"$$"+this.cloneIndex+++"$$";return Mi(Xe,He),He}var Rl=function(A,B){var oe=Pn[A.key],ve=jt[oe];if(ve instanceof $u)te("q"),te($o(B)),ve.gState&&b.setGState(ve.gState),te(A.matrix.toString()+" cm"),te("/"+oe+" sh"),te("Q");else if(ve instanceof ah){var Ae=new Tt(1,0,0,-1,0,Ds());A.matrix&&(Ae=Ae.multiply(A.matrix||Ji),oe=Il.call(ve,A.key,A.boundingBox,A.xStep,A.yStep,Ae).id),te("q"),te("/Pattern cs"),te("/"+oe+" scn"),ve.gState&&b.setGState(ve.gState),te(B),te("Q")}},$o=function(A){switch(A){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Go=b.moveTo=function(A,B){return te(D(F(A))+" "+D(se(B))+" m"),this},xa=b.lineTo=function(A,B){return te(D(F(A))+" "+D(se(B))+" l"),this},Ui=b.curveTo=function(A,B,oe,ve,Ae,He){return te([D(F(A)),D(se(B)),D(F(oe)),D(se(ve)),D(F(Ae)),D(se(He)),"c"].join(" ")),this};b.__private__.line=b.line=function(A,B,oe,ve,Ae){if(isNaN(A)||isNaN(B)||isNaN(oe)||isNaN(ve)||!Ni(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return z===U?this.lines([[oe-A,ve-B]],A,B,[1,1],Ae||"S"):this.lines([[oe-A,ve-B]],A,B,[1,1]).stroke()},b.__private__.lines=b.lines=function(A,B,oe,ve,Ae,He){var Xe,ht,gt,Mt,Ct,pn,ar,Kn,v,T,O,ee;if(typeof A=="number"&&(ee=oe,oe=B,B=A,A=ee),ve=ve||[1,1],He=He||!1,isNaN(B)||isNaN(oe)||!Array.isArray(A)||!Array.isArray(ve)||!Ni(Ae)||typeof He!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Go(B,oe),Xe=ve[0],ht=ve[1],Mt=A.length,T=B,O=oe,gt=0;gt<Mt;gt++)(Ct=A[gt]).length===2?(T=Ct[0]*Xe+T,O=Ct[1]*ht+O,xa(T,O)):(pn=Ct[0]*Xe+T,ar=Ct[1]*ht+O,Kn=Ct[2]*Xe+T,v=Ct[3]*ht+O,T=Ct[4]*Xe+T,O=Ct[5]*ht+O,Ui(pn,ar,Kn,v,T,O));return He&&ya(),Va(Ae),this},b.path=function(A){for(var B=0;B<A.length;B++){var oe=A[B],ve=oe.c;switch(oe.op){case"m":Go(ve[0],ve[1]);break;case"l":xa(ve[0],ve[1]);break;case"c":Ui.apply(this,ve);break;case"h":ya()}}return this},b.__private__.rect=b.rect=function(A,B,oe,ve,Ae){if(isNaN(A)||isNaN(B)||isNaN(oe)||isNaN(ve)||!Ni(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return z===U&&(ve=-ve),te([D(F(A)),D(se(B)),D(F(oe)),D(F(ve)),"re"].join(" ")),Va(Ae),this},b.__private__.triangle=b.triangle=function(A,B,oe,ve,Ae,He,Xe){if(isNaN(A)||isNaN(B)||isNaN(oe)||isNaN(ve)||isNaN(Ae)||isNaN(He)||!Ni(Xe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[oe-A,ve-B],[Ae-oe,He-ve],[A-Ae,B-He]],A,B,[1,1],Xe,!0),this},b.__private__.roundedRect=b.roundedRect=function(A,B,oe,ve,Ae,He,Xe){if(isNaN(A)||isNaN(B)||isNaN(oe)||isNaN(ve)||isNaN(Ae)||isNaN(He)||!Ni(Xe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ht=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*oe),He=Math.min(He,.5*ve),this.lines([[oe-2*Ae,0],[Ae*ht,0,Ae,He-He*ht,Ae,He],[0,ve-2*He],[0,He*ht,-Ae*ht,He,-Ae,He],[2*Ae-oe,0],[-Ae*ht,0,-Ae,-He*ht,-Ae,-He],[0,2*He-ve],[0,-He*ht,Ae*ht,-He,Ae,-He]],A+Ae,B,[1,1],Xe,!0),this},b.__private__.ellipse=b.ellipse=function(A,B,oe,ve,Ae){if(isNaN(A)||isNaN(B)||isNaN(oe)||isNaN(ve)||!Ni(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var He=4/3*(Math.SQRT2-1)*oe,Xe=4/3*(Math.SQRT2-1)*ve;return Go(A+oe,B),Ui(A+oe,B-Xe,A+He,B-ve,A,B-ve),Ui(A-He,B-ve,A-oe,B-Xe,A-oe,B),Ui(A-oe,B+Xe,A-He,B+ve,A,B+ve),Ui(A+He,B+ve,A+oe,B+Xe,A+oe,B),Va(Ae),this},b.__private__.circle=b.circle=function(A,B,oe,ve){if(isNaN(A)||isNaN(B)||isNaN(oe)||!Ni(ve))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,B,oe,oe,ve)},b.setFont=function(A,B,oe){return oe&&(B=V(B,oe)),xt=jl(A,B,{disableWarning:!1}),this};var ks=b.__private__.getFont=b.getFont=function(){return It[jl.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var A,B,oe={};for(A in Bt)if(Bt.hasOwnProperty(A))for(B in oe[A]=[],Bt[A])Bt[A].hasOwnProperty(B)&&oe[A].push(B);return oe},b.addFont=function(A,B,oe,ve,Ae){var He=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&He.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&He.indexOf(arguments[3])==-1&&(oe=V(oe,ve)),Bo.call(this,A,B,oe,Ae=Ae||"Identity-H")};var ba,Bi=n.lineWidth||.200025,Ua=b.__private__.getLineWidth=b.getLineWidth=function(){return Bi},Lt=b.__private__.setLineWidth=b.setLineWidth=function(A){return Bi=A,te(D(F(A))+" w"),this};b.__private__.setLineDash=Et.API.setLineDash=Et.API.setLineDashPattern=function(A,B){if(A=A||[],B=B||0,isNaN(B)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(oe){return D(F(oe))}).join(" "),B=D(F(B)),te("["+A+"] "+B+" d"),this};var fo=b.__private__.getLineHeight=b.getLineHeight=function(){return ze*ba};b.__private__.getLineHeight=b.getLineHeight=function(){return ze*ba};var Wo=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(ba=A),this},Ba=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return ba};Wo(n.lineHeight);var ni=b.__private__.getHorizontalCoordinate=function(A){return F(A)},$r=b.__private__.getVerticalCoordinate=function(A){return z===$?A:_t[J].mediaBox.topRightY-_t[J].mediaBox.bottomLeftY-F(A)},mo=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(A){return D(ni(A))},Vn=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(A){return D($r(A))},ns=n.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return Qn(ns)},b.__private__.setStrokeColor=b.setDrawColor=function(A,B,oe,ve){return ns=Hr({ch1:A,ch2:B,ch3:oe,ch4:ve,pdfColorType:"draw",precision:2}),te(ns),this};var po=n.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return Qn(po)},b.__private__.setFillColor=b.setFillColor=function(A,B,oe,ve){return po=Hr({ch1:A,ch2:B,ch3:oe,ch4:ve,pdfColorType:"fill",precision:2}),te(po),this};var Ps=n.textColor||"0 g",Ll=b.__private__.getTextColor=b.getTextColor=function(){return Qn(Ps)};b.__private__.setTextColor=b.setTextColor=function(A,B,oe,ve){return Ps=Hr({ch1:A,ch2:B,ch3:oe,ch4:ve,pdfColorType:"text",precision:3}),this};var rs=n.charSpace,wa=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(rs||0)};b.__private__.setCharSpace=b.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return rs=A,this};var is=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(A){var B=b.CapJoinStyles[A];if(B===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return is=B,te(B+" J"),this};var Mr=0;b.__private__.setLineJoin=b.setLineJoin=function(A){var B=b.CapJoinStyles[A];if(B===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Mr=B,te(B+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(D(F(A))+" M"),this},b.GState=kg,b.setGState=function(A){(A=typeof A=="string"?qt[Vt[A]]:$s(null,A)).equals(Fn)||(te("/"+A.id+" gs"),Fn=A)};var $s=function(A,B){if(!A||!Vt[A]){var oe=!1;for(var ve in qt)if(qt.hasOwnProperty(ve)&&qt[ve].equals(B)){oe=!0;break}if(oe)B=qt[ve];else{var Ae="GS"+(Object.keys(qt).length+1).toString(10);qt[Ae]=B,B.id=Ae}return A&&(Vt[A]=B.id),un.publish("addGState",B),B}};b.addGState=function(A,B){return $s(A,B),this},b.saveGraphicsState=function(){return te("q"),Zt.push({key:xt,size:ze,color:Ps}),this},b.restoreGraphicsState=function(){te("Q");var A=Zt.pop();return xt=A.key,ze=A.size,Ps=A.color,Fn=null,this},b.setCurrentTransformationMatrix=function(A){return te(A.toString()+" cm"),this},b.comment=function(A){return te("#"+A),this};var hi=function(A,B){var oe=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return oe},set:function(He){isNaN(He)||(oe=parseFloat(He))}});var ve=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ve},set:function(He){isNaN(He)||(ve=parseFloat(He))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(He){Ae=He.toString()}}),this},Gs=function(A,B,oe,ve){hi.call(this,A,B),this.type="rect";var Ae=oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(Xe){isNaN(Xe)||(Ae=parseFloat(Xe))}});var He=ve||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return He},set:function(Xe){isNaN(Xe)||(He=parseFloat(Xe))}}),this},za=function(){this.page=St,this.currentPage=J,this.pages=et.slice(0),this.pagesContext=_t.slice(0),this.x=wt,this.y=xr,this.matrix=nn,this.width=bs(J),this.height=Yo(J),this.outputDestination=Ne,this.id="",this.objectNumber=-1};za.prototype.restore=function(){St=this.page,J=this.currentPage,_t=this.pagesContext,et=this.pages,wt=this.x,xr=this.y,nn=this.matrix,go(J,this.width),ss(J,this.height),Ne=this.outputDestination};var Ws=function(A,B,oe,ve,Ae){ei.push(new za),St=J=0,et=[],wt=A,xr=B,nn=Ae,ys([oe,ve])};for(var Ys in b.beginFormObject=function(A,B,oe,ve,Ae){return Ws(A,B,oe,ve,Ae),this},b.endFormObject=function(A){return(function(B){if(Hs[B])ei.pop().restore();else{var oe=new za,ve="Xo"+(Object.keys(ci).length+1).toString(10);oe.id=ve,Hs[B]=ve,ci[ve]=oe,un.publish("addFormObject",oe),ei.pop().restore()}})(A),this},b.doFormObject=function(A,B){var oe=ci[Hs[A]];return te("q"),te(B.toString()+" cm"),te("/"+oe.id+" Do"),te("Q"),this},b.getFormObject=function(A){var B=ci[Hs[A]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},b.save=function(A,B){return A=A||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(Hu(bn(xs()),A),typeof Hu.unload=="function"&&Xt.setTimeout&&setTimeout(Hu.unload,911),this):new Promise(function(oe,ve){try{var Ae=Hu(bn(xs()),A);typeof Hu.unload=="function"&&Xt.setTimeout&&setTimeout(Hu.unload,911),oe(Ae)}catch(He){ve(He.message)}})},Et.API)Et.API.hasOwnProperty(Ys)&&(Ys==="events"&&Et.API.events.length?(function(A,B){var oe,ve,Ae;for(Ae=B.length-1;Ae!==-1;Ae--)oe=B[Ae][0],ve=B[Ae][1],A.subscribe.apply(A,[oe].concat(typeof ve=="function"?[ve]:ve))})(un,Et.API.events):b[Ys]=Et.API[Ys]);function bs(A){return _t[A].mediaBox.topRightX-_t[A].mediaBox.bottomLeftX}function go(A,B){_t[A].mediaBox.topRightX=B+_t[A].mediaBox.bottomLeftX}function Yo(A){return _t[A].mediaBox.topRightY-_t[A].mediaBox.bottomLeftY}function ss(A,B){_t[A].mediaBox.topRightY=B+_t[A].mediaBox.bottomLeftY}var Ks=b.getPageWidth=function(A){return bs(A=A||J)/Kt},kl=b.setPageWidth=function(A,B){go(A,B*Kt)},Ds=b.getPageHeight=function(A){return Yo(A=A||J)/Kt},Ko=b.setPageHeight=function(A,B){ss(A,B*Kt)};return b.internal={pdfEscape:Vi,getStyle:Cl,getFont:ks,getFontSize:lt,getCharSpace:wa,getTextColor:Ll,getLineHeight:fo,getLineHeightFactor:Ba,getLineWidth:Ua,write:Ze,getHorizontalCoordinate:ni,getVerticalCoordinate:$r,getCoordinateString:mo,getVerticalCoordinateString:Vn,collections:{},newObject:Yn,newAdditionalObject:wi,newObjectDeferred:sr,newObjectDeferredBegin:zr,getFilters:Fi,putStream:gs,events:un,scaleFactor:Kt,pageSize:{getWidth:function(){return Ks(J)},setWidth:function(A){kl(J,A)},getHeight:function(){return Ds(J)},setHeight:function(A){Ko(J,A)}},encryptionOptions:p,encryption:mr,getEncryptor:function(A){return p!==null?mr.encryptor(A,0):function(B){return B}},output:qa,getNumberOfPages:Ho,get pages(){return et},out:te,f2:S,f3:L,getPageInfo:jr,getPageInfoByObjId:ho,getCurrentPageInfo:xc,getPDFVersion:C,Point:hi,Rectangle:Gs,Matrix:Tt,hasHotfix:Dr},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Ks(J)},set:function(A){kl(J,A)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Ds(J)},set:function(A){Ko(J,A)},enumerable:!0,configurable:!0}),(function(A){for(var B=0,oe=ot.length;B<oe;B++){var ve=Bo.call(this,A[B][0],A[B][1],A[B][2],ot[B][3],!0);x===!1&&(N[ve]=!0);var Ae=A[B][0].split("-");br({id:ve,fontName:Ae[0],fontStyle:Ae[1]||""})}un.publish("addFonts",{fonts:It,dictionary:Bt})}).call(b,ot),xt="F1",Ls(i,t),un.publish("initialized"),b}nh.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},nh.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},nh.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},nh.prototype.processOwnerPassword=function(n,e){return vy(gy(e).substr(0,5),n)},nh.prototype.encryptor=function(n,e){var t=gy(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return vy(t,r)}},kg.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||nr(n)!==nr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Et.API={events:[]},Et.version="3.0.4";var Jr=Et.API,zx=1,hd=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qd=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},on=function(n){return n.toFixed(2)},Qc=function(n){return n.toFixed(5)};Jr.__acroform__={};var ma=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},gN=function(n){return n*zx},dl=function(n){var e=new cE,t=yt.internal.getHeight(n)||0,r=yt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(on(r)),Number(on(t))],e},BF=Jr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},zF=Jr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},HF=Jr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},ai=Jr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return HF(n,e-1)},oi=Jr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return BF(n,e-1)},li=Jr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zF(n,e-1)},$F=Jr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],a=n[1],c=n[2],d=n[3],h={};return h.lowerLeft_X=t(i)||0,h.lowerLeft_Y=r(a+d)||0,h.upperRight_X=t(i+c)||0,h.upperRight_Y=r(a)||0,[Number(on(h.lowerLeft_X)),Number(on(h.lowerLeft_Y)),Number(on(h.upperRight_X)),Number(on(h.upperRight_Y))]},GF=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=yy(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+on(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=dl(n);return a.scope=n.scope,a.stream=e.join(`
`),a}},yy=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(S){return S.split(`
`)}):i.map(function(S){return[S]});var a=t,c=yt.internal.getHeight(n)||0;c=c<0?-c:c;var d=yt.internal.getWidth(n)||0;d=d<0?-d:d;var h=function(S,L,F){if(S+1<i.length){var se=L+" "+i[S+1][0];return Lp(se,n,F).width<=d-4}return!1};a++;e:for(;a>0;){e="",a--;var f,p,x=Lp("3",n,a).height,N=n.multiline?c-a:(c-x)/2,b=N+=2,E=0,C=0,I=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Lp(e,n,a=12).width+", FieldWidth:"+d+`
`;break}for(var R="",U=0,$=0;$<i.length;$++)if(i.hasOwnProperty($)){var z=!1;if(i[$].length!==1&&I!==i[$].length-1){if((x+2)*(U+2)+2>c)continue e;R+=i[$][I],z=!0,C=$,$--}else{R=(R+=i[$][I]+" ").substr(R.length-1)==" "?R.substr(0,R.length-1):R;var ue=parseInt($),ie=h(ue,R,a),V=$>=i.length-1;if(ie&&!V){R+=" ",I=0;continue}if(ie||V){if(V)C=ue;else if(n.multiline&&(x+2)*(U+2)+2>c)continue e}else{if(!n.multiline||(x+2)*(U+2)+2>c)continue e;C=ue}}for(var D="",k=E;k<=C;k++){var G=i[k];if(n.multiline){if(k===C){D+=G[I]+" ",I=(I+1)%G.length;continue}if(k===E){D+=G[G.length-1]+" ";continue}}D+=G[0]+" "}switch(D=D.substr(D.length-1)==" "?D.substr(0,D.length-1):D,p=Lp(D,n,a).width,n.textAlign){case"right":f=d-p-2;break;case"center":f=(d-p)/2;break;default:f=2}e+=on(f)+" "+on(b)+` Td
`,e+="("+hd(D)+`) Tj
`,e+=-on(f)+` 0 Td
`,b=-(a+2),p=0,E=z?C:C+1,U++,R=""}break}return r.text=e,r.fontSize=a,r},Lp=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},WF={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},YF=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},KF=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Vo.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(WF)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");zx=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new uE,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&YF(a,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var a=!r;for(var c in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(c)){var d=r[c],h=[],f=d.Rect;if(d.Rect&&(d.Rect=$F(d.Rect,i)),i.internal.newObjectDeferredBegin(d.objId,!0),d.DA=yt.createDefaultAppearanceStream(d),nr(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(h=d.getKeyValueListForStream()),d.Rect=f,d.hasAppearanceStream&&!d.appearanceStreamContent){var p=GF(d);h.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(d.appearanceStreamContent){var x="";for(var N in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(N)){var b=d.appearanceStreamContent[N];if(x+="/"+N+" ",x+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var c in b)if(b.hasOwnProperty(c)){var E=b[c];typeof E=="function"&&(E=E.call(i,d)),x+="/"+c+" "+E+" ",i.internal.acroformPlugin.xForms.indexOf(E)>=0||i.internal.acroformPlugin.xForms.push(E)}}else typeof(E=b)=="function"&&(E=E.call(i,d)),x+="/"+c+" "+E,i.internal.acroformPlugin.xForms.indexOf(E)>=0||i.internal.acroformPlugin.xForms.push(E);x+=">>"}h.push({key:"AP",value:`<<
`+x+">>"})}i.internal.putStream({additionalKeyValues:h,objectId:d.objId}),i.internal.out("endobj")}a&&(function(C,I){for(var R in C)if(C.hasOwnProperty(R)){var U=R,$=C[R];I.internal.newObjectDeferredBegin($.objId,!0),nr($)==="object"&&typeof $.putStream=="function"&&$.putStream(),delete C[U]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},lE=Jr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(c){return c};if(Array.isArray(n)){for(var i="[",a=0;a<n.length;a++)switch(a!==0&&(i+=" "),nr(n[a])){case"boolean":case"number":case"object":i+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+hd(r(n[a].toString()))+")"):i+=n[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},yv=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+hd(r(n))+")"},ml=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ml.prototype.toString=function(){return this.objId+" 0 R"},ml.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ml.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:lE(i,this.objId,this.scope)}):i instanceof ml?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var cE=function(){ml.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};ma(cE,ml);var uE=function(){ml.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+hd(t(n))+")"}},set:function(t){n=t}})};ma(uE,ml);var Vo=function n(){ml.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(R){if(isNaN(R))throw new Error('Invalid value "'+R+'" for attribute F supplied.');e=R}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ai(e,3)},set:function(R){R?this.F=oi(e,3):this.F=li(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(R){if(isNaN(R))throw new Error('Invalid value "'+R+'" for attribute Ff supplied.');t=R}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(R){r=R!==void 0?R:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(R){r[0]=R}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(R){r[1]=R}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(R){r[2]=R}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(R){r[3]=R}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(R){switch(R){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=R;break;default:throw new Error('Invalid value "'+R+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Pg)return;a="FieldObject"+n.FieldNum++}var R=function(U){return U};return this.scope&&(R=this.scope.internal.getEncryptor(this.objId)),"("+hd(R(a))+")"},set:function(R){a=R.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(R){a=R}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(R){c=R}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(R){d=R}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(R){h=R}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/zx:f},set:function(R){f=R}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(R){p=R}});var x="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!x||this instanceof Pg||this instanceof Ku))return yv(x,this.objId,this.scope)},set:function(R){R=R.toString(),x=R}});var N=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(N)return this instanceof Qi==0?yv(N,this.objId,this.scope):N},set:function(R){R=R.toString(),N=this instanceof Qi==0?R.substr(0,1)==="("?Qd(R.substr(1,R.length-2)):Qd(R):R}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qi==1?Qd(N.substr(1,N.length-1)):N},set:function(R){R=R.toString(),N=this instanceof Qi==1?"/"+R:R}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(R){this.V=R}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Qi==0?yv(b,this.objId,this.scope):b},set:function(R){R=R.toString(),b=this instanceof Qi==0?R.substr(0,1)==="("?Qd(R.substr(1,R.length-2)):Qd(R):R}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qi==1?Qd(b.substr(1,b.length-1)):b},set:function(R){R=R.toString(),b=this instanceof Qi==1?"/"+R:R}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var E,C=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return C},set:function(R){R=!!R,C=R}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(E)return E},set:function(R){E=R}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,1)},set:function(R){R?this.Ff=oi(this.Ff,1):this.Ff=li(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,2)},set:function(R){R?this.Ff=oi(this.Ff,2):this.Ff=li(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,3)},set:function(R){R?this.Ff=oi(this.Ff,3):this.Ff=li(this.Ff,3)}});var I=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(I!==null)return I},set:function(R){if([0,1,2].indexOf(R)===-1)throw new Error('Invalid value "'+R+'" for attribute Q supplied.');I=R}}),Object.defineProperty(this,"textAlign",{get:function(){var R;switch(I){case 0:default:R="left";break;case 1:R="center";break;case 2:R="right"}return R},configurable:!0,enumerable:!0,set:function(R){switch(R){case"right":case 2:I=2;break;case"center":case 1:I=1;break;default:I=0}}})};ma(Vo,ml);var fh=function(){Vo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return lE(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(a,c,d){d||(d=1);for(var h,f=[];h=c.exec(a);)f.push(h[d]);return f})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,18)},set:function(t){t?this.Ff=oi(this.Ff,18):this.Ff=li(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=oi(this.Ff,19):this.Ff=li(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,20)},set:function(t){t?(this.Ff=oi(this.Ff,20),e.sort()):this.Ff=li(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,22)},set:function(t){t?this.Ff=oi(this.Ff,22):this.Ff=li(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(t){t?this.Ff=oi(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,27)},set:function(t){t?this.Ff=oi(this.Ff,27):this.Ff=li(this.Ff,27)}}),this.hasAppearanceStream=!1};ma(fh,Vo);var mh=function(){fh.call(this),this.fontName="helvetica",this.combo=!1};ma(mh,fh);var ph=function(){mh.call(this),this.combo=!0};ma(ph,mh);var Zp=function(){ph.call(this),this.edit=!0};ma(Zp,ph);var Qi=function(){Vo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,15)},set:function(t){t?this.Ff=oi(this.Ff,15):this.Ff=li(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,16)},set:function(t){t?this.Ff=oi(this.Ff,16):this.Ff=li(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,17)},set:function(t){t?this.Ff=oi(this.Ff,17):this.Ff=li(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(t){t?this.Ff=oi(this.Ff,26):this.Ff=li(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+hd(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){nr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};ma(Qi,Vo);var eg=function(){Qi.call(this),this.pushButton=!0};ma(eg,Qi);var gh=function(){Qi.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ma(gh,Qi);var Pg=function(){var n,e;Vo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(d){return d};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,c=[];for(a in c.push("<<"),r)c.push("/"+a+" ("+hd(i(r[a]))+")");return c.push(">>"),c.join(`
`)},set:function(i){nr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ma(Pg,Vo),gh.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},gh.prototype.createOption=function(n){var e=new Pg;return e.Parent=this,e.optionName=n,this.Kids.push(e),QF.call(this.scope,e),e};var tg=function(){Qi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};ma(tg,Qi);var Ku=function(){Vo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,13)},set:function(e){e?this.Ff=oi(this.Ff,13):this.Ff=li(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,21)},set:function(e){e?this.Ff=oi(this.Ff,21):this.Ff=li(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(e){e?this.Ff=oi(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,24)},set:function(e){e?this.Ff=oi(this.Ff,24):this.Ff=li(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,25)},set:function(e){e?this.Ff=oi(this.Ff,25):this.Ff=li(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(e){e?this.Ff=oi(this.Ff,26):this.Ff=li(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ma(Ku,Vo);var ng=function(){Ku.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,14)},set:function(n){n?this.Ff=oi(this.Ff,14):this.Ff=li(this.Ff,14)}}),this.password=!0};ma(ng,Ku);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=dl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),a=yy(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+on(a.fontSize)+" Tf "+i),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=dl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],a=yt.internal.getHeight(n),c=yt.internal.getWidth(n),d=yy(n,n.caption);return i.push("1 g"),i.push("0 0 "+on(c)+" "+on(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+on(c-1)+" "+on(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+on(d.fontSize)+" Tf "+r),i.push(d.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=dl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Circle.YesNormal,e.D[n]=yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=dl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=yt.internal.Bezier_C,a=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Qc(yt.internal.getWidth(n)/2)+" "+Qc(yt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=dl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*yt.internal.Bezier_C).toFixed(5)),c=Number((r*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qc(yt.internal.getWidth(n)/2)+" "+Qc(yt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Qc(yt.internal.getWidth(n)/2)+" "+Qc(yt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),t.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),t.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),t.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=dl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Qc(yt.internal.getWidth(n)/2)+" "+Qc(yt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Cross.YesNormal,e.D[n]=yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=dl(n);e.scope=n.scope;var t=[],r=yt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+on(yt.internal.getWidth(n)-2)+" "+on(yt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(on(r.x1.x)+" "+on(r.x1.y)+" m"),t.push(on(r.x2.x)+" "+on(r.x2.y)+" l"),t.push(on(r.x4.x)+" "+on(r.x4.y)+" m"),t.push(on(r.x3.x)+" "+on(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=dl(n);e.scope=n.scope;var t=yt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+on(yt.internal.getWidth(n)-2)+" "+on(yt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(on(t.x1.x)+" "+on(t.x1.y)+" m"),r.push(on(t.x2.x)+" "+on(t.x2.y)+" l"),r.push(on(t.x4.x)+" "+on(t.x4.y)+" m"),r.push(on(t.x3.x)+" "+on(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=dl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+on(yt.internal.getWidth(n))+" "+on(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};yt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=yt.internal.getWidth(n),t=yt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},yt.internal.getWidth=function(n){var e=0;return nr(n)==="object"&&(e=gN(n.Rect[2])),e},yt.internal.getHeight=function(n){var e=0;return nr(n)==="object"&&(e=gN(n.Rect[3])),e};var QF=Jr.addField=function(n){if(KF(this,n),!(n instanceof Vo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Jr.AcroFormChoiceField=fh,Jr.AcroFormListBox=mh,Jr.AcroFormComboBox=ph,Jr.AcroFormEditBox=Zp,Jr.AcroFormButton=Qi,Jr.AcroFormPushButton=eg,Jr.AcroFormRadioButton=gh,Jr.AcroFormCheckBox=tg,Jr.AcroFormTextField=Ku,Jr.AcroFormPasswordField=ng,Jr.AcroFormAppearance=yt,Jr.AcroForm={ChoiceField:fh,ListBox:mh,ComboBox:ph,EditBox:Zp,Button:Qi,PushButton:eg,RadioButton:gh,CheckBox:tg,TextField:Ku,PasswordField:ng,Appearance:yt},Et.AcroForm={ChoiceField:fh,ListBox:mh,ComboBox:ph,EditBox:Zp,Button:Qi,PushButton:eg,RadioButton:gh,CheckBox:tg,TextField:Ku,PasswordField:ng,Appearance:yt};Et.AcroForm;function dE(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(S,L){var F,se,ye,Q,ce,me=t;if((L=L||t)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(ie(S))for(ce in r)for(ye=r[ce],F=0;F<ye.length;F+=1){for(Q=!0,se=0;se<ye[F].length;se+=1)if(ye[F][se]!==void 0&&ye[F][se]!==S[se]){Q=!1;break}if(Q===!0){me=ce;break}}else for(ce in r)for(ye=r[ce],F=0;F<ye.length;F+=1){for(Q=!0,se=0;se<ye[F].length;se+=1)if(ye[F][se]!==void 0&&ye[F][se]!==S.charCodeAt(se)){Q=!1;break}if(Q===!0){me=ce;break}}return me===t&&L!==t&&(me=L),me},a=function S(L){for(var F=this.internal.write,se=this.internal.putStream,ye=(0,this.internal.getFilters)();ye.indexOf("FlateEncode")!==-1;)ye.splice(ye.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:L.width}),Q.push({key:"Height",value:L.height}),L.colorSpace===R.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===R.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var ce="",me=0,Se=L.transparency.length;me<Se;me++)ce+=L.transparency[me]+" "+L.transparency[me]+" ";Q.push({key:"Mask",value:"["+ce+"]"})}L.sMask!==void 0&&Q.push({key:"SMask",value:L.objectId+1+" 0 R"});var Fe=L.filter!==void 0?["/"+L.filter]:void 0;if(se({data:L.data,additionalKeyValues:Q,alreadyAppliedFilters:Fe,objectId:L.objectId}),F("endobj"),"sMask"in L&&L.sMask!==void 0){var X,q=(X=L.sMaskBitsPerComponent)!==null&&X!==void 0?X:L.bitsPerComponent,J={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:q,data:L.sMask};"filter"in L&&(J.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(q," /Columns ").concat(L.width),J.filter=L.filter),S.call(this,J)}if(L.colorSpace===R.INDEXED){var re=this.internal.newObject();se({data:D(new Uint8Array(L.palette)),objectId:re}),F("endobj")}},c=function(){var S=this.internal.collections[e+"images"];for(var L in S)a.call(this,S[L])},d=function(){var S,L=this.internal.collections[e+"images"],F=this.internal.write;for(var se in L)F("/I"+(S=L[se]).index,S.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",d))},f=function(){var S=this.internal.collections[e+"images"];return h.call(this),S},p=function(){return Object.keys(this.internal.collections[e+"images"]).length},x=function(S){return typeof n["process"+S.toUpperCase()]=="function"},N=function(S){return nr(S)==="object"&&S.nodeType===1},b=function(S,L){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var F=""+S.getAttribute("src");if(F.indexOf("data:image/")===0)return Jp(unescape(F).split("base64,").pop());var se=n.loadFile(F,!0);if(se!==void 0)return se}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var ye;switch(L){case"PNG":ye="image/png";break;case"WEBP":ye="image/webp";break;default:ye="image/jpeg"}return Jp(S.toDataURL(ye,1).split("base64,").pop())}},E=function(S){var L=this.internal.collections[e+"images"];if(L){for(var F in L)if(S===L[F].alias)return L[F]}},C=function(S,L,F){return S||L||(S=-96,L=-96),S<0&&(S=-1*F.width*72/S/this.internal.scaleFactor),L<0&&(L=-1*F.height*72/L/this.internal.scaleFactor),S===0&&(S=L*F.width/F.height),L===0&&(L=S*F.height/F.width),[S,L]},I=function(S,L,F,se,ye,Q){var ce=C.call(this,F,se,ye),me=this.internal.getCoordinateString,Se=this.internal.getVerticalCoordinateString,Fe=f.call(this);if(F=ce[0],se=ce[1],Fe[ye.index]=ye,Q){Q*=Math.PI/180;var X=Math.cos(Q),q=Math.sin(Q),J=function(fe){return fe.toFixed(4)},re=[J(X),J(q),J(-1*q),J(X),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,me(S),Se(L+se),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([me(F),"0","0",me(se),"0","0","cm"].join(" "))):this.internal.write([me(F),"0","0",me(se),me(S),Se(L+se),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ye.index+" Do"),this.internal.write("Q")},R=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var U=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},$=n.__addimage__.sHashCode=function(S){var L,F,se=0;if(typeof S=="string")for(F=S.length,L=0;L<F;L++)se=(se<<5)-se+S.charCodeAt(L),se|=0;else if(ie(S))for(F=S.byteLength/2,L=0;L<F;L++)se=(se<<5)-se+S[L],se|=0;return se},z=n.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var L=!0;return S.length===0&&(L=!1),S.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(L=!1),L},ue=n.__addimage__.extractImageFromDataUrl=function(S){if(S==null||!(S=S.trim()).startsWith("data:"))return null;var L=S.indexOf(",");return L<0?null:S.substring(0,L).trim().endsWith("base64")?S.substring(L+1):null};n.__addimage__.isArrayBuffer=function(S){return S instanceof ArrayBuffer};var ie=n.__addimage__.isArrayBufferView=function(S){return S instanceof Int8Array||S instanceof Uint8Array||S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array},V=n.__addimage__.binaryStringToUint8Array=function(S){for(var L=S.length,F=new Uint8Array(L),se=0;se<L;se++)F[se]=S.charCodeAt(se);return F},D=n.__addimage__.arrayBufferToBinaryString=function(S){for(var L="",F=ie(S)?S:new Uint8Array(S),se=0;se<F.length;se+=8192)L+=String.fromCharCode.apply(null,F.subarray(se,se+8192));return L};n.addImage=function(){var S,L,F,se,ye,Q,ce,me,Se;if(typeof arguments[1]=="number"?(L=t,F=arguments[1],se=arguments[2],ye=arguments[3],Q=arguments[4],ce=arguments[5],me=arguments[6],Se=arguments[7]):(L=arguments[1],F=arguments[2],se=arguments[3],ye=arguments[4],Q=arguments[5],ce=arguments[6],me=arguments[7],Se=arguments[8]),nr(S=arguments[0])==="object"&&!N(S)&&"imageData"in S){var Fe=S;S=Fe.imageData,L=Fe.format||L||t,F=Fe.x||F||0,se=Fe.y||se||0,ye=Fe.w||Fe.width||ye,Q=Fe.h||Fe.height||Q,ce=Fe.alias||ce,me=Fe.compression||me,Se=Fe.rotation||Fe.angle||Se}var X=this.internal.getFilters();if(me===void 0&&X.indexOf("FlateEncode")!==-1&&(me="SLOW"),isNaN(F)||isNaN(se))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var q=k.call(this,S,L,ce,me);return I.call(this,F,se,ye,Q,q,Se),this};var k=function(S,L,F,se){var ye,Q,ce;if(typeof S=="string"&&i(S)===t){S=unescape(S);var me=G(S,!1);(me!==""||(me=n.loadFile(S,!0))!==void 0)&&(S=me)}if(N(S)&&(S=b(S,L)),L=i(S,L),!x(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((ce=F)==null||ce.length===0)&&(F=(function(Se){return typeof Se=="string"||ie(Se)?$(Se):ie(Se.data)?$(Se.data):null})(S)),(ye=E.call(this,F))||(S instanceof Uint8Array||L==="RGBA"||(Q=S,S=V(S)),ye=this["process"+L.toUpperCase()](S,p.call(this),F,(function(Se){return Se&&typeof Se=="string"&&(Se=Se.toUpperCase()),Se in n.image_compression?Se:U.NONE})(se),Q)),!ye)throw new Error("An unknown error occurred whilst processing the image.");return ye},G=n.__addimage__.convertBase64ToBinaryString=function(S,L){L=typeof L!="boolean"||L;var F,se="";if(typeof S=="string"){var ye;F=(ye=ue(S))!==null&&ye!==void 0?ye:S;try{se=Jp(F)}catch(Q){if(L)throw z(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return se};n.getImageProperties=function(S){var L,F,se="";if(N(S)&&(S=b(S)),typeof S=="string"&&i(S)===t&&((se=G(S,!1))===""&&(se=n.loadFile(S)||""),S=se),F=i(S),!x(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(S instanceof Uint8Array||(S=V(S)),!(L=this["process"+F.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=F,L}})(Et.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Et.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,a,c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,p=!1,x=0;x<f.length&&!p;x++)switch((r=f[x]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var N=0;N<f.length;N++){r=f[N];var b=this.internal.pdfEscape,E=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var C=this.internal.newAdditionalObject(),I=this.internal.newAdditionalObject(),R=this.internal.getEncryptor(C.objId),U=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+c(r.bounds.x)+" "+d(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y)+"] ")+"/Contents ("+b(R(r.contents))+")",a+=" /Popup "+I.objId+" 0 R",a+=" /P "+h.objId+" 0 R",a+=" /T ("+b(R(U))+") >>",C.content=a;var $=C.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+c(r.bounds.x+30)+" "+d(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w+30)+" "+d(r.bounds.y)+"] ")+" /Parent "+$,r.open&&(a+=" /Open true"),a+=" >>",I.content=a,this.internal.write(C.objId,"0 R",I.objId,"0 R");break;case"freetext":i="/Rect ["+c(r.bounds.x)+" "+d(r.bounds.y)+" "+c(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y+r.bounds.h)+"] ";var z=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+b(E(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+z+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var ue=this.annotations._nameMap[r.options.name];r.options.pageNumber=ue.page,r.options.top=ue.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+b(E(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var ie=d(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+ie+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,a,c){var d=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:h(t),y:f(r),w:h(t+i),h:f(r+a)},options:c,type:"link"})},n.textWithLink=function(t,r,i,a){var c,d,h=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){d=a.maxWidth;var p=this.splitTextToSize(t,d).length;c=Math.ceil(f*p)}else d=h,c=f;return this.text(t,r,i,a),i+=.2*f,a.align==="center"&&(r-=h/2),a.align==="right"&&(r-=h),this.link(r,i-f,d,c,a),h},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(Et.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(C){return e[C.charCodeAt(0)]!==void 0},c=n.__arabicParser__.isArabicLetter=function(C){return typeof C=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(C)},d=n.__arabicParser__.isArabicEndLetter=function(C){return c(C)&&a(C)&&e[C.charCodeAt(0)].length<=2},h=n.__arabicParser__.isArabicAlfLetter=function(C){return c(C)&&i.indexOf(C.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(C){return c(C)&&a(C)&&e[C.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(C){return c(C)&&a(C)&&e[C.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(C){return c(C)&&a(C)&&e[C.charCodeAt(0)].length>=3};var p=n.__arabicParser__.arabicLetterHasMedialForm=function(C){return c(C)&&a(C)&&e[C.charCodeAt(0)].length==4},x=n.__arabicParser__.resolveLigatures=function(C){var I=0,R=t,U="",$=0;for(I=0;I<C.length;I+=1)R[C.charCodeAt(I)]!==void 0?($++,typeof(R=R[C.charCodeAt(I)])=="number"&&(U+=String.fromCharCode(R),R=t,$=0),I===C.length-1&&(R=t,U+=C.charAt(I-($-1)),I-=$-1,$=0)):(R=t,U+=C.charAt(I-$),I-=$,$=0);return U};n.__arabicParser__.isArabicDiacritic=function(C){return C!==void 0&&r[C.charCodeAt(0)]!==void 0};var N=n.__arabicParser__.getCorrectForm=function(C,I,R){return c(C)?a(C)===!1?-1:!f(C)||!c(I)&&!c(R)||!c(R)&&d(I)||d(C)&&!c(I)||d(C)&&h(I)||d(C)&&d(I)?0:p(C)&&c(I)&&!d(I)&&c(R)&&f(R)?3:d(C)||!c(R)?1:2:-1},b=function(C){var I=0,R=0,U=0,$="",z="",ue="",ie=(C=C||"").split("\\s+"),V=[];for(I=0;I<ie.length;I+=1){for(V.push(""),R=0;R<ie[I].length;R+=1)$=ie[I][R],z=ie[I][R-1],ue=ie[I][R+1],c($)?(U=N($,z,ue),V[I]+=U!==-1?String.fromCharCode(e[$.charCodeAt(0)][U]):$):V[I]+=$;V[I]=x(V[I])}return V.join(" ")},E=n.__arabicParser__.processArabic=n.processArabic=function(){var C,I=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,R=[];if(Array.isArray(I)){var U=0;for(R=[],U=0;U<I.length;U+=1)Array.isArray(I[U])?R.push([b(I[U][0]),I[U][1],I[U][2]]):R.push([b(I[U])]);C=R}else C=b(I);return typeof arguments[0]=="string"?C:(arguments[0].text=C,arguments[0])};n.events.push(["preProcessText",E])})(Et.API),Et.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(d){r=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(d){i=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(d){a=d}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(d){c=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Et.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(C){h=C}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(C){f=C}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(C){p=C}});var x=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return x},set:function(C){x=C}});var N=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return N},set:function(C){N=C}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(C){b=C}});var E=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return E},set:function(C){E=C}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(h){return r.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},n.getTextDimensions=function(h,f){r.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),x=f.font||this.getFont(),N=f.scaleFactor||this.internal.scaleFactor,b=0,E=0,C=0,I=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var R=f.maxWidth;R>0?typeof h=="string"?h=this.splitTextToSize(h,R):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function($,z){return $.concat(I.splitTextToSize(z,R))},[])):h=Array.isArray(h)?h:[h];for(var U=0;U<h.length;U++)b<(C=this.getStringUnitWidth(h[U],{font:x})*p)&&(b=C);return b!==0&&(E=h.length),{w:b/=N,h:Math.max((E*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/N,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=n.cell=function(){var h;h=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,x=this.internal.__cell__.margins||e,N=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+x.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=x.top,b&&N&&(this.printHeaderRow(h.lineNumber,!0),h.y+=N[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-p,h.y+p,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+p,{align:"center",baseline:"top",maxWidth:h.width-p-p}):this.text(h.text,h.x+p,h.y+p,{align:"left",baseline:"top",maxWidth:h.width-p-p})),this.internal.__cell__.lastCell=h,this};n.table=function(h,f,p,x,N){if(r.call(this),!p)throw new Error("No data for PDF table.");var b,E,C,I,R=[],U=[],$=[],z={},ue={},ie=[],V=[],D=(N=N||{}).autoSize||!1,k=N.printHeaders!==!1,G=N.css&&N.css["font-size"]!==void 0?16*N.css["font-size"]:N.fontSize||12,S=N.margins||Object.assign({width:this.getPageWidth()},e),L=typeof N.padding=="number"?N.padding:3,F=N.headerBackgroundColor||"#c8c8c8",se=N.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=G,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=se,this.setFontSize(G),x==null)U=R=Object.keys(p[0]),$=R.map(function(){return"left"});else if(Array.isArray(x)&&nr(x[0])==="object")for(R=x.map(function(Fe){return Fe.name}),U=x.map(function(Fe){return Fe.prompt||Fe.name||""}),$=x.map(function(Fe){return Fe.align||"left"}),b=0;b<x.length;b+=1)ue[x[b].name]=.7499990551181103*x[b].width;else Array.isArray(x)&&typeof x[0]=="string"&&(U=R=x,$=R.map(function(){return"left"}));if(D||Array.isArray(x)&&typeof x[0]=="string")for(b=0;b<R.length;b+=1){for(z[I=R[b]]=p.map(function(Fe){return Fe[I]}),this.setFont(void 0,"bold"),ie.push(this.getTextDimensions(U[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),E=z[I],this.setFont(void 0,"normal"),C=0;C<E.length;C+=1)ie.push(this.getTextDimensions(E[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ue[I]=Math.max.apply(null,ie)+L+L,ie=[]}if(k){var ye={};for(b=0;b<R.length;b+=1)ye[R[b]]={},ye[R[b]].text=U[b],ye[R[b]].align=$[b];var Q=d.call(this,ye,ue);V=R.map(function(Fe){return new a(h,f,ue[Fe],Q,ye[Fe].text,void 0,ye[Fe].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var ce=x.reduce(function(Fe,X){return Fe[X.name]=X.align,Fe},{});for(b=0;b<p.length;b+=1){"rowStart"in N&&N.rowStart instanceof Function&&N.rowStart({row:b,data:p[b]},this);var me=d.call(this,p[b],ue);for(C=0;C<R.length;C+=1){var Se=p[b][R[C]];"cellStart"in N&&N.cellStart instanceof Function&&N.cellStart({row:b,col:C,data:Se},this),c.call(this,new a(h,f,ue[R[C]],me,Se,b+2,ce[R[C]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var d=function(h,f){var p=this.internal.__cell__.padding,x=this.internal.__cell__.table_font_size,N=this.internal.scaleFactor;return Object.keys(h).map(function(b){var E=h[b];return this.splitTextToSize(E.hasOwnProperty("text")?E.text:E,f[b]-p-p)},this).map(function(b){return this.getLineHeightFactor()*b.length*x/N+p+p},this).reduce(function(b,E){return Math.max(b,E)},0)};n.setTableHeaderRow=function(h){r.call(this),this.internal.__cell__.tableHeaderRow=h},n.printHeaderRow=function(h,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var x=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(x[0],x[1],x[2],x[3],void 0,-1)}this.setFont(void 0,"bold");for(var N=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){p=this.internal.__cell__.tableHeaderRow[b].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,N.push(p)),p.lineNumber=h;var E=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,p),this.setTextColor(E)}N.length>0&&this.setTableHeaderRow(N),this.setFont(void 0,"normal"),t=!1}})(Et.API);var hE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},fE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],xy=dE(fE),mE=[100,200,300,400,500,600,700,800,900],XF=dE(mE);function xv(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(a){return hE[a=a||"normal"]?a:"normal"})(n.style),r=(function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400})(n.weight),i=(function(a){return typeof xy[a=a||"normal"]=="number"?a:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function vN(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var JF={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},yN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function xN(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function bN(n){return n.trimLeft()}function ZF(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function eq(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var kp,wN,_N,Xd,Pp,NN,AN,SN,bv=["times"];function EN(n,e,t,r,i){var a=4,c=TN;switch(i){case Et.API.image_compression.FAST:a=1,c=jN;break;case Et.API.image_compression.MEDIUM:a=6,c=CN;break;case Et.API.image_compression.SLOW:a=9,c=IN}n=(function(h,f,p,x){for(var N,b=h.length/f,E=new Uint8Array(h.length+b),C=[tq,jN,TN,CN,IN],I=0;I<b;I+=1){var R=I*f,U=h.subarray(R,R+f);if(x)E.set(x(U,p,N),R+I);else{for(var $=C.length,z=[],ue=0;ue<$;ue+=1)z[ue]=C[ue](U,p,N);var ie=rq(z.concat());E.set(z[ie],R+I)}N=U}return E})(n,e,Math.ceil(t*r/8),c);var d=hy(n,{level:a});return Et.API.__addimage__.arrayBufferToBinaryString(d)}function tq(n){var e=Array.apply([],n);return e.unshift(0),e}function jN(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var a=n[i-e]||0;r[i+1]=n[i]-a+256&255}return r}function TN(n,e,t){var r=n.length,i=[];i[0]=2;for(var a=0;a<r;a+=1){var c=t&&t[a]||0;i[a+1]=n[a]-c+256&255}return i}function CN(n,e,t){var r=n.length,i=[];i[0]=3;for(var a=0;a<r;a+=1){var c=n[a-e]||0,d=t&&t[a]||0;i[a+1]=n[a]+256-(c+d>>>1)&255}return i}function IN(n,e,t){var r=n.length,i=[];i[0]=4;for(var a=0;a<r;a+=1){var c=nq(n[a-e]||0,t&&t[a]||0,t&&t[a-e]||0);i[a+1]=n[a]-c+256&255}return i}function nq(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),a=Math.abs(n+e-t-t);return r<=i&&r<=a?n:i<=a?e:t}function rq(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function wv(n,e,t){var r=e*t,i=Math.floor(r/8),a=16-(r-8*i+t),c=(1<<t)-1;return pE(n,i)>>a&c}function RN(n,e,t,r){var i=t*r,a=Math.floor(i/8),c=16-(i-8*a+r),d=(1<<r)-1,h=(e&d)<<c;(function(f,p,x){if(p+1<f.byteLength)f.setUint16(p,x,!1);else{var N=x>>8&255;f.setUint8(p,N)}})(n,a,pE(n,a)&~(d<<c)&65535|h)}function pE(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function iq(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],a=i>>7,c=1<<1+(7&i);n[e++],n[e++];var d=null,h=null;a&&(d=e,h=c,e+=3*c);var f=!0,p=[],x=0,N=null,b=0,E=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,E=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var C=n[e++];x=n[e++]|n[e++]<<8,N=n[e++],1&C||(N=null),b=C>>2&7,e++;break;case 254:for(;;){if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var I=n[e++]|n[e++]<<8,R=n[e++]|n[e++]<<8,U=n[e++]|n[e++]<<8,$=n[e++]|n[e++]<<8,z=n[e++],ue=z>>6&1,ie=1<<1+(7&z),V=d,D=h,k=!1;z>>7&&(k=!0,V=e,D=ie,e+=3*ie);var G=e;for(e++;;){var S;if(!((S=n[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}p.push({x:I,y:R,width:U,height:$,has_local_palette:k,palette_offset:V,palette_size:D,data_offset:G,data_length:e-G,transparent_index:N,interlaced:!!ue,delay:x,disposal:b});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return E},this.frameInfo=function(L){if(L<0||L>=p.length)throw new Error("Frame index out of range.");return p[L]},this.decodeAndBlitFrameBGRA=function(L,F){var se=this.frameInfo(L),ye=se.width*se.height,Q=new Uint8Array(ye);LN(n,se.data_offset,Q,ye);var ce=se.palette_offset,me=se.transparent_index;me===null&&(me=256);var Se=se.width,Fe=t-Se,X=Se,q=4*(se.y*t+se.x),J=4*((se.y+se.height)*t+se.x),re=q,fe=4*Fe;se.interlaced===!0&&(fe+=4*t*7);for(var pe=8,we=0,Pe=Q.length;we<Pe;++we){var Re=Q[we];if(X===0&&(X=Se,(re+=fe)>=J&&(fe=4*Fe+4*t*(pe-1),re=q+(Se+Fe)*(pe<<1),pe>>=1)),Re===me)re+=4;else{var Ue=n[ce+3*Re],et=n[ce+3*Re+1],it=n[ce+3*Re+2];F[re++]=it,F[re++]=et,F[re++]=Ue,F[re++]=255}--X}},this.decodeAndBlitFrameRGBA=function(L,F){var se=this.frameInfo(L),ye=se.width*se.height,Q=new Uint8Array(ye);LN(n,se.data_offset,Q,ye);var ce=se.palette_offset,me=se.transparent_index;me===null&&(me=256);var Se=se.width,Fe=t-Se,X=Se,q=4*(se.y*t+se.x),J=4*((se.y+se.height)*t+se.x),re=q,fe=4*Fe;se.interlaced===!0&&(fe+=4*t*7);for(var pe=8,we=0,Pe=Q.length;we<Pe;++we){var Re=Q[we];if(X===0&&(X=Se,(re+=fe)>=J&&(fe=4*Fe+4*t*(pe-1),re=q+(Se+Fe)*(pe<<1),pe>>=1)),Re===me)re+=4;else{var Ue=n[ce+3*Re],et=n[ce+3*Re+1],it=n[ce+3*Re+2];F[re++]=Ue,F[re++]=et,F[re++]=it,F[re++]=255}--X}}}function LN(n,e,t,r){for(var i=n[e++],a=1<<i,c=a+1,d=c+1,h=i+1,f=(1<<h)-1,p=0,x=0,N=0,b=n[e++],E=new Int32Array(4096),C=null;;){for(;p<16&&b!==0;)x|=n[e++]<<p,p+=8,b===1?b=n[e++]:--b;if(p<h)break;var I=x&f;if(x>>=h,p-=h,I!==a){if(I===c)break;for(var R=I<d?I:C,U=0,$=R;$>a;)$=E[$]>>8,++U;var z=$;if(N+U+(R!==I?1:0)>r)return void yr.log("Warning, gif stream longer than expected.");t[N++]=z;var ue=N+=U;for(R!==I&&(t[N++]=z),$=R;U--;)$=E[$],t[--ue]=255&$,$>>=8;C!==null&&d<4096&&(E[d++]=C<<8|z,d>=f+1&&h<12&&(++h,f=f<<1|1)),C=I}else d=c+1,f=(1<<(h=i+1))-1,C=null}return N!==r&&yr.log("Warning, gif stream shorter than expected."),t}function _v(n){var e,t,r,i,a,c=Math.floor,d=new Array(64),h=new Array(64),f=new Array(64),p=new Array(64),x=new Array(65535),N=new Array(65535),b=new Array(64),E=new Array(64),C=[],I=0,R=7,U=new Array(64),$=new Array(64),z=new Array(64),ue=new Array(256),ie=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ye=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(q,J){for(var re=0,fe=0,pe=new Array,we=1;we<=16;we++){for(var Pe=1;Pe<=q[we];Pe++)pe[J[fe]]=[],pe[J[fe]][0]=re,pe[J[fe]][1]=we,fe++,re++;re*=2}return pe}function ce(q){for(var J=q[0],re=q[1]-1;re>=0;)J&1<<re&&(I|=1<<R),re--,--R<0&&(I==255?(me(255),me(0)):me(I),R=7,I=0)}function me(q){C.push(q)}function Se(q){me(q>>8&255),me(255&q)}function Fe(q,J,re,fe,pe){for(var we,Pe=pe[0],Re=pe[240],Ue=(function(ze,at){var lt,Rt,At,Jt,rn,$t,cn,tn,xt,Kt,wt=0;for(xt=0;xt<8;++xt){lt=ze[wt],Rt=ze[wt+1],At=ze[wt+2],Jt=ze[wt+3],rn=ze[wt+4],$t=ze[wt+5],cn=ze[wt+6];var xr=lt+(tn=ze[wt+7]),nn=lt-tn,It=Rt+cn,Bt=Rt-cn,Zt=At+$t,jt=At-$t,Pn=Jt+rn,qt=Jt-rn,Vt=xr+Pn,Fn=xr-Pn,St=It+Zt,_t=It-Zt;ze[wt]=Vt+St,ze[wt+4]=Vt-St;var un=.707106781*(_t+Fn);ze[wt+2]=Fn+un,ze[wt+6]=Fn-un;var bi=.382683433*((Vt=qt+jt)-(_t=Bt+nn)),ci=.5411961*Vt+bi,Hs=1.306562965*_t+bi,ei=.707106781*(St=jt+Bt),Tt=nn+ei,pa=nn-ei;ze[wt+5]=pa+ci,ze[wt+3]=pa-ci,ze[wt+1]=Tt+Hs,ze[wt+7]=Tt-Hs,wt+=8}for(wt=0,xt=0;xt<8;++xt){lt=ze[wt],Rt=ze[wt+8],At=ze[wt+16],Jt=ze[wt+24],rn=ze[wt+32],$t=ze[wt+40],cn=ze[wt+48];var Ji=lt+(tn=ze[wt+56]),Mi=lt-tn,Oi=Rt+cn,Yn=Rt-cn,sr=At+$t,zr=At-$t,wi=Jt+rn,ui=Jt-rn,qn=Ji+wi,Qn=Ji-wi,Hr=Oi+sr,Fi=Oi-sr;ze[wt]=qn+Hr,ze[wt+32]=qn-Hr;var gs=.707106781*(Fi+Qn);ze[wt+16]=Qn+gs,ze[wt+48]=Qn-gs;var Fa=.382683433*((qn=ui+zr)-(Fi=Yn+Mi)),Rs=.5411961*qn+Fa,qi=1.306562965*Fi+Fa,ga=.707106781*(Hr=zr+Yn),Zi=Mi+ga,_i=Mi-ga;ze[wt+40]=_i+Rs,ze[wt+24]=_i-Rs,ze[wt+8]=Zi+qi,ze[wt+56]=Zi-qi,wt++}for(xt=0;xt<64;++xt)Kt=ze[xt]*at[xt],b[xt]=Kt>0?Kt+.5|0:Kt-.5|0;return b})(q,J),et=0;et<64;++et)E[V[et]]=Ue[et];var it=E[0]-re;re=E[0],it==0?ce(fe[0]):(ce(fe[N[we=32767+it]]),ce(x[we]));for(var Ne=63;Ne>0&&E[Ne]==0;)Ne--;if(Ne==0)return ce(Pe),re;for(var Be,te=1;te<=Ne;){for(var Ze=te;E[te]==0&&te<=Ne;)++te;var ct=te-Ze;if(ct>=16){Be=ct>>4;for(var ot=1;ot<=Be;++ot)ce(Re);ct&=15}we=32767+E[te],ce(pe[(ct<<4)+N[we]]),ce(x[we]),te++}return Ne!=63&&ce(Pe),re}function X(q){q=Math.min(Math.max(q,1),100),a!=q&&((function(J){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],fe=0;fe<64;fe++){var pe=c((re[fe]*J+50)/100);pe=Math.min(Math.max(pe,1),255),d[V[fe]]=pe}for(var we=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Pe=0;Pe<64;Pe++){var Re=c((we[Pe]*J+50)/100);Re=Math.min(Math.max(Re,1),255),h[V[Pe]]=Re}for(var Ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],et=0,it=0;it<8;it++)for(var Ne=0;Ne<8;Ne++)f[et]=1/(d[V[et]]*Ue[it]*Ue[Ne]*8),p[et]=1/(h[V[et]]*Ue[it]*Ue[Ne]*8),et++})(q<50?Math.floor(5e3/q):Math.floor(200-2*q)),a=q)}this.encode=function(q,J){J&&X(J),C=new Array,I=0,R=7,Se(65496),Se(65504),Se(16),me(74),me(70),me(73),me(70),me(0),me(1),me(1),me(0),Se(1),Se(1),me(0),me(0),(function(){Se(65499),Se(132),me(0);for(var Rt=0;Rt<64;Rt++)me(d[Rt]);me(1);for(var At=0;At<64;At++)me(h[At])})(),(function(Rt,At){Se(65472),Se(17),me(8),Se(At),Se(Rt),me(3),me(1),me(17),me(0),me(2),me(17),me(1),me(3),me(17),me(1)})(q.width,q.height),(function(){Se(65476),Se(418),me(0);for(var Rt=0;Rt<16;Rt++)me(D[Rt+1]);for(var At=0;At<=11;At++)me(k[At]);me(16);for(var Jt=0;Jt<16;Jt++)me(G[Jt+1]);for(var rn=0;rn<=161;rn++)me(S[rn]);me(1);for(var $t=0;$t<16;$t++)me(L[$t+1]);for(var cn=0;cn<=11;cn++)me(F[cn]);me(17);for(var tn=0;tn<16;tn++)me(se[tn+1]);for(var xt=0;xt<=161;xt++)me(ye[xt])})(),Se(65498),Se(12),me(3),me(1),me(0),me(2),me(17),me(3),me(17),me(0),me(63),me(0);var re=0,fe=0,pe=0;I=0,R=7,this.encode.displayName="_encode_";for(var we,Pe,Re,Ue,et,it,Ne,Be,te,Ze=q.data,ct=q.width,ot=q.height,ze=4*ct,at=0;at<ot;){for(we=0;we<ze;){for(et=ze*at+we,Ne=-1,Be=0,te=0;te<64;te++)it=et+(Be=te>>3)*ze+(Ne=4*(7&te)),at+Be>=ot&&(it-=ze*(at+1+Be-ot)),we+Ne>=ze&&(it-=we+Ne-ze+4),Pe=Ze[it++],Re=Ze[it++],Ue=Ze[it++],U[te]=(ie[Pe]+ie[Re+256|0]+ie[Ue+512|0]>>16)-128,$[te]=(ie[Pe+768|0]+ie[Re+1024|0]+ie[Ue+1280|0]>>16)-128,z[te]=(ie[Pe+1280|0]+ie[Re+1536|0]+ie[Ue+1792|0]>>16)-128;re=Fe(U,f,re,e,r),fe=Fe($,p,fe,t,i),pe=Fe(z,p,pe,t,i),we+=32}at+=8}if(R>=0){var lt=[];lt[1]=R+1,lt[0]=(1<<R+1)-1,ce(lt)}return Se(65497),new Uint8Array(C)},n=n||50,(function(){for(var q=String.fromCharCode,J=0;J<256;J++)ue[J]=q(J)})(),e=Q(D,k),t=Q(L,F),r=Q(G,S),i=Q(se,ye),(function(){for(var q=1,J=2,re=1;re<=15;re++){for(var fe=q;fe<J;fe++)N[32767+fe]=re,x[32767+fe]=[],x[32767+fe][1]=re,x[32767+fe][0]=fe;for(var pe=-(J-1);pe<=-q;pe++)N[32767+pe]=re,x[32767+pe]=[],x[32767+pe][1]=re,x[32767+pe][0]=J-1+pe;q<<=1,J<<=1}})(),(function(){for(var q=0;q<256;q++)ie[q]=19595*q,ie[q+256|0]=38470*q,ie[q+512|0]=7471*q+32768,ie[q+768|0]=-11059*q,ie[q+1024|0]=-21709*q,ie[q+1280|0]=32768*q+8421375,ie[q+1536|0]=-27439*q,ie[q+1792|0]=-5329*q})(),X(n)}function Lo(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function kN(n){function e(k){if(!k)throw Error("assert :P")}function t(k,G,S){for(var L=0;4>L;L++)if(k[G+L]!=S.charCodeAt(L))return!0;return!1}function r(k,G,S,L,F){for(var se=0;se<F;se++)k[G+se]=S[L+se]}function i(k,G,S,L){for(var F=0;F<L;F++)k[G+F]=S}function a(k){return new Int32Array(k)}function c(k,G){for(var S=[],L=0;L<k;L++)S.push(new G);return S}function d(k,G){var S=[];return(function L(F,se,ye){for(var Q=ye[se],ce=0;ce<Q&&(F.push(ye.length>se+1?[]:new G),!(ye.length<se+1));ce++)L(F[ce],se+1,ye)})(S,0,k),S}var h=function(){var k=this;function G(g,w){for(var j=1<<w-1>>>0;g&j;)j>>>=1;return j?(g&j-1)+j:g}function S(g,w,j,P,H){e(!(P%j));do g[w+(P-=j)]=H;while(0<P)}function L(g,w,j,P,H){if(e(2328>=H),512>=H)var W=a(512);else if((W=a(H))==null)return 0;return(function(Y,Z,ne,le,xe,Ie){var ae,_e,Te=Z,Ve=1<<ne,Ce=a(16),qe=a(16);for(e(xe!=0),e(le!=null),e(Y!=null),e(0<ne),_e=0;_e<xe;++_e){if(15<le[_e])return 0;++Ce[le[_e]]}if(Ce[0]==xe)return 0;for(qe[1]=0,ae=1;15>ae;++ae){if(Ce[ae]>1<<ae)return 0;qe[ae+1]=qe[ae]+Ce[ae]}for(_e=0;_e<xe;++_e)ae=le[_e],0<le[_e]&&(Ie[qe[ae]++]=_e);if(qe[15]==1)return(le=new F).g=0,le.value=Ie[0],S(Y,Te,1,Ve,le),Ve;var Ge,tt=-1,Qe=Ve-1,vt=0,ut=1,Qt=1,mt=1<<ne;for(_e=0,ae=1,xe=2;ae<=ne;++ae,xe<<=1){if(ut+=Qt<<=1,0>(Qt-=Ce[ae]))return 0;for(;0<Ce[ae];--Ce[ae])(le=new F).g=ae,le.value=Ie[_e++],S(Y,Te+vt,xe,mt,le),vt=G(vt,ae)}for(ae=ne+1,xe=2;15>=ae;++ae,xe<<=1){if(ut+=Qt<<=1,0>(Qt-=Ce[ae]))return 0;for(;0<Ce[ae];--Ce[ae]){if(le=new F,(vt&Qe)!=tt){for(Te+=mt,Ge=1<<(tt=ae)-ne;15>tt&&!(0>=(Ge-=Ce[tt]));)++tt,Ge<<=1;Ve+=mt=1<<(Ge=tt-ne),Y[Z+(tt=vt&Qe)].g=Ge+ne,Y[Z+tt].value=Te-Z-tt}le.g=ae-ne,le.value=Ie[_e++],S(Y,Te+(vt>>ne),xe,mt,le),vt=G(vt,ae)}}return ut!=2*qe[15]-1?0:Ve})(g,w,j,P,H,W)}function F(){this.value=this.g=0}function se(){this.value=this.g=0}function ye(){this.G=c(5,F),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Qo,se)}function Q(g,w,j,P){e(g!=null),e(w!=null),e(2147483648>P),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=w,g.pa=j,g.Jd=w,g.Yc=j+P,g.Zc=4<=P?j+P-4+1:j,Pe(g)}function ce(g,w){for(var j=0;0<w--;)j|=Ue(g,128)<<w;return j}function me(g,w){var j=ce(g,w);return Re(g)?-j:j}function Se(g,w,j,P){var H,W=0;for(e(g!=null),e(w!=null),e(4294967288>P),g.Sb=P,g.Ra=0,g.u=0,g.h=0,4<P&&(P=4),H=0;H<P;++H)W+=w[j+H]<<8*H;g.Ra=W,g.bb=P,g.oa=w,g.pa=j}function Fe(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<Ga-8>>>0,++g.bb,g.u-=8;fe(g)&&(g.h=1,g.u=0)}function X(g,w){if(e(0<=w),!g.h&&w<=os){var j=re(g)&ws[w];return g.u+=w,Fe(g),j}return g.h=1,g.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function re(g){return g.Ra>>>(g.u&Ga-1)>>>0}function fe(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>Ga}function pe(g,w){g.u=w,g.h=fe(g)}function we(g){g.u>=Wa&&(e(g.u>=Wa),Fe(g))}function Pe(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function Re(g){return ce(g,1)}function Ue(g,w){var j=g.Ca;0>g.b&&Pe(g);var P=g.b,H=j*w>>>8,W=(g.I>>>P>H)+0;for(W?(j-=H,g.I-=H+1<<P>>>0):j=H+1,P=j,H=0;256<=P;)H+=8,P>>=8;return P=7^H+xo[P],g.b-=P,g.Ca=(j<<P)-1,W}function et(g,w,j){g[w+0]=j>>24&255,g[w+1]=j>>16&255,g[w+2]=j>>8&255,g[w+3]=255&j}function it(g,w){return g[w+0]|g[w+1]<<8}function Ne(g,w){return it(g,w)|g[w+2]<<16}function Be(g,w){return it(g,w)|it(g,w+2)<<16}function te(g,w){var j=1<<w;return e(g!=null),e(0<w),g.X=a(j),g.X==null?0:(g.Mb=32-w,g.Xa=w,1)}function Ze(g,w){e(g!=null),e(w!=null),e(g.Xa==w.Xa),r(w.X,0,g.X,0,1<<w.Xa)}function ct(){this.X=[],this.Xa=this.Mb=0}function ot(g,w,j,P){e(j!=null),e(P!=null);var H=j[0],W=P[0];return H==0&&(H=(g*W+w/2)/w),W==0&&(W=(w*H+g/2)/g),0>=H||0>=W?0:(j[0]=H,P[0]=W,1)}function ze(g,w){return g+(1<<w)-1>>>w}function at(g,w){return((4278255360&g)+(4278255360&w)>>>0&4278255360)+((16711935&g)+(16711935&w)>>>0&16711935)>>>0}function lt(g,w){k[w]=function(j,P,H,W,Y,Z,ne){var le;for(le=0;le<Y;++le){var xe=k[g](Z[ne+le-1],H,W+le);Z[ne+le]=at(j[P+le],xe)}}}function Rt(){this.ud=this.hd=this.jd=0}function At(g,w){return((4278124286&(g^w))>>>1)+(g&w)>>>0}function Jt(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function rn(g,w){return Jt(g+(g-w+.5>>1))}function $t(g,w,j){return Math.abs(w-j)-Math.abs(g-j)}function cn(g,w,j,P,H,W,Y){for(P=W[Y-1],j=0;j<H;++j)W[Y+j]=P=at(g[w+j],P)}function tn(g,w,j,P,H){var W;for(W=0;W<j;++W){var Y=g[w+W],Z=Y>>8&255,ne=16711935&(ne=(ne=16711935&Y)+((Z<<16)+Z));P[H+W]=(4278255360&Y)+ne>>>0}}function xt(g,w){w.jd=255&g,w.hd=g>>8&255,w.ud=g>>16&255}function Kt(g,w,j,P,H,W){var Y;for(Y=0;Y<P;++Y){var Z=w[j+Y],ne=Z>>>8,le=Z,xe=255&(xe=(xe=Z>>>16)+((g.jd<<24>>24)*(ne<<24>>24)>>>5));le=255&(le=(le+=(g.hd<<24>>24)*(ne<<24>>24)>>>5)+((g.ud<<24>>24)*(xe<<24>>24)>>>5)),H[W+Y]=(4278255360&Z)+(xe<<16)+le}}function wt(g,w,j,P,H){k[w]=function(W,Y,Z,ne,le,xe,Ie,ae,_e){for(ne=Ie;ne<ae;++ne)for(Ie=0;Ie<_e;++Ie)le[xe++]=H(Z[P(W[Y++])])},k[g]=function(W,Y,Z,ne,le,xe,Ie){var ae=8>>W.b,_e=W.Ea,Te=W.K[0],Ve=W.w;if(8>ae)for(W=(1<<W.b)-1,Ve=(1<<ae)-1;Y<Z;++Y){var Ce,qe=0;for(Ce=0;Ce<_e;++Ce)Ce&W||(qe=P(ne[le++])),xe[Ie++]=H(Te[qe&Ve]),qe>>=ae}else k["VP8LMapColor"+j](ne,le,Te,Ve,xe,Ie,Y,Z,_e)}}function xr(g,w,j,P,H){for(j=w+j;w<j;){var W=g[w++];P[H++]=W>>16&255,P[H++]=W>>8&255,P[H++]=255&W}}function nn(g,w,j,P,H){for(j=w+j;w<j;){var W=g[w++];P[H++]=W>>16&255,P[H++]=W>>8&255,P[H++]=255&W,P[H++]=W>>24&255}}function It(g,w,j,P,H){for(j=w+j;w<j;){var W=(Y=g[w++])>>16&240|Y>>12&15,Y=240&Y|Y>>28&15;P[H++]=W,P[H++]=Y}}function Bt(g,w,j,P,H){for(j=w+j;w<j;){var W=(Y=g[w++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;P[H++]=W,P[H++]=Y}}function Zt(g,w,j,P,H){for(j=w+j;w<j;){var W=g[w++];P[H++]=255&W,P[H++]=W>>8&255,P[H++]=W>>16&255}}function jt(g,w,j,P,H,W){if(W==0)for(j=w+j;w<j;)et(P,((W=g[w++])[0]>>24|W[1]>>8&65280|W[2]<<8&16711680|W[3]<<24)>>>0),H+=32;else r(P,H,g,w,j)}function Pn(g,w){k[w][0]=k[g+"0"],k[w][1]=k[g+"1"],k[w][2]=k[g+"2"],k[w][3]=k[g+"3"],k[w][4]=k[g+"4"],k[w][5]=k[g+"5"],k[w][6]=k[g+"6"],k[w][7]=k[g+"7"],k[w][8]=k[g+"8"],k[w][9]=k[g+"9"],k[w][10]=k[g+"10"],k[w][11]=k[g+"11"],k[w][12]=k[g+"12"],k[w][13]=k[g+"13"],k[w][14]=k[g+"0"],k[w][15]=k[g+"0"]}function qt(g){return g==Pu||g==yd||g==Ec||g==xd}function Vt(){this.eb=[],this.size=this.A=this.fb=0}function Fn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function St(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Vt,this.f.kb=new Fn,this.sd=null}function _t(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function un(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function bi(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function ci(g,w){var j=g.T,P=w.ba.f.RGBA,H=P.eb,W=P.fb+g.ka*P.A,Y=Ci[w.ba.S],Z=g.y,ne=g.O,le=g.f,xe=g.N,Ie=g.ea,ae=g.W,_e=w.cc,Te=w.dc,Ve=w.Mc,Ce=w.Nc,qe=g.ka,Ge=g.ka+g.T,tt=g.U,Qe=tt+1>>1;for(qe==0?Y(Z,ne,null,null,le,xe,Ie,ae,le,xe,Ie,ae,H,W,null,null,tt):(Y(w.ec,w.fc,Z,ne,_e,Te,Ve,Ce,le,xe,Ie,ae,H,W-P.A,H,W,tt),++j);qe+2<Ge;qe+=2)_e=le,Te=xe,Ve=Ie,Ce=ae,xe+=g.Rc,ae+=g.Rc,W+=2*P.A,Y(Z,(ne+=2*g.fa)-g.fa,Z,ne,_e,Te,Ve,Ce,le,xe,Ie,ae,H,W-P.A,H,W,tt);return ne+=g.fa,g.j+Ge<g.o?(r(w.ec,w.fc,Z,ne,tt),r(w.cc,w.dc,le,xe,Qe),r(w.Mc,w.Nc,Ie,ae,Qe),j--):1&Ge||Y(Z,ne,null,null,le,xe,Ie,ae,le,xe,Ie,ae,H,W+P.A,null,null,tt),j}function Hs(g,w,j){var P=g.F,H=[g.J];if(P!=null){var W=g.U,Y=w.ba.S,Z=Y==ku||Y==Ec;w=w.ba.f.RGBA;var ne=[0],le=g.ka;ne[0]=g.T,g.Kb&&(le==0?--ne[0]:(--le,H[0]-=g.width),g.j+g.ka+g.T==g.o&&(ne[0]=g.o-g.j-le));var xe=w.eb;le=w.fb+le*w.A,g=Cu(P,H[0],g.width,W,ne,xe,le+(Z?0:3),w.A),e(j==ne),g&&qt(Y)&&Ml(xe,le,Z,W,ne,w.A)}return 0}function ei(g){var w=g.ma,j=w.ba.S,P=11>j,H=j==$i||j==Js||j==ku||j==Sc||j==12||qt(j);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!yo(w.Oa,g,H?11:12))return 0;if(H&&qt(j)&&Yt(),g.da)alert("todo:use_scaling");else{if(P){if(w.Ib=bi,g.Kb){if(j=g.U+1>>1,w.memory=a(g.U+2*j),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+g.U,w.Mc=w.cc,w.Nc=w.dc+j,w.Ib=ci,Yt()}}else alert("todo:EmitYUV");H&&(w.Jb=Hs,P&&De())}if(P&&!rl){for(g=0;256>g;++g)Ii[g]=89858*(g-128)+Cc>>ia,b0[g]=-22014*(g-128)+Cc,Rm[g]=-45773*(g-128),Ad[g]=113618*(g-128)+Cc>>ia;for(g=Vl;g<nl;++g)w=76283*(g-16)+Cc>>ia,w0[g-Vl]=ts(w,255),_0[g-Vl]=ts(w+8>>4,15);rl=1}return 1}function Tt(g){var w=g.ma,j=g.U,P=g.T;return e(!(1&g.ka)),0>=j||0>=P?0:(j=w.Ib(g,w),w.Jb!=null&&w.Jb(g,w,j),w.Dc+=j,1)}function pa(g){g.ma.memory=null}function Ji(g,w,j,P){return X(g,8)!=47?0:(w[0]=X(g,14)+1,j[0]=X(g,14)+1,P[0]=X(g,1),X(g,3)!=0?0:!g.h)}function Mi(g,w){if(4>g)return g+1;var j=g-2>>1;return(2+(1&g)<<j)+X(w,j)+1}function Oi(g,w){return 120<w?w-120:1<=(j=((j=ea[w-1])>>4)*g+(8-(15&j)))?j:1;var j}function Yn(g,w,j){var P=re(j),H=g[w+=255&P].g-8;return 0<H&&(pe(j,j.u+8),P=re(j),w+=g[w].value,w+=P&(1<<H)-1),pe(j,j.u+g[w].g),g[w].value}function sr(g,w,j){return j.g+=g.g,j.value+=g.value<<w>>>0,e(8>=j.g),g.g}function zr(g,w,j){var P=g.xc;return e((w=P==0?0:g.vc[g.md*(j>>P)+(w>>P)])<g.Wb),g.Ya[w]}function wi(g,w,j,P){var H=g.ab,W=g.c*w,Y=g.C;w=Y+w;var Z=j,ne=P;for(P=g.Ta,j=g.Ua;0<H--;){var le=g.gc[H],xe=Y,Ie=w,ae=Z,_e=ne,Te=(ne=P,Z=j,le.Ea);switch(e(xe<Ie),e(Ie<=le.nc),le.hc){case 2:Or(ae,_e,(Ie-xe)*Te,ne,Z);break;case 0:var Ve=xe,Ce=Ie,qe=ne,Ge=Z,tt=(mt=le).Ea;Ve==0&&(wc(ae,_e,null,null,1,qe,Ge),cn(ae,_e+1,0,0,tt-1,qe,Ge+1),_e+=tt,Ge+=tt,++Ve);for(var Qe=1<<mt.b,vt=Qe-1,ut=ze(tt,mt.b),Qt=mt.K,mt=mt.w+(Ve>>mt.b)*ut;Ve<Ce;){var gn=Qt,gr=mt,sn=1;for(_c(ae,_e,qe,Ge-tt,1,qe,Ge);sn<tt;){var dt=(sn&~vt)+Qe;dt>tt&&(dt=tt),(0,bo[gn[gr++]>>8&15])(ae,_e+ +sn,qe,Ge+sn-tt,dt-sn,qe,Ge+sn),sn=dt}_e+=tt,Ge+=tt,++Ve&vt||(mt+=ut)}Ie!=le.nc&&r(ne,Z-Te,ne,Z+(Ie-xe-1)*Te,Te);break;case 1:for(Te=ae,Ce=_e,tt=(ae=le.Ea)-(Ge=ae&~(qe=(_e=1<<le.b)-1)),Ve=ze(ae,le.b),Qe=le.K,le=le.w+(xe>>le.b)*Ve;xe<Ie;){for(vt=Qe,ut=le,Qt=new Rt,mt=Ce+Ge,gn=Ce+ae;Ce<mt;)xt(vt[ut++],Qt),Nc(Qt,Te,Ce,_e,ne,Z),Ce+=_e,Z+=_e;Ce<gn&&(xt(vt[ut++],Qt),Nc(Qt,Te,Ce,tt,ne,Z),Ce+=tt,Z+=tt),++xe&qe||(le+=Ve)}break;case 3:if(ae==ne&&_e==Z&&0<le.b){for(Ce=ne,ae=Te=Z+(Ie-xe)*Te-(Ge=(Ie-xe)*ze(le.Ea,le.b)),_e=ne,qe=Z,Ve=[],Ge=(tt=Ge)-1;0<=Ge;--Ge)Ve[Ge]=_e[qe+Ge];for(Ge=tt-1;0<=Ge;--Ge)Ce[ae+Ge]=Ve[Ge];fd(le,xe,Ie,ne,Te,ne,Z)}else fd(le,xe,Ie,ae,_e,ne,Z)}Z=P,ne=j}ne!=j&&r(P,j,Z,ne,W)}function ui(g,w){var j=g.V,P=g.Ba+g.c*g.C,H=w-g.C;if(e(w<=g.l.o),e(16>=H),0<H){var W=g.l,Y=g.Ta,Z=g.Ua,ne=W.width;if(wi(g,H,j,P),H=Z=[Z],e((j=g.C)<(P=w)),e(W.v<W.va),P>W.o&&(P=W.o),j<W.j){var le=W.j-j;j=W.j,H[0]+=le*ne}if(j>=P?j=0:(H[0]+=4*W.v,W.ka=j-W.j,W.U=W.va-W.v,W.T=P-j,j=1),j){if(Z=Z[0],11>(j=g.ca).S){var xe=j.f.RGBA,Ie=(P=j.S,H=W.U,W=W.T,le=xe.eb,xe.A),ae=W;for(xe=xe.fb+g.Ma*xe.A;0<ae--;){var _e=Y,Te=Z,Ve=H,Ce=le,qe=xe;switch(P){case gd:Ac(_e,Te,Ve,Ce,qe);break;case $i:wo(_e,Te,Ve,Ce,qe);break;case Pu:wo(_e,Te,Ve,Ce,qe),Ml(Ce,qe,0,Ve,1,0);break;case vd:Pl(_e,Te,Ve,Ce,qe);break;case Js:jt(_e,Te,Ve,Ce,qe,1);break;case yd:jt(_e,Te,Ve,Ce,qe,1),Ml(Ce,qe,0,Ve,1,0);break;case ku:jt(_e,Te,Ve,Ce,qe,0);break;case Ec:jt(_e,Te,Ve,Ce,qe,0),Ml(Ce,qe,1,Ve,1,0);break;case Sc:_o(_e,Te,Ve,Ce,qe);break;case xd:_o(_e,Te,Ve,Ce,qe),Xs(Ce,qe,Ve,1,0);break;case Xo:Qa(_e,Te,Ve,Ce,qe);break;default:e(0)}Z+=ne,xe+=Ie}g.Ma+=W}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=j.height)}}g.C=w,e(g.C<=g.i)}function qn(g){var w;if(0<g.ua)return 0;for(w=0;w<g.Wb;++w){var j=g.Ya[w].G,P=g.Ya[w].H;if(0<j[1][P[1]+0].g||0<j[2][P[2]+0].g||0<j[3][P[3]+0].g)return 0}return 1}function Qn(g,w,j,P,H,W){if(g.Z!=0){var Y=g.qd,Z=g.rd;for(e(So[g.Z]!=null);w<j;++w)So[g.Z](Y,Z,P,H,P,H,W),Y=P,Z=H,H+=W;g.qd=Y,g.rd=Z}}function Hr(g,w){var j=g.l.ma,P=j.Z==0||j.Z==1?g.l.j:g.C;if(P=g.C<P?P:g.C,e(w<=g.l.o),w>P){var H=g.l.width,W=j.ca,Y=j.tb+H*P,Z=g.V,ne=g.Ba+g.c*P,le=g.gc;e(g.ab==1),e(le[0].hc==3),Ka(le[0],P,w,Z,ne,W,Y),Qn(j,P,w,W,Y,H)}g.C=g.Ma=w}function Fi(g,w,j,P,H,W,Y){var Z=g.$/P,ne=g.$%P,le=g.m,xe=g.s,Ie=j+g.$,ae=Ie;H=j+P*H;var _e=j+P*W,Te=280+xe.ua,Ve=g.Pb?Z:16777216,Ce=0<xe.ua?xe.Wa:null,qe=xe.wc,Ge=Ie<_e?zr(xe,ne,Z):null;e(g.C<W),e(_e<=H);var tt=!1;e:for(;;){for(;tt||Ie<_e;){var Qe=0;if(Z>=Ve){var vt=Ie-j;e((Ve=g).Pb),Ve.wd=Ve.m,Ve.xd=vt,0<Ve.s.ua&&Ze(Ve.s.Wa,Ve.s.vb),Ve=Z+Jo}if(ne&qe||(Ge=zr(xe,ne,Z)),e(Ge!=null),Ge.Qb&&(w[Ie]=Ge.qb,tt=!0),!tt)if(we(le),Ge.jc){Qe=le,vt=w;var ut=Ie,Qt=Ge.pd[re(Qe)&Qo-1];e(Ge.jc),256>Qt.g?(pe(Qe,Qe.u+Qt.g),vt[ut]=Qt.value,Qe=0):(pe(Qe,Qe.u+Qt.g-256),e(256<=Qt.value),Qe=Qt.value),Qe==0&&(tt=!0)}else Qe=Yn(Ge.G[0],Ge.H[0],le);if(le.h)break;if(tt||256>Qe){if(!tt)if(Ge.nd)w[Ie]=(Ge.qb|Qe<<8)>>>0;else{if(we(le),tt=Yn(Ge.G[1],Ge.H[1],le),we(le),vt=Yn(Ge.G[2],Ge.H[2],le),ut=Yn(Ge.G[3],Ge.H[3],le),le.h)break;w[Ie]=(ut<<24|tt<<16|Qe<<8|vt)>>>0}if(tt=!1,++Ie,++ne>=P&&(ne=0,++Z,Y!=null&&Z<=W&&!(Z%16)&&Y(g,Z),Ce!=null))for(;ae<Ie;)Qe=w[ae++],Ce.X[(506832829*Qe&4294967295)>>>Ce.Mb]=Qe}else if(280>Qe){if(Qe=Mi(Qe-256,le),vt=Yn(Ge.G[4],Ge.H[4],le),we(le),vt=Oi(P,vt=Mi(vt,le)),le.h)break;if(Ie-j<vt||H-Ie<Qe)break e;for(ut=0;ut<Qe;++ut)w[Ie+ut]=w[Ie+ut-vt];for(Ie+=Qe,ne+=Qe;ne>=P;)ne-=P,++Z,Y!=null&&Z<=W&&!(Z%16)&&Y(g,Z);if(e(Ie<=H),ne&qe&&(Ge=zr(xe,ne,Z)),Ce!=null)for(;ae<Ie;)Qe=w[ae++],Ce.X[(506832829*Qe&4294967295)>>>Ce.Mb]=Qe}else{if(!(Qe<Te))break e;for(tt=Qe-280,e(Ce!=null);ae<Ie;)Qe=w[ae++],Ce.X[(506832829*Qe&4294967295)>>>Ce.Mb]=Qe;Qe=Ie,e(!(tt>>>(vt=Ce).Xa)),w[Qe]=vt.X[tt],tt=!0}tt||e(le.h==fe(le))}if(g.Pb&&le.h&&Ie<H)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Ze(g.s.vb,g.s.Wa);else{if(le.h)break e;Y?.(g,Z>W?W:Z),g.a=0,g.$=Ie-j}return 1}return g.a=3,0}function gs(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var w=g.Wa;w!=null&&(w.X=null),g.vb=null,e(g!=null)}function Fa(){var g=new Mt;return g==null?null:(g.a=0,g.xb=zh,Pn("Predictor","VP8LPredictors"),Pn("Predictor","VP8LPredictors_C"),Pn("PredictorAdd","VP8LPredictorsAdd"),Pn("PredictorAdd","VP8LPredictorsAdd_C"),Or=tn,Nc=Kt,Ac=xr,wo=nn,_o=It,Qa=Bt,Pl=Zt,k.VP8LMapColor32b=Ya,k.VP8LMapColor8b=Ei,g)}function Rs(g,w,j,P,H){var W=1,Y=[g],Z=[w],ne=P.m,le=P.s,xe=null,Ie=0;e:for(;;){if(j)for(;W&&X(ne,1);){var ae=Y,_e=Z,Te=P,Ve=1,Ce=Te.m,qe=Te.gc[Te.ab],Ge=X(Ce,2);if(Te.Oc&1<<Ge)W=0;else{switch(Te.Oc|=1<<Ge,qe.hc=Ge,qe.Ea=ae[0],qe.nc=_e[0],qe.K=[null],++Te.ab,e(4>=Te.ab),Ge){case 0:case 1:qe.b=X(Ce,3)+2,Ve=Rs(ze(qe.Ea,qe.b),ze(qe.nc,qe.b),0,Te,qe.K),qe.K=qe.K[0];break;case 3:var tt,Qe=X(Ce,8)+1,vt=16<Qe?0:4<Qe?1:2<Qe?2:3;if(ae[0]=ze(qe.Ea,vt),qe.b=vt,tt=Ve=Rs(Qe,1,0,Te,qe.K)){var ut,Qt=Qe,mt=qe,gn=1<<(8>>mt.b),gr=a(gn);if(gr==null)tt=0;else{var sn=mt.K[0],dt=mt.w;for(gr[0]=mt.K[0][0],ut=1;ut<1*Qt;++ut)gr[ut]=at(sn[dt+ut],gr[ut-1]);for(;ut<4*gn;++ut)gr[ut]=0;mt.K[0]=null,mt.K[0]=gr,tt=1}}Ve=tt;break;case 2:break;default:e(0)}W=Ve}}if(Y=Y[0],Z=Z[0],W&&X(ne,1)&&!(W=1<=(Ie=X(ne,4))&&11>=Ie)){P.a=3;break e}var rt;if(rt=W)t:{var wr,zt,ln,$n=P,ri=Y,Ri=Z,cr=Ie,Gr=j,Gi=$n.m,Wr=$n.s,fn=[null],Cn=1,_r=0,Mn=ta[cr];n:for(;;){if(Gr&&X(Gi,1)){var ii=X(Gi,3)+2,Nr=ze(ri,ii),In=ze(Ri,ii),Vr=Nr*In;if(!Rs(Nr,In,0,$n,fn))break n;for(fn=fn[0],Wr.xc=ii,wr=0;wr<Vr;++wr){var Gn=fn[wr]>>8&65535;fn[wr]=Gn,Gn>=Cn&&(Cn=Gn+1)}}if(Gi.h)break n;for(zt=0;5>zt;++zt){var Yr=Fl[zt];!zt&&0<cr&&(Yr+=1<<cr),_r<Yr&&(_r=Yr)}var Kr=c(Cn*Mn,F),Jn=Cn,jn=c(Jn,ye);if(jn==null)var Wi=null;else e(65536>=Jn),Wi=jn;var Cr=a(_r);if(Wi==null||Cr==null||Kr==null){$n.a=1;break n}var kt=Kr;for(wr=ln=0;wr<Cn;++wr){var Ot=Wi[wr],Rn=Ot.G,_s=Ot.H,sa=0,cs=1,Qr=0;for(zt=0;5>zt;++zt){Yr=Fl[zt],Rn[zt]=kt,_s[zt]=ln,!zt&&0<cr&&(Yr+=1<<cr);i:{var il,sl=Yr,Ed=$n,ur=Cr,$h=kt,Gh=ln,jd=0,Eo=Ed.m,N0=X(Eo,1);if(i(ur,0,0,sl),N0){var Wh=X(Eo,1)+1,Yh=X(Eo,1),Td=X(Eo,Yh==0?1:8);ur[Td]=1,Wh==2&&(ur[Td=X(Eo,8)]=1);var mi=1}else{var Ir=a(19),Fu=X(Eo,4)+4;if(19<Fu){Ed.a=3;var al=0;break i}for(il=0;il<Fu;++il)Ir[Du[il]]=X(Eo,3);var Rc=void 0,Ul=void 0,Za=Ed,Cd=Ir,Lc=sl,Id=ur,Rd=0,jo=Za.m,Kh=8,Qh=c(128,F);r:for(;L(Qh,0,7,Cd,19);){if(X(jo,1)){var Lm=2+2*X(jo,3);if((Rc=2+X(jo,Lm))>Lc)break r}else Rc=Lc;for(Ul=0;Ul<Lc&&Rc--;){we(jo);var Xh=Qh[0+(127&re(jo))];pe(jo,jo.u+Xh.g);var ol=Xh.value;if(16>ol)Id[Ul++]=ol,ol!=0&&(Kh=ol);else{var km=ol==16,Pm=ol-16,Dm=jc[Pm],Jh=X(jo,Zs[Pm])+Dm;if(Ul+Jh>Lc)break r;for(var Mm=km?Kh:0;0<Jh--;)Id[Ul++]=Mm}}Rd=1;break r}Rd||(Za.a=3),mi=Rd}(mi=mi&&!Eo.h)&&(jd=L($h,Gh,8,ur,sl)),mi&&jd!=0?al=jd:(Ed.a=3,al=0)}if(al==0)break n;if(cs&&bd[zt]==1&&(cs=kt[ln].g==0),sa+=kt[ln].g,ln+=al,3>=zt){var Bl,Ld=Cr[0];for(Bl=1;Bl<Yr;++Bl)Cr[Bl]>Ld&&(Ld=Cr[Bl]);Qr+=Ld}}if(Ot.nd=cs,Ot.Qb=0,cs&&(Ot.qb=(Rn[3][_s[3]+0].value<<24|Rn[1][_s[1]+0].value<<16|Rn[2][_s[2]+0].value)>>>0,sa==0&&256>Rn[0][_s[0]+0].value&&(Ot.Qb=1,Ot.qb+=Rn[0][_s[0]+0].value<<8)),Ot.jc=!Ot.Qb&&6>Qr,Ot.jc){var qu,eo=Ot;for(qu=0;qu<Qo;++qu){var To=qu,Co=eo.pd[To],kd=eo.G[0][eo.H[0]+To];256<=kd.value?(Co.g=kd.g+256,Co.value=kd.value):(Co.g=0,Co.value=0,To>>=sr(kd,8,Co),To>>=sr(eo.G[1][eo.H[1]+To],16,Co),To>>=sr(eo.G[2][eo.H[2]+To],0,Co),sr(eo.G[3][eo.H[3]+To],24,Co))}}}Wr.vc=fn,Wr.Wb=Cn,Wr.Ya=Wi,Wr.yc=Kr,rt=1;break t}rt=0}if(!(W=rt)){P.a=3;break e}if(0<Ie){if(le.ua=1<<Ie,!te(le.Wa,Ie)){P.a=1,W=0;break e}}else le.ua=0;var Pd=P,zl=Y,Om=Z,kc=Pd.s,Pc=kc.xc;if(Pd.c=zl,Pd.i=Om,kc.md=ze(zl,Pc),kc.wc=Pc==0?-1:(1<<Pc)-1,j){P.xb=Zo;break e}if((xe=a(Y*Z))==null){P.a=1,W=0;break e}W=(W=Fi(P,xe,0,Y,Z,Z,null))&&!ne.h;break e}return W?(H!=null?H[0]=xe:(e(xe==null),e(j)),P.$=0,j||gs(le)):gs(le),W}function qi(g,w){var j=g.c*g.i,P=j+w+16*w;return e(g.c<=w),g.V=a(P),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+j+w,1)}function ga(g,w){var j=g.C,P=w-j,H=g.V,W=g.Ba+g.c*j;for(e(w<=g.l.o);0<P;){var Y=16<P?16:P,Z=g.l.ma,ne=g.l.width,le=ne*Y,xe=Z.ca,Ie=Z.tb+ne*j,ae=g.Ta,_e=g.Ua;wi(g,Y,H,W),qs(ae,_e,xe,Ie,le),Qn(Z,j,j+Y,xe,Ie,ne),P-=Y,H+=Y*g.c,j+=Y}e(j==w),g.C=g.Ma=w}function Zi(){this.ub=this.yd=this.td=this.Rb=0}function _i(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function es(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function vs(){this.Yb=(function(){var g=[];return(function w(j,P,H){for(var W=H[P],Y=0;Y<W&&(j.push(H.length>P+1?[]:0),!(H.length<P+1));Y++)w(j[Y],P+1,H)})(g,0,[3,11]),g})()}function br(){this.jb=a(3),this.Wc=d([4,8],vs),this.Xc=d([4,17],vs)}function Bo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Vi(){this.ld=this.La=this.dd=this.tc=0}function ys(){this.Na=this.la=0}function Ls(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function uo(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function zo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vi),this.Y=0,this.ya=Array(new uo),this.aa=0,this.l=new di}function Ho(){this.y=a(16),this.f=a(8),this.ea=a(8)}function jl(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new Zi,this.Kc=new _i,this.ed=new Bo,this.Qa=new es,this.Ic=this.$c=this.Aa=0,this.D=new zo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,q),this.ia=0,this.pb=c(4,Ls),this.Pa=new br,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ho),this.Hd=0,this.rb=Array(new ys),this.sb=0,this.wa=Array(new Vi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new uo),this.L=this.aa=0,this.gd=d([4,2],Vi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ts(g,w){return 0>g?0:g>w?w:g}function di(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Er(){var g=new jl;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,Vs||(Vs=bn)),g}function mn(g,w,j){return g.a==0&&(g.a=w,g.sc=j,g.cb=0),0}function va(g,w,j){return 3<=j&&g[w+0]==157&&g[w+1]==1&&g[w+2]==42}function xs(g,w){if(g==null)return 0;if(g.a=0,g.sc="OK",w==null)return mn(g,2,"null VP8Io passed to VP8GetHeaders()");var j=w.data,P=w.w,H=w.ha;if(4>H)return mn(g,7,"Truncated header.");var W=j[P+0]|j[P+1]<<8|j[P+2]<<16,Y=g.Od;if(Y.Rb=!(1&W),Y.td=W>>1&7,Y.yd=W>>4&1,Y.ub=W>>5,3<Y.td)return mn(g,3,"Incorrect keyframe parameters.");if(!Y.yd)return mn(g,4,"Frame not displayable.");P+=3,H-=3;var Z=g.Kc;if(Y.Rb){if(7>H)return mn(g,7,"cannot parse picture header");if(!va(j,P,H))return mn(g,3,"Bad code word");Z.c=16383&(j[P+4]<<8|j[P+3]),Z.Td=j[P+4]>>6,Z.i=16383&(j[P+6]<<8|j[P+5]),Z.Ud=j[P+6]>>6,P+=7,H-=7,g.za=Z.c+15>>4,g.Ub=Z.i+15>>4,w.width=Z.c,w.height=Z.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,i((W=g.Pa).jb,0,255,W.jb.length),e((W=g.Qa)!=null),W.Cb=0,W.Bb=0,W.Fb=1,i(W.Zb,0,0,W.Zb.length),i(W.Lb,0,0,W.Lb)}if(Y.ub>H)return mn(g,7,"bad partition length");Q(W=g.m,j,P,Y.ub),P+=Y.ub,H-=Y.ub,Y.Rb&&(Z.Ld=Re(W),Z.Kd=Re(W)),Z=g.Qa;var ne,le=g.Pa;if(e(W!=null),e(Z!=null),Z.Cb=Re(W),Z.Cb){if(Z.Bb=Re(W),Re(W)){for(Z.Fb=Re(W),ne=0;4>ne;++ne)Z.Zb[ne]=Re(W)?me(W,7):0;for(ne=0;4>ne;++ne)Z.Lb[ne]=Re(W)?me(W,6):0}if(Z.Bb)for(ne=0;3>ne;++ne)le.jb[ne]=Re(W)?ce(W,8):255}else Z.Bb=0;if(W.Ka)return mn(g,3,"cannot parse segment header");if((Z=g.ed).zd=Re(W),Z.Tb=ce(W,6),Z.wb=ce(W,3),Z.Pc=Re(W),Z.Pc&&Re(W)){for(le=0;4>le;++le)Re(W)&&(Z.vd[le]=me(W,6));for(le=0;4>le;++le)Re(W)&&(Z.od[le]=me(W,6))}if(g.L=Z.Tb==0?0:Z.zd?1:2,W.Ka)return mn(g,3,"cannot parse filter header");var xe=H;if(H=ne=P,P=ne+xe,Z=xe,g.Xb=(1<<ce(g.m,2))-1,xe<3*(le=g.Xb))j=7;else{for(ne+=3*le,Z-=3*le,xe=0;xe<le;++xe){var Ie=j[H+0]|j[H+1]<<8|j[H+2]<<16;Ie>Z&&(Ie=Z),Q(g.Jc[+xe],j,ne,Ie),ne+=Ie,Z-=Ie,H+=3}Q(g.Jc[+le],j,ne,Z),j=ne<P?0:5}if(j!=0)return mn(g,j,"cannot parse partitions");for(j=ce(ne=g.m,7),H=Re(ne)?me(ne,4):0,P=Re(ne)?me(ne,4):0,Z=Re(ne)?me(ne,4):0,le=Re(ne)?me(ne,4):0,ne=Re(ne)?me(ne,4):0,xe=g.Qa,Ie=0;4>Ie;++Ie){if(xe.Cb){var ae=xe.Zb[Ie];xe.Fb||(ae+=j)}else{if(0<Ie){g.pb[Ie]=g.pb[0];continue}ae=j}var _e=g.pb[Ie];_e.Sc[0]=na[ts(ae+H,127)],_e.Sc[1]=ra[ts(ae+0,127)],_e.Eb[0]=2*na[ts(ae+P,127)],_e.Eb[1]=101581*ra[ts(ae+Z,127)]>>16,8>_e.Eb[1]&&(_e.Eb[1]=8),_e.Qc[0]=na[ts(ae+le,117)],_e.Qc[1]=ra[ts(ae+ne,127)],_e.lc=ae+ne}if(!Y.Rb)return mn(g,4,"Not a key frame.");for(Re(W),Y=g.Pa,j=0;4>j;++j){for(H=0;8>H;++H)for(P=0;3>P;++P)for(Z=0;11>Z;++Z)le=Ue(W,pr[j][H][P][Z])?ce(W,8):Im[j][H][P][Z],Y.Wc[j][H].Yb[P][Z]=le;for(H=0;17>H;++H)Y.Xc[j][H]=Y.Wc[j][vn[H]]}return g.kc=Re(W),g.kc&&(g.Bd=ce(W,8)),g.cb=1}function bn(g,w,j,P,H,W,Y){var Z=w[H].Yb[j];for(j=0;16>H;++H){if(!Ue(g,Z[j+0]))return H;for(;!Ue(g,Z[j+1]);)if(Z=w[++H].Yb[0],j=0,H==16)return 16;var ne=w[H+1].Yb;if(Ue(g,Z[j+2])){var le=g,xe=0;if(Ue(le,(ae=Z)[(Ie=j)+3]))if(Ue(le,ae[Ie+6])){for(Z=0,Ie=2*(xe=Ue(le,ae[Ie+8]))+(ae=Ue(le,ae[Ie+9+xe])),xe=0,ae=Cm[Ie];ae[Z];++Z)xe+=xe+Ue(le,ae[Z]);xe+=3+(8<<Ie)}else Ue(le,ae[Ie+7])?(xe=7+2*Ue(le,165),xe+=Ue(le,145)):xe=5+Ue(le,159);else xe=Ue(le,ae[Ie+4])?3+Ue(le,ae[Ie+5]):2;Z=ne[2]}else xe=1,Z=ne[1];ne=Y+Bh[H],0>(le=g).b&&Pe(le);var Ie,ae=le.b,_e=(Ie=le.Ca>>1)-(le.I>>ae)>>31;--le.b,le.Ca+=_e,le.Ca|=1,le.I-=(Ie+1&_e)<<ae,W[ne]=((xe^_e)-_e)*P[(0<H)+0]}return 16}function qa(g){var w=g.rb[g.sb-1];w.la=0,w.Na=0,i(g.zc,0,0,g.zc.length),g.ja=0}function Dr(g,w,j,P,H){H=g[w+j+32*P]+(H>>3),g[w+j+32*P]=-256&H?0>H?0:255:H}function mr(g,w,j,P,H,W){Dr(g,w,0,j,P+H),Dr(g,w,1,j,P+W),Dr(g,w,2,j,P-W),Dr(g,w,3,j,P-H)}function jr(g){return(20091*g>>16)+g}function ho(g,w,j,P){var H,W=0,Y=a(16);for(H=0;4>H;++H){var Z=g[w+0]+g[w+8],ne=g[w+0]-g[w+8],le=(35468*g[w+4]>>16)-jr(g[w+12]),xe=jr(g[w+4])+(35468*g[w+12]>>16);Y[W+0]=Z+xe,Y[W+1]=ne+le,Y[W+2]=ne-le,Y[W+3]=Z-xe,W+=4,w++}for(H=W=0;4>H;++H)Z=(g=Y[W+0]+4)+Y[W+8],ne=g-Y[W+8],le=(35468*Y[W+4]>>16)-jr(Y[W+12]),Dr(j,P,0,0,Z+(xe=jr(Y[W+4])+(35468*Y[W+12]>>16))),Dr(j,P,1,0,ne+le),Dr(j,P,2,0,ne-le),Dr(j,P,3,0,Z-xe),W++,P+=32}function xc(g,w,j,P){var H=g[w+0]+4,W=35468*g[w+4]>>16,Y=jr(g[w+4]),Z=35468*g[w+1]>>16;mr(j,P,0,H+Y,g=jr(g[w+1]),Z),mr(j,P,1,H+W,g,Z),mr(j,P,2,H-W,g,Z),mr(j,P,3,H-Y,g,Z)}function Tl(g,w,j,P,H){ho(g,w,j,P),H&&ho(g,w+16,j,P+4)}function Ni(g,w,j,P){No(g,w+0,j,P,1),No(g,w+32,j,P+128,1)}function Cl(g,w,j,P){var H;for(g=g[w+0]+4,H=0;4>H;++H)for(w=0;4>w;++w)Dr(j,P,w,H,g)}function ya(g,w,j,P){g[w+0]&&Dn(g,w+0,j,P),g[w+16]&&Dn(g,w+16,j,P+4),g[w+32]&&Dn(g,w+32,j,P+128),g[w+48]&&Dn(g,w+48,j,P+128+4)}function ti(g,w,j,P){var H,W=a(16);for(H=0;4>H;++H){var Y=g[w+0+H]+g[w+12+H],Z=g[w+4+H]+g[w+8+H],ne=g[w+4+H]-g[w+8+H],le=g[w+0+H]-g[w+12+H];W[0+H]=Y+Z,W[8+H]=Y-Z,W[4+H]=le+ne,W[12+H]=le-ne}for(H=0;4>H;++H)Y=(g=W[0+4*H]+3)+W[3+4*H],Z=W[1+4*H]+W[2+4*H],ne=W[1+4*H]-W[2+4*H],le=g-W[3+4*H],j[P+0]=Y+Z>>3,j[P+16]=le+ne>>3,j[P+32]=Y-Z>>3,j[P+48]=le-ne>>3,P+=64}function Va(g,w,j){var P,H=w-32,W=Hi,Y=255-g[H-1];for(P=0;P<j;++P){var Z,ne=W,le=Y+g[w-1];for(Z=0;Z<j;++Z)g[w+Z]=ne[le+g[H+Z]];w+=32}}function Il(g,w){Va(g,w,4)}function Rl(g,w){Va(g,w,8)}function $o(g,w){Va(g,w,16)}function Go(g,w){var j;for(j=0;16>j;++j)r(g,w+32*j,g,w-32,16)}function xa(g,w){var j;for(j=16;0<j;--j)i(g,w,g[w-1],16),w+=32}function Ui(g,w,j){var P;for(P=0;16>P;++P)i(w,j+32*P,g,16)}function ks(g,w){var j,P=16;for(j=0;16>j;++j)P+=g[w-1+32*j]+g[w+j-32];Ui(P>>5,g,w)}function ba(g,w){var j,P=8;for(j=0;16>j;++j)P+=g[w-1+32*j];Ui(P>>4,g,w)}function Bi(g,w){var j,P=8;for(j=0;16>j;++j)P+=g[w+j-32];Ui(P>>4,g,w)}function Ua(g,w){Ui(128,g,w)}function Lt(g,w,j){return g+2*w+j+2>>2}function fo(g,w){var j,P=w-32;for(P=new Uint8Array([Lt(g[P-1],g[P+0],g[P+1]),Lt(g[P+0],g[P+1],g[P+2]),Lt(g[P+1],g[P+2],g[P+3]),Lt(g[P+2],g[P+3],g[P+4])]),j=0;4>j;++j)r(g,w+32*j,P,0,P.length)}function Wo(g,w){var j=g[w-1],P=g[w-1+32],H=g[w-1+64],W=g[w-1+96];et(g,w+0,16843009*Lt(g[w-1-32],j,P)),et(g,w+32,16843009*Lt(j,P,H)),et(g,w+64,16843009*Lt(P,H,W)),et(g,w+96,16843009*Lt(H,W,W))}function Ba(g,w){var j,P=4;for(j=0;4>j;++j)P+=g[w+j-32]+g[w-1+32*j];for(P>>=3,j=0;4>j;++j)i(g,w+32*j,P,4)}function ni(g,w){var j=g[w-1+0],P=g[w-1+32],H=g[w-1+64],W=g[w-1-32],Y=g[w+0-32],Z=g[w+1-32],ne=g[w+2-32],le=g[w+3-32];g[w+0+96]=Lt(P,H,g[w-1+96]),g[w+1+96]=g[w+0+64]=Lt(j,P,H),g[w+2+96]=g[w+1+64]=g[w+0+32]=Lt(W,j,P),g[w+3+96]=g[w+2+64]=g[w+1+32]=g[w+0+0]=Lt(Y,W,j),g[w+3+64]=g[w+2+32]=g[w+1+0]=Lt(Z,Y,W),g[w+3+32]=g[w+2+0]=Lt(ne,Z,Y),g[w+3+0]=Lt(le,ne,Z)}function $r(g,w){var j=g[w+1-32],P=g[w+2-32],H=g[w+3-32],W=g[w+4-32],Y=g[w+5-32],Z=g[w+6-32],ne=g[w+7-32];g[w+0+0]=Lt(g[w+0-32],j,P),g[w+1+0]=g[w+0+32]=Lt(j,P,H),g[w+2+0]=g[w+1+32]=g[w+0+64]=Lt(P,H,W),g[w+3+0]=g[w+2+32]=g[w+1+64]=g[w+0+96]=Lt(H,W,Y),g[w+3+32]=g[w+2+64]=g[w+1+96]=Lt(W,Y,Z),g[w+3+64]=g[w+2+96]=Lt(Y,Z,ne),g[w+3+96]=Lt(Z,ne,ne)}function mo(g,w){var j=g[w-1+0],P=g[w-1+32],H=g[w-1+64],W=g[w-1-32],Y=g[w+0-32],Z=g[w+1-32],ne=g[w+2-32],le=g[w+3-32];g[w+0+0]=g[w+1+64]=W+Y+1>>1,g[w+1+0]=g[w+2+64]=Y+Z+1>>1,g[w+2+0]=g[w+3+64]=Z+ne+1>>1,g[w+3+0]=ne+le+1>>1,g[w+0+96]=Lt(H,P,j),g[w+0+64]=Lt(P,j,W),g[w+0+32]=g[w+1+96]=Lt(j,W,Y),g[w+1+32]=g[w+2+96]=Lt(W,Y,Z),g[w+2+32]=g[w+3+96]=Lt(Y,Z,ne),g[w+3+32]=Lt(Z,ne,le)}function Vn(g,w){var j=g[w+0-32],P=g[w+1-32],H=g[w+2-32],W=g[w+3-32],Y=g[w+4-32],Z=g[w+5-32],ne=g[w+6-32],le=g[w+7-32];g[w+0+0]=j+P+1>>1,g[w+1+0]=g[w+0+64]=P+H+1>>1,g[w+2+0]=g[w+1+64]=H+W+1>>1,g[w+3+0]=g[w+2+64]=W+Y+1>>1,g[w+0+32]=Lt(j,P,H),g[w+1+32]=g[w+0+96]=Lt(P,H,W),g[w+2+32]=g[w+1+96]=Lt(H,W,Y),g[w+3+32]=g[w+2+96]=Lt(W,Y,Z),g[w+3+64]=Lt(Y,Z,ne),g[w+3+96]=Lt(Z,ne,le)}function ns(g,w){var j=g[w-1+0],P=g[w-1+32],H=g[w-1+64],W=g[w-1+96];g[w+0+0]=j+P+1>>1,g[w+2+0]=g[w+0+32]=P+H+1>>1,g[w+2+32]=g[w+0+64]=H+W+1>>1,g[w+1+0]=Lt(j,P,H),g[w+3+0]=g[w+1+32]=Lt(P,H,W),g[w+3+32]=g[w+1+64]=Lt(H,W,W),g[w+3+64]=g[w+2+64]=g[w+0+96]=g[w+1+96]=g[w+2+96]=g[w+3+96]=W}function po(g,w){var j=g[w-1+0],P=g[w-1+32],H=g[w-1+64],W=g[w-1+96],Y=g[w-1-32],Z=g[w+0-32],ne=g[w+1-32],le=g[w+2-32];g[w+0+0]=g[w+2+32]=j+Y+1>>1,g[w+0+32]=g[w+2+64]=P+j+1>>1,g[w+0+64]=g[w+2+96]=H+P+1>>1,g[w+0+96]=W+H+1>>1,g[w+3+0]=Lt(Z,ne,le),g[w+2+0]=Lt(Y,Z,ne),g[w+1+0]=g[w+3+32]=Lt(j,Y,Z),g[w+1+32]=g[w+3+64]=Lt(P,j,Y),g[w+1+64]=g[w+3+96]=Lt(H,P,j),g[w+1+96]=Lt(W,H,P)}function Ps(g,w){var j;for(j=0;8>j;++j)r(g,w+32*j,g,w-32,8)}function Ll(g,w){var j;for(j=0;8>j;++j)i(g,w,g[w-1],8),w+=32}function rs(g,w,j){var P;for(P=0;8>P;++P)i(w,j+32*P,g,8)}function wa(g,w){var j,P=8;for(j=0;8>j;++j)P+=g[w+j-32]+g[w-1+32*j];rs(P>>4,g,w)}function is(g,w){var j,P=4;for(j=0;8>j;++j)P+=g[w+j-32];rs(P>>3,g,w)}function Mr(g,w){var j,P=4;for(j=0;8>j;++j)P+=g[w-1+32*j];rs(P>>3,g,w)}function $s(g,w){rs(128,g,w)}function hi(g,w,j){var P=g[w-j],H=g[w+0],W=3*(H-P)+Ao[1020+g[w-2*j]-g[w+j]],Y=Lu[112+(W+4>>3)];g[w-j]=Hi[255+P+Lu[112+(W+3>>3)]],g[w+0]=Hi[255+H-Y]}function Gs(g,w,j,P){var H=g[w+0],W=g[w+j];return ji[255+g[w-2*j]-g[w-j]]>P||ji[255+W-H]>P}function za(g,w,j,P){return 4*ji[255+g[w-j]-g[w+0]]+ji[255+g[w-2*j]-g[w+j]]<=P}function Ws(g,w,j,P,H){var W=g[w-3*j],Y=g[w-2*j],Z=g[w-j],ne=g[w+0],le=g[w+j],xe=g[w+2*j],Ie=g[w+3*j];return 4*ji[255+Z-ne]+ji[255+Y-le]>P?0:ji[255+g[w-4*j]-W]<=H&&ji[255+W-Y]<=H&&ji[255+Y-Z]<=H&&ji[255+Ie-xe]<=H&&ji[255+xe-le]<=H&&ji[255+le-ne]<=H}function Ys(g,w,j,P){var H=2*P+1;for(P=0;16>P;++P)za(g,w+P,j,H)&&hi(g,w+P,j)}function bs(g,w,j,P){var H=2*P+1;for(P=0;16>P;++P)za(g,w+P*j,1,H)&&hi(g,w+P*j,1)}function go(g,w,j,P){var H;for(H=3;0<H;--H)Ys(g,w+=4*j,j,P)}function Yo(g,w,j,P){var H;for(H=3;0<H;--H)bs(g,w+=4,j,P)}function ss(g,w,j,P,H,W,Y,Z){for(W=2*W+1;0<H--;){if(Ws(g,w,j,W,Y))if(Gs(g,w,j,Z))hi(g,w,j);else{var ne=g,le=w,xe=j,Ie=ne[le-2*xe],ae=ne[le-xe],_e=ne[le+0],Te=ne[le+xe],Ve=ne[le+2*xe],Ce=27*(Ge=Ao[1020+3*(_e-ae)+Ao[1020+Ie-Te]])+63>>7,qe=18*Ge+63>>7,Ge=9*Ge+63>>7;ne[le-3*xe]=Hi[255+ne[le-3*xe]+Ge],ne[le-2*xe]=Hi[255+Ie+qe],ne[le-xe]=Hi[255+ae+Ce],ne[le+0]=Hi[255+_e-Ce],ne[le+xe]=Hi[255+Te-qe],ne[le+2*xe]=Hi[255+Ve-Ge]}w+=P}}function Ks(g,w,j,P,H,W,Y,Z){for(W=2*W+1;0<H--;){if(Ws(g,w,j,W,Y))if(Gs(g,w,j,Z))hi(g,w,j);else{var ne=g,le=w,xe=j,Ie=ne[le-xe],ae=ne[le+0],_e=ne[le+xe],Te=Lu[112+(4+(Ve=3*(ae-Ie))>>3)],Ve=Lu[112+(Ve+3>>3)],Ce=Te+1>>1;ne[le-2*xe]=Hi[255+ne[le-2*xe]+Ce],ne[le-xe]=Hi[255+Ie+Ve],ne[le+0]=Hi[255+ae-Te],ne[le+xe]=Hi[255+_e-Ce]}w+=P}}function kl(g,w,j,P,H,W){ss(g,w,j,1,16,P,H,W)}function Ds(g,w,j,P,H,W){ss(g,w,1,j,16,P,H,W)}function Ko(g,w,j,P,H,W){var Y;for(Y=3;0<Y;--Y)Ks(g,w+=4*j,j,1,16,P,H,W)}function A(g,w,j,P,H,W){var Y;for(Y=3;0<Y;--Y)Ks(g,w+=4,1,j,16,P,H,W)}function B(g,w,j,P,H,W,Y,Z){ss(g,w,H,1,8,W,Y,Z),ss(j,P,H,1,8,W,Y,Z)}function oe(g,w,j,P,H,W,Y,Z){ss(g,w,1,H,8,W,Y,Z),ss(j,P,1,H,8,W,Y,Z)}function ve(g,w,j,P,H,W,Y,Z){Ks(g,w+4*H,H,1,8,W,Y,Z),Ks(j,P+4*H,H,1,8,W,Y,Z)}function Ae(g,w,j,P,H,W,Y,Z){Ks(g,w+4,1,H,8,W,Y,Z),Ks(j,P+4,1,H,8,W,Y,Z)}function He(){this.ba=new St,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new un,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Xe(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ht(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function gt(){this.ua=0,this.Wa=new ct,this.vb=new ct,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ye,this.yc=new F}function Mt(){this.xb=this.a=0,this.l=new di,this.ca=new St,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new gt,this.ab=0,this.gc=c(4,ht),this.Oc=0}function Ct(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new di,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function pn(g,w,j,P,H,W,Y){for(g=g==null?0:g[w+0],w=0;w<Y;++w)H[W+w]=g+j[P+w]&255,g=H[W+w]}function ar(g,w,j,P,H,W,Y){var Z;if(g==null)pn(null,null,j,P,H,W,Y);else for(Z=0;Z<Y;++Z)H[W+Z]=g[w+Z]+j[P+Z]&255}function Kn(g,w,j,P,H,W,Y){if(g==null)pn(null,null,j,P,H,W,Y);else{var Z,ne=g[w+0],le=ne,xe=ne;for(Z=0;Z<Y;++Z)le=xe+(ne=g[w+Z])-le,xe=j[P+Z]+(-256&le?0>le?0:255:le)&255,le=ne,H[W+Z]=xe}}function v(g,w,j,P){var H=w.width,W=w.o;if(e(g!=null&&w!=null),0>j||0>=P||j+P>W)return null;if(!g.Cc){if(g.ga==null){var Y;if(g.ga=new Ct,(Y=g.ga==null)||(Y=w.width*w.o,e(g.Gb.length==0),g.Gb=a(Y),g.Uc=0,g.Gb==null?Y=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,Y=1),Y=!Y),!Y){Y=g.ga;var Z=g.Fa,ne=g.P,le=g.qc,xe=g.mb,Ie=g.nb,ae=ne+1,_e=le-1,Te=Y.l;if(e(Z!=null&&xe!=null&&w!=null),So[0]=null,So[1]=pn,So[2]=ar,So[3]=Kn,Y.ca=xe,Y.tb=Ie,Y.c=w.width,Y.i=w.height,e(0<Y.c&&0<Y.i),1>=le)w=0;else if(Y.$a=3&Z[ne+0],Y.Z=Z[ne+0]>>2&3,Y.Lc=Z[ne+0]>>4&3,ne=Z[ne+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||ne)w=0;else if(Te.put=Tt,Te.ac=ei,Te.bc=pa,Te.ma=Y,Te.width=w.width,Te.height=w.height,Te.Da=w.Da,Te.v=w.v,Te.va=w.va,Te.j=w.j,Te.o=w.o,Y.$a)e:{e(Y.$a==1),w=Fa();t:for(;;){if(w==null){w=0;break e}if(e(Y!=null),Y.mc=w,w.c=Y.c,w.i=Y.i,w.l=Y.l,w.l.ma=Y,w.l.width=Y.c,w.l.height=Y.i,w.a=0,Se(w.m,Z,ae,_e),!Rs(Y.c,Y.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&qn(w.s)?(Y.ic=1,Z=w.c*w.i,w.Ta=null,w.Ua=0,w.V=a(Z),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(Y.ic=0,w=qi(w,Y.c)),!w))break t;w=1;break e}Y.mc=null,w=0}else w=_e>=Y.c*Y.i;Y=!w}if(Y)return null;g.ga.Lc!=1?g.Ga=0:P=W-j}e(g.ga!=null),e(j+P<=W);e:{if(w=(Z=g.ga).c,W=Z.l.o,Z.$a==0){if(ae=g.rc,_e=g.Vc,Te=g.Fa,ne=g.P+1+j*w,le=g.mb,xe=g.nb+j*w,e(ne<=g.P+g.qc),Z.Z!=0)for(e(So[Z.Z]!=null),Y=0;Y<P;++Y)So[Z.Z](ae,_e,Te,ne,le,xe,w),ae=le,_e=xe,xe+=w,ne+=w;else for(Y=0;Y<P;++Y)r(le,xe,Te,ne,w),ae=le,_e=xe,xe+=w,ne+=w;g.rc=ae,g.Vc=_e}else{if(e(Z.mc!=null),w=j+P,e((Y=Z.mc)!=null),e(w<=Y.i),Y.C>=w)w=1;else if(Z.ic||De(),Z.ic){Z=Y.V,ae=Y.Ba,_e=Y.c;var Ve=Y.i,Ce=(Te=1,ne=Y.$/_e,le=Y.$%_e,xe=Y.m,Ie=Y.s,Y.$),qe=_e*Ve,Ge=_e*w,tt=Ie.wc,Qe=Ce<Ge?zr(Ie,le,ne):null;e(Ce<=qe),e(w<=Ve),e(qn(Ie));t:for(;;){for(;!xe.h&&Ce<Ge;){if(le&tt||(Qe=zr(Ie,le,ne)),e(Qe!=null),we(xe),256>(Ve=Yn(Qe.G[0],Qe.H[0],xe)))Z[ae+Ce]=Ve,++Ce,++le>=_e&&(le=0,++ne<=w&&!(ne%16)&&Hr(Y,ne));else{if(!(280>Ve)){Te=0;break t}Ve=Mi(Ve-256,xe);var vt,ut=Yn(Qe.G[4],Qe.H[4],xe);if(we(xe),!(Ce>=(ut=Oi(_e,ut=Mi(ut,xe)))&&qe-Ce>=Ve)){Te=0;break t}for(vt=0;vt<Ve;++vt)Z[ae+Ce+vt]=Z[ae+Ce+vt-ut];for(Ce+=Ve,le+=Ve;le>=_e;)le-=_e,++ne<=w&&!(ne%16)&&Hr(Y,ne);Ce<Ge&&le&tt&&(Qe=zr(Ie,le,ne))}e(xe.h==fe(xe))}Hr(Y,ne>w?w:ne);break t}!Te||xe.h&&Ce<qe?(Te=0,Y.a=xe.h?5:3):Y.$=Ce,w=Te}else w=Fi(Y,Y.V,Y.Ba,Y.c,Y.i,w,ga);if(!w){P=0;break e}}j+P>=W&&(g.Cc=1),P=1}if(!P)return null;if(g.Cc&&((P=g.ga)!=null&&(P.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+j*H}function T(g,w,j,P,H,W){for(;0<H--;){var Y,Z=g,ne=w+(j?1:0),le=g,xe=w+(j?0:3);for(Y=0;Y<P;++Y){var Ie=le[xe+4*Y];Ie!=255&&(Ie*=32897,Z[ne+4*Y+0]=Z[ne+4*Y+0]*Ie>>23,Z[ne+4*Y+1]=Z[ne+4*Y+1]*Ie>>23,Z[ne+4*Y+2]=Z[ne+4*Y+2]*Ie>>23)}w+=W}}function O(g,w,j,P,H){for(;0<P--;){var W;for(W=0;W<j;++W){var Y=g[w+2*W+0],Z=15&(le=g[w+2*W+1]),ne=4369*Z,le=(240&le|le>>4)*ne>>16;g[w+2*W+0]=(240&Y|Y>>4)*ne>>16&240|(15&Y|Y<<4)*ne>>16>>4&15,g[w+2*W+1]=240&le|Z}w+=H}}function ee(g,w,j,P,H,W,Y,Z){var ne,le,xe=255;for(le=0;le<H;++le){for(ne=0;ne<P;++ne){var Ie=g[w+ne];W[Y+4*ne]=Ie,xe&=Ie}w+=j,Y+=Z}return xe!=255}function je(g,w,j,P,H){var W;for(W=0;W<H;++W)j[P+W]=g[w+W]>>8}function De(){Ml=T,Xs=O,Cu=ee,qs=je}function nt(g,w,j){k[g]=function(P,H,W,Y,Z,ne,le,xe,Ie,ae,_e,Te,Ve,Ce,qe,Ge,tt){var Qe,vt=tt-1>>1,ut=Z[ne+0]|le[xe+0]<<16,Qt=Ie[ae+0]|_e[Te+0]<<16;e(P!=null);var mt=3*ut+Qt+131074>>2;for(w(P[H+0],255&mt,mt>>16,Ve,Ce),W!=null&&(mt=3*Qt+ut+131074>>2,w(W[Y+0],255&mt,mt>>16,qe,Ge)),Qe=1;Qe<=vt;++Qe){var gn=Z[ne+Qe]|le[xe+Qe]<<16,gr=Ie[ae+Qe]|_e[Te+Qe]<<16,sn=ut+gn+Qt+gr+524296,dt=sn+2*(gn+Qt)>>3;mt=dt+ut>>1,ut=(sn=sn+2*(ut+gr)>>3)+gn>>1,w(P[H+2*Qe-1],255&mt,mt>>16,Ve,Ce+(2*Qe-1)*j),w(P[H+2*Qe-0],255&ut,ut>>16,Ve,Ce+(2*Qe-0)*j),W!=null&&(mt=sn+Qt>>1,ut=dt+gr>>1,w(W[Y+2*Qe-1],255&mt,mt>>16,qe,Ge+(2*Qe-1)*j),w(W[Y+2*Qe+0],255&ut,ut>>16,qe,Ge+(2*Qe+0)*j)),ut=gn,Qt=gr}1&tt||(mt=3*ut+Qt+131074>>2,w(P[H+tt-1],255&mt,mt>>16,Ve,Ce+(tt-1)*j),W!=null&&(mt=3*Qt+ut+131074>>2,w(W[Y+tt-1],255&mt,mt>>16,qe,Ge+(tt-1)*j)))}}function Yt(){Ci[gd]=ql,Ci[$i]=Tc,Ci[vd]=Hh,Ci[Js]=_d,Ci[ku]=el,Ci[Sc]=Ja,Ci[Xo]=tl,Ci[Pu]=Tc,Ci[yd]=_d,Ci[Ec]=el,Ci[xd]=Ja}function or(g){return g&-16384?0>g?0:255:g>>Nd}function hn(g,w){return or((19077*g>>8)+(26149*w>>8)-14234)}function Un(g,w,j){return or((19077*g>>8)-(6419*w>>8)-(13320*j>>8)+8708)}function fi(g,w){return or((19077*g>>8)+(33050*w>>8)-17685)}function Ai(g,w,j,P,H){P[H+0]=hn(g,j),P[H+1]=Un(g,w,j),P[H+2]=fi(g,w)}function Xn(g,w,j,P,H){P[H+0]=fi(g,w),P[H+1]=Un(g,w,j),P[H+2]=hn(g,j)}function Si(g,w,j,P,H){var W=Un(g,w,j);w=W<<3&224|fi(g,w)>>3,P[H+0]=248&hn(g,j)|W>>5,P[H+1]=w}function Ms(g,w,j,P,H){var W=240&fi(g,w)|15;P[H+0]=240&hn(g,j)|Un(g,w,j)>>4,P[H+1]=W}function Ha(g,w,j,P,H){P[H+0]=255,Ai(g,w,j,P,H+1)}function $a(g,w,j,P,H){Xn(g,w,j,P,H),P[H+3]=255}function as(g,w,j,P,H){Ai(g,w,j,P,H),P[H+3]=255}function vo(g,w,j){k[g]=function(P,H,W,Y,Z,ne,le,xe,Ie){for(var ae=xe+(-2&Ie)*j;xe!=ae;)w(P[H+0],W[Y+0],Z[ne+0],le,xe),w(P[H+1],W[Y+0],Z[ne+0],le,xe+j),H+=2,++Y,++ne,xe+=2*j;1&Ie&&w(P[H+0],W[Y+0],Z[ne+0],le,xe)}}function bc(g,w,j){return j==0?g==0?w==0?6:5:w==0?4:0:j}function Eu(g,w,j,P,H){switch(g>>>30){case 3:No(w,j,P,H,0);break;case 2:zi(w,j,P,H);break;case 1:Dn(w,j,P,H)}}function Os(g,w){var j,P,H=w.M,W=w.Nb,Y=g.oc,Z=g.pc+40,ne=g.oc,le=g.pc+584,xe=g.oc,Ie=g.pc+600;for(j=0;16>j;++j)Y[Z+32*j-1]=129;for(j=0;8>j;++j)ne[le+32*j-1]=129,xe[Ie+32*j-1]=129;for(0<H?Y[Z-1-32]=ne[le-1-32]=xe[Ie-1-32]=129:(i(Y,Z-32-1,127,21),i(ne,le-32-1,127,9),i(xe,Ie-32-1,127,9)),P=0;P<g.za;++P){var ae=w.ya[w.aa+P];if(0<P){for(j=-1;16>j;++j)r(Y,Z+32*j-4,Y,Z+32*j+12,4);for(j=-1;8>j;++j)r(ne,le+32*j-4,ne,le+32*j+4,4),r(xe,Ie+32*j-4,xe,Ie+32*j+4,4)}var _e=g.Gd,Te=g.Hd+P,Ve=ae.ad,Ce=ae.Hc;if(0<H&&(r(Y,Z-32,_e[Te].y,0,16),r(ne,le-32,_e[Te].f,0,8),r(xe,Ie-32,_e[Te].ea,0,8)),ae.Za){var qe=Y,Ge=Z-32+16;for(0<H&&(P>=g.za-1?i(qe,Ge,_e[Te].y[15],4):r(qe,Ge,_e[Te+1].y,0,4)),j=0;4>j;j++)qe[Ge+128+j]=qe[Ge+256+j]=qe[Ge+384+j]=qe[Ge+0+j];for(j=0;16>j;++j,Ce<<=2)qe=Y,Ge=Z+qr[j],Tr[ae.Ob[j]](qe,Ge),Eu(Ce,Ve,16*+j,qe,Ge)}else if(qe=bc(P,H,ae.Ob[0]),ls[qe](Y,Z),Ce!=0)for(j=0;16>j;++j,Ce<<=2)Eu(Ce,Ve,16*+j,Y,Z+qr[j]);for(j=ae.Gc,qe=bc(P,H,ae.Dd),Sa[qe](ne,le),Sa[qe](xe,Ie),Ce=Ve,qe=ne,Ge=le,255&(ae=0|j)&&(170&ae?Qs(Ce,256,qe,Ge):En(Ce,256,qe,Ge)),ae=xe,Ce=Ie,255&(j>>=8)&&(170&j?Qs(Ve,320,ae,Ce):En(Ve,320,ae,Ce)),H<g.Ub-1&&(r(_e[Te].y,0,Y,Z+480,16),r(_e[Te].f,0,ne,le+224,8),r(_e[Te].ea,0,xe,Ie+224,8)),j=8*W*g.B,_e=g.sa,Te=g.ta+16*P+16*W*g.R,Ve=g.qa,ae=g.ra+8*P+j,Ce=g.Ha,qe=g.Ia+8*P+j,j=0;16>j;++j)r(_e,Te+j*g.R,Y,Z+32*j,16);for(j=0;8>j;++j)r(Ve,ae+j*g.B,ne,le+32*j,8),r(Ce,qe+j*g.B,xe,Ie+32*j,8)}}function _a(g,w,j,P,H,W,Y,Z,ne){var le=[0],xe=[0],Ie=0,ae=ne!=null?ne.kd:0,_e=ne??new Xe;if(g==null||12>j)return 7;_e.data=g,_e.w=w,_e.ha=j,w=[w],j=[j],_e.gb=[_e.gb];e:{var Te=w,Ve=j,Ce=_e.gb;if(e(g!=null),e(Ve!=null),e(Ce!=null),Ce[0]=0,12<=Ve[0]&&!t(g,Te[0],"RIFF")){if(t(g,Te[0]+8,"WEBP")){Ce=3;break e}var qe=Be(g,Te[0]+4);if(12>qe||4294967286<qe){Ce=3;break e}if(ae&&qe>Ve[0]-8){Ce=7;break e}Ce[0]=qe,Te[0]+=12,Ve[0]-=12}Ce=0}if(Ce!=0)return Ce;for(qe=0<_e.gb[0],j=j[0];;){e:{var Ge=g;Ve=w,Ce=j;var tt=le,Qe=xe,vt=Te=[0];if((mt=Ie=[Ie])[0]=0,8>Ce[0])Ce=7;else{if(!t(Ge,Ve[0],"VP8X")){if(Be(Ge,Ve[0]+4)!=10){Ce=3;break e}if(18>Ce[0]){Ce=7;break e}var ut=Be(Ge,Ve[0]+8),Qt=1+Ne(Ge,Ve[0]+12);if(2147483648<=Qt*(Ge=1+Ne(Ge,Ve[0]+15))){Ce=3;break e}vt!=null&&(vt[0]=ut),tt!=null&&(tt[0]=Qt),Qe!=null&&(Qe[0]=Ge),Ve[0]+=18,Ce[0]-=18,mt[0]=1}Ce=0}}if(Ie=Ie[0],Te=Te[0],Ce!=0)return Ce;if(Ve=!!(2&Te),!qe&&Ie)return 3;if(W!=null&&(W[0]=!!(16&Te)),Y!=null&&(Y[0]=Ve),Z!=null&&(Z[0]=0),Y=le[0],Te=xe[0],Ie&&Ve&&ne==null){Ce=0;break}if(4>j){Ce=7;break}if(qe&&Ie||!qe&&!Ie&&!t(g,w[0],"ALPH")){j=[j],_e.na=[_e.na],_e.P=[_e.P],_e.Sa=[_e.Sa];e:{ut=g,Ce=w,qe=j;var mt=_e.gb;tt=_e.na,Qe=_e.P,vt=_e.Sa,Qt=22,e(ut!=null),e(qe!=null),Ge=Ce[0];var gn=qe[0];for(e(tt!=null),e(vt!=null),tt[0]=null,Qe[0]=null,vt[0]=0;;){if(Ce[0]=Ge,qe[0]=gn,8>gn){Ce=7;break e}var gr=Be(ut,Ge+4);if(4294967286<gr){Ce=3;break e}var sn=8+gr+1&-2;if(Qt+=sn,0<mt&&Qt>mt){Ce=3;break e}if(!t(ut,Ge,"VP8 ")||!t(ut,Ge,"VP8L")){Ce=0;break e}if(gn[0]<sn){Ce=7;break e}t(ut,Ge,"ALPH")||(tt[0]=ut,Qe[0]=Ge+8,vt[0]=gr),Ge+=sn,gn-=sn}}if(j=j[0],_e.na=_e.na[0],_e.P=_e.P[0],_e.Sa=_e.Sa[0],Ce!=0)break}j=[j],_e.Ja=[_e.Ja],_e.xa=[_e.xa];e:if(mt=g,Ce=w,qe=j,tt=_e.gb[0],Qe=_e.Ja,vt=_e.xa,ut=Ce[0],Ge=!t(mt,ut,"VP8 "),Qt=!t(mt,ut,"VP8L"),e(mt!=null),e(qe!=null),e(Qe!=null),e(vt!=null),8>qe[0])Ce=7;else{if(Ge||Qt){if(mt=Be(mt,ut+4),12<=tt&&mt>tt-12){Ce=3;break e}if(ae&&mt>qe[0]-8){Ce=7;break e}Qe[0]=mt,Ce[0]+=8,qe[0]-=8,vt[0]=Qt}else vt[0]=5<=qe[0]&&mt[ut+0]==47&&!(mt[ut+4]>>5),Qe[0]=qe[0];Ce=0}if(j=j[0],_e.Ja=_e.Ja[0],_e.xa=_e.xa[0],w=w[0],Ce!=0)break;if(4294967286<_e.Ja)return 3;if(Z==null||Ve||(Z[0]=_e.xa?2:1),Y=[Y],Te=[Te],_e.xa){if(5>j){Ce=7;break}Z=Y,ae=Te,Ve=W,g==null||5>j?g=0:5<=j&&g[w+0]==47&&!(g[w+4]>>5)?(qe=[0],mt=[0],tt=[0],Se(Qe=new J,g,w,j),Ji(Qe,qe,mt,tt)?(Z!=null&&(Z[0]=qe[0]),ae!=null&&(ae[0]=mt[0]),Ve!=null&&(Ve[0]=tt[0]),g=1):g=0):g=0}else{if(10>j){Ce=7;break}Z=Te,g==null||10>j||!va(g,w+3,j-3)?g=0:(ae=g[w+0]|g[w+1]<<8|g[w+2]<<16,Ve=16383&(g[w+7]<<8|g[w+6]),g=16383&(g[w+9]<<8|g[w+8]),1&ae||3<(ae>>1&7)||!(ae>>4&1)||ae>>5>=_e.Ja||!Ve||!g?g=0:(Y&&(Y[0]=Ve),Z&&(Z[0]=g),g=1))}if(!g||(Y=Y[0],Te=Te[0],Ie&&(le[0]!=Y||xe[0]!=Te)))return 3;ne!=null&&(ne[0]=_e,ne.offset=w-ne.w,e(4294967286>w-ne.w),e(ne.offset==ne.ha-j));break}return Ce==0||Ce==7&&Ie&&ne==null?(W!=null&&(W[0]|=_e.na!=null&&0<_e.na.length),P!=null&&(P[0]=Y),H!=null&&(H[0]=Te),0):Ce}function yo(g,w,j){var P=w.width,H=w.height,W=0,Y=0,Z=P,ne=H;if(w.Da=g!=null&&0<g.Da,w.Da&&(Z=g.cd,ne=g.bd,W=g.v,Y=g.j,11>j||(W&=-2,Y&=-2),0>W||0>Y||0>=Z||0>=ne||W+Z>P||Y+ne>H))return 0;if(w.v=W,w.j=Y,w.va=W+Z,w.o=Y+ne,w.U=Z,w.T=ne,w.da=g!=null&&0<g.da,w.da){if(!ot(Z,ne,j=[g.ib],W=[g.hb]))return 0;w.ib=j[0],w.hb=W[0]}return w.ob=g!=null&&g.ob,w.Kb=g==null||!g.Sd,w.da&&(w.ob=w.ib<3*P/4&&w.hb<3*H/4,w.Kb=0),1}function ju(g){if(g==null)return 2;if(11>g.S){var w=g.f.RGBA;w.fb+=(g.height-1)*w.A,w.A=-w.A}else w=g.f.kb,g=g.height,w.O+=(g-1)*w.fa,w.fa=-w.fa,w.N+=(g-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(g-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(g-1)*w.lb,w.lb=-w.lb);return 0}function Na(g,w,j,P){if(P==null||0>=g||0>=w)return 2;if(j!=null){if(j.Da){var H=j.cd,W=j.bd,Y=-2&j.v,Z=-2&j.j;if(0>Y||0>Z||0>=H||0>=W||Y+H>g||Z+W>w)return 2;g=H,w=W}if(j.da){if(!ot(g,w,H=[j.ib],W=[j.hb]))return 2;g=H[0],w=W[0]}}P.width=g,P.height=w;e:{var ne=P.width,le=P.height;if(g=P.S,0>=ne||0>=le||!(g>=gd&&13>g))g=2;else{if(0>=P.Rd&&P.sd==null){Y=W=H=w=0;var xe=(Z=ne*Sd[g])*le;if(11>g||(W=(le+1)/2*(w=(ne+1)/2),g==12&&(Y=(H=ne)*le)),(le=a(xe+2*W+Y))==null){g=1;break e}P.sd=le,11>g?((ne=P.f.RGBA).eb=le,ne.fb=0,ne.A=Z,ne.size=xe):((ne=P.f.kb).y=le,ne.O=0,ne.fa=Z,ne.Fd=xe,ne.f=le,ne.N=0+xe,ne.Ab=w,ne.Cd=W,ne.ea=le,ne.W=0+xe+W,ne.Db=w,ne.Ed=W,g==12&&(ne.F=le,ne.J=0+xe+2*W),ne.Tc=Y,ne.lb=H)}if(w=1,H=P.S,W=P.width,Y=P.height,H>=gd&&13>H)if(11>H)g=P.f.RGBA,w&=(Z=Math.abs(g.A))*(Y-1)+W<=g.size,w&=Z>=W*Sd[H],w&=g.eb!=null;else{g=P.f.kb,Z=(W+1)/2,xe=(Y+1)/2,ne=Math.abs(g.fa),le=Math.abs(g.Ab);var Ie=Math.abs(g.Db),ae=Math.abs(g.lb),_e=ae*(Y-1)+W;w&=ne*(Y-1)+W<=g.Fd,w&=le*(xe-1)+Z<=g.Cd,w=(w&=Ie*(xe-1)+Z<=g.Ed)&ne>=W&le>=Z&Ie>=Z,w&=g.y!=null,w&=g.f!=null,w&=g.ea!=null,H==12&&(w&=ae>=W,w&=_e<=g.Tc,w&=g.F!=null)}else w=0;g=w?0:2}}return g!=0||j!=null&&j.fd&&(g=ju(P)),g}var Qo=64,ws=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],os=24,Ga=32,Wa=8,xo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];lt("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(g){return g},k.Predictor2=function(g,w,j){return w[j+0]},k.Predictor3=function(g,w,j){return w[j+1]},k.Predictor4=function(g,w,j){return w[j-1]},k.Predictor5=function(g,w,j){return At(At(g,w[j+1]),w[j+0])},k.Predictor6=function(g,w,j){return At(g,w[j-1])},k.Predictor7=function(g,w,j){return At(g,w[j+0])},k.Predictor8=function(g,w,j){return At(w[j-1],w[j+0])},k.Predictor9=function(g,w,j){return At(w[j+0],w[j+1])},k.Predictor10=function(g,w,j){return At(At(g,w[j-1]),At(w[j+0],w[j+1]))},k.Predictor11=function(g,w,j){var P=w[j+0];return 0>=$t(P>>24&255,g>>24&255,(w=w[j-1])>>24&255)+$t(P>>16&255,g>>16&255,w>>16&255)+$t(P>>8&255,g>>8&255,w>>8&255)+$t(255&P,255&g,255&w)?P:g},k.Predictor12=function(g,w,j){var P=w[j+0];return(Jt((g>>24&255)+(P>>24&255)-((w=w[j-1])>>24&255))<<24|Jt((g>>16&255)+(P>>16&255)-(w>>16&255))<<16|Jt((g>>8&255)+(P>>8&255)-(w>>8&255))<<8|Jt((255&g)+(255&P)-(255&w)))>>>0},k.Predictor13=function(g,w,j){var P=w[j-1];return(rn((g=At(g,w[j+0]))>>24&255,P>>24&255)<<24|rn(g>>16&255,P>>16&255)<<16|rn(g>>8&255,P>>8&255)<<8|rn(255&g,255&P))>>>0};var wc=k.PredictorAdd0;k.PredictorAdd1=cn,lt("Predictor2","PredictorAdd2"),lt("Predictor3","PredictorAdd3"),lt("Predictor4","PredictorAdd4"),lt("Predictor5","PredictorAdd5"),lt("Predictor6","PredictorAdd6"),lt("Predictor7","PredictorAdd7"),lt("Predictor8","PredictorAdd8"),lt("Predictor9","PredictorAdd9"),lt("Predictor10","PredictorAdd10"),lt("Predictor11","PredictorAdd11"),lt("Predictor12","PredictorAdd12"),lt("Predictor13","PredictorAdd13");var _c=k.PredictorAdd2;wt("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),wt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Or,fd=k.ColorIndexInverseTransform,Ya=k.MapARGB,Ka=k.VP8LColorIndexInverseTransformAlpha,Ei=k.MapAlpha,bo=k.VP8LPredictorsAdd=[];bo.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var Nc,Ac,wo,_o,Qa,Pl,Fs,No,zi,Qs,Dn,En,lr,Fr,Xa,Aa,Dl,Tu,qh,Em,jm,Tm,Vh,Uh,Ml,Xs,Cu,qs,Ol=a(511),md=a(2041),Iu=a(225),Ru=a(767),pd=0,Ao=md,Lu=Iu,Hi=Ru,ji=Ol,gd=0,$i=1,vd=2,Js=3,ku=4,Sc=5,Xo=6,Pu=7,yd=8,Ec=9,xd=10,Zs=[2,3,7],jc=[3,3,11],Fl=[280,256,256,256,40],bd=[0,1,1,1,0],Du=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ea=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ta=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Jo=8,na=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ra=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Vs=null,Cm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Bh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],wd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Im=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ti=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],vn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ls=[],Tr=[],Sa=[],Zo=1,zh=2,So=[],Ci=[];nt("UpsampleRgbLinePair",Ai,3),nt("UpsampleBgrLinePair",Xn,3),nt("UpsampleRgbaLinePair",as,4),nt("UpsampleBgraLinePair",$a,4),nt("UpsampleArgbLinePair",Ha,4),nt("UpsampleRgba4444LinePair",Ms,2),nt("UpsampleRgb565LinePair",Si,2);var ql=k.UpsampleRgbLinePair,Hh=k.UpsampleBgrLinePair,Tc=k.UpsampleRgbaLinePair,_d=k.UpsampleBgraLinePair,el=k.UpsampleArgbLinePair,Ja=k.UpsampleRgba4444LinePair,tl=k.UpsampleRgb565LinePair,ia=16,Cc=1<<ia-1,Vl=-227,nl=482,Nd=6,rl=0,Ii=a(256),Ad=a(256),Rm=a(256),b0=a(256),w0=a(nl-Vl),_0=a(nl-Vl);vo("YuvToRgbRow",Ai,3),vo("YuvToBgrRow",Xn,3),vo("YuvToRgbaRow",as,4),vo("YuvToBgraRow",$a,4),vo("YuvToArgbRow",Ha,4),vo("YuvToRgba4444Row",Ms,2),vo("YuvToRgb565Row",Si,2);var qr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ic=[0,2,8],Mu=[8,7,6,4,4,2,2,2,1,1,1,1],Ou=1;this.WebPDecodeRGBA=function(g,w,j,P,H){var W=$i,Y=new He,Z=new St;Y.ba=Z,Z.S=W,Z.width=[Z.width],Z.height=[Z.height];var ne=Z.width,le=Z.height,xe=new _t;if(xe==null||g==null)var Ie=2;else e(xe!=null),Ie=_a(g,w,j,xe.width,xe.height,xe.Pd,xe.Qd,xe.format,null);if(Ie!=0?ne=0:(ne!=null&&(ne[0]=xe.width[0]),le!=null&&(le[0]=xe.height[0]),ne=1),ne){Z.width=Z.width[0],Z.height=Z.height[0],P!=null&&(P[0]=Z.width),H!=null&&(H[0]=Z.height);e:{if(P=new di,(H=new Xe).data=g,H.w=w,H.ha=j,H.kd=1,w=[0],e(H!=null),((g=_a(H.data,H.w,H.ha,null,null,null,w,null,H))==0||g==7)&&w[0]&&(g=4),(w=g)==0){if(e(Y!=null),P.data=H.data,P.w=H.w+H.offset,P.ha=H.ha-H.offset,P.put=Tt,P.ac=ei,P.bc=pa,P.ma=Y,H.xa){if((g=Fa())==null){Y=1;break e}if((function(ae,_e){var Te=[0],Ve=[0],Ce=[0];t:for(;;){if(ae==null)return 0;if(_e==null)return ae.a=2,0;if(ae.l=_e,ae.a=0,Se(ae.m,_e.data,_e.w,_e.ha),!Ji(ae.m,Te,Ve,Ce)){ae.a=3;break t}if(ae.xb=zh,_e.width=Te[0],_e.height=Ve[0],!Rs(Te[0],Ve[0],1,ae,null))break t;return 1}return e(ae.a!=0),0})(g,P)){if(P=(w=Na(P.width,P.height,Y.Oa,Y.ba))==0){t:{P=g;n:for(;;){if(P==null){P=0;break t}if(e(P.s.yc!=null),e(P.s.Ya!=null),e(0<P.s.Wb),e((j=P.l)!=null),e((H=j.ma)!=null),P.xb!=0){if(P.ca=H.ba,P.tb=H.tb,e(P.ca!=null),!yo(H.Oa,j,Js)){P.a=2;break n}if(!qi(P,j.width)||j.da)break n;if((j.da||qt(P.ca.S))&&De(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&De()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!te(P.s.vb,P.s.Wa.Xa)){P.a=1;break n}P.xb=0}if(!Fi(P,P.V,P.Ba,P.c,P.i,j.o,ui))break n;H.Dc=P.Ma,P=1;break t}e(P.a!=0),P=0}P=!P}P&&(w=g.a)}else w=g.a}else{if((g=new Er)==null){Y=1;break e}if(g.Fa=H.na,g.P=H.P,g.qc=H.Sa,xs(g,P)){if((w=Na(P.width,P.height,Y.Oa,Y.ba))==0){if(g.Aa=0,j=Y.Oa,e((H=g)!=null),j!=null){if(0<(ne=0>(ne=j.Md)?0:100<ne?255:255*ne/100)){for(le=xe=0;4>le;++le)12>(Ie=H.pb[le]).lc&&(Ie.ia=ne*Mu[0>Ie.lc?0:Ie.lc]>>3),xe|=Ie.ia;xe&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=j.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}(function(ae,_e){if(ae==null)return 0;if(_e==null)return mn(ae,2,"NULL VP8Io parameter in VP8Decode().");if(!ae.cb&&!xs(ae,_e))return 0;if(e(ae.cb),_e.ac==null||_e.ac(_e)){_e.ob&&(ae.L=0);var Te=Ic[ae.L];if(ae.L==2?(ae.yb=0,ae.zb=0):(ae.yb=_e.v-Te>>4,ae.zb=_e.j-Te>>4,0>ae.yb&&(ae.yb=0),0>ae.zb&&(ae.zb=0)),ae.Va=_e.o+15+Te>>4,ae.Hb=_e.va+15+Te>>4,ae.Hb>ae.za&&(ae.Hb=ae.za),ae.Va>ae.Ub&&(ae.Va=ae.Ub),0<ae.L){var Ve=ae.ed;for(Te=0;4>Te;++Te){var Ce;if(ae.Qa.Cb){var qe=ae.Qa.Lb[Te];ae.Qa.Fb||(qe+=Ve.Tb)}else qe=Ve.Tb;for(Ce=0;1>=Ce;++Ce){var Ge=ae.gd[Te][Ce],tt=qe;if(Ve.Pc&&(tt+=Ve.vd[0],Ce&&(tt+=Ve.od[0])),0<(tt=0>tt?0:63<tt?63:tt)){var Qe=tt;0<Ve.wb&&(Qe=4<Ve.wb?Qe>>2:Qe>>1)>9-Ve.wb&&(Qe=9-Ve.wb),1>Qe&&(Qe=1),Ge.dd=Qe,Ge.tc=2*tt+Qe,Ge.ld=40<=tt?2:15<=tt?1:0}else Ge.tc=0;Ge.La=Ce}}}Te=0}else mn(ae,6,"Frame setup failed"),Te=ae.a;if(Te=Te==0){if(Te){ae.$c=0,0<ae.Aa||(ae.Ic=Ou);t:{Te=ae.Ic,Ve=4*(Qe=ae.za);var vt=32*Qe,ut=Qe+1,Qt=0<ae.L?Qe*(0<ae.Aa?2:1):0,mt=(ae.Aa==2?2:1)*Qe;if((Ge=Ve+832+(Ce=3*(16*Te+Ic[ae.L])/2*vt)+(qe=ae.Fa!=null&&0<ae.Fa.length?ae.Kc.c*ae.Kc.i:0))!=Ge)Te=0;else{if(Ge>ae.Vb){if(ae.Vb=0,ae.Ec=a(Ge),ae.Fc=0,ae.Ec==null){Te=mn(ae,1,"no memory during frame initialization.");break t}ae.Vb=Ge}Ge=ae.Ec,tt=ae.Fc,ae.Ac=Ge,ae.Bc=tt,tt+=Ve,ae.Gd=c(vt,Ho),ae.Hd=0,ae.rb=c(ut+1,ys),ae.sb=1,ae.wa=Qt?c(Qt,Vi):null,ae.Y=0,ae.D.Nb=0,ae.D.wa=ae.wa,ae.D.Y=ae.Y,0<ae.Aa&&(ae.D.Y+=Qe),e(!0),ae.oc=Ge,ae.pc=tt,tt+=832,ae.ya=c(mt,uo),ae.aa=0,ae.D.ya=ae.ya,ae.D.aa=ae.aa,ae.Aa==2&&(ae.D.aa+=Qe),ae.R=16*Qe,ae.B=8*Qe,Qe=(vt=Ic[ae.L])*ae.R,vt=vt/2*ae.B,ae.sa=Ge,ae.ta=tt+Qe,ae.qa=ae.sa,ae.ra=ae.ta+16*Te*ae.R+vt,ae.Ha=ae.qa,ae.Ia=ae.ra+8*Te*ae.B+vt,ae.$c=0,tt+=Ce,ae.mb=qe?Ge:null,ae.nb=qe?tt:null,e(tt+qe<=ae.Fc+ae.Vb),qa(ae),i(ae.Ac,ae.Bc,0,Ve),Te=1}}if(Te){if(_e.ka=0,_e.y=ae.sa,_e.O=ae.ta,_e.f=ae.qa,_e.N=ae.ra,_e.ea=ae.Ha,_e.Vd=ae.Ia,_e.fa=ae.R,_e.Rc=ae.B,_e.F=null,_e.J=0,!pd){for(Te=-255;255>=Te;++Te)Ol[255+Te]=0>Te?-Te:Te;for(Te=-1020;1020>=Te;++Te)md[1020+Te]=-128>Te?-128:127<Te?127:Te;for(Te=-112;112>=Te;++Te)Iu[112+Te]=-16>Te?-16:15<Te?15:Te;for(Te=-255;510>=Te;++Te)Ru[255+Te]=0>Te?0:255<Te?255:Te;pd=1}Fs=ti,No=Tl,Qs=Ni,Dn=Cl,En=ya,zi=xc,lr=kl,Fr=Ds,Xa=B,Aa=oe,Dl=Ko,Tu=A,qh=ve,Em=Ae,jm=Ys,Tm=bs,Vh=go,Uh=Yo,Tr[0]=Ba,Tr[1]=Il,Tr[2]=fo,Tr[3]=Wo,Tr[4]=ni,Tr[5]=mo,Tr[6]=$r,Tr[7]=Vn,Tr[8]=po,Tr[9]=ns,ls[0]=ks,ls[1]=$o,ls[2]=Go,ls[3]=xa,ls[4]=ba,ls[5]=Bi,ls[6]=Ua,Sa[0]=wa,Sa[1]=Rl,Sa[2]=Ps,Sa[3]=Ll,Sa[4]=Mr,Sa[5]=is,Sa[6]=$s,Te=1}else Te=0}Te&&(Te=(function(gn,gr){for(gn.M=0;gn.M<gn.Va;++gn.M){var sn,dt=gn.Jc[gn.M&gn.Xb],rt=gn.m,wr=gn;for(sn=0;sn<wr.za;++sn){var zt=rt,ln=wr,$n=ln.Ac,ri=ln.Bc+4*sn,Ri=ln.zc,cr=ln.ya[ln.aa+sn];if(ln.Qa.Bb?cr.$b=Ue(zt,ln.Pa.jb[0])?2+Ue(zt,ln.Pa.jb[2]):Ue(zt,ln.Pa.jb[1]):cr.$b=0,ln.kc&&(cr.Ad=Ue(zt,ln.Bd)),cr.Za=!Ue(zt,145)+0,cr.Za){var Gr=cr.Ob,Gi=0;for(ln=0;4>ln;++ln){var Wr,fn=Ri[0+ln];for(Wr=0;4>Wr;++Wr){fn=Ti[$n[ri+Wr]][fn];for(var Cn=wd[Ue(zt,fn[0])];0<Cn;)Cn=wd[2*Cn+Ue(zt,fn[Cn])];fn=-Cn,$n[ri+Wr]=fn}r(Gr,Gi,$n,ri,4),Gi+=4,Ri[0+ln]=fn}}else fn=Ue(zt,156)?Ue(zt,128)?1:3:Ue(zt,163)?2:0,cr.Ob[0]=fn,i($n,ri,fn,4),i(Ri,0,fn,4);cr.Dd=Ue(zt,142)?Ue(zt,114)?Ue(zt,183)?1:3:2:0}if(wr.m.Ka)return mn(gn,7,"Premature end-of-partition0 encountered.");for(;gn.ja<gn.za;++gn.ja){if(wr=dt,zt=(rt=gn).rb[rt.sb-1],$n=rt.rb[rt.sb+rt.ja],sn=rt.ya[rt.aa+rt.ja],ri=rt.kc?sn.Ad:0)zt.la=$n.la=0,sn.Za||(zt.Na=$n.Na=0),sn.Hc=0,sn.Gc=0,sn.ia=0;else{var _r,Mn;if(zt=$n,$n=wr,ri=rt.Pa.Xc,Ri=rt.ya[rt.aa+rt.ja],cr=rt.pb[Ri.$b],ln=Ri.ad,Gr=0,Gi=rt.rb[rt.sb-1],fn=Wr=0,i(ln,Gr,0,384),Ri.Za)var ii=0,Nr=ri[3];else{Cn=a(16);var In=zt.Na+Gi.Na;if(In=Vs($n,ri[1],In,cr.Eb,0,Cn,0),zt.Na=Gi.Na=(0<In)+0,1<In)Fs(Cn,0,ln,Gr);else{var Vr=Cn[0]+3>>3;for(Cn=0;256>Cn;Cn+=16)ln[Gr+Cn]=Vr}ii=1,Nr=ri[0]}var Gn=15&zt.la,Yr=15&Gi.la;for(Cn=0;4>Cn;++Cn){var Kr=1&Yr;for(Vr=Mn=0;4>Vr;++Vr)Gn=Gn>>1|(Kr=(In=Vs($n,Nr,In=Kr+(1&Gn),cr.Sc,ii,ln,Gr))>ii)<<7,Mn=Mn<<2|(3<In?3:1<In?2:ln[Gr+0]!=0),Gr+=16;Gn>>=4,Yr=Yr>>1|Kr<<7,Wr=(Wr<<8|Mn)>>>0}for(Nr=Gn,ii=Yr>>4,_r=0;4>_r;_r+=2){for(Mn=0,Gn=zt.la>>4+_r,Yr=Gi.la>>4+_r,Cn=0;2>Cn;++Cn){for(Kr=1&Yr,Vr=0;2>Vr;++Vr)In=Kr+(1&Gn),Gn=Gn>>1|(Kr=0<(In=Vs($n,ri[2],In,cr.Qc,0,ln,Gr)))<<3,Mn=Mn<<2|(3<In?3:1<In?2:ln[Gr+0]!=0),Gr+=16;Gn>>=2,Yr=Yr>>1|Kr<<5}fn|=Mn<<4*_r,Nr|=Gn<<4<<_r,ii|=(240&Yr)<<_r}zt.la=Nr,Gi.la=ii,Ri.Hc=Wr,Ri.Gc=fn,Ri.ia=43690&fn?0:cr.ia,ri=!(Wr|fn)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[sn.$b][sn.Za],rt.wa[rt.Y+rt.ja].La|=!ri),wr.Ka)return mn(gn,7,"Premature end-of-file encountered.")}if(qa(gn),rt=gr,wr=1,sn=(dt=gn).D,zt=0<dt.L&&dt.M>=dt.zb&&dt.M<=dt.Va,dt.Aa==0)t:{if(sn.M=dt.M,sn.uc=zt,Os(dt,sn),wr=1,sn=(Mn=dt.D).Nb,zt=(fn=Ic[dt.L])*dt.R,$n=fn/2*dt.B,Cn=16*sn*dt.R,Vr=8*sn*dt.B,ri=dt.sa,Ri=dt.ta-zt+Cn,cr=dt.qa,ln=dt.ra-$n+Vr,Gr=dt.Ha,Gi=dt.Ia-$n+Vr,Yr=(Gn=Mn.M)==0,Wr=Gn>=dt.Va-1,dt.Aa==2&&Os(dt,Mn),Mn.uc)for(Kr=(In=dt).D.M,e(In.D.uc),Mn=In.yb;Mn<In.Hb;++Mn){ii=Mn,Nr=Kr;var Jn=(jn=(Qr=In).D).Nb;_r=Qr.R;var jn=jn.wa[jn.Y+ii],Wi=Qr.sa,Cr=Qr.ta+16*Jn*_r+16*ii,kt=jn.dd,Ot=jn.tc;if(Ot!=0)if(e(3<=Ot),Qr.L==1)0<ii&&Tm(Wi,Cr,_r,Ot+4),jn.La&&Uh(Wi,Cr,_r,Ot),0<Nr&&jm(Wi,Cr,_r,Ot+4),jn.La&&Vh(Wi,Cr,_r,Ot);else{var Rn=Qr.B,_s=Qr.qa,sa=Qr.ra+8*Jn*Rn+8*ii,cs=Qr.Ha,Qr=Qr.Ia+8*Jn*Rn+8*ii;Jn=jn.ld,0<ii&&(Fr(Wi,Cr,_r,Ot+4,kt,Jn),Aa(_s,sa,cs,Qr,Rn,Ot+4,kt,Jn)),jn.La&&(Tu(Wi,Cr,_r,Ot,kt,Jn),Em(_s,sa,cs,Qr,Rn,Ot,kt,Jn)),0<Nr&&(lr(Wi,Cr,_r,Ot+4,kt,Jn),Xa(_s,sa,cs,Qr,Rn,Ot+4,kt,Jn)),jn.La&&(Dl(Wi,Cr,_r,Ot,kt,Jn),qh(_s,sa,cs,Qr,Rn,Ot,kt,Jn))}}if(dt.ia&&alert("todo:DitherRow"),rt.put!=null){if(Mn=16*Gn,Gn=16*(Gn+1),Yr?(rt.y=dt.sa,rt.O=dt.ta+Cn,rt.f=dt.qa,rt.N=dt.ra+Vr,rt.ea=dt.Ha,rt.W=dt.Ia+Vr):(Mn-=fn,rt.y=ri,rt.O=Ri,rt.f=cr,rt.N=ln,rt.ea=Gr,rt.W=Gi),Wr||(Gn-=fn),Gn>rt.o&&(Gn=rt.o),rt.F=null,rt.J=null,dt.Fa!=null&&0<dt.Fa.length&&Mn<Gn&&(rt.J=v(dt,rt,Mn,Gn-Mn),rt.F=dt.mb,rt.F==null&&rt.F.length==0)){wr=mn(dt,3,"Could not decode alpha data.");break t}Mn<rt.j&&(fn=rt.j-Mn,Mn=rt.j,e(!(1&fn)),rt.O+=dt.R*fn,rt.N+=dt.B*(fn>>1),rt.W+=dt.B*(fn>>1),rt.F!=null&&(rt.J+=rt.width*fn)),Mn<Gn&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=Mn-rt.j,rt.U=rt.va-rt.v,rt.T=Gn-Mn,wr=rt.put(rt))}sn+1!=dt.Ic||Wr||(r(dt.sa,dt.ta-zt,ri,Ri+16*dt.R,zt),r(dt.qa,dt.ra-$n,cr,ln+8*dt.B,$n),r(dt.Ha,dt.Ia-$n,Gr,Gi+8*dt.B,$n))}if(!wr)return mn(gn,6,"Output aborted.")}return 1})(ae,_e)),_e.bc!=null&&_e.bc(_e),Te&=1}return Te?(ae.cb=0,Te):0})(g,P)||(w=g.a)}}else w=g.a}w==0&&Y.Oa!=null&&Y.Oa.fd&&(w=ju(Y.ba))}Y=w}W=Y!=0?null:11>W?Z.f.RGBA.eb:Z.f.kb.y}else W=null;return W};var Sd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(k,G){for(var S="",L=0;L<4;L++)S+=String.fromCharCode(k[G++]);return S}function p(k,G){return k[G+0]|k[G+1]<<8}function x(k,G){return(k[G+0]|k[G+1]<<8|k[G+2]<<16)>>>0}function N(k,G){return(k[G+0]|k[G+1]<<8|k[G+2]<<16|k[G+3]<<24)>>>0}new h;var b=[0],E=[0],C=[],I=new h,R=n,U=(function(k,G){var S={},L=0,F=!1,se=0,ye=0;if(S.frames=[],!(function(q,J){for(var re=0;re<4;re++)if(q[J+re]!="RIFF".charCodeAt(re))return!0;return!1})(k,G)){for(N(k,G+=4),G+=8;G<k.length;){var Q=f(k,G),ce=N(k,G+=4);G+=4;var me=ce+(1&ce);switch(Q){case"VP8 ":case"VP8L":S.frames[L]===void 0&&(S.frames[L]={}),(X=S.frames[L]).src_off=F?ye:G-8,X.src_size=se+ce+8,L++,F&&(F=!1,se=0,ye=0);break;case"VP8X":(X=S.header={}).feature_flags=k[G];var Se=G+4;X.canvas_width=1+x(k,Se),Se+=3,X.canvas_height=1+x(k,Se),Se+=3;break;case"ALPH":F=!0,se=me+8,ye=G-8;break;case"ANIM":(X=S.header).bgcolor=N(k,G),Se=G+4,X.loop_count=p(k,Se),Se+=2;break;case"ANMF":var Fe,X;(X=S.frames[L]={}).offset_x=2*x(k,G),G+=3,X.offset_y=2*x(k,G),G+=3,X.width=1+x(k,G),G+=3,X.height=1+x(k,G),G+=3,X.duration=x(k,G),G+=3,Fe=k[G++],X.dispose=1&Fe,X.blend=Fe>>1&1}Q!="ANMF"&&(G+=me)}return S}})(R,0);U.response=R,U.rgbaoutput=!0,U.dataurl=!1;var $=U.header?U.header:null,z=U.frames?U.frames:null;if($){$.loop_counter=$.loop_count,b=[$.canvas_height],E=[$.canvas_width];for(var ue=0;ue<z.length&&z[ue].blend!=0;ue++);}var ie=z[0],V=I.WebPDecodeRGBA(R,ie.src_off,ie.src_size,E,b);ie.rgba=V,ie.imgwidth=E[0],ie.imgheight=b[0];for(var D=0;D<E[0]*b[0]*4;D++)C[D]=V[D];return this.width=E,this.height=b,this.data=C,this}(function(n){var e,t,r,i,a,c,d,h,f,p=function(q){return q=q||{},this.isStrokeTransparent=q.isStrokeTransparent||!1,this.strokeOpacity=q.strokeOpacity||1,this.strokeStyle=q.strokeStyle||"#000000",this.fillStyle=q.fillStyle||"#000000",this.isFillTransparent=q.isFillTransparent||!1,this.fillOpacity=q.fillOpacity||1,this.font=q.font||"10px sans-serif",this.textBaseline=q.textBaseline||"alphabetic",this.textAlign=q.textAlign||"left",this.lineWidth=q.lineWidth||1,this.lineJoin=q.lineJoin||"miter",this.lineCap=q.lineCap||"butt",this.path=q.path||[],this.transform=q.transform!==void 0?q.transform.clone():new h,this.globalCompositeOperation=q.globalCompositeOperation||"normal",this.globalAlpha=q.globalAlpha||1,this.clip_path=q.clip_path||[],this.currentPoint=q.currentPoint||new c,this.miterLimit=q.miterLimit||10,this.lastPoint=q.lastPoint||new c,this.lineDashOffset=q.lineDashOffset||0,this.lineDash=q.lineDash||[],this.margin=q.margin||[0,0,0,0],this.prevPageLastElemOffset=q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof q.ignoreClearRect!="boolean"||q.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new x(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,c=this.internal.Point,d=this.internal.Rectangle,h=this.internal.Matrix,f=new p}]);var x=function(q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=q;Object.defineProperty(this,"pdf",{get:function(){return J}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(te){re=!!te}});var fe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return fe},set:function(te){fe=!!te}});var pe=0;Object.defineProperty(this,"posX",{get:function(){return pe},set:function(te){isNaN(te)||(pe=te)}});var we=0;Object.defineProperty(this,"posY",{get:function(){return we},set:function(te){isNaN(te)||(we=te)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(te){var Ze;typeof te=="number"?Ze=[te,te,te,te]:((Ze=new Array(4))[0]=te[0],Ze[1]=te.length>=2?te[1]:Ze[0],Ze[2]=te.length>=3?te[2]:Ze[0],Ze[3]=te.length>=4?te[3]:Ze[1]),f.margin=Ze}});var Pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Pe},set:function(te){Pe=te}});var Re=0;Object.defineProperty(this,"lastBreak",{get:function(){return Re},set:function(te){Re=te}});var Ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ue},set:function(te){Ue=te}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(te){te instanceof p&&(f=te)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(te){f.path=te}});var et=[];Object.defineProperty(this,"ctxStack",{get:function(){return et},set:function(te){et=te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(te){var Ze;Ze=N(te),this.ctx.fillStyle=Ze.style,this.ctx.isFillTransparent=Ze.a===0,this.ctx.fillOpacity=Ze.a,this.pdf.setFillColor(Ze.r,Ze.g,Ze.b,{a:Ze.a}),this.pdf.setTextColor(Ze.r,Ze.g,Ze.b,{a:Ze.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(te){var Ze=N(te);this.ctx.strokeStyle=Ze.style,this.ctx.isStrokeTransparent=Ze.a===0,this.ctx.strokeOpacity=Ze.a,Ze.a===0?this.pdf.setDrawColor(255,255,255):(Ze.a,this.pdf.setDrawColor(Ze.r,Ze.g,Ze.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(te){["butt","round","square"].indexOf(te)!==-1&&(this.ctx.lineCap=te,this.pdf.setLineCap(te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(te){isNaN(te)||(this.ctx.lineWidth=te,this.pdf.setLineWidth(te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(te){["bevel","round","miter"].indexOf(te)!==-1&&(this.ctx.lineJoin=te,this.pdf.setLineJoin(te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(te){isNaN(te)||(this.ctx.miterLimit=te,this.pdf.setMiterLimit(te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(te){this.ctx.textBaseline=te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(te){["right","end","center","left","start"].indexOf(te)!==-1&&(this.ctx.textAlign=te)}});var it=null,Ne=null,Be=null;Object.defineProperty(this,"fontFaces",{get:function(){return Be},set:function(te){it=null,Ne=null,Be=te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(te){var Ze;if(this.ctx.font=te,(Ze=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(te))!==null){var ct=Ze[1];Ze[2];var ot=Ze[3],ze=Ze[4];Ze[5];var at=Ze[6],lt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ze)[2];ze=Math.floor(lt==="px"?parseFloat(ze)*this.pdf.internal.scaleFactor:lt==="em"?parseFloat(ze)*this.pdf.getFontSize():parseFloat(ze)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ze);var Rt=(function(wt){var xr,nn,It=[],Bt=wt.trim();if(Bt==="")return bv;if(Bt in yN)return[yN[Bt]];for(;Bt!=="";){switch(nn=null,xr=(Bt=bN(Bt)).charAt(0)){case'"':case"'":nn=ZF(Bt.substring(1),xr);break;default:nn=eq(Bt)}if(nn===null||(It.push(nn[0]),(Bt=bN(nn[1]))!==""&&Bt.charAt(0)!==","))return bv;Bt=Bt.replace(/^,/,"")}return It})(at);if(this.fontFaces){var At=(function(wt,xr){var nn=wt.getFontList(),It=JSON.stringify(nn);if(it===null||Ne!==It){var Bt=(function(Zt){var jt=[];return Object.keys(Zt).forEach(function(Pn){Zt[Pn].forEach(function(qt){var Vt=null;switch(qt){case"bold":Vt={family:Pn,weight:"bold"};break;case"italic":Vt={family:Pn,style:"italic"};break;case"bolditalic":Vt={family:Pn,weight:"bold",style:"italic"};break;case"":case"normal":Vt={family:Pn}}Vt!==null&&(Vt.ref={name:Pn,style:qt},jt.push(Vt))})}),jt})(nn);it=(function(Zt){for(var jt={},Pn=0;Pn<Zt.length;++Pn){var qt=xv(Zt[Pn]),Vt=qt.family,Fn=qt.stretch,St=qt.style,_t=qt.weight;jt[Vt]=jt[Vt]||{},jt[Vt][Fn]=jt[Vt][Fn]||{},jt[Vt][Fn][St]=jt[Vt][Fn][St]||{},jt[Vt][Fn][St][_t]=qt}return jt})(Bt.concat(xr)),Ne=It}return it})(this.pdf,this.fontFaces),Jt=Rt.map(function(wt){return{family:wt,stretch:"normal",weight:ot,style:ct}}),rn=(function(wt,xr,nn){for(var It=(nn=nn||{}).defaultFontFamily||"times",Bt=Object.assign({},JF,nn.genericFontFamilies||{}),Zt=null,jt=null,Pn=0;Pn<xr.length;++Pn)if(Bt[(Zt=xv(xr[Pn])).family]&&(Zt.family=Bt[Zt.family]),wt.hasOwnProperty(Zt.family)){jt=wt[Zt.family];break}if(!(jt=jt||wt[It]))throw new Error("Could not find a font-family for the rule '"+xN(Zt)+"' and default family '"+It+"'.");if(jt=(function(qt,Vt){if(Vt[qt])return Vt[qt];var Fn=xy[qt],St=Fn<=xy.normal?-1:1,_t=vN(Vt,fE,Fn,St);if(!_t)throw new Error("Could not find a matching font-stretch value for "+qt);return _t})(Zt.stretch,jt),jt=(function(qt,Vt){if(Vt[qt])return Vt[qt];for(var Fn=hE[qt],St=0;St<Fn.length;++St)if(Vt[Fn[St]])return Vt[Fn[St]];throw new Error("Could not find a matching font-style for "+qt)})(Zt.style,jt),!(jt=(function(qt,Vt){if(Vt[qt])return Vt[qt];if(qt===400&&Vt[500])return Vt[500];if(qt===500&&Vt[400])return Vt[400];var Fn=XF[qt],St=vN(Vt,mE,Fn,qt<400?-1:1);if(!St)throw new Error("Could not find a matching font-weight for value "+qt);return St})(Zt.weight,jt)))throw new Error("Failed to resolve a font for the rule '"+xN(Zt)+"'.");return jt})(At,Jt);this.pdf.setFont(rn.ref.name,rn.ref.style)}else{var $t="";(ot==="bold"||parseInt(ot,10)>=700||ct==="bold")&&($t="bold"),ct==="italic"&&($t+="italic"),$t.length===0&&($t="normal");for(var cn="",tn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},xt=0;xt<Rt.length;xt++){if(this.pdf.internal.getFont(Rt[xt],$t,{noFallback:!0,disableWarning:!0})!==void 0){cn=Rt[xt];break}if($t==="bolditalic"&&this.pdf.internal.getFont(Rt[xt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)cn=Rt[xt],$t="bold";else if(this.pdf.internal.getFont(Rt[xt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){cn=Rt[xt],$t="normal";break}}if(cn===""){for(var Kt=0;Kt<Rt.length;Kt++)if(tn[Rt[Kt]]){cn=tn[Rt[Kt]];break}}cn=cn===""?"Times":cn,this.pdf.setFont(cn,$t)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(te){this.ctx.globalCompositeOperation=te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(te){this.ctx.globalAlpha=te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(te){this.ctx.lineDashOffset=te,X.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(te){this.ctx.lineDash=te,X.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(te){this.ctx.ignoreClearRect=!!te}})};x.prototype.setLineDash=function(q){this.lineDash=q},x.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},x.prototype.fill=function(){z.call(this,"fill",!1)},x.prototype.stroke=function(){z.call(this,"stroke",!1)},x.prototype.beginPath=function(){this.path=[{type:"begin"}]},x.prototype.moveTo=function(q,J){if(isNaN(q)||isNaN(J))throw yr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new c(q,J));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new c(q,J)},x.prototype.closePath=function(){var q=new c(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&nr(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){q=new c(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(q.x,q.y)},x.prototype.lineTo=function(q,J){if(isNaN(q)||isNaN(J))throw yr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new c(q,J));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new c(re.x,re.y)},x.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),z.call(this,null,!0)},x.prototype.quadraticCurveTo=function(q,J,re,fe){if(isNaN(re)||isNaN(fe)||isNaN(q)||isNaN(J))throw yr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pe=this.ctx.transform.applyToPoint(new c(re,fe)),we=this.ctx.transform.applyToPoint(new c(q,J));this.path.push({type:"qct",x1:we.x,y1:we.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new c(pe.x,pe.y)},x.prototype.bezierCurveTo=function(q,J,re,fe,pe,we){if(isNaN(pe)||isNaN(we)||isNaN(q)||isNaN(J)||isNaN(re)||isNaN(fe))throw yr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Pe=this.ctx.transform.applyToPoint(new c(pe,we)),Re=this.ctx.transform.applyToPoint(new c(q,J)),Ue=this.ctx.transform.applyToPoint(new c(re,fe));this.path.push({type:"bct",x1:Re.x,y1:Re.y,x2:Ue.x,y2:Ue.y,x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new c(Pe.x,Pe.y)},x.prototype.arc=function(q,J,re,fe,pe,we){if(isNaN(q)||isNaN(J)||isNaN(re)||isNaN(fe)||isNaN(pe))throw yr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(we=!!we,!this.ctx.transform.isIdentity){var Pe=this.ctx.transform.applyToPoint(new c(q,J));q=Pe.x,J=Pe.y;var Re=this.ctx.transform.applyToPoint(new c(0,re)),Ue=this.ctx.transform.applyToPoint(new c(0,0));re=Math.sqrt(Math.pow(Re.x-Ue.x,2)+Math.pow(Re.y-Ue.y,2))}Math.abs(pe-fe)>=2*Math.PI&&(fe=0,pe=2*Math.PI),this.path.push({type:"arc",x:q,y:J,radius:re,startAngle:fe,endAngle:pe,counterclockwise:we})},x.prototype.arcTo=function(q,J,re,fe,pe){throw new Error("arcTo not implemented.")},x.prototype.rect=function(q,J,re,fe){if(isNaN(q)||isNaN(J)||isNaN(re)||isNaN(fe))throw yr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(q,J),this.lineTo(q+re,J),this.lineTo(q+re,J+fe),this.lineTo(q,J+fe),this.lineTo(q,J),this.lineTo(q+re,J),this.lineTo(q,J)},x.prototype.fillRect=function(q,J,re,fe){if(isNaN(q)||isNaN(J)||isNaN(re)||isNaN(fe))throw yr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var pe={};this.lineCap!=="butt"&&(pe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(pe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(q,J,re,fe),this.fill(),pe.hasOwnProperty("lineCap")&&(this.lineCap=pe.lineCap),pe.hasOwnProperty("lineJoin")&&(this.lineJoin=pe.lineJoin)}},x.prototype.strokeRect=function(q,J,re,fe){if(isNaN(q)||isNaN(J)||isNaN(re)||isNaN(fe))throw yr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");E.call(this)||(this.beginPath(),this.rect(q,J,re,fe),this.stroke())},x.prototype.clearRect=function(q,J,re,fe){if(isNaN(q)||isNaN(J)||isNaN(re)||isNaN(fe))throw yr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(q,J,re,fe))},x.prototype.save=function(q){q=typeof q!="boolean"||q;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),q){this.ctx.fontSize=this.pdf.internal.getFontSize();var fe=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=fe}},x.prototype.restore=function(q){q=typeof q!="boolean"||q;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(J),q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},x.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var N=function(q){var J,re,fe,pe;if(q.isCanvasGradient===!0&&(q=q.getColor()),!q)return{r:0,g:0,b:0,a:0,style:q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(q))J=0,re=0,fe=0,pe=0;else{var we=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(q);if(we!==null)J=parseInt(we[1]),re=parseInt(we[2]),fe=parseInt(we[3]),pe=1;else if((we=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(q))!==null)J=parseInt(we[1]),re=parseInt(we[2]),fe=parseInt(we[3]),pe=parseFloat(we[4]);else{if(pe=1,typeof q=="string"&&q.charAt(0)!=="#"){var Pe=new sE(q);q=Pe.ok?Pe.toHex():"#000000"}q.length===4?(J=q.substring(1,2),J+=J,re=q.substring(2,3),re+=re,fe=q.substring(3,4),fe+=fe):(J=q.substring(1,3),re=q.substring(3,5),fe=q.substring(5,7)),J=parseInt(J,16),re=parseInt(re,16),fe=parseInt(fe,16)}}return{r:J,g:re,b:fe,a:pe,style:q}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},E=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};x.prototype.fillText=function(q,J,re,fe){if(isNaN(J)||isNaN(re)||typeof q!="string")throw yr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(fe=isNaN(fe)?void 0:fe,!b.call(this)){var pe=me(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;L.call(this,{text:q,x:J,y:re,scale:we,angle:pe,align:this.textAlign,maxWidth:fe})}},x.prototype.strokeText=function(q,J,re,fe){if(isNaN(J)||isNaN(re)||typeof q!="string")throw yr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!E.call(this)){fe=isNaN(fe)?void 0:fe;var pe=me(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;L.call(this,{text:q,x:J,y:re,scale:we,renderingMode:"stroke",angle:pe,align:this.textAlign,maxWidth:fe})}},x.prototype.measureText=function(q){if(typeof q!="string")throw yr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,re=this.pdf.internal.scaleFactor,fe=J.internal.getFontSize(),pe=J.getStringUnitWidth(q)*fe/J.internal.scaleFactor;return new function(we){var Pe=(we=we||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Pe}}),this}({width:pe*=Math.round(96*re/72*1e4)/1e4})},x.prototype.scale=function(q,J){if(isNaN(q)||isNaN(J))throw yr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new h(q,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},x.prototype.rotate=function(q){if(isNaN(q))throw yr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new h(Math.cos(q),Math.sin(q),-Math.sin(q),Math.cos(q),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},x.prototype.translate=function(q,J){if(isNaN(q)||isNaN(J))throw yr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new h(1,0,0,1,q,J);this.ctx.transform=this.ctx.transform.multiply(re)},x.prototype.transform=function(q,J,re,fe,pe,we){if(isNaN(q)||isNaN(J)||isNaN(re)||isNaN(fe)||isNaN(pe)||isNaN(we))throw yr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Pe=new h(q,J,re,fe,pe,we);this.ctx.transform=this.ctx.transform.multiply(Pe)},x.prototype.setTransform=function(q,J,re,fe,pe,we){q=isNaN(q)?1:q,J=isNaN(J)?0:J,re=isNaN(re)?0:re,fe=isNaN(fe)?1:fe,pe=isNaN(pe)?0:pe,we=isNaN(we)?0:we,this.ctx.transform=new h(q,J,re,fe,pe,we)};var C=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};x.prototype.drawImage=function(q,J,re,fe,pe,we,Pe,Re,Ue){var et=this.pdf.getImageProperties(q),it=1,Ne=1,Be=1,te=1;fe!==void 0&&Re!==void 0&&(Be=Re/fe,te=Ue/pe,it=et.width/fe*Re/fe,Ne=et.height/pe*Ue/pe),we===void 0&&(we=J,Pe=re,J=0,re=0),fe!==void 0&&Re===void 0&&(Re=fe,Ue=pe),fe===void 0&&Re===void 0&&(Re=et.width,Ue=et.height);var Ze=this.ctx.transform.decompose(),ct=me(Ze.rotate.shx),ot=new h,ze=(ot=(ot=(ot=ot.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale)).applyToRectangle(new d(we-J*Be,Pe-re*te,fe*it,pe*Ne));if(this.autoPaging){for(var at,lt=I.call(this,ze),Rt=[],At=0;At<lt.length;At+=1)Rt.indexOf(lt[At])===-1&&Rt.push(lt[At]);$(Rt);for(var Jt=Rt[0],rn=Rt[Rt.length-1],$t=Jt;$t<rn+1;$t++){this.pdf.setPage($t);var cn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tn=$t===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wt=$t===1?0:xt+($t-2)*Kt;if(this.ctx.clip_path.length!==0){var xr=this.path;at=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(at,this.posX+this.margin[3],-wt+tn+this.ctx.prevPageLastElemOffset),ue.call(this,"fill",!0),this.path=xr}var nn=JSON.parse(JSON.stringify(ze));nn=U([nn],this.posX+this.margin[3],-wt+tn+this.ctx.prevPageLastElemOffset)[0];var It=($t>Jt||$t<rn)&&C.call(this);It&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],cn,Kt,null).clip().discardPath()),this.pdf.addImage(q,"JPEG",nn.x,nn.y,nn.w,nn.h,null,null,ct),It&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(q,"JPEG",ze.x,ze.y,ze.w,ze.h,null,null,ct)};var I=function(q,J,re){var fe=[];J=J||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var pe=this.posY+this.ctx.prevPageLastElemOffset;switch(q.type){default:case"mt":case"lt":fe.push(Math.floor((q.y+pe)/re)+1);break;case"arc":fe.push(Math.floor((q.y+pe-q.radius)/re)+1),fe.push(Math.floor((q.y+pe+q.radius)/re)+1);break;case"qct":var we=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x,q.y);fe.push(Math.floor((we.y+pe)/re)+1),fe.push(Math.floor((we.y+we.h+pe)/re)+1);break;case"bct":var Pe=Fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x2,q.y2,q.x,q.y);fe.push(Math.floor((Pe.y+pe)/re)+1),fe.push(Math.floor((Pe.y+Pe.h+pe)/re)+1);break;case"rect":fe.push(Math.floor((q.y+pe)/re)+1),fe.push(Math.floor((q.y+q.h+pe)/re)+1)}for(var Re=0;Re<fe.length;Re+=1)for(;this.pdf.internal.getNumberOfPages()<fe[Re];)R.call(this);return fe},R=function(){var q=this.fillStyle,J=this.strokeStyle,re=this.font,fe=this.lineCap,pe=this.lineWidth,we=this.lineJoin;this.pdf.addPage(),this.fillStyle=q,this.strokeStyle=J,this.font=re,this.lineCap=fe,this.lineWidth=pe,this.lineJoin=we},U=function(q,J,re){for(var fe=0;fe<q.length;fe++)switch(q[fe].type){case"bct":q[fe].x2+=J,q[fe].y2+=re;case"qct":q[fe].x1+=J,q[fe].y1+=re;default:q[fe].x+=J,q[fe].y+=re}return q},$=function(q){return q.sort(function(J,re){return J-re})},z=function(q,J){var re=this.fillStyle,fe=this.strokeStyle,pe=this.lineCap,we=this.lineWidth,Pe=Math.abs(we*this.ctx.transform.scaleX),Re=this.lineJoin;if(this.autoPaging){for(var Ue,et,it=JSON.parse(JSON.stringify(this.path)),Ne=JSON.parse(JSON.stringify(this.path)),Be=[],te=0;te<Ne.length;te++)if(Ne[te].x!==void 0)for(var Ze=I.call(this,Ne[te]),ct=0;ct<Ze.length;ct+=1)Be.indexOf(Ze[ct])===-1&&Be.push(Ze[ct]);for(var ot=0;ot<Be.length;ot++)for(;this.pdf.internal.getNumberOfPages()<Be[ot];)R.call(this);$(Be);for(var ze=Be[0],at=Be[Be.length-1],lt=ze;lt<at+1;lt++){this.pdf.setPage(lt),this.fillStyle=re,this.strokeStyle=fe,this.lineCap=pe,this.lineWidth=Pe,this.lineJoin=Re;var Rt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],At=lt===1?this.posY+this.margin[0]:this.margin[0],Jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$t=lt===1?0:Jt+(lt-2)*rn;if(this.ctx.clip_path.length!==0){var cn=this.path;Ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Ue,this.posX+this.margin[3],-$t+At+this.ctx.prevPageLastElemOffset),ue.call(this,q,!0),this.path=cn}if(et=JSON.parse(JSON.stringify(it)),this.path=U(et,this.posX+this.margin[3],-$t+At+this.ctx.prevPageLastElemOffset),J===!1||lt===0){var tn=(lt>ze||lt<at)&&C.call(this);tn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Rt,rn,null).clip().discardPath()),ue.call(this,q,J),tn&&this.pdf.restoreGraphicsState()}this.lineWidth=we}this.path=it}else this.lineWidth=Pe,ue.call(this,q,J),this.lineWidth=we},ue=function(q,J){if((q!=="stroke"||J||!E.call(this))&&(q==="stroke"||J||!b.call(this))){for(var re,fe,pe=[],we=this.path,Pe=0;Pe<we.length;Pe++){var Re=we[Pe];switch(Re.type){case"begin":pe.push({begin:!0});break;case"close":pe.push({close:!0});break;case"mt":pe.push({start:Re,deltas:[],abs:[]});break;case"lt":var Ue=pe.length;if(we[Pe-1]&&!isNaN(we[Pe-1].x)&&(re=[Re.x-we[Pe-1].x,Re.y-we[Pe-1].y],Ue>0)){for(;Ue>=0;Ue--)if(pe[Ue-1].close!==!0&&pe[Ue-1].begin!==!0){pe[Ue-1].deltas.push(re),pe[Ue-1].abs.push(Re);break}}break;case"bct":re=[Re.x1-we[Pe-1].x,Re.y1-we[Pe-1].y,Re.x2-we[Pe-1].x,Re.y2-we[Pe-1].y,Re.x-we[Pe-1].x,Re.y-we[Pe-1].y],pe[pe.length-1].deltas.push(re);break;case"qct":var et=we[Pe-1].x+2/3*(Re.x1-we[Pe-1].x),it=we[Pe-1].y+2/3*(Re.y1-we[Pe-1].y),Ne=Re.x+2/3*(Re.x1-Re.x),Be=Re.y+2/3*(Re.y1-Re.y),te=Re.x,Ze=Re.y;re=[et-we[Pe-1].x,it-we[Pe-1].y,Ne-we[Pe-1].x,Be-we[Pe-1].y,te-we[Pe-1].x,Ze-we[Pe-1].y],pe[pe.length-1].deltas.push(re);break;case"arc":pe.push({deltas:[],abs:[],arc:!0}),Array.isArray(pe[pe.length-1].abs)&&pe[pe.length-1].abs.push(Re)}}fe=J?null:q==="stroke"?"stroke":"fill";for(var ct=!1,ot=0;ot<pe.length;ot++)if(pe[ot].arc)for(var ze=pe[ot].abs,at=0;at<ze.length;at++){var lt=ze[at];lt.type==="arc"?D.call(this,lt.x,lt.y,lt.radius,lt.startAngle,lt.endAngle,lt.counterclockwise,void 0,J,!ct):F.call(this,lt.x,lt.y),ct=!0}else if(pe[ot].close===!0)this.pdf.internal.out("h"),ct=!1;else if(pe[ot].begin!==!0){var Rt=pe[ot].start.x,At=pe[ot].start.y;se.call(this,pe[ot].deltas,Rt,At),ct=!0}fe&&k.call(this,fe),J&&G.call(this)}},ie=function(q){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return q-re;case"top":return q+J-re;case"hanging":return q+J-2*re;case"middle":return q+J/2-re;default:return q}},V=function(q){return q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};x.prototype.createLinearGradient=function(){var q=function(){};return q.colorStops=[],q.addColorStop=function(J,re){this.colorStops.push([J,re])},q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},q.isCanvasGradient=!0,q},x.prototype.createPattern=function(){return this.createLinearGradient()},x.prototype.createRadialGradient=function(){return this.createLinearGradient()};var D=function(q,J,re,fe,pe,we,Pe,Re,Ue){for(var et=Q.call(this,re,fe,pe,we),it=0;it<et.length;it++){var Ne=et[it];it===0&&(Ue?S.call(this,Ne.x1+q,Ne.y1+J):F.call(this,Ne.x1+q,Ne.y1+J)),ye.call(this,q,J,Ne.x2,Ne.y2,Ne.x3,Ne.y3,Ne.x4,Ne.y4)}Re?G.call(this):k.call(this,Pe)},k=function(q){switch(q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},G=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(q,J){this.pdf.internal.out(t(q)+" "+r(J)+" m")},L=function(q){var J;switch(q.align){case"right":case"end":J="right";break;case"center":J="center";break;default:J="left"}var re,fe,pe,we=this.pdf.getTextDimensions(q.text),Pe=ie.call(this,q.y),Re=V.call(this,Pe)-we.h,Ue=this.ctx.transform.applyToPoint(new c(q.x,Pe));if(this.autoPaging){var et=this.ctx.transform.decompose(),it=new h;it=(it=(it=it.multiply(et.translate)).multiply(et.skew)).multiply(et.scale);for(var Ne=this.ctx.transform.applyToRectangle(new d(q.x,Pe,we.w,we.h)),Be=it.applyToRectangle(new d(q.x,Re,we.w,we.h)),te=I.call(this,Be),Ze=[],ct=0;ct<te.length;ct+=1)Ze.indexOf(te[ct])===-1&&Ze.push(te[ct]);$(Ze);for(var ot=Ze[0],ze=Ze[Ze.length-1],at=ot;at<ze+1;at++){this.pdf.setPage(at);var lt=at===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[2],Jt=At-this.margin[0],rn=this.pdf.internal.pageSize.width-this.margin[1],$t=rn-this.margin[3],cn=at===1?0:Rt+(at-2)*Jt;if(this.ctx.clip_path.length!==0){var tn=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(re,this.posX+this.margin[3],-1*cn+lt),ue.call(this,"fill",!0),this.path=tn}var xt=U([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-cn+lt+this.ctx.prevPageLastElemOffset)[0];q.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*q.scale),pe=this.lineWidth,this.lineWidth=pe*q.scale);var Kt=this.autoPaging!=="text";if(Kt||xt.y+xt.h<=At){if(Kt||xt.y>=lt&&xt.x<=rn){var wt=Kt?q.text:this.pdf.splitTextToSize(q.text,q.maxWidth||rn-xt.x)[0],xr=U([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-cn+lt+this.ctx.prevPageLastElemOffset)[0],nn=Kt&&(at>ot||at<ze)&&C.call(this);nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$t,Jt,null).clip().discardPath()),this.pdf.text(wt,xr.x,xr.y,{angle:q.angle,align:J,renderingMode:q.renderingMode}),nn&&this.pdf.restoreGraphicsState()}}else xt.y<At&&(this.ctx.prevPageLastElemOffset+=At-xt.y);q.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=pe)}}else q.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*q.scale),pe=this.lineWidth,this.lineWidth=pe*q.scale),this.pdf.text(q.text,Ue.x+this.posX,Ue.y+this.posY,{angle:q.angle,align:J,renderingMode:q.renderingMode,maxWidth:q.maxWidth}),q.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=pe)},F=function(q,J,re,fe){re=re||0,fe=fe||0,this.pdf.internal.out(t(q+re)+" "+r(J+fe)+" l")},se=function(q,J,re){return this.pdf.lines(q,J,re,null,null)},ye=function(q,J,re,fe,pe,we,Pe,Re){this.pdf.internal.out([e(i(re+q)),e(a(fe+J)),e(i(pe+q)),e(a(we+J)),e(i(Pe+q)),e(a(Re+J)),"c"].join(" "))},Q=function(q,J,re,fe){for(var pe=2*Math.PI,we=Math.PI/2;J>re;)J-=pe;var Pe=Math.abs(re-J);Pe<pe&&fe&&(Pe=pe-Pe);for(var Re=[],Ue=fe?-1:1,et=J;Pe>1e-5;){var it=et+Ue*Math.min(Pe,we);Re.push(ce.call(this,q,et,it)),Pe-=Math.abs(it-et),et=it}return Re},ce=function(q,J,re){var fe=(re-J)/2,pe=q*Math.cos(fe),we=q*Math.sin(fe),Pe=pe,Re=-we,Ue=Pe*Pe+Re*Re,et=Ue+Pe*pe+Re*we,it=4/3*(Math.sqrt(2*Ue*et)-et)/(Pe*we-Re*pe),Ne=Pe-it*Re,Be=Re+it*Pe,te=Ne,Ze=-Be,ct=fe+J,ot=Math.cos(ct),ze=Math.sin(ct);return{x1:q*Math.cos(J),y1:q*Math.sin(J),x2:Ne*ot-Be*ze,y2:Ne*ze+Be*ot,x3:te*ot-Ze*ze,y3:te*ze+Ze*ot,x4:q*Math.cos(re),y4:q*Math.sin(re)}},me=function(q){return 180*q/Math.PI},Se=function(q,J,re,fe,pe,we){var Pe=q+.5*(re-q),Re=J+.5*(fe-J),Ue=pe+.5*(re-pe),et=we+.5*(fe-we),it=Math.min(q,pe,Pe,Ue),Ne=Math.max(q,pe,Pe,Ue),Be=Math.min(J,we,Re,et),te=Math.max(J,we,Re,et);return new d(it,Be,Ne-it,te-Be)},Fe=function(q,J,re,fe,pe,we,Pe,Re){var Ue,et,it,Ne,Be,te,Ze,ct,ot,ze,at,lt,Rt,At,Jt=re-q,rn=fe-J,$t=pe-re,cn=we-fe,tn=Pe-pe,xt=Re-we;for(et=0;et<41;et++)ot=(Ze=(it=q+(Ue=et/40)*Jt)+Ue*((Be=re+Ue*$t)-it))+Ue*(Be+Ue*(pe+Ue*tn-Be)-Ze),ze=(ct=(Ne=J+Ue*rn)+Ue*((te=fe+Ue*cn)-Ne))+Ue*(te+Ue*(we+Ue*xt-te)-ct),et==0?(at=ot,lt=ze,Rt=ot,At=ze):(at=Math.min(at,ot),lt=Math.min(lt,ze),Rt=Math.max(Rt,ot),At=Math.max(At,ze));return new d(Math.round(at),Math.round(lt),Math.round(Rt-at),Math.round(At-lt))},X=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var q,J,re=(q=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:q,lineDashOffset:J}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(Et.API),(function(n){var e=function(c){var d,h,f,p,x,N,b,E,C,I;for(h=[],f=0,p=(c+=d="\0\0\0\0".slice(c.length%4||4)).length;p>f;f+=4)(x=(c.charCodeAt(f)<<24)+(c.charCodeAt(f+1)<<16)+(c.charCodeAt(f+2)<<8)+c.charCodeAt(f+3))!==0?(N=(x=((x=((x=((x=(x-(I=x%85))/85)-(C=x%85))/85)-(E=x%85))/85)-(b=x%85))/85)%85,h.push(N+33,b+33,E+33,C+33,I+33)):h.push(122);return(function(R,U){for(var $=U;$>0;$--)R.pop()})(h,d.length),String.fromCharCode.apply(String,h)+"~>"},t=function(c){var d,h,f,p,x,N=String,b="length",E=255,C="charCodeAt",I="slice",R="replace";for(c[I](-2),c=c[I](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),f=[],p=0,x=(c+=d="uuuuu"[I](c[b]%5||5))[b];x>p;p+=5)h=52200625*(c[C](p)-33)+614125*(c[C](p+1)-33)+7225*(c[C](p+2)-33)+85*(c[C](p+3)-33)+(c[C](p+4)-33),f.push(E&h>>24,E&h>>16,E&h>>8,E&h);return(function(U,$){for(var z=$;z>0;z--)U.pop()})(f,d[b]),N.fromCharCode.apply(N,f)},r=function(c){return c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(c){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),d.test(c)===!1)return"";for(var h="",f=0;f<c.length;f+=2)h+=String.fromCharCode("0x"+(c[f]+c[f+1]));return h},a=function(c){for(var d=new Uint8Array(c.length),h=c.length;h--;)d[h]=c.charCodeAt(h);return(d=hy(d)).reduce(function(f,p){return f+String.fromCharCode(p)},"")};n.processDataByFilters=function(c,d){var h=0,f=c||"",p=[];for(typeof(d=d||[])=="string"&&(d=[d]),h=0;h<d.length;h+=1)switch(d[h]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=i(f),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=r(f),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=a(f),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[h]+'" is not implemented')}return{data:f,reverseChain:p.reverse().join(" ")}}})(Et.API),(function(n){n.loadFile=function(e,t,r){return(function(i,a,c){a=a!==!1,c=typeof c=="function"?c:function(){};var d=void 0;try{d=(function(h,f,p){var x=new XMLHttpRequest,N=0,b=function(E){var C=E.length,I=[],R=String.fromCharCode;for(N=0;N<C;N+=1)I.push(R(255&E.charCodeAt(N)));return I.join("")};if(x.open("GET",h,!f),x.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(x.onload=function(){x.status===200?p(b(this.responseText)):p(void 0)}),x.send(null),f&&x.status===200)return b(x.responseText)})(i,a,c)}catch{}return d})(e,t,r)},n.loadImageFile=n.loadFile})(Et.API),(function(n){function e(){return(Xt.html2canvas?Promise.resolve(Xt.html2canvas):tv(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function t(){return(Xt.DOMPurify?Promise.resolve(Xt.DOMPurify):tv(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var r=function(d){var h=nr(d);return h==="undefined"?"undefined":h==="string"||d instanceof String?"string":h==="number"||d instanceof Number?"number":h==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":h==="object"?"object":"unknown"},i=function(d,h){var f=document.createElement(d);for(var p in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[p]=h.style[p];return f},a=function d(h,f){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),x=h.firstChild;x;x=x.nextSibling)f!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||p.appendChild(d(x,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p},c=function d(h){var f=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),p=d.convert(Promise.resolve(),f);return(p=p.setProgress(1,d,1,[d])).set(h)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(d,h){return d.__proto__=h||c.prototype,d},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(d,h){return this.then(function(){switch(h=h||(function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),h){case"string":return this.then(t).then(function(f){return this.set({src:i("div",{innerHTML:d,dompurify:f})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},c.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var f=this.opt.jsPDF,p=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,N=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete N.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=p,p)for(var b=0;b<p.length;++b){var E=p[b],C=E.src.find(function(I){return I.format==="truetype"});C&&f.addFont(C.url,E.ref.name,E.ref.style)}return N.windowHeight=N.windowHeight||0,N.windowHeight=N.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):N.windowHeight,f.context2d.save(!0),h(this.prop.container,N)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(d,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(d,h):this.outputPdf(d,h)},c.prototype.outputPdf=function(d,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,h)})},c.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},c.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(d){if(r(d)!=="object")return this;var h=Object.keys(d||{}).map(function(f){if(f in c.template.prop)return function(){this.prop[f]=d[f]};switch(f){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[f]=d[f]}}},this);return this.then(function(){return this.thenList(h)})},c.prototype.get=function(d,h){return this.then(function(){var f=d in c.template.prop?this.prop[d]:this.opt[d];return h?h(f):f})},c.prototype.setMargin=function(d){return this.then(function(){switch(r(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},c.prototype.setPageSize=function(d){function h(f,p){return Math.floor(f*p/72*96)}return this.then(function(){(d=d||Et.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:h(d.inner.width,d.k),height:h(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},c.prototype.setProgress=function(d,h,f,p){return d!=null&&(this.progress.val=d),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(d,h,f,p){return this.setProgress(d?this.progress.val+d:null,h||null,f?this.progress.n+f:null,p?this.progress.stack.concat(p):null)},c.prototype.then=function(d,h){var f=this;return this.thenCore(d,h,function(p,x){return f.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(N){return f.updateProgress(null,p),N}).then(p,x).then(function(N){return f.updateProgress(1),N})})},c.prototype.thenCore=function(d,h,f){f=f||Promise.prototype.then;var p=this;d&&(d=d.bind(p)),h&&(h=h.bind(p));var x=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:c.convert(Object.assign({},p),Promise.prototype),N=f.call(x,d,h);return c.convert(N,p.__proto__)},c.prototype.thenExternal=function(d,h){return Promise.prototype.then.call(this,d,h)},c.prototype.thenList=function(d){var h=this;return d.forEach(function(f){h=h.thenCore(f)}),h},c.prototype.catch=function(d){d&&(d=d.bind(this));var h=Promise.prototype.catch.call(this,d);return c.convert(h,this)},c.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},c.prototype.error=function(d){return this.then(function(){throw new Error(d)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,Et.getPageSize=function(d,h,f){if(nr(d)==="object"){var p=d;d=p.orientation,h=p.unit||h,f=p.format||f}h=h||"mm",f=f||"a4",d=(""+(d||"P")).toLowerCase();var x,N=(""+f).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+h}var E,C=0,I=0;if(b.hasOwnProperty(N))C=b[N][1]/x,I=b[N][0]/x;else try{C=f[1],I=f[0]}catch{throw new Error("Invalid format: "+f)}if(d==="p"||d==="portrait")d="p",I>C&&(E=I,I=C,C=E);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",C>I&&(E=I,I=C,C=E)}return{width:I,height:C,unit:h,k:x,orientation:d}},n.html=function(d,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(xv):null;var f=new c(h);return h.worker?f:f.from(d).doCallback()}})(Et.API),Et.API.addJS=function(n){return _N=n,this.internal.events.subscribe("postPutResources",function(){kp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(kp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),wN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+_N+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){kp!==void 0&&wN!==void 0&&this.internal.out("/Names <</JavaScript "+kp+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),a=0;a<i.length;a++){var c=i[a],d=r.exec(c);if(d!=null){var h=d[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(a=0;a<f;a++){var x=t.internal.newObject();p.push(x);var N=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+N.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<p.length;a++)t.internal.write("(page_"+(a+1)+")"+p[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,a){var c={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var c=r.children[a];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var d=this.count=this.count_r({count:0},c);if(d>0&&this.line("/Count "+d),c.options&&c.options.pageNumber){var h=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])})(Et.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,a,c,d){var h,f=this.decode.DCT_DECODE,p=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(x){for(var N,b=256*x.charCodeAt(4)+x.charCodeAt(5),E=x.length,C={width:0,height:0,numcomponents:1},I=4;I<E;I+=2){if(I+=b,e.indexOf(x.charCodeAt(I+1))!==-1){N=256*x.charCodeAt(I+5)+x.charCodeAt(I+6),C={width:256*x.charCodeAt(I+7)+x.charCodeAt(I+8),height:N,numcomponents:x.charCodeAt(I+9)};break}b=256*x.charCodeAt(I+2)+x.charCodeAt(I+3)}return C})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}p={data:t,width:h.width,height:h.height,colorSpace:d,bitsPerComponent:8,filter:f,index:r,alias:i}}return p}})(Et.API),Et.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,a=OF(n,{checkCrc:!0}),c=a.width,d=a.height,h=a.channels,f=a.palette,p=a.depth;i=f&&h===1?(function(D){for(var k=D.width,G=D.height,S=D.data,L=D.palette,F=D.depth,se=!1,ye=[],Q=[],ce=void 0,me=!1,Se=0,Fe=0;Fe<L.length;Fe++){var X=E_(L[Fe],4),q=X[0],J=X[1],re=X[2],fe=X[3];ye.push(q,J,re),fe!=null&&(fe===0?(Se++,Q.length<1&&Q.push(Fe)):fe<255&&(me=!0))}if(me||Se>1){se=!0,Q=void 0;var pe=k*G;ce=new Uint8Array(pe);for(var we=new DataView(S.buffer),Pe=0;Pe<pe;Pe++){var Re=wv(we,Pe,F),Ue=E_(L[Re],4)[3];ce[Pe]=Ue}}else Se===0&&(Q=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:se?8:void 0,colorBytes:S,alphaBytes:ce,needSMask:se,palette:ye,mask:Q}})(a):h===2||h===4?(function(D){for(var k=D.data,G=D.width,S=D.height,L=D.channels,F=D.depth,se=L===2?"DeviceGray":"DeviceRGB",ye=L-1,Q=G*S,ce=ye,me=Q*ce,Se=1*Q,Fe=Math.ceil(me*F/8),X=Math.ceil(Se*F/8),q=new Uint8Array(Fe),J=new Uint8Array(X),re=new DataView(k.buffer),fe=new DataView(q.buffer),pe=new DataView(J.buffer),we=!1,Pe=0;Pe<Q;Pe++){for(var Re=Pe*L,Ue=0;Ue<ce;Ue++)RN(fe,wv(re,Re+Ue,F),Pe*ce+Ue,F);var et=wv(re,Re+ce,F);et<(1<<F)-1&&(we=!0),RN(pe,et,1*Pe,F)}return{colorSpace:se,colorsPerPixel:ye,sMaskBitsPerComponent:we?F:void 0,colorBytes:q,alphaBytes:J,needSMask:we}})(a):(function(D){var k=D.data,G=D.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:G,colorsPerPixel:G==="DeviceGray"?1:3,colorBytes:k instanceof Uint16Array?(function(S){for(var L=S.length,F=new Uint8Array(2*L),se=new DataView(F.buffer,F.byteOffset,F.byteLength),ye=0;ye<L;ye++)se.setUint16(2*ye,S[ye],!1);return F})(k):k,needSMask:!1}})(a);var x,N,b,E=i,C=E.colorSpace,I=E.colorsPerPixel,R=E.sMaskBitsPerComponent,U=E.colorBytes,$=E.alphaBytes,z=E.needSMask,ue=E.palette,ie=E.mask,V=null;return r!==Et.API.image_compression.NONE&&typeof hy=="function"?(V=(function(D){var k;switch(D){case Et.API.image_compression.FAST:k=11;break;case Et.API.image_compression.MEDIUM:k=13;break;case Et.API.image_compression.SLOW:k=14;break;default:k=12}return k})(r),x=this.decode.FLATE_DECODE,N="/Predictor ".concat(V," /Colors ").concat(I," /BitsPerComponent ").concat(p," /Columns ").concat(c),n=EN(U,Math.ceil(c*I*p/8),I,p,r),z&&(b=EN($,Math.ceil(c*R/8),1,R,r))):(x=void 0,N=void 0,n=U,z&&(b=$)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:t,data:n,index:e,filter:x,decodeParameters:N,transparency:ie,palette:ue,sMask:b,predictor:V,width:c,height:d,bitsPerComponent:p,sMaskBitsPerComponent:R,colorSpace:C}}},(function(n){n.processGIF89A=function(e,t,r,i){var a=new iq(e),c=a.width,d=a.height,h=[];a.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:c,height:d},p=new _v(100).encode(f,100);return n.processJPEG.call(this,p,t,r,i)},n.processGIF87A=n.processGIF89A})(Et.API),Lo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Lo.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){yr.log("bit decode error:"+t)}},Lo.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+8*i*4,d=0;d<8&&8*i+d<this.width;d++){var h=this.palette[a>>7-d&1];this.data[c+4*d]=h.blue,this.data[c+4*d+1]=h.green,this.data[c+4*d+2]=h.red,this.data[c+4*d+3]=255}t!==0&&(this.pos+=4-t)}},Lo.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var a=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+2*i*4,d=a>>4,h=15&a,f=this.palette[d];if(this.data[c]=f.blue,this.data[c+1]=f.green,this.data[c+2]=f.red,this.data[c+3]=255,2*i+1>=this.width)break;f=this.palette[h],this.data[c+4]=f.blue,this.data[c+4+1]=f.green,this.data[c+4+2]=f.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},Lo.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;if(i<this.palette.length){var c=this.palette[i];this.data[a]=c.red,this.data[a+1]=c.green,this.data[a+2]=c.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},Lo.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&e)/e*255|0,d=(a>>5&e)/e*255|0,h=(a>>10&e)/e*255|0,f=a>>15?255:0,p=r*this.width*4+4*i;this.data[p]=h,this.data[p+1]=d,this.data[p+2]=c,this.data[p+3]=f}this.pos+=n}},Lo.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(c&e)/e*255|0,h=(c>>5&t)/t*255|0,f=(c>>11)/e*255|0,p=i*this.width*4+4*a;this.data[p]=f,this.data[p+1]=h,this.data[p+2]=d,this.data[p+3]=255}this.pos+=n}},Lo.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=a,this.data[c+1]=i,this.data[c+2]=r,this.data[c+3]=255}this.pos+=this.width%4}},Lo.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=a,this.data[d+1]=i,this.data[d+2]=r,this.data[d+3]=c}},Lo.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var a=new Lo(e,!1),c=a.width,d=a.height,h={data:a.getData(),width:c,height:d},f=new _v(100).encode(h,100);return n.processJPEG.call(this,f,t,r,i)}})(Et.API),kN.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var a=new kN(e),c=a.width,d=a.height,h={data:a.getData(),width:c,height:d},f=new _v(100).encode(h,100);return n.processJPEG.call(this,f,t,r,i)}})(Et.API),Et.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,a=new Uint8Array(i/4*3),c=new Uint8Array(i/4),d=0,h=0,f=0;f<i;f+=4){var p=r[f],x=r[f+1],N=r[f+2],b=r[f+3];a[d++]=p,a[d++]=x,a[d++]=N,c[h++]=b}var E=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:E,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Et.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Xd=Et.API,Pp=Xd.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:i.metadata.Unicode.widths,h=d.fof?d.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,p=f.fof?f.fof:1,x=e.doKerning!==!1,N=0,b=n.length,E=0,C=d[0]||h,I=[];for(t=0;t<b;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?I.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+c*(1e3/a)||0)/1e3):(N=x&&nr(f[r])==="object"&&!isNaN(parseInt(f[r][E],10))?f[r][E]/p:0,I.push((d[r]||C)/h+N)),E=r;return I},NN=Xd.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Xd.processArabic&&(n=Xd.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Pp.apply(this,arguments).reduce(function(a,c){return a+c},0)},AN=function(n,e,t,r){for(var i=[],a=0,c=n.length,d=0;a!==c&&d+e[a]<t;)d+=e[a],a++;i.push(n.slice(0,a));var h=a;for(d=0;a!==c;)d+e[a]>r&&(i.push(n.slice(h,a)),d=0,h=a),d+=e[a],a++;return h!==a&&i.push(n.slice(h,a)),i},SN=function(n,e,t){t||(t={});var r,i,a,c,d,h,f,p=[],x=[p],N=t.textIndent||0,b=0,E=0,C=n.split(" "),I=Pp.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?C[0].length+2:t.lineIndent||0){var R=Array(h).join(" "),U=[];C.map(function(z){(z=z.split(/\s*\n/)).length>1?U=U.concat(z.map(function(ue,ie){return(ie&&ue.length?`
`:"")+ue})):U.push(z[0])}),C=U,h=NN.apply(this,[R,t])}for(a=0,c=C.length;a<c;a++){var $=0;if(r=C[a],h&&r[0]==`
`&&(r=r.substr(1),$=1),N+b+(E=(i=Pp.apply(this,[r,t])).reduce(function(z,ue){return z+ue},0))>e||$){if(E>e){for(d=AN.apply(this,[r,i,e-(N+b),e]),p.push(d.shift()),p=[d.pop()];d.length;)x.push([d.shift()]);E=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(z,ue){return z+ue},0)}else p=[r];x.push(p),N=E+h,b=I}else p.push(r),N+=b+E,b=I}return f=h?function(z,ue){return(ue?R:"")+z.join(" ")}:function(z){return z.join(" ")},x.map(f)},Xd.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var x=this.internal.getFont(p.fontName,p.fontStyle),N="Unicode";return x.metadata[N]?{widths:x.metadata[N].widths||{0:1},kerning:x.metadata[N].kerning||{}}:{font:x.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/i;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=t.lineIndent;var d,h,f=[];for(d=0,h=r.length;d<h;d++)f=f.concat(SN.apply(this,[r[d],c,a]));return f},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},a=0;a<16;a++)r[t[a]]=e[a],i[e[a]]=t[a];var c=function(N){return"0x"+parseInt(N,10).toString(16)},d=n.__fontmetrics__.compress=function(N){var b,E,C,I,R=["{"];for(var U in N){if(b=N[U],isNaN(parseInt(U,10))?E="'"+U+"'":(U=parseInt(U,10),E=(E=c(U).slice(2)).slice(0,-1)+i[E.slice(-1)]),typeof b=="number")b<0?(C=c(b).slice(3),I="-"):(C=c(b).slice(2),I=""),C=I+C.slice(0,-1)+i[C.slice(-1)];else{if(nr(b)!=="object")throw new Error("Don't know what to do with value type "+nr(b)+".");C=d(b)}R.push(E+C)}return R.push("}"),R.join("")},h=n.__fontmetrics__.uncompress=function(N){if(typeof N!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,E,C,I,R={},U=1,$=R,z=[],ue="",ie="",V=N.length-1,D=1;D<V;D+=1)(I=N[D])=="'"?b?(C=b.join(""),b=void 0):b=[]:b?b.push(I):I=="{"?(z.push([$,C]),$={},C=void 0):I=="}"?((E=z.pop())[0][E[1]]=$,C=void 0,$=E[0]):I=="-"?U=-1:C===void 0?r.hasOwnProperty(I)?(ue+=r[I],C=parseInt(ue,16)*U,U=1,ue=""):ue+=I:r.hasOwnProperty(I)?(ie+=r[I],$[C]=parseInt(ie,16)*U,U=1,C=void 0,ie=""):ie+=I;return R},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},x={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(N){var b=N.font,E=x.Unicode[b.postScriptName];E&&(b.metadata.Unicode={},b.metadata.Unicode.widths=E.widths,b.metadata.Unicode.kerning=E.kerning);var C=p.Unicode[b.postScriptName];C&&(b.metadata.Unicode.encoding=C,b.encoding=C.codePages[0])}])})(Et.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=t.charCodeAt(a);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,a=t.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(c,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(Jp(d)),c.metadata=n.API.TTFFont.open(d),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(i,r)}}])})(Et),Et.API.addSvgAsImage=function(n,e,t,r,i,a,c,d){if(isNaN(e)||isNaN(t))throw yr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw yr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=r,h.height=i;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return(Xt.canvg?Promise.resolve(Xt.canvg):tv(()=>import("./index.es-BsYbQeYy.js"),[])).catch(function(N){return Promise.reject(new Error("Could not load canvg: "+N))}).then(function(N){return N.default?N.default:N}).then(function(N){return N.fromString(f,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(p)}).then(function(){x.addImage(h.toDataURL("image/jpeg",1),e,t,r,i,c,d)})},Et.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Et.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,a,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(c),h=[],f=0,p=0,x=0;function N(E,C){var I,R=!1;for(I=0;I<E.length;I+=1)E[I]===C&&(R=!0);return R}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var b=d.length;for(x=0;x<b;x+=1)t[d[x]].value=t[d[x]].defaultValue,t[d[x]].explicitSet=!1}if(nr(n)==="object"){for(i in n)if(a=n[i],N(d,i)&&a!==void 0){if(t[i].type==="boolean"&&typeof a=="boolean")t[i].value=a;else if(t[i].type==="name"&&N(t[i].valueSet,a))t[i].value=a;else if(t[i].type==="integer"&&Number.isInteger(a))t[i].value=a;else if(t[i].type==="array"){for(f=0;f<a.length;f+=1)if(r=!0,a[f].length===1&&typeof a[f][0]=="number")h.push(String(a[f]-1));else if(a[f].length>1){for(p=0;p<a[f].length;p+=1)typeof a[f][p]!="number"&&(r=!1);r===!0&&h.push([a[f][0]-1,a[f][1]-1].join(" "))}t[i].value="["+h.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var E,C=[];for(E in t)t[E].explicitSet===!0&&(t[E].type==="name"?C.push("/"+E+" /"+t[E].value):C.push("/"+E+" "+t[E].value));C.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+C.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),f=a.length+c.length+d.length+i.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+a+c+d+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Et.API),(function(n){var e=n.API,t=e.pdfEscape16=function(a,c){for(var d,h=c.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],x=0,N=a.length;x<N;++x){if(d=c.metadata.characterToGlyph(a.charCodeAt(x)),c.metadata.glyIdsUsed.push(d),c.metadata.toUnicode[d]=a.charCodeAt(x),h.indexOf(d)==-1&&(h.push(d),h.push([parseInt(c.metadata.widthOfGlyph(d),10)])),d=="0")return p.join("");d=d.toString(16),p.push(f[4-d.length],d)}return p.join("")},r=function(a){var c,d,h,f,p,x,N;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],x=0,N=(d=Object.keys(a).sort(function(b,E){return b-E})).length;x<N;x++)c=d[x],h.length>=100&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),a[c]!==void 0&&a[c]!==null&&typeof a[c].toString=="function"&&(f=("0000"+a[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),h.push("<"+c+"><"+f+">"));return h.length&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(c){var d=c.font,h=c.out,f=c.newObject,p=c.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="Identity-H"){for(var x=d.metadata.Unicode.widths,N=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),b="",E=0;E<N.length;E++)b+=String.fromCharCode(N[E]);var C=f();p({data:b,addLength1:!0,objectId:C}),h("endobj");var I=f();p({data:r(d.metadata.toUnicode),addLength1:!0,objectId:I}),h("endobj");var R=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+rh(d.fontName)),h("/FontFile2 "+C+" 0 R"),h("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),h("/Flags "+d.metadata.flags),h("/StemV "+d.metadata.stemV),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h(">>"),h("endobj");var U=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+rh(d.fontName)),h("/FontDescriptor "+R+" 0 R"),h("/W "+n.API.PDFObject.convert(x)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+d.encoding+")"),h(">>"),h(">>"),h("endobj"),d.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+I+" 0 R"),h("/BaseFont /"+rh(d.fontName)),h("/Encoding /"+d.encoding),h("/DescendantFonts ["+U+" 0 R]"),h(">>"),h("endobj"),d.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(c){var d=c.font,h=c.out,f=c.newObject,p=c.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var x=d.metadata.rawData,N="",b=0;b<x.length;b++)N+=String.fromCharCode(x[b]);var E=f();p({data:N,addLength1:!0,objectId:E}),h("endobj");var C=f();p({data:r(d.metadata.toUnicode),addLength1:!0,objectId:C}),h("endobj");var I=f();h("<<"),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h("/StemV "+d.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+E+" 0 R"),h("/Flags 96"),h("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),h("/FontName /"+rh(d.fontName)),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h(">>"),h("endobj"),d.objectNumber=f();for(var R=0;R<d.metadata.hmtx.widths.length;R++)d.metadata.hmtx.widths[R]=parseInt(d.metadata.hmtx.widths[R]*(1e3/d.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+C+" 0 R/BaseFont/"+rh(d.fontName)+"/FontDescriptor "+I+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),h("endobj"),d.isAlreadyPutted=!0}})(a)}]);var i=function(a){var c,d=a.text||"",h=a.x,f=a.y,p=a.options||{},x=a.mutex||{},N=x.pdfEscape,b=x.activeFontKey,E=x.fonts,C=b,I="",R=0,U="",$=E[C].encoding;if(E[C].encoding!=="Identity-H")return{text:d,x:h,y:f,options:p,mutex:x};for(U=d,C=b,Array.isArray(d)&&(U=d[0]),R=0;R<U.length;R+=1)E[C].metadata.hasOwnProperty("cmap")&&(c=E[C].metadata.cmap.unicode.codeMap[U[R].charCodeAt(0)]),c||U[R].charCodeAt(0)<256&&E[C].metadata.hasOwnProperty("Unicode")?I+=U[R]:I+="";var z="";return parseInt(C.slice(1))<14||$==="WinAnsiEncoding"?z=N(I,C).split("").map(function(ue){return ue.charCodeAt(0).toString(16)}).join(""):$==="Identity-H"&&(z=t(I,E[C])),x.isHex=!0,{text:z,x:h,y:f,options:p,mutex:x}};e.events.push(["postProcessText",function(a){var c=a.text||"",d=[],h={text:c,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(c)){var f=0;for(f=0;f<c.length;f+=1)Array.isArray(c[f])&&c[f].length===3?d.push([i(Object.assign({},h,{text:c[f][0]})).text,c[f][1],c[f][2]]):d.push(i(Object.assign({},h,{text:c[f]})).text);a.text=d}else a.text=i(Object.assign({},h,{text:c})).text}])})(Et),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Et.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,a,c,d,h,f,p,x=e,N=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],E={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},C={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},I=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],R=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),U=!1,$=0;this.__bidiEngine__={};var z=function(S){var L=S.charCodeAt(),F=L>>8,se=C[F];return se!==void 0?x[256*se+(255&L)]:F===252||F===253?"AL":R.test(F)?"L":F===8?"R":"N"},ue=function(S){for(var L,F=0;F<S.length;F++){if((L=z(S.charAt(F)))==="L")return!1;if(L==="R")return!0}return!1},ie=function(S,L,F,se){var ye,Q,ce,me,Se=L[se];switch(Se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":U=!1;break;case"N":case"AN":break;case"EN":U&&(Se="AN");break;case"AL":U=!0,Se="R";break;case"WS":case"BN":Se="N";break;case"CS":se<1||se+1>=L.length||(ye=F[se-1])!=="EN"&&ye!=="AN"||(Q=L[se+1])!=="EN"&&Q!=="AN"?Se="N":U&&(Q="AN"),Se=Q===ye?Q:"N";break;case"ES":Se=(ye=se>0?F[se-1]:"B")==="EN"&&se+1<L.length&&L[se+1]==="EN"?"EN":"N";break;case"ET":if(se>0&&F[se-1]==="EN"){Se="EN";break}if(U){Se="N";break}for(ce=se+1,me=L.length;ce<me&&L[ce]==="ET";)ce++;Se=ce<me&&L[ce]==="EN"?"EN":"N";break;case"NSM":if(c&&!d){for(me=L.length,ce=se+1;ce<me&&L[ce]==="NSM";)ce++;if(ce<me){var Fe=S[se],X=Fe>=1425&&Fe<=2303||Fe===64286;if(ye=L[ce],X&&(ye==="R"||ye==="AL")){Se="R";break}}}Se=se<1||(ye=L[se-1])==="B"?"N":F[se-1];break;case"B":U=!1,i=!0,Se=$;break;case"S":a=!0,Se="N"}return Se},V=function(S,L,F){var se=S.split("");return F&&D(se,F,{hiLevel:$}),se.reverse(),L&&L.reverse(),se.join("")},D=function(S,L,F){var se,ye,Q,ce,me,Se=-1,Fe=S.length,X=0,q=[],J=$?b:N,re=[];for(U=!1,i=!1,a=!1,ye=0;ye<Fe;ye++)re[ye]=z(S[ye]);for(Q=0;Q<Fe;Q++){if(me=X,q[Q]=ie(S,re,q,Q),se=240&(X=J[me][E[q[Q]]]),X&=15,L[Q]=ce=J[X][5],se>0)if(se===16){for(ye=Se;ye<Q;ye++)L[ye]=1;Se=-1}else Se=-1;if(J[X][6])Se===-1&&(Se=Q);else if(Se>-1){for(ye=Se;ye<Q;ye++)L[ye]=ce;Se=-1}re[Q]==="B"&&(L[Q]=0),F.hiLevel|=ce}a&&(function(fe,pe,we){for(var Pe=0;Pe<we;Pe++)if(fe[Pe]==="S"){pe[Pe]=$;for(var Re=Pe-1;Re>=0&&fe[Re]==="WS";Re--)pe[Re]=$}})(re,L,Fe)},k=function(S,L,F,se,ye){if(!(ye.hiLevel<S)){if(S===1&&$===1&&!i)return L.reverse(),void(F&&F.reverse());for(var Q,ce,me,Se,Fe=L.length,X=0;X<Fe;){if(se[X]>=S){for(me=X+1;me<Fe&&se[me]>=S;)me++;for(Se=X,ce=me-1;Se<ce;Se++,ce--)Q=L[Se],L[Se]=L[ce],L[ce]=Q,F&&(Q=F[Se],F[Se]=F[ce],F[ce]=Q);X=me}X++}}},G=function(S,L,F){var se=S.split(""),ye={hiLevel:$};return F||(F=[]),D(se,F,ye),(function(Q,ce,me){if(me.hiLevel!==0&&p)for(var Se,Fe=0;Fe<Q.length;Fe++)ce[Fe]===1&&(Se=I.indexOf(Q[Fe]))>=0&&(Q[Fe]=I[Se+1])})(se,F,ye),k(2,se,L,F,ye),k(1,se,L,F,ye),se.join("")};return this.__bidiEngine__.doBidiReorder=function(S,L,F){if((function(ye,Q){if(Q)for(var ce=0;ce<ye.length;ce++)Q[ce]=ce;d===void 0&&(d=ue(ye)),f===void 0&&(f=ue(ye))})(S,L),c||!h||f)if(c&&h&&d^f)$=d?1:0,S=V(S,L,F);else if(!c&&h&&f)$=d?1:0,S=G(S,L,F),S=V(S,L);else if(!c||d||h||f){if(c&&!h&&d^f)S=V(S,L),d?($=0,S=G(S,L,F)):($=1,S=G(S,L,F),S=V(S,L));else if(c&&d&&!h&&f)$=1,S=G(S,L,F),S=V(S,L);else if(!c&&!h&&d^f){var se=p;d?($=1,S=G(S,L,F),$=0,p=!1,S=G(S,L,F),p=se):($=0,S=G(S,L,F),S=V(S,L),$=1,p=!1,S=G(S,L,F),p=se,S=V(S,L))}}else $=0,S=G(S,L,F);else $=d?1:0,S=G(S,L,F);return S},this.__bidiEngine__.setOptions=function(S){S&&(c=S.isInputVisual,h=S.isOutputVisual,d=S.isInputRtl,f=S.isOutputRtl,p=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var c=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var d=0;for(c=[],d=0;d<i.length;d+=1)Object.prototype.toString.call(i[d])==="[object Array]"?c.push([t.doBidiReorder(i[d][0]),i[d][1],i[d][2]]):c.push([t.doBidiReorder(i[d])]);r.text=c}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(Et),Et.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new xu(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new xq(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new sq(this.contents),this.head=new oq(this),this.name=new hq(this),this.cmap=new gE(this),this.toUnicode={},this.hhea=new lq(this),this.maxp=new fq(this),this.hmtx=new mq(this),this.post=new uq(this),this.os2=new cq(this),this.loca=new yq(this),this.glyf=new pq(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,d,h,f;for(f=[],c=0,d=(h=this.bbox).length;c<d;c++)e=h[c],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,a,c,d;for(c=0,a=0,d=(e=""+e).length;0<=d?a<d:a>d;a=0<=d?++a:--a)i=e.charCodeAt(a),c+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return c*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var Uo,xu=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,a,c,d,h;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),c=this.readByte(),d=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^c)+256*(255^d)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*a+65536*c+256*d+h},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)t=e[r],a.push(this.writeByte(t));return a},n})(),sq=(function(){var n;function e(t){var r,i,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,a,c,d,h,f,p,x,N,b,E,C;for(C in b=Object.keys(t).length,h=Math.log(2),x=16*Math.floor(Math.log(b)/h),c=Math.floor(x/h),p=16*b-x,(i=new xu).writeInt(this.scalarType),i.writeShort(b),i.writeShort(x),i.writeShort(c),i.writeShort(p),a=16*b,f=i.pos+a,d=null,E=[],t)for(N=t[C],i.writeString(C),i.writeInt(n(N)),i.writeInt(f),i.writeInt(N.length),E=E.concat(N),C==="head"&&(d=f),f+=N.length;f%4;)E.push(0),f++;return i.write(E),r=2981146554-n(i.data),i.pos=d+8,i.writeUInt32(r),i.data},n=function(t){var r,i,a,c;for(t=vE.call(t);t.length%4;)t.push(0);for(a=new xu(t),i=0,r=0,c=t.length;r<c;r=r+=4)i+=a.readUInt32();return 4294967295&i},e})(),aq={}.hasOwnProperty,El=function(n,e){for(var t in e)aq.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Uo=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var oq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return El(n,Uo),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new xu).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),PN=(function(){function n(e,t){var r,i,a,c,d,h,f,p,x,N,b,E,C,I,R,U,$;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),x=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(b=e.readUInt16(),N=b/2,e.pos+=6,a=(function(){var z,ue;for(ue=[],h=z=0;0<=N?z<N:z>N;h=0<=N?++z:--z)ue.push(e.readUInt16());return ue})(),e.pos+=2,C=(function(){var z,ue;for(ue=[],h=z=0;0<=N?z<N:z>N;h=0<=N?++z:--z)ue.push(e.readUInt16());return ue})(),f=(function(){var z,ue;for(ue=[],h=z=0;0<=N?z<N:z>N;h=0<=N?++z:--z)ue.push(e.readUInt16());return ue})(),p=(function(){var z,ue;for(ue=[],h=z=0;0<=N?z<N:z>N;h=0<=N?++z:--z)ue.push(e.readUInt16());return ue})(),i=(this.length-e.pos+this.offset)/2,d=(function(){var z,ue;for(ue=[],h=z=0;0<=i?z<i:z>i;h=0<=i?++z:--z)ue.push(e.readUInt16());return ue})(),h=R=0,$=a.length;R<$;h=++R)for(I=a[h],r=U=E=C[h];E<=I?U<=I:U>=I;r=E<=I?++U:--U)p[h]===0?c=r+f[h]:(c=d[p[h]/2+(r-E)-(N-h)]||0)!==0&&(c+=f[h]),this.codeMap[r]=65535&c}e.pos=x}return n.encode=function(e,t){var r,i,a,c,d,h,f,p,x,N,b,E,C,I,R,U,$,z,ue,ie,V,D,k,G,S,L,F,se,ye,Q,ce,me,Se,Fe,X,q,J,re,fe,pe,we,Pe,Re,Ue,et,it;switch(se=new xu,c=Object.keys(e).sort(function(Ne,Be){return Ne-Be}),t){case"macroman":for(C=0,I=(function(){var Ne=[];for(E=0;E<256;++E)Ne.push(0);return Ne})(),U={0:0},a={},ye=0,Se=c.length;ye<Se;ye++)U[Re=e[i=c[ye]]]==null&&(U[Re]=++C),a[i]={old:e[i],new:U[e[i]]},I[i]=U[e[i]];return se.writeUInt16(1),se.writeUInt16(0),se.writeUInt32(12),se.writeUInt16(0),se.writeUInt16(262),se.writeUInt16(0),se.write(I),{charMap:a,subtable:se.data,maxGlyphID:C+1};case"unicode":for(L=[],x=[],$=0,U={},r={},R=f=null,Q=0,Fe=c.length;Q<Fe;Q++)U[ue=e[i=c[Q]]]==null&&(U[ue]=++$),r[i]={old:ue,new:U[ue]},d=U[ue]-i,R!=null&&d===f||(R&&x.push(R),L.push(i),f=d),R=i;for(R&&x.push(R),x.push(65535),L.push(65535),G=2*(k=L.length),D=2*Math.pow(Math.log(k)/Math.LN2,2),N=Math.log(D/2)/Math.LN2,V=2*k-D,h=[],ie=[],b=[],E=ce=0,X=L.length;ce<X;E=++ce){if(S=L[E],p=x[E],S===65535){h.push(0),ie.push(0);break}if(S-(F=r[S].new)>=32768)for(h.push(0),ie.push(2*(b.length+k-E)),i=me=S;S<=p?me<=p:me>=p;i=S<=p?++me:--me)b.push(r[i].new);else h.push(F-S),ie.push(0)}for(se.writeUInt16(3),se.writeUInt16(1),se.writeUInt32(12),se.writeUInt16(4),se.writeUInt16(16+8*k+2*b.length),se.writeUInt16(0),se.writeUInt16(G),se.writeUInt16(D),se.writeUInt16(N),se.writeUInt16(V),we=0,q=x.length;we<q;we++)i=x[we],se.writeUInt16(i);for(se.writeUInt16(0),Pe=0,J=L.length;Pe<J;Pe++)i=L[Pe],se.writeUInt16(i);for(Ue=0,re=h.length;Ue<re;Ue++)d=h[Ue],se.writeUInt16(d);for(et=0,fe=ie.length;et<fe;et++)z=ie[et],se.writeUInt16(z);for(it=0,pe=b.length;it<pe;it++)C=b[it],se.writeUInt16(C);return{charMap:r,subtable:se.data,maxGlyphID:$+1}}},n})(),gE=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return El(n,Uo),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new PN(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=PN.encode(e,t),(i=new xu).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),lq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return El(n,Uo),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),cq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return El(n,Uo),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),uq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return El(n,Uo),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var c,d,h;for(h=[],a=c=0,d=this.file.maxp.numGlyphs;0<=d?c<d:c>d;a=0<=d?++c:--c)h.push(e.readUInt32());return h}).call(this)}},n})(),dq=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},hq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return El(n,Uo),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,a,c,d,h,f,p,x,N;for(e.pos=this.offset,e.readShort(),t=e.readShort(),d=e.readShort(),r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(h={},a=p=0,x=r.length;p<x;a=++p)i=r[a],e.pos=i.offset,f=e.readString(i.length),c=new dq(f,i),h[N=i.nameID]==null&&(h[N]=[]),h[i.nameID].push(c);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},n})(),fq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return El(n,Uo),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),mq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return El(n,Uo),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,a,c,d,h;for(e.pos=this.offset,this.metrics=[],t=0,d=this.file.hhea.numberOfMetrics;0<=d?t<d:t>d;t=0<=d?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,p;for(p=[],t=f=0;0<=i?f<i:f>i;t=0<=i?++f:--f)p.push(e.readInt16());return p})(),this.widths=(function(){var f,p,x,N;for(N=[],f=0,p=(x=this.metrics).length;f<p;f++)a=x[f],N.push(a.advance);return N}).call(this),r=this.widths[this.widths.length-1],h=[],t=c=0;0<=i?c<i:c>i;t=0<=i?++c:--c)h.push(this.widths.push(r));return h},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),vE=[].slice,pq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return El(n,Uo),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,a,c,d,h,f,p,x;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,r=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,c=(d=new xu(t.read(i))).readShort(),f=d.readShort(),x=d.readShort(),h=d.readShort(),p=d.readShort(),this.cache[e]=c===-1?new vq(d,f,x,h,p):new gq(d,c,f,x,h,p),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,a,c,d,h;for(c=[],a=[],d=0,h=t.length;d<h;d++)i=e[t[d]],a.push(c.length),i&&(c=c.concat(i.encode(r)));return a.push(c.length),{table:c,offsets:a}},n})(),gq=(function(){function n(e,t,r,i,a,c){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=c,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),vq=(function(){function n(e,t,r,i,a){var c,d;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;d=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&d;)c.pos+=1&d?4:2,128&d?c.pos+=8:64&d?c.pos+=4:8&d&&(c.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new xu(vE.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),yq=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return El(n,Uo),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=4)a.push(e.readUInt32());return a}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,a=0,c=0;c<r.length;++c)if(r[c]=i,a<t.length&&t[a]==c){++a,r[c]=i;var d=this.offsets[c],h=this.offsets[c+1]-d;h>0&&(i+=h)}for(var f=new Array(4*r.length),p=0;p<r.length;++p)f[4*p+3]=255&r[p],f[4*p+2]=(65280&r[p])>>8,f[4*p+1]=(16711680&r[p])>>16,f[4*p]=(4278190080&r[p])>>24;return f},n})(),xq=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,a;for(t in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,a,c,d,h;for(i={},c=0,d=e.length;c<d;c++)i[a=e[c]]=this.font.glyf.glyphFor(a);for(a in t=[],i)(r=i[a])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in h=this.glyphsFor(t))r=h[a],i[a]=r;return i},n.prototype.encode=function(e,t){var r,i,a,c,d,h,f,p,x,N,b,E,C,I,R;for(i in r=gE.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),b={0:0},R=r.charMap)b[(h=R[i]).old]=h.new;for(E in N=r.maxGlyphID,c)E in b||(b[E]=N++);return p=(function(U){var $,z;for($ in z={},U)z[U[$]]=$;return z})(b),x=Object.keys(p).sort(function(U,$){return U-$}),C=(function(){var U,$,z;for(z=[],U=0,$=x.length;U<$;U++)d=x[U],z.push(p[d]);return z})(),a=this.font.glyf.encode(c,C,b),f=this.font.loca.encode(a.offsets,C),I={cmap:this.font.cmap.raw(),glyf:a.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(I["OS/2"]=this.font.os2.raw()),this.font.directory.encode(I)},n})();Et.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,a,c;if(Array.isArray(t))return"["+(function(){var d,h,f;for(f=[],d=0,h=t.length;d<h;d++)r=t[d],f.push(e.convert(r));return f})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in a=["<<"],t)c=t[i],a.push("/"+i+" "+e.convert(c));return a.push(">>"),a.join(`
`)}return""+t},e})();function yE(n,e,t,r,i){r=r||{};var a=1.15,c=i.internal.scaleFactor,d=i.internal.getFontSize()/c,h=i.getLineHeightFactor?i.getLineHeightFactor():a,f=d*h,p=/\r\n|\r|\n/g,x="",N=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(x=typeof n=="string"?n.split(p):n,N=x.length||1),t+=d*(2-a),r.valign==="middle"?t-=N/2*f:r.valign==="bottom"&&(t-=N*f),r.halign==="center"||r.halign==="right"){var b=d;if(r.halign==="center"&&(b*=.5),x&&N>=1){for(var E=0;E<x.length;E++)i.text(x[E],e-i.getStringUnitWidth(x[E])*b,t),t+=f;return i}e-=i.getStringUnitWidth(n)*b}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var DN={},vh=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:DN=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,a;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var c=this.jsPDFDocument.internal.getFont(),d=c.fontStyle,h=c.fontName;if(e.font&&(h=e.font),e.fontStyle){d=e.fontStyle;var f=this.getFontList()[h];f&&f.indexOf(d)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(f[0]),d=f[0])}if(this.jsPDFDocument.setFont(h,d),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var p=n.unifyColor(e.fillColor);p&&(r=this.jsPDFDocument).setFillColor.apply(r,p),p=n.unifyColor(e.textColor),p&&(i=this.jsPDFDocument).setTextColor.apply(i,p),p=n.unifyColor(e.lineColor),p&&(a=this.jsPDFDocument).setDrawColor.apply(a,p),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,a){return this.jsPDFDocument.rect(e,t,r,i,a)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return DN||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),by=function(n,e){return by=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},by(n,e)};function xE(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");by(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var bE=(function(n){xE(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e})(Array);function bq(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function wq(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function Dg(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(a){return t.getTextWidth(a)}).reduce(function(a,c){return Math.max(a,c)},0);return i}function wE(n,e,t,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:a});var c=_E(i,!1);c&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,c)}function _E(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function x0(n,e){var t,r,i,a;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(a=n.bottom)!==null&&a!==void 0?a:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function NE(n,e){var t=x0(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function _q(n,e,t,r,i){var a={},c=1.3333333333333333,d=Nv(e,function($){return i.getComputedStyle($).backgroundColor});d!=null&&(a.fillColor=d);var h=Nv(e,function($){return i.getComputedStyle($).color});h!=null&&(a.textColor=h);var f=Aq(r,t);f&&(a.cellPadding=f);var p="borderTopColor",x=c*t,N=r.borderTopWidth;if(r.borderBottomWidth===N&&r.borderRightWidth===N&&r.borderLeftWidth===N){var b=(parseFloat(N)||0)/x;b&&(a.lineWidth=b)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/x,right:(parseFloat(r.borderRightWidth)||0)/x,bottom:(parseFloat(r.borderBottomWidth)||0)/x,left:(parseFloat(r.borderLeftWidth)||0)/x},a.lineWidth.top||(a.lineWidth.right?p="borderRightColor":a.lineWidth.bottom?p="borderBottomColor":a.lineWidth.left&&(p="borderLeftColor"));var E=Nv(e,function($){return i.getComputedStyle($)[p]});E!=null&&(a.lineColor=E);var C=["left","right","center","justify"];C.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),C=["middle","bottom","top"],C.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var I=parseInt(r.fontSize||"");isNaN(I)||(a.fontSize=I/c);var R=Nq(r);R&&(a.fontStyle=R);var U=(r.fontFamily||"").toLowerCase();return n.indexOf(U)!==-1&&(a.font=U),a}function Nq(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function Nv(n,e){var t=AE(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function AE(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:AE(n.parentElement,e):t}function Aq(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,a=t.map(function(d){return parseInt(d||"0")/r}),c=x0(a,0);return i>c.top&&(c.top=i),i>c.bottom&&(c.bottom=i),c}function SE(n,e,t,r,i){var a,c;r===void 0&&(r=!1),i===void 0&&(i=!1);var d;typeof e=="string"?d=t.document.querySelector(e):d=e;var h=Object.keys(n.getFontList()),f=n.scaleFactor(),p=[],x=[],N=[];if(!d)return console.error("Html table could not be found with input: ",e),{head:p,body:x,foot:N};for(var b=0;b<d.rows.length;b++){var E=d.rows[b],C=(c=(a=E?.parentElement)===null||a===void 0?void 0:a.tagName)===null||c===void 0?void 0:c.toLowerCase(),I=Sq(h,f,t,E,r,i);I&&(C==="thead"?p.push(I):C==="tfoot"?N.push(I):x.push(I))}return{head:p,body:x,foot:N}}function Sq(n,e,t,r,i,a){for(var c=new bE(r),d=0;d<r.cells.length;d++){var h=r.cells[d],f=t.getComputedStyle(h);if(i||f.display!=="none"){var p=void 0;a&&(p=_q(n,h,e,f,t)),c.push({rowSpan:h.rowSpan,colSpan:h.colSpan,styles:p,_element:h,content:Eq(h)})}}var x=t.getComputedStyle(r);if(c.length>0&&(i||x.display!=="none"))return c}function Eq(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function jq(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function oc(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(n),c=1;c<arguments.length;c++){var d=arguments[c];if(d!=null)for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(a[h]=d[h])}return a}function EE(n,e){var t=new vh(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();jq(i,r,e);var a=oc({},i,r,e),c;typeof window<"u"&&(c=window);var d=Tq(i,r,e),h=Cq(i,r,e),f=Iq(t,a),p=Lq(t,a,c);return{id:e.tableId,content:p,hooks:h,styles:d,settings:f}}function Tq(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(h){if(h==="columnStyles"){var f=n[h],p=e[h],x=t[h];r.columnStyles=oc({},f,p,x)}else{var N=[n,e,t],b=N.map(function(E){return E[h]||{}});r[h]=oc({},b[0],b[1],b[2])}},a=0,c=Object.keys(r);a<c.length;a++){var d=c[a];i(d)}return r}function Cq(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,c=r;a<c.length;a++){var d=c[a];d.didParseCell&&i.didParseCell.push(d.didParseCell),d.willDrawCell&&i.willDrawCell.push(d.willDrawCell),d.didDrawCell&&i.didDrawCell.push(d.didDrawCell),d.willDrawPage&&i.willDrawPage.push(d.willDrawPage),d.didDrawPage&&i.didDrawPage.push(d.didDrawPage)}return i}function Iq(n,e){var t,r,i,a,c,d,h,f,p,x,N,b,E=x0(e.margin,40/n.scaleFactor()),C=(t=Rq(n,e.startY))!==null&&t!==void 0?t:E.top,I;e.showFoot===!0?I="everyPage":e.showFoot===!1?I="never":I=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var R;e.showHead===!0?R="everyPage":e.showHead===!1?R="never":R=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var U=(a=e.useCss)!==null&&a!==void 0?a:!1,$=e.theme||(U?"plain":"striped"),z=!!e.horizontalPageBreak,ue=(c=e.horizontalPageBreakRepeat)!==null&&c!==void 0?c:null;return{includeHiddenHtml:(d=e.includeHiddenHtml)!==null&&d!==void 0?d:!1,useCss:U,theme:$,startY:C,margin:E,pageBreak:(h=e.pageBreak)!==null&&h!==void 0?h:"auto",rowPageBreak:(f=e.rowPageBreak)!==null&&f!==void 0?f:"auto",tableWidth:(p=e.tableWidth)!==null&&p!==void 0?p:"auto",showHead:R,showFoot:I,tableLineWidth:(x=e.tableLineWidth)!==null&&x!==void 0?x:0,tableLineColor:(N=e.tableLineColor)!==null&&N!==void 0?N:200,horizontalPageBreak:z,horizontalPageBreakRepeat:ue,horizontalPageBreakBehaviour:(b=e.horizontalPageBreakBehaviour)!==null&&b!==void 0?b:"afterAllRows"}}function Rq(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),a=!1;if(t&&t.startPageNumber){var c=t.startPageNumber+t.pageNumber-1;a=c===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&t?.finalY!=null?t.finalY+20/r:null}function Lq(n,e,t){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var c=e.includeHiddenHtml;if(t){var d=SE(n,e.html,t,c,e.useCss)||{};r=d.head||r,i=d.body||r,a=d.foot||r}else console.error("Cannot parse html in non browser environment")}var h=e.columns||kq(r,i,a);return{columns:h,head:r,body:i,foot:a}}function kq(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var c=1,d;Array.isArray(r)?d=r[parseInt(a)]:d=r[a],typeof d=="object"&&!Array.isArray(d)&&(c=d?.colSpan||1);for(var h=0;h<c;h++){var f=void 0;Array.isArray(r)?f=i.length:f=a+(h>0?"_".concat(h):"");var p={dataKey:f};i.push(p)}}),i}var wy=(function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n})(),Pq=(function(n){xE(e,n);function e(t,r,i,a,c,d){var h=n.call(this,t,r,d)||this;return h.cell=i,h.row=a,h.column=c,h.section=a.section,h}return e})(wy),Dq=(function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,a,c){for(var d=0,h=t;d<h.length;d++){var f=h[d],p=new Pq(e,this,r,i,a,c),x=f(p)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],x)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new wy(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new wy(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n})(),jE=(function(){function n(e,t,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof bE&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=a}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=t.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,a){var c=r.cells[a.index];if(!c)return 0;var d=t.getLineHeight(c.styles.fontSize),h=c.padding("vertical"),f=h+d;return f>i?f:i},0)},n})(),TE=(function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var c=a!=null?""+a:"",d=/\r\n|\r|\n/g;this.text=c.split(d)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=x0(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n})(),Mq=(function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],c=a.cells[this.index];c&&typeof c.styles.cellWidth=="number"&&(t=Math.max(t,c.styles.cellWidth))}return t},n})();function Oq(n,e){Fq(n,e);var t=[],r=0;e.columns.forEach(function(a){var c=a.getMaxCustomCellWidth(e);c?a.width=c:(a.width=a.wrappedWidth,t.push(a)),r+=a.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=_y(t,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=_y(t,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Vq(e),Uq(e,n),qq(e)}function Fq(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=NE(n,e);e.allRows().forEach(function(a){for(var c=0,d=e.columns;c<d.length;c++){var h=d[c],f=a.cells[h.index];if(f){var p=e.hooks.didParseCell;e.callCellHooks(n,p,f,a,h,null);var x=f.padding("horizontal");f.contentWidth=Dg(f.text,f.styles,n)+x;var N=Dg(f.text.join(" ").split(/[^\S\u00A0]+/),f.styles,n);if(f.minReadableWidth=N+f.padding("horizontal"),typeof f.styles.cellWidth=="number")f.minWidth=f.styles.cellWidth,f.wrappedWidth=f.styles.cellWidth;else if(f.styles.cellWidth==="wrap"||r===!0)f.contentWidth>i?(f.minWidth=i,f.wrappedWidth=i):(f.minWidth=f.contentWidth,f.wrappedWidth=f.contentWidth);else{var b=10/t;f.minWidth=f.styles.minCellWidth||b,f.wrappedWidth=f.contentWidth,f.minWidth>f.wrappedWidth&&(f.wrappedWidth=f.minWidth)}}}}),e.allRows().forEach(function(a){for(var c=0,d=e.columns;c<d.length;c++){var h=d[c],f=a.cells[h.index];if(f&&f.colSpan===1)h.wrappedWidth=Math.max(h.wrappedWidth,f.wrappedWidth),h.minWidth=Math.max(h.minWidth,f.minWidth),h.minReadableWidth=Math.max(h.minReadableWidth,f.minReadableWidth);else{var p=e.styles.columnStyles[h.dataKey]||e.styles.columnStyles[h.index]||{},x=p.cellWidth||p.minCellWidth;x&&typeof x=="number"&&(h.minWidth=x,h.wrappedWidth=x)}f&&(f.colSpan>1&&!h.minWidth&&(h.minWidth=f.minWidth),f.colSpan>1&&!h.wrappedWidth&&(h.wrappedWidth=f.minWidth))}})}function _y(n,e,t){for(var r=e,i=n.reduce(function(b,E){return b+E.wrappedWidth},0),a=0;a<n.length;a++){var c=n[a],d=c.wrappedWidth/i,h=r*d,f=c.width+h,p=t(c),x=f<p?p:f;e-=x-c.width,c.width=x}if(e=Math.round(e*1e10)/1e10,e){var N=n.filter(function(b){return e<0?b.width>t(b):!0});N.length&&(e=_y(N,e,t))}return e}function qq(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var a=r[i],c=0,d=n.columns;c<d.length;c++){var h=d[c],f=e[h.index];if(t>1)t--,delete a.cells[h.index];else if(f)f.cell.height+=a.height,t=f.cell.colSpan,delete a.cells[h.index],f.left--,f.left<=1&&delete e[h.index];else{var p=a.cells[h.index];if(!p)continue;if(p.height=a.height,p.rowSpan>1){var x=r.length-i,N=p.rowSpan>x?x:p.rowSpan;e[h.index]={cell:p,left:N,row:a}}}}}function Vq(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,a=0,c=0,d=0;d<n.columns.length;d++){var h=n.columns[d];if(c-=1,c>1&&n.columns[d+1])a+=h.width,delete r.cells[h.index];else if(i){var f=i;delete r.cells[h.index],i=null,f.width=h.width+a}else{var f=r.cells[h.index];if(!f)continue;if(c=f.colSpan,a=0,f.colSpan>1){i=f,a+=h.width;continue}f.width=h.width+a}}}function Uq(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var a=i[r],c=0,d=n.columns;c<d.length;c++){var h=d[c],f=a.cells[h.index];if(f){e.applyStyles(f.styles,!0);var p=f.width-f.padding("horizontal");if(f.styles.overflow==="linebreak")f.text=e.splitTextToSize(f.text,p+1/e.scaleFactor(),{fontSize:f.styles.fontSize});else if(f.styles.overflow==="ellipsize")f.text=MN(f.text,p,f.styles,e,"...");else if(f.styles.overflow==="hidden")f.text=MN(f.text,p,f.styles,e,"");else if(typeof f.styles.overflow=="function"){var x=f.styles.overflow(f.text,p);typeof x=="string"?f.text=[x]:f.text=x}f.contentHeight=f.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var N=f.contentHeight/f.rowSpan;f.rowSpan>1&&t.count*t.height<N*f.rowSpan?t={height:N,count:f.rowSpan}:t&&t.count>0&&t.height>N&&(N=t.height),N>a.height&&(a.height=N)}}t.count--}}function MN(n,e,t,r,i){return n.map(function(a){return Bq(a,e,t,r,i)})}function Bq(n,e,t,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=Dg(n,t,r))return n;for(;e<Dg(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function CE(n,e){var t=new vh(n),r=zq(e,t.scaleFactor()),i=new Dq(e,r);return Oq(t,i),t.applyStyles(t.userStyles),i}function zq(n,e){var t=n.content,r=$q(t.columns);if(t.head.length===0){var i=ON(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=ON(r,"foot");i&&t.foot.push(i)}var a=n.settings.theme,c=n.styles;return{columns:r,head:Av("head",t.head,r,c,a,e),body:Av("body",t.body,r,c,a,e),foot:Av("foot",t.foot,r,c,a,e)}}function Av(n,e,t,r,i,a){var c={},d=e.map(function(h,f){for(var p=0,x={},N=0,b=0,E=0,C=t;E<C.length;E++){var I=C[E];if(c[I.index]==null||c[I.index].left===0)if(b===0){var R=void 0;Array.isArray(h)?R=h[I.index-N-p]:R=h[I.dataKey];var U={};typeof R=="object"&&!Array.isArray(R)&&(U=R?.styles||{});var $=Gq(n,I,f,i,r,a,U),z=new TE(R,$,n);x[I.dataKey]=z,x[I.index]=z,b=z.colSpan-1,c[I.index]={left:z.rowSpan-1,times:b}}else b--,N++;else c[I.index].left--,b=c[I.index].times,p++}return new jE(h,f,n,x)});return d}function ON(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=Hq(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function Hq(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function $q(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new Mq(i,e,t)})}function Gq(n,e,t,r,i,a,c){var d=wq(r),h;n==="head"?h=i.headStyles:n==="body"?h=i.bodyStyles:n==="foot"&&(h=i.footStyles);var f=oc({},d.table,d[n],i.styles,h),p=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},x=n==="body"?p:{},N=n==="body"&&t%2===0?oc({},d.alternateRow,i.alternateRowStyles):{},b=bq(a),E=oc({},b,f,N,x);return oc(E,c)}function Wq(n,e,t){var r;t===void 0&&(t={});var i=NE(n,e),a=new Map,c=[],d=[],h=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?h=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(h=[e.settings.horizontalPageBreakRepeat]),h.forEach(function(N){var b=e.columns.find(function(E){return E.dataKey===N||E.index===N});b&&!a.has(b.index)&&(a.set(b.index,!0),c.push(b.index),d.push(e.columns[b.index]),i-=b.wrappedWidth)});for(var f=!0,p=(r=t?.start)!==null&&r!==void 0?r:0;p<e.columns.length;){if(a.has(p)){p++;continue}var x=e.columns[p].wrappedWidth;if(f||i>=x)f=!1,c.push(p),d.push(e.columns[p]),i-=x;else break;p++}return{colIndexes:c,columns:d,lastIndex:p-1}}function Yq(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=Wq(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function IE(n,e){var t=e.settings,r=t.startY,i=t.margin,a={x:i.left,y:r},c=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),d=r+i.bottom+c;if(t.pageBreak==="avoid"){var h=e.body,f=h.reduce(function(N,b){return N+b.height},0);d+=f}var p=new vh(n);(t.pageBreak==="always"||t.startY!=null&&d>p.pageSize().height)&&(LE(p),a.y=i.top),e.callWillDrawPageHooks(p,a);var x=oc({},a);e.startPageNumber=p.pageNumber(),t.horizontalPageBreak?Kq(p,e,x,a):(p.applyStyles(p.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(N){return gc(p,e,N,a,e.columns)}),p.applyStyles(p.userStyles),e.body.forEach(function(N,b){var E=b===e.body.length-1;Mg(p,e,N,E,x,a,e.columns)}),p.applyStyles(p.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(N){return gc(p,e,N,a,e.columns)})),wE(p,e,x,a),e.callEndPageHooks(p,a),e.finalY=a.y,n.lastAutoTable=e,p.applyStyles(p.userStyles)}function Kq(n,e,t,r){var i=Yq(n,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(f,p){n.applyStyles(n.userStyles),p>0?$f(n,e,t,r,f.columns,!0):FN(n,e,r,f.columns),Qq(n,e,t,r,f.columns),Sv(n,e,r,f.columns)});else for(var c=-1,d=i[0],h=function(){var f=c;if(d){n.applyStyles(n.userStyles);var p=d.columns;c>=0?$f(n,e,t,r,p,!0):FN(n,e,r,p),f=qN(n,e,c+1,r,p),Sv(n,e,r,p)}var x=f-c;i.slice(1).forEach(function(N){n.applyStyles(n.userStyles),$f(n,e,t,r,N.columns,!0),qN(n,e,c+1,r,N.columns,x),Sv(n,e,r,N.columns)}),c=f};c<e.body.length-1;)h()}function FN(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return gc(n,e,a,t,r)})}function Qq(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(a,c){var d=c===e.body.length-1;Mg(n,e,a,d,t,r,i)})}function qN(n,e,t,r,i,a){n.applyStyles(n.userStyles),a=a??e.body.length;var c=Math.min(t+a,e.body.length),d=-1;return e.body.slice(t,c).forEach(function(h,f){var p=t+f===e.body.length-1,x=RE(n,e,p,r);h.canEntireRowFit(x,i)&&(gc(n,e,h,r,i),d=t+f)}),d}function Sv(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return gc(n,e,a,t,r)})}function Xq(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function Jq(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var a=0,c=0,d=t.columns;c<d.length;c++){var h=d[c],f=n.cells[h.index];if(f){Array.isArray(f.text)||(f.text=[f.text]);var p=new TE(f.raw,f.styles,f.section);p=oc(p,f),p.text=[];var x=Xq(f,e,r);f.text.length>x&&(p.text=f.text.splice(x,f.text.length));var N=r.scaleFactor(),b=r.getLineHeightFactor();f.contentHeight=f.getContentHeight(N,b),f.contentHeight>=e&&(f.contentHeight=e,p.styles.minCellHeight-=e),f.contentHeight>n.height&&(n.height=f.contentHeight),p.contentHeight=p.getContentHeight(N,b),p.contentHeight>a&&(a=p.contentHeight),i[h.index]=p}}var E=new jE(n.raw,-1,n.section,i,!0);E.height=a;for(var C=0,I=t.columns;C<I.length;C++){var h=I[C],p=E.cells[h.index];p&&(p.height=E.height);var f=n.cells[h.index];f&&(f.height=n.height)}return E}function Zq(n,e,t,r){var i=n.pageSize().height,a=r.settings.margin,c=a.top+a.bottom,d=i-c;e.section==="body"&&(d-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var h=e.getMinimumRowHeight(r.columns,n),f=h<t;if(h>d)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!f)return!1;var p=e.hasRowSpan(r.columns),x=e.getMaxCellHeight(r.columns)>d;return x?(p&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(p||r.settings.rowPageBreak==="avoid")}function Mg(n,e,t,r,i,a,c){var d=RE(n,e,r,a);if(t.canEntireRowFit(d,c))gc(n,e,t,a,c);else if(Zq(n,t,d,e)){var h=Jq(t,d,e,n);gc(n,e,t,a,c),$f(n,e,i,a,c),Mg(n,e,h,r,i,a,c)}else $f(n,e,i,a,c),Mg(n,e,t,r,i,a,c)}function gc(n,e,t,r,i){r.x=e.settings.margin.left;for(var a=0,c=i;a<c.length;a++){var d=c[a],h=t.cells[d.index];if(!h){r.x+=d.width;continue}n.applyStyles(h.styles),h.x=r.x,h.y=r.y;var f=e.callCellHooks(n,e.hooks.willDrawCell,h,t,d,r);if(f===!1){r.x+=d.width;continue}eV(n,h,r);var p=h.getTextPos();yE(h.text,p.x,p.y,{halign:h.styles.halign,valign:h.styles.valign,maxWidth:Math.ceil(h.width-h.padding("left")-h.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,h,t,d,r),r.x+=d.width}r.y+=t.height}function eV(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=_E(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),tV(n,e,t,r.lineWidth))}function tV(n,e,t,r){var i,a,c,d;r.top&&(i=t.x,a=t.y,c=t.x+e.width,d=t.y,r.right&&(c+=.5*r.right),r.left&&(i-=.5*r.left),h(r.top,i,a,c,d)),r.bottom&&(i=t.x,a=t.y+e.height,c=t.x+e.width,d=t.y+e.height,r.right&&(c+=.5*r.right),r.left&&(i-=.5*r.left),h(r.bottom,i,a,c,d)),r.left&&(i=t.x,a=t.y,c=t.x,d=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(d+=.5*r.bottom),h(r.left,i,a,c,d)),r.right&&(i=t.x+e.width,a=t.y,c=t.x+e.width,d=t.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(d+=.5*r.bottom),h(r.right,i,a,c,d));function h(f,p,x,N,b){n.getDocument().setLineWidth(f),n.getDocument().line(p,x,N,b,"S")}}function RE(n,e,t,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function $f(n,e,t,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(d){return gc(n,e,d,r,i)}),e.callEndPageHooks(n,r);var c=e.settings.margin;wE(n,e,t,r),LE(n),e.pageNumber++,r.x=c.left,r.y=c.top,t.y=c.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(d){return gc(n,e,d,r,i)}),n.applyStyles(n.userStyles))}function LE(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function nV(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=EE(this,r),a=CE(this,i);return IE(this,a),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){yE(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return vh.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){vh.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new vh(this),a=SE(i,e,window,t,!1),c=a.head,d=a.body,h=((r=c[0])===null||r===void 0?void 0:r.map(function(f){return f.content}))||[];return{columns:h,rows:d,data:d}}}var Ev;function kE(n,e){var t=EE(n,e),r=CE(n,t);IE(n,r)}try{if(typeof window<"u"&&window){var VN=window,UN=VN.jsPDF||((Ev=VN.jspdf)===null||Ev===void 0?void 0:Ev.jsPDF);UN&&nV(UN)}}catch(n){console.error("Could not apply autoTable plugin",n)}const rV=n=>new Promise((e,t)=>{const r=new Image;r.src=n,r.onload=()=>e(r),r.onerror=t}),iV=async n=>{const e=new Et,t=[107,114,128],r=[107,114,128],i=[243,244,246];try{const N=await rV(m0);e.addImage(N,"PNG",20,15,25,25)}catch(N){console.error("Erreur chargement logo",N)}e.setFontSize(24),e.setTextColor(t[0],t[1],t[2]),e.text("BOULANGERIE",55,25),e.setFontSize(10),e.setTextColor(r[0],r[1],r[2]),e.text("Adresse de la boulangerie",55,32),e.text("Tl: +221 77 575 41 59 / +221 78 582 27 72",55,37),e.text("Email: contact@boulangerie.sn",55,42),e.setFontSize(28),e.setTextColor(0,0,0),e.text("FACTURE",140,25),e.setFontSize(11),e.setTextColor(r[0],r[1],r[2]),e.text(`N ${n.numeroFacture}`,140,35),e.text(`Date: ${n.dateFacture.toLocaleDateString("fr-FR")}`,140,42),e.text(`Livraison: ${n.dateLivraison.toLocaleDateString("fr-FR")}`,140,49);const a=sV(n.statut);e.setFillColor(a[0],a[1],a[2]),e.rect(140,52,50,8,"F"),e.setTextColor(255,255,255),e.setFontSize(9),e.text(aV(n.statut),142,58),e.setLineWidth(.5),e.setDrawColor(r[0],r[1],r[2]),e.line(20,70,190,70),e.setFontSize(14),e.setTextColor(0,0,0),e.text("FACTURER :",20,85),e.setFontSize(11),e.setTextColor(r[0],r[1],r[2]);let c=95;if(e.text(n.client?.nom||"Client inconnu",20,c),n.client?.adresse){c+=6;const N=n.client.adresse;e.text(N,20,c)}if(n.client?.telephone&&(c+=6,e.text(`Tl: ${n.client.telephone}`,20,c)),n.client?.email){c+=6;const N=n.client.email;e.text(`Email: ${N}`,20,c)}e.setFontSize(11),e.setTextColor(0,0,0),e.text("CONDITIONS:",140,85),e.setTextColor(r[0],r[1],r[2]);const d=n.conditionsPaiement||" rception";e.text(d,140,95),e.text(`TVA: ${n.tauxTVA}%`,140,102);const h=Math.max(c+15,120),f=n.lignes.map(N=>[N.produit?.nom||"Produit inconnu",N.quantiteLivree.toString(),N.quantiteRetournee.toString(),N.quantiteFacturee.toString(),Ef(N.prixUnitaire),Ef(N.montantLigne)]);kE(e,{startY:h,head:[["Produit","Qt Liv.","Qt Ret.","Qt Fact.","P.U.","Total"]],body:f,theme:"grid",headStyles:{fillColor:t,textColor:[255,255,255],fontSize:8,fontStyle:"bold",halign:"center"},bodyStyles:{fontSize:8,cellPadding:2},columnStyles:{0:{cellWidth:"auto",halign:"left",minCellWidth:50},1:{cellWidth:20,halign:"center"},2:{cellWidth:20,halign:"center"},3:{cellWidth:20,halign:"center"},4:{cellWidth:24,halign:"right"},5:{cellWidth:24,halign:"right"}},alternateRowStyles:{fillColor:i},margin:{left:20,right:20},styles:{overflow:"linebreak",cellWidth:"wrap"}});const p=e.lastAutoTable.finalY+10;e.setFillColor(i[0],i[1],i[2]),e.rect(125,p,65,36,"F"),e.setFontSize(9),e.setTextColor(0,0,0),e.text("Total HT:",130,p+10),e.text(Ef(n.totalHT),185,p+10,{align:"right"}),e.text(`TVA (${n.tauxTVA}%):`,130,p+19),e.text(Ef(n.montantTVA),185,p+19,{align:"right"}),e.setLineWidth(.3),e.line(130,p+23,185,p+23),e.setFontSize(10),e.setFont("helvetica","bold"),e.text("TOTAL TTC:",130,p+32),e.text(Ef(n.totalTTC),185,p+32,{align:"right"});const x=e.internal.pageSize.height;return e.setFontSize(8),e.setFont("helvetica","normal"),e.setTextColor(r[0],r[1],r[2]),e.text("Merci de votre confiance !",20,x-25),e.text("TVA incluse - Paiement  rception de facture",20,x-20),e.text(`Facture gnre le ${new Date().toLocaleDateString("fr-FR")}  ${new Date().toLocaleTimeString("fr-FR")}`,20,x-15),e.text("Page 1/1",170,x-15),e},sV=n=>{switch(n){case"en_attente_retours":return[251,191,36];case"validee":return[59,130,246];case"envoyee":return[99,102,241];case"payee":return[34,197,94];case"annulee":return[239,68,68];default:return[107,114,128]}},aV=n=>{switch(n){case"en_attente_retours":return"EN ATTENTE";case"validee":return"VALIDE";case"envoyee":return"ENVOYE";case"payee":return"PAYE";case"annulee":return"ANNULE";default:return n.toUpperCase()}},PE=async n=>{try{const e=await iV(n),t=`Facture_${n.numeroFacture}_${n.client?.nom?.replace(/\s/g,"_")||"Client"}.pdf`;return e.save(t),!0}catch(e){throw console.error("Erreur lors de la gnration du PDF:",e),new Error("Impossible de gnrer le PDF")}},oV=({facture:n,isOpen:e,onClose:t})=>{const{modifierTauxTVA:r}=rm(),[i,a]=he.useState(!1),[c,d]=he.useState("");if(!n)return null;const h=b=>{switch(b){case"en_attente_retours":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"validee":return"bg-blue-100 text-blue-800 border-blue-200";case"envoyee":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"payee":return"bg-green-100 text-green-800 border-green-200";case"annulee":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=b=>{switch(b){case"en_attente_retours":return"En attente retours";case"validee":return"Valide";case"envoyee":return"Envoye";case"payee":return"Paye";case"annulee":return"Annule";default:return b}},p=async()=>{try{const b=parseFloat(c);if(isNaN(b)||b<0||b>100){Pt.error(" Veuillez saisir un taux de TVA valide (0-100%)");return}await r(n.id,b),Pt.success(` Taux de TVA modifi  ${b}%`),a(!1),d("")}catch{Pt.error(" Erreur lors de la modification du taux de TVA")}},x=()=>{d(n.tauxTVA.toString()),a(!0)},N=()=>{a(!1),d("")};return l.jsx(Yu,{isOpen:e,onClose:t,title:`Facture ${n.numeroFacture}`,size:"lg",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"border-b border-gray-200 pb-4",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center gap-3",children:[l.jsx("img",{src:m0,alt:"Logo",className:"h-8 w-auto"}),n.numeroFacture]}),l.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Date de livraison : ",n.dateLivraison.toLocaleDateString("fr-FR")]}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Date de facturation : ",n.dateFacture.toLocaleDateString("fr-FR")]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${h(n.statut)}`,children:f(n.statut)}),l.jsx("div",{className:"mt-2 text-2xl font-bold text-gray-900",children:Ra(n.totalTTC)}),(n.statut==="validee"||n.statut==="envoyee"||n.statut==="payee")&&l.jsx("div",{className:"mt-3",children:l.jsxs(Ur,{onClick:async()=>{try{await PE(n),Pt.success(` PDF de la facture ${n.numeroFacture} tlcharg`)}catch{Pt.error(" Erreur lors de la gnration du PDF")}},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:download",className:"text-sm"}),"Tlcharger PDF"]})})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:account",className:"text-xl text-blue-600"}),"Informations client"]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Nom : "}),l.jsx("span",{className:"text-gray-900",children:n.client?.nom||"Client inconnu"})]}),n.client?.adresse&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Adresse : "}),l.jsx("span",{className:"text-gray-900",children:n.client.adresse})]}),n.client?.telephone&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Tlphone : "}),l.jsx("span",{className:"text-gray-900",children:n.client.telephone})]}),n.client?.email&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Email : "}),l.jsx("span",{className:"text-gray-900",children:n.client.email})]})]})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:file-document",className:"text-xl text-green-600"}),"Dtails facture"]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Conditions de paiement : "}),l.jsx("span",{className:"text-gray-900",children:n.conditionsPaiement})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"TVA : "}),i?l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("input",{type:"number",value:c,onChange:b=>d(b.target.value),className:"w-16 px-2 py-1 border border-gray-300 rounded text-sm",min:"0",max:"100",step:"0.1",autoFocus:!0}),l.jsx("span",{className:"text-gray-600 text-sm",children:"%"}),l.jsx("button",{onClick:p,className:"text-green-600 hover:text-green-800 text-sm p-1",title:"Confirmer",children:l.jsx(de,{icon:"mdi:check"})}),l.jsx("button",{onClick:N,className:"text-red-600 hover:text-red-800 text-sm p-1",title:"Annuler",children:l.jsx(de,{icon:"mdi:close"})})]}):l.jsxs("span",{className:"text-gray-900 flex items-center gap-2",children:[n.tauxTVA,"%",n.statut!=="payee"&&n.statut!=="annulee"&&l.jsx("button",{onClick:x,className:"text-blue-600 hover:text-blue-800 text-xs p-1",title:"Modifier le taux de TVA",children:l.jsx(de,{icon:"mdi:pencil"})})]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Retours complts : "}),l.jsx("span",{className:`font-medium ${n.retoursCompletes?"text-green-600":"text-orange-600"}`,children:n.retoursCompletes?"Oui":"Non"})]}),n.validatedAt&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Valide le : "}),l.jsx("span",{className:"text-gray-900",children:n.validatedAt.toLocaleDateString("fr-FR")})]}),n.paidAt&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Paye le : "}),l.jsx("span",{className:"text-gray-900",children:n.paidAt.toLocaleDateString("fr-FR")})]})]})]})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-3 flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:format-list-bulleted",className:"text-xl text-purple-600"}),"Dtail des produits"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 rounded-lg",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produit"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qt livre"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qt retourne"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qt facture"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix unitaire"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.lignes.map((b,E)=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:b.produit?.nom||"Produit inconnu"}),l.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:b.quantiteLivree}),l.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:b.quantiteRetournee}),l.jsx("td",{className:"px-4 py-3 text-sm text-center font-medium text-gray-900",children:b.quantiteFacturee}),l.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:Ra(b.prixUnitaire)}),l.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900",children:Ra(b.montantLigne)})]},E))})]})})]}),l.jsx("div",{className:"border-t border-gray-200 pt-4",children:l.jsx("div",{className:"flex justify-end",children:l.jsx("div",{className:"w-64",children:l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Total HT :"}),l.jsx("span",{className:"text-gray-900",children:Ra(n.totalHT)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"font-medium text-gray-700",children:["TVA (",n.tauxTVA,"%) :"]}),l.jsx("span",{className:"text-gray-900",children:Ra(n.montantTVA)})]}),l.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[l.jsx("span",{className:"font-bold text-gray-900",children:"Total TTC :"}),l.jsx("span",{className:"font-bold text-lg text-gray-900",children:Ra(n.totalTTC)})]})]})})})})]})})},lV=({isOpen:n,onClose:e})=>{const{chargerFactures:t}=rm(),{chargerClients:r}=yu(),[i,a]=he.useState(new Date().getMonth()),[c,d]=he.useState(new Date().getFullYear()),[h,f]=he.useState(!1),[p,x]=he.useState([]),N=async()=>{f(!0);try{await t(),await r();const E=yu.getState().clients.filter(I=>I.typeClient==="boutique"&&I.eligibleRistourne);if(E.length===0){x([]),Pt("Aucun client ligible  la ristourne trouv.",{icon:""});return}const C=[];for(const I of E){const R=rm.getState().factures.filter(ue=>{const ie=new Date(ue.dateLivraison);return ue.clientId===I.id&&ie.getMonth()===i&&ie.getFullYear()===c&&ue.statut!=="annulee"&&ue.statut!=="brouillon"});if(R.length===0)continue;let U=0,$=0,z=0;R.forEach(ue=>{ue.lignes.forEach(ie=>{const V=ie.quantiteFacturee;if(V<=0)return;const D=ie.produit;if(D&&D.prixClient&&D.prixBoutique){const k=(D.prixBoutique||0)-(D.prixClient||0);k>0&&(U+=k*V)}$+=V,z+=ie.montantLigne})}),U>0&&C.push({client:I.nom,nombreFactures:R.length,volumeProduits:$,totalPaye:z,totalRistourne:U})}x(C),C.length===0?Pt("Aucune ristourne gnre pour cette priode.",{icon:"info"}):Pt.success(`${C.length} clients avec ristourne calcule !`)}catch(E){console.error(E),Pt.error("Erreur lors du calcul")}finally{f(!1)}},b=()=>{const E=new Et;E.setFontSize(18),E.text("Rapport des Ristournes Mensuelles",14,22),E.setFontSize(11);const C=new Date(c,i).toLocaleString("fr-FR",{month:"long",year:"numeric"});E.text(`Priode : ${C}`,14,32),E.text(`Gnr le : ${new Date().toLocaleDateString("fr-FR")}`,14,38);const I=["Client","Nbr Factures","Qt Produits","Total Ristourne"],R=p.map(z=>[z.client,z.nombreFactures,z.volumeProduits,Ra(z.totalRistourne)]);kE(E,{head:[I],body:R,startY:45,theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[66,66,66]}});const U=p.reduce((z,ue)=>z+ue.totalRistourne,0),$=E.lastAutoTable.finalY||50;E.setFontSize(12),E.setFont("helvetica","bold"),E.text(`Total  reverser : ${Ra(U)}`,14,$+15),E.save(`ristournes_${c}_${i+1}.pdf`),Pt.success("PDF tlcharg !")};return l.jsx(Yu,{isOpen:n,onClose:e,title:"Calculateur de Ristournes (Cashback)",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex gap-4 items-end bg-gray-50 p-4 rounded-lg",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Eh,{label:"Mois",value:i.toString(),onChange:E=>a(parseInt(E.target.value)),options:Array.from({length:12},(E,C)=>({value:C.toString(),label:new Date(2e3,C,1).toLocaleString("fr-FR",{month:"long"})}))})}),l.jsx("div",{className:"flex-1",children:l.jsx(Eh,{label:"Anne",value:c.toString(),onChange:E=>d(parseInt(E.target.value)),options:[{value:"2024",label:"2024"},{value:"2025",label:"2025"}]})}),l.jsx(Ur,{onClick:N,isLoading:h,children:"Calculer"})]}),l.jsx("div",{className:"min-h-[200px]",children:h?l.jsx(Ox,{message:"Analyse des factures en cours..."}):p.length>0?l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"overflow-x-auto border rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Vol. Produits"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Ristourne"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((E,C)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:E.client}),l.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-500",children:E.volumeProduits}),l.jsx("td",{className:"px-4 py-3 text-sm text-right font-bold text-green-600",children:Ra(E.totalRistourne)})]},C))}),l.jsx("tfoot",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("td",{colSpan:2,className:"px-4 py-3 text-sm font-bold text-gray-900 text-right",children:"TOTAL"}),l.jsx("td",{className:"px-4 py-3 text-sm font-bold text-green-700 text-right",children:Ra(p.reduce((E,C)=>E+C.totalRistourne,0))})]})})]})}),l.jsx("div",{className:"flex justify-end",children:l.jsxs(Ur,{variant:"secondary",onClick:b,children:[l.jsx(de,{icon:"mdi:file-pdf-box",className:"mr-2 text-lg"}),"Tlcharger le rapport PDF"]})})]}):l.jsx("div",{className:"text-center py-10 text-gray-500",children:"Cliquez sur Calculer pour voir les ristournes  reverser."})})]})})},cV=()=>{const{factures:n,factureActive:e,isLoading:t,chargerFactures:r,chargerParametres:i,genererFacturesDepuisLivraisons:a,envoyerFacture:c,marquerPayee:d,annulerFacture:h,supprimerFacture:f,setFactureActive:p,actualiserStatutsFactures:x}=rm(),{chargerProgramme:N}=wl(),{chargerInvendusDuJour:b}=nm(),E=Fx(),[C,I]=he.useState(new Date().toISOString().split("T")[0]),[R,U]=he.useState("tous"),[$,z]=he.useState(!1),[ue,ie]=he.useState(!1);he.useEffect(()=>{(async()=>{try{await i(),await r()}catch(ce){console.error("Erreur lors de l'initialisation:",ce)}})()},[i,r]),he.useEffect(()=>{(async()=>{try{await r(),await x()}catch(ce){console.error("Erreur lors du rechargement des factures:",ce)}})()},[C,r,x]),he.useEffect(()=>{const Q=setInterval(async()=>{try{await x(),await r()}catch(ce){console.error("Erreur lors de la synchronisation automatique:",ce)}},3e4);return()=>clearInterval(Q)},[x,r]);const V=async()=>{try{const Q=new Date(C),ce=n.filter(X=>X.dateLivraison.toISOString().split("T")[0]===C);if(ce.length>0){const X=ce.filter(J=>J.statut==="en_attente_retours").length;if(!await E.confirm({title:"Mise  jour des factures",message:`Il existe dj ${ce.length} facture(s) pour le ${new Date(C).toLocaleDateString("fr-FR")} :
 ${X} facture(s) en attente de retours
 ${ce.length-X} facture(s) dj valide(s)

Cette action va :
 Vrifier l'tat des retours clients
 Mettre  jour automatiquement les statuts
 Passer en "Valide" si retours complts
 NE crera PAS de doublons`,confirmText:"Mettre  jour",cancelText:"Annuler",type:"warning"}))return}console.log(" Chargement du programme pour",Q.toLocaleDateString("fr-FR")),await N(Q),console.log(" Chargement des retours clients pour",Q.toLocaleDateString("fr-FR")),await b(Q),await new Promise(X=>setTimeout(X,500));const Se=wl.getState().programmeActuel?.commandesClients||[];console.log(` ${Se.length} commandes clients charges`);const Fe=nm.getState().invendusClients;console.log(` ${Fe.length} retours clients chargs`),Fe.length>0?console.log(" Clients avec retours:",Fe.map(X=>({clientId:X.clientId,client:X.client?.nom,produits:X.produits.length,retoursCompletes:X.retoursCompletes}))):console.warn(" Aucun retour client trouv pour cette date"),await a(Q,Se,Fe),await r(),Pt.success(" Factures gnres avec succs")}catch(Q){console.error("Erreur lors de la gnration:",Q),Pt.error(` Erreur lors de la gnration: ${Q}`)}},D=async(Q,ce)=>{try{switch(Q){case"voir":p(ce),z(!0);break;case"pdf":try{await PE(ce),Pt.success(` PDF de la facture ${ce.numeroFacture} tlcharg`)}catch(me){console.error("Erreur lors de la gnration du PDF:",me),Pt.error(" Erreur lors de la gnration du PDF")}break;case"envoyer":{await E.confirm({title:"Envoyer la facture",message:`Envoyer la facture ${ce.numeroFacture} au client "${ce.client?.nom||"Inconnu"}" ?

La facture passera au statut "Envoye".`,confirmText:"Envoyer",cancelText:"Annuler",type:"info"})&&(await c(ce.id),Pt.success(` Facture ${ce.numeroFacture} envoye au client`));break}case"relancer":Pt(" Relance client - Fonctionnalit  implmenter",{icon:"",duration:3e3});break;case"payer":{await E.confirm({title:"Marquer comme paye",message:`Confirmer le paiement de la facture ${ce.numeroFacture} (${Ra(ce.totalTTC)}) ?

La facture passera au statut "Paye".`,confirmText:"Confirmer le paiement",cancelText:"Annuler",type:"success"})&&(await d(ce.id),Pt.success(` Facture ${ce.numeroFacture} marque comme paye`));break}case"annuler":{await E.confirm({title:"Annuler la facture",message:`tes-vous sr de vouloir annuler la facture ${ce.numeroFacture} ?

Cette action est irrversible et la facture ne pourra plus tre modifie.`,confirmText:"Annuler la facture",cancelText:"Conserver",type:"danger"})&&(await h(ce.id),Pt.success(` Facture ${ce.numeroFacture} annule`));break}case"supprimer":{await E.confirm({title:"Supprimer la facture",message:`ATTENTION : tes-vous sr de vouloir SUPPRIMER DFINITIVEMENT la facture ${ce.numeroFacture} ?

Cette action supprimera la facture de la base de donnes.`,confirmText:"Supprimer dfinitivement",cancelText:"Annuler",type:"danger"})&&(await f(ce.id),Pt.success(` Facture ${ce.numeroFacture} supprime`));break}}}catch(me){console.error("Erreur lors de l'action:",me),Pt.error(` Erreur: ${me}`)}},k=async()=>{const Q=n.filter(me=>me.dateLivraison.toISOString().split("T")[0]===C&&me.statut==="en_attente_retours");if(Q.length===0){Pt(` Aucune facture en attente de retours pour le ${new Date(C).toLocaleDateString("fr-FR")}.`,{icon:"",duration:3e3});return}if(await E.confirm({title:"Actualisation des statuts",message:`${Q.length} facture(s) en attente de retours trouve(s) pour le ${new Date(C).toLocaleDateString("fr-FR")}.

Cette action va :
 Vrifier l'tat des retours pour chaque client
 Mettre  jour automatiquement les statuts
 Valider les factures si retours complts`,confirmText:"Actualiser",cancelText:"Annuler",type:"info"}))try{await x(),await r(),Pt.success(` Statuts des factures du ${new Date(C).toLocaleDateString("fr-FR")} actualiss`)}catch(me){console.error("Erreur lors de l'actualisation:",me),Pt.error(` Erreur lors de l'actualisation: ${me}`)}},G=n.filter(Q=>{const Se=Q.dateLivraison.toISOString().split("T")[0]===C,Fe=R==="tous"||Q.statut===R;return Se&&Fe}),S=n.filter(Q=>Q.dateLivraison.toISOString().split("T")[0]===C),L={total:S.length,enAttente:S.filter(Q=>Q.statut==="en_attente_retours").length,validees:S.filter(Q=>Q.statut==="validee").length,payees:S.filter(Q=>Q.statut==="payee").length,montantTotal:S.filter(Q=>Q.statut!=="annulee").reduce((Q,ce)=>Q+ce.totalTTC,0),montantEnAttente:S.filter(Q=>Q.statut==="validee"||Q.statut==="envoyee").reduce((Q,ce)=>Q+ce.totalTTC,0)},F=Q=>{switch(Q){case"brouillon":return"text-gray-600 bg-gray-100";case"en_attente_retours":return"text-yellow-700 bg-yellow-100";case"validee":return"text-blue-700 bg-blue-100";case"envoyee":return"text-indigo-700 bg-indigo-100";case"payee":return"text-green-700 bg-green-100";case"annulee":return"text-red-700 bg-red-100";default:return"text-gray-600 bg-gray-100"}},se=Q=>{switch(Q){case"brouillon":return"Brouillon";case"en_attente_retours":return"En attente retours";case"validee":return"Valide";case"envoyee":return"Envoye";case"payee":return"Paye";case"annulee":return"Annule";default:return Q}},ye=Q=>{const ce=[{key:"voir",label:"Voir dtails",icon:"mdi:eye",color:"text-blue-600"}];switch(Q.statut){case"en_attente_retours":ce.push({key:"supprimer",label:"Supprimer",icon:"mdi:trash-can-outline",color:"text-red-500 hover:bg-red-50"});break;case"validee":ce.push({key:"pdf",label:"Tlcharger PDF",icon:"mdi:download",color:"text-gray-600"}),ce.push({key:"envoyer",label:"Envoyer au client",icon:"mdi:send",color:"text-indigo-600"}),ce.push({key:"annuler",label:"Annuler",icon:"mdi:cancel",color:"text-red-600"}),ce.push({key:"supprimer",label:"Supprimer",icon:"mdi:trash-can-outline",color:"text-red-500 hover:bg-red-50"});break;case"envoyee":ce.push({key:"pdf",label:"Tlcharger PDF",icon:"mdi:download",color:"text-gray-600"}),ce.push({key:"relancer",label:"Relancer client",icon:"mdi:email-send",color:"text-orange-600"}),ce.push({key:"payer",label:"Marquer paye",icon:"mdi:cash-check",color:"text-green-600"});break;case"payee":ce.push({key:"pdf",label:"Tlcharger PDF",icon:"mdi:download",color:"text-gray-600"});break;case"annulee":ce.push({key:"supprimer",label:"Supprimer",icon:"mdi:trash-can-outline",color:"text-red-500 hover:bg-red-50"});break}return ce};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-linear-to-r from-purple-600 to-indigo-600 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:file-document",className:"text-2xl text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Factures"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Gnration et suivi des factures clients bases sur les livraisons et retours"})]})]}),l.jsxs(Ur,{onClick:()=>ie(!0),variant:"outline",className:"flex items-center gap-2 border-orange-200 text-orange-700 hover:bg-orange-50 hover:border-orange-300",children:[l.jsx(de,{icon:"mdi:calculator",className:"text-xl"}),l.jsx("span",{children:"Calculer Ristournes"})]})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:file-multiple",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:L.total}),l.jsx("div",{className:"text-gray-300 text-xs",children:"factures"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Total Factures"}),l.jsx("div",{className:"text-gray-300 text-sm",children:"Toutes priodes confondues"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:clock-outline",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:L.enAttente}),l.jsx("div",{className:"text-gray-300 text-xs",children:"en attente"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"En Attente Retours"}),l.jsx("div",{className:"text-gray-300 text-sm",children:"Ncessite saisie retours"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:check-circle",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:L.payees}),l.jsx("div",{className:"text-gray-300 text-xs",children:"payes"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Factures Payes"}),l.jsx("div",{className:"text-gray-300 text-sm",children:"Compltement rgles"})]}),l.jsxs("div",{className:"bg-linear-to-br from-gray-600 to-gray-700 rounded-2xl p-6 text-white shadow-lg hover:shadow-xl transition-all hover:scale-105 group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx(de,{icon:"mdi:cash",className:"text-2xl text-white"})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-bold",children:Ra(L.montantTotal)}),l.jsx("div",{className:"text-gray-300 text-xs",children:"FCFA"})]})]}),l.jsx("div",{className:"text-lg font-semibold",children:"Montant Total"}),l.jsx("div",{className:"text-gray-300 text-sm",children:"Chiffre d'affaires global"})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:file-plus",className:"text-lg text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Gnration de factures"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Crer des factures bases sur les livraisons du jour"})]})]})}),l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[l.jsx("div",{className:"flex-1 min-w-48",children:l.jsx(ir,{type:"date",label:"Date de livraison",value:C,onChange:Q=>I(Q.target.value)})}),l.jsxs(Ur,{onClick:V,isLoading:t,className:"flex items-center gap-2",children:[l.jsx(de,{icon:"mdi:plus",className:"text-sm"}),n.some(Q=>Q.dateLivraison.toISOString().split("T")[0]===C)?"Mettre  jour factures":"Gnrer nouvelles factures"," du ",new Date(C).toLocaleDateString("fr-FR")]}),l.jsxs(Ur,{onClick:k,isLoading:t,variant:"secondary",className:"flex items-center gap-2",children:[!t&&l.jsx(de,{icon:"mdi:sync",className:"text-sm"}),"Synchroniser avec retours"]})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(de,{icon:"mdi:file-document-multiple",className:"text-lg text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Liste des factures"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Filtrer et grer vos factures"})]})]})}),l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"mb-4 flex flex-wrap gap-4",children:l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filtrer par statut"}),l.jsxs("select",{value:R,onChange:Q=>U(Q.target.value),className:"block rounded-lg border border-gray-300 px-3 py-2 focus:border-orange-500 focus:ring-orange-500 focus:ring-1 sm:text-sm transition-colors bg-white",children:[l.jsx("option",{value:"tous",children:"Tous"}),l.jsx("option",{value:"en_attente_retours",children:"En attente retours"}),l.jsx("option",{value:"validee",children:"Valides"}),l.jsx("option",{value:"envoyee",children:"Envoyes"}),l.jsx("option",{value:"payee",children:"Payes"}),l.jsx("option",{value:"annulee",children:"Annules"})]})]})}),G.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(de,{icon:"mdi:file-document-outline",className:"text-6xl mb-4 text-gray-400"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune facture trouve"}),l.jsx("p",{className:"text-gray-600",children:R==="tous"?"Commencez par gnrer des factures pour une date donne":`Aucune facture avec le statut "${se(R)}"`})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"N Facture"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date livraison"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant TTC"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Retours"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(Q=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:Q.numeroFacture}),l.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:Q.client?.nom||"Client inconnu"}),l.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:Q.dateLivraison.toLocaleDateString("fr-FR")}),l.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:Ra(Q.totalTTC)}),l.jsx("td",{className:"px-4 py-2 text-sm",children:l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F(Q.statut)}`,children:se(Q.statut)})}),l.jsx("td",{className:"px-4 py-2 text-sm text-center",children:Q.retoursCompletes?l.jsx(de,{icon:"mdi:check-circle",className:"text-green-500 text-lg"}):l.jsx(de,{icon:"mdi:clock-outline",className:"text-yellow-500 text-lg"})}),l.jsx("td",{className:"px-4 py-2 text-sm",children:l.jsx("div",{className:"flex space-x-2",children:ye(Q).map(ce=>l.jsx("button",{onClick:()=>D(ce.key,Q),className:`p-1 rounded hover:bg-gray-100 ${ce.color}`,title:ce.label,children:l.jsx(de,{icon:ce.icon,className:"text-lg"})},ce.key))})})]},Q.id))})]})})]})]})]}),l.jsx(p0,{isOpen:E.isOpen,onClose:E.handleCancel,onConfirm:E.handleConfirm,title:E.title,message:E.message,confirmText:E.confirmText,cancelText:E.cancelText,type:E.type}),l.jsx(oV,{facture:e,isOpen:$,onClose:()=>{z(!1),p(null)}}),l.jsx(lV,{isOpen:ue,onClose:()=>ie(!1)})]})};const uV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),BN=n=>{const e=dV(n);return e.charAt(0).toUpperCase()+e.slice(1)},DE=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),hV=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var fV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const mV=he.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:c,...d},h)=>he.createElement("svg",{ref:h,...fV,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:DE("lucide",i),...!a&&!hV(d)&&{"aria-hidden":"true"},...d},[...c.map(([f,p])=>he.createElement(f,p)),...Array.isArray(a)?a:[a]]));const Di=(n,e)=>{const t=he.forwardRef(({className:r,...i},a)=>he.createElement(mV,{ref:a,iconNode:e,className:DE(`lucide-${uV(BN(n))}`,`lucide-${n}`,r),...i}));return t.displayName=BN(n),t};const pV=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],gV=Di("arrow-down-left",pV);const vV=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],yV=Di("arrow-right-left",vV);const xV=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],bV=Di("arrow-up-right",xV);const wV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_V=Di("circle-alert",wV);const NV=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],AV=Di("history",NV);const SV=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],EV=Di("map-pin",SV);const jV=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ME=Di("package",jV);const TV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],OE=Di("pen",TV);const CV=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],IV=Di("phone",CV);const RV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],FE=Di("plus",RV);const LV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],kV=Di("search",LV);const PV=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],DV=Di("tag",PV);const MV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],qE=Di("trash-2",MV);const OV=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],FV=Di("trending-down",OV);const qV=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],VV=Di("trending-up",qV);const UV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],BV=Di("triangle-alert",UV);const zV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],zN=Di("user",zV);const HV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$V=Di("users",HV);const GV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],WV=Di("x",GV),YV=()=>{const{matieres:n,getDepensesPeriode:e,getValeurConsommationPeriode:t}=Al(),{factures:r,chargerFactures:i}=rm(),[a,c]=ru.useState(0),[d,h]=ru.useState(!0),f=n.reduce(($,z)=>$+z.valeurTotale,0),p=new Date,x=new Date(p.getFullYear(),p.getMonth(),1),N=new Date(p.getFullYear(),p.getMonth()+1,0),b=t(x,p),E=e(x,p);ru.useEffect(()=>{(async()=>{h(!0);try{await i(x,N);const z=Pa(Hn(bt,"shopSales"),tr("date",">=",x),tr("date","<=",N)),ue=await ha(z);let ie=0;ue.docs.forEach(V=>{const D=V.data();if(D.produits&&Array.isArray(D.produits)){const k=D.produits.reduce((G,S)=>{const L=S.produit?.prixBoutique||0,F=S.venduTotal||0;return G+L*F},0);ie+=k}}),c(ie)}catch(z){console.error("Erreur chargement stats:",z)}finally{h(!1)}})()},[]);const I=r.filter($=>$.statut==="validee"||$.statut==="payee"||$.statut==="envoyee").reduce(($,z)=>$+z.totalTTC,0)+a,R=I-b,U=I>0?R/I*100:0;return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[l.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Valeur totale Stock"}),l.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:[Math.round(f).toLocaleString()," FCFA"]})]}),l.jsx("div",{className:"p-3 bg-blue-50 rounded-lg text-blue-600",children:l.jsx(ME,{size:24})})]})}),l.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Flux de Trsorerie (Achats)"}),l.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:[Math.round(E).toLocaleString()," FCFA"]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Achats du mois"})]}),l.jsx("div",{className:"p-3 bg-orange-50 rounded-lg text-orange-600",children:l.jsx(FV,{size:24})})]})}),l.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Cot Production"}),l.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mt-1 text-orange-600",children:[Math.round(b).toLocaleString()," FCFA"]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Matires consommes"})]}),l.jsx("div",{className:"p-3 bg-orange-50 rounded-lg text-orange-600",children:l.jsx(_V,{size:24})})]})}),l.jsx("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Marge Brute (Comptable)"}),d?l.jsx("h3",{className:"text-2xl font-bold text-gray-300 mt-1 animate-pulse",children:"..."}):l.jsxs(l.Fragment,{children:[l.jsxs("h3",{className:`text-2xl font-bold mt-1 ${R>=0?"text-green-600":"text-red-600"}`,children:[Math.round(R).toLocaleString()," FCFA"]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsxs("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${U>30?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[U.toFixed(1),"%"]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Ventes - Conso."})]})]})]}),l.jsx("div",{className:"p-3 bg-purple-50 rounded-lg text-purple-600",children:l.jsx(VV,{size:24})})]})})]})},KV=({onAddMouvement:n})=>{const{matieres:e,addMatiere:t,updateMatiere:r,deleteMatiere:i}=Al(),[a,c]=he.useState(null),[d,h]=he.useState(!1),[f,p]=he.useState({nom:"",unite:"kg",stockMinimum:"",prixMoyenPondere:"",stockActuel:"",valeurTotale:0}),x=E=>{E.preventDefault(),a?(r(a,{...f,stockMinimum:Number(f.stockMinimum)||0,stockActuel:Number(f.stockActuel)||0,prixMoyenPondere:Number(f.prixMoyenPondere)||0,valeurTotale:(Number(f.stockActuel)||0)*(Number(f.prixMoyenPondere)||0)}),c(null)):t({nom:f.nom||"",unite:f.unite||"kg",stockMinimum:Number(f.stockMinimum)||0,stockActuel:Number(f.stockActuel)||0,prixMoyenPondere:Number(f.prixMoyenPondere)||0,valeurTotale:(Number(f.stockActuel)||0)*(Number(f.prixMoyenPondere)||0),active:!0}),p({nom:"",unite:"kg",stockMinimum:"",prixMoyenPondere:"",stockActuel:"",valeurTotale:0}),h(!1)},N=E=>{p(E),c(E.id),h(!0)},b=E=>{window.confirm("tes-vous sr de vouloir supprimer cette matire premire ?")&&i(E)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Matires Premires"}),l.jsxs("button",{onClick:()=>{c(null),c(null),p({nom:"",unite:"kg",stockMinimum:"",prixMoyenPondere:"",stockActuel:"",valeurTotale:0}),h(!d)},className:"flex items-center space-x-2 bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:[l.jsx(FE,{size:20}),l.jsx("span",{children:"Nouvelle Matire"})]})]}),d&&l.jsxs("form",{onSubmit:x,className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),l.jsx("input",{required:!0,type:"text",value:f.nom,onChange:E=>p({...f,nom:E.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: Farine T55"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),l.jsxs("select",{value:f.unite,onChange:E=>p({...f,unite:E.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",children:[l.jsx("option",{value:"kg",children:"Kilogramme (kg)"}),l.jsx("option",{value:"g",children:"Gramme (g)"}),l.jsx("option",{value:"l",children:"Litre (l)"}),l.jsx("option",{value:"piece",children:"Pice"}),l.jsx("option",{value:"sac_50kg",children:"Sac 50kg"}),l.jsx("option",{value:"sac_25kg",children:"Sac 25kg"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Initial"}),l.jsx("input",{type:"number",min:"0",step:"0.01",value:f.stockActuel,onChange:E=>p({...f,stockActuel:E.target.value===""?"":parseFloat(E.target.value)}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",disabled:!!a}),a&&l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Pour modifier le stock, utilisez "Mouvement"'})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seuil d'alerte"}),l.jsx("input",{type:"number",min:"0",value:f.stockMinimum,onChange:E=>p({...f,stockMinimum:E.target.value===""?"":parseFloat(E.target.value)}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix Moyen Initial (FCFA)"}),l.jsx("input",{type:"number",min:"0",value:f.prixMoyenPondere,onChange:E=>p({...f,prixMoyenPondere:E.target.value===""?"":parseFloat(E.target.value)}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",disabled:!!a})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Annuler"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:a?"Mettre  jour":"Crer"})]})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-600",children:"Nom"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-600",children:"Stock Actuel"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-600",children:"Valeur (FCFA)"}),l.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-600",children:"tat"}),l.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-600",children:"Actions"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.map(E=>{const C=E.stockActuel<=E.stockMinimum;return l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsxs("td",{className:"px-6 py-4",children:[l.jsx("div",{className:"font-medium text-gray-900",children:E.nom}),l.jsxs("div",{className:"text-xs text-gray-500",children:["PMP: ",Math.round(E.prixMoyenPondere).toLocaleString()," FCFA / ",E.unite]})]}),l.jsxs("td",{className:"px-6 py-4 text-right font-medium text-gray-900",children:[E.stockActuel.toLocaleString()," ",l.jsx("span",{className:"text-gray-500 text-sm",children:E.unite})]}),l.jsx("td",{className:"px-6 py-4 text-right text-gray-600",children:Math.round(E.valeurTotale).toLocaleString()}),l.jsx("td",{className:"px-6 py-4 text-center",children:C?l.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[l.jsx(BV,{size:12,className:"mr-1"}),"Critique"]}):l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"OK"})}),l.jsx("td",{className:"px-6 py-4 text-right",children:l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx("button",{onClick:()=>n(E),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Ajouter un mouvement",children:l.jsx(yV,{size:18})}),l.jsx("button",{onClick:()=>N(E),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Modifier",children:l.jsx(OE,{size:18})}),l.jsx("button",{onClick:()=>b(E.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Supprimer",children:l.jsx(qE,{size:18})})]})})]},E.id)}),e.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"Aucune matire premire enregistre."})})]})]})})]})},QV=({isOpen:n,onClose:e,selectedMatiere:t})=>{const{addMouvement:r,fournisseurs:i}=Al(),[a,c]=he.useState({type:"achat",quantite:"",prixTotal:"",motif:"",auteur:"",responsable:"",fournisseurId:"",referenceDocument:""});if(he.useEffect(()=>{n&&c({type:"achat",quantite:"",prixTotal:"",motif:"",auteur:"",responsable:"",fournisseurId:"",referenceDocument:""})},[n,t]),!n||!t)return null;const d=p=>{const x=p===""?"":parseFloat(p),N={...a,quantite:x};a.type==="achat"&&typeof x=="number"&&t.prixMoyenPondere>0&&(N.prixTotal=Math.round(x*t.prixMoyenPondere)),c(N)},h=async p=>{p.preventDefault();try{await r({date:new Date,matiereId:t.id,type:a.type,quantite:Number(a.quantite)||0,prixTotal:a.type==="achat"?Number(a.prixTotal)||0:void 0,motif:a.motif,auteur:a.auteur,responsable:a.responsable,referenceDocument:a.referenceDocument,userId:"current-user-id"}),e()}catch(x){console.error("Erreur lors de l'ajout du mouvement:",x),alert("Erreur lors de l'enregistrement. Vrifiez votre connexion.")}},f=["consommation","perte","retour_fournisseur"].includes(a.type);return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[l.jsxs("h3",{className:"font-bold text-gray-800",children:["Mouvement de Stock : ",t.nom]}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:l.jsx(WV,{size:20})})]}),l.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de mouvement"}),l.jsxs("select",{value:a.type,onChange:p=>c({...a,type:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",children:[l.jsx("option",{value:"achat",children:"Achat / Entre"}),l.jsx("option",{value:"consommation",children:"Consommation (Production)"}),l.jsx("option",{value:"perte",children:"Perte / Gchis"}),l.jsx("option",{value:"retour_fournisseur",children:"Retour Fournisseur"}),l.jsx("option",{value:"correction",children:"Correction d'Inventaire"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[f?"Quantit Sortante":"Quantit Entrante"," (",t.unite,")"]}),l.jsx("input",{type:"number",min:"0",step:"0.01",required:!0,value:a.quantite,onChange:p=>d(p.target.value),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none font-bold text-lg"})]}),a.type==="achat"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix Total (FCFA)"}),l.jsx("input",{type:"number",min:"0",required:!0,value:a.prixTotal,onChange:p=>c({...a,prixTotal:p.target.value===""?"":parseFloat(p.target.value)}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:["Soit ",Number(a.quantite)>0?Math.round((Number(a.prixTotal)||0)/Number(a.quantite)):0," FCFA / ",t.unite]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fournisseur (Optionnel)"}),l.jsxs("select",{value:a.fournisseurId,onChange:p=>c({...a,fournisseurId:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",children:[l.jsx("option",{value:"",children:"Slectionner..."}),i.map(p=>l.jsx("option",{value:p.id,children:p.nom},p.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rfrence Facture / BL"}),l.jsx("input",{type:"text",value:a.referenceDocument,onChange:p=>c({...a,referenceDocument:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Auteur (Celui qui sort)"}),l.jsx("input",{type:"text",required:!0,value:a.auteur,onChange:p=>c({...a,auteur:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: Boulanger"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Valid par (Responsable) ",a.type!=="achat"&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",required:a.type!=="achat",value:a.responsable,onChange:p=>c({...a,responsable:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:a.type==="achat"?"Optionnel":"Ex: Grant"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motif / Commentaire"}),l.jsx("input",{type:"text",value:a.motif,onChange:p=>c({...a,motif:p.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:a.type==="perte"?"Ex: Sac dchir, Humidit...":"Optionnel"})]}),l.jsxs("div",{className:"pt-4 flex space-x-3",children:[l.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Annuler"}),l.jsxs("button",{type:"submit",className:`flex-1 px-4 py-2 rounded-lg text-white font-medium ${f?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"}`,children:["Valider ",f?"la Sortie":"l'Entre"]})]})]})]})})},XV=()=>{const{mouvements:n,matieres:e}=Al(),[t,r]=he.useState(""),a=n.map(h=>{const f=e.find(x=>x.id===h.matiereId);let p=h.prixTotal;return!p&&f&&["consommation","perte"].includes(h.type)&&(p=Math.abs(h.quantite)*f.prixMoyenPondere),{...h,matiereNom:f?f.nom:"Article Inconnu",matiereUnite:f?f.unite:"",displayPrice:p}}).filter(h=>h.matiereNom.toLowerCase().includes(t.toLowerCase())||h.motif&&h.motif.toLowerCase().includes(t.toLowerCase())),c=h=>{switch(h){case"achat":return"bg-green-100 text-green-800";case"consommation":return"bg-blue-100 text-blue-800";case"perte":return"bg-red-100 text-red-800";case"correction":return"bg-gray-100 text-gray-800";case"retour_fournisseur":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},d=h=>h==="achat"?l.jsx(gV,{size:16,className:"mr-1"}):l.jsx(bV,{size:16,className:"mr-1"});return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Historique des Mouvements"}),l.jsxs("div",{className:"relative",children:[l.jsx(kV,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),l.jsx("input",{type:"text",placeholder:"Rechercher...",value:t,onChange:h=>r(h.target.value),className:"pl-10 pr-4 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-orange-500 outline-none w-64"})]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:[l.jsx("th",{className:"px-6 py-3",children:"Date"}),l.jsx("th",{className:"px-6 py-3",children:"Article"}),l.jsx("th",{className:"px-6 py-3",children:"Type"}),l.jsx("th",{className:"px-6 py-3",children:"Auteur / Resp."}),l.jsx("th",{className:"px-6 py-3 text-right",children:"Quantit"}),l.jsx("th",{className:"px-6 py-3 text-right",children:"Prix Total"}),l.jsx("th",{className:"px-6 py-3",children:"Motif / Rf"})]})}),l.jsxs("tbody",{className:"bg-white divide-y divide-gray-100",children:[a.map(h=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[new Date(h.date).toLocaleDateString("fr-FR")," ",l.jsx("span",{className:"text-xs",children:new Date(h.date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h.matiereNom}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c(h.type)}`,children:[d(h.type),h.type==="achat"?"Entre":h.type.charAt(0).toUpperCase()+h.type.slice(1)]})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[l.jsx("div",{className:"font-medium",children:h.auteur||"Inconnu"}),h.responsable&&l.jsxs("div",{className:"text-xs text-gray-500 text-green-600",children:["Valid par: ",h.responsable]})]}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:[h.quantite," ",l.jsx("span",{className:"text-gray-500 font-normal",children:h.matiereUnite})]}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:[h.displayPrice?`${h.displayPrice.toLocaleString()} FCFA`:"-",!h.prixTotal&&h.displayPrice&&l.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"(est.)"})]}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{children:h.motif||"-"}),h.referenceDocument&&l.jsxs("span",{className:"text-xs text-gray-400",children:["Rf: ",h.referenceDocument]})]})})]},h.id)),a.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"Aucun mouvement trouv."})})]})]})})]})},JV=()=>{const{fournisseurs:n,addFournisseur:e,updateFournisseur:t,deleteFournisseur:r}=Al(),[i,a]=he.useState(null),[c,d]=he.useState(!1),[h,f]=he.useState({nom:"",contact:"",telephone:"",adresse:"",categories:""}),p=async E=>{E.preventDefault();const C=h.categories.split(",").map(I=>I.trim()).filter(I=>I!=="");i?(await t(i,{nom:h.nom,contact:h.contact,telephone:h.telephone,adresse:h.adresse,categories:C}),a(null)):await e({nom:h.nom,contact:h.contact,telephone:h.telephone,adresse:h.adresse,categories:C,active:!0}),x(),d(!1)},x=()=>{f({nom:"",contact:"",telephone:"",adresse:"",categories:""})},N=E=>{f({nom:E.nom,contact:E.contact,telephone:E.telephone||"",adresse:E.adresse||"",categories:E.categories.join(", ")}),a(E.id),d(!0)},b=async E=>{window.confirm("tes-vous sr de vouloir supprimer ce fournisseur ?")&&await r(E)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Fournisseurs"}),l.jsxs("button",{onClick:()=>{a(null),x(),d(!c)},className:"flex items-center space-x-2 bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:[l.jsx(FE,{size:20}),l.jsx("span",{children:"Nouveau Fournisseur"})]})]}),c&&l.jsxs("form",{onSubmit:p,className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de l'entreprise"}),l.jsx("input",{required:!0,type:"text",value:h.nom,onChange:E=>f({...h,nom:E.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: Grands Moulins de Dakar"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Principal (Nom)"}),l.jsx("input",{required:!0,type:"text",value:h.contact,onChange:E=>f({...h,contact:E.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: M. Diallo"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tlphone"}),l.jsx("input",{type:"tel",value:h.telephone,onChange:E=>f({...h,telephone:E.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: 77 123 45 67"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse"}),l.jsx("input",{type:"text",value:h.adresse,onChange:E=>f({...h,adresse:E.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Adresse du dpt / bureau"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catgories (spares par des virgules)"}),l.jsx("input",{type:"text",value:h.categories,onChange:E=>f({...h,categories:E.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",placeholder:"Ex: Farine, Levure, Emballage"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Annuler"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:i?"Mettre  jour":"Ajouter"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.map(E=>l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5 hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-lg text-gray-800",children:E.nom}),l.jsxs("div",{className:"flex items-center text-gray-500 text-sm mt-1",children:[l.jsx(zN,{size:14,className:"mr-1"}),E.contact]})]}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("button",{onClick:()=>N(E),className:"p-1.5 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",children:l.jsx(OE,{size:16})}),l.jsx("button",{onClick:()=>b(E.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:l.jsx(qE,{size:16})})]})]}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[E.telephone&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(IV,{size:14,className:"mr-2 text-gray-400"}),E.telephone]}),E.adresse&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(EV,{size:14,className:"mr-2 text-gray-400"}),E.adresse]})]}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-50 flex flex-wrap gap-2",children:[E.categories.map((C,I)=>l.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-600",children:[l.jsx(DV,{size:10,className:"mr-1"}),C]},I)),E.categories.length===0&&l.jsx("span",{className:"text-xs text-gray-400 italic",children:"Aucune catgorie"})]})]},E.id)),n.length===0&&!c&&l.jsxs("div",{className:"col-span-full py-12 text-center text-gray-500 bg-gray-50 rounded-xl border border-dashed border-gray-200",children:[l.jsx(zN,{size:48,className:"mx-auto mb-4 opacity-20"}),l.jsx("p",{children:"Aucun fournisseur enregistr."}),l.jsx("button",{onClick:()=>d(!0),className:"mt-4 text-orange-500 hover:text-orange-600 font-medium",children:"Ajouter le premier fournisseur"})]})]})]})},ZV=()=>{const[n,e]=he.useState("stock"),[t,r]=he.useState(!1),[i,a]=he.useState(void 0),{chargerDonnees:c,isLoading:d}=Al();if(he.useEffect(()=>{c()},[c]),d)return l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsx("div",{className:"w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full animate-spin"})});const h=f=>{a(f),r(!0)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Stocks"}),l.jsx("p",{className:"text-gray-500",children:"Suivi des matires premires et dpenses (FCFA)"})]})}),l.jsx(YV,{}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[l.jsx("div",{className:"border-b border-gray-100",children:l.jsxs("nav",{className:"flex space-x-4 px-6","aria-label":"Tabs",children:[l.jsxs("button",{onClick:()=>e("stock"),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${n==="stock"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(ME,{size:18}),l.jsx("span",{children:"Inventaire"})]}),l.jsxs("button",{onClick:()=>e("mouvements"),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${n==="mouvements"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(AV,{size:18}),l.jsx("span",{children:"Historique Mouvements"})]}),l.jsxs("button",{onClick:()=>e("fournisseurs"),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${n==="fournisseurs"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx($V,{size:18}),l.jsx("span",{children:"Fournisseurs"})]})]})}),l.jsxs("div",{className:"p-6",children:[n==="stock"&&l.jsx(KV,{onAddMouvement:h}),n==="mouvements"&&l.jsx(XV,{}),n==="fournisseurs"&&l.jsx(JV,{})]})]}),l.jsx(QV,{isOpen:t,onClose:()=>{r(!1),a(void 0)},selectedMatiere:i})]})},ro=({children:n})=>{const{isAuthenticated:e,isLoading:t}=Am();return t?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):e?l.jsx(c9,{children:n}):l.jsx(E3,{})};function eU(){const{setUser:n,setLoading:e}=Am();return he.useEffect(()=>{const t=rL(iy,async r=>{if(e(!0),r)try{const i=Tn(bt,"users",r.uid),a=await ac(i);if(a.exists()){const c=a.data();n({id:r.uid,email:r.email||"",nom:c.nom||"",prenom:c.prenom||"",role:c.role||"admin",active:c.active??!0,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date})}else console.warn("Profil utilisateur introuvable dans Firestore"),n({id:r.uid,email:r.email||"",nom:"",prenom:"",role:"admin",active:!0,createdAt:new Date,updatedAt:new Date})}catch(i){console.error("Erreur lors de la rcupration du profil:",i),n(null)}else n(null);e(!1)});return()=>t()},[n,e]),l.jsx(oC,{children:l.jsxs(FT,{children:[l.jsx(Us,{path:"/login",element:l.jsx(E3,{})}),l.jsx(Us,{path:"/production",element:l.jsx(ro,{children:l.jsx(p9,{})})}),l.jsx(Us,{path:"/boulanger",element:l.jsx(ro,{children:l.jsx(g9,{})})}),l.jsx(Us,{path:"/livraison",element:l.jsx(ro,{children:l.jsx(y9,{})})}),l.jsx(Us,{path:"/retours",element:l.jsx(ro,{children:l.jsx(x9,{})})}),l.jsx(Us,{path:"/boutique",element:l.jsx(ro,{children:l.jsx(b9,{})})}),l.jsx(Us,{path:"/rapport",element:l.jsx(ro,{children:l.jsx(w9,{})})}),l.jsx(Us,{path:"/admin/produits",element:l.jsx(ro,{children:l.jsx(N9,{})})}),l.jsx(Us,{path:"/admin/clients",element:l.jsx(ro,{children:l.jsx(S9,{})})}),l.jsx(Us,{path:"/admin/livreurs",element:l.jsx(ro,{children:l.jsx(j9,{})})}),l.jsx(Us,{path:"/admin/users",element:l.jsx(ro,{children:l.jsx(C9,{})})}),l.jsx(Us,{path:"/facturation",element:l.jsx(ro,{children:l.jsx(cV,{})})}),l.jsx(Us,{path:"/stocks",element:l.jsx(ro,{children:l.jsx(ZV,{})})}),l.jsx(Us,{path:"/",element:l.jsx(MT,{to:"/production",replace:!0})})]})})}rj.createRoot(document.getElementById("root")).render(l.jsxs(he.StrictMode,{children:[l.jsx(eU,{}),l.jsx($j,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]}));export{nr as _,tU as c,W6 as g};
